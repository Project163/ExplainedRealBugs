{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/506","repository_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/506/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/506/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/506/events","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/506","id":2424843851,"node_id":"I_kwDOA3Qg686QiC5L","number":506,"title":"Cannot deserialize `UUID` values","user":{"login":"uniquonil","id":28079065,"node_id":"MDQ6VXNlcjI4MDc5MDY1","avatar_url":"https://avatars.githubusercontent.com/u/28079065?v=4","gravatar_id":"","url":"https://api.github.com/users/uniquonil","html_url":"https://github.com/uniquonil","followers_url":"https://api.github.com/users/uniquonil/followers","following_url":"https://api.github.com/users/uniquonil/following{/other_user}","gists_url":"https://api.github.com/users/uniquonil/gists{/gist_id}","starred_url":"https://api.github.com/users/uniquonil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uniquonil/subscriptions","organizations_url":"https://api.github.com/users/uniquonil/orgs","repos_url":"https://api.github.com/users/uniquonil/repos","events_url":"https://api.github.com/users/uniquonil/events{/privacy}","received_events_url":"https://api.github.com/users/uniquonil/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":433796747,"node_id":"MDU6TGFiZWw0MzM3OTY3NDc=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/labels/protobuf","name":"protobuf","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/milestones/59","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/milestone/59","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/milestones/59/labels","id":11356824,"node_id":"MI_kwDOA3Qg684ArUqY","number":59,"title":"2.17.3","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":1,"state":"open","created_at":"2024-07-25T03:22:29Z","updated_at":"2025-01-04T02:45:52Z","due_on":null,"closed_at":null},"comments":8,"created_at":"2024-07-23T10:31:11Z","updated_at":"2024-07-25T03:46:13Z","closed_at":"2024-07-25T03:26:29Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi.\r\nUsing jackson-dataformat-protobuf:2.16.2, though we can serialize `java.util.UUID`, we CAN'T deserialize.\r\n\r\n```\r\nimport com.fasterxml.jackson.dataformat.protobuf.ProtobufMapper;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Arrays;\r\nimport java.util.UUID;\r\n\r\npublic class JacksonProtobufUUID {\r\n    final static class Pojo {\r\n        public UUID id;\r\n    }\r\n\r\n    public static void main (String[] args) throws IOException {\r\n        var mapper = new ProtobufMapper();\r\n        var schema = mapper.generateSchemaFor(Pojo.class);\r\n\r\n        var pojo = new Pojo();\r\n        pojo.id = UUID.randomUUID();\r\n        System.out.println(pojo.id);\r\n\r\n        var serialized = mapper.writer(schema).writeValueAsBytes(pojo);\r\n        System.out.println(Arrays.toString(serialized));\r\n\r\n        var deserialized = mapper.reader(schema).readValue(serialized, Pojo.class);\r\n        System.out.println(deserialized.id);\r\n    }\r\n}\r\n```\r\nThis code results below:\r\n```\r\n993ea091-6eb4-429d-a8f0-540d4b18419e\r\n[10, 16, -103, 62, -96, -111, 110, -76, 66, -99, -88, -16, 84, 13, 75, 24, 65, -98]\r\nException in thread \"main\" com.fasterxml.jackson.databind.JsonMappingException: Invalid byte 99 in Unicode text block\r\n at [Source: (byte[])[18 bytes]; byte offset: #18] (through reference chain: JacksonProtobufUUID$Pojo[\"id\"])\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:402)\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:361)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.wrapAndThrow(BeanDeserializerBase.java:1937)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:312)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:177)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)\r\n\tat com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:2125)\r\n\tat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1603)\r\n\tat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1618)\r\n\tat JacksonProtobufUUID.main(JacksonProtobufUUID.java:23)\r\nCaused by: com.fasterxml.jackson.core.JsonParseException: Invalid byte 99 in Unicode text block\r\n at [Source: (byte[])[18 bytes]; byte offset: #18]\r\n\tat com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2481)\r\n\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:752)\r\n\tat com.fasterxml.jackson.dataformat.protobuf.ProtobufParser._finishShortText(ProtobufParser.java:1944)\r\n\tat com.fasterxml.jackson.dataformat.protobuf.ProtobufParser.getValueAsString(ProtobufParser.java:1390)\r\n\tat com.fasterxml.jackson.databind.deser.std.FromStringDeserializer.deserialize(FromStringDeserializer.java:148)\r\n\tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:138)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:310)\r\n\t... 6 more\r\n```\r\n\r\nIs this expected behavior?","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/506/timeline","performed_via_github_app":null,"state_reason":"completed"}