diff --git a/src/main/java/one/util/streamex/AbstractStreamEx.java b/src/main/java/one/util/streamex/AbstractStreamEx.java
index f80aa62..a3b7059 100644
--- a/src/main/java/one/util/streamex/AbstractStreamEx.java
+++ b/src/main/java/one/util/streamex/AbstractStreamEx.java
@@ -124,12 +124,14 @@ import static one.util.streamex.StreamExInternals.*;
         }
     }
 
-    AbstractStreamEx(Stream<T> stream, StreamContext context) {
-        super(stream, context);
+    @SuppressWarnings("unchecked")
+    AbstractStreamEx(Stream<? extends T> stream, StreamContext context) {
+        super((Stream<T>)stream, context);
     }
 
-    AbstractStreamEx(Spliterator<T> spliterator, StreamContext context) {
-        super(spliterator, context);
+    @SuppressWarnings("unchecked")
+    AbstractStreamEx(Spliterator<? extends T> spliterator, StreamContext context) {
+        super((Spliterator<T>)spliterator, context);
     }
 
     @Override
diff --git a/src/main/java/one/util/streamex/EntryStream.java b/src/main/java/one/util/streamex/EntryStream.java
index added6c..f64e4e6 100644
--- a/src/main/java/one/util/streamex/EntryStream.java
+++ b/src/main/java/one/util/streamex/EntryStream.java
@@ -64,14 +64,12 @@ import static one.util.streamex.StreamExInternals.*;
  * @param <V> the type of {@code Entry} values
  */
 public class EntryStream<K, V> extends AbstractStreamEx<Entry<K, V>, EntryStream<K, V>> {
-    @SuppressWarnings("unchecked")
     EntryStream(Stream<? extends Entry<K, V>> stream, StreamContext context) {
-        super((Stream<Entry<K, V>>) stream, context);
+        super(stream, context);
     }
 
-    @SuppressWarnings("unchecked")
     EntryStream(Spliterator<? extends Entry<K, V>> spliterator, StreamContext context) {
-        super((Spliterator<Entry<K, V>>) spliterator, context);
+        super(spliterator, context);
     }
 
     @Override
diff --git a/src/main/java/one/util/streamex/StreamEx.java b/src/main/java/one/util/streamex/StreamEx.java
index 453e211..561fa8a 100644
--- a/src/main/java/one/util/streamex/StreamEx.java
+++ b/src/main/java/one/util/streamex/StreamEx.java
@@ -78,11 +78,11 @@ import static one.util.streamex.StreamExInternals.*;
  */
 public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
 
-    StreamEx(Stream<T> stream, StreamContext context) {
+    StreamEx(Stream<? extends T> stream, StreamContext context) {
         super(stream, context);
     }
 
-    StreamEx(Spliterator<T> spliterator, StreamContext context) {
+    StreamEx(Spliterator<? extends T> spliterator, StreamContext context) {
         super(spliterator, context);
     }
 
@@ -102,6 +102,13 @@ public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
                 spliterator());
         return new StreamEx<>(spliterator, context);
     }
+    
+    private static <T> StreamEx<T> flatTraverse(Stream<T> src, Function<T, Stream<T>> streamProvider) {
+        return StreamEx.of(src).flatMap(t -> {
+            Stream<T> result = streamProvider.apply(t);
+            return result == null ? Stream.of(t) : flatTraverse(result, streamProvider).prepend(t);
+        });
+    }
 
     /**
      * Returns a stream consisting of the elements of this stream which are
@@ -1705,7 +1712,7 @@ public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
      *         collection
      * @see Collection#stream()
      */
-    public static <T> StreamEx<T> of(Collection<T> collection) {
+    public static <T> StreamEx<T> of(Collection<? extends T> collection) {
         return of(collection.spliterator());
     }
 
@@ -1741,7 +1748,7 @@ public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
      * @return the new stream
      * @since 0.3.4
      */
-    public static <T> StreamEx<T> of(Spliterator<T> spliterator) {
+    public static <T> StreamEx<T> of(Spliterator<? extends T> spliterator) {
         return new StreamEx<>(spliterator, StreamContext.SEQUENTIAL);
     }
 
@@ -1763,7 +1770,7 @@ public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
      * @return the new stream
      * @since 0.5.1
      */
-    public static <T> StreamEx<T> of(Iterator<T> iterator) {
+    public static <T> StreamEx<T> of(Iterator<? extends T> iterator) {
         return of(new UnknownSizeSpliterator.USOfRef<>(iterator));
     }
 
@@ -1780,7 +1787,7 @@ public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
      * @return the new stream
      * @since 0.5.1
      */
-    public static <T> StreamEx<T> of(Enumeration<T> enumeration) {
+    public static <T> StreamEx<T> of(Enumeration<? extends T> enumeration) {
         return of(new Iterator<T>() {
             @Override
             public boolean hasNext() {
@@ -1804,7 +1811,7 @@ public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
      *         empty stream
      * @since 0.1.1
      */
-    public static <T> StreamEx<T> of(Optional<T> optional) {
+    public static <T> StreamEx<T> of(Optional<? extends T> optional) {
         return optional.isPresent() ? of(optional.get()) : empty();
     }
 
@@ -1980,7 +1987,7 @@ public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
      * @throws NullPointerException if map is null
      * @see Map#keySet()
      */
-    public static <T, V> StreamEx<T> ofKeys(Map<T, V> map, Predicate<V> valueFilter) {
+    public static <T, V> StreamEx<T> ofKeys(Map<T, V> map, Predicate<? super V> valueFilter) {
         return EntryStream.of(map).filterValues(valueFilter).keys();
     }
 
@@ -2012,7 +2019,7 @@ public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
      * @throws NullPointerException if map is null
      * @see Map#values()
      */
-    public static <K, T> StreamEx<T> ofValues(Map<K, T> map, Predicate<K> keyFilter) {
+    public static <K, T> StreamEx<T> ofValues(Map<K, T> map, Predicate<? super K> keyFilter) {
         return EntryStream.of(map).filterKeys(keyFilter).values();
     }
 
@@ -2337,7 +2344,7 @@ public class StreamEx<T> extends AbstractStreamEx<T, StreamEx<T>> {
      */
     public static <T> StreamEx<T> ofTree(T root, Function<T, Stream<T>> mapper) {
         Stream<T> rootStream = mapper.apply(root);
-        return rootStream == null ? of(root) : of(flatTraverse(rootStream, mapper)).prepend(root);
+        return rootStream == null ? of(root) : flatTraverse(rootStream, mapper).prepend(root);
     }
 
     /**
diff --git a/src/main/java/one/util/streamex/StreamExInternals.java b/src/main/java/one/util/streamex/StreamExInternals.java
index a85286c..3665627 100644
--- a/src/main/java/one/util/streamex/StreamExInternals.java
+++ b/src/main/java/one/util/streamex/StreamExInternals.java
@@ -1048,13 +1048,6 @@ import java.util.stream.Stream;
         }
     }
 
-    static <T> Stream<T> flatTraverse(Stream<T> src, Function<T, Stream<T>> streamProvider) {
-        return src.flatMap(t -> {
-            Stream<T> result = streamProvider.apply(t);
-            return result == null ? Stream.of(t) : Stream.concat(Stream.of(t), flatTraverse(result, streamProvider));
-        });
-    }
-
     static <A> Predicate<A> finished(Collector<?, A, ?> collector) {
         if (collector instanceof CancellableCollector)
             return ((CancellableCollector<?, A, ?>) collector).finished();
diff --git a/src/test/java/one/util/streamex/StreamExTest.java b/src/test/java/one/util/streamex/StreamExTest.java
index 2ada3b5..cfe28f2 100644
--- a/src/test/java/one/util/streamex/StreamExTest.java
+++ b/src/test/java/one/util/streamex/StreamExTest.java
@@ -206,6 +206,17 @@ public class StreamExTest {
         assertTrue(StreamEx.of("a", "b", "c").spliterator().hasCharacteristics(Spliterator.ORDERED));
         assertFalse(StreamEx.of("a", "b", "c").unordered().spliterator().hasCharacteristics(Spliterator.ORDERED));
     }
+    
+    @Test
+    public void testCovariance() {
+        StreamEx<Number> stream = StreamEx.of(1, 2, 3);
+        List<Number> list = stream.toList();
+        assertEquals(asList(1,2,3), list);
+        
+        StreamEx<Object> objStream = StreamEx.of(list.spliterator());
+        List<Object> objList = objStream.toList();
+        assertEquals(asList(1, 2, 3), objList);
+    }
 
     @Test
     public void testToList() {
