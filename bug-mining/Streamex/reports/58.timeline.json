[{"id":482258565,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ4MjI1ODU2NQ==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/482258565","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-12-04T03:47:11Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":482258566,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDQ4MjI1ODU2Ng==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/482258566","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2015-12-04T03:47:12Z","milestone":{"title":"0.5.1"},"performed_via_github_app":null},{"actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-04T03:49:22Z","updated_at":"2015-12-04T03:49:22Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/amaembo/streamex/issues/29","repository_url":"https://api.github.com/repos/amaembo/streamex","labels_url":"https://api.github.com/repos/amaembo/streamex/issues/29/labels{/name}","comments_url":"https://api.github.com/repos/amaembo/streamex/issues/29/comments","events_url":"https://api.github.com/repos/amaembo/streamex/issues/29/events","html_url":"https://github.com/amaembo/streamex/issues/29","id":119996717,"node_id":"MDU6SXNzdWUxMTk5OTY3MTc=","number":29,"title":"Collapse not working","user":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":198134868,"node_id":"MDU6TGFiZWwxOTgxMzQ4Njg=","url":"https://api.github.com/repos/amaembo/streamex/labels/invalid","name":"invalid","color":"e6e6e6","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2015-12-02T17:39:53Z","updated_at":"2016-01-25T20:50:11Z","closed_at":"2015-12-04T03:49:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":33740196,"node_id":"MDEwOlJlcG9zaXRvcnkzMzc0MDE5Ng==","name":"streamex","full_name":"amaembo/streamex","private":false,"owner":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/amaembo/streamex","description":"Enhancing Java Stream API","fork":false,"url":"https://api.github.com/repos/amaembo/streamex","forks_url":"https://api.github.com/repos/amaembo/streamex/forks","keys_url":"https://api.github.com/repos/amaembo/streamex/keys{/key_id}","collaborators_url":"https://api.github.com/repos/amaembo/streamex/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/amaembo/streamex/teams","hooks_url":"https://api.github.com/repos/amaembo/streamex/hooks","issue_events_url":"https://api.github.com/repos/amaembo/streamex/issues/events{/number}","events_url":"https://api.github.com/repos/amaembo/streamex/events","assignees_url":"https://api.github.com/repos/amaembo/streamex/assignees{/user}","branches_url":"https://api.github.com/repos/amaembo/streamex/branches{/branch}","tags_url":"https://api.github.com/repos/amaembo/streamex/tags","blobs_url":"https://api.github.com/repos/amaembo/streamex/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/amaembo/streamex/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/amaembo/streamex/git/refs{/sha}","trees_url":"https://api.github.com/repos/amaembo/streamex/git/trees{/sha}","statuses_url":"https://api.github.com/repos/amaembo/streamex/statuses/{sha}","languages_url":"https://api.github.com/repos/amaembo/streamex/languages","stargazers_url":"https://api.github.com/repos/amaembo/streamex/stargazers","contributors_url":"https://api.github.com/repos/amaembo/streamex/contributors","subscribers_url":"https://api.github.com/repos/amaembo/streamex/subscribers","subscription_url":"https://api.github.com/repos/amaembo/streamex/subscription","commits_url":"https://api.github.com/repos/amaembo/streamex/commits{/sha}","git_commits_url":"https://api.github.com/repos/amaembo/streamex/git/commits{/sha}","comments_url":"https://api.github.com/repos/amaembo/streamex/comments{/number}","issue_comment_url":"https://api.github.com/repos/amaembo/streamex/issues/comments{/number}","contents_url":"https://api.github.com/repos/amaembo/streamex/contents/{+path}","compare_url":"https://api.github.com/repos/amaembo/streamex/compare/{base}...{head}","merges_url":"https://api.github.com/repos/amaembo/streamex/merges","archive_url":"https://api.github.com/repos/amaembo/streamex/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/amaembo/streamex/downloads","issues_url":"https://api.github.com/repos/amaembo/streamex/issues{/number}","pulls_url":"https://api.github.com/repos/amaembo/streamex/pulls{/number}","milestones_url":"https://api.github.com/repos/amaembo/streamex/milestones{/number}","notifications_url":"https://api.github.com/repos/amaembo/streamex/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/amaembo/streamex/labels{/name}","releases_url":"https://api.github.com/repos/amaembo/streamex/releases{/id}","deployments_url":"https://api.github.com/repos/amaembo/streamex/deployments","created_at":"2015-04-10T17:02:32Z","updated_at":"2025-11-02T14:04:09Z","pushed_at":"2025-08-30T10:58:34Z","git_url":"git://github.com/amaembo/streamex.git","ssh_url":"git@github.com:amaembo/streamex.git","clone_url":"https://github.com/amaembo/streamex.git","svn_url":"https://github.com/amaembo/streamex","homepage":"","size":4888,"stargazers_count":2268,"watchers_count":2268,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":255,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":20,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["collections","java","java8","streams-api"],"visibility":"public","forks":255,"open_issues":20,"watchers":2268,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I didn't found where it came from but the following code does not work:\n\n```\nstreamEx\n    .sorted()\n    .collapse(C::isNested,C::merge)\n    .collect(toList());\n    ...\n    //items are not collapsed\n\n    public static final boolean isNested(T a, T b) {\n        return a.isParent(b) || b.isParent(a);\n    };\n\n    public static final T merge(T a, T b) {\n        return a.isParent(b) ? a : b;\n    };\n```\n\n\"POJO\" is working :\n\n```\nList<T> tmp = \n    stream\n        .sorted()\n        .collect(toList());\nIterator<T> it = tmp.iterator();\nT curr, last;\ncurr = last = null;\nwhile (it.hasNext()) {\n    T oldLast = last;\n    last = curr;\n    curr = it.next();\n    if (last != null && last.isParent(curr)) {\n        it.remove();\n        curr = last;\n        last = oldLast;\n    }\n}\ntmp.stream().collect(toList());\n//items are sorted\n```\n","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/29/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/amaembo/streamex/issues/29/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":482266157,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MjI2NjE1Nw==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/482266157","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3d1d03411492743f3140958a4a26124695699ed6","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/3d1d03411492743f3140958a4a26124695699ed6","created_at":"2015-12-04T04:05:40Z","performed_via_github_app":null},{"id":489272077,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4OTI3MjA3Nw==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/489272077","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c37d534f41b02fd93cc3abed88708741209e0a81","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/c37d534f41b02fd93cc3abed88708741209e0a81","created_at":"2015-12-11T11:57:55Z","performed_via_github_app":null},{"id":490065350,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ5MDA2NTM1MA==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/490065350","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"411b838f750d28e01f7cfb13b90500ad20bb52c4","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/411b838f750d28e01f7cfb13b90500ad20bb52c4","created_at":"2015-12-12T11:14:43Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/164224666","html_url":"https://github.com/amaembo/streamex/issues/32#issuecomment-164224666","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/32","id":164224666,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDIyNDY2Ng==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-13T05:07:15Z","updated_at":"2015-12-13T05:07:15Z","body":"# Benchmarking report\n\nBenchmarking was performed on the strings like `\"a/b/c/\"` where `\"a/\"` is a parent of `\"a/b/\"` which is the parent of `\"a/b/c/\"` and so on (natural string order is used). The plain solution was used from the [#29] discussion which was improved to create separate collection instead of modifying the existing one (calling `iterator.remove()` many times for long `ArrayList` is really slow):\n\n```\nList<String> tmp = StreamEx.of(input).sorted().toList();\nList<String> result = new ArrayList<>();\nString curr, last;\ncurr = last = null;\nIterator<String> it = tmp.iterator();\nwhile (it.hasNext()) {\n    String oldLast = last;\n    last = curr;\n    curr = it.next();\n    if (last != null && curr.startsWith(last)) {\n        curr = last;\n        last = oldLast;\n    } else result.add(curr);\n}\n```\n\nThis solution was compared with StreamEx:\n\n```\nStreamEx.of(input).collect(MoreCollectors.collapsingNested(String::startsWith));\nStreamEx.of(input).parallel().collect(MoreCollectors.collapsingNested(String::startsWith));\n```\n\nTwo input data profiles were used: \"few\" and \"many\" which differ in number of nested elements. Total number of input elements was tested: 10, 1000 and 100000.\n\nWith current implementation the results are questionable:\n\n| (mode) | (n) | (count) | plain | streamExSeq | streamExPar |\n| --- | --: | --: | --: | --: | --: |\n| few | 10 | 10 | 0.430 | 0.959 | 5.720 |\n| few | 1000 | 69 | 198.748 | 211.043 | 269.505 |\n| few | 100000 | 49 | 44645.547 | 8229.129 | 3144.020 |\n| many | 10 | 10 | 0.390 | 0.903 | 5.829 |\n| many | 1000 | 995 | 184.910 | 464.416 | 605.273 |\n| many | 100000 | 53970 | 42784.015 | 109683.090 | 86376.655 |\n\nThe only case when current implementation outperforms the naive approach is `few/100000`. On fewer input or more repeats the results are bad and parallel implementation is even worse. Probably another approach should be designed to solve this problem...\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/164224666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":490603739,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ5MDYwMzczOQ==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/490603739","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4be64f2f8a9b571bd0ceec0500f2735d81618c84","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/4be64f2f8a9b571bd0ceec0500f2735d81618c84","created_at":"2015-12-14T04:42:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/164341226","html_url":"https://github.com/amaembo/streamex/issues/32#issuecomment-164341226","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/32","id":164341226,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDM0MTIyNg==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-14T04:42:32Z","updated_at":"2015-12-14T05:10:33Z","body":"Alternative implementation is added: `merging()` collector which is closer to the plain implementation and requires the sorting step. It parallelizes better and often works faster. Also it looks more generic, so probably it's a good idea to replace `collapsingNested` with `merging`.\n\nNew tests added:\n\n```\n//merging\nreturn StreamEx.of(input).sorted().collect(MoreCollectors.merging((a, b) -> b.startsWith(a)));\n//merging par\nreturn StreamEx.of(input).parallel().sorted().collect(MoreCollectors.merging((a, b) -> b.startsWith(a)));\n```\n\nResults (c-n = collapsingNested implementation):\n\n| (mode) | (n) | (count) | plain | c-n | c-n par | merging | merging par |\n| --- | --: | --: | --: | --: | --: | --: | --: |\n| few | 100 | 81 | 6.8 | 15.4 | 35.5 | 6.4 | 15.5 |\n| few | 1000 | 69 | 204.0 | 211.0 | 280.9 | 203.6 | 219.5 |\n| few | 10000 | 49 | 2962.4 | 872.7 | 968.1 | 2951.0 | 1254.5 |\n| few | 100000 | 49 | 44036.6 | 8200.4 | 3387.1 | 43839.2 | 16958.8 |\n| mid | 100 | 98 | 6.4 | 16.9 | 38.4 | 6.2 | 15.4 |\n| mid | 1000 | 769 | 195.6 | 474.1 | 611.4 | 198.2 | 208.3 |\n| mid | 10000 | 1344 | 2835.9 | 6049.6 | 6096.0 | 2831.5 | 1208.2 |\n| mid | 100000 | 512 | 46572.1 | 38007.6 | 32285.4 | 43582.8 | 16568.6 |\n| many | 100 | 100 | 6.2 | 15.5 | 35.7 | 6.0 | 15.4 |\n| many | 1000 | 992 | 184.5 | 460.9 | 587.4 | 187.1 | 197.0 |\n| many | 10000 | 9401 | 2745.9 | 7035.2 | 7265.7 | 2769.6 | 1202.1 |\n| many | 100000 | 53842 | 45219.6 | 109201.4 | 84471.8 | 44593.0 | 16011.8 |\n\nSo roughly speaking `collapsingNested` outperforms only if number of resulting groups is much less (15x or higher) than number of input elements.\n\nOf course if the input is known to be presorted, the numbers are drastically different (in this case `merging()` is always faster). Parallelization works more-less good in this case as well:\n\n| (mode) | (n) | (count) | plain | c-n | c-n par | merging | merging par |\n| --- | --: | --: | --: | --: | --: | --: | --: |\n| few | 100 | 81 | 1.3 | 17.8 | 47.2 | 1.5 | 14.8 |\n| few | 1000 | 69 | 12.4 | 57.4 | 77.3 | 16.3 | 17.9 |\n| few | 10000 | 49 | 98.2 | 381.6 | 217.7 | 156.9 | 64.7 |\n| few | 100000 | 49 | 3679.2 | 11191.7 | 1903.4 | 4572.2 | 1071.6 |\n| mid | 100 | 98 | 1.2 | 21.6 | 56.0 | 1.4 | 14.8 |\n| mid | 1000 | 769 | 16.5 | 413.2 | 785.8 | 17.7 | 24.8 |\n| mid | 10000 | 1344 | 190.7 | 4179.1 | 5132.2 | 267.0 | 122.6 |\n| mid | 100000 | 512 | 5486.1 | 18704.6 | 4143.7 | 5610.5 | 1307.5 |\n| many | 100 | 100 | 1.2 | 20.1 | 47.6 | 1.3 | 14.8 |\n| many | 1000 | 992 | 15.6 | 427.8 | 816.8 | 15.5 | 28.6 |\n| many | 10000 | 9401 | 228.6 | 5907.0 | 9125.9 | 262.6 | 140.7 |\n| many | 100000 | 53842 | 5564.0 | 67816.0 | 71654.0 | 5551.6 | 2432.7 |\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/164341226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":490913971,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ5MDkxMzk3MQ==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/490913971","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"00eaba94b760e2989c0dd1ad5f2df9445b93da81","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/00eaba94b760e2989c0dd1ad5f2df9445b93da81","created_at":"2015-12-14T12:26:22Z","performed_via_github_app":null},{"id":490913972,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ5MDkxMzk3Mg==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/490913972","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4783c67d10a97d68e532653bf47dda092ee7065b","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/4783c67d10a97d68e532653bf47dda092ee7065b","created_at":"2015-12-14T12:26:22Z","performed_via_github_app":null},{"id":491824701,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ5MTgyNDcwMQ==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/491824701","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8c7c70622a71d52f7ea09fbeae722cb87a95289b","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/8c7c70622a71d52f7ea09fbeae722cb87a95289b","created_at":"2015-12-15T05:09:42Z","performed_via_github_app":null},{"id":491825145,"node_id":"MDExOkNsb3NlZEV2ZW50NDkxODI1MTQ1","url":"https://api.github.com/repos/amaembo/streamex/issues/events/491825145","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2015-12-15T05:10:35Z","state_reason":null,"performed_via_github_app":null}]