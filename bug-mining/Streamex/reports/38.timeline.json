[{"id":480994298,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MDk5NDI5OA==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/480994298","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cbbfd4b7c32beba86996e83ac7f486aa75d156b2","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/cbbfd4b7c32beba86996e83ac7f486aa75d156b2","created_at":"2015-12-03T04:04:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161509729","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-161509729","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":161509729,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTUwOTcyOQ==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-03T04:09:49Z","updated_at":"2015-12-03T04:11:25Z","body":"Thank you for the report. Unfortunately I cannot reproduce your problem. See the [unit test](https://github.com/amaembo/streamex/blob/cbbfd4b7c32beba86996e83ac7f486aa75d156b2/src/test/java/one/util/streamex/issues/Issue0029.java). Please provide the complete failing test (or edit the one I committed).\n\nNote that you are doing the different things: in \"POJO\" approach you collapse only if `last.isParent(curr)`, but in \"streamEx\" approach you collapse also if `curr.isParent(last)`.\n\nProbably the origin of your problem is the fact that `BiPredicate` of [`collapse`](http://amaembo.github.io/streamex/javadoc/one/util/streamex/StreamEx.html#collapse-java.util.function.BiPredicate-java.util.function.BinaryOperator-) method family always receives the _adjacent elements from original stream_ (not the result of the previous merge). Anyways, provide the full test: probably your problem still can be solved with collapse.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161509729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":481313338,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MTMxMzMzOA==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/481313338","actor":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cf1ecfbf485a7dfc91beb4efe1b2d01e77284b3f","commit_url":"https://api.github.com/repos/GrmpCerber/streamex/commits/cf1ecfbf485a7dfc91beb4efe1b2d01e77284b3f","created_at":"2015-12-03T11:43:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161607734","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-161607734","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":161607734,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTYwNzczNA==","user":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-03T11:45:52Z","updated_at":"2015-12-03T11:45:52Z","body":"Here's a full working test.\nIt's true that my StreamEx version was coded slightly differently. I did it on purpose since I was unsure of the element's order.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161607734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161615213","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-161615213","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":161615213,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTYxNTIxMw==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-03T12:08:30Z","updated_at":"2015-12-03T12:08:30Z","body":"Thank you, I see now what's the problem. The `collapse()` method works as expected: the first time it passes `192.168.0.0/16` and `192.168.0.0/24` to the `BiPredicate`, it returns true and actually merged (you can check that result contains no `192.168.0.0/24`). But the second time it passes `192.168.0.0/24` and `192.168.1.0/24` to `BiPredicate` and it returns false.\n\nAs I said before, `collapse()` calls `BiPredicate` with two adjacent elements of the _original stream_, not the result of the previous merge. One of the reason for such design is to support parallel processing. Suppose that your input is split to two halves which are processed by separate threads. In this case the second thread will have `192.168.25.0/24` and so on up to `192.168.49.0/24`. None of these elements are parents to each other, so they cannot be merged at all (at least until the first half is processed).\n\nNevertheless your problem is interesting. I will think how to solve it easier with StreamEx or plain Stream API. Probably custom collector could be implemented which does the thing. Not closing the issue for now.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161615213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161632403","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-161632403","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":161632403,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTYzMjQwMw==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-03T13:07:25Z","updated_at":"2015-12-03T14:04:07Z","body":"I think up some collector-based solution and updated [your example](https://github.com/amaembo/streamex/blob/d06579dedbc1396dc599645f4ea929c69ccf5a92/src/test/java/one/util/streamex/issues/Issue0029.java). See `testCollect()` test which passes now for both sequential and parallel stream without preliminary sorting. You need `getLowerKey()` and `getHigherKey()`, but don't need anymore `isParent()` and `compareTo()` methods.\n\nThe idea is to create the collector for interval objects (which IP ranges are) using user-provided functions to extract the comparable \"lowerKey\" and \"higherKey\" objects. The only requirement is that input intervals cannot partially overlap: either A contains B totally or B contains A totally or they don't overlap at all. CIDR entries fulfill this requirement. This collector should correctly merge input intervals if one of them covers another one. Such collector could be added to my `MoreCollectors` class as it's quite generic and does not depend on particular problem of collapsing the IP ranges. What do you think?\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161632403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161644013","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-161644013","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":161644013,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTY0NDAxMw==","user":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-03T13:46:24Z","updated_at":"2015-12-03T13:46:24Z","body":"Got it. It should work in my use case.\nYet, just to mention it, this is not a perfect solution since we loose the <em>quasi-intermediate</em> characteristic of your collapse operation.\nDo you think this could be solve with a <em>quasi-intermediate</em> operation ?\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161644013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161652679","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-161652679","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":161652679,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTY1MjY3OQ==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-03T14:17:22Z","updated_at":"2015-12-03T14:17:22Z","body":"Without sorting it would be full-stop intermediate operation: downstream processing cannot begin until all the upstream processing is done. Now the only such operation in Stream API is `sorted()`. I don't want to add new full-stop intermediate operations (except clearly derived from `sorted()` as `sortedBy()`) as it's quite painful to create parallel implementation and also such operation has less predictable performance/memory usage characteristics.\n\nIt's probably possible to implement it assuming that the input is pre-sorted (as in your attempt). However note that sorting is unnecessary step here. It takes additional O(n) memory (to store all elements into the intermediate array/list and sort it), but online processing via TreeMap may take much less memory (for your input data as they are already sorted you never have more than two items in the TreeMap). Thus I'd prefer terminal solution (Collector). This way it would be more clear to the user: this operation creates hard-copy of your data. If you want to continue streaming, you may create new stream from that list.\n\nI rethink my solution. Probably it's still better to define your problem with `Comparator` and `BiPredicate` (which establishes parent-child relation) than by extracting lowerKey and higherKey. There's similar problem to collapse set of paths like `/a/b/*`, `/a/c/*`, `/a/b/c/*`, `/a/b/c/d/*` (we want to remove the latter two paths as they are superceded with the first path). In this case providing higherKey would be quite artificial, while `Comparator` and `BiPredicate` look more natural. So probably I will provide another version.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161652679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":481526812,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MTUyNjgxMg==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/481526812","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c5c51481211eaebe7e55899c0a71390108da540d","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/c5c51481211eaebe7e55899c0a71390108da540d","created_at":"2015-12-03T15:13:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161672218","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-161672218","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":161672218,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTY3MjIxOA==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-03T15:18:25Z","updated_at":"2015-12-03T15:18:25Z","body":"I committed the updated [solution](https://github.com/amaembo/streamex/blob/c5c51481211eaebe7e55899c0a71390108da540d/src/test/java/one/util/streamex/issues/Issue0029.java). Also I simplified your `compareTo` method. You may consider checking it on bigger input dataset.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161672218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161681780","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-161681780","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":161681780,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTY4MTc4MA==","user":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-03T15:45:03Z","updated_at":"2015-12-03T15:45:03Z","body":"Thanks,\nAs I said it was a \"simplified (and ugly+hardcoded) version of my work\" ;)\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161681780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-04T03:47:12Z","updated_at":"2015-12-04T03:47:12Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/amaembo/streamex/issues/32","repository_url":"https://api.github.com/repos/amaembo/streamex","labels_url":"https://api.github.com/repos/amaembo/streamex/issues/32/labels{/name}","comments_url":"https://api.github.com/repos/amaembo/streamex/issues/32/comments","events_url":"https://api.github.com/repos/amaembo/streamex/issues/32/events","html_url":"https://github.com/amaembo/streamex/issues/32","id":120326467,"node_id":"MDU6SXNzdWUxMjAzMjY0Njc=","number":32,"title":"New collector which collapses nested items","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":198134866,"node_id":"MDU6TGFiZWwxOTgxMzQ4NjY=","url":"https://api.github.com/repos/amaembo/streamex/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/amaembo/streamex/milestones/6","html_url":"https://github.com/amaembo/streamex/milestone/6","labels_url":"https://api.github.com/repos/amaembo/streamex/milestones/6/labels","id":1436648,"node_id":"MDk6TWlsZXN0b25lMTQzNjY0OA==","number":6,"title":"0.5.1","description":null,"creator":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2015-12-01T04:44:27Z","updated_at":"2015-12-17T11:33:12Z","due_on":null,"closed_at":"2015-12-17T11:33:12Z"},"comments":2,"created_at":"2015-12-04T03:47:11Z","updated_at":"2015-12-15T05:14:07Z","closed_at":"2015-12-15T05:10:35Z","author_association":"OWNER","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":33740196,"node_id":"MDEwOlJlcG9zaXRvcnkzMzc0MDE5Ng==","name":"streamex","full_name":"amaembo/streamex","private":false,"owner":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/amaembo/streamex","description":"Enhancing Java Stream API","fork":false,"url":"https://api.github.com/repos/amaembo/streamex","forks_url":"https://api.github.com/repos/amaembo/streamex/forks","keys_url":"https://api.github.com/repos/amaembo/streamex/keys{/key_id}","collaborators_url":"https://api.github.com/repos/amaembo/streamex/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/amaembo/streamex/teams","hooks_url":"https://api.github.com/repos/amaembo/streamex/hooks","issue_events_url":"https://api.github.com/repos/amaembo/streamex/issues/events{/number}","events_url":"https://api.github.com/repos/amaembo/streamex/events","assignees_url":"https://api.github.com/repos/amaembo/streamex/assignees{/user}","branches_url":"https://api.github.com/repos/amaembo/streamex/branches{/branch}","tags_url":"https://api.github.com/repos/amaembo/streamex/tags","blobs_url":"https://api.github.com/repos/amaembo/streamex/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/amaembo/streamex/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/amaembo/streamex/git/refs{/sha}","trees_url":"https://api.github.com/repos/amaembo/streamex/git/trees{/sha}","statuses_url":"https://api.github.com/repos/amaembo/streamex/statuses/{sha}","languages_url":"https://api.github.com/repos/amaembo/streamex/languages","stargazers_url":"https://api.github.com/repos/amaembo/streamex/stargazers","contributors_url":"https://api.github.com/repos/amaembo/streamex/contributors","subscribers_url":"https://api.github.com/repos/amaembo/streamex/subscribers","subscription_url":"https://api.github.com/repos/amaembo/streamex/subscription","commits_url":"https://api.github.com/repos/amaembo/streamex/commits{/sha}","git_commits_url":"https://api.github.com/repos/amaembo/streamex/git/commits{/sha}","comments_url":"https://api.github.com/repos/amaembo/streamex/comments{/number}","issue_comment_url":"https://api.github.com/repos/amaembo/streamex/issues/comments{/number}","contents_url":"https://api.github.com/repos/amaembo/streamex/contents/{+path}","compare_url":"https://api.github.com/repos/amaembo/streamex/compare/{base}...{head}","merges_url":"https://api.github.com/repos/amaembo/streamex/merges","archive_url":"https://api.github.com/repos/amaembo/streamex/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/amaembo/streamex/downloads","issues_url":"https://api.github.com/repos/amaembo/streamex/issues{/number}","pulls_url":"https://api.github.com/repos/amaembo/streamex/pulls{/number}","milestones_url":"https://api.github.com/repos/amaembo/streamex/milestones{/number}","notifications_url":"https://api.github.com/repos/amaembo/streamex/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/amaembo/streamex/labels{/name}","releases_url":"https://api.github.com/repos/amaembo/streamex/releases{/id}","deployments_url":"https://api.github.com/repos/amaembo/streamex/deployments","created_at":"2015-04-10T17:02:32Z","updated_at":"2025-11-02T14:04:09Z","pushed_at":"2025-08-30T10:58:34Z","git_url":"git://github.com/amaembo/streamex.git","ssh_url":"git@github.com:amaembo/streamex.git","clone_url":"https://github.com/amaembo/streamex.git","svn_url":"https://github.com/amaembo/streamex","homepage":"","size":4888,"stargazers_count":2268,"watchers_count":2268,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":255,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":20,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["collections","java","java8","streams-api"],"visibility":"public","forks":255,"open_issues":20,"watchers":2268,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"A new collector could be developed which is able to collect input elements to the sorted list removing elements which are considered to be the parts of another element. Elements have well-defined order (either natural order or specified by user-supplied comparator). Also user must supply a `BiPredicate<E, E> isPartOf` which accepts `(child, parent)` pair and returns true when `child` is a part of `parent`. The following invariants must hold:\n- for every A, B: `B isPartOf A => B > A` (every parent precedes its children according to the elements order)\n- for every A, B, C: `C isPartOf A && C > B && B > A => B isPartOf A` (all children immediately follow their parent according to the elements order)\n\nThe following signatures are proposed:\n\n```\nclass MoreCollectors {\n    public static <E> Collector<E, ?, List<E>> collapseNested(\n                        Comparator<? super E> comparator,\n                        BiPredicate<? super E, ? super E> isPartOf) {...}\n    public static <E extends Comparable<? super E>> Collector<E, ?, List<E>> collapseNested(\n                        BiPredicate<? super E, ? super E> isPartOf) {...}\n}\n```\n\n---\n\nFinal solution is to drop the comparator/comparable (assuming the stream is already properly sorted), rename the method to `dominators()` and swap the `BiPredicate` arguments. The `BiPredicate` transitivity is the only non-trivial requirement which must be held for correct processing in both sequential and parallel modes. Non-sorted inputs also could be used to solve some interesting problems. For example, this core leaves only numbers which are bigger than any preceding number:\n\n```\nstreamOfIntegers.collect(MoreCollectors.dominators((a, b) -> a >= b));\n```\n\nRelated to #29 \n- [x] Draft implementation\n- [x] Investigate possible ready solutions (if any) in other libraries (Apache Commons, Guava) to check whether there are best practices for such problem (nothing found which exactly matches given problem; Guava [RangeSet](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/RangeSet.html) is probably the closest thing, but still different).\n- [x] Unit tests\n- [x] Benchmark, compare with naive solution which sorts the whole input according to comparator, then processes the adjacent elements.\n- [x] JavaDoc\n- [x] CHANGES\n- [x] CHEATSHEET\n","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/32/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/amaembo/streamex/issues/32/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":482259050,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ4MjI1OTA1MA==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/482259050","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-12-04T03:48:32Z","label":{"name":"invalid","color":"e6e6e6"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161866521","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-161866521","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":161866521,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTg2NjUyMQ==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-04T03:49:22Z","updated_at":"2015-12-04T03:49:22Z","body":"I'm closing this issue as the original report \"Collapse not working\" is invalid (`collapse()` actually works as documented). However I opened a new Issue #32 to introduce a new `Collector` which will solve your problem. Thank you again for your report.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/161866521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":482259368,"node_id":"MDExOkNsb3NlZEV2ZW50NDgyMjU5MzY4","url":"https://api.github.com/repos/amaembo/streamex/issues/events/482259368","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2015-12-04T03:49:22Z","state_reason":null,"performed_via_github_app":null},{"id":482265853,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MjI2NTg1Mw==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/482265853","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ac4bfb621ecc30e127b9cf2985f025892a40704b","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/ac4bfb621ecc30e127b9cf2985f025892a40704b","created_at":"2015-12-04T04:04:47Z","performed_via_github_app":null},{"id":482265854,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MjI2NTg1NA==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/482265854","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"faec0788f6bf929cef78545730391c0560513c51","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/faec0788f6bf929cef78545730391c0560513c51","created_at":"2015-12-04T04:04:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/164648572","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-164648572","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":164648572,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDY0ODU3Mg==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-15T05:28:18Z","updated_at":"2015-12-15T05:28:18Z","body":"Finally I came to the solution which I like (see #32). My idea of using `TreeMap` actually rarely outperforms your approach on pre-sorting the input, so I created a `dominators()` collector instead which requires (for your problem) that the input is already sorted. Such collector is more generic as it can solve some interesting problems even with non-sorted inputs. So your problem will be solved like this:\n\n```\nStreamEx.of(getTestData()).sorted().collect(MoreCollectors.dominators(T::isParent));\n```\n\nAs I mentioned before, I don't like making such operation as quasi-intermediate, because it's impossible to provide efficient parallel implementation: I cannot even start sending the second part elements to the downstream without fully processing the first part. But having it as collector solves the problem perfectly as I can remove some elements from the resulting list if necessary when the first part arrives.\n\nThank you again for the interesting problem.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/164648572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/174658585","html_url":"https://github.com/amaembo/streamex/issues/29#issuecomment-174658585","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/29","id":174658585,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NDY1ODU4NQ==","user":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-25T20:50:11Z","updated_at":"2016-01-25T20:50:11Z","body":"Whaow ! nice work \nThanks\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/174658585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GrmpCerber","id":1545453,"node_id":"MDQ6VXNlcjE1NDU0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1545453?v=4","gravatar_id":"","url":"https://api.github.com/users/GrmpCerber","html_url":"https://github.com/GrmpCerber","followers_url":"https://api.github.com/users/GrmpCerber/followers","following_url":"https://api.github.com/users/GrmpCerber/following{/other_user}","gists_url":"https://api.github.com/users/GrmpCerber/gists{/gist_id}","starred_url":"https://api.github.com/users/GrmpCerber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrmpCerber/subscriptions","organizations_url":"https://api.github.com/users/GrmpCerber/orgs","repos_url":"https://api.github.com/users/GrmpCerber/repos","events_url":"https://api.github.com/users/GrmpCerber/events{/privacy}","received_events_url":"https://api.github.com/users/GrmpCerber/received_events","type":"User","user_view_type":"public","site_admin":false}}]