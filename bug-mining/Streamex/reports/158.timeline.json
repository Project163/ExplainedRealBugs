[{"id":569567984,"node_id":"MDEyOkxhYmVsZWRFdmVudDU2OTU2Nzk4NA==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/569567984","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-02-28T06:46:45Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":569645313,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDU2OTY0NTMxMw==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/569645313","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"82136f6f1bc1718b30c106f6d5d93fa4de2ce357","commit_url":"https://api.github.com/repos/amaembo/streamex/commits/82136f6f1bc1718b30c106f6d5d93fa4de2ce357","created_at":"2016-02-28T08:57:12Z","performed_via_github_app":null},{"id":569645442,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDU2OTY0NTQ0Mg==","url":"https://api.github.com/repos/amaembo/streamex/issues/events/569645442","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2016-02-28T08:57:29Z","milestone":{"title":"0.5.5"},"performed_via_github_app":null},{"id":569645526,"node_id":"MDExOkNsb3NlZEV2ZW50NTY5NjQ1NTI2","url":"https://api.github.com/repos/amaembo/streamex/issues/events/569645526","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2016-02-28T08:57:37Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189829237","html_url":"https://github.com/amaembo/streamex/issues/73#issuecomment-189829237","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/73","id":189829237,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTgyOTIzNw==","user":{"login":"lukaseder","id":734593,"node_id":"MDQ6VXNlcjczNDU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/734593?v=4","gravatar_id":"","url":"https://api.github.com/users/lukaseder","html_url":"https://github.com/lukaseder","followers_url":"https://api.github.com/users/lukaseder/followers","following_url":"https://api.github.com/users/lukaseder/following{/other_user}","gists_url":"https://api.github.com/users/lukaseder/gists{/gist_id}","starred_url":"https://api.github.com/users/lukaseder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukaseder/subscriptions","organizations_url":"https://api.github.com/users/lukaseder/orgs","repos_url":"https://api.github.com/users/lukaseder/repos","events_url":"https://api.github.com/users/lukaseder/events{/privacy}","received_events_url":"https://api.github.com/users/lukaseder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-28T09:10:41Z","updated_at":"2016-02-28T09:10:41Z","body":"Interesting ideas.\n\nI wonder if that version here:\n\n``` java\n// collapse elements with the same key reducing the values with given mergeFunction\nEntryStream<K, V> collapseKeys(BinaryOperator<V> mergeFunction);\n```\n\n... should perhaps rather look like this (or be overloaded with this):\n\n``` java\n<U> EntryStream<K, U> collapseKeys(U seed, BiFunction<? super U, ? super V, ? extends U> function, BinaryOperator<U> mergeFunction);\n```\n\nThe \"default\" implementation that collapses a key's values into a `List` would then be an obvious special case calling the above.\n\nAlso, have you thought about passing the key as well to the different collapse collectors? Perhaps, that could be useful for certain collapsing decisions...\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189829237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lukaseder","id":734593,"node_id":"MDQ6VXNlcjczNDU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/734593?v=4","gravatar_id":"","url":"https://api.github.com/users/lukaseder","html_url":"https://github.com/lukaseder","followers_url":"https://api.github.com/users/lukaseder/followers","following_url":"https://api.github.com/users/lukaseder/following{/other_user}","gists_url":"https://api.github.com/users/lukaseder/gists{/gist_id}","starred_url":"https://api.github.com/users/lukaseder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukaseder/subscriptions","organizations_url":"https://api.github.com/users/lukaseder/orgs","repos_url":"https://api.github.com/users/lukaseder/repos","events_url":"https://api.github.com/users/lukaseder/events{/privacy}","received_events_url":"https://api.github.com/users/lukaseder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189838049","html_url":"https://github.com/amaembo/streamex/issues/73#issuecomment-189838049","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/73","id":189838049,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTgzODA0OQ==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-28T10:40:47Z","updated_at":"2016-02-28T10:40:47Z","body":"For this form\n\n```\n<U> EntryStream<K, U> collapseKeys(U seed, BiFunction<? super U, ? super V, ? extends U> function, BinaryOperator<U> mergeFunction);\n```\n\nYou can use `collapseKeys(Collectors.reducing(seed, function, mergeFunction))`. Actually `collapseKeys()` is the shortcut for `collapseKeys(Collectors.toList())` and `collapseKeys(op)` is the shortcut for `collapseKeys(collectingAndThen(reducing(op), Optional::get))`. Having dedicated version without a seed is important as meddling with optionals is absolutely unnecessary here (it's known that the result of reduction is never empty). But for seed-based version using `Collector` looks fine for me.\n\nAs for passing keys, if you really need it, you can always use `.chain(StreamEx::of).collapse((e1, e2) -> Objects.equals(e1.getKey(), e2.getKey()), (e1, e2) -> {merge function for entries})`. I don't think that it's useful enough to get its own shortcut (though if you have some real-life examples, you may post them). Especially taking into account that I still dislike adding non-standard functional interfaces to my library, so `(key1, value1, key2, value2) -> {...}` is not an option for me currently...\n\nActually I added this feature (along with #72) to complete the chain of moreless efficient fixed-length batching (using `headTail` is certainly an option, but it has more overhead). I really dislike adding features which parallelize badly and if I add them, they should be quite universal, so other badly parallelizable problems could be expressed as well. I was convinced to add zipping two streams (see #60). Now fixed-size batching is also possible with:\n\n```\nStream<T> stream = ... // stream to create batches from\nStream<List<T>> batches = IntStream.ints()\n           .flatMapToObj(x -> StreamEx.constant(x, batchSize))\n           .zipWith(stream)\n           .collapseKeys()\n           .values();\n```\n\nWhile this looks quite verbose compared to possible dedicated method like (`.batches(batchSize)`), this is more flexible. For example, removing `.values()` you can have the batches automatically numbered. Also it's possible to create variable-length batches based on some condition. For example:\n\n```\nStream<List<T>> batches = IntStream.ints()\n           .flatMapToObj(x -> StreamEx.constant(x, x))\n           .zipWith(stream)\n           .collapseKeys()\n           .values();\n```\n\nHere we have increasing batch sizes (first List has size 1, second has size 2 and so on).\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189838049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189839225","html_url":"https://github.com/amaembo/streamex/issues/73#issuecomment-189839225","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/73","id":189839225,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTgzOTIyNQ==","user":{"login":"lukaseder","id":734593,"node_id":"MDQ6VXNlcjczNDU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/734593?v=4","gravatar_id":"","url":"https://api.github.com/users/lukaseder","html_url":"https://github.com/lukaseder","followers_url":"https://api.github.com/users/lukaseder/followers","following_url":"https://api.github.com/users/lukaseder/following{/other_user}","gists_url":"https://api.github.com/users/lukaseder/gists{/gist_id}","starred_url":"https://api.github.com/users/lukaseder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukaseder/subscriptions","organizations_url":"https://api.github.com/users/lukaseder/orgs","repos_url":"https://api.github.com/users/lukaseder/repos","events_url":"https://api.github.com/users/lukaseder/events{/privacy}","received_events_url":"https://api.github.com/users/lukaseder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-28T10:55:18Z","updated_at":"2016-02-28T10:55:18Z","body":"Thanks a lot for the feedback\n\n> But for seed-based version using Collector looks fine for me.\n\nYou're right. I keep forgetting to look in the `Collectors` class for utilities.  I think we're following subtly different strategies with our libraries. StreamEx puts much more weight on the `Collector` type.\n\n> I don't think that it's useful enough to get its own shortcut (though if you have some real-life examples, you may post them)\n\nI don't, currently. I was just curious to see if you rejected that for a reason.\n\n> I still dislike adding non-standard functional interfaces to my library\n\nYou can run, but you cannot hide :) You can always import `org.jooq.lambda.function.Function4`, too... and tuples, to avoid using `Map.Entry` ;)\n\nInteresting batch examples. Is that all lazy, though? I.e. is the second / third batch already collected while the first is traversed?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189839225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lukaseder","id":734593,"node_id":"MDQ6VXNlcjczNDU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/734593?v=4","gravatar_id":"","url":"https://api.github.com/users/lukaseder","html_url":"https://github.com/lukaseder","followers_url":"https://api.github.com/users/lukaseder/followers","following_url":"https://api.github.com/users/lukaseder/following{/other_user}","gists_url":"https://api.github.com/users/lukaseder/gists{/gist_id}","starred_url":"https://api.github.com/users/lukaseder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukaseder/subscriptions","organizations_url":"https://api.github.com/users/lukaseder/orgs","repos_url":"https://api.github.com/users/lukaseder/repos","events_url":"https://api.github.com/users/lukaseder/events{/privacy}","received_events_url":"https://api.github.com/users/lukaseder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189852565","html_url":"https://github.com/amaembo/streamex/issues/73#issuecomment-189852565","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/73","id":189852565,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTg1MjU2NQ==","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-28T11:58:36Z","updated_at":"2016-02-28T12:00:10Z","body":"Of course, it's lazy. That's the whole point of partial reduction.\n\nI will probably (or probably not) reconsider adding new functional interfaces in future, but definitely no tuples. I hate tuples in Java :-) `Map.Entry` is the only thing I can tolerate and it's not generic tuple, it's assymetric (key and value have different meaning in general). That's why I added `collapseKeys()`, but not `collapseValues()`. Also other methods like `EntryStream.grouping()` are assymetric. But if you need more than two elements to keep together, in object-oriented language you should create a new class instead. With meaningful field names and useful methods. And possibly using primitive fields to avoid unnecessary boxing. Tuples seriously hurt the readability.\n\nIt looks like you are too SQL-minded :-) You're fine with tuples. That's ok, this means that our libraries will always be different and suitable for different people with different tastes.\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189852565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189897626","html_url":"https://github.com/amaembo/streamex/issues/73#issuecomment-189897626","issue_url":"https://api.github.com/repos/amaembo/streamex/issues/73","id":189897626,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTg5NzYyNg==","user":{"login":"lukaseder","id":734593,"node_id":"MDQ6VXNlcjczNDU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/734593?v=4","gravatar_id":"","url":"https://api.github.com/users/lukaseder","html_url":"https://github.com/lukaseder","followers_url":"https://api.github.com/users/lukaseder/followers","following_url":"https://api.github.com/users/lukaseder/following{/other_user}","gists_url":"https://api.github.com/users/lukaseder/gists{/gist_id}","starred_url":"https://api.github.com/users/lukaseder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukaseder/subscriptions","organizations_url":"https://api.github.com/users/lukaseder/orgs","repos_url":"https://api.github.com/users/lukaseder/repos","events_url":"https://api.github.com/users/lukaseder/events{/privacy}","received_events_url":"https://api.github.com/users/lukaseder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-28T16:11:41Z","updated_at":"2016-02-28T16:11:41Z","body":"Well, what can I say... :) Tuples are at the core of functional programming just the same as to SQL, which isn't so different from functional programming. But no worries, you don't have to add them. And even if you need a `Tuple3`, in principle you can still resort to \"currying\" them as `Entry<K1, Entry<K2, V>>`\n\nAnyway, about partial reduction being lazy: I misunderstood your feature. I didn't catch the fact that you're collapsing only _adjacent_ keys, not _all_ equal keys (which can be the same thing if client code is in control of adjacency and ordering). That's quite cunning, and useful! Will shamelessly steal the idea :)\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/comments/189897626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lukaseder","id":734593,"node_id":"MDQ6VXNlcjczNDU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/734593?v=4","gravatar_id":"","url":"https://api.github.com/users/lukaseder","html_url":"https://github.com/lukaseder","followers_url":"https://api.github.com/users/lukaseder/followers","following_url":"https://api.github.com/users/lukaseder/following{/other_user}","gists_url":"https://api.github.com/users/lukaseder/gists{/gist_id}","starred_url":"https://api.github.com/users/lukaseder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukaseder/subscriptions","organizations_url":"https://api.github.com/users/lukaseder/orgs","repos_url":"https://api.github.com/users/lukaseder/repos","events_url":"https://api.github.com/users/lukaseder/events{/privacy}","received_events_url":"https://api.github.com/users/lukaseder/received_events","type":"User","user_view_type":"public","site_admin":false}}]