{"url":"https://api.github.com/repos/amaembo/streamex/issues/89","repository_url":"https://api.github.com/repos/amaembo/streamex","labels_url":"https://api.github.com/repos/amaembo/streamex/issues/89/labels{/name}","comments_url":"https://api.github.com/repos/amaembo/streamex/issues/89/comments","events_url":"https://api.github.com/repos/amaembo/streamex/issues/89/events","html_url":"https://github.com/amaembo/streamex/issues/89","id":142867943,"node_id":"MDU6SXNzdWUxNDI4Njc5NDM=","number":89,"title":"Add produce(Predicate<Consumer<T>>) static method for all stream types","user":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":198134866,"node_id":"MDU6TGFiZWwxOTgxMzQ4NjY=","url":"https://api.github.com/repos/amaembo/streamex/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/amaembo/streamex/milestones/11","html_url":"https://github.com/amaembo/streamex/milestone/11","labels_url":"https://api.github.com/repos/amaembo/streamex/milestones/11/labels","id":1616939,"node_id":"MDk6TWlsZXN0b25lMTYxNjkzOQ==","number":11,"title":"0.6.0","description":null,"creator":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":10,"state":"closed","created_at":"2016-03-02T04:10:46Z","updated_at":"2016-03-31T05:33:32Z","due_on":null,"closed_at":"2016-03-31T05:33:32Z"},"comments":0,"created_at":"2016-03-23T05:41:08Z","updated_at":"2016-03-23T06:01:53Z","closed_at":"2016-03-23T06:01:53Z","author_association":"OWNER","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"A useful case for Emitter (see #82) is reusing the same emitter again which leads us to the `produce` method. The `produce` method accepts predicate which is like `Spliterator.tryAdvance`, but is less strict:\n- You may call the action any number of times you want (though calling it once is preferred), including zero number of times\n- You should return true if you want the predicate to be called more or false if you don't want the predicate to be called anymore. It's guaranteed that after single false it's not called. Returning true does not mean that more elements available (next call may return false without calling the action).\n- You may even return true without calling the action, though some subsequent call should either return false or call the action, otherwise infinite loop may occur.\n\nSamples:\n\n``` java\n// like StreamEx.generate\npublic static <T> StreamEx<T> generate(Supplier<T> supplier) {\n    return StreamEx.produce(action -> {\n        action.accept(supplier.get());\n        return true;\n    });\n}\n\n// like StreamEx.of(Spliterator)\npublic static <T> StreamEx<T> fromSpliterator(Spliterator<T> spltr) {\n    return StreamEx.produce(action -> spltr.tryAdvance(action));\n}\n\n// like StreamEx.of(Iterator)\npublic static <T> StreamEx<T> fromIterator(Iterator<T> iter) {\n    return StreamEx.produce(action -> {\n        if(!iter.hasNext()) return false;\n        action.accept(iter.next());\n        return true;\n    });\n}\n\n// Stream of all matches of given matcher\npublic static StreamEx<String> matches(Matcher m) {\n    return StreamEx.produce(action -> {\n        if(!m.find()) return false;\n        action.accept(m.group());\n        return true;\n    });\n}\n\n// Drain queue until sentinel is reached (consuming the sentinel) or queue is empty\npublic static <T> StreamEx<T> fromQueue(Queue<T> queue, T sentinel) {\n    return StreamEx.produce(action -> {\n        T next = queue.poll();\n        if(next == null || next.equals(sentinel))\n            return false;\n        action.accept(next);\n        return true;\n    });\n}\n```\n- [x] Implementation\n- [x] Tests\n- [x] JavaDoc\n- [x] Changes\n- [x] Cheatsheet\n","closed_by":{"login":"amaembo","id":5114450,"node_id":"MDQ6VXNlcjUxMTQ0NTA=","avatar_url":"https://avatars.githubusercontent.com/u/5114450?v=4","gravatar_id":"","url":"https://api.github.com/users/amaembo","html_url":"https://github.com/amaembo","followers_url":"https://api.github.com/users/amaembo/followers","following_url":"https://api.github.com/users/amaembo/following{/other_user}","gists_url":"https://api.github.com/users/amaembo/gists{/gist_id}","starred_url":"https://api.github.com/users/amaembo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amaembo/subscriptions","organizations_url":"https://api.github.com/users/amaembo/orgs","repos_url":"https://api.github.com/users/amaembo/repos","events_url":"https://api.github.com/users/amaembo/events{/privacy}","received_events_url":"https://api.github.com/users/amaembo/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/amaembo/streamex/issues/89/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/amaembo/streamex/issues/89/timeline","performed_via_github_app":null,"state_reason":"completed"}