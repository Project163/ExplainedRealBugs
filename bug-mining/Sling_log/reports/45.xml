<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:37:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-7239] LogbackManager may miss out some OSGi config at time of startup</title>
                <link>https://issues.apache.org/jira/browse/SLING-7239</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;LogbackManager&lt;/tt&gt; currently upon construction reads all the OSGi config and configure them in Logback. Config which comes laters leads to logback reset. &lt;/p&gt;

&lt;p&gt;However during the time when its getting constructed it has a logic to ignore the reset flag initialization for startup. This may lead to a race condition where some OSGi configs are picked up while it is getting constructed and some OSGi config arriving later are not picked up. For e.g.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;LogbackManager constructor is invoked&lt;/li&gt;
	&lt;li&gt;It constructs LogConfigManager which registers the managed services&lt;/li&gt;
	&lt;li&gt;ManagedServices receive some OSGi config and push them to LogConfigManager&lt;/li&gt;
	&lt;li&gt;LogbackManager picks them up and add them to Logback but still startup is not finished i.e. started = true is not called&lt;/li&gt;
	&lt;li&gt;Some more OSGi config arrive - These would get ignored as LogbackManager#configChanged would ignore the calls because started != true&lt;/li&gt;
	&lt;li&gt;LogbackManager startup completes and started = true&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;So here configs at #5 would not be picked up unless at #7 some more OSGi config arrive. Or some one modifies the config post system start&lt;/p&gt;</description>
                <environment></environment>
        <key id="13117961">SLING-7239</key>
            <summary>LogbackManager may miss out some OSGi config at time of startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Nov 2017 15:10:33 +0000</created>
                <updated>Fri, 1 Dec 2017 06:34:57 +0000</updated>
                            <resolved>Mon, 27 Nov 2017 06:22:32 +0000</resolved>
                                                    <fixVersion>Commons Log 5.1.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16266423" author="chetanm" created="Mon, 27 Nov 2017 06:22:23 +0000"  >&lt;p&gt;Fixed this with &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=sling-org-apache-sling-commons-log.git;a=commitdiff;h=3271098b98cc661a3ee3cdb72aa1ef653b5d873d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The test creates around 200+ OSGi config for loggers which then fails on my setup as number of log files created are lesser. Post fix the test passes. The test does not fail for lower config count like 100 on my machine. So failure depends on machine as it is due to race condition&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mplr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>