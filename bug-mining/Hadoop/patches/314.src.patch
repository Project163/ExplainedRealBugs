diff --git a/common/CHANGES.txt b/common/CHANGES.txt
index 011d066a7a0..ef429796cb1 100644
--- a/common/CHANGES.txt
+++ b/common/CHANGES.txt
@@ -321,6 +321,8 @@ Trunk (unreleased changes)
     HADOOP-7377. Fix command name handling affecting DFSAdmin. (Daryn Sharp
     via mattf)
 
+    HADOOP-7402. TestConfiguration doesn't clean up after itself. (atm via eli)
+
 Release 0.22.0 - Unreleased
 
   INCOMPATIBLE CHANGES
diff --git a/common/src/test/core/org/apache/hadoop/conf/TestConfiguration.java b/common/src/test/core/org/apache/hadoop/conf/TestConfiguration.java
index 9faef9f5b7d..57dbc57daac 100644
--- a/common/src/test/core/org/apache/hadoop/conf/TestConfiguration.java
+++ b/common/src/test/core/org/apache/hadoop/conf/TestConfiguration.java
@@ -33,6 +33,7 @@
 import junit.framework.TestCase;
 import static org.junit.Assert.assertArrayEquals;
 
+import org.apache.commons.lang.StringUtils;
 import org.apache.hadoop.fs.Path;
 import org.codehaus.jackson.map.ObjectMapper; 
 
@@ -246,7 +247,12 @@ public void testTrim() throws IOException {
 
   public void testGetLocalPath() throws IOException {
     Configuration conf = new Configuration();
-    conf.set("dirs", "a, b, c ");
+    String[] dirs = new String[]{"a", "b", "c"};
+    for (int i = 0; i < dirs.length; i++) {
+      dirs[i] = new Path(System.getProperty("test.build.data"), dirs[i])
+          .toString();
+    }
+    conf.set("dirs", StringUtils.join(dirs, ","));
     for (int i = 0; i < 1000; i++) {
       String localPath = conf.getLocalPath("dirs", "dir" + i).toString();
       assertTrue("Path doesn't end in specified dir: " + localPath,
@@ -258,7 +264,12 @@ public void testGetLocalPath() throws IOException {
   
   public void testGetFile() throws IOException {
     Configuration conf = new Configuration();
-    conf.set("dirs", "a, b, c ");
+    String[] dirs = new String[]{"a", "b", "c"};
+    for (int i = 0; i < dirs.length; i++) {
+      dirs[i] = new Path(System.getProperty("test.build.data"), dirs[i])
+          .toString();
+    }
+    conf.set("dirs", StringUtils.join(dirs, ","));
     for (int i = 0; i < 1000; i++) {
       String localPath = conf.getFile("dirs", "dir" + i).toString();
       assertTrue("Path doesn't end in specified dir: " + localPath,
