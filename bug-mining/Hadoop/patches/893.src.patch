diff --git a/hadoop-common-project/hadoop-common/CHANGES.txt b/hadoop-common-project/hadoop-common/CHANGES.txt
index 17e5e595eef..13c0edcfba0 100644
--- a/hadoop-common-project/hadoop-common/CHANGES.txt
+++ b/hadoop-common-project/hadoop-common/CHANGES.txt
@@ -754,6 +754,9 @@ Release 2.1.0-beta - UNRELEASED
     HADOOP-8982. TestSocketIOWithTimeout fails on Windows.
     (Chris Nauroth via suresh)
 
+    HADOOP-9599. hadoop-config.cmd doesn't set JAVA_LIBRARY_PATH correctly.
+    (Mostafa Elhemali via ivanmi)
+
 Release 2.0.5-alpha - UNRELEASED
 
   INCOMPATIBLE CHANGES
diff --git a/hadoop-common-project/hadoop-common/src/main/bin/hadoop-config.cmd b/hadoop-common-project/hadoop-common/src/main/bin/hadoop-config.cmd
index cc2fee6ed86..3ea576cef20 100644
--- a/hadoop-common-project/hadoop-common/src/main/bin/hadoop-config.cmd
+++ b/hadoop-common-project/hadoop-common/src/main/bin/hadoop-config.cmd
@@ -183,13 +183,13 @@ set JAVA_PLATFORM=%JAVA_PLATFORM: =_%
 
 @rem Check if we're running hadoop directly from the build
 set JAVA_LIBRARY_PATH=
-if exist %HADOOP_CORE_HOME%\target\bin (
-  set JAVA_LIBRARY_PATH=%HADOOP_CORE_HOME%\target\bin
+if exist %HADOOP_COMMON_HOME%\target\bin (
+  set JAVA_LIBRARY_PATH=%HADOOP_COMMON_HOME%\target\bin
 )
 
 @rem For the distro case, check the bin folder
-if exist %HADOOP_CORE_HOME%\bin (
-  set JAVA_LIBRARY_PATH=%JAVA_LIBRARY_PATH%;%HADOOP_CORE_HOME%\bin
+if exist %HADOOP_COMMON_HOME%\bin (
+  set JAVA_LIBRARY_PATH=%JAVA_LIBRARY_PATH%;%HADOOP_COMMON_HOME%\bin
 )
 
 @rem
