diff --git a/CHANGES.txt b/CHANGES.txt
index c46d96c3c60..53f006902b4 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -888,7 +888,7 @@ Trunk (unreleased changes)
     HADOOP-6137. Fix project specific test-patch requirements
     (Giridharan Kesavan)
 
-    HADOOP-6138. Eliminate the depracate warnings introduced by H-5438.
+    HADOOP-6138. Eliminate the deprecated warnings introduced by H-5438.
     (He Yongqiang via szetszwo)
 
     HADOOP-6132. RPC client create an extra connection because of incorrect
@@ -897,6 +897,9 @@ Trunk (unreleased changes)
     HADOOP-6123. Add missing classpaths in hadoop-config.sh.  (Sharad Agarwal
     via szetszwo)
 
+    HADOOP-6172. Fix jar file names in hadoop-config.sh and include ${build.src}
+    as a part of the source list in build.xml.  (Hong Tang via szetszwo)
+
 Release 0.20.1 - Unreleased
 
   INCOMPATIBLE CHANGES
diff --git a/bin/hadoop-config.sh b/bin/hadoop-config.sh
index 0b12a84f140..7d4406b36e4 100644
--- a/bin/hadoop-config.sh
+++ b/bin/hadoop-config.sh
@@ -126,7 +126,7 @@ IFS=
 if [ -d "$HADOOP_CORE_HOME/webapps" ]; then
   CLASSPATH=${CLASSPATH}:$HADOOP_CORE_HOME
 fi
-for f in $HADOOP_CORE_HOME/hadoop-*-core.jar; do
+for f in $HADOOP_CORE_HOME/hadoop-core-*.jar; do
   CLASSPATH=${CLASSPATH}:$f;
 done
 
diff --git a/build.xml b/build.xml
index 89920a33dfd..0fb388239d5 100644
--- a/build.xml
+++ b/build.xml
@@ -294,7 +294,7 @@
     <!-- Compile Java files (excluding JSPs) checking warnings -->
     <javac 
      encoding="${build.encoding}" 
-     srcdir="${core.src.dir}"	
+     srcdir="${core.src.dir};${build.src}"	
      includes="org/apache/hadoop/**/*.java"
      destdir="${build.classes}"
      debug="${javac.debug}"
