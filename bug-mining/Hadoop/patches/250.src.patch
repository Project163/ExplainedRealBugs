diff --git a/CHANGES.txt b/CHANGES.txt
index 6cbad06ee59..92edb63f961 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -493,6 +493,9 @@ Release 0.22.0 - Unreleased
 
     HADOOP-7094. hadoop.css got lost during project split (cos)
 
+    HADOOP-7145. Configuration.getLocalPath should trim whitespace from
+    the provided directories. (todd)
+
 Release 0.21.1 - Unreleased
 
   IMPROVEMENTS
diff --git a/src/java/org/apache/hadoop/conf/Configuration.java b/src/java/org/apache/hadoop/conf/Configuration.java
index c05acf36208..a4c2fd6005a 100644
--- a/src/java/org/apache/hadoop/conf/Configuration.java
+++ b/src/java/org/apache/hadoop/conf/Configuration.java
@@ -1248,7 +1248,7 @@ public void setClass(String name, Class<?> theClass, Class<?> xface) {
    */
   public Path getLocalPath(String dirsProp, String path)
     throws IOException {
-    String[] dirs = getStrings(dirsProp);
+    String[] dirs = getTrimmedStrings(dirsProp);
     int hashCode = path.hashCode();
     FileSystem fs = FileSystem.getLocal(this);
     for (int i = 0; i < dirs.length; i++) {  // try each local dir
@@ -1280,7 +1280,7 @@ public Path getLocalPath(String dirsProp, String path)
    */
   public File getFile(String dirsProp, String path)
     throws IOException {
-    String[] dirs = getStrings(dirsProp);
+    String[] dirs = getTrimmedStrings(dirsProp);
     int hashCode = path.hashCode();
     for (int i = 0; i < dirs.length; i++) {  // try each local dir
       int index = (hashCode+i & Integer.MAX_VALUE) % dirs.length;
diff --git a/src/test/core/org/apache/hadoop/conf/TestConfiguration.java b/src/test/core/org/apache/hadoop/conf/TestConfiguration.java
index fc9deef34ff..278c4705d93 100644
--- a/src/test/core/org/apache/hadoop/conf/TestConfiguration.java
+++ b/src/test/core/org/apache/hadoop/conf/TestConfiguration.java
@@ -243,6 +243,30 @@ public void testTrim() throws IOException {
     }
   }
 
+  public void testGetLocalPath() throws IOException {
+    Configuration conf = new Configuration();
+    conf.set("dirs", "a, b, c ");
+    for (int i = 0; i < 1000; i++) {
+      String localPath = conf.getLocalPath("dirs", "dir" + i).toString();
+      assertTrue("Path doesn't end in specified dir: " + localPath,
+        localPath.endsWith("dir" + i));
+      assertFalse("Path has internal whitespace: " + localPath,
+        localPath.contains(" "));
+    }
+  }
+  
+  public void testGetFile() throws IOException {
+    Configuration conf = new Configuration();
+    conf.set("dirs", "a, b, c ");
+    for (int i = 0; i < 1000; i++) {
+      String localPath = conf.getFile("dirs", "dir" + i).toString();
+      assertTrue("Path doesn't end in specified dir: " + localPath,
+        localPath.endsWith("dir" + i));
+      assertFalse("Path has internal whitespace: " + localPath,
+        localPath.contains(" "));
+    }
+  }
+
   public void testToString() throws IOException {
     out=new BufferedWriter(new FileWriter(CONFIG));
     startConfig();
