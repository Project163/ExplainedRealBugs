diff --git a/hadoop-maven-plugins/src/main/java/org/apache/hadoop/maven/plugin/util/Exec.java b/hadoop-maven-plugins/src/main/java/org/apache/hadoop/maven/plugin/util/Exec.java
index 86e8d9c2a0e..a55041f82fb 100644
--- a/hadoop-maven-plugins/src/main/java/org/apache/hadoop/maven/plugin/util/Exec.java
+++ b/hadoop-maven-plugins/src/main/java/org/apache/hadoop/maven/plugin/util/Exec.java
@@ -72,14 +72,14 @@ public int run(List<String> command, List<String> output,
       stdOut.start();
       stdErr.start();
       retCode = p.waitFor();
+      stdOut.join();
+      stdErr.join();
       if (retCode != 0) {
         mojo.getLog().warn(command + " failed with error code " + retCode);
         for (String s : stdErr.getOutput()) {
           mojo.getLog().debug(s);
         }
       }
-      stdOut.join();
-      stdErr.join();
       output.addAll(stdOut.getOutput());
       if (errors != null) {
         errors.addAll(stdErr.getOutput());
