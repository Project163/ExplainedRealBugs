diff --git a/hadoop-common-project/hadoop-common/CHANGES.txt b/hadoop-common-project/hadoop-common/CHANGES.txt
index e42fdd6d38a..5212d23939f 100644
--- a/hadoop-common-project/hadoop-common/CHANGES.txt
+++ b/hadoop-common-project/hadoop-common/CHANGES.txt
@@ -381,6 +381,9 @@ Trunk (Unreleased)
     variables from current process environment/does not support overriding
     when launching new process (Chris Nauroth via bikas)
 
+    HADOOP-9481. Broken conditional logic with HADOOP_SNAPPY_LIBRARY. (Vadim
+    Bondarev via atm)
+
   OPTIMIZATIONS
 
     HADOOP-7761. Improve the performance of raw comparisons. (todd)
diff --git a/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/compress/snappy/SnappyCompressor.c b/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/compress/snappy/SnappyCompressor.c
index 07c1620a08d..21f1d9276d5 100644
--- a/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/compress/snappy/SnappyCompressor.c
+++ b/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/compress/snappy/SnappyCompressor.c
@@ -17,6 +17,8 @@
  */
 
 
+#include "org_apache_hadoop_io_compress_snappy.h"
+
 #if defined HADOOP_SNAPPY_LIBRARY
 
 #include <stdio.h>
@@ -28,7 +30,6 @@
 #include "config.h"
 #endif // UNIX
 
-#include "org_apache_hadoop_io_compress_snappy.h"
 #include "org_apache_hadoop_io_compress_snappy_SnappyCompressor.h"
 
 #define JINT_MAX 0x7fffffff
diff --git a/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/compress/snappy/SnappyDecompressor.c b/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/compress/snappy/SnappyDecompressor.c
index 9180384c5ad..43ec58fc77b 100644
--- a/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/compress/snappy/SnappyDecompressor.c
+++ b/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/compress/snappy/SnappyDecompressor.c
@@ -16,6 +16,7 @@
  * limitations under the License.
  */
 
+#include "org_apache_hadoop_io_compress_snappy.h"
 
 #if defined HADOOP_SNAPPY_LIBRARY
 
@@ -24,11 +25,10 @@
 #include <string.h>
 
 #ifdef UNIX
-#include "config.h"
 #include <dlfcn.h>
+#include "config.h"
 #endif
 
-#include "org_apache_hadoop_io_compress_snappy.h"
 #include "org_apache_hadoop_io_compress_snappy_SnappyDecompressor.h"
 
 static jfieldID SnappyDecompressor_clazz;
