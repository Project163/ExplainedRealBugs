diff --git a/CHANGES.txt b/CHANGES.txt
index d02eaacda3c..861df2f9089 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -914,6 +914,9 @@ Trunk (unreleased changes)
     HADOOP-6177. FSInputChecker.getPos() would return position greater 
     than the file size. (Hong Tang via hairong)
 
+    HADOOP-6188. TestTrash uses java.io.File api but not hadoop FileSystem api.
+    (Boris Shkolnik via szetszwo)
+
 Release 0.20.1 - Unreleased
 
   INCOMPATIBLE CHANGES
diff --git a/src/test/core/org/apache/hadoop/fs/TestTrash.java b/src/test/core/org/apache/hadoop/fs/TestTrash.java
index 7da3eb3bc36..2dda4195c82 100644
--- a/src/test/core/org/apache/hadoop/fs/TestTrash.java
+++ b/src/test/core/org/apache/hadoop/fs/TestTrash.java
@@ -61,18 +61,22 @@ protected static void checkTrash(FileSystem fs, Path trashRoot,
   
   // counts how many instances of the file are in the Trash
   // they all are in format fileName*
-  protected static int countSameDeletedFiles(FileSystem fs, final File trashDir,
-      final String fileName) throws IOException {
-    System.out.println("Counting " + fileName + " in " + trashDir.getAbsolutePath());
-    String [] res = trashDir.list(
-          new FilenameFilter() {
-            public boolean accept(File dir, String name) {
-                return name.startsWith(fileName);
-              }
-          }
-      );
-
-    return res.length;
+  protected static int countSameDeletedFiles(FileSystem fs, 
+      Path trashDir, Path fileName) throws IOException {
+
+    final String prefix = fileName.getName();
+    System.out.println("Counting " + fileName + " in " + trashDir.toString());
+
+    // filter that matches all the files that start with fileName*
+    PathFilter pf = new PathFilter() {
+      public boolean accept(Path file) {
+        return file.getName().startsWith(prefix);
+      }
+    };
+    // run the filter
+    FileStatus [] fss = fs.listStatus(trashDir, pf);
+
+    return fss==null? 0 : fss.length;
   }
 
   // check that the specified file is not in Trash
@@ -358,10 +362,14 @@ protected static void trashShell(final FileSystem fs, final Path base)
         assertTrue(val==0);
       }
       // current trash directory
-      File trashCurrent = new File(trashRoot.toUri().getPath() + myFile.getParent().toUri().getPath());
+      Path trashDir = new Path(trashRoot.toUri().getPath() + myFile.getParent().toUri().getPath());
+      
+      System.out.println("Deleting same myFile: myFile.parent=" + myFile.getParent().toUri().getPath() + 
+          "; trashroot="+trashRoot.toUri().getPath() + 
+          "; trashDir=" + trashDir.toUri().getPath());
       
-      int count = countSameDeletedFiles(fs, trashCurrent, myFile.getName());
-      System.out.println("counted " + count + " files " + myFile.getName() + "* in " + trashCurrent);
+      int count = countSameDeletedFiles(fs, trashDir, myFile);
+      System.out.println("counted " + count + " files " + myFile.getName() + "* in " + trashDir);
       assertTrue(count==num_runs);
     }
     
