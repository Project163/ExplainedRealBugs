diff --git a/hadoop-common-project/hadoop-common/CHANGES.txt b/hadoop-common-project/hadoop-common/CHANGES.txt
index 394e9c25bc5..ce878835466 100644
--- a/hadoop-common-project/hadoop-common/CHANGES.txt
+++ b/hadoop-common-project/hadoop-common/CHANGES.txt
@@ -238,6 +238,9 @@ Release 0.23.1 - Unreleased
 
    HADOOP-7837. no NullAppender in the log4j config. (eli)
 
+   HADOOP-7948. Shell scripts created by hadoop-dist/pom.xml to build tar do not 
+   properly propagate failure. (cim_michajlomatijkiw via tucu)
+
 Release 0.23.0 - 2011-11-01 
 
   INCOMPATIBLE CHANGES
diff --git a/hadoop-dist/pom.xml b/hadoop-dist/pom.xml
index 93fe32be252..888d5333270 100644
--- a/hadoop-dist/pom.xml
+++ b/hadoop-dist/pom.xml
@@ -98,11 +98,12 @@
                       run() {
                         echo "\$ ${@}"
                         "${@}"
-                        if [ $? != 0 ]; then
+                        res=$?
+                        if [ $res != 0 ]; then
                           echo
                           echo "Failed!"
                           echo
-                          exit $?
+                          exit $res
                         fi
                       }
 
@@ -139,11 +140,12 @@
                       run() {
                         echo "\$ ${@}"
                         "${@}"
-                        if [ $? != 0 ]; then
+                        res=$?
+                        if [ $res != 0 ]; then
                           echo
                           echo "Failed!"
                           echo
-                          exit $?
+                          exit $res
                         fi
                       }
 
