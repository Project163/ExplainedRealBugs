<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:57:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-18292] s3a storage class reduced redundancy breaks s3 select tests</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-18292</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;when you set your fs client to work with reduced redundancy, the s3 select tests fail&lt;/p&gt;

&lt;p&gt;probably need to clear the storage class option on the bucket before running those suites&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13450250">HADOOP-18292</key>
            <summary>s3a storage class reduced redundancy breaks s3 select tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="monthonk">Monthon Klongklaew</assignee>
                                    <reporter username="stevel@apache.org">Steve Loughran</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 15 Jun 2022 14:45:56 +0000</created>
                <updated>Thu, 13 Oct 2022 12:13:39 +0000</updated>
                                            <version>3.3.5</version>
                                                    <component>fs/s3</component>
                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17554647" author="stevel@apache.org" created="Wed, 15 Jun 2022 14:59:22 +0000"  >
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

	&amp;lt;property&amp;gt;
	    &amp;lt;name&amp;gt;fs.s3a.create.storage.&lt;span class=&quot;code-keyword&quot;&gt;class&amp;&lt;/span&gt;lt;/name&amp;gt;
	    &amp;lt;value&amp;gt;reduced_redundancy&amp;lt;/value&amp;gt;
	&amp;lt;/property&amp;gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; results in&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

[ERROR] testSelectOddRecordsIgnoreHeaderV1(org.apache.hadoop.fs.s3a.select.ITestS3Select)  Time elapsed: 1.42 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.hadoop.fs.s3a.AWSBadRequestException: SELECT * FROM S3OBJECT s WHERE s._5 = &lt;span class=&quot;code-quote&quot;&gt;&apos;TRUE&apos;&lt;/span&gt; on s3a:&lt;span class=&quot;code-comment&quot;&gt;//stevel-london/fork-0004/test/testSelectOddRecordsIgnoreHeaderV1.csv: com.amazonaws.services.s3.model.AmazonS3Exception: We &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not support REDUCED_REDUNDANCY storage class. Please check the service documentation and &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again. (Service: Amazon S3; Status Code: 400; Error Code: UnsupportedStorageClass; Request ID: 6P6ZCHS8Z0ZYXEK7; S3 Extended Request ID: K382PGoq6l0YtKTgU3FmZyj6SsrTanbXRA5+BNIt4yqLPcB9Li97Lu2GeCBBsJLmnKbKdyeyRQI=; Proxy: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;), S3 Extended Request ID: K382PGoq6l0YtKTgU3FmZyj6SsrTanbXRA5+BNIt4yqLPcB9Li97Lu2GeCBBsJLmnKbKdyeyRQI=:UnsupportedStorageClass: We &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not support REDUCED_REDUNDANCY storage class. Please check the service documentation and &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again. (Service: Amazon S3; Status Code: 400; Error Code: UnsupportedStorageClass; Request ID: 6P6ZCHS8Z0ZYXEK7; S3 Extended Request ID: K382PGoq6l0YtKTgU3FmZyj6SsrTanbXRA5+BNIt4yqLPcB9Li97Lu2GeCBBsJLmnKbKdyeyRQI=; Proxy: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
&lt;/span&gt;        at org.apache.hadoop.fs.s3a.S3AUtils.translateException(S3AUtils.java:241)
        at org.apache.hadoop.fs.s3a.Invoker.once(Invoker.java:124)
        at org.apache.hadoop.fs.s3a.Invoker.lambda$retry$4(Invoker.java:376)
        at org.apache.hadoop.fs.s3a.Invoker.retryUntranslated(Invoker.java:468)
        at org.apache.hadoop.fs.s3a.Invoker.retry(Invoker.java:372)
        at org.apache.hadoop.fs.s3a.Invoker.retry(Invoker.java:347)
        at org.apache.hadoop.fs.s3a.WriteOperationHelper.select(WriteOperationHelper.java:711)
        at org.apache.hadoop.fs.s3a.select.SelectBinding.executeSelect(SelectBinding.java:185)
        at org.apache.hadoop.fs.s3a.select.SelectBinding.select(SelectBinding.java:121)
        at org.apache.hadoop.fs.s3a.S3AFileSystem.select(S3AFileSystem.java:4985)
        at org.apache.hadoop.fs.s3a.S3AFileSystem.lambda$&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;$44(S3AFileSystem.java:5073)
        at org.apache.hadoop.util.LambdaUtils.eval(LambdaUtils.java:52)
        at org.apache.hadoop.fs.s3a.S3AFileSystem.lambda$openFileWithOptions$45(S3AFileSystem.java:5072)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:750)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the same for the other tests. (this is on my s3/&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17833&quot; title=&quot;Improve Magic Committer Performance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17833&quot;&gt;&lt;del&gt;HADOOP-17833&lt;/del&gt;&lt;/a&gt;-magic-committer-performance PR branch which I rebased last week, but i didn&apos;&apos;t go near the s3 select tests....)&lt;/p&gt;</comment>
                            <comment id="17554654" author="stevel@apache.org" created="Wed, 15 Jun 2022 15:13:20 +0000"  >
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failures: 
[ERROR]   ITestS3Select.testIntCastFailure:890-&amp;gt;expectSelectFailure:937-&amp;gt;AbstractS3SelectTest.verifyErrorCode:266 Expected Error codeCastFailed actual UnsupportedStorageClass
[ERROR]   ITestS3Select.testParseInvalidPathComponent:903-&amp;gt;expectSelectFailure:937-&amp;gt;AbstractS3SelectTest.verifyErrorCode:266 Expected Error codeParseInvalidPathComponent actual UnsupportedStorageClass
[ERROR]   ITestS3Select.testSelectGeneratedAliases:917-&amp;gt;expectSelectFailure:937-&amp;gt;AbstractS3SelectTest.verifyErrorCode:266 Expected Error codeInvalidTableAlias actual UnsupportedStorageClass
[ERROR]   ITestS3Select.testSelectInvalidTableAlias:910-&amp;gt;expectSelectFailure:937-&amp;gt;AbstractS3SelectTest.verifyErrorCode:266 Expected Error codeInvalidTableAlias actual UnsupportedStorageClass
[ERROR]   ITestS3Select.testSelectToDateParseFailure:897-&amp;gt;expectSelectFailure:937-&amp;gt;AbstractS3SelectTest.verifyErrorCode:266 Expected Error codeCastFailed actual UnsupportedStorageClass
[ERROR] Errors: 
[ERROR]   ITestS3Select.testCloseWithAbort &#187; AWSBadRequest SELECT * FROM S3OBJECT s on s...
[ERROR]   ITestS3Select.testCloseWithNoAbort &#187; AWSBadRequest SELECT * FROM S3OBJECT s on...
[ERROR]   ITestS3Select.testCommentsSkipped &#187; AWSBadRequest SELECT * FROM S3OBJECT s on ...
[ERROR]   ITestS3Select.testEmptyColumnsRegenerated &#187; AWSBadRequest SELECT s.oddrange FR...
[ERROR]   ITestS3Select.testFileContextIntegration &#187; AWSBadRequest SELECT s.name FROM S3...
[ERROR]   ITestS3Select.testSelectDatestampsConverted &#187; AWSBadRequest Select on s3a:&lt;span class=&quot;code-comment&quot;&gt;//st...
&lt;/span&gt;[ERROR]   ITestS3Select.testSelectEmptyFile:261 &#187; Execution org.apache.hadoop.fs.s3a.AWS...
[ERROR]   ITestS3Select.testSelectEmptyFileWithConditions:274 &#187; Execution org.apache.had...
[ERROR]   ITestS3Select.testSelectFileExample:484 &#187; Execution org.apache.hadoop.fs.s3a.A...
[ERROR]   ITestS3Select.testSelectFirstColumnNoHeader &#187; AWSBadRequest SELECT s._1 FROM S...
[ERROR]   ITestS3Select.testSelectID2UseHeader &#187; AWSBadRequest SELECT s.id FROM S3OBJECT...
[ERROR]   ITestS3Select.testSelectId1 &#187; AWSBadRequest SELECT * FROM S3OBJECT s WHERE s._...
[ERROR]   ITestS3Select.testSelectNoMatch &#187; AWSBadRequest Select on s3a:&lt;span class=&quot;code-comment&quot;&gt;//stevel-london/...
&lt;/span&gt;[ERROR]   ITestS3Select.testSelectNoMatchingID &#187; AWSBadRequest SELECT s.id FROM S3OBJECT...
[ERROR]   ITestS3Select.testSelectNotOperationHeader &#187; AWSBadRequest SELECT s.name FROM ...
[ERROR]   ITestS3Select.testSelectOddLinesHeader &#187; AWSBadRequest SELECT s.name FROM S3OB...
[ERROR]   ITestS3Select.testSelectOddLinesHeaderTSVOutput &#187; AWSBadRequest SELECT * FROM ...
[ERROR]   ITestS3Select.testSelectOddLinesNoHeader &#187; AWSBadRequest SELECT * FROM S3OBJEC...
[ERROR]   ITestS3Select.testSelectOddRecordsIgnoreHeader &#187; AWSBadRequest Select on s3a:/...
[ERROR]   ITestS3Select.testSelectOddRecordsIgnoreHeaderV1 &#187; AWSBadRequest SELECT * FROM...
[ERROR]   ITestS3Select.testSelectOddRecordsWithHeader &#187; AWSBadRequest Select on s3a:&lt;span class=&quot;code-comment&quot;&gt;//s...
&lt;/span&gt;[ERROR]   ITestS3Select.testSelectOddRecordsWithHeaderV1 &#187; AWSBadRequest Select on s3a:/...
[ERROR]   ITestS3Select.testSelectSeek &#187; AWSBadRequest SELECT * FROM S3OBJECT s on s3a:/...
[ERROR]   ITestS3Select.testSelectSelfNoHeader &#187; AWSBadRequest SELECT s._1 FROM S3OBJECT...
[ERROR]   ITestS3Select.testSelectSelfUseHeader &#187; AWSBadRequest SELECT s.id FROM S3OBJEC...
[ERROR]   ITestS3Select.testSelectWholeFileNoHeader &#187; AWSBadRequest SELECT * FROM S3OBJE...
[ERROR]   ITestS3SelectCLI.testLandsatToRemoteFile &#187; AWSBadRequest SELECT * FROM S3OBJEC...

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17617005" author="githubbot" created="Thu, 13 Oct 2022 12:13:39 +0000"  >&lt;p&gt;steveloughran merged PR #4489:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/4489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/4489&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12832251">HADOOP-12020</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z139m0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>