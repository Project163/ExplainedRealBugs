<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:43:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-9043] disallow in winutils creating symlinks with forwards slashes</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-9043</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;In general, the winutils symlink command rejects attempts to create symlinks targeting a destination file that does not exist.  However, if given a symlink destination with forward slashes pointing at a file that does exist, then it creates the symlink with the forward slashes, and then attempts to open the file through the symlink will fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12616192">HADOOP-9043</key>
            <summary>disallow in winutils creating symlinks with forwards slashes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cnauroth">Chris Nauroth</assignee>
                                    <reporter username="cnauroth">Chris Nauroth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Nov 2012 07:09:42 +0000</created>
                <updated>Thu, 12 May 2016 18:23:20 +0000</updated>
                            <resolved>Thu, 2 May 2013 21:46:03 +0000</resolved>
                                    <version>1-win</version>
                    <version>3.0.0-alpha1</version>
                                    <fixVersion>1-win</fixVersion>
                    <fixVersion>2.1.0-beta</fixVersion>
                                    <component>util</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13497813" author="cnauroth" created="Thu, 15 Nov 2012 07:16:37 +0000"  >&lt;p&gt;This is best illustrated through an example.  See below.  Suppose there is a file at foo\bar\hello.txt, and you want to create a symlink to it named hello.txt in the current directory.  Running &quot;winutils symlink hello.txt foo\bar\hello.txt&quot; (using back slashes) works correctly.  However, running &quot;winutils symlink hello.txt foo/bar/hello.txt&quot; (using forward slashes) appears to succeed, but then the file isn&apos;t really accessible through the symlink.&lt;/p&gt;

&lt;p&gt;This is a minor winutils bug.  The Java codebase is supposed to take care of calling winutils with the correct path separator.  This does make it more challenging to troubleshoot problems, because the failure doesn&apos;t occur at the source of the problem (symlink creation).  Instead, the failure occurs later when a process tries to access a file through the symlink.&lt;/p&gt;

&lt;p&gt;This shows that winutils generally rejects attempts to create dangling symlinks.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C:\test2&amp;gt;\dep\hadoop-3.0.0-SNAPSHOT\bin\winutils.exe symlink baz doesNotExist
DirectoryCheck error (2): The system cannot find the file specified.

C:\test2&amp;gt;\dep\hadoop-3.0.0-SNAPSHOT\bin\winutils.exe symlink baz subdir\doesNotExist
DirectoryCheck error (3): The system cannot find the path specified.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This shows that passing forward slashes can create a bad symlink.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C:\test2&amp;gt;dir
 Volume in drive C has no label.
 Volume Serial &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; is 9898-B272

 Directory of C:\test2

11/14/2012  12:24 PM    &amp;lt;DIR&amp;gt;          .
11/14/2012  12:24 PM    &amp;lt;DIR&amp;gt;          ..
               0 File(s)              0 bytes
               2 Dir(s)   5,014,097,920 bytes free

C:\test2&amp;gt;mkdir foo\bar

C:\test2&amp;gt;echo hello &amp;gt; foo\bar\hello.txt

C:\test2&amp;gt;\dep\hadoop-3.0.0-SNAPSHOT\bin\winutils.exe symlink hello.txt foo\bar\h
ello.txt

C:\test2&amp;gt;dir
 Volume in drive C has no label.
 Volume Serial &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; is 9898-B272

 Directory of C:\test2

11/14/2012  12:24 PM    &amp;lt;DIR&amp;gt;          .
11/14/2012  12:24 PM    &amp;lt;DIR&amp;gt;          ..
11/14/2012  12:24 PM    &amp;lt;DIR&amp;gt;          foo
11/14/2012  12:24 PM    &amp;lt;SYMLINK&amp;gt;      hello.txt [foo\bar\hello.txt]
               1 File(s)              0 bytes
               3 Dir(s)   5,014,097,920 bytes free

C:\test2&amp;gt;type hello.txt
hello

C:\test2&amp;gt;del hello.txt

C:\test2&amp;gt;\dep\hadoop-3.0.0-SNAPSHOT\bin\winutils.exe symlink hello.txt foo/bar/h
ello.txt

C:\test2&amp;gt;dir
 Volume in drive C has no label.
 Volume Serial &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; is 9898-B272

 Directory of C:\test2

11/14/2012  12:24 PM    &amp;lt;DIR&amp;gt;          .
11/14/2012  12:24 PM    &amp;lt;DIR&amp;gt;          ..
11/14/2012  12:24 PM    &amp;lt;DIR&amp;gt;          foo
11/14/2012  12:24 PM    &amp;lt;SYMLINK&amp;gt;      hello.txt [foo/bar/hello.txt]
               1 File(s)              0 bytes
               3 Dir(s)   5,014,097,920 bytes free

C:\test2&amp;gt;type hello.txt
The system cannot find the file specified.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13582713" author="arpitagarwal" created="Thu, 21 Feb 2013 00:25:36 +0000"  >&lt;p&gt;Patch to replace all occurrences of &apos;/&apos; with &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;. The path is not being normalized.&lt;/p&gt;

&lt;p&gt;Windows requires the symlink target to be differentiated as a file or directory during creation. The creation of dangling symlinks is disallowed to avoid making a guess. &lt;/p&gt;

&lt;p&gt;(Per offline discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chuanliu&quot; class=&quot;user-hover&quot; rel=&quot;chuanliu&quot;&gt;chuanliu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivanmi&quot; class=&quot;user-hover&quot; rel=&quot;ivanmi&quot;&gt;ivanmi&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bikassaha&quot; class=&quot;user-hover&quot; rel=&quot;bikassaha&quot;&gt;bikassaha&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13582746" author="ivanmi" created="Thu, 21 Feb 2013 00:57:58 +0000"  >&lt;p&gt;Thanks Arpit!&lt;/p&gt;

&lt;p&gt;I just looked at the patch, and I would prefer we go a slightly different route.&lt;/p&gt;

&lt;p&gt;We should always assume that paths that enter winutils have only backshashes. The translation (/ -&amp;gt; &amp;#41; should be happening on the Java side. To fix this specific problem, we would want to change FileUtil#symlink to &quot;normalize the slashes&quot;. If you take a look at the branch-1-win code, it already does this so you can just forward port the patch.&lt;/p&gt;

&lt;p&gt;Does this make sense, or am I missing something?&lt;/p&gt;

&lt;p&gt;FileUtil APIs and APIs that work with local file system in general should be accepting java.io.File for params that are local files (instead of Strings or Paths), so that we can let Java handle cross platform path &quot;normalization&quot;. Deprecating existing APIs would be an overhead especially for projects that tool a dependency, so we should just keep this in mind going forward for the new APIs we add.&lt;/p&gt;</comment>
                            <comment id="13583336" author="cnauroth" created="Thu, 21 Feb 2013 16:39:24 +0000"  >&lt;blockquote&gt;
&lt;p&gt;To fix this specific problem, we would want to change FileUtil#symlink to &quot;normalize the slashes&quot;. If you take a look at the branch-1-win code, it already does this so you can just forward port the patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This code was already ported to branch-trunk-win several months ago:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; symLink(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; target, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; linkname) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException{
    &lt;span class=&quot;code-comment&quot;&gt;// Run the input paths through Java&apos;s File so that they are converted to the
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; OS form
&lt;/span&gt;    File targetFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(target);
    File linkFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(linkname);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I believe this jira is no longer valid, at least under its current description.  When I filed it, I didn&apos;t realize that Windows requires slightly different API calls for creating a symlink that targets a directory vs. a file.  Therefore, winutils really does need to call &lt;tt&gt;DirectoryCheck&lt;/tt&gt; to determine the type of target.  As a consequence, winutils differs from Unix ln in that it cannot create a dangling symlink.  (It has no way of knowing whether the caller is trying to create a &quot;dangling file symlink&quot; or a &quot;dangling directory symlink&quot;.)  I believe that both the Java code and the C code are doing the right thing for us now, without further changes.&lt;/p&gt;

&lt;p&gt;The remaining issue is the failure of &lt;tt&gt;TestLocalFSFileContextSymlink&lt;/tt&gt; on Windows, which is what prompted me to file this jira initially.  We now know that this is an inevitable platform difference, so let&apos;s use &lt;tt&gt;Assert.assumeTrue(!Shell.WINDOWS)&lt;/tt&gt; to skip the tests that can&apos;t possibly pass on Windows.  If needed, we could also add more tests to cover Windows behavior, guarded with &lt;tt&gt;Assert.assumeTrue(Shell.WINDOWS)&lt;/tt&gt;.  AFAIK, Hadoop product code does not actually require the ability to create a dangling symlink, and the test suite is just trying to cover ln functionality exhaustively.&lt;/p&gt;

&lt;p&gt;I propose that we close this jira as invalid and create a new one to fix the tests.&lt;/p&gt;</comment>
                            <comment id="13583384" author="arpitagarwal" created="Thu, 21 Feb 2013 17:58:53 +0000"  >&lt;p&gt;Hi Ivan, Chris, &lt;/p&gt;

&lt;p&gt;I think the behavior of winutils is orthogonal to what the Java code invoking it does. If we are shipping winutils with the distribution it should do the right thing, which is to either fail the creation of unusable symlinks or handle the path conversion.&lt;/p&gt;</comment>
                            <comment id="13583766" author="ivanmi" created="Fri, 22 Feb 2013 00:57:28 +0000"  >&lt;p&gt;Thanks Arpit. I am fine with failing early in winutils#symlink in case we detect a forward slash. Seems useful for this scenario given that the symlink creation succeeds, but the link is not working. However, I would not recommend trying to support both forward and backward slashes in wintuils. Java is meant to solve this problem for us, so let&apos;s just build on top of it. &lt;/p&gt;</comment>
                            <comment id="13584877" author="chuanliu" created="Sat, 23 Feb 2013 00:25:16 +0000"  >&lt;p&gt;To summary the cause of the problem:&lt;br/&gt;
Windows symlink creation API - CreateSymbolicLink() - needs to know if the destination is a file or directory. We called DirectoryCheck() to tell if the given path is a file or directory. This leads to two issues:&lt;/p&gt;

&lt;p&gt;1) The path needs exist in order for the symlink to be created successfully. This diverges from the Unix behavior, where invalid link can be created regardless existence of the destination.&lt;/p&gt;

&lt;p&gt;2) We have an inconsistency in Windows API in treating forward slashes and backslashes. In this case, DirectoryCheck() will accept forward slashes and backslashes when checking if a path is directory or file, while the link contains forward slashes will become invalid symlinks even if the destination exists as indicated by DirectoryCheck().&lt;/p&gt;


&lt;p&gt;We will not fix the first problem as this roots in how OS handle symlinks and API differences in symlink creation.&lt;/p&gt;

&lt;p&gt;For 2), I think both Arpit&apos;s and Ivan&apos;s fixes should work. I think Ivan&apos;s fix is safer in general by not considering paths containing forward slashes.&lt;/p&gt;</comment>
                            <comment id="13595221" author="arpitagarwal" created="Wed, 6 Mar 2013 22:42:26 +0000"  >&lt;p&gt;Updated patches to reject forward-slashed paths.&lt;/p&gt;</comment>
                            <comment id="13595319" author="hadoopqa" created="Thu, 7 Mar 2013 00:07:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12572422/HADOOP-9043.trunk.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12572422/HADOOP-9043.trunk.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;        &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.util.TestWinUtils&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2283//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2283//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2283//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2283//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2283//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2283//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13595338" author="ivanmi" created="Thu, 7 Mar 2013 00:18:34 +0000"  >&lt;p&gt;Thanks Arpit, this is good. A few comments, mainly minor:&lt;br/&gt;
1. Can we do the same check for both source and target?&lt;br/&gt;
2. Please log additional information about the problem to stderr. This will help see what went wrong on the Java side.&lt;br/&gt;
3. Please add a unittest to TestWinUtils that validates the fix&lt;/p&gt;</comment>
                            <comment id="13595345" author="arpitagarwal" created="Thu, 7 Mar 2013 00:24:19 +0000"  >&lt;p&gt;Forward paths in the source already appear to be rejected. Do you see otherwise?&lt;/p&gt;

&lt;p&gt;Looking into the test case.&lt;/p&gt;</comment>
                            <comment id="13595350" author="ivanmi" created="Thu, 7 Mar 2013 00:28:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;Forward paths in the source already appear to be rejected. Do you see otherwise?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Do you see this rejected by winutils? Please add a test anyways to make sure this is the case.&lt;/p&gt;</comment>
                            <comment id="13599006" author="cnauroth" created="Mon, 11 Mar 2013 17:13:20 +0000"  >&lt;p&gt;Tightening up the validation is great, but we still have the problem that &lt;tt&gt;TestLocalFSFileContextSymlink&lt;/tt&gt; passes on Linux but fails on Windows.  The current state of the discussion here is that winutils will enforce validation rules to reject creation of invalid/dangling symlinks.  Since this diverges intentionally from the Linux behavior, do we want to update &lt;tt&gt;TestLocalFSFileContextSymlink&lt;/tt&gt; to add &lt;tt&gt;assumeTrue(!Shell.WINDOWS)&lt;/tt&gt; on the invalid tests?&lt;/p&gt;</comment>
                            <comment id="13605438" author="chuanliu" created="Mon, 18 Mar 2013 18:23:45 +0000"  >&lt;p&gt;+1 on the symlink path, and agree with Chris to disable the test on Windows.&lt;/p&gt;</comment>
                            <comment id="13605439" author="chuanliu" created="Mon, 18 Mar 2013 18:25:07 +0000"  >&lt;p&gt;Sorry for the typo: symlink &lt;del&gt;path&lt;/del&gt; should be symlink patch.&lt;/p&gt;</comment>
                            <comment id="13630513" author="cnauroth" created="Fri, 12 Apr 2013 19:12:37 +0000"  >&lt;p&gt;I was just trying to resume progress on this to fix the remaining test failures related to Windows symlinks on the local file system.  I discovered a new problem.  The trunk code still has a Unix command dependency on the readlink command for determining the target of a symlink.  (See &lt;tt&gt;RawLocalFs#readLink&lt;/tt&gt;.)  This is the source of some of the test failures.&lt;/p&gt;

&lt;p&gt;I propose the addition of a new &quot;winutils readlink&quot; command.  The logic of this command would be:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Call &lt;tt&gt;CreateFile&lt;/tt&gt; with &lt;tt&gt;OPEN_EXISTING&lt;/tt&gt; and &lt;tt&gt;FILE_FLAG_OPEN_REPARSE_POINT&lt;/tt&gt;.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Call &lt;tt&gt;GetFileInformationByHandle&lt;/tt&gt;.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/aa364952(v=vs.85).aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/aa364952(v=vs.85).aspx&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Check the &lt;tt&gt;BY_HANDLE_FILE_INFORMATION&lt;/tt&gt; for the presence of &lt;tt&gt;FILE_ATTRIBUTE_REPARSE_POINT&lt;/tt&gt;.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/aa363788(v=vs.85).aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/aa363788(v=vs.85).aspx&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/gg258117(v=vs.85).aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/gg258117(v=vs.85).aspx&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;If not a reparse point, exit with code 1 and print nothing to stdout.  (This is what Unix readlink does.)&lt;/li&gt;
	&lt;li&gt;Call &lt;tt&gt;DeviceIoControl&lt;/tt&gt; with &lt;tt&gt;FSCTL_GET_REPARSE_POINT&lt;/tt&gt;.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/aa363216(v=VS.85).aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/aa363216(v=VS.85).aspx&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/aa364571.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/aa364571.aspx&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Get the &lt;tt&gt;REPARSE_DATA_BUFFER&lt;/tt&gt; structure.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ff552012.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/ff552012.aspx&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Check if &lt;tt&gt;ReparseTag&lt;/tt&gt; is &lt;tt&gt;IO_REPARSE_TAG_SYMLINK&lt;/tt&gt;.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/aa365511(v=vs.85).aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/aa365511(v=vs.85).aspx&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;If not &lt;tt&gt;IO_REPARSE_TAG_SYMLINK&lt;/tt&gt;, then...?&lt;/li&gt;
	&lt;li&gt;Get target from &lt;tt&gt;SymbolicLinkReparseBuffer&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;Print target to stdout and exit with code 0.  (This is what Unix readlink does.)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Could someone with more Windows expertise review this and comment on whether or not the logic looks correct?  There are a few edge cases that I&apos;m not sure how to handle.  What should we do if the reparse point is not a symlink (i.e. junction point)?  MSDN also mentions that some reparse points may have a different data structure associated with them, a &lt;tt&gt;REPARSE_GUID_DATA_BUFFER&lt;/tt&gt;, and I&apos;m not sure what special handling is required around that.&lt;/p&gt;</comment>
                            <comment id="13630526" author="cnauroth" created="Fri, 12 Apr 2013 19:24:22 +0000"  >&lt;p&gt;I&apos;m attaching a new trunk patch that gets us a little closer to the end goal.  I clicked Cancel Patch, because there are still a lot of things in flux on this jira, and the patch isn&apos;t final.  I also didn&apos;t provide a branch-1-win version of the patch, because I think it will be easier to do a mass backport after finalizing the trunk patch.&lt;/p&gt;

&lt;p&gt;The changes since Arpit&apos;s prior patch are:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Use &lt;tt&gt;assumeTrue(!WINDOWS)&lt;/tt&gt; to skip tests related to dangling symlinks, which don&apos;t work on Windows with local file system.&lt;/li&gt;
	&lt;li&gt;Change symlink.c so that the new validation check for forward slashes also prints an error message.&lt;/li&gt;
	&lt;li&gt;Change &lt;tt&gt;RawLocalFs#getPathWithoutSchemeAndAuthority&lt;/tt&gt; to pass through &lt;tt&gt;java.io.File&lt;/tt&gt; before attempting symlink creation.  The symlink API operates on &lt;tt&gt;Path&lt;/tt&gt; objects, which are inherently forward-slashed regardless of OS.  This meant that the new validation check was rejecting the calls (as we want).  Passing through &lt;tt&gt;File&lt;/tt&gt; converts to backslash on Windows.  This is the same approach that we took in the YARN nodemanager, which heavily relies on symlinks during container launch to reference localized resources.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13631413" author="ivanmi" created="Sun, 14 Apr 2013 22:59:51 +0000"  >&lt;p&gt;Thanks Chris for the patch! I am reviewing this now...&lt;/p&gt;</comment>
                            <comment id="13631428" author="ivanmi" created="Sun, 14 Apr 2013 23:51:05 +0000"  >&lt;p&gt;Thanks Chris for the writeup on readLink! The approach overall looks good. I have a few comments that should help with further progress:&lt;br/&gt;
1. There is no need to support junction points. Let&apos;s only focus on symlinks. We&apos;ve seen problems with junction points on Windows for paths longer than 126 chars (IIRC) and finally decided to stay out of supporting them. &lt;br/&gt;
2. In winutils we already have SymbolicLinkCheck function which checks if the given path is a symlink. See if you can reconcile this with the new code.&lt;br/&gt;
3. DeviceIoControl is one way to retrieve the symlink target path. GetFinalPathNameByHandle provides the similar functionality and might be easier to use. See which one suits you better. (it is fine to assume that we&#8217;re running on Vista or later Windows OS).&lt;/p&gt;


&lt;p&gt;Also a few comments on the latest patch:&lt;br/&gt;
1. RawLocalFs: An incremental improvement would be to have getPathWithoutSchemeAndAuthority return a File instead of a string.&lt;br/&gt;
2. Would you mind adding a unittest to TestWinUtils that targets the scenario where input paths have forward slashes (for both the target and the link).&lt;br/&gt;
3. TestLocalFSFileContextSymlink: Can you add a short comment in the first assert saying that dangling links are currently not supported on Windows for LocalFS.&lt;br/&gt;
4. Please also include a few winutils unittests for the new readLink API. &lt;/p&gt;</comment>
                            <comment id="13632419" author="chuanliu" created="Tue, 16 Apr 2013 00:25:32 +0000"  >&lt;p&gt;I am +1 on the existing patches to fix the unusable symlinks.&lt;/p&gt;

&lt;p&gt;Should we open a new JIRA to investigate readlink problem?&lt;/p&gt;

&lt;p&gt;On the readlink implementation I agree with the general approach Chris has described.&lt;br/&gt;
Some logic is already implemented in libwinutils as Ivan mentioned.&lt;br/&gt;
I also think GetFinalPathNameByHandle() may be easier to use than the DeviceIoControl().&lt;/p&gt;</comment>
                            <comment id="13634249" author="cnauroth" created="Wed, 17 Apr 2013 17:53:50 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Should we open a new JIRA to investigate readlink problem?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 on this idea.  I&apos;ve filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9483&quot; title=&quot;winutils support for readlink command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9483&quot;&gt;&lt;del&gt;HADOOP-9483&lt;/del&gt;&lt;/a&gt; to address winutils readlink separately.  I&apos;ve transferred the relevant design discussion and watchers to the new ticket.&lt;/p&gt;

&lt;p&gt;I&apos;ll work on one more version of the current &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt; patch to address Ivan&apos;s last round of feedback, but there was one piece of feedback that I didn&apos;t quite follow:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;RawLocalFs: An incremental improvement would be to have getPathWithoutSchemeAndAuthority return a File instead of a string.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Could you elaborate on this?  There are 2 call sites for this method, and they both need to convert the result to string, which is why I kept the method returning string.&lt;/p&gt;</comment>
                            <comment id="13634257" author="ivanmi" created="Wed, 17 Apr 2013 18:00:35 +0000"  >&lt;p&gt;Thanks Chris for addressing the comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Could you elaborate on this? There are 2 call sites for this method, and they both need to convert the result to string, which is why I kept the method returning string.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I just meant to have the method explicitly return a File instead of a String. This way you can remove the Windows specific comment in code and everything implicitly works. &lt;/p&gt;</comment>
                            <comment id="13634568" author="cnauroth" created="Wed, 17 Apr 2013 23:01:02 +0000"  >&lt;p&gt;Here is version 4 of the trunk patch, with the following changes since last time:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;RawLocalFs#getPathWithoutSchemeAndAuthority&lt;/tt&gt; now returns &lt;tt&gt;File&lt;/tt&gt; instead of &lt;tt&gt;String&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;Added comment in &lt;tt&gt;TestLocalFSFileContextSymlink&lt;/tt&gt; stating that dangling symlinks are not supported on Windows.&lt;/li&gt;
	&lt;li&gt;Added tests in &lt;tt&gt;TestWinUtils&lt;/tt&gt; for asserting that winutils symlink will return an error if attempting to pass it paths with forward slashes in either link or target.  The earlier version of the symlink.c patch only checked target, so I also changed that to check both link and target.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;How does this look?  Once I have +1 on the trunk patch, I&apos;ll prep the equivalent branch-1-win patch.&lt;/p&gt;</comment>
                            <comment id="13634601" author="hadoopqa" created="Wed, 17 Apr 2013 23:29:38 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12579223/HADOOP-9043.trunk.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12579223/HADOOP-9043.trunk.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2453//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2453//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2453//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2453//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13634803" author="ivanmi" created="Thu, 18 Apr 2013 03:56:20 +0000"  >&lt;p&gt;Thanks Chris, patch looks really good! One minor comment below, otherwise, +1&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Should we also disable &lt;tt&gt;TestLocalFSFileContextSymlink#testCreateDanglingLink&lt;/tt&gt; on Windows?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I verified that TestWinUtils passes on Windows, thanks for the new tests.&lt;/p&gt;</comment>
                            <comment id="13634861" author="cnauroth" created="Thu, 18 Apr 2013 05:44:44 +0000"  >&lt;p&gt;Yes, &lt;tt&gt;testCreateDanglingLink&lt;/tt&gt; definitely should be skipped on Windows too.  I&apos;m attaching version 5 of the patch for both trunk and branch-1-win.  Ivan, thank you for the reviews and the +1!  I believe this is the final version.&lt;/p&gt;</comment>
                            <comment id="13634891" author="hadoopqa" created="Thu, 18 Apr 2013 06:27:48 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12579273/HADOOP-9043.trunk.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12579273/HADOOP-9043.trunk.5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2454//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2454//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2454//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2454//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13634939" author="ivanmi" created="Thu, 18 Apr 2013 07:26:12 +0000"  >&lt;p&gt;Looks good, +1 on both trunk and branch-1-win patches. Thanks!&lt;/p&gt;</comment>
                            <comment id="13642207" author="cnauroth" created="Thu, 25 Apr 2013 21:00:24 +0000"  >&lt;p&gt;To the committer who picks this up: would you please co-credit the patch to both me and Arpit Agarwal?  We both wrote code for this patch.  Thanks!&lt;/p&gt;</comment>
                            <comment id="13646712" author="arpitagarwal" created="Wed, 1 May 2013 17:03:46 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  @Test (timeout = 30000)
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSymlinkRejectsForwardSlashesInTarget() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!Shell.WINDOWS) {
+      &lt;span class=&quot;code-comment&quot;&gt;// Not supported on non-Windows platforms
&lt;/span&gt;+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hi Chris - would you consider replacing the if clause with &lt;tt&gt;assumeTrue(Shell.WINDOWS)&lt;/tt&gt; instead? I am fixing the remaining instances TestWinUtils.java with &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9483&quot; title=&quot;winutils support for readlink command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9483&quot;&gt;&lt;del&gt;HADOOP-9483&lt;/del&gt;&lt;/a&gt;. If your patch gets in first I can fix it as I will have to rebase.&lt;/p&gt;

&lt;p&gt;+1 otherwise.&lt;/p&gt;</comment>
                            <comment id="13647768" author="cnauroth" created="Thu, 2 May 2013 18:14:57 +0000"  >&lt;p&gt;Good catch, thanks Arpit!  I&apos;ve attached version 6 of the patch for both trunk and branch-1-win.  This switches all tests in &lt;tt&gt;TestWinUtils&lt;/tt&gt; to use &lt;tt&gt;assumeTrue&lt;/tt&gt; for the Windows check.&lt;/p&gt;</comment>
                            <comment id="13647786" author="arpitagarwal" created="Thu, 2 May 2013 18:31:01 +0000"  >&lt;p&gt;Thanks for addressing that.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Verified tests pass on Windows and are skipped on OS X.&lt;/p&gt;</comment>
                            <comment id="13647918" author="sureshms" created="Thu, 2 May 2013 21:31:57 +0000"  >&lt;p&gt;+1 for the patch.&lt;/p&gt;</comment>
                            <comment id="13647932" author="sureshms" created="Thu, 2 May 2013 21:46:03 +0000"  >&lt;p&gt;I committed the patches to trunk and branch-1-win. Thank you Chris.&lt;/p&gt;</comment>
                            <comment id="13647989" author="cnauroth" created="Thu, 2 May 2013 22:39:40 +0000"  >&lt;p&gt;Thank you for the commit, Suresh.  Thanks also to Arpit for writing some of the code, and to all of the reviewers.&lt;/p&gt;</comment>
                            <comment id="13650328" author="hudson" created="Tue, 7 May 2013 01:07:03 +0000"  >&lt;p&gt;Integrated in Hadoop-trunk-Commit #3712 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/3712/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/3712/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt;. Adding Arpit Agarwal as an additional contributor (Revision 1478584)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt;. Disallow in winutils creating symlinks with forwards slashes. Contributed by Chris Nauroth. (Revision 1478577)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478584&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478577&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478577&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/local/RawLocalFs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/winutils/symlink.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestLocalFSFileContextSymlink.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestWinUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13650691" author="hudson" created="Tue, 7 May 2013 10:49:15 +0000"  >&lt;p&gt;Integrated in Hadoop-Yarn-trunk #202 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/202/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/202/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt;. Adding Arpit Agarwal as an additional contributor (Revision 1478584)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt;. Disallow in winutils creating symlinks with forwards slashes. Contributed by Chris Nauroth. (Revision 1478577)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478584&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478577&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478577&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/local/RawLocalFs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/winutils/symlink.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestLocalFSFileContextSymlink.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestWinUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13650784" author="hudson" created="Tue, 7 May 2013 13:05:13 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1391 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1391/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1391/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt;. Adding Arpit Agarwal as an additional contributor (Revision 1478584)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt;. Disallow in winutils creating symlinks with forwards slashes. Contributed by Chris Nauroth. (Revision 1478577)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478584&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478577&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478577&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/local/RawLocalFs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/winutils/symlink.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestLocalFSFileContextSymlink.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestWinUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13650839" author="hudson" created="Tue, 7 May 2013 14:06:13 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1418 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1418/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1418/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt;. Adding Arpit Agarwal as an additional contributor (Revision 1478584)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt;. Disallow in winutils creating symlinks with forwards slashes. Contributed by Chris Nauroth. (Revision 1478577)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478584&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478577&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1478577&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/local/RawLocalFs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/winutils/symlink.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestLocalFSFileContextSymlink.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestWinUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13666811" author="sureshms" created="Fri, 24 May 2013 22:59:05 +0000"  >&lt;p&gt;I merged the patch to branch-2.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12597618">HADOOP-8562</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12642979">HADOOP-9483</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12645492">HADOOP-9527</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12579272" name="HADOOP-9043.branch-1-win.5.patch" size="2863" author="cnauroth" created="Thu, 18 Apr 2013 05:42:44 +0000"/>
                            <attachment id="12581561" name="HADOOP-9043.branch-1-win.6.patch" size="4902" author="cnauroth" created="Thu, 2 May 2013 18:13:45 +0000"/>
                            <attachment id="12570220" name="HADOOP-9043.branch-1-win.patch" size="2082" author="arp" created="Thu, 21 Feb 2013 00:25:36 +0000"/>
                            <attachment id="12572421" name="HADOOP-9043.branch-1.2.patch" size="682" author="arp" created="Wed, 6 Mar 2013 22:42:26 +0000"/>
                            <attachment id="12572422" name="HADOOP-9043.trunk.2.patch" size="823" author="arp" created="Wed, 6 Mar 2013 22:42:26 +0000"/>
                            <attachment id="12578490" name="HADOOP-9043.trunk.3.patch" size="4621" author="cnauroth" created="Fri, 12 Apr 2013 19:24:22 +0000"/>
                            <attachment id="12579223" name="HADOOP-9043.trunk.4.patch" size="7273" author="cnauroth" created="Wed, 17 Apr 2013 23:01:02 +0000"/>
                            <attachment id="12579273" name="HADOOP-9043.trunk.5.patch" size="7423" author="cnauroth" created="Thu, 18 Apr 2013 05:44:44 +0000"/>
                            <attachment id="12581562" name="HADOOP-9043.trunk.6.patch" size="9575" author="cnauroth" created="Thu, 2 May 2013 18:14:57 +0000"/>
                            <attachment id="12570221" name="HADOOP-9043.trunk.patch" size="2131" author="arp" created="Thu, 21 Feb 2013 00:25:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kkzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>118219</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12320361">1-win</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>