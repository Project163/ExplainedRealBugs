<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:56:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-17513] Checkstyle IllegalImport does not catch guava imports</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-17513</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Although&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-10352&quot; title=&quot;Skip schedule on not heartbeated nodes in Multi Node Placement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-10352&quot;&gt;&lt;del&gt;YARN-10352&lt;/del&gt;&lt;/a&gt; introduces &lt;tt&gt;guava iterator import&lt;/tt&gt;, it was committed to trunk without checkstyle errors.&lt;/p&gt;

&lt;p&gt;According to &lt;a href=&quot;https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/checks/imports/IllegalImportCheck.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;IllegalImportCheck#setIllegalPkgs &lt;/a&gt;, the packages regex should be the prefix of the package. The code automatically append &lt;tt&gt;\.*&lt;/tt&gt; to the regex.&lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aajisaka&quot; class=&quot;user-hover&quot; rel=&quot;aajisaka&quot;&gt;aajisaka&lt;/a&gt;&lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13356539">HADOOP-17513</key>
            <summary>Checkstyle IllegalImport does not catch guava imports</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ahussein">Ahmed Hussein</assignee>
                                    <reporter username="ahussein">Ahmed Hussein</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 3 Feb 2021 17:02:07 +0000</created>
                <updated>Sun, 11 Feb 2024 13:42:40 +0000</updated>
                            <resolved>Fri, 5 Feb 2021 07:47:31 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.4.0</fixVersion>
                                    <component>build</component>
                    <component>common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6000">1h 40m</timespent>
                                <comments>
                            <comment id="17278433" author="ahussein" created="Thu, 4 Feb 2021 00:08:10 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aajisaka&quot; class=&quot;user-hover&quot; rel=&quot;aajisaka&quot;&gt;aajisaka&lt;/a&gt;, I think the checkstyle regex was not working correctly. Hopefully, in the future, this PR would help prevent avoiding guava imports before merging.&lt;/p&gt;</comment>
                            <comment id="17278555" author="zhuqi" created="Thu, 4 Feb 2021 05:44:40 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahussein&quot; class=&quot;user-hover&quot; rel=&quot;ahussein&quot;&gt;ahussein&lt;/a&gt;&#160;for good change.&lt;/p&gt;

&lt;p&gt;LGTM +1.&lt;/p&gt;</comment>
                            <comment id="17279433" author="ajisakaa" created="Fri, 5 Feb 2021 07:47:31 +0000"  >&lt;p&gt;Merged the PR into trunk. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahussein&quot; class=&quot;user-hover&quot; rel=&quot;ahussein&quot;&gt;ahussein&lt;/a&gt; for your contribution and thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhuqi&quot; class=&quot;user-hover&quot; rel=&quot;zhuqi&quot;&gt;zhuqi&lt;/a&gt; for your review.&lt;/p&gt;</comment>
                            <comment id="17281836" author="ahussein" created="Tue, 9 Feb 2021 15:22:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aajisaka&quot; class=&quot;user-hover&quot; rel=&quot;aajisaka&quot;&gt;aajisaka&lt;/a&gt;, by the way, I noticed that running the build automatically replace guava imports with the third party import.&lt;/p&gt;

&lt;p&gt;This is probably the reason why the wrong import has not been detected before merging in&#160;&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-10352&quot; title=&quot;Skip schedule on not heartbeated nodes in Multi Node Placement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-10352&quot;&gt;&lt;del&gt;YARN-10352&lt;/del&gt;&lt;/a&gt;&#160; .&#160;&lt;/p&gt;

&lt;p&gt;I suggest that automatic import replacement gets removed from the build so that patches do not get changes without the developers&apos; knowledge.&lt;/p&gt;

&lt;p&gt;Personally, I will prefer that the build breaks locally rather than injecting automatic code changes.&lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jim_Brennan&quot; class=&quot;user-hover&quot; rel=&quot;Jim_Brennan&quot;&gt;Jim_Brennan&lt;/a&gt; was also confused when he had his patch modified during the build.&lt;/p&gt;

&lt;p&gt;Let me know WDYT?&lt;/p&gt;</comment>
                            <comment id="17281886" author="jim_brennan" created="Tue, 9 Feb 2021 17:01:29 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Personally, I will prefer that the build breaks locally rather than injecting automatic code changes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I would prefer it break the build as well, but I am not sure that is possible?  The current approach is OK with me if it is not feasible to break the build.  In the ideal case, people making a change that causes this to happen will notice it and not submit a patch with the wrong imports.  In the case where someone fails to include the import fix in their patch, someone else will likely notice and alert them to fix it, as happened in this case.&lt;br/&gt;
I admit to being surprised when I saw this was happening, and a little alarmed that a build would modify a source file, but I think I understand why it was done this way.&lt;/p&gt;</comment>
                            <comment id="17282795" author="ajisakaa" created="Thu, 11 Feb 2021 00:24:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;I suggest that automatic import replacement gets removed from the build so that patches do not get changes without the developers&apos; knowledge.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed. This automatic import replacement is required for the sources generated by protocol buffers, but it is not necessary for all the sources. Probably removing the lines (&lt;a href=&quot;https://github.com/apache/hadoop/blob/a43fd648573df62214ac3f3d148e9226c904f785/hadoop-project/pom.xml#L2003-L2063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/blob/a43fd648573df62214ac3f3d148e9226c904f785/hadoop-project/pom.xml#L2003-L2063&lt;/a&gt;) should work.&lt;/p&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vinayakumarb&quot; class=&quot;user-hover&quot; rel=&quot;vinayakumarb&quot;&gt;vinayakumarb&lt;/a&gt;, what do you think?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="13336191">HADOOP-17315</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nbk8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12346894">3.4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>