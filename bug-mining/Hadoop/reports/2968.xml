<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:58:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-18786] Hadoop build depends on archives.apache.org</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-18786</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Several times throughout Hadoop&apos;s source, the ASF archive is referenced, including part of the build that downloads Yetus.&lt;/p&gt;

&lt;p&gt;Building a release from source should not require access to the ASF archives, as that contributes to end users being subject to throttling and blocking by INFRA, for &quot;abuse&quot; of the archives, even though they are merely building a current ASF release from source. This is particularly problematic for downstream packagers who must build from Hadoop&apos;s source, or for CI/CD situations that depend on Hadoop&apos;s source, and particularly problematic for those end users behind a NAT gateway, because even if Hadoop&apos;s use of the archive is modest, it adds up for multiple users.&lt;/p&gt;

&lt;p&gt;The build should be modified, so that it does not require access to fixed versions in the archives (or should work with the upstream of those dependent projects to publish their releases elsewhere, for routine consumptions). In the interim, the source could be updated to point to the current dependency versions available on downloads.apache.org.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13541622">HADOOP-18786</key>
            <summary>Hadoop build depends on archives.apache.org</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ctubbsii">Christopher Tubbs</assignee>
                                    <reporter username="ctubbsii">Christopher Tubbs</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 27 Jun 2023 18:38:52 +0000</created>
                <updated>Mon, 19 Aug 2024 10:53:56 +0000</updated>
                            <resolved>Mon, 19 Aug 2024 10:53:56 +0000</resolved>
                                    <version>3.4.0</version>
                    <version>3.3.6</version>
                                    <fixVersion>3.5.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17737829" author="githubbot" created="Tue, 27 Jun 2023 18:43:46 +0000"  >&lt;p&gt;ctubbsii opened a new pull request, #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;Description of PR&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;Use Yetus 0.14.1 from downloads.apache.org in yetus-wrapper&lt;/li&gt;
	&lt;li&gt;Use Maven 3.8.8 from downloads.apache.org in Win 10 Dockerfile&lt;/li&gt;
	&lt;li&gt;Point users to downloads.apache.org for JVSC&lt;/li&gt;
	&lt;li&gt;Use Solr 8.11.2 from downloads.apache.org in YARN Dockerfile&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;How was this patch tested?&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Download links verified to work.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;
		&lt;ol&gt;
			&lt;li&gt;For code changes:&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; Does the title or this PR starts with the corresponding JIRA issue id (e.g. &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17799&quot; title=&quot;Improve the GitHub pull request template&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17799&quot;&gt;&lt;del&gt;HADOOP-17799&lt;/del&gt;&lt;/a&gt;. Your PR title ...&apos;)?&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="17737886" author="githubbot" created="Tue, 27 Jun 2023 21:50:21 +0000"  >&lt;p&gt;ctubbsii commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-1610266483&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-1610266483&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; Also, I guess we want to this change in all active branches? i.e. branch-3.3 branch-3.2 and branch-2.10.&lt;/p&gt;

&lt;p&gt;   As a stop-gap, it would be good to prevent any downstream users from hitting this on all new releases, as it can trigger a site-wide ban if they&apos;ve used the archives too much. Building Hadoop releases from source shouldn&apos;t cause users to be banned from access to the ASF.&lt;/p&gt;

&lt;p&gt;   But, this is only a stop-gap solution, regardless of where it is applied. Once these dependencies roll over to the archives, then you&apos;ll have the problem of users being unable to build Hadoop releases from source without first patching its build in some way. So, a more complete solution still needs to be created.&lt;/p&gt;

&lt;p&gt;   The Dockerfile changes are probably okay (as I imagine those are optional, and users can derive their own Dockerfiles easily enough from these as reference), and the generic message about JVSC is certainly okay. You could probably get away with just applying those changes to the trunk.&lt;/p&gt;

&lt;p&gt;   The main problem to address across all branches is the yetus-wrapper&apos;s use of the archives. Perhaps one of the following would work?&lt;br/&gt;
   1. yetus can be made an optional part of the build (a dev-only profile that is inactive by default when users build from source)?&lt;br/&gt;
   2. Or you can bundle yetus into the release as a build tool so it doesn&apos;t need to go to the archives (might be against ASF policy for source releases, but perhaps there&apos;s an exception to the rule)?&lt;br/&gt;
   3. Or perhaps yetus is stable enough that you can just reference downloads.apache.org/yetus/latest instead of a specific version?&lt;br/&gt;
   4. Or maybe the build instructions should just tell the user that they need to download or install it as a build prerequisite, rather than have the Hadoop scripts download it?&lt;br/&gt;
   5. Or perhaps Yetus can publish its releases to Maven Central or another place, from which these can be downloaded?&lt;br/&gt;
   I&apos;m not sure what the best solution is, but I definitely think this part should be fixed in all branches, somehow.&lt;/p&gt;

</comment>
                            <comment id="17738287" author="githubbot" created="Wed, 28 Jun 2023 20:17:40 +0000"  >&lt;p&gt;steveloughran commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-1612045152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-1612045152&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;solr change should be pulled out as its own thing, as it includes a version change.&lt;/li&gt;
	&lt;li&gt;yetus in source tarballs is interesting. I&apos;m happy for a source bundle to include it as it makes for more of a &quot;all the tools you need are here&quot; world. (ignoring maven artifacts...)&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="17738301" author="githubbot" created="Wed, 28 Jun 2023 21:10:18 +0000"  >&lt;p&gt;ctubbsii commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-1612109177&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-1612109177&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; * yetus in source tarballs is interesting. I&apos;m happy for a source bundle to include it as it makes for more of a &quot;all the tools you need are here&quot; world. (ignoring maven artifacts...)&lt;/p&gt;

&lt;p&gt;   Unfortunately, I&apos;m pretty sure it&apos;s against policy. This is the same issue that people face when they want to include the gradlew or mvnw jars in their sources.&lt;/p&gt;

</comment>
                            <comment id="17738566" author="githubbot" created="Thu, 29 Jun 2023 13:08:51 +0000"  >&lt;p&gt;steveloughran commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-1613156364&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-1613156364&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   yetus is special compared to gradle as it is asf, but then so would thriftc and mvn be.&lt;/p&gt;

</comment>
                            <comment id="17738568" author="githubbot" created="Thu, 29 Jun 2023 13:13:56 +0000"  >&lt;p&gt;ctubbsii commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-1613163547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-1613163547&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; yetus is special compared to gradle as it is asf, but then so would thriftc and mvn be.&lt;/p&gt;

&lt;p&gt;   From &lt;a href=&quot;https://www.apache.org/legal/release-policy.html#source-packages:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/legal/release-policy.html#source-packages:&lt;/a&gt; `A source release SHOULD not contain compiled code`&lt;/p&gt;

&lt;p&gt;   So, it&apos;s fine if you&apos;re just bundling and redistributing Yetus scripts, which are also source. I&apos;m not sure if Yetus contains compiled code, or if it&apos;s just scripts, and I&apos;m not sure which parts Hadoop&apos;s build uses.&lt;/p&gt;

</comment>
                            <comment id="17738791" author="githubbot" created="Thu, 29 Jun 2023 21:18:47 +0000"  >&lt;p&gt;ctubbsii commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-1613822991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-1613822991&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   The version bumps are merely incidental to the actual issue this PR and JIRA are intending to expose: that the use of the archives should be avoided.&lt;/p&gt;

&lt;p&gt;   If committers want to bump the versions first, I can rebase this PR once that is done. However, these changes are pretty trivial, so I&apos;m not really needed for that part. Once the committers decide to act on this, they can rebase or merge however they see fit. Up to now, these &quot;should&quot; comments about what to do about the version bumps have been very unclear to me... it looks like discussion among yourselves... but if it&apos;s a request for me to change something in this PR, please state the request clearly.&lt;/p&gt;

</comment>
                            <comment id="17748069" author="githubbot" created="Thu, 27 Jul 2023 10:26:34 +0000"  >&lt;p&gt;steveloughran commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-1653336705&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-1653336705&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   reviewing this. &lt;/p&gt;

&lt;p&gt;   @ctubbsii do we need to bump up the versions for the move to downloads to work? &lt;/p&gt;

</comment>
                            <comment id="17748283" author="githubbot" created="Thu, 27 Jul 2023 17:56:34 +0000"  >&lt;p&gt;ctubbsii commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-1654127004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-1654127004&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   @steveloughran wrote: &lt;br/&gt;
   &amp;gt; @ctubbsii do we need to bump up the versions for the move to downloads to work?&lt;/p&gt;

&lt;p&gt;   The old versions only exist in the archives, so yes. But, as previously said, this is really only a temporary fix, as it forces the build to depend on a transient state on downloads.a.o. The Hadoop devs need to figure out a more permanent solution. This is just a stop-gap.&lt;/p&gt;

</comment>
                            <comment id="17844718" author="githubbot" created="Wed, 8 May 2024 17:11:04 +0000"  >&lt;p&gt;ctubbsii commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-2101037371&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-2101037371&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   This was previously approved, and I&apos;ve answered all the questions raised. I just resolved the merge conflicts from upstream, where some lines got moved around in the Dockerfile for Windows. Is anybody willing to merge this?&lt;/p&gt;

</comment>
                            <comment id="17846024" author="githubbot" created="Mon, 13 May 2024 17:30:19 +0000"  >&lt;p&gt;steveloughran commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-2108352558&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-2108352558&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   The main thing I want to be sure is from this build, what gets into the distro? only stuff from the maven repo, right? that is: this PR MUST NOT force updates in the binaries we ship.&lt;/p&gt;

</comment>
                            <comment id="17846044" author="githubbot" created="Mon, 13 May 2024 18:55:27 +0000"  >&lt;p&gt;ctubbsii commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-2108580048&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-2108580048&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; The main thing I want to be sure is from this build, what gets into the distro? only stuff from the maven repo, right? that is: this PR MUST NOT force updates in the binaries we ship.&lt;/p&gt;

&lt;p&gt;   I don&apos;t quite understand the question. The premise seems to be that the current build is only grabbing stuff from the Maven repo. However, that&apos;s not true currently, and that&apos;s part of the problem. The build currently grabs stuff from the archives, and not just from the Maven repo. Those are the URLs that this PR changes... to use the ASF CDN instead of the archives. The only change that might affect the distro is a couple of tools do not have that version available in the CDN anymore, so a version bump was necessary to be able to grab it from the CDN instead of from the archives. However, I don&apos;t know if those affect the binaries in the distro either, or if those are only used as unshipped build tools. But even if it does change the binaries in some way, the current situation of automatically going to the ASF archives cannot continue... it makes offline builds very hard, and the download of things from the archives causes frequent builds to trigger automated bans of ASF services, because the archives aren&apos;t meant to be used this way (for routine builds).&lt;/p&gt;

</comment>
                            <comment id="17846398" author="githubbot" created="Tue, 14 May 2024 19:08:50 +0000"  >&lt;p&gt;steveloughran commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-2110961454&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-2110961454&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   ok, let&apos;s merge and see what happens.&lt;/p&gt;

</comment>
                            <comment id="17846399" author="githubbot" created="Tue, 14 May 2024 19:09:55 +0000"  >&lt;p&gt;steveloughran merged PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17846400" author="githubbot" created="Tue, 14 May 2024 19:10:31 +0000"  >&lt;p&gt;steveloughran commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-2110965419&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-2110965419&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   thanks, in trunk. can you do a pr cherrypicking to branch-3.4 so we can keep that in sync. No need for more reviews, just a yetus test run.&lt;/p&gt;

</comment>
                            <comment id="17850129" author="githubbot" created="Tue, 28 May 2024 18:13:58 +0000"  >&lt;p&gt;ctubbsii commented on PR #5789:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/hadoop/pull/5789#issuecomment-2135848868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/5789#issuecomment-2135848868&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; thanks, in trunk. can you do a pr cherrypicking to branch-3.4 so we can keep that in sync. No need for more reviews, just a yetus test run.&lt;/p&gt;

&lt;p&gt;   I&apos;d be hesitant to backport this to previous versions. I&apos;d feel more comfortable establishing it as the norm going forward, than risk changing the build process for previous release versions.&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1iti8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>