<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:36:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-8202] stopproxy() is not closing the proxies correctly</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-8202</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;I was running testbackupnode and noticed that NNprotocol proxy was not being closed. Talked with Suresh and he observed that most of the protocols do not implement ProtocolTranslator and hence the logic in stopproxy() does not work. Instead, since all of them are closeable, Suresh suggested that closeable property should be used at close.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547834">HADOOP-8202</key>
            <summary>stopproxy() is not closing the proxies correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="harip">Hari Mankude</assignee>
                                    <reporter username="harip">Hari Mankude</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Mar 2012 17:06:28 +0000</created>
                <updated>Wed, 23 May 2012 20:15:59 +0000</updated>
                            <resolved>Tue, 27 Mar 2012 03:39:17 +0000</resolved>
                                    <version>0.24.0</version>
                                    <fixVersion>2.0.0-alpha</fixVersion>
                                    <component>ipc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13236789" author="harip" created="Fri, 23 Mar 2012 17:06:50 +0000"  >&lt;p&gt;This jira is related to hadoop-7607&lt;/p&gt;</comment>
                            <comment id="13236863" author="hadoopqa" created="Fri, 23 Mar 2012 18:05:41 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519670/HADOOP-8202.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519670/HADOOP-8202.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                  org.apache.hadoop.fs.viewfs.TestViewFsTrash&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13236888" author="sureshms" created="Fri, 23 Mar 2012 18:26:59 +0000"  >&lt;p&gt;Does this fix the exception that you observed in the test, where proxy was not stopped?&lt;/p&gt;</comment>
                            <comment id="13236893" author="harip" created="Fri, 23 Mar 2012 18:30:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Does this fix the exception that you observed in the test, where proxy was not stopped?&lt;/p&gt;

&lt;p&gt;Yes, it does.&lt;/p&gt;</comment>
                            <comment id="13236908" author="atm" created="Fri, 23 Mar 2012 18:40:22 +0000"  >&lt;p&gt;Hi Hari, a few comments:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&quot;c = (Closeable) Proxy.getInvocationHandler(proxy);&quot; - this could potentially cause an uncaught ClassCastException, if the InvocationHandler itself doesn&apos;t implement Closeable.&lt;/li&gt;
	&lt;li&gt;Given the above, the error message at the bottom of the message should perhaps also include &quot;or invocation handler does not implement Closeable&quot;&lt;/li&gt;
	&lt;li&gt;&apos;LOG.error(... + &quot;or does not provide invocation handler for proxy class&quot;&apos; - should put a space after &quot;class&quot;&lt;/li&gt;
	&lt;li&gt;&apos;LOG.error(&quot;Cannot close proxy since it is null &quot;);&apos; - unnecessary whitespace at the end of the string.&lt;/li&gt;
	&lt;li&gt;Seems like it shouldn&apos;t be too tough to write a test for this with some mock objects.&lt;/li&gt;
	&lt;li&gt;Rather than have a single catch-all error message at the bottom, and return early to avoid it, I think it&apos;d be better to only ever log a single error, and include the relevant information which caused the failure to close the proxy in that log message.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Also:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Does this fix the exception that you observed in the test, where proxy was not stopped?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What exception? In what test?&lt;/p&gt;</comment>
                            <comment id="13236931" author="atm" created="Fri, 23 Mar 2012 18:54:44 +0000"  >&lt;p&gt;Also, given that implementing the ProtocolTranslator interface is necessary in order for &lt;tt&gt;RPC#getServerAddress&lt;/tt&gt; to work, perhaps a better solution would be to leave &lt;tt&gt;RPC#stopProxy&lt;/tt&gt; as it is now, and change the protocol translators that currently implement &lt;tt&gt;Closeable&lt;/tt&gt; to instead implement &lt;tt&gt;ProtocolTrnaslator&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13236948" author="sureshms" created="Fri, 23 Mar 2012 19:00:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;&quot;c = (Closeable) Proxy.getInvocationHandler(proxy);&quot; - this could potentially cause an uncaught ClassCastException, if the InvocationHandler itself doesn&apos;t implement Closeable.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not necessary - all invocation handlers in Hadoop are RpcInvocationHandlers and they implement Closeable.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Seems like it shouldn&apos;t be too tough to write a test for this with some mock objects.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think this seems wholly unnecessary. Currently stopProxy is completely failing. I know that multiple times things have changed in this part of the code, and has been broken for some time.&lt;/p&gt;

&lt;p&gt;I am +1 without any tests.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Rather than have a single catch-all error message at the bottom, and return early to avoid it, I think it&apos;d be better to only ever log a single error, and include the relevant information which caused the failure to close the proxy in that log message.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is your coding style. I am not sure if it should be followed by every one.&lt;/p&gt;

&lt;p&gt;Again, I am okay to commit this, once we have log statement from the existing test.&lt;/p&gt;</comment>
                            <comment id="13236949" author="hadoopqa" created="Fri, 23 Mar 2012 19:01:11 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519675/HADOOP-8202.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519675/HADOOP-8202.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                  org.apache.hadoop.fs.viewfs.TestViewFsTrash&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/755//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/755//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/755//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/755//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13236952" author="sureshms" created="Fri, 23 Mar 2012 19:02:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also, given that implementing the ProtocolTranslator interface is necessary in order for RPC#getServerAddress to work, perhaps a better solution would be to leave RPC#stopProxy as it is now, and change the protocol translators that currently implement Closeable to instead implement ProtocolTrnaslator.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I want to look at the ProtocolTranslator and why it is needed in detail. In this part of the code clearly ProtocolTranslator is not required.&lt;/p&gt;</comment>
                            <comment id="13236985" author="harip" created="Fri, 23 Mar 2012 19:48:46 +0000"  >&lt;p&gt;The test was TestBackupNode.  Including the relevant output from the test.&lt;/p&gt;

&lt;p&gt;2012-03-23 12:45:31,277 INFO  namenode.NameNode (NameNodeRpcServer.java:errorReport(321)) - Error report from NamenodeRegistration(localhost:64139, role=Backup Node): Shutting down.&lt;/p&gt;

&lt;p&gt;2012-03-23 12:45:31,277 INFO  namenode.FSEditLog (FSEditLog.java:releaseBackupStream(1030)) - Removing backup journal BackupJournalManager&lt;/p&gt;

&lt;p&gt;2012-03-23 12:45:31,277 ERROR ipc.RPC (RPC.java:stopProxy(593)) - Tried to call RPC.stopProxy on an object that is not a proxy.&lt;br/&gt;
java.lang.IllegalArgumentException: not a proxy instance&lt;br/&gt;
        at java.lang.reflect.Proxy.getInvocationHandler(Proxy.java:637)        at org.apache.hadoop.ipc.RPC.stopProxy(RPC.java:591)&lt;br/&gt;
        at org.apache.hadoop.hdfs.server.namenode.EditLogBackupOutputStream.abort(EditLogBackupOutputStream.java:106)        at org.apache.hadoop.hdfs.server.namenode.JournalSet$JournalAndStream.abort(JournalSet.java:98)&lt;br/&gt;
        at org.apache.hadoop.hdfs.server.namenode.JournalSet.remove(JournalSet.java:531)&lt;br/&gt;
        at org.apache.hadoop.hdfs.server.namenode.FSEditLog.releaseBackupStream(FSEditLog.java:1031)&lt;br/&gt;
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.releaseBackupNode(FSNamesystem.java:4663)&lt;br/&gt;
        at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.errorReport(NameNodeRpcServer.java:323)&lt;br/&gt;
        at org.apache.hadoop.hdfs.protocolPB.NamenodeProtocolServerSideTranslatorPB.errorReport(NamenodeProtocolServerSideTranslatorPB.java:125)&lt;br/&gt;
        at org.apache.hadoop.hdfs.protocol.proto.NamenodeProtocolProtos$NamenodeProtocolService$2.callBlockingMethod(NamenodeProtocolProtos.java:8072)&lt;br/&gt;
        at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:417)&lt;br/&gt;
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:884)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1661)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1657)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1205)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1655)&lt;br/&gt;
2012-03-23 12:45:31,277 ERROR ipc.RPC (RPC.java:stopProxy(603)) - Could not get invocation handler null for proxy c&lt;br/&gt;
lass class org.apache.hadoop.hdfs.protocolPB.JournalProtocolTranslatorPB, or invocation handler is not closeable.&lt;br/&gt;
2012-03-23 12:45:31,278 ERROR ipc.RPC (RPC.java:stopProxy(593)) - Tried to call RPC.stopProxy on an object that is &lt;br/&gt;
not a proxy.java.lang.IllegalArgumentException: not a proxy instance&lt;br/&gt;
        at java.lang.reflect.Proxy.getInvocationHandler(Proxy.java:637)&lt;br/&gt;
        at org.apache.hadoop.ipc.RPC.stopProxy(RPC.java:591)        at org.apache.hadoop.hdfs.server.namenode.BackupNode.stop(BackupNode.java:194)&lt;br/&gt;
        at org.apache.hadoop.hdfs.server.namenode.TestBackupNode.testBackupNodeTailsEdits(TestBackupNode.java:169)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
        at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)&lt;br/&gt;
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)&lt;br/&gt;
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)&lt;br/&gt;
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)&lt;br/&gt;
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)&lt;br/&gt;
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)&lt;br/&gt;
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)&lt;br/&gt;
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)&lt;br/&gt;
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)&lt;br/&gt;
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)&lt;br/&gt;
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)&lt;br/&gt;
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)&lt;br/&gt;
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:81)&lt;br/&gt;
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)&lt;/p&gt;

&lt;p&gt;2012-03-23 12:45:31,278 ERROR ipc.RPC (RPC.java:stopProxy(603)) - Could not get invocation handler null for proxy class class org.apache.hadoop.hdfs.protocolPB.NamenodeProtocolTranslatorPB, or invocation handler is not closeable.  ---------&amp;gt; Proxy was not closed.&lt;/p&gt;

</comment>
                            <comment id="13236996" author="atm" created="Fri, 23 Mar 2012 19:53:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;Not necessary - all invocation handlers in Hadoop are RpcInvocationHandlers and they implement Closeable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you guarantee that all future invocation handlers in Hadoop will implement Closeable?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think this seems wholly unnecessary. Currently stopProxy is completely failing. I know that multiple times things have changed in this part of the code, and has been broken for some time.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is a great reason to add a test - so that such things don&apos;t regress in the future.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This is your coding style. I am not sure if it should be followed by every one.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, it&apos;s a preference, but that in itself isn&apos;t a good reason to not address the comment. Can you comment on why it&apos;s better to split the reasons for an error across several log statements?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I want to look at the ProtocolTranslator and why it is needed in detail. In this part of the code clearly ProtocolTranslator is not required.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you have a better way to implement RPC.getServerAddress, I&apos;m happy to hear it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The test was TestBackupNode.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks for the info, Hari.&lt;/p&gt;</comment>
                            <comment id="13237005" author="hadoopqa" created="Fri, 23 Mar 2012 20:16:54 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519700/HADOOP-8202-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519700/HADOOP-8202-1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/758//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/758//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/758//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/758//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13237207" author="sureshms" created="Fri, 23 Mar 2012 22:14:19 +0000"  >&lt;p&gt;The problem with the code that was written is, it silently ignored the error and just printed a log and did not indicate the error. This is what is being fixed now.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can you guarantee that all future invocation handlers in Hadoop will implement Closeable?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Write the code with either proxy is closeable or has an invocation handler that is closeable. If that is not the case, then it is programming error! Throw RuntimeException, so it is found early and not silently ignored.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This is a great reason to add a test - so that such things don&apos;t regress in the future.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7607&quot; title=&quot;Simplify the RPC proxy cleanup process&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7607&quot;&gt;&lt;del&gt;HADOOP-7607&lt;/del&gt;&lt;/a&gt; did not add tests either. Hence this bug. I suggest, lets practice what we preach!&lt;/p&gt;

&lt;p&gt;On a related note, I am also not happy for simple changes, we keep mandating adding unit tests. Some times, it is okay to use judgement call and not add unnecessary tests. Adding useless tests comes at a cost. When we did the federation feature, we spent half the time fixing poorly documented and lame tests. Not that these tests were finding bugs, the tests simply did not work well the code changes.&lt;/p&gt;

&lt;p&gt;That said, Hari, if you want you can add tests.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Sure, it&apos;s a preference, but that in itself isn&apos;t a good reason to not address the comment. Can you comment on why it&apos;s better to split the reasons for an error across several log statements?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You cannot argue matter of taste. Is the code incorrect? Else, I like this code better, because I do not have to handle exception twice, but in one single place around closeable. I am observing that our code reviews are becoming too strict. Not every patch I review should look like the code I would write. As long it is correct, follows coding standards, it should be good. I have been seeing some comments these days, to say, can we call variable name as ioe instead of e. I believe, we should relax these.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If you have a better way to implement RPC.getServerAddress, I&apos;m happy to hear it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Perhaps this is the only way. I need to look into it. But that is not required while stopping proxy. It is orthogonal.&lt;/p&gt;

&lt;p&gt;Hari, after thinking a bit, I believe we should throw HadoopIllegalArgumentException, if either the proxy is not closeable or does not have Invocation handler.&lt;/p&gt;</comment>
                            <comment id="13237271" author="harip" created="Fri, 23 Mar 2012 23:15:10 +0000"  >&lt;p&gt;Including a patch that takes care of concerns&lt;/p&gt;

&lt;p&gt;1. Throws HadoopIllegalArgumentexception if proxy is not closeable&lt;br/&gt;
2. Throws HadoopIllegalArgumentexception if invocation handler is not closeable&lt;br/&gt;
3. New test to catch the error scenario when a null proxy is used.&lt;br/&gt;
4. Modified existing negative test so that it does not fail since exception is thrown.&lt;br/&gt;
5. Fixed javadoc comments&lt;/p&gt;</comment>
                            <comment id="13237278" author="atm" created="Fri, 23 Mar 2012 23:17:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;The problem with the code that was written is, it silently ignored the error and just printed a log and did not indicate the error. This is what is being fixed now.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Note that when &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7607&quot; title=&quot;Simplify the RPC proxy cleanup process&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7607&quot;&gt;&lt;del&gt;HADOOP-7607&lt;/del&gt;&lt;/a&gt; was being implemented, it was a conscious decision to log a warning instead of throwing, so as to maintain backward compatibility with the previous implementation. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7607?focusedCommentId=13097236&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13097236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this comment&lt;/a&gt;. We&apos;re now making a conscious decision to change that here, which is fine, but it should be noted.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7607&quot; title=&quot;Simplify the RPC proxy cleanup process&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7607&quot;&gt;&lt;del&gt;HADOOP-7607&lt;/del&gt;&lt;/a&gt; did not add tests either. Hence this bug. I suggest, lets practice what we preach!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7607&quot; title=&quot;Simplify the RPC proxy cleanup process&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7607&quot;&gt;&lt;del&gt;HADOOP-7607&lt;/del&gt;&lt;/a&gt; didn&apos;t introduce this bug. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7607&quot; title=&quot;Simplify the RPC proxy cleanup process&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7607&quot;&gt;&lt;del&gt;HADOOP-7607&lt;/del&gt;&lt;/a&gt; was just a refactor, hence why it had no tests.&lt;/p&gt;

&lt;p&gt;This bug was introduced because of the following events:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;It used to be that all proxy objects used by client classes were directly referenced by RPC engines. During this time, the code in RPC#stopProxy worked just fine, but required users of proxy objects that wrapped other proxy objects to hold a reference to the underlying proxy object just for the purpose of calling RPC#stopProxy. This is why for a long time DFSClient had two references to ClientProtocol objects - one to call methods on, the other to call RPC#stopProxy on.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7607&quot; title=&quot;Simplify the RPC proxy cleanup process&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7607&quot;&gt;&lt;del&gt;HADOOP-7607&lt;/del&gt;&lt;/a&gt; refactored the code in RPC#stopProxy to actually call close on the invocation handler of the proxy object directly, instead of going through the RPCEngine. This would allow the invocation handler to bubble this down to underlying proxies. This was committed in September of 2011.&lt;/li&gt;
	&lt;li&gt;We began to introduce protocol translators for protobuf support in December of 2011. This caused the code in RPC#stopProxy to stop actually releasing underlying resources when RPC#stopProxy was called with a translator object provided as the argument, since the objects we were calling RPC#stopProxy on were no longer actual proxy objects, and hence Proxy#getInvocationHandler would fail. Unfortunately, no one noticed this until now. The introduction of protocol translators also caused RPC#getServerAddress to break, but again no one noticed. I introduced the ProtocolTranslator interface because I needed RPC#getServerAddress to work in order to implement &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2792&quot; title=&quot;HA: Make fsck work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2792&quot;&gt;&lt;del&gt;HDFS-2792&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;


&lt;blockquote&gt;&lt;p&gt;On a related note, I am also not happy for simple changes, we keep mandating adding unit tests. Some times, it is okay to use judgement call and not add unnecessary tests.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, I agree with you. The question here is what constitutes a &quot;simple change.&quot;&lt;/p&gt;

&lt;p&gt;FWIW, we often add tests for &quot;simple changes,&quot; not to prove that the new code works, but to prevent it from ever regressing in the future. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-3099&quot; title=&quot;SecondaryNameNode does not properly initialize metrics system&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-3099&quot;&gt;&lt;del&gt;HDFS-3099&lt;/del&gt;&lt;/a&gt; as an example.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I am observing that our code reviews are becoming too strict. Not every patch I review should look like the code I would write. As long it is correct, follows coding standards, it should be good. I have been seeing some comments these days, to say, can we call variable name as ioe instead of e. I believe, we should relax these.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, they&apos;re definitely just nits, but it&apos;s not like they&apos;re difficult to address. It almost certainly would take less time to address these comments than it does to argue about them.&lt;/p&gt;</comment>
                            <comment id="13237295" author="atm" created="Fri, 23 Mar 2012 23:32:55 +0000"  >&lt;p&gt;The latest patch looks good to me. +1 pending Jenkins.&lt;/p&gt;</comment>
                            <comment id="13237317" author="sureshms" created="Fri, 23 Mar 2012 23:57:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7607&quot; title=&quot;Simplify the RPC proxy cleanup process&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7607&quot;&gt;&lt;del&gt;HADOOP-7607&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I take what you are saying - since I do not want to waste time on this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Sure, they&apos;re definitely just nits, but it&apos;s not like they&apos;re difficult to address. It almost certainly would take less time to address these comments than it does to argue about them.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In the comments, I post this kind of comments as optional - as a suggestion. If the contributor likes it/wants to address it, then it is up to him. Perhaps, adding optional/suggestion for such comments would be good, instead of cycles of nits and time wasted on addressing them. We can make better use of time.&lt;/p&gt;</comment>
                            <comment id="13237331" author="hadoopqa" created="Sat, 24 Mar 2012 00:17:58 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519747/HADOOP-8202-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519747/HADOOP-8202-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                  org.apache.hadoop.ha.TestHealthMonitor&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/772//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/772//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/772//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/772//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13237383" author="harip" created="Sat, 24 Mar 2012 01:16:35 +0000"  >&lt;p&gt;testhealthmonitor failure is due to hadoop-8204.&lt;/p&gt;

&lt;p&gt;However, I am running the entire suite of hdfs tests to make sure that nothing else is broken.&lt;/p&gt;</comment>
                            <comment id="13237667" author="harip" created="Sat, 24 Mar 2012 20:46:54 +0000"  >&lt;p&gt;hdfs tests went through. There were test failures. However, it does not seem to be related to stopproxy() changes. I will file jiras on the test failures.&lt;/p&gt;
</comment>
                            <comment id="13237706" author="harip" created="Sat, 24 Mar 2012 21:50:01 +0000"  >&lt;p&gt;hadoop-common tests also passed except for testheatlhmonitor. Looking at the testhealthmonitor test, it is creating a proxy using mockito and I am guessing that this is not closeable. This is the reason for the error.&lt;/p&gt;</comment>
                            <comment id="13237717" author="atm" created="Sat, 24 Mar 2012 22:51:22 +0000"  >&lt;p&gt;Thanks for looking into the errors, Hari. We will have to do something to address the TestHealthMonitor failure before we can commit this patch - either update TestHealthMonitor so that it passes with this change as-written, or change this patch to allow for proxies/invocation handlers which do not necessarily implement Closeable.&lt;/p&gt;</comment>
                            <comment id="13237720" author="tlipcon" created="Sat, 24 Mar 2012 23:03:45 +0000"  >&lt;p&gt;I think maintaining the ability to support mockito spies/mocks for proxies is important. We use it for simulating all kinds of failure conditions &amp;#8211; I&apos;m surprised you didn&apos;t have a lot of HDFS failures from the same issue.&lt;/p&gt;</comment>
                            <comment id="13237785" author="hadoopqa" created="Sun, 25 Mar 2012 05:45:30 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519847/HADOOP-8202-3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519847/HADOOP-8202-3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                  org.apache.hadoop.fs.viewfs.TestViewFsTrash&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/774//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/774//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/774//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/774//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13237787" author="harip" created="Sun, 25 Mar 2012 06:05:26 +0000"  >&lt;p&gt;testviewfstrash failure is unrelated to this change.&lt;/p&gt;</comment>
                            <comment id="13238088" author="atm" created="Mon, 26 Mar 2012 03:57:17 +0000"  >&lt;p&gt;Hey Hari, thanks for updating the patch to fix TestHealthMonitor.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There were test failures. However, it does not seem to be related to stopproxy() changes. I will file jiras on the test failures.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you list here which tests failed? Can you comment on Todd&apos;s comment that he&apos;s surprised many HDFS tests didn&apos;t fail? Perhaps it&apos;s because in most tests where we mock out a protocol object, we never try to close that protocol object. Just a guess.&lt;/p&gt;</comment>
                            <comment id="13238109" author="harip" created="Mon, 26 Mar 2012 05:24:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can you list here which tests failed? Can you comment on Todd&apos;s comment that he&apos;s surprised many HDFS tests didn&apos;t fail? Perhaps it&apos;s because in most tests where we mock out a protocol object, we never try to close that protocol object. Just a guess.&lt;/p&gt;

&lt;p&gt;Sure, the tests that failed were &lt;br/&gt;
1. TestStartup&lt;br/&gt;
2. TestValidateConfigurationSettings&lt;br/&gt;
3. TestGetBlocks&lt;/p&gt;

&lt;p&gt;I have a trivial fix for TestGetBlocks, even though unrelated to this jira. Other tests definitely don&apos;t seem to be doing stopproxy(). So, will file the jiras for now.&lt;/p&gt;

&lt;p&gt;Regarding Todd&apos;s comment, my guess is also that we never try to close mockito based proxy objects. &lt;/p&gt;</comment>
                            <comment id="13238125" author="tlipcon" created="Mon, 26 Mar 2012 06:01:25 +0000"  >&lt;p&gt;Instead of adding the instanceof check anywhere we use an object that might be a mock, can we instead change the protocol interfaces themselves to &quot;extend Closeable&quot;? That will make sure that any proxy implementations themselves take care of extending it, and also will solve the mock issue (since the mock itself will then also extend Closeable).&lt;/p&gt;</comment>
                            <comment id="13238132" author="atm" created="Mon, 26 Mar 2012 06:11:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;Sure, the tests that failed were &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks, Hari. I agree those test failures are unrelated. TestGetBlocks is currently failing on trunk (&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-3143&quot; title=&quot;TestGetBlocks.testGetBlocks is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-3143&quot;&gt;&lt;del&gt;HDFS-3143&lt;/del&gt;&lt;/a&gt;) and I&apos;ve seen TestStartup and TestValidateConfigurationSettings fail spuriously before.&lt;/p&gt;</comment>
                            <comment id="13238586" author="sureshms" created="Mon, 26 Mar 2012 17:36:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;Instead of adding the instanceof check anywhere we use an object that might be a mock, can we instead change the protocol interfaces themselves to &quot;extend Closeable&quot;? That will make sure that any proxy implementations themselves take care of extending it, and also will solve the mock issue (since the mock itself will then also extend Closeable).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Given that it is done once, this patch should get committed. Todd, if you feel strongly about Closeable, please can you create a jira. &lt;/p&gt;
</comment>
                            <comment id="13238588" author="sureshms" created="Mon, 26 Mar 2012 17:37:27 +0000"  >&lt;p&gt;I am going to commit this in an hour or so. As I said in my previous comment, please create another jira, if further changes are needed.&lt;/p&gt;</comment>
                            <comment id="13238597" author="tlipcon" created="Mon, 26 Mar 2012 17:42:48 +0000"  >&lt;p&gt;Sure, go ahead and commit. Thanks.&lt;/p&gt;</comment>
                            <comment id="13238674" author="sureshms" created="Mon, 26 Mar 2012 18:52:35 +0000"  >&lt;p&gt;While committing I found a merge conflict - uploading the newer patch with merge conflict resolved.&lt;/p&gt;</comment>
                            <comment id="13238713" author="hadoopqa" created="Mon, 26 Mar 2012 19:26:10 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519992/HADOOP-8202-4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519992/HADOOP-8202-4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/783//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/783//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/783//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/783//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13239120" author="tlipcon" created="Tue, 27 Mar 2012 02:16:58 +0000"  >&lt;p&gt;This broke TestZKFailoverController, since it&apos;s now getting IllegalArgumentException trying to close the proxy.&lt;/p&gt;</comment>
                            <comment id="13239146" author="sureshms" created="Tue, 27 Mar 2012 03:39:17 +0000"  >&lt;p&gt;I committed the patch to both trunk and 0.23.3&lt;/p&gt;</comment>
                            <comment id="13239147" author="hudson" created="Tue, 27 Mar 2012 03:40:50 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #2009 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2009/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2009/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. RPC stopProxy() does not close the proxy correctly. Contributed by Hari Mankude. (Revision 1305704)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/HealthMonitor.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/RPC.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ipc/TestRPC.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13239148" author="hudson" created="Tue, 27 Mar 2012 03:41:42 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #1934 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1934/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1934/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. RPC stopProxy() does not close the proxy correctly. Contributed by Hari Mankude. (Revision 1305704)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/HealthMonitor.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/RPC.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ipc/TestRPC.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13239152" author="sureshms" created="Tue, 27 Mar 2012 03:53:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;This broke TestZKFailoverController, since it&apos;s now getting IllegalArgumentException trying to close the proxy.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8219&quot; title=&quot;TestZKFailoverController fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8219&quot;&gt;&lt;del&gt;HADOOP-8219&lt;/del&gt;&lt;/a&gt; created.&lt;/p&gt;</comment>
                            <comment id="13239162" author="hudson" created="Tue, 27 Mar 2012 04:21:55 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #1947 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1947/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1947/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. RPC stopProxy() does not close the proxy correctly. Contributed by Hari Mankude. (Revision 1305704)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/HealthMonitor.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/RPC.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ipc/TestRPC.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13239423" author="hudson" created="Tue, 27 Mar 2012 13:10:41 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #997 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/997/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/997/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. RPC stopProxy() does not close the proxy correctly. Contributed by Hari Mankude. (Revision 1305704)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/HealthMonitor.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/RPC.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ipc/TestRPC.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13239470" author="hudson" created="Tue, 27 Mar 2012 13:58:47 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1032 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1032/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1032/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. RPC stopProxy() does not close the proxy correctly. Contributed by Hari Mankude. (Revision 1305704)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1305704&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/HealthMonitor.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/RPC.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ipc/TestRPC.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13240590" author="hudson" created="Wed, 28 Mar 2012 18:07:48 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #2014 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2014/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2014/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-3156&quot; title=&quot;TestDFSHAAdmin is failing post HADOOP-8202&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-3156&quot;&gt;&lt;del&gt;HDFS-3156&lt;/del&gt;&lt;/a&gt;. TestDFSHAAdmin is failing post &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. Contributed by Aaron T. Myers. (Revision 1306517)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
atm : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestDFSHAAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13240594" author="hudson" created="Wed, 28 Mar 2012 18:08:47 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #1939 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1939/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1939/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-3156&quot; title=&quot;TestDFSHAAdmin is failing post HADOOP-8202&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-3156&quot;&gt;&lt;del&gt;HDFS-3156&lt;/del&gt;&lt;/a&gt;. TestDFSHAAdmin is failing post &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. Contributed by Aaron T. Myers. (Revision 1306517)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
atm : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestDFSHAAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13240623" author="hudson" created="Wed, 28 Mar 2012 18:48:50 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #1952 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1952/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1952/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-3156&quot; title=&quot;TestDFSHAAdmin is failing post HADOOP-8202&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-3156&quot;&gt;&lt;del&gt;HDFS-3156&lt;/del&gt;&lt;/a&gt;. TestDFSHAAdmin is failing post &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. Contributed by Aaron T. Myers. (Revision 1306517)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
atm : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestDFSHAAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13241216" author="hudson" created="Thu, 29 Mar 2012 13:42:23 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1034 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1034/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1034/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-3156&quot; title=&quot;TestDFSHAAdmin is failing post HADOOP-8202&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-3156&quot;&gt;&lt;del&gt;HDFS-3156&lt;/del&gt;&lt;/a&gt;. TestDFSHAAdmin is failing post &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. Contributed by Aaron T. Myers. (Revision 1306517)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
atm : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestDFSHAAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13241238" author="hudson" created="Thu, 29 Mar 2012 13:52:36 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #999 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/999/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/999/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-3156&quot; title=&quot;TestDFSHAAdmin is failing post HADOOP-8202&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-3156&quot;&gt;&lt;del&gt;HDFS-3156&lt;/del&gt;&lt;/a&gt;. TestDFSHAAdmin is failing post &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. Contributed by Aaron T. Myers. (Revision 1306517)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
atm : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestDFSHAAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242343" author="hudson" created="Fri, 30 Mar 2012 13:59:27 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1035 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1035/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1035/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-3156&quot; title=&quot;TestDFSHAAdmin is failing post HADOOP-8202&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-3156&quot;&gt;&lt;del&gt;HDFS-3156&lt;/del&gt;&lt;/a&gt;. TestDFSHAAdmin is failing post &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8202&quot; title=&quot;stopproxy() is not closing the proxies correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8202&quot;&gt;&lt;del&gt;HADOOP-8202&lt;/del&gt;&lt;/a&gt;. Contributed by Aaron T. Myers. (Revision 1306517)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
atm : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1306517&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestDFSHAAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242895" author="tlipcon" created="Sat, 31 Mar 2012 00:44:57 +0000"  >&lt;p&gt;This patch also introduced the following bug: if the proxy.close() function throws an IOException, then HadoopIllegalArgumentException will be thrown, claiming that the proxy doesn&apos;t implement Closeable. This is the wrong error to throw, and is a regression in behavior (failure to close due to IOE should just be a warning, as it was previously). Hari, would you mind fixing this?&lt;/p&gt;</comment>
                            <comment id="13242922" author="harip" created="Sat, 31 Mar 2012 01:25:07 +0000"  >&lt;p&gt;Will take a look. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12548235">HADOOP-8219</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12519700" name="HADOOP-8202-1.patch" size="2085" author="harip" created="Fri, 23 Mar 2012 19:55:46 +0000"/>
                            <attachment id="12519747" name="HADOOP-8202-2.patch" size="4116" author="harip" created="Fri, 23 Mar 2012 23:16:49 +0000"/>
                            <attachment id="12519847" name="HADOOP-8202-3.patch" size="5115" author="harip" created="Sun, 25 Mar 2012 05:25:49 +0000"/>
                            <attachment id="12519992" name="HADOOP-8202-4.patch" size="5111" author="sureshms" created="Mon, 26 Mar 2012 18:52:34 +0000"/>
                            <attachment id="12519675" name="HADOOP-8202.patch" size="2086" author="harip" created="Fri, 23 Mar 2012 18:08:27 +0000"/>
                            <attachment id="12519670" name="HADOOP-8202.patch" size="2038" author="harip" created="Fri, 23 Mar 2012 17:49:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232931</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07un3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43731</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12320059">0.23.3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>