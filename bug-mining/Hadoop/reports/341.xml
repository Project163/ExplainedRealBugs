<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:35:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-7563] hadoop-config.sh setup CLASSPATH, HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME incorrectly</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-7563</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME was set to HADOOP_PREFIX/share/hadoop/hdfs and HADOOP_PREFIX/share/hadoop/mapreduce.  This setup confuses the location of hdfs and mapred scripts.  Instead the script should look for hdfs and mapred script in HADOOP_PREFIX/bin.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519645">HADOOP-7563</key>
            <summary>hadoop-config.sh setup CLASSPATH, HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eyang">Eric Yang</assignee>
                                    <reporter username="eyang">Eric Yang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Aug 2011 06:22:24 +0000</created>
                <updated>Tue, 15 Nov 2011 00:51:05 +0000</updated>
                            <resolved>Thu, 25 Aug 2011 00:11:39 +0000</resolved>
                                    <version>0.23.0</version>
                                    <fixVersion>0.23.0</fixVersion>
                                    <component>scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13088541" author="eyang" created="Mon, 22 Aug 2011 06:23:58 +0000"  >&lt;p&gt;Aligned HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME with HADOOP_PREFIX.&lt;/p&gt;</comment>
                            <comment id="13089158" author="eli" created="Mon, 22 Aug 2011 23:58:03 +0000"  >&lt;p&gt;+1  lgtm. Testing?&lt;/p&gt;</comment>
                            <comment id="13089198" author="eyang" created="Tue, 23 Aug 2011 00:59:21 +0000"  >&lt;p&gt;There is some issue in the script for resolving CLASSPATH for HDFS and MAPRED.&lt;/p&gt;</comment>
                            <comment id="13089215" author="eyang" created="Tue, 23 Aug 2011 02:00:47 +0000"  >&lt;p&gt;Updated script to locate HDFS and MAPRED in their respective location.  Removed legacy layout of running from source code.&lt;/p&gt;</comment>
                            <comment id="13089323" author="atm" created="Tue, 23 Aug 2011 07:33:18 +0000"  >&lt;p&gt;I tested this out by building a dist layout and setting HADOOP_COMMON_HOME and HADOOP_HDFS_HOME to the resulting directories. When applied with the patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2277&quot; title=&quot;CLASSPATH for locating HDFS jar file is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2277&quot;&gt;&lt;del&gt;HDFS-2277&lt;/del&gt;&lt;/a&gt;, this patch seems to have fixed the issues with finding the hadoop-config.sh file, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2277&quot; title=&quot;CLASSPATH for locating HDFS jar file is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2277&quot;&gt;&lt;del&gt;HDFS-2277&lt;/del&gt;&lt;/a&gt; seems to have fixed the HDFS classpath to find the HDFS jars. However, I now get this error when I try to start at NN:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NoClassDefFoundError: org/apache/hadoop/alfredo/util/KerberosName
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
	at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
	at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:197)
	at org.apache.hadoop.security.UserGroupInformation.setConfiguration(UserGroupInformation.java:254)
	at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:411)
	at org.apache.hadoop.hdfs.server.namenode.NameNode.&amp;lt;init&amp;gt;(NameNode.java:566)
	at org.apache.hadoop.hdfs.server.namenode.NameNode.&amp;lt;init&amp;gt;(NameNode.java:558)
	at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1546)
	at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1586)
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.alfredo.util.KerberosName
	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once this is fixed, I think these patches are ready to go.&lt;/p&gt;

&lt;p&gt;However, at this point the scopes of both this JIRA and &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2277&quot; title=&quot;CLASSPATH for locating HDFS jar file is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2277&quot;&gt;&lt;del&gt;HDFS-2277&lt;/del&gt;&lt;/a&gt; have creeped somewhat. This JIRA is now addressing more than just setting HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME appropriately, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2277&quot; title=&quot;CLASSPATH for locating HDFS jar file is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2277&quot;&gt;&lt;del&gt;HDFS-2277&lt;/del&gt;&lt;/a&gt; is doing more than just fixing the classpath to include the HDFS jars. Since these two JIRAs seem intimately related, I suggest we make all of the needed changes (to both Common and HDFS) in this JIRA, change the description of this JIRA to something like &quot;fix hadoop scripts to reference each other and set up classpaths correctly,&quot; and resolve &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2277&quot; title=&quot;CLASSPATH for locating HDFS jar file is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2277&quot;&gt;&lt;del&gt;HDFS-2277&lt;/del&gt;&lt;/a&gt; as a duplicate.&lt;/p&gt;</comment>
                            <comment id="13089546" author="eyang" created="Tue, 23 Aug 2011 15:40:57 +0000"  >&lt;p&gt;The missing class in from hadoop-alfredo module.  Alejandro has made hadoop-common depends on hadoop-alfredo, but there is no script to package hadoop-alfredo-0.23.0-SNAPSHOT.jar file into hadoop-common-0.23.0-SNAPSHOT/share/hadoop/common.  If you manually copy it over there, then it is possible to use the scripts to start HDFS in both merged layout as well as separated layout using HADOOP_COMMON_HOME and HADOOP_HDFS_HOME environment variables.  Fixing alfredo is in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7560&quot; title=&quot;Make hadoop-common a POM module with sub-modules (common &amp;amp; alfredo)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7560&quot;&gt;&lt;del&gt;HADOOP-7560&lt;/del&gt;&lt;/a&gt;.  I think this jira and &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2277&quot; title=&quot;CLASSPATH for locating HDFS jar file is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2277&quot;&gt;&lt;del&gt;HDFS-2277&lt;/del&gt;&lt;/a&gt; are ready to be committed to contain the scope of the changes and keep things clean.&lt;/p&gt;</comment>
                            <comment id="13089550" author="tucu00" created="Tue, 23 Aug 2011 15:48:58 +0000"  >&lt;p&gt;I think I know the problem, the assembly is excluding hadoop-* JARs from going into lib. &lt;/p&gt;

&lt;p&gt;Currently Hadoop JARs are special and they don&apos;t go under lib/, there was a discussion going on in the alias a while back on this.&lt;/p&gt;

&lt;p&gt;Given that the dist is created in a complete different way now with Maven, and running from source is a bit different, I think the cleanest way (for assembly and from scripts) would be to put all JARs (Hadoop included) under lib/. &lt;/p&gt;

&lt;p&gt;The release-notes would clearly state this change.&lt;/p&gt;

&lt;p&gt;I&apos;ll verify this later this morning and I&apos;ll follow up with a JIRA.&lt;/p&gt;
</comment>
                            <comment id="13089563" author="eyang" created="Tue, 23 Aug 2011 16:15:39 +0000"  >&lt;p&gt;Alejandro, it is not maven prevents jar to go in lib.  The problem is in hadoop-common pom.xml, the dependency is expressed as &amp;lt;scope&amp;gt;compiled&amp;lt;/scope&amp;gt;.  Since hadoop-alfredo is required at run time, by removing &amp;lt;scope&amp;gt;compiled&amp;lt;/scope&amp;gt; should solves hadoop-alfredo CLASSPATH problem.  In the assemblies/hadoop-dist.xml, it should not &amp;lt;exclude&amp;gt;org.apache.hadoop:hadoop-*:jar&amp;lt;/exclude&amp;gt;, if the dependencies are expressed properly in hadoop-&lt;span class=&quot;error&quot;&gt;&amp;#91;hdfs|mapreduce&amp;#93;&lt;/span&gt;/pom.xml.&lt;/p&gt;</comment>
                            <comment id="13089572" author="tucu00" created="Tue, 23 Aug 2011 16:47:01 +0000"  >&lt;p&gt;Eric, the &lt;b&gt;compiled&lt;/b&gt; scope in Maven actually means that the JAR will be bundled with the application, it is a misleading name but I guess it stuck for historical reasons.&lt;/p&gt;

&lt;p&gt;The assemblies are doing a funny logic to exclude/include JARs in lib, the purpose of using wildcard instead the concrete artifacts to exclude/include is that the same assembly is used by common &amp;amp; hdfs (as per your feedback), and eventually it should be leveraged by mapreduce.&lt;/p&gt;

&lt;p&gt;Currently the assembly does:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &amp;lt;fileSets&amp;gt;
    ...
    &amp;lt;fileSet&amp;gt;
      &amp;lt;directory&amp;gt;${project.build.directory}&amp;lt;/directory&amp;gt;
      &amp;lt;outputDirectory&amp;gt;/share/hadoop/${hadoop.component}&amp;lt;/outputDirectory&amp;gt;
      &amp;lt;includes&amp;gt;
        &amp;lt;include&amp;gt;${project.artifactId}-${project.version}.jar&amp;lt;/include&amp;gt;
        &amp;lt;include&amp;gt;${project.artifactId}-${project.version}-tests.jar&amp;lt;/include&amp;gt;
        &amp;lt;include&amp;gt;${project.artifactId}-${project.version}-sources.jar&amp;lt;/include&amp;gt;
        &amp;lt;include&amp;gt;${project.artifactId}-${project.version}-test-sources.jar&amp;lt;/include&amp;gt;
      &amp;lt;/includes&amp;gt;
    &amp;lt;/fileSet&amp;gt;
    ...
  &amp;lt;/fileSets&amp;gt;
  &amp;lt;dependencySets&amp;gt;
    &amp;lt;dependencySet&amp;gt;
      &amp;lt;outputDirectory&amp;gt;/share/hadoop/${hadoop.component}/lib&amp;lt;/outputDirectory&amp;gt;
      &amp;lt;unpack&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/unpack&amp;gt;
      &amp;lt;scope&amp;gt;runtime&amp;lt;/scope&amp;gt;
      &amp;lt;useProjectArtifact&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/useProjectArtifact&amp;gt;
      &amp;lt;excludes&amp;gt;
        &amp;lt;exclude&amp;gt;org.apache.ant:*:jar&amp;lt;/exclude&amp;gt;
        &amp;lt;exclude&amp;gt;org.apache.hadoop:hadoop-*:jar&amp;lt;/exclude&amp;gt;
        &amp;lt;exclude&amp;gt;jdiff:jdiff:jar&amp;lt;/exclude&amp;gt;
      &amp;lt;/excludes&amp;gt;
    &amp;lt;/dependencySet&amp;gt;
  &amp;lt;/dependencySets&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;IMO, the assembly should do:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &amp;lt;fileSets&amp;gt;
    ...
  &amp;lt;/fileSets&amp;gt;
  &amp;lt;dependencySets&amp;gt;
    &amp;lt;dependencySet&amp;gt;
      &amp;lt;outputDirectory&amp;gt;/share/hadoop/${hadoop.component}/lib&amp;lt;/outputDirectory&amp;gt;
      &amp;lt;unpack&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/unpack&amp;gt;
      &amp;lt;scope&amp;gt;runtime&amp;lt;/scope&amp;gt;
      &amp;lt;useProjectArtifact&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/useProjectArtifact&amp;gt;
      &amp;lt;excludes&amp;gt;
        &amp;lt;exclude&amp;gt;org.apache.ant:*:jar&amp;lt;/exclude&amp;gt;
        &amp;lt;exclude&amp;gt;jdiff:jdiff:jar&amp;lt;/exclude&amp;gt;
      &amp;lt;/excludes&amp;gt;
    &amp;lt;/dependencySet&amp;gt;
  &amp;lt;/dependencySets&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What&apos;s different?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Hadoop JARs don&apos;t have an special handling, they end up in lib/&lt;/li&gt;
	&lt;li&gt;Hadoop &apos;tests&apos; JAR is not bundled with the distribution &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;Hadoop &apos;sources&apos; JARs are not bundled with the distribution &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(*: they are all published to Apache Maven repository, and IDEs download them from there automatically, the IDE will not look at the distribution location)&lt;/p&gt;</comment>
                            <comment id="13089573" author="tucu00" created="Tue, 23 Aug 2011 16:48:10 +0000"  >&lt;p&gt;(enter too soon)&lt;/p&gt;

&lt;p&gt;In addition, the &lt;b&gt;hadoop-config.sh&lt;/b&gt; script would just add to the classpath generation all JARs under lib/*, the logic will be easier.&lt;/p&gt;</comment>
                            <comment id="13089576" author="raviprak" created="Tue, 23 Aug 2011 16:54:46 +0000"  >&lt;p&gt;Maybe this is too late and perhaps it needs a new JIRA but while we are at it, can we please get rid of the ugly for loops for populating jar files into CLASSPATH? &lt;a href=&quot;http://download.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html&lt;/a&gt; . If we only included &amp;lt;directory&amp;gt;/* , all the jars under that directory will be picked up. Why did we have to write these for loops?&lt;/p&gt;
</comment>
                            <comment id="13089602" author="tucu00" created="Tue, 23 Aug 2011 17:22:04 +0000"  >&lt;p&gt;@Ravi, I believe the loops are a leftover from older version of Java (prior to 1.6) which did not handle all JARs in a dir.&lt;/p&gt;

&lt;p&gt;As you suggest, what could be done to simplify things is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CLASSPATH=&lt;span class=&quot;code-quote&quot;&gt;&quot;${HADOOP_CONF_DIR}&quot;&lt;/span&gt;
CLASSPATH=${CLASSPATH}:$HADOOP_PREFIX
CLASSPATH=${CLASSPATH}:&lt;span class=&quot;code-quote&quot;&gt;&quot;$HADOOP_PREFIX/share/hadoop/common/lib&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;/*&apos;&lt;/span&gt;
CLASSPATH=${CLASSPATH}:&lt;span class=&quot;code-quote&quot;&gt;&quot;$HADOOP_PREFIX/share/hadoop/hdfs/lib&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;/*&apos;&lt;/span&gt;
CLASSPATH=${CLASSPATH}:&lt;span class=&quot;code-quote&quot;&gt;&quot;$HADOOP_PREFIX/share/hadoop/mapreduce/lib&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;/*&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13089637" author="eyang" created="Tue, 23 Aug 2011 18:17:59 +0000"  >&lt;p&gt;I will update the patch with wild card.  For hadoop-common not to be in hadoop-hdfs, or hadoop-mapreduce.  Shouldn&apos;t it be marked as &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;?&lt;/p&gt;</comment>
                            <comment id="13089646" author="tucu00" created="Tue, 23 Aug 2011 18:29:11 +0000"  >&lt;p&gt;@Eric, are you also modifying the dist assembly as per my previous comment?&lt;/p&gt;

&lt;p&gt;Regarding the &lt;b&gt;provided&lt;/b&gt; scope, it all depends how we finally package Hadoop, as 3 different system layouts (common, hdfs &amp;amp; mapreduce) or as a single system layouts (hadoop). If the former, yes use &lt;b&gt;provided&lt;/b&gt;, if the later, we should use &lt;b&gt;compile&lt;/b&gt; and an assembly would stich common/hdfs/mapreduce into as a single system layout (that will be much easier and correct than using a script ot stich tars). &lt;/p&gt;

&lt;p&gt;But the second paragraph should be a separate JIRA, no?&lt;/p&gt;</comment>
                            <comment id="13089705" author="eyang" created="Tue, 23 Aug 2011 19:57:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;But the second paragraph should be a separate JIRA, no?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agree, my patch will not contain changes for second paragraph in your comment.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7560&quot; title=&quot;Make hadoop-common a POM module with sub-modules (common &amp;amp; alfredo)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7560&quot;&gt;&lt;del&gt;HADOOP-7560&lt;/del&gt;&lt;/a&gt; is the correct place to fix the scope.  &lt;/p&gt;</comment>
                            <comment id="13089735" author="eyang" created="Tue, 23 Aug 2011 20:40:18 +0000"  >&lt;p&gt;Per Aaron&apos;s suggestion, mark &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2277&quot; title=&quot;CLASSPATH for locating HDFS jar file is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2277&quot;&gt;&lt;del&gt;HDFS-2277&lt;/del&gt;&lt;/a&gt; as part of this JIRA.&lt;/p&gt;</comment>
                            <comment id="13089740" author="eyang" created="Tue, 23 Aug 2011 20:43:02 +0000"  >&lt;p&gt;Removed for loop to construct CLASSPATH, and integrate &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2277&quot; title=&quot;CLASSPATH for locating HDFS jar file is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2277&quot;&gt;&lt;del&gt;HDFS-2277&lt;/del&gt;&lt;/a&gt; as part of this patch.&lt;/p&gt;</comment>
                            <comment id="13089754" author="tucu00" created="Tue, 23 Aug 2011 20:54:57 +0000"  >&lt;p&gt;Comments on &apos;-2&apos; patch:&lt;/p&gt;

&lt;p&gt;Where you are doing: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ -d &lt;span class=&quot;code-quote&quot;&gt;&quot;$HADOOP_PREFIX/share/hadoop/common/lib&quot;&lt;/span&gt; ]; then
  CLASSPATH=${CLASSPATH}:$HADOOP_PREFIX/share/hadoop/common/lib/*;
fi

CLASSPATH=${CLASSPATH}:$HADOOP_PREFIX/share/hadoop/common/*.jar;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the first CLASSPATH=, you have to do &apos;/*&apos; to prevent the shell from resolving the wildcard. &apos;java&apos; does special handing.&lt;/p&gt;

&lt;p&gt;For the second CLASSPATH=, I don&apos;t that will be correctly resolved. There are multiple JARs at common/ level, and some of the them are test classes and sources. You don&apos;t want them in the classpath.&lt;/p&gt;

&lt;p&gt;IMO, the correct fix is to change the assembly as I&apos;ve pointed out before (to have the hadoop-* artifact JAR under lib) and then do:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  CLASSPATH=${CLASSPATH}:$HADOOP_PREFIX/share/hadoop/common/lib&lt;span class=&quot;code-quote&quot;&gt;&apos;/*&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13089763" author="atm" created="Tue, 23 Aug 2011 21:04:25 +0000"  >&lt;p&gt;Thanks a lot for addressing my comments, Eric. Would you mind also changing the description of this JIRA to more accurately reflect the increased scope?&lt;/p&gt;</comment>
                            <comment id="13089806" author="eyang" created="Tue, 23 Aug 2011 22:05:26 +0000"  >&lt;p&gt;Updated to reflect increased scope.&lt;/p&gt;</comment>
                            <comment id="13089858" author="tucu00" created="Tue, 23 Aug 2011 23:09:24 +0000"  >&lt;p&gt;Eric, the latest patch does not have the changes to the assembly I&apos;m suggesting, nor I see a comment against them. Are you planning to integrate them?&lt;/p&gt;</comment>
                            <comment id="13089886" author="eyang" created="Wed, 24 Aug 2011 00:05:38 +0000"  >&lt;p&gt;Alejandro, that was my suggestion to remove the exclude line on 23/Aug/11 16:15.  At 23/Aug/11 19:57, I agreed with you for your comment on 23/Aug/11 18:29, the fix for assembly does not belong to this jira.  Am I missing something?&lt;/p&gt;</comment>
                            <comment id="13089917" author="eyang" created="Wed, 24 Aug 2011 00:53:45 +0000"  >&lt;p&gt;Quoted wildcard to prevent shell expansion.&lt;/p&gt;</comment>
                            <comment id="13089926" author="eyang" created="Wed, 24 Aug 2011 01:07:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;For the second CLASSPATH=, I don&apos;t that will be correctly resolved. There are multiple JARs at common/ level, and some of the them are test classes and sources. You don&apos;t want them in the classpath.&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;&lt;p&gt;IMO, the correct fix is to change the assembly as I&apos;ve pointed out before (to have the hadoop-* artifact JAR under lib) and then do:&lt;/p&gt;&lt;/blockquote&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CLASSPATH=${CLASSPATH}:$HADOOP_PREFIX/share/hadoop/common/lib&apos;/*&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It makes no difference because all Hadoop jars would be in common/lib&apos;/&lt;b&gt;&apos; instead of having hadoop-common-&lt;span class=&quot;error&quot;&gt;&amp;#91;version&amp;#93;&lt;/span&gt;.jar in common/lib&apos;/&lt;/b&gt;&apos;.  It may make sense to move test jar to common/test, and javadoc to common/javadoc instead.  However, that should be a separated JIRA to fix that issue.&lt;/p&gt;</comment>
                            <comment id="13089957" author="tucu00" created="Wed, 24 Aug 2011 02:31:37 +0000"  >&lt;p&gt;why do we need the sources and tests JARs in the distribution? They are published to Maven central, Maven/IDEs download it from there.&lt;/p&gt;

&lt;p&gt;And for the full source, we could do as most projects do, the publish a SRC TAR with an image of the the buildable source.&lt;/p&gt;</comment>
                            <comment id="13090012" author="eyang" created="Wed, 24 Aug 2011 05:43:29 +0000"  >&lt;p&gt;source jar is for remote debugging.  It is important to keep running jar and source jar in the same place to ensure the debugging session is showing the right source code, and having test jar would help to validate the cluster like teragen, and terasort.  Hence, having them loaded to the class path are nice to have.&lt;/p&gt;</comment>
                            <comment id="13090311" author="tucu00" created="Wed, 24 Aug 2011 15:57:02 +0000"  >&lt;p&gt;OK, but having them at common/ level is a bit confusing, wouldn&apos;t make sense to have a common/developer/ directory for those JARs, so it is clear they don&apos;t have anything to do with the runtime?&lt;/p&gt;</comment>
                            <comment id="13090356" author="ecaspole" created="Wed, 24 Aug 2011 17:34:47 +0000"  >&lt;p&gt;Will this patch restore the HADOOP_COMMON_HOME/HADOOP_HDFS_HOME etc shell variables so I can untar the distro files I built with &quot;mvn clean install -DskipTests=true -Dtar -Pdist&quot; into separate directories and everything will work like it used to? Or is there a necessary &quot;munge all into one directory step&quot; to make a working system? I can&apos;t figure out how to run the trunk build and these scripts seem to be the issue. Thanks for any advice.&lt;/p&gt;</comment>
                            <comment id="13090362" author="atm" created="Wed, 24 Aug 2011 17:44:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Will this patch restore the HADOOP_COMMON_HOME/HADOOP_HDFS_HOME etc shell variables so I can untar the distro files I built with &quot;mvn clean install -DskipTests=true -Dtar -Pdist&quot; into separate directories and everything will work like it used to?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes it will. With this patch, plus something to address the Alfredo JAR issue, I&apos;ve been successfully able to run HDFS trunk just by doing `&lt;tt&gt;mvn clean package -DskipTests -Pdist&lt;/tt&gt;&apos; and then pointing HADOOP_COMMON_HOME and HADOOP_HDFS_HOME at the resulting directories, with no intermediate step of merging the contents of those directories.&lt;/p&gt;</comment>
                            <comment id="13090537" author="acmurthy" created="Wed, 24 Aug 2011 21:54:08 +0000"  >&lt;p&gt;Aaron, are you happy with this patch? Should I commit?&lt;/p&gt;</comment>
                            <comment id="13090545" author="tucu00" created="Wed, 24 Aug 2011 22:07:19 +0000"  >&lt;p&gt;Patch looks good.&lt;/p&gt;

&lt;p&gt;Still does not address the problem of hadoop-alfredo JAR nto being picked up (cuase&apos;s it is being excluded) and that the hadoop-*.jar should move to lib/. But it was agreed we&apos;ll do that a as follow up JIRA.&lt;/p&gt;</comment>
                            <comment id="13090575" author="atm" created="Wed, 24 Aug 2011 22:33:34 +0000"  >&lt;p&gt;+1, the latest patch looks good to me.&lt;/p&gt;

&lt;p&gt;Though this patch is definitely a big step in the right direction, I&apos;d like to see the Alfredo JAR issue fixed promptly, since even with this patch a user still needs to do the manual copy/paste of that JAR in order to run from the dist layout.&lt;/p&gt;

&lt;p&gt;Has a JIRA been filed to address that yet? Eric originally said &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7560&quot; title=&quot;Make hadoop-common a POM module with sub-modules (common &amp;amp; alfredo)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7560&quot;&gt;&lt;del&gt;HADOOP-7560&lt;/del&gt;&lt;/a&gt; would do so as a side effect, but Alejandro then said that it would not.&lt;/p&gt;</comment>
                            <comment id="13090579" author="acmurthy" created="Wed, 24 Aug 2011 22:36:15 +0000"  >&lt;p&gt;Thanks Aaron.&lt;/p&gt;

&lt;p&gt;Eric - if it isn&apos;t a biggie, can you please fix the excludes so that the alfredo jar issue is fixed too? Thanks!&lt;/p&gt;</comment>
                            <comment id="13090597" author="eyang" created="Wed, 24 Aug 2011 22:55:19 +0000"  >&lt;p&gt;I will fix alfredo jar issue.  Mark &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7560&quot; title=&quot;Make hadoop-common a POM module with sub-modules (common &amp;amp; alfredo)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7560&quot;&gt;&lt;del&gt;HADOOP-7560&lt;/del&gt;&lt;/a&gt; as dependent on this issue.&lt;/p&gt;</comment>
                            <comment id="13090609" author="eyang" created="Wed, 24 Aug 2011 23:15:05 +0000"  >&lt;p&gt;Updated patch to include assembly packaging fix.&lt;/p&gt;</comment>
                            <comment id="13090612" author="eyang" created="Wed, 24 Aug 2011 23:28:01 +0000"  >&lt;p&gt;Instruction for running in independent layout as well as merged layout.&lt;/p&gt;

&lt;p&gt;For independent layout:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mv clean package -Pdist -Dmaven.test.skip.exec=true
export HADOOP_COMMON_HOME=`trunk/hadoop-common/target/hadoop-common-0.23.0-SNAPSHOT`
export HADOOP_HDFS_HOME=`trunk/hadoop-hdfs/target/hadoop-hdfs-0.23.0-SNAPSHOT`
# edit $HADOOP_COMMON_HOME/etc/hadoop/core-site.xml
# edit $HADOOP_HDFS_HOME/etc/hadoop/hdfs-site.xml
cd $HADOOP_HDFS_HOME
$HADOOP_HDFS_HOME/bin/hdfs namenode -format
$HADOOP_COMMON_HOME/sbin/hadoop-daemon.sh start namenode
$HADOOP_COMMON_HOME/sbin/hadoop-daemon.sh start datanode
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For merged layout:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mv clean package -Pdist -Dtar -Dmaven.test.skip.exec=true
mkdir hadoop
cd hadoop
tar xv -skip-compoents=1 -f trunk/hadoop-common/target/hadoop-common*.tar.gz trunk/hadoop-hdfs/target/hadoop-hdfs*.tar.gz
# edit etc/hadoop/core-site.xml and hdfs-site.xml
./bin/hdfs namenode -format
./sbin/hadoop-daemon.sh start namenode
./sbin/hadoop-daemon.sh start datanode
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13090617" author="atm" created="Wed, 24 Aug 2011 23:44:17 +0000"  >&lt;p&gt;I applied the patch and tested it and it worked flawlessly - no Alfredo issues, and the NN/DN came right up from an un-merged dist layout.&lt;/p&gt;

&lt;p&gt;One thing I should have noticed earlier: I think some changes to the empty hdfs-site.xml file crept in to this patch by accident. Eric, could you take care of that?&lt;/p&gt;

&lt;p&gt;Alejandro, do the latest maven changes look good to you?&lt;/p&gt;</comment>
                            <comment id="13090618" author="tucu00" created="Wed, 24 Aug 2011 23:46:47 +0000"  >&lt;p&gt;Looks good, only NIT is that in hadoop-common/pom.xml the &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt; is being removed. Even if compile is the default, it should stay (else you can have surprises because of a different scope set in the dependenciesManagement section)&lt;/p&gt;</comment>
                            <comment id="13090620" author="eyang" created="Wed, 24 Aug 2011 23:51:19 +0000"  >&lt;p&gt;Correction to hadoop-common/pom.xml and accidental include of hdfs-site.xml.&lt;/p&gt;</comment>
                            <comment id="13090623" author="atm" created="Wed, 24 Aug 2011 23:55:38 +0000"  >&lt;p&gt;+1, v5 looks great to me.&lt;/p&gt;

&lt;p&gt;Thanks a lot for addressing all of mine/Alejandro&apos;s comments, Eric.&lt;/p&gt;</comment>
                            <comment id="13090632" author="acmurthy" created="Thu, 25 Aug 2011 00:11:39 +0000"  >&lt;p&gt;I just committed this. Thanks Eric!&lt;/p&gt;</comment>
                            <comment id="13090633" author="hudson" created="Thu, 25 Aug 2011 00:12:19 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #781 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/781/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/781/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7563&quot; title=&quot;hadoop-config.sh setup CLASSPATH, HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7563&quot;&gt;&lt;del&gt;HADOOP-7563&lt;/del&gt;&lt;/a&gt;. Setup HADOOP_HDFS_HOME, HADOOP_MAPRED_HOME and classpath correction. Contributed by Eric Yang.&lt;/p&gt;

&lt;p&gt;acmurthy : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/refresh-namenodes.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/start-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/distribute-exclude.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemons.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemon.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/slaves.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-assemblies/src/main/resources/assemblies/hadoop-dist.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/stop-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/rcc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13090634" author="hudson" created="Thu, 25 Aug 2011 00:12:42 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #856 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/856/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/856/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7563&quot; title=&quot;hadoop-config.sh setup CLASSPATH, HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7563&quot;&gt;&lt;del&gt;HADOOP-7563&lt;/del&gt;&lt;/a&gt;. Setup HADOOP_HDFS_HOME, HADOOP_MAPRED_HOME and classpath correction. Contributed by Eric Yang.&lt;/p&gt;

&lt;p&gt;acmurthy : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/refresh-namenodes.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/start-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/distribute-exclude.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemons.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemon.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/slaves.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-assemblies/src/main/resources/assemblies/hadoop-dist.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/stop-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/rcc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13090635" author="hudson" created="Thu, 25 Aug 2011 00:13:07 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #778 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/778/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/778/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7563&quot; title=&quot;hadoop-config.sh setup CLASSPATH, HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7563&quot;&gt;&lt;del&gt;HADOOP-7563&lt;/del&gt;&lt;/a&gt;. Setup HADOOP_HDFS_HOME, HADOOP_MAPRED_HOME and classpath correction. Contributed by Eric Yang.&lt;/p&gt;

&lt;p&gt;acmurthy : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/refresh-namenodes.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/start-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/distribute-exclude.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemons.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemon.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/slaves.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-assemblies/src/main/resources/assemblies/hadoop-dist.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/stop-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/rcc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13090642" author="eyang" created="Thu, 25 Aug 2011 00:26:11 +0000"  >&lt;p&gt;Thank you all.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13090645" author="hudson" created="Thu, 25 Aug 2011 00:31:31 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #787 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/787/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/787/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7563&quot; title=&quot;hadoop-config.sh setup CLASSPATH, HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7563&quot;&gt;&lt;del&gt;HADOOP-7563&lt;/del&gt;&lt;/a&gt;. Setup HADOOP_HDFS_HOME, HADOOP_MAPRED_HOME and classpath correction. Contributed by Eric Yang.&lt;/p&gt;

&lt;p&gt;acmurthy : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/refresh-namenodes.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/start-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/distribute-exclude.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemons.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemon.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/slaves.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-assemblies/src/main/resources/assemblies/hadoop-dist.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/stop-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/rcc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13090656" author="hudson" created="Thu, 25 Aug 2011 00:44:38 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #765 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/765/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/765/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7563&quot; title=&quot;hadoop-config.sh setup CLASSPATH, HADOOP_HDFS_HOME and HADOOP_MAPRED_HOME incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7563&quot;&gt;&lt;del&gt;HADOOP-7563&lt;/del&gt;&lt;/a&gt;. Setup HADOOP_HDFS_HOME, HADOOP_MAPRED_HOME and classpath correction. Contributed by Eric Yang.&lt;/p&gt;

&lt;p&gt;acmurthy : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1161329&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/refresh-namenodes.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/start-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/distribute-exclude.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemons.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-daemon.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-dfs.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs-config.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-balancer.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/start-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/slaves.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/stop-secure-dns.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/hadoop&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs/src/main/bin/hdfs&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-assemblies/src/main/resources/assemblies/hadoop-dist.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/stop-all.sh&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common/src/main/bin/rcc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12519481">HADOOP-7560</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12519646">HDFS-2277</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12491298" name="HADOOP-7563-1.patch" size="8650" author="eyang" created="Tue, 23 Aug 2011 02:00:47 +0000"/>
                            <attachment id="12491389" name="HADOOP-7563-2.patch" size="19459" author="eyang" created="Tue, 23 Aug 2011 20:43:02 +0000"/>
                            <attachment id="12491424" name="HADOOP-7563-3.patch" size="19267" author="eyang" created="Wed, 24 Aug 2011 00:53:45 +0000"/>
                            <attachment id="12491567" name="HADOOP-7563-4.patch" size="20325" author="eyang" created="Wed, 24 Aug 2011 23:15:05 +0000"/>
                            <attachment id="12491570" name="HADOOP-7563-5.patch" size="18998" author="eyang" created="Wed, 24 Aug 2011 23:51:19 +0000"/>
                            <attachment id="12491181" name="HADOOP-7563.patch" size="830" author="eyang" created="Mon, 22 Aug 2011 06:23:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09jbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>53563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>