<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:45:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-10820] Throw an exception in GenericOptionsParser when passed an empty Path</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-10820</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;An empty token (e.g. &quot;a.jar,,b.jar&quot;) in the -libjars option causes the current working directory to be recursively localized.&lt;/p&gt;

&lt;p&gt;Here&apos;s an example of this in action (using Hadoop 2.2.0):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# create a temp directory and touch three JAR files
mkdir -p tmp/path &amp;amp;&amp;amp; cd tmp &amp;amp;&amp;amp; touch a.jar b.jar c.jar path/d.jar

# Run an example job only specifying two of the JARs.
# Include an empty entry in libjars.
hadoop jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.2.0.jar pi -libjars a.jar,,c.jar 2 1000000000

# As the job is running examine the localized directory in HDFS.
# Notice that not only are the two JAR&apos;s specified in libjars copied,
# but in addition the contents of the working directory are also recursively copied.
$ hadoop fs -lsr /tmp/hadoop-yarn/staging/aholmes/.staging/job_1404752711144_0018/libjars
/tmp/hadoop-yarn/staging/aholmes/.staging/job_1404752711144_0018/libjars/a.jar
/tmp/hadoop-yarn/staging/aholmes/.staging/job_1404752711144_0018/libjars/c.jar
/tmp/hadoop-yarn/staging/aholmes/.staging/job_1404752711144_0018/libjars/tmp
/tmp/hadoop-yarn/staging/aholmes/.staging/job_1404752711144_0018/libjars/tmp/a.jar
/tmp/hadoop-yarn/staging/aholmes/.staging/job_1404752711144_0018/libjars/tmp/b.jar
/tmp/hadoop-yarn/staging/aholmes/.staging/job_1404752711144_0018/libjars/tmp/c.jar
/tmp/hadoop-yarn/staging/aholmes/.staging/job_1404752711144_0018/libjars/tmp/path
/tmp/hadoop-yarn/staging/aholmes/.staging/job_1404752711144_0018/libjars/tmp/path/d.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12727000">HADOOP-10820</key>
            <summary>Throw an exception in GenericOptionsParser when passed an empty Path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zxu">Zhihai Xu</assignee>
                                    <reporter username="alex.holmes">Alex Holmes</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Jul 2014 17:41:02 +0000</created>
                <updated>Mon, 1 Dec 2014 03:10:25 +0000</updated>
                            <resolved>Tue, 12 Aug 2014 17:48:00 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14060188" author="alex.holmes" created="Sun, 13 Jul 2014 17:47:15 +0000"  >&lt;p&gt;An update to GenericOptionsParser which silently ignores empty tokens. A code review would be appreciated - thanks!&lt;/p&gt;</comment>
                            <comment id="14060257" author="zxu" created="Mon, 14 Jul 2014 01:03:44 +0000"  >&lt;p&gt;If finalArr.size() is zero, what should we do?&lt;br/&gt;
For example -libjars ,,,&lt;br/&gt;
Should validateFiles return null if finalArr.size() is zero?&lt;br/&gt;
if (finalArr.size() == 0) return null;&lt;/p&gt;</comment>
                            <comment id="14066478" author="alex.holmes" created="Fri, 18 Jul 2014 16:13:05 +0000"  >&lt;p&gt;Thanks for the feedback. I&apos;ve updated the patch with the following changes:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Return null in validateFiles if the array of files is empty&lt;/li&gt;
	&lt;li&gt;Only set configs if non-null, non-empty return from validateFiles&lt;/li&gt;
	&lt;li&gt;Unset configs if null or empty return from validateFiles&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14066588" author="zxu" created="Fri, 18 Jul 2014 17:37:49 +0000"  >&lt;p&gt;+1 &lt;br/&gt;
The new patch looks good for me.&lt;/p&gt;</comment>
                            <comment id="14067581" author="hadoopqa" created="Sat, 19 Jul 2014 16:38:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12656524/HADOOP-10820-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12656524/HADOOP-10820-1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.fs.TestSymlinkLocalFSFileContext&lt;br/&gt;
                  org.apache.hadoop.ipc.TestIPC&lt;br/&gt;
                  org.apache.hadoop.fs.TestSymlinkLocalFSFileSystem&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4325//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4325//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4325//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4325//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14067709" author="alex.holmes" created="Sat, 19 Jul 2014 22:35:37 +0000"  >&lt;p&gt;It looks like the tests that failed were failing prior to this build - the unit test added in this ticket succeeded:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Running org.apache.hadoop.util.TestGenericOptionsParser
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.875 sec - in org.apache.hadoop.util.TestGenericOptionsParser
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14068256" author="jiangbinglover" created="Mon, 21 Jul 2014 06:33:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zxu&quot; class=&quot;user-hover&quot; rel=&quot;zxu&quot;&gt;zxu&lt;/a&gt; Thank you for reminding me of this issue from &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5980&quot; title=&quot;filter empty string in the libjars when submitting jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5980&quot;&gt;&lt;del&gt;MAPREDUCE-5980&lt;/del&gt;&lt;/a&gt;. When does the patch release? &lt;/p&gt;</comment>
                            <comment id="14068776" author="knoguchi" created="Mon, 21 Jul 2014 16:58:25 +0000"  >&lt;p&gt;This reminds me of a very old bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-1386&quot; title=&quot;The constructor of Path should not take an empty string as a parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-1386&quot;&gt;&lt;del&gt;HADOOP-1386&lt;/del&gt;&lt;/a&gt; from 7 years ago. &lt;br/&gt;
Maybe it&apos;s better to fix this issue at the lower layer and disallow creation of Path from an empty URI.&lt;br/&gt;
Simple test code as below.  If you uncomment the &apos;delete&apos;, it&apos;ll wipe the entire current directory instead of throwing the IllegalArgumentException.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.fs.Path;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.IllegalArgumentException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.fs.FileSystem;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.hadoop.fs.RawLocalFileSystem;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.net.URI;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestEmptyPath {

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    FileSystem fs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RawLocalFileSystem();
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      Path path = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(&quot;&quot;);
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Path from empty &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; is &quot;&lt;/span&gt; + path);
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(123);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalArgumentException ex) {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Empty Path creation error successfully captured [&quot;&lt;/span&gt; + ex + &lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt;);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      URI emptyuri = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(&quot;&quot;);
      Path path = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(emptyuri);
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Path from empty URI is &quot;&lt;/span&gt; + path);
      &lt;span class=&quot;code-comment&quot;&gt;// IF YOU UNCOMMENT THIS LINE, IT WILL WIPE YOUR ENTIRE CURRENT DIR!!!
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;//fs.delete(path, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/span&gt;      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(234);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalArgumentException ex) {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Empty Path creation error successfully captured [&quot;&lt;/span&gt; + ex + &lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(0);
    }
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-bash-4.1$ ls -l
total 8
drwxr-xr-x 2 ___ users 4096 Jul 21 16:54 bcd
-rw-r--r-- 1 ___ users    5 Jul 21 16:54 efg
-bash-4.1$java -cp.....  TestEmptyPath
Empty Path creation error successfully captured [java.lang.IllegalArgumentException: Can not create a Path from an empty string]
Path from empty URI is
-bash-4.1$ echo $?
234
-bash-4.1$ ls -l
total 0
-bash-4.1$
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14069299" author="zxu" created="Mon, 21 Jul 2014 21:13:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knoguchi&quot; class=&quot;user-hover&quot; rel=&quot;knoguchi&quot;&gt;knoguchi&lt;/a&gt; you suggest to change Path constructor at public Path(URI aUri) to check the empty URI and throw IllegalArgumentException.&lt;br/&gt;
I am OK with this suggestion but we need make sure it won&apos;t break other usage cases who want to create a Path with empty URI.&lt;/p&gt;</comment>
                            <comment id="14070396" author="alex.holmes" created="Tue, 22 Jul 2014 15:36:07 +0000"  >&lt;p&gt;Since the string-based constructor checks for an empty string, for consistency it would make sense that the URI-based constructor do the same thing.&lt;/p&gt;

&lt;p&gt;What would be the desired user experience in the case of an empty token entry in libjars - throwing an exception from the Path constructor, or handling it as per this patch and allowing the command to continue? If it&apos;s the later then it would make sense to commit this patch.&lt;/p&gt;

&lt;p&gt;In both cases it seems like a new ticket needs to be opened to check for an empty URI in the constructor - please let me know if you&apos;d like me to do that.&lt;/p&gt;</comment>
                            <comment id="14070441" author="knoguchi" created="Tue, 22 Jul 2014 16:13:24 +0000"  >&lt;p&gt;Given careless &quot;,,&quot; started uploading the entire current working directory, maybe someday this same &quot;,,&quot; could start &lt;b&gt;deleting&lt;/b&gt; entire current working directory for some application.  I still remember the nightmare we had when our user lost his entire homedir due to his pig script containing one extra &apos;space&apos;(&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-1386&quot; title=&quot;The constructor of Path should not take an empty string as a parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-1386&quot;&gt;&lt;del&gt;HADOOP-1386&lt;/del&gt;&lt;/a&gt;).  So yes, I&apos;d love to see this fixed.  Zhihai or Alex, if one of you want to create the jira with the fix, please go ahead.&lt;/p&gt;

&lt;p&gt;As for this jira, I don&apos;t have a strong preference.  We can&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;just fail with IllegalArgumentException from Path constructor,&lt;/li&gt;
	&lt;li&gt;catch at GenericOptionsParser and give better error message&lt;br/&gt;
or&lt;/li&gt;
	&lt;li&gt;catch at GenericOptionsParser and ignore the empty string.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14070571" author="zxu" created="Tue, 22 Jul 2014 17:40:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knoguchi&quot; class=&quot;user-hover&quot; rel=&quot;knoguchi&quot;&gt;knoguchi&lt;/a&gt; I will create a JIRA to fix empty URI path.&lt;br/&gt;
Alex solution looks OK to me.&lt;/p&gt;</comment>
                            <comment id="14070580" author="zxu" created="Tue, 22 Jul 2014 17:50:54 +0000"  >&lt;p&gt;I just created a JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10876&quot; title=&quot;The constructor of Path should not take an empty URL as a parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10876&quot;&gt;&lt;del&gt;HADOOP-10876&lt;/del&gt;&lt;/a&gt; to address the empty URI issue from  Path constructor. I will submit a patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10876&quot; title=&quot;The constructor of Path should not take an empty URL as a parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10876&quot;&gt;&lt;del&gt;HADOOP-10876&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14070996" author="zxu" created="Tue, 22 Jul 2014 21:58:14 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knoguchi&quot; class=&quot;user-hover&quot; rel=&quot;knoguchi&quot;&gt;knoguchi&lt;/a&gt;&lt;br/&gt;
I just submitted the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10876&quot; title=&quot;The constructor of Path should not take an empty URL as a parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10876&quot;&gt;&lt;del&gt;HADOOP-10876&lt;/del&gt;&lt;/a&gt; for review.&lt;br/&gt;
thanks&lt;br/&gt;
zhihai&lt;/p&gt;</comment>
                            <comment id="14090185" author="andrew.wang" created="Fri, 8 Aug 2014 02:02:26 +0000"  >&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10876&quot; title=&quot;The constructor of Path should not take an empty URL as a parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10876&quot;&gt;&lt;del&gt;HADOOP-10876&lt;/del&gt;&lt;/a&gt; turned out to be flawed, let&apos;s re-examine fixing this in GenericOptionsParser. The latest patch looks like roughly the right idea, but I&apos;d suggest throwing an exception if we encounter the null/empty. It&apos;s almost certainly a typo on the part of the user, so we should alert. If they really want to specify the local WD, they can say &quot;.&quot;.&lt;/p&gt;

&lt;p&gt;I haven&apos;t looked into how Parser works, but I was also wondering if this would allow us to keep all the required changes within validateFiles. Would make the patch smaller / simpler.&lt;/p&gt;

&lt;p&gt;I think specifying -libjars etc without a value is also an error we should be aborting on. It looks like the current patch tires to gracefully keep going by unsetting the conf.&lt;/p&gt;</comment>
                            <comment id="14090224" author="zxu" created="Fri, 8 Aug 2014 02:41:09 +0000"  >&lt;p&gt;I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt;,  throw an exception is safer than silently discard the empty tokens.&lt;/p&gt;</comment>
                            <comment id="14091033" author="zxu" created="Fri, 8 Aug 2014 17:49:45 +0000"  >&lt;p&gt;Should we trim the  leading and trailing whitespace in the string when check whether the token is empty string?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;.equals(tmp) =&amp;gt; &quot;&lt;/span&gt;&quot;.equals(tmp.trim())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14093139" author="zxu" created="Mon, 11 Aug 2014 18:44:42 +0000"  >&lt;p&gt;A filename with only space character are valid. So my suggestion is not good. We should&apos;t trim space when check empty string.&lt;/p&gt;</comment>
                            <comment id="14093158" author="zxu" created="Mon, 11 Aug 2014 18:53:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alex.holmes&quot; class=&quot;user-hover&quot; rel=&quot;alex.holmes&quot;&gt;alex.holmes&lt;/a&gt;, It look like you don&apos;t have time to work on this issue, if you don&apos;t mind, I will create a patch based on your patch to address the comment from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt;. thanks zhihai&lt;/p&gt;</comment>
                            <comment id="14093480" author="zxu" created="Mon, 11 Aug 2014 23:02:42 +0000"  >&lt;p&gt;I attached a new patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10820&quot; title=&quot;Throw an exception in GenericOptionsParser when passed an empty Path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10820&quot;&gt;&lt;del&gt;HADOOP-10820&lt;/del&gt;&lt;/a&gt;-2.patch based on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt; comments.&lt;br/&gt;
Also I find the filename with space character is not permitted in URI parser. My previous concern is already handled in original code.&lt;br/&gt;
So I add a test case &quot;a, ,b&quot; which will trigger URISyntaxException at line 394 in GenericOptionsParser.java.&lt;/p&gt;</comment>
                            <comment id="14093516" author="hadoopqa" created="Mon, 11 Aug 2014 23:48:07 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12661083/HADOOP-10820-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12661083/HADOOP-10820-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4449//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4449//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4449//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4449//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14093560" author="andrew.wang" created="Tue, 12 Aug 2014 00:32:03 +0000"  >&lt;p&gt;Hi Zhihai, only comment I have is that it would be nice to validate for empty string before the file list length, e.g.:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-&amp;gt; % hadoop fs -files ,, 
Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: File list length can&apos;t be zero
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think if we just need to do this check on the finalArr instead at the end. +1 pending this.&lt;/p&gt;</comment>
                            <comment id="14093616" author="zxu" created="Tue, 12 Aug 2014 01:30:24 +0000"  >&lt;p&gt;As discussed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt; offline, I made two changes in the &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10820&quot; title=&quot;Throw an exception in GenericOptionsParser when passed an empty Path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10820&quot;&gt;&lt;del&gt;HADOOP-10820&lt;/del&gt;&lt;/a&gt;-3.patch.&lt;br/&gt;
1. change the &quot;File list length can&apos;t be zero&quot; to &quot;File name can&apos;t be empty string&quot; because both are caused by empty string.&lt;br/&gt;
2. use tmp.isEmpty() instead of &quot;&quot;.equals(tmp) for more semantic. and also split function for String will guarantee the the string element in the array is not null.&lt;/p&gt;</comment>
                            <comment id="14093628" author="andrew.wang" created="Tue, 12 Aug 2014 01:37:45 +0000"  >&lt;p&gt;+1 pending Jenkins, thanks Zhihai!&lt;/p&gt;</comment>
                            <comment id="14093677" author="hadoopqa" created="Tue, 12 Aug 2014 03:10:02 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12661108/HADOOP-10820-3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12661108/HADOOP-10820-3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.security.token.delegation.web.TestWebDelegationToken&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4454//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4454//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4454//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4454//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14093726" author="zxu" created="Tue, 12 Aug 2014 04:44:09 +0000"  >&lt;p&gt;I tested TestWebDelegationToken at local. I didn&apos;t see the error. Also the error is &lt;br/&gt;
&quot;java.net.BindException: Address already in use&quot;, which looks like some address conflict in the test environment.&lt;/p&gt;


&lt;p&gt;-------------------------------------------------------&lt;br/&gt;
 T E S T S&lt;br/&gt;
-------------------------------------------------------&lt;br/&gt;
Running org.apache.hadoop.security.token.delegation.web.TestWebDelegationToken&lt;br/&gt;
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.484 sec - in org.apache.hadoop.security.token.delegation.web.TestWebDelegationToken&lt;/p&gt;

&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests run: 7, Failures: 0, Errors: 0, Skipped: 0&lt;/p&gt;
</comment>
                            <comment id="14094373" author="andrew.wang" created="Tue, 12 Aug 2014 17:37:21 +0000"  >&lt;p&gt;Alright, sounds good. I&apos;ll commit this shortly.&lt;/p&gt;</comment>
                            <comment id="14094385" author="andrew.wang" created="Tue, 12 Aug 2014 17:48:00 +0000"  >&lt;p&gt;Committed to trunk and branch-2. Thanks Alex and Zhihai for working on this, I credited both of you in CHANGES.txt and the commit message.&lt;/p&gt;</comment>
                            <comment id="14094406" author="hudson" created="Tue, 12 Aug 2014 17:58:44 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-trunk-Commit #6051 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/6051/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/6051/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10820&quot; title=&quot;Throw an exception in GenericOptionsParser when passed an empty Path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10820&quot;&gt;&lt;del&gt;HADOOP-10820&lt;/del&gt;&lt;/a&gt;. Throw an exception in GenericOptionsParser when passed an empty Path. Contributed by Alex Holmes and Zhihai Xu. (wang: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1617542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1617542&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestGenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14095384" author="hudson" created="Wed, 13 Aug 2014 11:33:38 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #644 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/644/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/644/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10820&quot; title=&quot;Throw an exception in GenericOptionsParser when passed an empty Path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10820&quot;&gt;&lt;del&gt;HADOOP-10820&lt;/del&gt;&lt;/a&gt;. Throw an exception in GenericOptionsParser when passed an empty Path. Contributed by Alex Holmes and Zhihai Xu. (wang: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1617542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1617542&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestGenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14095512" author="hudson" created="Wed, 13 Aug 2014 14:15:33 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1836 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1836/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1836/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10820&quot; title=&quot;Throw an exception in GenericOptionsParser when passed an empty Path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10820&quot;&gt;&lt;del&gt;HADOOP-10820&lt;/del&gt;&lt;/a&gt;. Throw an exception in GenericOptionsParser when passed an empty Path. Contributed by Alex Holmes and Zhihai Xu. (wang: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1617542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1617542&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestGenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14095602" author="hudson" created="Wed, 13 Aug 2014 15:36:48 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1862 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1862/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1862/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10820&quot; title=&quot;Throw an exception in GenericOptionsParser when passed an empty Path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10820&quot;&gt;&lt;del&gt;HADOOP-10820&lt;/del&gt;&lt;/a&gt;. Throw an exception in GenericOptionsParser when passed an empty Path. Contributed by Alex Holmes and Zhihai Xu. (wang: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1617542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1617542&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestGenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12656524" name="HADOOP-10820-1.patch" size="6658" author="alex.holmes" created="Fri, 18 Jul 2014 16:13:05 +0000"/>
                            <attachment id="12661083" name="HADOOP-10820-2.patch" size="5410" author="zxu" created="Mon, 11 Aug 2014 22:55:44 +0000"/>
                            <attachment id="12661108" name="HADOOP-10820-3.patch" size="5411" author="zxu" created="Tue, 12 Aug 2014 01:23:43 +0000"/>
                            <attachment id="12655464" name="HADOOP-10820.patch" size="3001" author="alex.holmes" created="Sun, 13 Jul 2014 17:47:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>405107</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xpvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>405143</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>