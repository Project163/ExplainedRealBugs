<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:40:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-8725] MR is broken when security is off</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-8725</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8225&quot; title=&quot;DistCp fails when invoked by Oozie&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8225&quot;&gt;&lt;del&gt;HADOOP-8225&lt;/del&gt;&lt;/a&gt; broke MR when security is off.  MR was changed to stop re-reading the credentials that UGI had already read, and to stop putting those tokens back into the UGI where they already were.  UGI only reads a credentials file when security is enabled, but MR uses tokens (ie. job token) even when security is disabled...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12604704">HADOOP-8725</key>
            <summary>MR is broken when security is off</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daryn">Daryn Sharp</assignee>
                                    <reporter username="daryn">Daryn Sharp</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Aug 2012 01:46:38 +0000</created>
                <updated>Thu, 12 May 2016 18:26:19 +0000</updated>
                            <resolved>Fri, 24 Aug 2012 14:20:42 +0000</resolved>
                                    <version>0.23.3</version>
                    <version>2.0.0-alpha</version>
                    <version>3.0.0-alpha1</version>
                                    <fixVersion>0.23.3</fixVersion>
                    <fixVersion>2.0.2-alpha</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13440873" author="daryn" created="Fri, 24 Aug 2012 01:52:57 +0000"  >&lt;p&gt;I&apos;m not sure how to easily write a test since there&apos;s not a supported way to set envs in java.  Well, that&apos;s non-extremely-dirty-and-hacky by using reflection to bypass the immutable map.&lt;/p&gt;</comment>
                            <comment id="13440914" author="revans2" created="Fri, 24 Aug 2012 03:43:21 +0000"  >&lt;p&gt;I have manually verified that the changes fix the problem.  The change is small and looks good to me +1 assuming Jenkins comes back OK.&lt;/p&gt;</comment>
                            <comment id="13440916" author="hadoopqa" created="Fri, 24 Aug 2012 03:47:53 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542227/HADOOP-8725.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542227/HADOOP-8725.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ha.TestZKFailoverController&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/1355//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/1355//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/1355//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/1355//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13440917" author="tucu00" created="Fri, 24 Aug 2012 03:47:58 +0000"  >&lt;p&gt;I&apos;ve just run TestMRJobs with the patch and I&apos;m still seen errors&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-------------------------------------------------------
Running org.apache.hadoop.mapreduce.v2.TestMRJobs
Tests run: 4, Failures: 3, Errors: 0, Skipped: 0, Time elapsed: 119.838 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!

Results :

Failed tests:   testSleepJob(org.apache.hadoop.mapreduce.v2.TestMRJobs)
  testRandomWriter(org.apache.hadoop.mapreduce.v2.TestMRJobs)
  testDistributedCache(org.apache.hadoop.mapreduce.v2.TestMRJobs)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unless they are unrelated, the issue is still there.&lt;/p&gt;</comment>
                            <comment id="13440922" author="tucu00" created="Fri, 24 Aug 2012 03:49:46 +0000"  >&lt;p&gt;mmh, jenkings come back while I was writing my prev comment. But I believe jenkins is not testing MR, can somebody verify running &lt;tt&gt;mvn clean test -Dtest=TestMRJobs&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="13441138" author="revans2" created="Fri, 24 Aug 2012 13:30:36 +0000"  >&lt;p&gt;I did run all of the mr tests.  The only one that failed is TestProcfsBasedProcessTree, which seems to be a race condition.  I ran several jobs on a single node cluster with this patch and they all passed. so I am still a +1, but I would like others to chime in on if their tests pass.&lt;/p&gt;</comment>
                            <comment id="13441169" author="jlowe" created="Fri, 24 Aug 2012 14:09:41 +0000"  >&lt;p&gt;I was able to reproduce the errors Alejandro is seeing in TestMRJobs twice in a row.  However when I emptied my environment of Hadoop variables (e.g.: HADOOP_PREFIX, HADOOP_CONF_DIR, etc.) then the test passed twice in a row.  So apparently that test is sensitive to its environment.&lt;/p&gt;</comment>
                            <comment id="13441174" author="revans2" created="Fri, 24 Aug 2012 14:15:44 +0000"  >&lt;p&gt;Because non-secure mode is completely broken currently, and this patch does seem to fix the issues.  Also because Jason and I both seem to have validated that the MR tests pass with this fix, I am going to check this in, simply because it seems better then the current state of trunk.  If we find other errors we can fix them on a different JIRA. &lt;/p&gt;</comment>
                            <comment id="13441179" author="revans2" created="Fri, 24 Aug 2012 14:20:42 +0000"  >&lt;p&gt;I checked this into trunk, branch-2, branch-2.1.0-alpha, and branch-0.23.&lt;/p&gt;

&lt;p&gt;Thanks Daryn for a quick fix to this.&lt;/p&gt;</comment>
                            <comment id="13441187" author="hudson" created="Fri, 24 Aug 2012 14:26:40 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #2633 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2633/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2633/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8725&quot; title=&quot;MR is broken when security is off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8725&quot;&gt;&lt;del&gt;HADOOP-8725&lt;/del&gt;&lt;/a&gt;. MR is broken when security is off (daryn via bobby) (Revision 1376929)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376929&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13441190" author="hudson" created="Fri, 24 Aug 2012 14:27:08 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #2697 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2697/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2697/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8725&quot; title=&quot;MR is broken when security is off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8725&quot;&gt;&lt;del&gt;HADOOP-8725&lt;/del&gt;&lt;/a&gt;. MR is broken when security is off (daryn via bobby) (Revision 1376929)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376929&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13441256" author="tucu00" created="Fri, 24 Aug 2012 15:31:41 +0000"  >&lt;p&gt;@Jason and Bobby, I don&apos;t have any Hadoop ENV set in my environment, but whatever it was it is not happenining anymore on trunk. thx&lt;/p&gt;</comment>
                            <comment id="13441872" author="hudson" created="Sat, 25 Aug 2012 12:41:08 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-0.23-Build #354 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/354/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/354/&lt;/a&gt;)&lt;br/&gt;
    svn merge -c 1376929 FIXES: &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8725&quot; title=&quot;MR is broken when security is off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8725&quot;&gt;&lt;del&gt;HADOOP-8725&lt;/del&gt;&lt;/a&gt;. MR is broken when security is off (daryn via bobby) (Revision 1376933)&lt;/p&gt;

&lt;p&gt;     Result = UNSTABLE&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376933&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13441884" author="hudson" created="Sat, 25 Aug 2012 13:07:43 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1145 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1145/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1145/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8725&quot; title=&quot;MR is broken when security is off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8725&quot;&gt;&lt;del&gt;HADOOP-8725&lt;/del&gt;&lt;/a&gt;. MR is broken when security is off (daryn via bobby) (Revision 1376929)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376929&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13441899" author="hudson" created="Sat, 25 Aug 2012 14:00:35 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1176 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1176/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1176/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8725&quot; title=&quot;MR is broken when security is off&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8725&quot;&gt;&lt;del&gt;HADOOP-8725&lt;/del&gt;&lt;/a&gt;. MR is broken when security is off (daryn via bobby) (Revision 1376929)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376929&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12546287">HADOOP-8225</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12542227" name="HADOOP-8725.patch" size="918" author="daryn" created="Fri, 24 Aug 2012 01:52:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>246700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07sl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12320059">0.23.3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>