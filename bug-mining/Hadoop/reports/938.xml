<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:43:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-9527] Add symlink support to LocalFileSystem on Windows</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-9527</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Multiple test cases are broken. I didn&apos;t look at each failure in detail.&lt;/p&gt;

&lt;p&gt;The main cause of the failures appears to be that RawLocalFS.readLink() does not work on Windows. We need &quot;winutils readlink&quot; to fix the test.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645492">HADOOP-9527</key>
            <summary>Add symlink support to LocalFileSystem on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="arp">Arpit Agarwal</assignee>
                                    <reporter username="arp">Arpit Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Apr 2013 19:15:57 +0000</created>
                <updated>Thu, 12 May 2016 18:25:25 +0000</updated>
                            <resolved>Tue, 13 Aug 2013 00:08:37 +0000</resolved>
                                    <version>2.1.1-beta</version>
                    <version>3.0.0-alpha1</version>
                                    <fixVersion>2.1.0-beta</fixVersion>
                                    <component>fs</component>
                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13648111" author="arpitagarwal" created="Fri, 3 May 2013 01:57:00 +0000"  >&lt;p&gt;This test is exposing a Java 1.6 bug on Windows when trying to rename a symlink. Attached a minimal repro to demonstrate the JVM bug.&lt;/p&gt;

&lt;p&gt;Here is the output on Windows using Java 1.7 and 1.6. 1.7 renames the symlink as expected, while 1.6 renames the target of the symlink.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C:\tmp\test&amp;gt;dir

 Directory of C:\tmp\test

05/02/2013  06:51 PM                 7 file.txt
05/02/2013  06:51 PM    &amp;lt;SYMLINK&amp;gt;      link1 [file.txt]

C:\tmp\test&amp;gt;c:\progra~1\java\jdk1.7.0_09\bin\java RenameLink link1 link2

C:\tmp\test&amp;gt;dir

 Directory of C:\tmp\test

05/02/2013  06:51 PM                 7 file.txt
05/02/2013  06:51 PM    &amp;lt;SYMLINK&amp;gt;      link2 [file.txt]

C:\tmp\test&amp;gt;c:\progra~1\java\jdk1.6.0_35\bin\java RenameLink link2 link3

C:\tmp\test&amp;gt;dir

 Directory of C:\tmp\test

05/02/2013  06:51 PM    &amp;lt;SYMLINK&amp;gt;      link2 [file.txt]
05/02/2013  06:51 PM                 7 link3

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13648129" author="ivanmi" created="Fri, 3 May 2013 02:38:33 +0000"  >&lt;p&gt;Hi Arpit, the following Jira should help with the above JDK6 VS 7 problem you described: &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9061&quot; title=&quot;Java6+Windows does not work well with symlinks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9061&quot;&gt;&lt;del&gt;HADOOP-9061&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13648131" author="arpitagarwal" created="Fri, 3 May 2013 02:42:11 +0000"  >&lt;p&gt;Thanks for the pointer Ivan. I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="13650073" author="arpitagarwal" created="Mon, 6 May 2013 20:21:15 +0000"  >&lt;p&gt;Fix symlink related tests on Windows. Multiple issues fixed here. &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Hooked up readlink support added in winutils.&lt;/li&gt;
	&lt;li&gt;Workaround Java6 symlink bug.&lt;/li&gt;
	&lt;li&gt;Make sure relative symlinks are resolvable at creation time.&lt;/li&gt;
	&lt;li&gt;Skipped tests verifying dangling symlink behavior.&lt;/li&gt;
	&lt;li&gt;Fixed a few tests that did not need to create dangling links.&lt;/li&gt;
	&lt;li&gt;Fixed a bad URI check.&lt;/li&gt;
	&lt;li&gt;Few other path format changes.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13650168" author="arpitagarwal" created="Mon, 6 May 2013 22:20:45 +0000"  >&lt;p&gt;Cancelling patch. It seems that RawLocalFileStatus is still not working reliably on JDK6.&lt;/p&gt;</comment>
                            <comment id="13650206" author="arpitagarwal" created="Mon, 6 May 2013 22:56:37 +0000"  >&lt;p&gt;Updated patch with another fix in RawLocalFileSystem#getFileLength.&lt;/p&gt;</comment>
                            <comment id="13651432" author="hadoopqa" created="Tue, 7 May 2013 23:26:32 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582186/HADOOP-9527.004.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582186/HADOOP-9527.004.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2524//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2524//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2524//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2524//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13651626" author="cnauroth" created="Wed, 8 May 2013 05:19:14 +0000"  >&lt;p&gt;I expect you don&apos;t need to add &lt;tt&gt;assumeTrue(!Shell.WINDOWS)&lt;/tt&gt; to &lt;tt&gt;FileContextSymlinkBaseTest&lt;/tt&gt; for the following methods: &lt;tt&gt;testCreateDanglingLink&lt;/tt&gt;, &lt;tt&gt;testCreateFileViaDanglingLinkParent&lt;/tt&gt;, &lt;tt&gt;testStatDanglingLink&lt;/tt&gt;, &lt;tt&gt;testRecursiveLinks&lt;/tt&gt;, and &lt;tt&gt;testRenameDirToDanglingSymlink&lt;/tt&gt;.  These were addressed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9043&quot; title=&quot;disallow in winutils creating symlinks with forwards slashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9043&quot;&gt;&lt;del&gt;HADOOP-9043&lt;/del&gt;&lt;/a&gt; by overriding the methods in &lt;tt&gt;TestLocalFSFileContextSymlink&lt;/tt&gt; and checking for Windows there.  It looks like I missed &lt;tt&gt;testRenameFileWithDestParentSymlink&lt;/tt&gt; though, so thanks for picking that one up.  Could you please follow the same strategy of overriding it in &lt;tt&gt;TestLocalFSFileContextSymlink&lt;/tt&gt;?&lt;/p&gt;

&lt;p&gt;The reason for doing it this way is that by overriding it in the base class, we would skip the test even in the case of HDFS on Windows (&lt;tt&gt;TestFcHdfsSymlink&lt;/tt&gt;).  It&apos;s only the combination of Windows and local file system that doesn&apos;t support dangling symlinks, so by overriding it in the subclass, we only skip the test in that very specific case.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+   * Returns the target of the given symlink. Returns the empty string &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;
+   * the given path does not refer to a symlink or there is an error
+   * acessing the symlink.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Minor nit: misspelling of accessing.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    RawLocalFileStatus(File f, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; defaultBlockSize, FileSystem fs) {
      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(
          RawLocalFileSystem.getFileLength(f),
          f.isDirectory(),
          1,
          defaultBlockSize,
          f.lastModified(),
          0,
          &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
          &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
          &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
          &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
          &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(f.getPath()).makeQualified(fs.getUri(),
            fs.getWorkingDirectory()));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Was this change intended only for formatting, or was it intentional to switch to calling a different superclass constructor?  I think we could potentially remove the arguments 0, null, null, null, null, because even if you omit them, the base class constructors will chain to do the same thing.&lt;/p&gt;</comment>
                            <comment id="13652113" author="arpitagarwal" created="Wed, 8 May 2013 17:44:28 +0000"  >&lt;p&gt;Thanks for the feedback. I have addressed it.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Was this change intended only for formatting, or was it intentional to switch to calling a different superclass constructor? I think we could potentially remove the arguments 0, null, null, null, null, because even if you omit them, the base class constructors will chain to do the same thing.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The FileStatus forwarding constructor has a comment indicating it needs to be deprecated.&lt;/p&gt;

&lt;p&gt;There is a bug with RawLocalFileStatus (also on Linux) since it passes null for the symlink parameter even when the File might be a symlink. It should be addressed at some point in a separate Jira. I am fine with reverting the constructor change until then. Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="13652140" author="arpitagarwal" created="Wed, 8 May 2013 18:02:38 +0000"  >&lt;p&gt;Fixing a copy-paste error Chris just pointed out.&lt;/p&gt;</comment>
                            <comment id="13652148" author="ivanmi" created="Wed, 8 May 2013 18:05:27 +0000"  >&lt;p&gt;Thanks Arpit for the patch here! Interesting approach overall. Please give me some time to think about this and review the patch. &lt;/p&gt;</comment>
                            <comment id="13652179" author="hadoopqa" created="Wed, 8 May 2013 18:26:13 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582323/HADOOP-9527.005.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582323/HADOOP-9527.005.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2526//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2526//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2526//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2526//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13652197" author="hadoopqa" created="Wed, 8 May 2013 18:38:13 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582329/HADOOP-9527.006.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582329/HADOOP-9527.006.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2527//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2527//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2527//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2527//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13652201" author="cnauroth" created="Wed, 8 May 2013 18:40:28 +0000"  >&lt;p&gt;+1 for the patch, pending review from Ivan too.  Thanks for correcting the misspelling (which was in the original code before the patch).  I didn&apos;t realize that constructor was deprecated, so please disregard my comment about that.  I verified that &lt;tt&gt;TestLocalFSFileContextSymlink&lt;/tt&gt; and &lt;tt&gt;TestFcHdfsSymlink&lt;/tt&gt; both pass on Mac and Windows.  It sure is exciting to see these tests pass after so long!&lt;/p&gt;</comment>
                            <comment id="13652219" author="arpitagarwal" created="Wed, 8 May 2013 18:49:06 +0000"  >&lt;p&gt;Thanks for the detailed review as always Chris!&lt;/p&gt;

&lt;p&gt;Ivan - please let me know your concerns. It would be good to move forward while the context is still fresh.&lt;/p&gt;</comment>
                            <comment id="13652225" author="cnauroth" created="Wed, 8 May 2013 18:56:17 +0000"  >&lt;p&gt;Sorry, Arpit.  I just thought of a potential issue.  &lt;tt&gt;RawLocalFileSystem&lt;/tt&gt; is documented as &lt;tt&gt;@InterfaceAudience.Public&lt;/tt&gt; and &lt;tt&gt;@InterfaceStability.Stable&lt;/tt&gt;.  I wonder if it&apos;s best that we don&apos;t add the public static &lt;tt&gt;readLink&lt;/tt&gt; methods here and inadvertently advertise them as something that any client can depend on.  Perhaps &lt;tt&gt;FileUtil&lt;/tt&gt; is more appropriate, which is &lt;tt&gt;@InterfaceAudience.Public&lt;/tt&gt; and &lt;tt&gt;@InterfaceStability.Evolving&lt;/tt&gt;?  This would have nice symmetry with &lt;tt&gt;FileUtil#symLink&lt;/tt&gt; too and centralize the Windows special-case logic for symlinks.&lt;/p&gt;

&lt;p&gt;Let me know your thoughts on this.&lt;/p&gt;</comment>
                            <comment id="13652242" author="arpitagarwal" created="Wed, 8 May 2013 19:08:41 +0000"  >&lt;p&gt;Good point and that came to my mind too.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://hadoop.apache.org/docs/stable/api/org/apache/hadoop/classification/InterfaceStability.Stable.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hadoop.apache.org/docs/stable/api/org/apache/hadoop/classification/InterfaceStability.Stable.html&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt; Can evolve while retaining compatibility for minor release boundaries.; can break compatibility only at major release (ie. at m.0). &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It doesn&apos;t sound like adding a new public method violates the contract. However if there is lack of clarity it would be fairly easy to move it to FileUtil.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13652245" author="cnauroth" created="Wed, 8 May 2013 19:15:04 +0000"  >&lt;p&gt;It&apos;s definitely not backwards-incompatible to add these new methods right now, but I&apos;m wondering if we want to commit to maintaining that backwards-compatibility guarantee for these new methods in the future.  I defer to the opinion of a committer on this one.  If a committer asks, we can easily move those methods over to &lt;tt&gt;FileUtil&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13652257" author="arpitagarwal" created="Wed, 8 May 2013 19:43:02 +0000"  >&lt;p&gt;Chris, I&apos;ve moved over the new methods to FileUtil to keep things simple.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13652273" author="cnauroth" created="Wed, 8 May 2013 20:01:58 +0000"  >&lt;p&gt;Sounds good.  Thank you!&lt;/p&gt;</comment>
                            <comment id="13652310" author="hadoopqa" created="Wed, 8 May 2013 20:26:17 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582351/HADOOP-9527.007.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582351/HADOOP-9527.007.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2528//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2528//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2528//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2528//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13661239" author="ivanmi" created="Sat, 18 May 2013 03:11:37 +0000"  >&lt;p&gt;Thanks Arpit for the patch and the patience! Sorry for not reviewing this earlier, I was not near my computer for a week.&lt;/p&gt;

&lt;p&gt;1. Interestingly, you are going the similar route I initially took in branch-1-win &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8872&quot; title=&quot;FileSystem#length returns zero for symlinks on windows+java6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8872&quot;&gt;&lt;del&gt;HADOOP-8872&lt;/del&gt;&lt;/a&gt;) Unfortunately, I don&apos;t think this will work in all cases. See my comments from &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9061&quot; title=&quot;Java6+Windows does not work well with symlinks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9061&quot;&gt;&lt;del&gt;HADOOP-9061&lt;/del&gt;&lt;/a&gt; for the reasons why. Quoting the branch-1-win approach below:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If on Java6, do file copy instead of symlink. We&apos;ve seen many problems with symlinks on files on Java6 and it is simply impossible to make all of them work. Recent examples include apps (like Oozie) built on top of MR that directly access symlinks using the Java File object (not thru RLFS), in which case things just don&#8217;t work.&lt;/li&gt;
	&lt;li&gt;If on Java7, symlinks work as expected.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;It took a few iterations to get symlink behavior to work properly across the Hadoop ecosystem with JDK6 on Windows, hence I&#8217;d stick with the approach. &lt;/p&gt;

&lt;p&gt;The downside would be that the readlink functionality would not work with the LFS on JDK6. Not sure if there are legit Hadoop scenarios that rely on this functionality, (I don&#8217;t know of any other than in tests). If not, I would be fine with just throwing the NOT_IMPL exception if readLink is invoked on JDK6 on Windows. Things are moving toward JDK7, so I don&#8217;t see this a big gap.&lt;/p&gt;

&lt;p&gt;I am interested in hearing your thoughts on this direction.&lt;/p&gt;

&lt;p&gt;2. FileUtil#readLink: My preference would be to expose a single &lt;tt&gt;File readLink(File)&lt;/tt&gt; public API instead of FileUtil APIs that accept Paths or Strings. This makes the contract explicit such that the input path must be a valid cross-platform local file system path.&lt;/p&gt;

&lt;p&gt;3. RawLocalFs#createSymlink: IMO this method should delegate to FileUtil#symlink(). Currently we have two inconsistent implementation for symlinks in FileUtil and RawLocalFs. &lt;/p&gt;
</comment>
                            <comment id="13664306" author="arpitagarwal" created="Wed, 22 May 2013 17:37:29 +0000"  >&lt;p&gt;Ivan, thanks for reviewing and posting your feedback.&lt;/p&gt;

&lt;p&gt;I think your suggestion is reasonable but I need to understand it better.&lt;/p&gt;</comment>
                            <comment id="13675588" author="chuanliu" created="Wed, 5 Jun 2013 04:21:21 +0000"  >&lt;p&gt;Also seeing this failure in branch-2 on Windows.&lt;/p&gt;</comment>
                            <comment id="13676645" author="arpitagarwal" created="Thu, 6 Jun 2013 03:38:59 +0000"  >&lt;p&gt;New patch. This is actually a simpler approach more in line with branch-1.&lt;/p&gt;

&lt;p&gt;I tested with JDK6 and JDK7 on Windows, and JDK6 on OS X.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2. FileUtil#readLink: My preference would be to expose a single File readLink(File) public API instead of FileUtil APIs that accept Paths or Strings. This makes the contract explicit such that the input path must be a valid cross-platform local file system path.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ivan, I&apos;ve not addressed this. Other methods in FileUtil take String/Path and it complicates the calling code a bit.&lt;/p&gt;

&lt;p&gt;Let me know what you think.&lt;/p&gt;

&lt;p&gt;Arpit&lt;/p&gt;</comment>
                            <comment id="13676678" author="hadoopqa" created="Thu, 6 Jun 2013 04:16:01 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12586446/HADOOP-9527.008.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12586446/HADOOP-9527.008.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2606//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2606//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2606//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2606//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13676683" author="sureshms" created="Thu, 6 Jun 2013 04:19:21 +0000"  >&lt;p&gt;Ivan can you please review this and commit it to trunk and branch-2 when you get a chance.&lt;/p&gt;</comment>
                            <comment id="13676701" author="ivanmi" created="Thu, 6 Jun 2013 05:15:04 +0000"  >&lt;p&gt;Thanks Arpit for the new patch! Will try to review tonight.&lt;/p&gt;</comment>
                            <comment id="13676711" author="ivanmi" created="Thu, 6 Jun 2013 05:32:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;Ivan can you please review this and commit it to trunk and branch-2 when you get a chance.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sure, will try to get this done tonight.&lt;/p&gt;</comment>
                            <comment id="13677790" author="ivanmi" created="Fri, 7 Jun 2013 03:49:51 +0000"  >&lt;p&gt;Latest patch looks much better Arpit. Thanks for addressing the comments.&lt;/p&gt;

&lt;p&gt;I still want to reiterate on above comment #2 and have one additional question:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;We have already seen that miss use of Paths or Strings can cause problems because of different path semantics (for example, API consumers passing paths with forward slashes on Windows). File object makes it explicit that a local file system path is required. Let&apos;s please add a single public API &lt;tt&gt;String FileUtil.readLink(File)&lt;/tt&gt; and work based off of that.&lt;/li&gt;
	&lt;li&gt;FileUtil.java: I am not able to understand this part
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-comment&quot;&gt;// Relative links on Windows must be resolvable at the time of
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// creation. To ensure &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; we run the shell command in the directory
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// of the link.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Why would a parent directory of a link be the appropriate working directory?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13680624" author="arpitagarwal" created="Tue, 11 Jun 2013 20:18:07 +0000"  >&lt;p&gt;Ivan, we use the parent directory of the symlink since the link needs to be resolvable at creation. Running the symlink command from the test&apos;s &apos;current directory&apos; will not work.&lt;/p&gt;

&lt;p&gt;Attached patch to fix the readLink signature.&lt;/p&gt;

&lt;p&gt;Thanks for reviewing.&lt;/p&gt;</comment>
                            <comment id="13680661" author="hadoopqa" created="Tue, 11 Jun 2013 20:48:36 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12587300/HADOOP-9527.009.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12587300/HADOOP-9527.009.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2634//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2634//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2634//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2634//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13684574" author="ivanmi" created="Sun, 16 Jun 2013 05:26:18 +0000"  >&lt;p&gt;Thanks Arpit. This is almost good to go. Have two more minor comments, once you address those I am +1&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;RawLocalFs#createSymlink: Can you please include the exitCode in the exception message?&lt;/li&gt;
	&lt;li&gt;RawLocalFs#createSymlink: Why do you need to catch IllegalArgumentException. This seems incorrect. Let&#8217;s please remove this catch block and address the underlying problem. Btw, you should be able to remove both catch blocks from RawLocalFs#createSymlink and just leave a throw if exitCode != 0. Right?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Big thanks again for taking time to thoroughly address this tricky Windows symlink problem! &lt;/p&gt;</comment>
                            <comment id="13727085" author="arpitagarwal" created="Thu, 1 Aug 2013 23:37:56 +0000"  >&lt;p&gt;Rollup fixes for TestSymlinkLocalFsFileSystem also into the same patch.&lt;/p&gt;</comment>
                            <comment id="13727216" author="hadoopqa" created="Fri, 2 Aug 2013 01:54:31 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12595515/HADOOP-9527.010.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12595515/HADOOP-9527.010.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.hdfs.TestHDFSFileSystemContract&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2908//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2908//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2908//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2908//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13727318" author="arpitagarwal" created="Fri, 2 Aug 2013 04:37:52 +0000"  >&lt;p&gt;The test failure looks unrelated to my patch. The exception indicates a NameNode bug.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.util.ConcurrentModificationException
	at java.util.HashMap$HashIterator.nextEntry(HashMap.java:793)
	at java.util.HashMap$EntryIterator.next(HashMap.java:834)
	at java.util.HashMap$EntryIterator.next(HashMap.java:832)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsVolumeImpl.shutdown(FsVolumeImpl.java:214)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsVolumeList.shutdown(FsVolumeList.java:215)
	at org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImpl.shutdown(FsDatasetImpl.java:1265)
	at org.apache.hadoop.hdfs.server.datanode.DataNode.shutdown(DataNode.java:1293)
	at org.apache.hadoop.hdfs.MiniDFSCluster.shutdownDataNodes(MiniDFSCluster.java:1439)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13729731" author="ivanmi" created="Mon, 5 Aug 2013 18:02:53 +0000"  >&lt;p&gt;Thanks Arpit for addressing the latest comments.&lt;/p&gt;

&lt;p&gt;I re-reviewed the patch and it looks good. Had some minor comments (see below) which I went ahead and addressed in the v11 version of the patch. At this point I am +1 on the latest patch (if you&#8217;re fine with my modifications). I&#8217;ll give the latest patch a day before I commit, in case Chris or Chuan have something to add.&lt;/p&gt;

&lt;p&gt;Comments addressed in v11:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;We should reconcile FileUtil#getPathWithoutSchemeAndAuthority() with the new Path#getPathWithoutSchemeAndAuthority API recently added&lt;/li&gt;
	&lt;li&gt;RawLocalFileSystem#readLink is not used anymore and should be deleted&lt;/li&gt;
	&lt;li&gt;Let&#8217;s not modify TestSymlinkHdfs, instead we can leave the base implementation and just override as needed (otherwise, we&#8217;d have to split this in a separate HDFS jira)&lt;/li&gt;
	&lt;li&gt;IMO, it is better to leave TestSymlinkLocalFsFileSystem#testRenameSymlinkToItself to fail on Windows then to add a TODO in code. You have a tracking Jira what will suffice.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13729775" author="hadoopqa" created="Mon, 5 Aug 2013 18:39:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12596162/HADOOP-9527.011.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12596162/HADOOP-9527.011.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 5 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.fs.TestSymlinkLocalFSFileSystem&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2922//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2922//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2922//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2922//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13730139" author="arpitagarwal" created="Mon, 5 Aug 2013 23:36:40 +0000"  >&lt;p&gt;Hi Ivan,&lt;/p&gt;

&lt;p&gt;Thanks for reviewing and your effort with the v11 patch. It is much appreciated.&lt;/p&gt;

&lt;p&gt;As the test failure shows with your patch shows, this is kind of tricky to get right with multiple JDK+OS combinations that need to be verified.&lt;/p&gt;

&lt;p&gt;The v10 patch is fixing a huge number of test cases (over 100) and moving the state of the Windows build forward quite significantly.&lt;/p&gt;

&lt;p&gt;We have been spinning on this for quite some time. If there are no serious objections to the patch, can we get that in and handle the cleanup separately?&lt;/p&gt;</comment>
                            <comment id="13730156" author="cnauroth" created="Mon, 5 Aug 2013 23:52:03 +0000"  >&lt;p&gt;I&apos;m +1 for committing the v10 patch and submitting subsequent jiras to address any lingering clean-up activities, which appear to be minor at this point.&lt;/p&gt;

&lt;p&gt;Regarding letting the test fail, I agree with the concept in general as a dev process.  Unfortunately, I don&apos;t think it interacts well with the established Apache patch workflow.  If we committed v11, then Jenkins would -1 every patch, and it could mask new failures introduced in later file system patches.  (Arpit stated earlier that it&apos;s not a Windows-specific problem.  It happens on Linux too.)  There are other examples in the code of leaving a TODO and mentioning a jira, so this appears to be acceptable if used in moderation.&lt;/p&gt;</comment>
                            <comment id="13730369" author="ivanmi" created="Tue, 6 Aug 2013 05:21:45 +0000"  >&lt;p&gt;Sorry folks, I thought that the todo (&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9819&quot; title=&quot;FileSystem#rename is broken, deletes target when renaming link to itself&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9819&quot;&gt;HADOOP-9819&lt;/a&gt;) tracks the failure that is specific to Windows. I agree, no need to increase the scope of this Jira to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9819&quot; title=&quot;FileSystem#rename is broken, deletes target when renaming link to itself&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9819&quot;&gt;HADOOP-9819&lt;/a&gt;. I attached v12 version of the patch that reverts back this part of the behavior from v10. Assuming that Jenkins comes back with +1 we can go ahead and commit the latest patch (since we did all the work already). If not, I agree, let&apos;s proceed with v10 and address the rest of the changes separately.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;As the test failure shows with your patch shows, this is kind of tricky to get right with multiple JDK+OS combinations that need to be verified&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yep, I did the testing with both JDK7 and JDK6.&lt;/p&gt;</comment>
                            <comment id="13730380" author="cnauroth" created="Tue, 6 Aug 2013 05:35:35 +0000"  >&lt;p&gt;Thanks, Ivan.  I&apos;d also be +1 for v12 if Jenkins passes it.&lt;/p&gt;</comment>
                            <comment id="13730396" author="hadoopqa" created="Tue, 6 Aug 2013 05:50:56 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12596278/HADOOP-9527.012.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12596278/HADOOP-9527.012.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 5 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2930//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2930//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2930//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2930//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13730982" author="arpitagarwal" created="Tue, 6 Aug 2013 17:23:23 +0000"  >&lt;p&gt;+1 if this runs clean on Windows with both JDK6 and JDK7.&lt;/p&gt;</comment>
                            <comment id="13731001" author="cnauroth" created="Tue, 6 Aug 2013 17:39:44 +0000"  >&lt;p&gt;Thanks, Arpit and Ivan!  I plan to commit v12 later today.  I see a prior comment from Ivan stating that he tested using both JDK7 and JDK6.&lt;/p&gt;</comment>
                            <comment id="13731244" author="hudson" created="Tue, 6 Aug 2013 20:45:52 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4222 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4222/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4222/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9527&quot; title=&quot;Add symlink support to LocalFileSystem on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9527&quot;&gt;&lt;del&gt;HADOOP-9527&lt;/del&gt;&lt;/a&gt;. Add symlink support to LocalFileSystem on Windows. Contributed by Arpit Agarwal. (cnauroth: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511118&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/local/RawLocalFs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/Shell.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FSTestWrapper.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/SymlinkBaseTest.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFS.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFSFileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFSFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13731275" author="cnauroth" created="Tue, 6 Aug 2013 21:07:27 +0000"  >&lt;p&gt;I&apos;ve committed this to trunk and branch-2.  I didn&apos;t commit to branch-2.1-beta, because the code is slightly different there, and this patch did not apply.  Based on that, I&apos;m dropping 2.1.1-beta from the fix version and leaving it at 2.3.0.&lt;/p&gt;

&lt;p&gt;Big thanks to Arpit for sticking through this tricky issue and incorporating the code review feedback.  Also thanks to Ivan for code reviews.&lt;/p&gt;</comment>
                            <comment id="13731301" author="ivanmi" created="Tue, 6 Aug 2013 21:31:26 +0000"  >&lt;p&gt;Thanks Chris for the commit, and indeed, big thanks Arpit for jumping thru all the hoops to get issue fixed!&lt;/p&gt;</comment>
                            <comment id="13731872" author="hudson" created="Wed, 7 Aug 2013 10:55:23 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #294 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/294/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/294/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9527&quot; title=&quot;Add symlink support to LocalFileSystem on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9527&quot;&gt;&lt;del&gt;HADOOP-9527&lt;/del&gt;&lt;/a&gt;. Add symlink support to LocalFileSystem on Windows. Contributed by Arpit Agarwal. (cnauroth: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511118&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/local/RawLocalFs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/Shell.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FSTestWrapper.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/SymlinkBaseTest.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFS.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFSFileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFSFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13731955" author="hudson" created="Wed, 7 Aug 2013 13:06:48 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1484 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1484/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1484/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9527&quot; title=&quot;Add symlink support to LocalFileSystem on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9527&quot;&gt;&lt;del&gt;HADOOP-9527&lt;/del&gt;&lt;/a&gt;. Add symlink support to LocalFileSystem on Windows. Contributed by Arpit Agarwal. (cnauroth: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511118&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/local/RawLocalFs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/Shell.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FSTestWrapper.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/SymlinkBaseTest.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFS.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFSFileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFSFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13732035" author="hudson" created="Wed, 7 Aug 2013 14:25:13 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1511 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1511/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1511/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9527&quot; title=&quot;Add symlink support to LocalFileSystem on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9527&quot;&gt;&lt;del&gt;HADOOP-9527&lt;/del&gt;&lt;/a&gt;. Add symlink support to LocalFileSystem on Windows. Contributed by Arpit Agarwal. (cnauroth: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511118&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/local/RawLocalFs.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/Shell.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FSTestWrapper.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/SymlinkBaseTest.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFS.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFSFileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestSymlinkLocalFSFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13733726" author="arpitagarwal" created="Thu, 8 Aug 2013 17:34:35 +0000"  >&lt;p&gt;Reopening the issue to commit to branch-2.1. Some refactoring from &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9355&quot; title=&quot;Abstract symlink tests to use either FileContext or FileSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9355&quot;&gt;&lt;del&gt;HADOOP-9355&lt;/del&gt;&lt;/a&gt; did not make it to branch-2.1-beta. I will provide a rebased patch soon.&lt;/p&gt;</comment>
                            <comment id="13733785" author="arpitagarwal" created="Thu, 8 Aug 2013 18:07:51 +0000"  >&lt;p&gt;v10 patch rebased to branch-2.1-beta. I verified this on OS X (JDK6) and Windows (JDK6+JDK7).&lt;/p&gt;</comment>
                            <comment id="13737414" author="arpitagarwal" created="Mon, 12 Aug 2013 22:00:53 +0000"  >&lt;p&gt;v12 patch rebased to branch-2.1-beta. Missing changes to RawLocalFileSystem.java and TestSymlinkLoalFSFileSystem.java since we don&apos;t have &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9417&quot; title=&quot;Support for symlink resolution in LocalFileSystem / RawLocalFileSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9417&quot;&gt;&lt;del&gt;HADOOP-9417&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt; This is the same patch you +1&apos;ed earlier minus changes to those two files.&lt;/p&gt;</comment>
                            <comment id="13737554" author="cnauroth" created="Mon, 12 Aug 2013 23:45:20 +0000"  >&lt;p&gt;+1 for the branch-2.1-beta patch.  Thanks again, Arpit!&lt;/p&gt;</comment>
                            <comment id="13737580" author="arpitagarwal" created="Tue, 13 Aug 2013 00:06:55 +0000"  >&lt;p&gt;Thanks Chris! I have committed this to branch-2.1-beta.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12661022">HADOOP-9807</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12651035">HADOOP-9620</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12597618">HADOOP-8562</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12650701">HDFS-4871</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12616192">HADOOP-9043</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12642979">HADOOP-9483</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12581946" name="HADOOP-9527.001.patch" size="18580" author="arp" created="Mon, 6 May 2013 20:21:15 +0000"/>
                            <attachment id="12581986" name="HADOOP-9527.002.patch" size="18973" author="arp" created="Mon, 6 May 2013 22:56:37 +0000"/>
                            <attachment id="12581987" name="HADOOP-9527.003.patch" size="19257" author="arp" created="Mon, 6 May 2013 23:00:54 +0000"/>
                            <attachment id="12582186" name="HADOOP-9527.004.patch" size="19062" author="arp" created="Tue, 7 May 2013 22:50:07 +0000"/>
                            <attachment id="12582323" name="HADOOP-9527.005.patch" size="16708" author="arp" created="Wed, 8 May 2013 17:44:28 +0000"/>
                            <attachment id="12582329" name="HADOOP-9527.006.patch" size="16721" author="arp" created="Wed, 8 May 2013 18:02:38 +0000"/>
                            <attachment id="12582351" name="HADOOP-9527.007.patch" size="18286" author="arp" created="Wed, 8 May 2013 19:43:02 +0000"/>
                            <attachment id="12586446" name="HADOOP-9527.008.patch" size="23143" author="arp" created="Thu, 6 Jun 2013 03:38:59 +0000"/>
                            <attachment id="12587300" name="HADOOP-9527.009.patch" size="22616" author="arp" created="Tue, 11 Jun 2013 20:18:07 +0000"/>
                            <attachment id="12596898" name="HADOOP-9527.010.branch-2.1.0-beta.patch" size="23136" author="arp" created="Thu, 8 Aug 2013 18:07:51 +0000"/>
                            <attachment id="12595515" name="HADOOP-9527.010.patch" size="28011" author="arp" created="Thu, 1 Aug 2013 23:37:56 +0000"/>
                            <attachment id="12596162" name="HADOOP-9527.011.patch" size="25291" author="ivanmi" created="Mon, 5 Aug 2013 18:02:53 +0000"/>
                            <attachment id="12597575" name="HADOOP-9527.012-branch-2.1-beta.patch" size="20009" author="arp" created="Mon, 12 Aug 2013 22:00:53 +0000"/>
                            <attachment id="12596278" name="HADOOP-9527.012.patch" size="26438" author="ivanmi" created="Tue, 6 Aug 2013 05:12:46 +0000"/>
                            <attachment id="12581652" name="RenameLink.java" size="195" author="arp" created="Fri, 3 May 2013 01:57:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325854</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k7tr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326199</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324030">2.1.0-beta</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>