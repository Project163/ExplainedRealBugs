<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:33:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6800] Harmonize JAR library versions</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6800</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Currently, multiple versions of the same library JAR are being pulled in for various reasons.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Within the same project, multiple versions of the same JAR are pulled in. E.g. Avro (used by Common) depends on Commons Lang 2.5 while Common depends on Commons Lang 2.4.&lt;/li&gt;
	&lt;li&gt;Dependent subprojects use different versions. E.g. Common depends on Avro 1.3.2 while MapReduce depends on 1.3.0. Since MapReduce depends on Common, this has the potential to cause a problem at runtime.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12466007">HADOOP-6800</key>
            <summary>Harmonize JAR library versions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tomwhite">Thomas White</assignee>
                                    <reporter username="tomwhite">Thomas White</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jun 2010 21:57:11 +0000</created>
                <updated>Tue, 24 Aug 2010 20:43:21 +0000</updated>
                            <resolved>Thu, 1 Jul 2010 04:38:33 +0000</resolved>
                                                    <fixVersion>0.21.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12874826" author="tomwhite" created="Wed, 2 Jun 2010 21:58:06 +0000"  >&lt;p&gt;This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-348&quot; title=&quot;Avro ivy dependencies include/propagate too many JARs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-348&quot;&gt;&lt;del&gt;AVRO-348&lt;/del&gt;&lt;/a&gt;, see also &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6390&quot; title=&quot;Block slf4j-simple from avro&amp;#39;s pom&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6390&quot;&gt;&lt;del&gt;HADOOP-6390&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12875113" author="stevel@apache.org" created="Thu, 3 Jun 2010 13:47:53 +0000"  >&lt;p&gt;+1 for this; I&apos;d go for moving to the latest versions that didn&apos;t cause too much grief. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6807&quot; title=&quot;Log directly from jetty to commons logging, bypassing SLF4J&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6807&quot;&gt;&lt;del&gt;HADOOP-6807&lt;/del&gt;&lt;/a&gt; claims that SL4J is not needed for Jetty&lt;/p&gt;
</comment>
                            <comment id="12879464" author="tomwhite" created="Wed, 16 Jun 2010 19:14:40 +0000"  >&lt;p&gt;This is one of three patches (others at &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-1212&quot; title=&quot;Harmonize HDFS JAR library versions with Common&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-1212&quot;&gt;&lt;del&gt;HDFS-1212&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1870&quot; title=&quot;Harmonize MapReduce JAR library versions with Common and HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1870&quot;&gt;&lt;del&gt;MAPREDUCE-1870&lt;/del&gt;&lt;/a&gt;) that removes duplicate JARs. It updates a few Apache Commons JARs, JUnit, and SLF4J.&lt;/p&gt;

&lt;p&gt;The hardest bit was ensuring that Ant 1.6.5 and 1.7.1 don&apos;t both appear. Part of the problem here is that the Maven artifact has been relocated from the ant group to org.apache.ant. Jetty&apos;s jsp-2.1 depends on the old one, which is now explicitly excluded.&lt;/p&gt;

&lt;p&gt;I ran a few tests with the new configuration and they passed. I also used the script in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6342&quot; title=&quot;Create a script to squash a common, hdfs, and mapreduce tarball into a single hadoop tarball&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6342&quot;&gt;&lt;del&gt;HADOOP-6342&lt;/del&gt;&lt;/a&gt; to test that the combined tarballs had no conflicting dependencies. &lt;/p&gt;</comment>
                            <comment id="12879476" author="hadoopqa" created="Wed, 16 Jun 2010 19:40:07 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12447262/HADOOP-6800.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12447262/HADOOP-6800.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 954647.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/587/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/587/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/587/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/587/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/587/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/587/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/587/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/587/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12880322" author="tomwhite" created="Fri, 18 Jun 2010 20:53:47 +0000"  >&lt;p&gt;Is anyone able to review this (and related patches)? Thanks.&lt;/p&gt;</comment>
                            <comment id="12881447" author="tomwhite" created="Tue, 22 Jun 2010 23:21:35 +0000"  >&lt;p&gt;Here&apos;s an updated version which uses Jetty&apos;s ant dependency (1.6.5) rather than paranamer&apos;s (1.7.1, which is pulled in by Avro and is not a runtime dependency). &lt;/p&gt;</comment>
                            <comment id="12881471" author="hadoopqa" created="Wed, 23 Jun 2010 00:06:46 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12447762/HADOOP-6800.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12447762/HADOOP-6800.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 957074.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/82/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/82/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/82/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/82/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/82/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/82/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/82/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/82/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12881691" author="yhemanth" created="Wed, 23 Jun 2010 13:31:52 +0000"  >&lt;p&gt;Tom, trying to see if I can review this, but I&apos;m not very familiar with Ivy... Is the goal of this jira to make sure that the versions for libraries we are using  in the 3 projects are the same ? I ask because there are a few libraries with different versions in the common and mapreduce projects. For e.g. commons-logging is 1.1.1 in common and 1.0.4 in mapred, and jets3t is 0.7.1 in common and 0.6.1 in mapred. These don&apos;t seem to be excluded / modified in your patch.&lt;/p&gt;

&lt;p&gt;Would these need to be fixed too ?&lt;/p&gt;

&lt;p&gt;Apologies if my understanding is completely wrong... &lt;/p&gt;</comment>
                            <comment id="12881743" author="tomwhite" created="Wed, 23 Jun 2010 16:51:16 +0000"  >&lt;p&gt;Thanks for taking a look, Hemanth. Yes, the goal is to make sure that the JAR version used between the three projects are the same. My criterion for checking this was to build the three tarballs, combine them, and visually check that there were no conflicting versions in lib. This new set of patches corrects the mismatches you saw (in some cases removing the variable since its not used in the project). &lt;/p&gt;</comment>
                            <comment id="12881847" author="hadoopqa" created="Wed, 23 Jun 2010 20:00:27 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12447851/HADOOP-6800.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12447851/HADOOP-6800.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 957074.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/593/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/593/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/593/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/593/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/593/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/593/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/593/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/593/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12882830" author="yhemanth" created="Sat, 26 Jun 2010 10:25:55 +0000"  >&lt;p&gt;Tom, I applied the latest patches for all three sub-projects, cleared my IVY cache, rebuilt all of them. Then, I compared the ivy library dependencies that we are declaring in the sources of the three packages and the libraries in the lib folder of the built packages. In both analyses, I still see some duplicate jars. I think most or all of the duplicates in source are coming from the HDFS Proxy ivy file. I don&apos;t know if this is reason why the libraries in the build/lib are ultimately repeating.&lt;/p&gt;

&lt;p&gt;For e.g. here&apos;s a list of the jars in the ivy properties that have different versions:&lt;br/&gt;
commons-logging-api, commons-logging, ivy, jets3t, junit, mockito-all, slf4j-api, slf4j-log4j12&lt;/p&gt;

&lt;p&gt;There are quite a few repetitions in the lib folders of the three packages:&lt;br/&gt;
ant,avro ,commons-http-client,commons-lang,ivy,jackson-core-asl,jackson-mapper-asl,jetty,jetty-util,junit,paranamer,paranamer-ant,paranamer-generator,qdox,servlet-api,slf4j-api,slf4j-log4j12&lt;/p&gt;

&lt;p&gt;I am attaching two text files that are the dumps of the ivy library declarations and the build/lib folder contents for your review.&lt;/p&gt;

&lt;p&gt;Please note that I did not run the cluster with these packages - so things are possibly fine with these duplications as well.&lt;/p&gt;</comment>
                            <comment id="12882831" author="yhemanth" created="Sat, 26 Jun 2010 10:29:13 +0000"  >&lt;p&gt;One more point is that some of the subprojects in mapred seem to be using hadoop-common-&lt;b&gt;&lt;del&gt;SNAPSHOT as the dependency and som hadoop-common&lt;/del&gt;&lt;/b&gt;-dev-SNAPSHOT as the dependency. However, this does not seem to be a problem as far as the libraries in the packages are concerned.&lt;/p&gt;</comment>
                            <comment id="12882842" author="tomwhite" created="Sat, 26 Jun 2010 15:18:49 +0000"  >&lt;p&gt;Hemanth, Thanks for running through this. Did you run ant with &quot;mvn-install -Dresolvers=internal&quot; options? When I do a clean build I don&apos;t get any of the duplicates you mention.&lt;/p&gt;</comment>
                            <comment id="12882852" author="tomwhite" created="Sat, 26 Jun 2010 16:51:37 +0000"  >&lt;p&gt;Other things I did - cleared the local maven cache, and used the &quot;veryclean&quot; target. The -verbose ant option is useful for seeing the dependencies ivy is pulling in.&lt;/p&gt;

&lt;p&gt;&amp;gt; One more point is that some of the subprojects in mapred seem to be using hadoop-common-SNAPSHOT as the dependency and som hadoop-common-dev-SNAPSHOT as the dependency. However, this does not seem to be a problem as far as the libraries in the packages are concerned.&lt;/p&gt;

&lt;p&gt;I agree this does not seem to be causing a problem here, but should be fixed in another JIRA.&lt;/p&gt;</comment>
                            <comment id="12882882" author="yhemanth" created="Sat, 26 Jun 2010 19:10:53 +0000"  >&lt;p&gt;Tom, I tried again:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Cleared Ivy cache - essentially did an rm -rf ~/.ivy2/cache&lt;/li&gt;
	&lt;li&gt;On common, did ant veryclean jar mvn-install &amp;#8211; Here, I tried with and without -Dresolvers=internal&lt;/li&gt;
	&lt;li&gt;On hdfs, did ant veryclean jar mvn-install -Dresolvers=internal. This step fails compilation, with errors liks :&lt;br/&gt;
org.apache.hadoop.hdfs.server.namenode.NameNode is not abstract and does not override abstract method refreshSuperUserGroupsConfiguration(org.apache.hadoop.conf.Configuration) in org.apache.hadoop.security.RefreshUserMappingsProtocol&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;These errors do not come when I build the projects without the mvn-install option. Is there anything I&apos;m doing incorrectly ?&lt;/p&gt;

&lt;p&gt;Also, please note that of the two sets of duplicates I mentioned, one set is in the ivy configuration we&apos;re defining. So, in HDFS proxy&apos;s ivy/libraries.properties, we say junit.version=3.8.2 whereas in hdfs core, we say this is 4.8.1. Similarly for other libraries mentioned in ivy-declarations.dump.merged. Shouldn&apos;t this be resolved ?&lt;/p&gt;</comment>
                            <comment id="12882918" author="tomwhite" created="Sun, 27 Jun 2010 05:31:24 +0000"  >&lt;p&gt;Hemanth,&lt;/p&gt;

&lt;p&gt;I used the following command to find clashes in libraries.properties. The only problematic one was hdfsproxy&apos;s libraries.properties, as you pointed out, and which I&apos;ve updated in &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-1212&quot; title=&quot;Harmonize HDFS JAR library versions with Common&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-1212&quot;&gt;&lt;del&gt;HDFS-1212&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;find hadoop-{common,hdfs,mapreduce}-trunk/ivy hadoop-{common,hdfs,mapreduce}-trunk/src -name libraries.properties | xargs cat | sort | uniq
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, even before this change, when running the attached build.sh script I got distinct libraries. (I suspect that the ones in HDFS were getting upgraded due to other dependencies.) I don&apos;t see the compile problem you had (this was with SVN revision 958322). Perhaps you can try the build.sh script with the patches from this JIRA, &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-1212&quot; title=&quot;Harmonize HDFS JAR library versions with Common&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-1212&quot;&gt;&lt;del&gt;HDFS-1212&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1870&quot; title=&quot;Harmonize MapReduce JAR library versions with Common and HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1870&quot;&gt;&lt;del&gt;MAPREDUCE-1870&lt;/del&gt;&lt;/a&gt; applied to trunk? Thanks!&lt;/p&gt;</comment>
                            <comment id="12882971" author="yhemanth" created="Sun, 27 Jun 2010 18:09:01 +0000"  >&lt;p&gt;Tom, I applied the new patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-1212&quot; title=&quot;Harmonize HDFS JAR library versions with Common&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-1212&quot;&gt;&lt;del&gt;HDFS-1212&lt;/del&gt;&lt;/a&gt;. This removed all the duplicates in the ivy declarations. When I ran the project builds (using mvn-install as you suggested), I now see only 2 repetitions - ivy-2.0.0-rc2 and ivy-2.1.0 and jsp-2.1.jar and jsp-2.1-6.1.14.jar. In both the cases, &lt;b&gt;both&lt;/b&gt; libraries were present in HDFS and mapred. So, it is not like different versions present in mapred and HDFS, but even within the project.&lt;/p&gt;

&lt;p&gt;I thought this was close enough and wanted to build a single distribution of the three packages and test it in pseudo-distributed mode. I was trying to use the tar-munge script, but get some errors like:&lt;br/&gt;
mv: will not overwrite just-created `conf/configuration.xsl&apos; with `hdfs/conf/configuration.xsl&apos;&lt;/p&gt;

&lt;p&gt;I am still trying to resolve this, but I thought I&apos;d update that except for the two jars I mention, everything else seems very clean.&lt;/p&gt;</comment>
                            <comment id="12883003" author="tomwhite" created="Sun, 27 Jun 2010 23:51:27 +0000"  >&lt;p&gt;Hemanth, thanks for your persistence - I think we&apos;re getting close.&lt;/p&gt;

&lt;p&gt;Is the ivy JAR repetition because there is a copy of both in the hdfs/ivy directory? It&apos;s not a runtime dependency, so it&apos;s probably not a problem anyway.&lt;/p&gt;

&lt;p&gt;The JSP one is because of the directory checked into hdfs/lib, which I think can be deleted now.&lt;/p&gt;

&lt;p&gt;Finally, here&apos;s the latest tar-munge I&apos;ve been using, which doesn&apos;t suffer the problem you describe.&lt;/p&gt;</comment>
                            <comment id="12883145" author="yhemanth" created="Mon, 28 Jun 2010 13:43:14 +0000"  >&lt;p&gt;Tom, I&apos;ve been able to get a single node cluster up and run basic tests - hdfs and map/reduce jobs. Things appear to work fine.&lt;/p&gt;

&lt;p&gt;Regarding the ivy JAR, I don&apos;t see this now, so maybe there was a problem in my previous run. I think you are right about the jsp-2.1.jar. So, are you planning to delete this in this set of patches ?&lt;/p&gt;

&lt;p&gt;Lastly, since we&apos;ve changed some of the contrib libraries, should we give a heads up - maybe on the *-dev mailing lists asking folks to take a look at the patches ?&lt;/p&gt;
</comment>
                            <comment id="12883161" author="tomwhite" created="Mon, 28 Jun 2010 14:30:42 +0000"  >&lt;p&gt;I think this is ready to go in now. I&apos;ll commit the three patches soon.&lt;/p&gt;

&lt;p&gt;&amp;gt; I think you are right about the jsp-2.1.jar. So, are you planning to delete this in this set of patches ?&lt;/p&gt;

&lt;p&gt;This is only in HDFS, so I will delete it there as a part of that commit.&lt;/p&gt;

&lt;p&gt;&amp;gt; Lastly, since we&apos;ve changed some of the contrib libraries, should we give a heads up - maybe on the *-dev mailing lists asking folks to take a look at the patches?&lt;/p&gt;

&lt;p&gt;I&apos;ll send a email out.&lt;/p&gt;</comment>
                            <comment id="12883232" author="yhemanth" created="Mon, 28 Jun 2010 18:02:58 +0000"  >&lt;p&gt;Tom, about the ivy.jar, it is like you said happening because in hadoop-common there are two versions of the jar in the lib folder.&lt;/p&gt;</comment>
                            <comment id="12884151" author="yhemanth" created="Thu, 1 Jul 2010 04:24:49 +0000"  >&lt;p&gt;Tom, Hudson&apos;s results on &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1870&quot; title=&quot;Harmonize MapReduce JAR library versions with Common and HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1870&quot;&gt;&lt;del&gt;MAPREDUCE-1870&lt;/del&gt;&lt;/a&gt; seem to be OK. I checked &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-1212&quot; title=&quot;Harmonize HDFS JAR library versions with Common&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-1212&quot;&gt;&lt;del&gt;HDFS-1212&lt;/del&gt;&lt;/a&gt; and the test failures had age &amp;gt; 0; so I assume this is fine too. All patches seem ready except for reaching out to contrib devs as we discussed above. Do you need any further assistance ?&lt;/p&gt;</comment>
                            <comment id="12884152" author="yhemanth" created="Thu, 1 Jul 2010 04:26:22 +0000"  >&lt;p&gt;Re-attaching the same patch as Tom&apos;s last one, so can run it past Hudson.&lt;/p&gt;</comment>
                            <comment id="12884158" author="tomwhite" created="Thu, 1 Jul 2010 04:38:33 +0000"  >&lt;p&gt;I&apos;ve just committed this. (Hudson has already run against the patch.) Thanks for your help Hemanth.&lt;/p&gt;</comment>
                            <comment id="12884161" author="hudson" created="Thu, 1 Jul 2010 04:53:10 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #317 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/317/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/317/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6800&quot; title=&quot;Harmonize JAR library versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6800&quot;&gt;&lt;del&gt;HADOOP-6800&lt;/del&gt;&lt;/a&gt;.  Harmonize JAR library versions.&lt;/p&gt;</comment>
                            <comment id="12884247" author="hudson" created="Thu, 1 Jul 2010 11:11:47 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #383 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/383/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/383/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6800&quot; title=&quot;Harmonize JAR library versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6800&quot;&gt;&lt;del&gt;HADOOP-6800&lt;/del&gt;&lt;/a&gt;.  Harmonize JAR library versions.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12467064">HDFS-1212</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12467065">MAPREDUCE-1870</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12441630">HADOOP-6390</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12445832">AVRO-348</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12448474" name="HADOOP-6800.patch" size="4480" author="yhemanth" created="Thu, 1 Jul 2010 04:26:21 +0000"/>
                            <attachment id="12447851" name="HADOOP-6800.patch" size="4480" author="tomwhite" created="Wed, 23 Jun 2010 16:51:16 +0000"/>
                            <attachment id="12447762" name="HADOOP-6800.patch" size="3458" author="tomwhite" created="Tue, 22 Jun 2010 23:21:35 +0000"/>
                            <attachment id="12447262" name="HADOOP-6800.patch" size="3738" author="tomwhite" created="Wed, 16 Jun 2010 19:14:40 +0000"/>
                            <attachment id="12448148" name="build.sh" size="661" author="tomwhite" created="Sun, 27 Jun 2010 05:31:24 +0000"/>
                            <attachment id="12448130" name="ivy-declarations.dump.merged" size="8042" author="yhemanth" created="Sat, 26 Jun 2010 10:25:55 +0000"/>
                            <attachment id="12448129" name="jars-in-lib.dump.merged" size="6622" author="yhemanth" created="Sat, 26 Jun 2010 10:25:55 +0000"/>
                            <attachment id="12448166" name="tar-munge" size="2247" author="tomwhite" created="Sun, 27 Jun 2010 23:51:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>77640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hz6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102962</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>