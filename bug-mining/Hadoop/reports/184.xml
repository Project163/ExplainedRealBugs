<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:34:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6833] IPC leaks call parameters when exceptions thrown</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6833</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6498&quot; title=&quot;IPC client  bug may cause rpc call hang&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6498&quot;&gt;&lt;del&gt;HADOOP-6498&lt;/del&gt;&lt;/a&gt; moved the calls.remove() call lower into the SUCCESS clause of receiveResponse(), but didn&apos;t put a similar calls.remove into the ERROR clause. So, any RPC call that throws an exception ends up orphaning the Call object in the connection&apos;s &quot;calls&quot; hashtable. This prevents cleanup of the connection and is a memory leak for the call parameters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12467526">HADOOP-6833</key>
            <summary>IPC leaks call parameters when exceptions thrown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tlipcon">Todd Lipcon</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jun 2010 02:39:36 +0000</created>
                <updated>Wed, 19 Oct 2011 00:26:01 +0000</updated>
                            <resolved>Fri, 27 Aug 2010 03:06:21 +0000</resolved>
                                    <version>0.20.2</version>
                    <version>0.21.0</version>
                    <version>0.22.0</version>
                                    <fixVersion>0.20.3</fixVersion>
                    <fixVersion>0.20.205.0</fixVersion>
                    <fixVersion>0.21.1</fixVersion>
                    <fixVersion>0.22.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="12881035" author="hadoopqa" created="Tue, 22 Jun 2010 03:11:17 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12447656/hadoop-6833.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12447656/hadoop-6833.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 956710.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 1017 javac compiler warnings (more than the trunk&apos;s current 1013 warnings).&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/590/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/590/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/590/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/590/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/590/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/590/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/590/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/590/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12881038" author="tlipcon" created="Tue, 22 Jun 2010 03:18:54 +0000"  >&lt;p&gt;I think the &quot;new warnings&quot; are because I used UTF8 in the test, and UTF8 is deprecated. I used it to follow the pattern elsewhere in the test. Let me know if I should change the test case to use something like Text or LongWritable instead.&lt;/p&gt;</comment>
                            <comment id="12902729" author="eli" created="Thu, 26 Aug 2010 00:30:03 +0000"  >&lt;p&gt;Hey Todd,&lt;/p&gt;

&lt;p&gt;Looks like the test added in this patch is racy, it failed for me after I looped it for a couple minutes. When System.gc returns it just means the gc has made a best effort to run, not that it actually has, so in the cases where the gc hasn&apos;t run the test will fail because myArg was not reaped.&lt;/p&gt;

&lt;p&gt;The change itself looks correct. Since this is a one-liner and memory leaks like this are hard to test I&apos;d be OK with a new patch that just fixes the bug as long as it passes the existing RPC tests. Any other suggestions on how to add test coverage of course are welcome, doesn&apos;t seem worth eg adding a getter that returns the number of calls. &lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Eli&lt;/p&gt;</comment>
                            <comment id="12902978" author="tlipcon" created="Thu, 26 Aug 2010 18:48:36 +0000"  >&lt;p&gt;Here&apos;s the same patch minus the unit test.&lt;/p&gt;

&lt;p&gt;As for manual/cluster testing, we&apos;ve been running with this fix in HBase&apos;s copy of RPC for a couple months. We used to eventually run out of RAM, heap analysis showed this was the problem. This fix got rid of the issue.&lt;/p&gt;</comment>
                            <comment id="12903195" author="eli" created="Fri, 27 Aug 2010 02:42:46 +0000"  >&lt;p&gt;+1    &lt;/p&gt;

&lt;p&gt;Here are the test-patch results. Not sure why it -1 javadoc, ant javadoc|javadoc-dev are clean.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     [exec] -1 overall.  
     [exec] 
     [exec]     +1 @author.  The patch does not contain any @author tags.
     [exec] 
     [exec]     -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.
     [exec]                         Please justify why no new tests are needed for this patch.
     [exec]                         Also please list what manual steps were performed to verify this patch.
     [exec] 
     [exec]     -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.
     [exec] 
     [exec]     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.
     [exec] 
     [exec]     +1 findbugs.  The patch does not introduce any new Findbugs warnings.
     [exec] 
     [exec]     +1 release audit.  The applied patch does not increase the total number of release audit warnings.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12903197" author="eli" created="Fri, 27 Aug 2010 03:04:24 +0000"  >&lt;p&gt;Attaching patch for branch-0.20.&lt;/p&gt;</comment>
                            <comment id="12903198" author="eli" created="Fri, 27 Aug 2010 03:06:21 +0000"  >&lt;p&gt;I committed this to 20, 21 and trunk.   Thanks Todd!&lt;/p&gt;</comment>
                            <comment id="12903200" author="hudson" created="Fri, 27 Aug 2010 03:18:13 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #366 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/366/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/366/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6833&quot; title=&quot;IPC leaks call parameters when exceptions thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6833&quot;&gt;&lt;del&gt;HADOOP-6833&lt;/del&gt;&lt;/a&gt;. IPC leaks call parameters when exceptions thrown. Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="12903370" author="hudson" created="Fri, 27 Aug 2010 11:17:48 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #435 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/435/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/435/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6833&quot; title=&quot;IPC leaks call parameters when exceptions thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6833&quot;&gt;&lt;del&gt;HADOOP-6833&lt;/del&gt;&lt;/a&gt;. IPC leaks call parameters when exceptions thrown. Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="13067269" author="owen.omalley" created="Mon, 18 Jul 2011 20:23:57 +0000"  >&lt;p&gt;Let&apos;s fix this in 205 too.&lt;/p&gt;</comment>
                            <comment id="13067278" author="vicaya" created="Mon, 18 Jul 2011 20:36:13 +0000"  >&lt;p&gt;Thanks for the +1 for branch-0.20-security, Owen, I&apos;ll cherry-pick the change and run some test.&lt;/p&gt;</comment>
                            <comment id="13068037" author="vicaya" created="Tue, 19 Jul 2011 22:43:53 +0000"  >&lt;p&gt;Committed in branch-0.20-security, where 205 will branch from (old 205 was just deleted).&lt;/p&gt;</comment>
                            <comment id="13130183" author="mattf" created="Wed, 19 Oct 2011 00:26:01 +0000"  >&lt;p&gt;Closed upon release of 0.20.205.0&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12513318">HADOOP-7456</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12467527">HBASE-2763</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12453202" name="hadoop-6833-20.patch" size="664" author="eli" created="Fri, 27 Aug 2010 03:04:24 +0000"/>
                            <attachment id="12453154" name="hadoop-6833.txt" size="662" author="tlipcon" created="Thu, 26 Aug 2010 18:48:36 +0000"/>
                            <attachment id="12447656" name="hadoop-6833.txt" size="2961" author="tlipcon" created="Tue, 22 Jun 2010 02:40:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17862</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02qbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13867</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>