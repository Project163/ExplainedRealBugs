<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:34:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-7093] Servlets should default to text/plain</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-7093</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;In trunk the servlets like /stacks and /metrics are returning text/html content-type instead of text/plain. Security wise it&apos;s much safer to default to text/plain and require servlets to explicitly set the content-type to text/html when required.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12495179">HADOOP-7093</key>
            <summary>Servlets should default to text/plain</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tlipcon">Todd Lipcon</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Jan 2011 22:34:24 +0000</created>
                <updated>Mon, 12 Dec 2011 06:19:36 +0000</updated>
                            <resolved>Fri, 14 Jan 2011 01:10:14 +0000</resolved>
                                    <version>0.22.0</version>
                                    <fixVersion>0.22.0</fixVersion>
                                    <component>io</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="12979880" author="hadoopqa" created="Tue, 11 Jan 2011 00:51:51 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12467943/hadoop-7093.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12467943/hadoop-7093.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1056006.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 2 release audit warnings (more than the trunk&apos;s current 1 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/166//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/166//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/166//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/166//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/166//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/166//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/166//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/166//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12980349" author="tomwhite" created="Tue, 11 Jan 2011 21:42:32 +0000"  >&lt;p&gt;A few comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;StackServlet shouldn&apos;t use HtmlQuoting since it is serving plain text.&lt;/li&gt;
	&lt;li&gt;We need to be sure that StackServlet is serving UTF8-encoded text. Currently it is using the default platform encoding since it is using a writer constructed with new PrintWriter(response.getOutputStream()), see &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.OutputStream%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.OutputStream%29&lt;/a&gt;. Rather we might use response.getWriter(), which uses the character encoding returned by ServletResponse#getCharacterEncoding(), which should pick it up from our earlier call to ServletResponse#setContentType, according to &lt;a href=&quot;http://download.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getWriter%28%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getWriter%28%29&lt;/a&gt;. The other servlets need checking for this too.&lt;/li&gt;
	&lt;li&gt;For JSON, MetricsServlet should set the content type to &quot;application/json; charset=utf-8&quot;. It&apos;s not currently setting the content type.&lt;/li&gt;
	&lt;li&gt;ConfServlet should set the charset explicitly too.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12980378" author="tlipcon" created="Tue, 11 Jan 2011 22:21:04 +0000"  >&lt;p&gt;Canceling patch to address Tom&apos;s comments. Thanks Tom&lt;/p&gt;</comment>
                            <comment id="12980398" author="tlipcon" created="Tue, 11 Jan 2011 22:42:44 +0000"  >&lt;p&gt;Updated based on review comments. I tested /stacks, /metrics, and /conf on a running NN and looks good:&lt;/p&gt;

&lt;p&gt;todd@todd-w510:~$ curl -s -I &apos;http://localhost:50070/metrics?format=json&apos; | grep &apos;Content-Type&apos;&lt;br/&gt;
Content-Type: application/json; charset=utf-8&lt;br/&gt;
todd@todd-w510:~$ curl -s -I &apos;http://localhost:50070/metrics&apos; | grep &apos;Content-Type&apos;&lt;br/&gt;
Content-Type: text/plain; charset=utf-8&lt;br/&gt;
todd@todd-w510:~$ curl -s -I &apos;http://localhost:50070/conf&apos; | grep &apos;Content-Type&apos;&lt;br/&gt;
Content-Type: text/xml; charset=utf-8&lt;br/&gt;
todd@todd-w510:~$ curl -s -I &apos;http://localhost:50070/stacks&apos; | grep &apos;Content-Type&apos;&lt;br/&gt;
Content-Type: text/plain; charset=utf-8&lt;/p&gt;</comment>
                            <comment id="12980545" author="hadoopqa" created="Wed, 12 Jan 2011 04:22:07 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12468071/hadoop-7093.2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12468071/hadoop-7093.2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1057970.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 2 release audit warnings (more than the trunk&apos;s current 1 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/174//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/174//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/174//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/174//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/174//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/174//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/174//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/174//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12980550" author="tomwhite" created="Wed, 12 Jan 2011 04:30:42 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Nit: with this patch there are two mimetypes for JSON; we should use &quot;application/json&quot; in both cases (&lt;a href=&quot;http://tools.ietf.org/html/rfc4627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tools.ietf.org/html/rfc4627&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="12981579" author="tlipcon" created="Fri, 14 Jan 2011 00:33:34 +0000"  >&lt;p&gt;Fixed the JSON content type nit that Tom pointed out, also fixed release audit warning.&lt;/p&gt;</comment>
                            <comment id="12981580" author="tlipcon" created="Fri, 14 Jan 2011 00:34:28 +0000"  >&lt;p&gt;Oops, missed test.jsp in the previous patch&lt;/p&gt;</comment>
                            <comment id="12981584" author="hadoopqa" created="Fri, 14 Jan 2011 00:52:52 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12468324/hadoop-7093.3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12468324/hadoop-7093.3.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1058343.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/181//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/181//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/181//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/181//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/181//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/181//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12981592" author="tlipcon" created="Fri, 14 Jan 2011 01:10:14 +0000"  >&lt;p&gt;Committed in trunk and branch-0.22 (this is a bug fix since servlets were basically unviewable from web browsers with the html content type)&lt;/p&gt;</comment>
                            <comment id="12981691" author="hudson" created="Fri, 14 Jan 2011 09:44:39 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-22-branch #15 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-22-branch/15/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-22-branch/15/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7093&quot; title=&quot;Servlets should default to text/plain&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7093&quot;&gt;&lt;del&gt;HADOOP-7093&lt;/del&gt;&lt;/a&gt;. Servlets should default to text/plain. Contributed by Todd Lipcon&lt;/p&gt;</comment>
                            <comment id="12981718" author="hudson" created="Fri, 14 Jan 2011 11:14:22 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #576 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/576/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/576/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7093&quot; title=&quot;Servlets should default to text/plain&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7093&quot;&gt;&lt;del&gt;HADOOP-7093&lt;/del&gt;&lt;/a&gt;. Servlets should default to text/plain. Contributed by Todd Lipcon&lt;/p&gt;</comment>
                            <comment id="12983565" author="hudson" created="Wed, 19 Jan 2011 07:13:24 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #479 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/479/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/479/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12495194">MAPREDUCE-2253</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12468071" name="hadoop-7093.2.txt" size="8375" author="tlipcon" created="Tue, 11 Jan 2011 22:40:36 +0000"/>
                            <attachment id="12468324" name="hadoop-7093.3.txt" size="8656" author="tlipcon" created="Fri, 14 Jan 2011 00:34:28 +0000"/>
                            <attachment id="12468323" name="hadoop-7093.3.txt" size="7475" author="tlipcon" created="Fri, 14 Jan 2011 00:33:34 +0000"/>
                            <attachment id="12467943" name="hadoop-7093.txt" size="4524" author="tlipcon" created="Tue, 11 Jan 2011 00:38:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36980</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02pyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13806</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>