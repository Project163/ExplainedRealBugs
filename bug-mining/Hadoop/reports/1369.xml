<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:46:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-10714] AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-10714</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;In the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10400&quot; title=&quot;Incorporate new S3A FileSystem implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10400&quot;&gt;&lt;del&gt;HADOOP-10400&lt;/del&gt;&lt;/a&gt;, calls to AmazonS3Client.deleteObjects() need to have the number of entries at 1000 or below. Otherwise we get a Malformed XML error similar to:&lt;/p&gt;

&lt;p&gt;com.amazonaws.services.s3.model.AmazonS3Exception: Status Code: 400, AWS Service: Amazon S3, AWS Request ID: 6626AD56A3C76F5B, AWS Error Code: MalformedXML, AWS Error Message: The XML you provided was not well-formed or did not validate against our published schema, S3 Extended Request ID: DOt6C+Y84mGSoDuaQTCo33893VaoKGEVC3y1k2zFIQRm+AJkFH2mTyrDgnykSL+v&lt;br/&gt;
at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:798)&lt;br/&gt;
at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:421)&lt;br/&gt;
at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:232)&lt;br/&gt;
at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:3528)&lt;br/&gt;
at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:3480)&lt;br/&gt;
at com.amazonaws.services.s3.AmazonS3Client.deleteObjects(AmazonS3Client.java:1739)&lt;br/&gt;
at org.apache.hadoop.fs.s3a.S3AFileSystem.rename(S3AFileSystem.java:388)&lt;br/&gt;
at org.apache.hadoop.hbase.snapshot.ExportSnapshot.run(ExportSnapshot.java:829)&lt;br/&gt;
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)&lt;br/&gt;
at org.apache.hadoop.hbase.snapshot.ExportSnapshot.innerMain(ExportSnapshot.java:874)&lt;br/&gt;
at org.apache.hadoop.hbase.snapshot.ExportSnapshot.main(ExportSnapshot.java:878)&lt;/p&gt;

&lt;p&gt;Note that this is mentioned in the AWS documentation:&lt;br/&gt;
&lt;a href=&quot;http://docs.aws.amazon.com/AmazonS3/latest/API/multiobjectdeleteapi.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.aws.amazon.com/AmazonS3/latest/API/multiobjectdeleteapi.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&quot;The Multi-Object Delete request contains a list of up to 1000 keys that you want to delete. In the XML, you provide the object key names, and optionally, version IDs if you want to delete a specific version of the object from a versioning-enabled bucket. For each key, Amazon S3&#8230;.&#8221;&lt;/p&gt;

&lt;p&gt;Thanks to Matteo Bertozzi and Rahul Bhartia from AWS for identifying the problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12721679">HADOOP-10714</key>
            <summary>AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jyu@cloudera.com">Juan Yu</assignee>
                                    <reporter username="dsw">David S. Wang</reporter>
                        <labels>
                            <label>s3</label>
                    </labels>
                <created>Tue, 17 Jun 2014 13:32:27 +0000</created>
                <updated>Thu, 21 Jul 2016 22:25:43 +0000</updated>
                            <resolved>Thu, 6 Nov 2014 01:28:08 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.7.0</fixVersion>
                                    <component>fs/s3</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                                <comments>
                            <comment id="14033792" author="mbertozzi" created="Tue, 17 Jun 2014 13:43:11 +0000"  >&lt;p&gt;the patch looks good to me.&lt;br/&gt;
The simple test that we have run to reproduce the problem is to create more than 1000 files and then rename the folder.&lt;/p&gt;</comment>
                            <comment id="14034083" author="stevel@apache.org" created="Tue, 17 Jun 2014 17:39:43 +0000"  >&lt;ul&gt;
	&lt;li&gt;can this just be merged into a new &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10400&quot; title=&quot;Incorporate new S3A FileSystem implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10400&quot;&gt;&lt;del&gt;HADOOP-10400&lt;/del&gt;&lt;/a&gt; patch ... as that isn&apos;t checked in yet it should just be updated&lt;/li&gt;
	&lt;li&gt;scale tests are good -for the swift stuff we have some scalable ones which you can tune off the test config file. This lets you run smaller tests over slower links. File size can be kept low for better performance.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Tests for a large set of files should&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;verify that the results of a directory listing is complete&lt;/li&gt;
	&lt;li&gt;try a rename() (as this has a delete inside)&lt;/li&gt;
	&lt;li&gt;do the delete()&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14140939" author="jyu@cloudera.com" created="Fri, 19 Sep 2014 17:37:59 +0000"  >&lt;p&gt;This patch contains the following changes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added scale test for s3a&lt;/li&gt;
	&lt;li&gt;Modified &lt;tt&gt;rename()&lt;/tt&gt; to make it behavior closer to s3n and other FileSystem&lt;br/&gt;
    1. Fails if both src and dst are the same directory, &lt;br/&gt;
    2. Return true and no-op if both src and dst are the same file&lt;br/&gt;
    3. Allows if src is file and dst is directory&lt;br/&gt;
    4. Fails if dst is a child of the source directory&lt;/li&gt;
	&lt;li&gt;Modified some base contract tests due to S3&apos;s limitation.&lt;/li&gt;
	&lt;li&gt;Increased surefire plugin&apos;s forkedProcessTimeoutInSeconds to 30 minutes because the rename thousands of files in S3 takes time.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I ran all S3A unit tests against S3 and they passed.&lt;/p&gt;</comment>
                            <comment id="14141042" author="hadoopqa" created="Fri, 19 Sep 2014 18:30:12 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12670036/HADOOP-10714.001.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12670036/HADOOP-10714.001.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 25fd69a.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 10 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-tools/hadoop-aws.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4774//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4774//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4774//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4774//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14141506" author="clamb" created="Fri, 19 Sep 2014 23:04:50 +0000"  >&lt;p&gt;General:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Several lines bust the 80 char limit.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;There are several places where there are extra newlines. There should only ever be one blank line.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Remove unused imports in your new files.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;S3AFileSystem&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;// deleteUnnecessaryFakeDirectories&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This looks like the name of a method rather than a comment.&lt;/p&gt;

&lt;p&gt;TestS3AContractRename&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;s/s3a don&apos;t/s3a doesn&apos;t/&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;core-site.xml&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;lt;!-- Values used when running unit tests.  This is mostly empty, to --&amp;gt;&lt;br/&gt;
&amp;lt;!-- use of the default values, overriding the potentially --&amp;gt;&lt;br/&gt;
&amp;lt;!-- user-editted core-site.xml in the conf/ directory.  --&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;can be changed to:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;lt;!-- Values used when running unit tests. Specify any values in here that&lt;br/&gt;
     should override the default values. --&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;ul&gt;
	&lt;li&gt;You can remove the extra newline after &amp;lt;configuration&amp;gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;S3AFileSystemBaseTest&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;s/If you keys/If your keys/, s/as passed/as passed./&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;S3AScaleTestBase&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;remove the extra newline after the class comment.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;S3ATestUtils&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;You can move &quot;implements S3ATestConstants&quot; to the line above.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;testReceivedData decl has incorrect indentation. Extra newline at the end of this method.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;generateTestData has the same indent problem in the decl.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I&apos;d prefer that you do import statics of various org.junit.Assert methods in TestS3AFileSYstemBasicOps rather than extending S3AFileSystemBaseTest with it.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;TestS3AFileSystemBasicOps&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;remove the extra newline after the class comment.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m unclear about what the test renaming is about. Could you please comment on that in the Jira?&lt;/p&gt;

&lt;p&gt;TestS3AFileSystemContract&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;if (!renameSupported()) return;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;should be changed to:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;if (!renameSupported()) {&lt;br/&gt;
  return;&lt;br/&gt;
}&lt;/p&gt;&lt;/blockquote&gt;

&lt;ul&gt;
	&lt;li&gt;remove the blank line before the closing } of testRenameDirectoryAsExistingDirectory(), ditto blank line before last } in the file.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14141658" author="atm" created="Sat, 20 Sep 2014 01:32:15 +0000"  >&lt;p&gt;The patch looks pretty good to me. Charlie&apos;s nits don&apos;t seem unreasonable. I&apos;ll add one comment of my own, but it&apos;s really not a big deal:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isDebugEnabled()) {
+          LOG.debug(
+              &lt;span class=&quot;code-quote&quot;&gt;&quot;cannot rename a directory to a subdirectory of self&quot;&lt;/span&gt;);
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The reason that we have &quot;&lt;tt&gt;LOG.isDebugEnabled&lt;/tt&gt;&quot; in the code at all is to prevent the overhead of string concatenation when the message doesn&apos;t have just a string constant. In this case there&apos;s no string concatenation at all, so you can just go ahead and do the &quot;&lt;tt&gt;LOG.debug&lt;/tt&gt;&quot;&lt;/p&gt;

&lt;p&gt;I&apos;ll be +1 once all these little nits are addressed.&lt;/p&gt;

&lt;p&gt;Thanks, Juan.&lt;/p&gt;</comment>
                            <comment id="14141692" author="clamb" created="Sat, 20 Sep 2014 02:43:04 +0000"  >&lt;p&gt;BTW Juan, I apologize for my terse comments above. I had written them up in an editor buffer and then in a rush I just cut and pasted them into the comment frame without putting a greeting or any preamble in there.&lt;/p&gt;

&lt;p&gt;In general, it looks like the patch does what it is supposed to do so nice work on this.&lt;/p&gt;

&lt;p&gt;I also realized that my 2nd to last comment about the if (!renameSupported()) got badly formatted. The idea I was trying to convey is that there should be braces around the return; for those two if&apos;s.&lt;/p&gt;

&lt;p&gt;Thanks Juan.&lt;/p&gt;
</comment>
                            <comment id="14141755" author="jyu@cloudera.com" created="Sat, 20 Sep 2014 05:11:02 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=clamb&quot; class=&quot;user-hover&quot; rel=&quot;clamb&quot;&gt;clamb&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atm&quot; class=&quot;user-hover&quot; rel=&quot;atm&quot;&gt;atm&lt;/a&gt; for code reviewing. new patch to address all comments. Where can I find a guideline for code formatting?&lt;/p&gt;

&lt;p&gt;The reason we need the rename test is because s3 doesn&apos;t support rename. we have to copy src to dest on s3 then delete src to mimic rename operation. &lt;br/&gt;
because of the copy step, &lt;tt&gt;rename()&lt;/tt&gt; on s3 could take long time if the source folder contains lots of files.&lt;/p&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;, do you have time to review this patch as well?&lt;/p&gt;</comment>
                            <comment id="14141797" author="hadoopqa" created="Sat, 20 Sep 2014 06:25:14 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12670180/HADOOP-10714.002.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12670180/HADOOP-10714.002.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision f85cc14.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 10 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The following test timeouts occurred in hadoop-common-project/hadoop-common hadoop-tools/hadoop-aws:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.http.TestHttpServer&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4779//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4779//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4779//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4779//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14141944" author="clamb" created="Sat, 20 Sep 2014 11:40:16 +0000"  >&lt;p&gt;Hi Juan,&lt;/p&gt;

&lt;p&gt;The Hadoop Coding Standards are here: &lt;a href=&quot;https://wiki.apache.org/hadoop/CodeReviewChecklist&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.apache.org/hadoop/CodeReviewChecklist&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As mentioned at the top of that file, it&apos;s basically the Sun Java Coding standards with an indentation of 2, not 4. But to be clear (I learned this lesson the hard way), it&apos;s 2 for new lines and 4 for continuations of lines). BTW (sorry, I can&apos;t help myself), the LOG.debug line that ATM mentioned probably does not need to be broken after the &apos;(&apos;.&lt;/p&gt;</comment>
                            <comment id="14142112" author="stevel@apache.org" created="Sat, 20 Sep 2014 17:07:57 +0000"  >&lt;p&gt;Style-guide wise, I have been &lt;a href=&quot;https://github.com/steveloughran/formality/blob/master/styleguide/styleguide.md]&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;[writing one during test runs&lt;/a&gt;.&lt;/p&gt;


&lt;h3&gt;&lt;a name=&quot;newtestsingeneral&quot;&gt;&lt;/a&gt;new tests in general&lt;/h3&gt;

&lt;p&gt;If there&apos;s extra basic things to test. e.g. &lt;tt&gt;TestS3AFileSystemBasicOps&lt;/tt&gt;, there&apos;s no reason why they can&apos;t be pulled up to the core.&lt;/p&gt;



&lt;h3&gt;&lt;a name=&quot;scale&quot;&gt;&lt;/a&gt;scale&lt;/h3&gt;

&lt;p&gt;&lt;tt&gt;testOpenCreate()&lt;/tt&gt; relies on the tester having good upload bandwidth. It needs to be configurable or optional. We already do some of this for seek() testing, with &lt;tt&gt;ContractOptions&lt;/tt&gt; having an option &lt;tt&gt;TEST_RANDOM_SEEK_COUNT&lt;/tt&gt; for test performance. (that one because the cost of seeking is so high on remote object stores over HTTPS). Ideally I&apos;d like to see some abstract filesystem scalability contract test which could then be implemented by S3a and others (file &amp;amp; hdfs at the very least) so that its a definition of what big files should do. &lt;/p&gt;


&lt;p&gt;Looking at the openstack tests, &lt;tt&gt;SwiftScaleTestBase&lt;/tt&gt; is a basis for scaled FS tests, with one specific test, &lt;tt&gt;TestWriteManySmallFiles&lt;/tt&gt; looking at the cost of creating and deleting lots of files. If we had something like that in the abstract tests, we&apos;d have caught the problem you&apos;ve seen : scale problems with many thousands of small files. &lt;/p&gt;


&lt;h3&gt;&lt;a name=&quot;testhelpers&quot;&gt;&lt;/a&gt;test helpers&lt;/h3&gt;

&lt;p&gt;You should look at &lt;tt&gt;ContractTestUtils&lt;/tt&gt; for test helpers, replacing thing like &lt;tt&gt;assertTrue(fs.exists(path(&quot;/tests3a/c/a/&quot;)));&lt;/tt&gt; with &lt;tt&gt;ContractTestUtils.assertPathExists()&lt;/tt&gt;, which will produce a meaningful exception and a listing of the parent dir on a failure. You could even put &lt;tt&gt;testReceivedData&lt;/tt&gt; in there too, once renamed to something like &lt;tt&gt;verifyReceivedData&lt;/tt&gt;. There&apos;s already methods there that can do exactly what you&apos;ve rewritten, though they won&apos;t work to multi-GB files as they save to byte arrays first. Your new verification code can be the start of some more scalability tests.&lt;/p&gt;

&lt;p&gt;Same for the other methods &#8212;but fix &lt;tt&gt;createAndReadFileTest&lt;/tt&gt; to always close its streams.&lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;rename%28%29&quot;&gt;&lt;/a&gt;rename()&lt;/h3&gt;

&lt;p&gt;Finally, the actual source code change: rename changes. The correct behaviour of &lt;tt&gt;FileSystem.rename()&lt;/tt&gt; is something I&apos;m not confident I understand, and I&apos;m not confident that others do either. More precisely: Posix rename is fundamentally misunderstood and &lt;tt&gt;DFS.rename()&lt;/tt&gt; diverges from it anyway.&lt;/p&gt;

&lt;p&gt;If rename() problems weren&apos;t picked up in the previous tests, it means that not only does S3A need the tests you&apos;ve added, &lt;tt&gt;AbstractContractRenameTest&lt;/tt&gt; needs more tests too.&lt;/p&gt;


&lt;h2&gt;&lt;a name=&quot;Summary&quot;&gt;&lt;/a&gt;Summary&lt;/h2&gt;

&lt;p&gt;Looking at my comments, My key point is that you&apos;ve done some really good scale tests here, as well as tests to validate S3A behaviour. The scale tests can at some point be applied to others, so maybe design it that way from the outset. Add under S3A /test a test case based on the abstract contract class tree something with the scale tests&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TestS3aContractScale &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AbstractFSContractTestBase {

    &lt;span class=&quot;code-comment&quot;&gt;// scale tests, using/extending ContractTestUtils
&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;that way there&apos;s no need for you to add new tests to all the other filesystems here, and spend the time getting them to work. For now we&apos;ll just trust HDFS to handle files &amp;gt;5GB and more than 1000 entries in a directory.&lt;/p&gt;

&lt;p&gt;The rename tests are a different matter. If there&apos;s something up with S3a.rename(), and it wasn&apos;t found, then the root tests are lacking. Please add them to &lt;tt&gt;AbstractContractRenameTest&lt;/tt&gt; and see what breaks. If it is HDFS, then the new tests are wrong. If they work on HDFS but fail on other things (swift:// s3n://) then that&apos;s something we need to know about.&lt;/p&gt;</comment>
                            <comment id="14143570" author="jyu@cloudera.com" created="Mon, 22 Sep 2014 18:22:33 +0000"  >&lt;p&gt;Thanks Charles and Steve. &lt;br/&gt;
here is a new patch to address all &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;&apos;s comments except the &quot;abstract out the scale tests&quot; request.&lt;br/&gt;
I&apos;d like to file another JIRA for that.&lt;br/&gt;
Most of tests in my previous patch are tests from the original s3a patch. &lt;br/&gt;
I compared them with the contract tests. most are duplicates so I removed them. a few of them are worth to keep. I added them to abstract contract test and verified they work on HDFS.&lt;/p&gt;</comment>
                            <comment id="14143658" author="hadoopqa" created="Mon, 22 Sep 2014 19:20:16 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12670455/HADOOP-10714.003.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12670455/HADOOP-10714.003.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 0a64149.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 10 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-tools/hadoop-aws:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.fs.contract.localfs.TestLocalFSContractRename&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4786//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4786//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4786//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4786//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14143871" author="jyu@cloudera.com" created="Mon, 22 Sep 2014 21:37:57 +0000"  >&lt;p&gt;I modified the new test &lt;tt&gt;testRenameWithNonEmptySubDir&lt;/tt&gt; to honor HDFS&apos; behavior, but seems HDFS doesn&apos;t honor POSIX rename behavior.&lt;br/&gt;
&quot;If the link named by the new argument exists, it shall be removed and old renamed to new. &quot;&lt;br/&gt;
&lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/007904875/functions/rename.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pubs.opengroup.org/onlinepubs/007904875/functions/rename.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;HDFS &lt;tt&gt;rename&lt;/tt&gt; creates a subfolder under dest dir. this is the same as linux though.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;srcdir/file&lt;/li&gt;
	&lt;li&gt;emptydestdir&lt;br/&gt;
after rename&lt;/li&gt;
	&lt;li&gt;emptydestdir/srcdir/file&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Should HDFS honor POSIX rename behavior?&lt;/p&gt;</comment>
                            <comment id="14144638" author="stevel@apache.org" created="Tue, 23 Sep 2014 10:18:06 +0000"  >&lt;p&gt;You are right, HDFS does&apos;t quite follow posix. There&apos;s actually a difference between the command line &lt;tt&gt;mv&lt;/tt&gt; operation and the internal rename API; I think the behaviour of bits of HDFS match the CLI.&lt;/p&gt;

&lt;p&gt;HDFS cannot/will not change its behavior; the file system specification says &quot;HDFS is the definition of the FS API&quot;. And like I also said &quot;nobody really understands rename&quot;...even the POSIX API isn&apos;t that great.&lt;/p&gt;</comment>
                            <comment id="14144643" author="stevel@apache.org" created="Tue, 23 Sep 2014 10:28:36 +0000"  >&lt;p&gt;patch-wise, it looks good; abstracting out the scale tests is something that can be done later -at least now it is configurable for S3a.&lt;/p&gt;

&lt;p&gt;The test is failing on jenkins as you&apos;ve added a test/resources/core-site.xml, which triggers the test run. Rather than do something complicated there, why not&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;change the -aws POM to trigger the test off `resources/contract-test-options.xml` ... which is of course the file needed for all the contract tests.&lt;/li&gt;
	&lt;li&gt;add to the `core-site.xml` the config options for the scale tests, along with the default values. This makes it easier to see what options to change.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14144829" author="jyu@cloudera.com" created="Tue, 23 Sep 2014 14:21:44 +0000"  >&lt;p&gt;the failed test is the new rename test &lt;tt&gt;TestLocalFSContractRename&lt;/tt&gt; I added to abstract contract. it fails &lt;tt&gt;RawLocalFileSystem&lt;/tt&gt; enforce POSIX rename behavior which is different than HDFS.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; rename(Path src, Path dst) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-comment&quot;&gt;// Attempt rename using Java API.
&lt;/span&gt;    File srcFile = pathToFile(src);
    File dstFile = pathToFile(dst);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (srcFile.renameTo(dstFile)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }

    &lt;span class=&quot;code-comment&quot;&gt;// Enforce POSIX rename behavior that a source directory replaces an existing
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// destination &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the destination is an empty directory.  On most platforms,
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is already handled by the Java API call above.  Some platforms
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// (notably Windows) &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not provide &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; behavior, so the Java API call above
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// fails.  Delete destination and attempt rename again.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14145018" author="jyu@cloudera.com" created="Tue, 23 Sep 2014 16:55:41 +0000"  >&lt;p&gt;Since we cannot change HDFS&apos;s rename behavior, I guess the same for RawLocalFileSystem.&lt;br/&gt;
I modified the new rename test to accept both POSIX rename behavior and CLI rename behavior.&lt;/p&gt;</comment>
                            <comment id="14145119" author="hadoopqa" created="Tue, 23 Sep 2014 17:50:12 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12670744/HADOOP-10714.004.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12670744/HADOOP-10714.004.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision a1fd804.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 10 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-tools/hadoop-aws.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4793//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4793//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4793//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4793//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14145444" author="stevel@apache.org" created="Tue, 23 Sep 2014 21:06:23 +0000"  >&lt;p&gt;OK, in this situation we&apos;re going to need to make the test handle both outcomes.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;ContractOptions&lt;/tt&gt; already lists a set of rename flags -are there any which match the operation?&lt;/li&gt;
	&lt;li&gt;If so, check it in the test and make the relevant assertions for whichever outcome has been declared as supported. that is, if it says it renames like posix, it had better.&lt;/li&gt;
	&lt;li&gt;if you have to add a new option &amp;amp; put it in local file, then so be it ... at least we&apos;ve expanded the declarative list of different behaviours.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;thanks for getting involved in the depths of cross-FS-rename semantics BTW.&lt;/p&gt;</comment>
                            <comment id="14145514" author="jyu@cloudera.com" created="Tue, 23 Sep 2014 21:53:53 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;. I added a new ContractOption for the rename behavior. This contract-driven FS test suite is very flexible and be able to handle various case. Great job on that.&lt;/p&gt;</comment>
                            <comment id="14145531" author="hadoopqa" created="Tue, 23 Sep 2014 22:04:55 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12670819/HADOOP-10714.005.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12670819/HADOOP-10714.005.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision b93d960.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  Trunk compilation may be broken.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4795//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4795//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14145828" author="jyu@cloudera.com" created="Wed, 24 Sep 2014 03:28:44 +0000"  >&lt;p&gt;Same patch as previous to trigger Jenkins build.&lt;/p&gt;</comment>
                            <comment id="14145859" author="hadoopqa" created="Wed, 24 Sep 2014 04:22:05 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12670888/HADOOP-10714.006.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12670888/HADOOP-10714.006.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision ef784a2.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 13 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-tools/hadoop-aws:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.crypto.random.TestOsSecureRandom&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4796//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4796//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4796//artifact/PreCommit-HADOOP-Build-patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4796//artifact/PreCommit-HADOOP-Build-patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4796//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4796//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14145884" author="jyu@cloudera.com" created="Wed, 24 Sep 2014 04:47:34 +0000"  >&lt;p&gt;I don&apos;t think the failed test is related with this patch.&lt;/p&gt;</comment>
                            <comment id="14147851" author="jyu@cloudera.com" created="Thu, 25 Sep 2014 15:24:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;, any comment about the latest patch? thanks.&lt;/p&gt;</comment>
                            <comment id="14150768" author="stevel@apache.org" created="Sat, 27 Sep 2014 20:23:17 +0000"  >&lt;p&gt;I don&apos;t have time to play with this for the next few days; going offline &amp;amp; travelling, sorry. &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;From what I look at it seems good...what I&apos;d like to do is test the swift client against the new tests &#8212;but that can wait &amp;amp; if they fail, that&apos;s something to file against fs/swift.&lt;/li&gt;
	&lt;li&gt;new tests seem good&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;If someone (charles?) can apply and run the s3a tests, I&apos;d take that as a sign that this patch is good to go&lt;/p&gt;
</comment>
                            <comment id="14150881" author="jyu@cloudera.com" created="Sun, 28 Sep 2014 02:17:04 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;. I&apos;ve run the contract test with swift client, all passed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=clamb&quot; class=&quot;user-hover&quot; rel=&quot;clamb&quot;&gt;clamb&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atm&quot; class=&quot;user-hover&quot; rel=&quot;atm&quot;&gt;atm&lt;/a&gt;, could one of you apply and run the s3a tests and let me know if you see any issue?&lt;/p&gt;</comment>
                            <comment id="14151205" author="stevel@apache.org" created="Sun, 28 Sep 2014 20:38:24 +0000"  >&lt;p&gt;Running the tests, seeing some problems, will post updated patch&lt;/p&gt;</comment>
                            <comment id="14151221" author="stevel@apache.org" created="Sun, 28 Sep 2014 21:18:27 +0000"  >&lt;p&gt;Updated patch. I haven&apos;t run the scale tests themselves; got into issues with the core tests and some code review work. &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;{{testRenameWithNonEmptySubDir() }} sticks its data straight into the hadoop-common dir&lt;br/&gt;
&lt;tt&gt;hadoop-common-project/hadoop-common/testRenameWithNonEmptySubDir/&lt;/tt&gt;. The base class &lt;tt&gt;path()&lt;/tt&gt; method&lt;br/&gt;
sets up directories properly. (fixed)&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;BasicAWSCredentialsProvider&lt;/tt&gt; and credential setup gets trimmed config option, checks for &quot;&quot; as well as null.&lt;/li&gt;
	&lt;li&gt;downgraded logs of FS operations from INFO to DEBUG&lt;/li&gt;
	&lt;li&gt;fixed &quot;livetest&quot; probes to compare scheme in test URI; existing comparator wouldn&apos;t have worked.&lt;/li&gt;
	&lt;li&gt;renamed &lt;tt&gt;TestDeleteManyFiles&lt;/tt&gt; to &lt;tt&gt;TestS3ADeleteManyFiles&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;saw intermittent failures of &lt;tt&gt;TestS3AContractRename&lt;/tt&gt;; after which test wouldn&apos;t restart.&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;testRenameWithNonEmptySubDir(org.apache.hadoop.fs.contract.s3a.TestS3AContractRename)  Time elapsed: 17.563 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: not deleted: unexpectedly found testRenameWithNonEmptySubDir/src1/source.txt as  S3AFileStatus{path=s3a:&lt;span class=&quot;code-comment&quot;&gt;//tests3neu/user/stevel/testRenameWithNonEmptySubDir/src1/source.txt; isDirectory=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;; length=27; replication=1; blocksize=0; modification_time=1411936074000; access_time=0; owner=; group=; permission=rw-rw-rw-; isSymlink=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;}
&lt;/span&gt;	at org.junit.Assert.fail(Assert.java:88)
	at org.apache.hadoop.fs.contract.ContractTestUtils.assertPathDoesNotExist(ContractTestUtils.java:702)
	at org.apache.hadoop.fs.contract.AbstractContractRenameTest.testRenameWithNonEmptySubDir(AbstractContractRenameTest.java:223)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The next run failed as the source dirs were still there:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Running org.apache.hadoop.fs.contract.s3a.TestS3AContractRename
Tests run: 6, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 48.168 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.fs.contract.s3a.TestS3AContractRename
testRenameWithNonEmptySubDir(org.apache.hadoop.fs.contract.s3a.TestS3AContractRename)  Time elapsed: 6.49 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.hadoop.fs.FileAlreadyExistsException: testRenameWithNonEmptySubDir/src1/source.txt already exists
	at org.apache.hadoop.fs.s3a.S3AFileSystem.create(S3AFileSystem.java:252)
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:908)
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:889)
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:786)
	at org.apache.hadoop.fs.contract.ContractTestUtils.createFile(ContractTestUtils.java:507)
	at org.apache.hadoop.fs.contract.ContractTestUtils.writeTextFile(ContractTestUtils.java:491)
	at org.apache.hadoop.fs.contract.AbstractContractRenameTest.testRenameWithNonEmptySubDir(AbstractContractRenameTest.java:198)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fix: make sure dirs are cleaned before test runs. applied same change to scale test&lt;/p&gt;

</comment>
                            <comment id="14151236" author="jyu@cloudera.com" created="Sun, 28 Sep 2014 21:50:12 +0000"  >&lt;p&gt;New patch looks good. +1. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;&lt;br/&gt;
I noticed the new rename test has the test directory left over and plan to send a new patch. you beat me on fixing it first. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14151246" author="hadoopqa" created="Sun, 28 Sep 2014 22:13:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12671719/HADOOP-10714-007.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12671719/HADOOP-10714-007.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 400e1bb.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 15 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-tools/hadoop-aws:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.crypto.random.TestOsSecureRandom&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4822//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4822//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4822//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4822//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14151740" author="clamb" created="Mon, 29 Sep 2014 14:40:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jyu%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jyu@cloudera.com&quot;&gt;jyu@cloudera.com&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I&apos;m having trouble running the tests with the latest patch. I&apos;ll contact you offline to see if we can figure out what&apos;s going on.&lt;/p&gt;</comment>
                            <comment id="14151919" author="clamb" created="Mon, 29 Sep 2014 17:21:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jyu%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jyu@cloudera.com&quot;&gt;jyu@cloudera.com&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;The tests all worked like a champ:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.hadoop.fs.contract.s3n.TestS3NContractRootDir
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 22.68 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractRootDir
Running org.apache.hadoop.fs.contract.s3n.TestS3NContractRename
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 57.28 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractRename
Running org.apache.hadoop.fs.contract.s3n.TestS3NContractMkdir
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 44.416 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractMkdir
Running org.apache.hadoop.fs.contract.s3n.TestS3NContractSeek
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 74.451 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractSeek
Running org.apache.hadoop.fs.contract.s3n.TestS3NContractOpen
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 32.289 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractOpen
Running org.apache.hadoop.fs.contract.s3n.TestS3NContractCreate
Tests run: 6, Failures: 0, Errors: 0, Skipped: 3, Time elapsed: 35.512 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractCreate
Running org.apache.hadoop.fs.contract.s3n.TestS3NContractDelete
Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 72.683 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractDelete

Results :

Tests run: 46, Failures: 0, Errors: 0, Skipped: 3

Running org.apache.hadoop.fs.contract.s3a.TestS3AContractRename
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 86.871 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractRename
Running org.apache.hadoop.fs.contract.s3a.TestS3AContractMkdir
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 55.332 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractMkdir
Running org.apache.hadoop.fs.contract.s3a.TestS3AContractCreate
Tests run: 6, Failures: 0, Errors: 0, Skipped: 3, Time elapsed: 47.507 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractCreate
Running org.apache.hadoop.fs.contract.s3a.TestS3AContractDelete
Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 84.011 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractDelete
Running org.apache.hadoop.fs.contract.s3a.TestS3AContractSeek
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 99.172 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractSeek
Running org.apache.hadoop.fs.contract.s3a.TestS3AContractOpen
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 44.234 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractOpen
Running org.apache.hadoop.fs.contract.s3a.TestS3AContractRootDir
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 28.172 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractRootDir

Results :

Tests run: 46, Failures: 0, Errors: 0, Skipped: 3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14153334" author="stevel@apache.org" created="Tue, 30 Sep 2014 16:15:51 +0000"  >&lt;p&gt;charles &#8212;you happy with this? If so I&apos;m +1 for it.&lt;/p&gt;

&lt;p&gt;there&apos;s one thing I&apos;d like to do as an experience of setting up the tests, something we could merge in with this patch. &lt;/p&gt;

&lt;p&gt;It is: make the authentication property names in s3a match those of s3n. They do the same thing, but have different names. Making the same except for s/s3a/s3n/ will aid migration and documentation.&lt;/p&gt;

&lt;p&gt;That change is easy enough to do here, and something we need to do before releasing this in 2.6.&lt;/p&gt;

&lt;p&gt;There&apos;s another extension later, &quot;convert more HTTP error codes into standard exceptions&quot; &#8212;which can be done later&lt;/p&gt;</comment>
                            <comment id="14153394" author="clamb" created="Tue, 30 Sep 2014 16:54:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;charles &#8212;you happy with this?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, +1 (non-binding) from me.&lt;/p&gt;</comment>
                            <comment id="14153400" author="jyu@cloudera.com" created="Tue, 30 Sep 2014 16:57:05 +0000"  >&lt;p&gt;Why don&apos;t we just use one authentication property for all three, s3/s3n/s3a like the following?&lt;br/&gt;
&lt;tt&gt;fs.aws.access.key&lt;/tt&gt; and &lt;tt&gt;fs.aws.secret.key&lt;/tt&gt;&lt;br/&gt;
There is really no need to use one per connector.&lt;/p&gt;</comment>
                            <comment id="14154318" author="jyu@cloudera.com" created="Wed, 1 Oct 2014 04:11:48 +0000"  >&lt;p&gt;Let s3a use &lt;tt&gt;S3Credentials&lt;/tt&gt; to get authentication info, same as s3 and s3n.&lt;br/&gt;
If we decide to use the same property name for all three in the future, just need to change it in &lt;tt&gt;S3Credentials&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14154364" author="hadoopqa" created="Wed, 1 Oct 2014 05:09:46 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12672248/HADOOP-10714.008.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12672248/HADOOP-10714.008.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 17d1202.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 15 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-tools/hadoop-aws.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4844//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4844//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4844//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4844//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14168932" author="stevel@apache.org" created="Mon, 13 Oct 2014 04:17:06 +0000"  >&lt;p&gt;This is the patch I&apos;m going to commit; I just need people with better bandwidth than a bay area hotel to run the tests that upload the big files. That experience shows we need to make those tests optional.&lt;/p&gt;

&lt;p&gt;I&apos;ve not changed the code, just&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;finished off the docs&lt;/li&gt;
	&lt;li&gt;renamed the S3/S3N fs subclasses of &lt;tt&gt;FileSystemContractTestBase&lt;/tt&gt; to Test* and so automatically run&lt;/li&gt;
	&lt;li&gt;made them fail meaningfully if their args aren&apos;t set&lt;/li&gt;
	&lt;li&gt;made sure it builds and runs on branch 2. To do that I had to remove the &lt;tt&gt;@override&lt;/tt&gt; tag from &lt;tt&gt;TestS3AFileSystemContract.testMoveDirUnderParent()&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;doubled the test timeouts in the POM -which still arent enough for some networks.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;So: some minor test tuning; I do want to finish the full upload test (tommorrow) before committing as is. &lt;/p&gt;</comment>
                            <comment id="14169573" author="stevel@apache.org" created="Mon, 13 Oct 2014 17:19:46 +0000"  >&lt;p&gt;&lt;tt&gt;TestJets3tNativeFileSystemStore&lt;/tt&gt; is timing out for me, even in places with better bandwidth. Can others try?&lt;/p&gt;</comment>
                            <comment id="14169613" author="hadoopqa" created="Mon, 13 Oct 2014 17:42:30 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12674458/HADOOP-10714-009.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12674458/HADOOP-10714-009.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 793dbf2.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 19 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-tools/hadoop-aws.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4911//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4911//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4911//artifact/patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4911//artifact/patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4911//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4911//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14169729" author="jyu@cloudera.com" created="Mon, 13 Oct 2014 18:41:10 +0000"  >&lt;p&gt;I tried it. with 1G file upload, the test takes ~20 minutes. which means the 5G one will take more than 1.5 hrs. &lt;/p&gt;</comment>
                            <comment id="14169731" author="jyu@cloudera.com" created="Mon, 13 Oct 2014 18:42:20 +0000"  >&lt;p&gt;I also ran all other s3a, s3n tests and they passed.&lt;/p&gt;</comment>
                            <comment id="14190582" author="atm" created="Thu, 30 Oct 2014 18:40:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt; - is Juan&apos;s confirmation of the tests sufficient for you? If yes, are you OK with me going ahead and committing this? Seems like you were satisfied with it based on your comment on October 12.&lt;/p&gt;

&lt;p&gt;Thanks a lot.&lt;/p&gt;</comment>
                            <comment id="14191688" author="stevel@apache.org" created="Fri, 31 Oct 2014 10:59:22 +0000"  >&lt;p&gt;sorry, not had a chance do do another run, but its been making me fell guilty&lt;/p&gt;

&lt;p&gt;+1 for the patch if you rever that rename I did of the slow test. my own fault for interfering&lt;/p&gt;</comment>
                            <comment id="14197690" author="jyu@cloudera.com" created="Wed, 5 Nov 2014 06:49:12 +0000"  >&lt;p&gt;Revert the rename change, and comment the S3N extra large file upload test.&lt;br/&gt;
Will add test config flag for the extra large file uploading in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11128&quot; title=&quot;abstracting out the scale tests for FileSystem Contract tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11128&quot;&gt;HADOOP-11128&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14197798" author="hadoopqa" created="Wed, 5 Nov 2014 07:42:12 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12679481/HADOOP-10714.010.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12679481/HADOOP-10714.010.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 73068f6.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 18 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-tools/hadoop-aws.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5027//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5027//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5027//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5027//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14198943" author="stevel@apache.org" created="Wed, 5 Nov 2014 19:43:33 +0000"  >&lt;p&gt;LGTM, +1&lt;/p&gt;</comment>
                            <comment id="14199535" author="atm" created="Thu, 6 Nov 2014 01:14:59 +0000"  >&lt;p&gt;Great, thanks Steve and Juan.&lt;/p&gt;

&lt;p&gt;I&apos;m going to commit this momentarily based on Steve&apos;s +1.&lt;/p&gt;</comment>
                            <comment id="14199566" author="atm" created="Thu, 6 Nov 2014 01:28:08 +0000"  >&lt;p&gt;I&apos;ve just committed this to trunk and branch-2.&lt;/p&gt;

&lt;p&gt;Thanks a lot for the contribution, Juan, and thanks also to Steve and Charlie for the reviews.&lt;/p&gt;</comment>
                            <comment id="14199599" author="hudson" created="Thu, 6 Nov 2014 01:46:28 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #6460 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/6460/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/6460/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10714&quot; title=&quot;AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10714&quot;&gt;&lt;del&gt;HADOOP-10714&lt;/del&gt;&lt;/a&gt;. AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call. Contributed by Juan Yu. (atm: rev 6ba52d88ec11444cbac946ffadbc645acd0657de)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/resources/contract/localfs.xml&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/S3ATestUtils.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AOutputStream.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/contract/s3a/TestS3AContractRename.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/ContractOptions.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/Constants.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/scale/S3AScaleTestBase.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3native/NativeS3FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3/S3FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;.gitignore&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/resources/core-site.xml&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/TestS3AFileSystemContract.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/site/markdown/tools/hadoop-aws/index.md&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractMkdirTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/site/markdown/filesystem/testing.md&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3native/TestJets3tNativeFileSystemStore.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractRenameTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/scale/TestS3ADeleteManyFiles.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AInputStream.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/ContractTestUtils.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/pom.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractDeleteTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/resources/contract/s3a.xml&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/S3AFileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3/S3Credentials.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/BasicAWSCredentialsProvider.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14199717" author="jyu@cloudera.com" created="Thu, 6 Nov 2014 03:39:29 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsw&quot; class=&quot;user-hover&quot; rel=&quot;dsw&quot;&gt;dsw&lt;/a&gt; for the initial patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt; for review and documentation, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=clamb&quot; class=&quot;user-hover&quot; rel=&quot;clamb&quot;&gt;clamb&lt;/a&gt; for review and testing, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atm&quot; class=&quot;user-hover&quot; rel=&quot;atm&quot;&gt;atm&lt;/a&gt; for committing this.&lt;/p&gt;</comment>
                            <comment id="14200110" author="hudson" created="Thu, 6 Nov 2014 11:51:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #735 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/735/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/735/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10714&quot; title=&quot;AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10714&quot;&gt;&lt;del&gt;HADOOP-10714&lt;/del&gt;&lt;/a&gt;. AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call. Contributed by Juan Yu. (atm: rev 6ba52d88ec11444cbac946ffadbc645acd0657de)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/site/markdown/tools/hadoop-aws/index.md&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/S3AFileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/resources/contract/localfs.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/site/markdown/filesystem/testing.md&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AOutputStream.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/Constants.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/pom.xml&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/S3ATestUtils.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/ContractOptions.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/ContractTestUtils.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractRenameTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3native/TestJets3tNativeFileSystemStore.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/resources/core-site.xml&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/resources/contract/s3a.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractDeleteTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/scale/S3AScaleTestBase.java&lt;/li&gt;
	&lt;li&gt;.gitignore&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3/S3FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3/S3Credentials.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AInputStream.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/scale/TestS3ADeleteManyFiles.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractMkdirTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/contract/s3a/TestS3AContractRename.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/TestS3AFileSystemContract.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/BasicAWSCredentialsProvider.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3native/NativeS3FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileSystemContractBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14200205" author="hudson" created="Thu, 6 Nov 2014 14:19:22 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1925 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1925/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1925/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10714&quot; title=&quot;AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10714&quot;&gt;&lt;del&gt;HADOOP-10714&lt;/del&gt;&lt;/a&gt;. AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call. Contributed by Juan Yu. (atm: rev 6ba52d88ec11444cbac946ffadbc645acd0657de)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3native/TestJets3tNativeFileSystemStore.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3native/NativeS3FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/resources/contract/s3a.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/ContractTestUtils.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/resources/contract/localfs.xml&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/BasicAWSCredentialsProvider.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AInputStream.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/S3AFileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/scale/TestS3ADeleteManyFiles.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/pom.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/ContractOptions.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3/S3Credentials.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractMkdirTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/site/markdown/tools/hadoop-aws/index.md&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3/S3FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;.gitignore&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/Constants.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/TestS3AFileSystemContract.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AOutputStream.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractDeleteTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/S3ATestUtils.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/contract/s3a/TestS3AContractRename.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/scale/S3AScaleTestBase.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/site/markdown/filesystem/testing.md&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractRenameTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/resources/core-site.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14200285" author="hudson" created="Thu, 6 Nov 2014 15:12:16 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1949 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1949/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1949/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10714&quot; title=&quot;AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10714&quot;&gt;&lt;del&gt;HADOOP-10714&lt;/del&gt;&lt;/a&gt;. AmazonS3Client.deleteObjects() need to be limited to 1000 entries per call. Contributed by Juan Yu. (atm: rev 6ba52d88ec11444cbac946ffadbc645acd0657de)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/ContractTestUtils.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractMkdirTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/pom.xml&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AOutputStream.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3native/NativeS3FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/resources/contract/s3a.xml&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AInputStream.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/contract/s3a/TestS3AContractRename.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractRenameTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/TestS3AFileSystemContract.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3/S3Credentials.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/resources/contract/localfs.xml&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/S3AFileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;.gitignore&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/site/markdown/tools/hadoop-aws/index.md&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/BasicAWSCredentialsProvider.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/S3ATestUtils.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/site/markdown/filesystem/testing.md&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3/S3FileSystemContractBaseTest.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3native/TestJets3tNativeFileSystemStore.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/scale/S3AScaleTestBase.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/Constants.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/ContractOptions.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/scale/TestS3ADeleteManyFiles.java&lt;/li&gt;
	&lt;li&gt;hadoop-tools/hadoop-aws/src/test/resources/core-site.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractDeleteTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14242908" author="cnauroth" created="Thu, 11 Dec 2014 18:33:54 +0000"  >&lt;p&gt;After this patch, the hadoop-aws site documentation is no longer built.  The build expects the documentation source files in src/site instead of src/main/site.  I filed a patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11394&quot; title=&quot;hadoop-aws documentation missing.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11394&quot;&gt;&lt;del&gt;HADOOP-11394&lt;/del&gt;&lt;/a&gt; to fix this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12743907">HADOOP-11128</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12991637">HADOOP-13402</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12779623">HADOOP-11670</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12761128">HADOOP-11394</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12773738">HADOOP-11571</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12700621">HADOOP-10400</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12671719" name="HADOOP-10714-007.patch" size="76338" author="stevel@apache.org" created="Sun, 28 Sep 2014 21:18:27 +0000"/>
                            <attachment id="12674458" name="HADOOP-10714-009.patch" size="92218" author="stevel@apache.org" created="Mon, 13 Oct 2014 04:17:06 +0000"/>
                            <attachment id="12650795" name="HADOOP-10714-1.patch" size="3452" author="dsw" created="Tue, 17 Jun 2014 13:35:22 +0000"/>
                            <attachment id="12670036" name="HADOOP-10714.001.patch" size="50367" author="jyu@cloudera.com" created="Fri, 19 Sep 2014 17:37:59 +0000"/>
                            <attachment id="12670180" name="HADOOP-10714.002.patch" size="50621" author="jyu@cloudera.com" created="Sat, 20 Sep 2014 05:11:02 +0000"/>
                            <attachment id="12670455" name="HADOOP-10714.003.patch" size="49215" author="jyu@cloudera.com" created="Mon, 22 Sep 2014 18:22:33 +0000"/>
                            <attachment id="12670744" name="HADOOP-10714.004.patch" size="48336" author="jyu@cloudera.com" created="Tue, 23 Sep 2014 16:55:41 +0000"/>
                            <attachment id="12670819" name="HADOOP-10714.005.patch" size="50668" author="jyu@cloudera.com" created="Tue, 23 Sep 2014 21:53:53 +0000"/>
                            <attachment id="12670888" name="HADOOP-10714.006.patch" size="50668" author="jyu@cloudera.com" created="Wed, 24 Sep 2014 03:28:44 +0000"/>
                            <attachment id="12672248" name="HADOOP-10714.008.patch" size="80088" author="jyu@cloudera.com" created="Wed, 1 Oct 2014 04:11:48 +0000"/>
                            <attachment id="12679481" name="HADOOP-10714.010.patch" size="87282" author="jyu@cloudera.com" created="Wed, 5 Nov 2014 06:49:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399875</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wu5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327583">2.7.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>