<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:54:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-13186] GenericOptionParser -libjars option validity check not always working because of bad local FS equality check</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-13186</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;&lt;em&gt;Class concerned :&lt;/em&gt;&lt;br/&gt;
&lt;tt&gt;org.apache.hadoop.util.GenericOptionParser&lt;/tt&gt;&lt;br/&gt;
&lt;em&gt;Method :&lt;/em&gt;&lt;br/&gt;
&lt;tt&gt;public static URL[] getLibJars(final Configuration conf)&lt;/tt&gt;&lt;br/&gt;
&lt;em&gt;Line :&lt;/em&gt;&lt;br/&gt;
&lt;tt&gt;if (tmp.getFileSystem(conf).equals(FileSystem.getLocal(conf)))&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;In this method we check if the provided jar on the command line are on a local file system, else we emit a warning log and ignore it.&lt;/p&gt;

&lt;p&gt;I&apos;ve got the case where the two file systems retrieved (the one from the &lt;tt&gt;Path.getFileSystem(conf)&lt;/tt&gt; and the one returned by &lt;tt&gt;FileSystem.getLocal(conf)&lt;/tt&gt;) where two local file systems but different objects, and the &lt;tt&gt;equals()&lt;/tt&gt; method, not having been implemented, defaulted to the object pointer equality, leading to my jar files not being taken into account.&lt;/p&gt;

&lt;p&gt;I&apos;ve quickly patched it to &lt;br/&gt;
&lt;tt&gt;tmp.getFileSystem(conf).getUri().equals(FileSystem.getLocal(conf).getUri()&lt;/tt&gt;&lt;br/&gt;
to have my application work.&lt;br/&gt;
I did not dig further into determining whether the objects should have been the same, or whether the &lt;tt&gt;equals()&lt;/tt&gt; method should have been implemented, but it has to be done.&lt;/p&gt;




</description>
                <environment>&lt;p&gt;Occured on: CentOS 6.3 or Ubuntu 14.04, Oracle JDK 1.7.0_45 or 1.8.0_66&lt;/p&gt;</environment>
        <key id="12971462">HADOOP-13186</key>
            <summary>GenericOptionParser -libjars option validity check not always working because of bad local FS equality check</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ArnaudL">Arnaud Linz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 May 2016 08:43:46 +0000</created>
                <updated>Sun, 17 Jun 2018 19:18:29 +0000</updated>
                            <resolved>Fri, 11 Aug 2017 16:20:12 +0000</resolved>
                                    <version>2.6.0</version>
                    <version>2.7.1</version>
                                                    <component>util</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="15318236" author="yuanbo" created="Tue, 7 Jun 2016 09:49:02 +0000"  >&lt;p&gt;please search &quot;impl.disable.cache&quot; in core-site.xml. Every specific file system will be instantiated only one time, unless you config &quot;fs.*(scheme).impl.disable.cache&quot; as true. &lt;/p&gt;</comment>
                            <comment id="15318254" author="arnaudl" created="Tue, 7 Jun 2016 10:03:22 +0000"  >&lt;p&gt;&lt;tt&gt;impl.disable.cache&lt;/tt&gt; was not set in my core-site.xml when this issue occurred.&lt;/p&gt;</comment>
                            <comment id="15326905" author="yuanbo" created="Mon, 13 Jun 2016 06:55:58 +0000"  >&lt;p&gt;Well, that&apos;s weird. It will be nice if you provide more specific steps to reproduce this problem. This would not suppose to be an issue if you did not set the property.&lt;/p&gt;</comment>
                            <comment id="15326915" author="arnaudl" created="Mon, 13 Jun 2016 07:10:46 +0000"  >&lt;p&gt;Maybe it happened because I&apos;ve mixed a lot of hadoop client tools in my jar, with some dependencies version mismatches. I&apos;ll try to isolate what combination causes the issue, but I&apos;ll need time for that.&lt;/p&gt;</comment>
                            <comment id="16515193" author="hudson" created="Sun, 17 Jun 2018 19:18:29 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #14443 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/14443/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/14443/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13186&quot; title=&quot;GenericOptionParser -libjars option validity check not always working because of bad local FS equality check&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13186&quot;&gt;&lt;del&gt;HADOOP-13186&lt;/del&gt;&lt;/a&gt;. Multipart Uploader API. Contributed by Ewan Higgs (cdouglas: rev 980031bb043dd026a6bf42b0e71d304ac89294a5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(add) hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AMultipartUploader.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/fs/TestHDFSMultipartUploader.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/BBPartHandle.java&lt;/li&gt;
	&lt;li&gt;(edit) hadoop-common-project/hadoop-common/src/test/resources/contract/rawlocal.xml&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystemMultipartUploader.java&lt;/li&gt;
	&lt;li&gt;(edit) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/AbstractContractPathHandleTest.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-tools/hadoop-aws/src/main/resources/META-INF/services/org.apache.hadoop.fs.MultipartUploader&lt;/li&gt;
	&lt;li&gt;(add) hadoop-tools/hadoop-aws/src/main/resources/META-INF/org.apache.hadoop.fs.MultipartUploaderFactory&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestLocalFileSystemMultipartUploader.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-hdfs-project/hadoop-hdfs-client/src/main/resources/META-INF/services/org.apache.hadoop.fs.MultipartUploaderFactory&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/resources/META-INF/services/org.apache.hadoop.fs.MultipartUploaderFactory&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/UploadHandle.java&lt;/li&gt;
	&lt;li&gt;(edit) hadoop-common-project/hadoop-common/src/main/proto/FSProtos.proto&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/AbstractSystemMultipartUploaderTest.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/BBUploadHandle.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/UnsupportedMultipartUploaderException.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/LocalFileSystemPathHandle.java&lt;/li&gt;
	&lt;li&gt;(edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/rawlocal/TestRawlocalContractPathHandle.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/MultipartUploader.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSMultipartUploaderFactory.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/MultipartUploaderFactory.java&lt;/li&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/PartHandle.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y9l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Job, Command Line, Local File System, libjars</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>