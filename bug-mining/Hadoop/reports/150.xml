<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:33:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6796] FileStatus allows null srcPath but crashes if that&apos;s done</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6796</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;FileStatus allows constructor invocation with a null srcPath but many methods like write, readFields, compareTo, equals, and hashCode depend on this property.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12465846">HADOOP-6796</key>
            <summary>FileStatus allows null srcPath but crashes if that&apos;s done</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="rschmidt">Rodrigo Schmidt</assignee>
                                    <reporter username="rschmidt">Rodrigo Schmidt</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Jun 2010 10:44:06 +0000</created>
                <updated>Mon, 20 Jul 2015 11:25:25 +0000</updated>
                            <resolved>Wed, 1 Sep 2010 02:28:11 +0000</resolved>
                                    <version>0.22.0</version>
                                    <fixVersion>0.22.0</fixVersion>
                                    <component>fs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="12874001" author="hadoopqa" created="Tue, 1 Jun 2010 13:44:55 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12446012/HADOOP-6796.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12446012/HADOOP-6796.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 949658.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/556/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/556/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/556/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/556/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/556/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/556/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/556/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/556/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12874175" author="dms" created="Tue, 1 Jun 2010 19:24:15 +0000"  >&lt;p&gt;Did you think of using an empty string instead of root for path? like other strings (owner, group) do? &lt;/p&gt;</comment>
                            <comment id="12874176" author="schen" created="Tue, 1 Jun 2010 19:25:40 +0000"  >&lt;p&gt;Rodrigo: Will returning &quot;/&quot; change some of the existing behavior? Is there any code path that does the following?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getPath() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
 ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12874212" author="eli" created="Tue, 1 Jun 2010 20:15:04 +0000"  >&lt;p&gt;Why does anyone create a FileStatus with a null path?  Seems like we should make those callers all pass in &quot;/&quot; if that&apos;s the intended behavior rather than automatically convert null to Path(&quot;/&quot;) in the constructor.  Adding a path != null assertion in the constructor should prevent future cases of people passing in null.  &lt;/p&gt;</comment>
                            <comment id="12874228" author="rschmidt" created="Tue, 1 Jun 2010 20:46:45 +0000"  >&lt;p&gt;@Dmytro: srcPath is currently defined as a Path object and I don&apos;t want to change that. Calling &apos;new Path(&quot;&quot;)&apos;, crashes because &quot;&quot; is not a valid path. That&apos;s why I defaulted it to &quot;/&quot;&lt;/p&gt;

&lt;p&gt;@Scott: No checks for getPath() == null afaik, on the other hand, if srcPath is null, all the method calls I mentioned will crash.&lt;/p&gt;

&lt;p&gt;@Eli: You create a FileStatus with a null srcPath if you do &apos;stat = new FileStatus();&apos;. This patch actually changes srcPath to Path(&quot;/&quot;) whenever it&apos;s null, which is exactly the behavior you proposed, but without triggering the exception when someone does that. I don&apos;t think passing null should be prevented, since we don&apos;t do that for other parameters like &quot;owner&quot; or &quot;group&quot;. In such cases we default the value to empty strings. The equivalent for srcPath should be Path(&quot;/&quot;) IMO.&lt;/p&gt;</comment>
                            <comment id="12874275" author="eli" created="Tue, 1 Jun 2010 22:13:39 +0000"  >&lt;p&gt;Shouldn&apos;t people who want a FileStatus that represents root just pass in &quot;/&quot;?  It seems weird that new FileStatus() gives you a file status for root.&lt;/p&gt;</comment>
                            <comment id="12874284" author="rschmidt" created="Tue, 1 Jun 2010 22:31:05 +0000"  >&lt;p&gt;What should be the srcPath for &quot;new FileStatus()&quot; then?&lt;/p&gt;

&lt;p&gt;I don&apos;t think disabling this constructor is a good choice. As a Writable, people might want to create a new empty object and read from some DataOutput (that was exactly how I found the problem, by the way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;).&lt;/p&gt;</comment>
                            <comment id="12874338" author="eli" created="Wed, 2 Jun 2010 00:33:58 +0000"  >&lt;p&gt;In cases where you want to explicitly tolerate objects that are only partially constructed after calling the constructor (ie the user is responsible for initializing the internals) it&apos;s often useful to provide an isValid method that returns true if all the requisite fields have been initialized and public methods assert isValid before they&apos;re called. This way there&apos;s no side effects (ie you forget to set the src path but it happens to work because a default value was specified, but the user doesn&apos;t know what that is without looking at the object&apos;s internals) and the assert clearly indicates what field needs to be set.  This feels like overkill to me. Objects that can be partially constructed are special cases where the user needs to know what fields are required, to me it&apos;s better to get an NPE indicating the user needs to set the source path than automatically constructing a path object for them using a value they may not be aware of.&lt;/p&gt;</comment>
                            <comment id="12874347" author="rschmidt" created="Wed, 2 Jun 2010 00:47:39 +0000"  >&lt;p&gt;So are you proposing to get rid of the FileStatus() constructor, and signal NPE when the user forgets to specify the srcPath?&lt;/p&gt;</comment>
                            <comment id="12874361" author="eli" created="Wed, 2 Jun 2010 01:30:11 +0000"  >&lt;p&gt;If you can get rid of the FileStatus() constructor that&apos;s preferable since it&apos;s a useful invariant that objects are fully initialized after their constructors are called (users and methods don&apos;t need to worry about partially constructed objects) but that might not be possible or worth the trouble with FileStatus. I think it basically comes down to whether there is a good default value for a FileStatus path.  Getting an NPE or hitting an assert when you try to use a partially constructed object seems preferable to accidentally using a value that wasn&apos;t intended (ie make users specify the path for a file status). My 2c. &lt;/p&gt;</comment>
                            <comment id="12874362" author="jghoman" created="Wed, 2 Jun 2010 01:31:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;So are you proposing to get rid of the FileStatus() constructor, and signal NPE when the user forgets to specify the srcPath? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;FileStatus is a Writable and therefore requires a default constructor, unfortunately.  Were one to start looking at the classes that implement Writable, I imagine quite a few would be susceptible to this problem.  It&apos;s a limitation of Writable (and Java...)&lt;/p&gt;</comment>
                            <comment id="12874382" author="rschmidt" created="Wed, 2 Jun 2010 02:13:26 +0000"  >&lt;p&gt;Wow! I didn&apos;t know this would create so much discussion. I thought it was such a simple code cleanup and unit tests. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;@Eli: Unfortunately we can&apos;t get rid of the default constructor because FileStatus is a Writable(). So, I think your proposal boils down to just leaving it the way it is.&lt;/p&gt;

&lt;p&gt;I don&apos;t like it because it leaves room for people to use the default constructor or a null srcPath for some corner case conditions and crash unexpectedly down the road with an NPE. &lt;/p&gt;

&lt;p&gt;So, my opinion is that any valid Path is better than null as a default value, and &quot;/&quot; seems reasonable.&lt;/p&gt;

&lt;p&gt;The options are the following:&lt;/p&gt;

&lt;p&gt;1) Leave it the way it is&lt;br/&gt;
2) Use Path(&quot;/&quot;) if the srcPath is null (current patch)&lt;br/&gt;
3) Start accepting a null srcPath and change the methods that currently crash because of it&lt;/p&gt;

&lt;p&gt;My patch does (2) because I didn&apos;t think it was worth implementing (3). However, I definitely prefer (3) to (1), so I could definitely implement it.&lt;/p&gt;

&lt;p&gt;What do the others think?&lt;/p&gt;</comment>
                            <comment id="12874396" author="eli" created="Wed, 2 Jun 2010 03:17:14 +0000"  >&lt;p&gt;You could also modify Path to accept Path(&quot;&quot;) or Path(null) so that instead of throwing an exception they silently convert to Path(&quot;/&quot;). That runs into the same rationale, ie it&apos;s useful that Path throws an exception when given invalid arguments instead of converting the path to something else (this way people know when they pass in a null by mistake).  You could also make sure FileStatus objects are created via a method that sets the required fields (ie use a factory).&lt;/p&gt;

&lt;p&gt;What&apos;s the code that triggers this? If that code just wants a FileStatus that represents &quot;/&quot; then could you just modify that code to set the path explicitly to &quot;/&quot;?&lt;/p&gt;</comment>
                            <comment id="12874437" author="jghoman" created="Wed, 2 Jun 2010 05:55:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;You could also modify Path to accept Path(&quot;&quot;) or Path(null) so that instead of throwing an exception they silently convert to Path(&quot;/&quot;)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nope - silent conversions are evil.  &lt;/p&gt;

&lt;p&gt;The current patch  is probably the best way to go, although this new behavior needs to be documented thoroughly.  The general rule of thumb with anything implementing writable is caveat utilitor - let the user beware. Because of the write and readFields methods as well as the default constructor, it&apos;s always best practice to verify the state of the instance you&apos;re dealing with.&lt;/p&gt;</comment>
                            <comment id="12874487" author="rschmidt" created="Wed, 2 Jun 2010 08:05:36 +0000"  >&lt;p&gt;@Eli: I noticed this problem while writing a unit test for a different JIRA. The code didn&apos;t care much about the contents of the FileStatus object and that&apos;s why I was creating it with &quot;new FileStatus()&quot;.&lt;/p&gt;

&lt;p&gt;@Jakob: Besides the javadoc, where else should this be documented?&lt;/p&gt;</comment>
                            <comment id="12874658" author="eli" created="Wed, 2 Jun 2010 16:55:40 +0000"  >&lt;p&gt;Sounds like the simple thing to do is have your test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;s = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileStatus();
s.setPath(&lt;span class=&quot;code-quote&quot;&gt;&quot;/something&quot;&lt;/span&gt;);
s.setXXX(...);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or use FileStatus#read like the only other user of the default constructor (ThriftHadoopFileSystem). For the writable use case the reason the default values are null is that you know you&apos;re going to immediately overwrite them via read() and this way you don&apos;t pay the cost of instantiating an object you&apos;re just going to overwrite.&lt;/p&gt;</comment>
                            <comment id="12874719" author="rschmidt" created="Wed, 2 Jun 2010 18:25:15 +0000"  >&lt;p&gt;I&apos;m not worried about my test. I fixed it by using a complete FileStatus object.&lt;br/&gt;
I just don&apos;t like the idea of leaving the code the way it is. It looks buggy and next time someone bumps into the NPE error, he or she will create a JIRA and go through all this discussion again.&lt;/p&gt;

&lt;p&gt;@Eli: Here are a couple of options that I thought about this morning. Let me know if they sound plausible to you:&lt;/p&gt;

&lt;p&gt;1) Prevent srcPath from being null in any non-default constructor of FileStatus() by using asserts. For the default constructor, use Path(&quot;/&quot;).&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;2) If srcPath is null, prevent any calls to methods different from readFields() with asserts. (This will have some performance impact and will be hard to maintain).&lt;/p&gt;
</comment>
                            <comment id="12874740" author="eli" created="Wed, 2 Jun 2010 18:52:39 +0000"  >&lt;p&gt;I think classes like FileStatus (eg writables) are special cases where the user has to know that they&apos;re using a constructor that leaves the object partially constructed. All the fields are invalid when using the default constructor, by the same logic we should also set a default owner, group etc instead of using null and converting to &quot;&quot;. The path is not special (other parts of the system are not happy with &quot;&quot; users). While objects like this are less user friendly (they violate the rule that a constructor leaves an object in a valid state) they prevent you from allocating a bunch of objects that you&apos;re just going to overwrite.  The default constructor for most of the other objects that implement writable (eg FsPermission) leave their fields as null as well. Its a trade off between performance and user friendlyness, the code currently sacrifies user friendlyness for performance.  If we didn&apos;t do that you can see someone doing some profiling and following a jira that notices &quot;we create a lot of objects in the default constructors that we immediately overwrite, let&apos;s avoid that&quot;.  Not vetoing your patch, just pointing out that there&apos;s a reason the code works the way it does. This isn&apos;t a one off case where it&apos;s different, so we should be consistent.&lt;/p&gt;

&lt;p&gt;Assertions are only enabled when the unit tests run, so there&apos;s no performance impact. I think asserts are good practice, not a maintenance burden, by that&apos;s my 2c.&lt;/p&gt;</comment>
                            <comment id="12874749" author="rschmidt" created="Wed, 2 Jun 2010 19:15:06 +0000"  >&lt;p&gt;Okay! I see your point.&lt;/p&gt;

&lt;p&gt;Maybe we should just prevent null srcPaths on constructors other than the default one. This at least makes it clear that users should not create FileStatus objects with null srcPaths.&lt;/p&gt;</comment>
                            <comment id="12874753" author="eli" created="Wed, 2 Jun 2010 19:22:35 +0000"  >&lt;p&gt;Seems reasonable to me.  Thanks for all the back and forth!&lt;/p&gt;</comment>
                            <comment id="12874754" author="rschmidt" created="Wed, 2 Jun 2010 19:24:10 +0000"  >&lt;p&gt;No problem. I&apos;ll submit a new patch soon.&lt;/p&gt;</comment>
                            <comment id="12874763" author="jghoman" created="Wed, 2 Jun 2010 19:52:29 +0000"  >&lt;p&gt;Rodrigo: any constructor that converts an empty path to &quot;/&quot; is a change in behavior that we&apos;re not going to introduce. Again, from above and from what Eli said, Writable is fundamentally a flawed and dangerous data structure if you&apos;re expecting it to guarantee any integrity to its fields.  Checking for not null on other constructors is fine, I guess; are we also going to verify that the constituent long fields are non-negative? And yeah, go ahead and throw in asserts - they&apos;re our best bet of catching logic errors in this data structure during unit tests.&lt;/p&gt;</comment>
                            <comment id="12875003" author="rschmidt" created="Thu, 3 Jun 2010 08:17:37 +0000"  >&lt;p&gt;I just realized the FileStatus constructors don&apos;t throw any exception. What should we do if the parameters fail the sanity check?&lt;/p&gt;

&lt;p&gt;Should I create a new exception? If I do so, this will have a strong impact on several parts of Hadoop.&lt;/p&gt;</comment>
                            <comment id="12875199" author="eli" created="Thu, 3 Jun 2010 17:23:54 +0000"  >&lt;p&gt;If it&apos;s never ok to pass null for the path (ie a bug in the code) then you can assert path != null or throw an AssertionError. If it&apos;s OK sometimes and not others than IllegalArgumentException seems appropriate, seems like it should never be legitimate to create a FileStatus w/o a path unless using the no argument constructor. &lt;/p&gt;</comment>
                            <comment id="12875215" author="rschmidt" created="Thu, 3 Jun 2010 17:47:29 +0000"  >&lt;p&gt;Does this new patch look better?&lt;/p&gt;

&lt;p&gt;If so, I&apos;ll work on some unit tests.&lt;/p&gt;</comment>
                            <comment id="12875284" author="eli" created="Thu, 3 Jun 2010 20:28:49 +0000"  >&lt;p&gt;Looks reasonable to me.  What do you think Jakob?&lt;/p&gt;</comment>
                            <comment id="12875472" author="jghoman" created="Fri, 4 Jun 2010 04:50:20 +0000"  >&lt;p&gt;It&apos;s fine, I guess.  The new patch won&apos;t cause any harm and may catch some error at some point.  Since the stateSanityCheck() method is essentially one line that&apos;s called once, I&apos;d just inline it.&lt;/p&gt;</comment>
                            <comment id="12875486" author="rschmidt" created="Fri, 4 Jun 2010 05:18:34 +0000"  >&lt;p&gt;Do you guys think I should add more checks to the method?&lt;/p&gt;

&lt;p&gt;I could also check if the numbers are all non-negative, for example. path checking is the most important thing because it makes other methods fail.&lt;/p&gt;</comment>
                            <comment id="12875518" author="eli" created="Fri, 4 Jun 2010 07:24:44 +0000"  >&lt;p&gt;I think just checking the path is fine.&lt;/p&gt;</comment>
                            <comment id="12876572" author="rschmidt" created="Tue, 8 Jun 2010 07:15:27 +0000"  >&lt;p&gt;Wrote some quick unit tests&lt;/p&gt;</comment>
                            <comment id="12876587" author="hadoopqa" created="Tue, 8 Jun 2010 07:40:54 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12446567/HADOOP-6796.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12446567/HADOOP-6796.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 952471.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/573/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/573/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/573/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/573/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/573/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/573/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/573/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/573/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12877037" author="rschmidt" created="Wed, 9 Jun 2010 10:28:32 +0000"  >&lt;p&gt;Updated to junit4&lt;/p&gt;</comment>
                            <comment id="12877045" author="hadoopqa" created="Wed, 9 Jun 2010 11:19:57 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12446680/HADOOP-6796.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12446680/HADOOP-6796.3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 952471.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/574/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/574/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/574/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/574/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/574/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/574/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/574/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/574/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12877127" author="eli" created="Wed, 9 Jun 2010 16:40:06 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I&apos;ll commit soon.&lt;/p&gt;</comment>
                            <comment id="12877153" author="eli" created="Wed, 9 Jun 2010 17:59:08 +0000"  >&lt;p&gt;I&apos;ve committed this. Thanks Rodrigo! &lt;/p&gt;</comment>
                            <comment id="12877157" author="hudson" created="Wed, 9 Jun 2010 18:13:43 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #291 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/291/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/291/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6796&quot; title=&quot;FileStatus allows null srcPath but crashes if that&amp;#39;s done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6796&quot;&gt;&lt;del&gt;HADOOP-6796&lt;/del&gt;&lt;/a&gt;. FileStatus allows null srcPath but crashes if that&apos;s done. Contributed by Rodrigo Schmidt.&lt;/p&gt;</comment>
                            <comment id="12877396" author="hudson" created="Thu, 10 Jun 2010 11:20:30 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #362 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/362/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/362/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6796&quot; title=&quot;FileStatus allows null srcPath but crashes if that&amp;#39;s done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6796&quot;&gt;&lt;del&gt;HADOOP-6796&lt;/del&gt;&lt;/a&gt;. FileStatus allows null srcPath but crashes if that&apos;s done. Contributed by Rodrigo Schmidt.&lt;/p&gt;</comment>
                            <comment id="12877878" author="szetszwo" created="Fri, 11 Jun 2010 17:44:33 +0000"  >&lt;p&gt;The patch causes TestCopyFiles failing; see &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1858&quot; title=&quot;TestCopyFiles fails consistently on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1858&quot;&gt;&lt;del&gt;MAPREDUCE-1858&lt;/del&gt;&lt;/a&gt;.  We probably should revert it because the constructor FileStatus() should not be changed.&lt;/p&gt;</comment>
                            <comment id="12878188" author="jghoman" created="Sat, 12 Jun 2010 02:02:55 +0000"  >&lt;p&gt;+1 on revert.  Writables are dangerous, we&apos;ll just have to live with them.&lt;/p&gt;</comment>
                            <comment id="12878203" author="rschmidt" created="Sat, 12 Jun 2010 03:50:15 +0000"  >&lt;p&gt;I think it&apos;s just bad initialization. permission should be initialized with the constructor value.&lt;/p&gt;

&lt;p&gt;Not sure if it&apos;s better to revert this or add the changes and better unit tests to cover these cases.&lt;/p&gt;</comment>
                            <comment id="12878343" author="eli" created="Sun, 13 Jun 2010 04:21:50 +0000"  >&lt;p&gt;I&apos;ll revert the change. If we want to reintroduce we should restore fix users first but it&apos;s reasonable for existing users of writables to expect null to work, we&apos;d need to modify them first, ie can&apos;t assume they&apos;re broken.&lt;/p&gt;</comment>
                            <comment id="12878344" author="rschmidt" created="Sun, 13 Jun 2010 04:32:11 +0000"  >&lt;p&gt;Sure! Go ahead and revert it please.&lt;/p&gt;</comment>
                            <comment id="12878345" author="eli" created="Sun, 13 Jun 2010 04:39:57 +0000"  >&lt;p&gt;Reverted the patch, confirmed TestCopyFiles passes.&lt;/p&gt;</comment>
                            <comment id="12878348" author="hudson" created="Sun, 13 Jun 2010 04:53:02 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #302 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/302/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/302/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6796&quot; title=&quot;FileStatus allows null srcPath but crashes if that&amp;#39;s done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6796&quot;&gt;&lt;del&gt;HADOOP-6796&lt;/del&gt;&lt;/a&gt;. Reverting the patch.&lt;/p&gt;</comment>
                            <comment id="12878381" author="hudson" created="Sun, 13 Jun 2010 11:21:57 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #365 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/365/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/365/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6796&quot; title=&quot;FileStatus allows null srcPath but crashes if that&amp;#39;s done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6796&quot;&gt;&lt;del&gt;HADOOP-6796&lt;/del&gt;&lt;/a&gt;. Reverting the patch.&lt;/p&gt;</comment>
                            <comment id="12878410" author="szetszwo" created="Sun, 13 Jun 2010 17:29:06 +0000"  >&lt;p&gt;Reopen since the patch has already been reverted.&lt;/p&gt;</comment>
                            <comment id="12904877" author="rschmidt" created="Wed, 1 Sep 2010 02:28:11 +0000"  >&lt;p&gt;It&apos;s probably better to leave things the way they are.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12466729">MAPREDUCE-1858</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12846249">HADOOP-12251</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12466860">HADOOP-6825</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446267" name="HADOOP-6796.1.patch" size="1936" author="rschmidt" created="Thu, 3 Jun 2010 17:47:29 +0000"/>
                            <attachment id="12446567" name="HADOOP-6796.2.patch" size="4455" author="rschmidt" created="Tue, 8 Jun 2010 07:15:27 +0000"/>
                            <attachment id="12446680" name="HADOOP-6796.3.patch" size="4483" author="rschmidt" created="Wed, 9 Jun 2010 10:27:10 +0000"/>
                            <attachment id="12446012" name="HADOOP-6796.patch" size="3147" author="rschmidt" created="Tue, 1 Jun 2010 10:46:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>77643</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hw4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>