<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:47:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-11484] hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-11484</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Hadoop fails to build on ARM aarch64 (or any non x86 platform) because of the following in&lt;/p&gt;

&lt;p&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/primitives.h&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/**
 * little-endian to big-endian or vice versa
 */
inline uint32_t bswap(uint32_t val) {
  __asm__(&quot;bswap %0&quot; : &quot;=r&quot; (val) : &quot;0&quot; (val));
  return val;
}

inline uint64_t bswap64(uint64_t val) {
#ifdef __X64
  __asm__(&quot;bswapq %0&quot; : &quot;=r&quot; (val) : &quot;0&quot; (val));
#else

  uint64_t lower = val &amp;amp; 0xffffffffU;
  uint32_t higher = (val &amp;gt;&amp;gt; 32) &amp;amp; 0xffffffffU;

  lower = bswap(lower);
  higher = bswap(higher);

  return (lower &amp;lt;&amp;lt; 32) + higher;

#endif
  return val;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following also fails in&lt;/p&gt;

&lt;p&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/Checksum.cc&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;static uint32_t cpuid(uint32_t eax_in) {
  uint32_t eax, ebx, ecx, edx;
#  if defined(__PIC__) &amp;amp;&amp;amp; !defined(__LP64__)
// 32-bit PIC code uses the ebx register for the base offset --
// have to save and restore it on the stack
  asm(&quot;pushl %%ebx\n\t&quot;
      &quot;cpuid\n\t&quot;
      &quot;movl %%ebx, %[ebx]\n\t&quot;
      &quot;popl %%ebx&quot; : &quot;=a&quot; (eax), [ebx] &quot;=r&quot;(ebx), &quot;=c&quot;(ecx), &quot;=d&quot;(edx) : &quot;a&quot; (eax_in) 
      : &quot;cc&quot;);
#  else
  asm(&quot;cpuid&quot; : &quot;=a&quot; (eax), &quot;=b&quot;(ebx), &quot;=c&quot;(ecx), &quot;=d&quot;(edx) : &quot;a&quot;(eax_in)
      : &quot;cc&quot;);
#  endif

  return ecx;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;ARM aarch64 development board&lt;/p&gt;</environment>
        <key id="12767754">HADOOP-11484</key>
            <summary>hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enevill">Edward Nevill</assignee>
                                    <reporter username="enevill">Edward Nevill</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jan 2015 15:34:15 +0000</created>
                <updated>Thu, 12 May 2016 18:23:22 +0000</updated>
                            <resolved>Wed, 21 Jan 2015 19:32:56 +0000</resolved>
                                                    <fixVersion>3.0.0-alpha1</fixVersion>
                                    <component>native</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14278955" author="hadoopqa" created="Thu, 15 Jan 2015 17:14:31 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12692544/HADOOP-11484.001.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12692544/HADOOP-11484.001.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision ce29074.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5413//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5413//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5413//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5413//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14286109" author="cmccabe" created="Wed, 21 Jan 2015 19:22:38 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;btw, this should be against &quot;3.0&quot;, not &quot;trunk-win&quot;... the latter branch is not being used any more.&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="14286133" author="hudson" created="Wed, 21 Jan 2015 19:34:20 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #6903 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/6903/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/6903/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;. hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements (Edward Nevill via Colin P. McCabe) (cmccabe: rev 220a49de479a632068ad37f11c6cdd17327dacd9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/primitives.h&lt;/li&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/Checksum.cc&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14286147" author="hudson" created="Wed, 21 Jan 2015 19:42:52 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-trunk-Commit #6904 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/6904/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/6904/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;: move CHANGES.txt entry to 3.0 (cmccabe: rev 39c1bcf7d9c9331d25ca0aded85a293df04e0b52)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14287229" author="hudson" created="Thu, 22 Jan 2015 10:42:38 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #81 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/81/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/81/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;. hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements (Edward Nevill via Colin P. McCabe) (cmccabe: rev 220a49de479a632068ad37f11c6cdd17327dacd9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/Checksum.cc&lt;/li&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/primitives.h&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;: move CHANGES.txt entry to 3.0 (cmccabe: rev 39c1bcf7d9c9331d25ca0aded85a293df04e0b52)&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14287246" author="hudson" created="Thu, 22 Jan 2015 10:45:08 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #815 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/815/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/815/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;. hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements (Edward Nevill via Colin P. McCabe) (cmccabe: rev 220a49de479a632068ad37f11c6cdd17327dacd9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/Checksum.cc&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/primitives.h&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;: move CHANGES.txt entry to 3.0 (cmccabe: rev 39c1bcf7d9c9331d25ca0aded85a293df04e0b52)&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14287351" author="stevel@apache.org" created="Thu, 22 Jan 2015 12:40:52 +0000"  >&lt;p&gt;this looks like it addresses the ARM compile issue (we&apos;ll have to trust you that it works), but there&apos;s some asm code in the &lt;tt&gt;bswap&lt;/tt&gt; method that isn&apos;t ifdef&apos;d out on non-x86 systems.&lt;/p&gt;

&lt;p&gt;Is there an easy way to downgrade to non-ASM alternatives on other CPU families, so make sure this patch helps compilation on all platforms?&lt;/p&gt;</comment>
                            <comment id="14287465" author="hudson" created="Thu, 22 Jan 2015 14:10:34 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #2013 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2013/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2013/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;. hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements (Edward Nevill via Colin P. McCabe) (cmccabe: rev 220a49de479a632068ad37f11c6cdd17327dacd9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/primitives.h&lt;/li&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/Checksum.cc&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;: move CHANGES.txt entry to 3.0 (cmccabe: rev 39c1bcf7d9c9331d25ca0aded85a293df04e0b52)&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14287483" author="hudson" created="Thu, 22 Jan 2015 14:21:24 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #78 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/78/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/78/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;. hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements (Edward Nevill via Colin P. McCabe) (cmccabe: rev 220a49de479a632068ad37f11c6cdd17327dacd9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/Checksum.cc&lt;/li&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/primitives.h&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;: move CHANGES.txt entry to 3.0 (cmccabe: rev 39c1bcf7d9c9331d25ca0aded85a293df04e0b52)&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14287560" author="hudson" created="Thu, 22 Jan 2015 15:10:58 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #82 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/82/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/82/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;. hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements (Edward Nevill via Colin P. McCabe) (cmccabe: rev 220a49de479a632068ad37f11c6cdd17327dacd9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/Checksum.cc&lt;/li&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/primitives.h&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;: move CHANGES.txt entry to 3.0 (cmccabe: rev 39c1bcf7d9c9331d25ca0aded85a293df04e0b52)&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14287592" author="hudson" created="Thu, 22 Jan 2015 15:23:50 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #2032 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2032/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2032/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;. hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements (Edward Nevill via Colin P. McCabe) (cmccabe: rev 220a49de479a632068ad37f11c6cdd17327dacd9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/primitives.h&lt;/li&gt;
	&lt;li&gt;hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/Checksum.cc&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11484&quot; title=&quot;hadoop-mapreduce-client-nativetask fails to build on ARM AARCH64 due to x86 asm statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11484&quot;&gt;&lt;del&gt;HADOOP-11484&lt;/del&gt;&lt;/a&gt;: move CHANGES.txt entry to 3.0 (cmccabe: rev 39c1bcf7d9c9331d25ca0aded85a293df04e0b52)&lt;/li&gt;
	&lt;li&gt;hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14288177" author="cmccabe" created="Thu, 22 Jan 2015 20:38:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;this looks like it addresses the ARM compile issue (we&apos;ll have to trust you that it works), but there&apos;s some asm code in the bswap method that isn&apos;t ifdef&apos;d out on non-x86 systems.  Is there an easy way to downgrade to non-ASM alternatives on other CPU families, so make sure this patch helps compilation on all platforms?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Edit: Good find.  I have filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11505&quot; title=&quot;Various native parts use bswap incorrectly and unportably&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11505&quot;&gt;HADOOP-11505&lt;/a&gt; to fix this.&lt;/p&gt;</comment>
                            <comment id="14545279" author="gkasap" created="Fri, 15 May 2015 10:31:22 +0000"  >&lt;p&gt;Hello,&lt;br/&gt;
I&apos;ve used gcc&apos;s __builtin_bswap instead. &lt;/p&gt;

&lt;p&gt;+++ ./src/main/native/src/lib/primitives.h	2015-05-08 16:52:22.568992860 +0300&lt;br/&gt;
@@ -97,13 +97,15 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;little-endian to big-endian or vice versa&lt;br/&gt;
  */&lt;br/&gt;
 inline uint32_t bswap(uint32_t val) 
{
-  __asm__(&quot;bswap %0&quot; : &quot;=r&quot; (val) : &quot;0&quot; (val));
+//  __asm__(&quot;bswap %0&quot; : &quot;=r&quot; (val) : &quot;0&quot; (val));
+  val=__builtin_bswap32 (val);
   return val;
 }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; inline uint64_t bswap64(uint64_t val) {&lt;br/&gt;
 #ifdef __X64&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;_&lt;em&gt;asm&lt;/em&gt;_(&quot;bswapq %0&quot; : &quot;=r&quot; (val) : &quot;0&quot; (val));&lt;br/&gt;
+//  _&lt;em&gt;asm&lt;/em&gt;_(&quot;bswapq %0&quot; : &quot;=r&quot; (val) : &quot;0&quot; (val));&lt;br/&gt;
+  val=__builtin_bswap64(val);&lt;br/&gt;
 #else&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   uint64_t lower = val &amp;amp; 0xffffffffU;&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12840797">MAPREDUCE-6417</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12692544" name="HADOOP-11484.001.patch" size="2149" author="enevill" created="Thu, 15 Jan 2015 16:33:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24exr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>