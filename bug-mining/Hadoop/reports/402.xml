<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:36:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-7771] NPE when running hdfs dfs -copyToLocal, -get etc</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-7771</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;NPE when running hdfs dfs -copyToLocal if the destination directory does not exist. The behavior in branch-0.20-security is to create the directory and copy/get the contents from source.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528886">HADOOP-7771</key>
            <summary>NPE when running hdfs dfs -copyToLocal, -get etc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johnvijoe">John George</assignee>
                                    <reporter username="johnvijoe">John George</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2011 13:32:24 +0000</created>
                <updated>Fri, 19 Jul 2013 03:15:53 +0000</updated>
                            <resolved>Tue, 1 Nov 2011 01:55:08 +0000</resolved>
                                    <version>0.23.0</version>
                    <version>0.24.0</version>
                                    <fixVersion>0.23.0</fixVersion>
                    <fixVersion>0.24.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13135969" author="johnvijoe" created="Wed, 26 Oct 2011 13:33:04 +0000"  >&lt;p&gt;$ hadoop fs -copyToLocal /tmp/tryout /tmp/thisisit.2&lt;br/&gt;
copyToLocal: Fatal internal error&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
at org.apache.hadoop.fs.shell.PathData.getPathDataForChild(PathData.java:182)&lt;br/&gt;
at org.apache.hadoop.fs.shell.CommandWithDestination.processPaths(CommandWithDestination.java:115)&lt;br/&gt;
at org.apache.hadoop.fs.shell.Command.recursePath(Command.java:329)&lt;br/&gt;
at org.apache.hadoop.fs.shell.Command.processPaths(Command.java:302)&lt;br/&gt;
at org.apache.hadoop.fs.shell.CommandWithDestination.processPaths(CommandWithDestination.java:116)&lt;br/&gt;
at org.apache.hadoop.fs.shell.Command.processPathArgument(Command.java:272)&lt;br/&gt;
at org.apache.hadoop.fs.shell.Command.processArgument(Command.java:255)&lt;br/&gt;
at org.apache.hadoop.fs.shell.Command.processArguments(Command.java:239)&lt;br/&gt;
at org.apache.hadoop.fs.shell.CommandWithDestination.processArguments(CommandWithDestination.java:105)&lt;br/&gt;
at org.apache.hadoop.fs.shell.Command.processRawArguments(Command.java:185)&lt;br/&gt;
at org.apache.hadoop.fs.shell.Command.run(Command.java:149)&lt;br/&gt;
at org.apache.hadoop.fs.FsShell.run(FsShell.java:254)&lt;br/&gt;
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:69)&lt;br/&gt;
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:83)&lt;br/&gt;
at org.apache.hadoop.fs.FsShell.main(FsShell.java:296)&lt;/p&gt;</comment>
                            <comment id="13135982" author="hadoopqa" created="Wed, 26 Oct 2011 13:45:36 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12500881/HADOOP-7771.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12500881/HADOOP-7771.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed the unit tests build&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/317//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/317//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/317//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/317//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/317//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/317//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13136041" author="johnvijoe" created="Wed, 26 Oct 2011 15:29:24 +0000"  >&lt;p&gt;I dont think the core test failure is related. Common builds have been failing on core tests and findbugs for sometime now.&lt;br/&gt;
I ran mvn clean install -Pdist -Dtar -Ptest-patch on my desktop and the build succeeded.&lt;/p&gt;</comment>
                            <comment id="13136194" author="daryn" created="Wed, 26 Oct 2011 18:25:37 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; object does not exist or is not a directory
    */
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; PathData getPathDataForChild(PathData child) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
-    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!stat.isDirectory()) {
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (exists &amp;amp;&amp;amp; !stat.isDirectory()) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the javadoc is true, I think should be:&lt;br/&gt;
&lt;tt&gt;if (!exists || !stat.isDirectory())&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;The use of &lt;tt&gt;isDstDir&lt;/tt&gt; appears wrong and is duplication of most of the prior logic.  Why is this flag used to force &lt;tt&gt;processPath()&lt;/tt&gt; to treat all recursive destinations as directories if the top level dest is a directory?  Especially if there&apos;s 1 source dir arg?  This method is invoked recursive so I&apos;m not sure why it assumes everything is a directory if the top level dst is a directory?&lt;/p&gt;

&lt;p&gt;Are you sure the &lt;tt&gt;PathData&lt;/tt&gt; change isn&apos;t all that&apos;s needed?&lt;/p&gt;</comment>
                            <comment id="13136298" author="johnvijoe" created="Wed, 26 Oct 2011 20:07:32 +0000"  >&lt;blockquote&gt;
&lt;p&gt;If the javadoc is true, I think should be:&lt;br/&gt;
&lt;tt&gt;if (!exists || !stat.isDirectory())&lt;/tt&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The purpose here is to ensure that destination is a directory and not a file. So previously when we checked for &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!stat.isDirectory())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;all we were trying to do was to ensure that the destination is a directory. The issue is that &lt;tt&gt;stat&lt;/tt&gt; could be null and so all that the check &lt;tt&gt;exist&lt;/tt&gt; does is to ensure that &lt;tt&gt;stat&lt;/tt&gt; is not null before we even check if it is directory or not! Hence, I believe the check &lt;tt&gt;if (exists &amp;amp;&amp;amp; !stat.isDirectory())&lt;/tt&gt; is the right check.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the destination is a directory, make target a child path,
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; use the destination as-is
&lt;/span&gt;-    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (dst.exists &amp;amp;&amp;amp; dst.stat.isDirectory()) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here, (previously) the check for destination succeeded only if the &apos;dst&apos; already existed. With the new code, it ensures that we detect that the destination is a directory even in cases where the destination does not exist. The logic does not change at all. Am I missing something obvious?&lt;/p&gt;

&lt;p&gt;Daryn,&lt;br/&gt;
Can you elaborate on what you mean by &quot;The use of isDstDir appears wrong and is duplication of most of the prior logic. &quot;? I would definitely like to reuse the logic if it already exists. Could you give me a cleared idea as to what you mean?&lt;/p&gt;</comment>
                            <comment id="13138608" author="jnp" created="Fri, 28 Oct 2011 18:16:05 +0000"  >&lt;p&gt;Please add comment regarding what isDstDir means.&lt;br/&gt;
In the test, what is the reason behind changing the standard error stream?&lt;/p&gt;</comment>
                            <comment id="13138660" author="johnvijoe" created="Fri, 28 Oct 2011 19:14:07 +0000"  >&lt;p&gt;attaching a patch based on Jitendra&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13138721" author="jnp" created="Fri, 28 Oct 2011 20:26:38 +0000"  >&lt;p&gt;Many methods are updating the value of dst, isDstDir should also be updated in those places.&lt;/p&gt;</comment>
                            <comment id="13138839" author="johnvijoe" created="Fri, 28 Oct 2011 22:04:29 +0000"  >&lt;p&gt;Attaching another patch based on Jitendra&apos;s latest comments.&lt;/p&gt;</comment>
                            <comment id="13138852" author="daryn" created="Fri, 28 Oct 2011 22:18:57 +0000"  >&lt;p&gt;This is not the right approach.  I had the problem fixed many months ago, but lost the patch.  I&apos;ll have a version up shortly.&lt;/p&gt;</comment>
                            <comment id="13138970" author="daryn" created="Fri, 28 Oct 2011 23:44:11 +0000"  >&lt;p&gt;Fixing the NPE exposes nasty underlying problems when getting directories.  Will take me a bit longer to remember what I did.  Patch will be up this weekend.&lt;/p&gt;</comment>
                            <comment id="13139125" author="johnvijoe" created="Sat, 29 Oct 2011 05:50:12 +0000"  >&lt;p&gt;attaching a patch with a different approach. Using processPath to verify that a directory needs to be created or not... this avoiding the use of isDstDir&lt;/p&gt;</comment>
                            <comment id="13139137" author="johnvijoe" created="Sat, 29 Oct 2011 06:46:51 +0000"  >&lt;p&gt;This patch removes two unnecessary functions in CommandWithDestination as pointed by Jitendra. This is specific to -get and -copyToLocal commands. This fixes the NPE and the functionality of these two commands. &lt;/p&gt;</comment>
                            <comment id="13139139" author="hadoopqa" created="Sat, 29 Oct 2011 06:54:37 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501434/HADOOP-7771.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501434/HADOOP-7771.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/340//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/340//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13139867" author="jnp" created="Mon, 31 Oct 2011 02:27:58 +0000"  >&lt;p&gt; The new approach taken in John&apos;s latest patch looks good to me. It seems the patch needs to be updated against the latest trunk, apart from that I am +1 for the patch. &lt;/p&gt;

&lt;p&gt;Daryn,&lt;br/&gt;
  Are you ok with the latest patch?&lt;/p&gt;</comment>
                            <comment id="13139884" author="daryn" created="Mon, 31 Oct 2011 03:19:16 +0000"  >&lt;p&gt;Fixes the NPE and also the recursion issues that cause paths to erroneously be copied into existing subdirs in the remote tree.  It looks worse than it is, but most of it is moving common code into &lt;tt&gt;CommandWithDestination&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;HDFS tests need to be updated, but &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2038&quot; title=&quot;Update test to handle relative paths with globs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2038&quot;&gt;&lt;del&gt;HDFS-2038&lt;/del&gt;&lt;/a&gt; has them temporarily broken.  I&apos;ve extensively tested via cmdline.&lt;/p&gt;</comment>
                            <comment id="13139890" author="hadoopqa" created="Mon, 31 Oct 2011 03:33:08 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501556/HADOOP-7771.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501556/HADOOP-7771.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 7 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/342//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/342//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/342//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/342//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/342//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/342//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13140173" author="daryn" created="Mon, 31 Oct 2011 14:07:26 +0000"  >&lt;p&gt;Findbugs warnings are unrelated to this patch.&lt;/p&gt;</comment>
                            <comment id="13140493" author="daryn" created="Mon, 31 Oct 2011 19:48:07 +0000"  >&lt;p&gt;John&apos;s patch introduces at least these bugs:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Copy multiple args to a non-existent destination is supposed to fail.  The patch auto-creates the destination as a directory, thus shorting out the check in the parent class.  Ex. &quot;fs -cp f1 f2 f3 dir&quot; should fail if dir doesn&apos;t exist, the patch changed it to succeed.&lt;/li&gt;
	&lt;li&gt;If the source is a directory, and the destination doesn&apos;t exist, then the source is effectively supposed to be renamed as the destination.  The auto-creates the destination as a directory and copies the source into the destination.  Ex. &quot;fs -get dir does-not-exist&quot; should create &quot;does-not-exist&quot; with the contents of &quot;dir&quot;.  This patch creates &quot;does-not-exist/dir&quot;.&lt;/li&gt;
	&lt;li&gt;If a directory is copied to a file, the exception thrown is not using the PathData string.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In effect, we are adding bugs, and trading a NPE with copying to the wrong destination, so it&apos;s a wash as far as testing is concerned.&lt;/p&gt;

&lt;p&gt;FWIW, early this year, I ported all this copy/move code as part of the FsShell redesign.  I realized I introduced bugs way back in June or July and prepared a patch.  I thought I lost the patch, so John started working this jira, but I dug it up the patch this weekend.  I stripped out all the extra functionality that was added in that patch and posted the result.&lt;/p&gt;</comment>
                            <comment id="13140506" author="daryn" created="Mon, 31 Oct 2011 20:04:25 +0000"  >&lt;p&gt;Another bug that I fixed is &quot;fs -get dir existing-dir&quot; should create &quot;existing-dir/dir&quot;.  But if &quot;existing-dir/dir&quot; exists too, it creates &quot;existing-dir/dir/dir&quot;.&lt;/p&gt;</comment>
                            <comment id="13140794" author="szetszwo" created="Tue, 1 Nov 2011 01:44:23 +0000"  >&lt;p&gt;+1 patch looks good.&lt;/p&gt;</comment>
                            <comment id="13140803" author="hudson" created="Tue, 1 Nov 2011 01:54:22 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #1291 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1291/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1291/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7771&quot; title=&quot;NPE when running hdfs dfs -copyToLocal, -get etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7771&quot;&gt;&lt;del&gt;HADOOP-7771&lt;/del&gt;&lt;/a&gt;. FsShell -copyToLocal, -get, etc. commands throw NPE if the destination directory does not exist.  Contributed by John George and Daryn Sharp&lt;/p&gt;

&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CommandWithDestination.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CopyCommands.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/PathData.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13140805" author="hudson" created="Tue, 1 Nov 2011 01:54:57 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #1215 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1215/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1215/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7771&quot; title=&quot;NPE when running hdfs dfs -copyToLocal, -get etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7771&quot;&gt;&lt;del&gt;HADOOP-7771&lt;/del&gt;&lt;/a&gt;. FsShell -copyToLocal, -get, etc. commands throw NPE if the destination directory does not exist.  Contributed by John George and Daryn Sharp&lt;/p&gt;

&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CommandWithDestination.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CopyCommands.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/PathData.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13140806" author="szetszwo" created="Tue, 1 Nov 2011 01:55:08 +0000"  >&lt;p&gt;I have committed this.  Thanks, John and Daryn!&lt;/p&gt;</comment>
                            <comment id="13140820" author="hudson" created="Tue, 1 Nov 2011 02:04:24 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-0.23-Commit #122 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/122/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/122/&lt;/a&gt;)&lt;br/&gt;
    svn merge -c 1195760 from trunk for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7771&quot; title=&quot;NPE when running hdfs dfs -copyToLocal, -get etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7771&quot;&gt;&lt;del&gt;HADOOP-7771&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195762&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CommandWithDestination.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CopyCommands.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/PathData.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13140844" author="hudson" created="Tue, 1 Nov 2011 02:08:10 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-0.23-Commit #121 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-0.23-Commit/121/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-0.23-Commit/121/&lt;/a&gt;)&lt;br/&gt;
    svn merge -c 1195760 from trunk for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7771&quot; title=&quot;NPE when running hdfs dfs -copyToLocal, -get etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7771&quot;&gt;&lt;del&gt;HADOOP-7771&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195762&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CommandWithDestination.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CopyCommands.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/PathData.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13140856" author="hudson" created="Tue, 1 Nov 2011 02:18:57 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #1239 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1239/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1239/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7771&quot; title=&quot;NPE when running hdfs dfs -copyToLocal, -get etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7771&quot;&gt;&lt;del&gt;HADOOP-7771&lt;/del&gt;&lt;/a&gt;. FsShell -copyToLocal, -get, etc. commands throw NPE if the destination directory does not exist.  Contributed by John George and Daryn Sharp&lt;/p&gt;

&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CommandWithDestination.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CopyCommands.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/PathData.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13140868" author="hudson" created="Tue, 1 Nov 2011 02:42:16 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-0.23-Commit #129 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/129/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/129/&lt;/a&gt;)&lt;br/&gt;
    svn merge -c 1195760 from trunk for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7771&quot; title=&quot;NPE when running hdfs dfs -copyToLocal, -get etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7771&quot;&gt;&lt;del&gt;HADOOP-7771&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195762&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CommandWithDestination.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CopyCommands.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/PathData.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13141139" author="hudson" created="Tue, 1 Nov 2011 12:57:53 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #850 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/850/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/850/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7771&quot; title=&quot;NPE when running hdfs dfs -copyToLocal, -get etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7771&quot;&gt;&lt;del&gt;HADOOP-7771&lt;/del&gt;&lt;/a&gt;. FsShell -copyToLocal, -get, etc. commands throw NPE if the destination directory does not exist.  Contributed by John George and Daryn Sharp&lt;/p&gt;

&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CommandWithDestination.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CopyCommands.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/PathData.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13141173" author="hudson" created="Tue, 1 Nov 2011 13:21:38 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #884 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/884/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/884/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7771&quot; title=&quot;NPE when running hdfs dfs -copyToLocal, -get etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7771&quot;&gt;&lt;del&gt;HADOOP-7771&lt;/del&gt;&lt;/a&gt;. FsShell -copyToLocal, -get, etc. commands throw NPE if the destination directory does not exist.  Contributed by John George and Daryn Sharp&lt;/p&gt;

&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1195760&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CommandWithDestination.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/CopyCommands.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/PathData.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13229490" author="umamaheswararao" created="Wed, 14 Mar 2012 18:43:05 +0000"  >&lt;p&gt;Hi Daryn,&lt;br/&gt;
Looks this patch deletes the file if it fails to write completely.&lt;br/&gt;
I remember the old behavior was that the partial file still presents. I don&apos;t see any discussion about this behavior change here. Is this discussed somewhere?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      tempFile = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tempFile != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        tempFile.fs.delete(tempFile.path, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13229590" author="daryn" created="Wed, 14 Mar 2012 20:34:02 +0000"  >&lt;p&gt;The former behavior for some of the copy commands was to begin overwriting the target file.  This jira commonized the copy code in FsShell since it was inconsistent and buggy.  The existing code that I standardized on copies into a temp file, and then renames the temp file if the copy is successful.  If the copy fails, the temp file is deleted.&lt;/p&gt;

&lt;p&gt;Do you feel it would be useful to retain the temp file?&lt;/p&gt;</comment>
                            <comment id="13229908" author="umamaheswararao" created="Thu, 15 Mar 2012 05:31:19 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Do you feel it would be useful to retain the temp file?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;User will not about temp file paths right? Then there is not point in retaining temp files. Only concern is, In older version, if write fails also, other clients can read the file till where we have written the file successfully. Leter it may get recovered and closed.&lt;br/&gt;
But now we are completely invalidating that finalized blocks on write failure.&lt;/p&gt;

&lt;p&gt;Also other point is, what if client abuptly shutdown? I think temp files will not be cleaned forever right? &lt;/p&gt;


&lt;p&gt;Regards,&lt;br/&gt;
Uma&lt;/p&gt;</comment>
                            <comment id="13229911" author="umamaheswararao" created="Thu, 15 Mar 2012 05:35:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do you feel it would be useful to retain the temp file?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;User will not know about temp file paths right? Then there is not point in retaining temp files. Only concern is, In older version, if write fails also, other clients can read the file till where we have written the file successfully. Later it may get recovered and closed.&lt;br/&gt;
But now we are completely invalidating that finalized blocks on write failure.&lt;/p&gt;

&lt;p&gt;Also other point is, what if client abuptly shutdown? I think temp files will not be cleaned forever right? &lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Uma&lt;/p&gt;</comment>
                            <comment id="13230188" author="daryn" created="Thu, 15 Mar 2012 14:14:15 +0000"  >&lt;p&gt;Yes, I wouldn&apos;t expect users to know or care about temp files.  I don&apos;t recall which of all the copy variants already had this behavior but I standardized it across the copy commands.  Distcp has similar behavior, although I think it copies into a temp subdir.  Maybe it would make sense to mimic what it does?&lt;/p&gt;

&lt;p&gt;It&apos;s true that users could read the partial files, but I question if users would expect a partial file in the vast majority of use cases.  Let&apos;s say a copy failed, the user didn&apos;t check the exit code possibly because 20x exit codes were unreliable, and then attempted to run a job.  The job might &quot;succeed&quot; to process the partial data but produce erroneous results.  Users might be baffled that re-running the job produces different results.  A dev may go on a wild goose chase and resolve as &quot;works for me&quot; when they can&apos;t reproduce.&lt;/p&gt;

&lt;p&gt;If the client is interrupted by a signal, then it often used to leave a temp file because the signal wasn&apos;t breaking out correctly and affecting the shutdown hooks.  I recently fixed that.  I&apos;ve been meaning to investigation/reproduce/fix a few user reports that temp files are still sometimes left around.  If you do a hard kill (-9), then of course there&apos;s nothing that can be done unless the NN has a notion of this &quot;this file should be deleted unless I explicitly close it&quot;.&lt;/p&gt;

&lt;p&gt;What are your thoughts?&lt;/p&gt;</comment>
                            <comment id="13709586" author="sarutak" created="Tue, 16 Jul 2013 08:02:35 +0000"  >&lt;p&gt;In this jira, the name of the temp file has the suffix &quot;.&lt;em&gt;COPYING&lt;/em&gt;&quot; but I think it can cause a bad effect when we run mapreduce.&lt;br/&gt;
When we run mapreduce, temp files should be ignored so we need to consider the name of the temp file.&lt;br/&gt;
If you have no objections, I will create a jira about that.&lt;/p&gt;</comment>
                            <comment id="13709726" author="daryn" created="Tue, 16 Jul 2013 12:44:05 +0000"  >&lt;p&gt;What is your alternate idea for handling of temp files?&lt;/p&gt;</comment>
                            <comment id="13709745" author="sarutak" created="Tue, 16 Jul 2013 13:12:41 +0000"  >&lt;p&gt;Naming the temp file starting with &quot;.&quot; or &quot;_&quot; so that mapreduce can ignore it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12522938">HADOOP-7632</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12658685">HADOOP-9750</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12529484">HDFS-2516</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12501556" name="HADOOP-7771.patch" size="14716" author="daryn" created="Mon, 31 Oct 2011 03:19:16 +0000"/>
                            <attachment id="12501434" name="HADOOP-7771.patch" size="4127" author="johnvijoe" created="Sat, 29 Oct 2011 06:46:51 +0000"/>
                            <attachment id="12501432" name="HADOOP-7771.patch" size="5129" author="johnvijoe" created="Sat, 29 Oct 2011 05:50:12 +0000"/>
                            <attachment id="12501380" name="HADOOP-7771.patch" size="5080" author="johnvijoe" created="Fri, 28 Oct 2011 22:04:29 +0000"/>
                            <attachment id="12501343" name="HADOOP-7771.patch" size="4151" author="johnvijoe" created="Fri, 28 Oct 2011 19:14:07 +0000"/>
                            <attachment id="12500881" name="HADOOP-7771.patch" size="4294" author="johnvijoe" created="Wed, 26 Oct 2011 13:34:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214746</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09irj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>53473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>