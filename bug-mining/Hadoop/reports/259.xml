<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:34:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-7156] getpwuid_r is not thread-safe on RHEL6</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-7156</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Due to the following bug in SSSD, functions like getpwuid_r are not thread-safe in RHEL 6.0 if sssd is specified in /etc/nsswitch.conf (as it is by default):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://fedorahosted.org/sssd/ticket/640&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fedorahosted.org/sssd/ticket/640&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This causes many fetch failures in the case that the native libraries are available, since the SecureIO functions call getpwuid_r as part of fstat. By enabling -Xcheck:jni I get the following trace on JVM crash:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;glibc detected *** /mnt/toolchain/JDK6u20-64bit/bin/java: free(): invalid pointer: 0x0000003575741d23 ***&lt;br/&gt;
======= Backtrace: =========&lt;br/&gt;
/lib64/libc.so.6&lt;span class=&quot;error&quot;&gt;&amp;#91;0x3575675676&amp;#93;&lt;/span&gt;&lt;br/&gt;
/lib64/libnss_sss.so.2(_nss_sss_getpwuid_r+0x11b)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x7fe716cb42cb&amp;#93;&lt;/span&gt;&lt;br/&gt;
/lib64/libc.so.6(getpwuid_r+0xdd)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x35756a5dfd&amp;#93;&lt;/span&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;RHEL 6.0 &quot;Santiago&quot;&lt;/p&gt;</environment>
        <key id="12499682">HADOOP-7156</key>
            <summary>getpwuid_r is not thread-safe on RHEL6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tlipcon">Todd Lipcon</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Feb 2011 09:23:13 +0000</created>
                <updated>Mon, 12 Dec 2011 06:19:30 +0000</updated>
                            <resolved>Fri, 11 Mar 2011 18:45:33 +0000</resolved>
                                    <version>0.22.0</version>
                                    <fixVersion>0.22.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="12999284" author="tlipcon" created="Fri, 25 Feb 2011 09:35:49 +0000"  >&lt;p&gt;Filed a RHEL bug at: &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=680367&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=680367&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In the meantime we might consider adding a mutex around this call which can be #ifdeffed in on this platform as a workaround.&lt;/p&gt;</comment>
                            <comment id="13001694" author="tlipcon" created="Wed, 2 Mar 2011 21:52:18 +0000"  >&lt;p&gt;Here&apos;s a heinous workaround for this issue:&lt;/p&gt;

&lt;p&gt;When initializing the native library, we check for the problematic nss module - if it&apos;s on the system, we&apos;re likely to run into this issue, so it adds a lock around the getpwuid_r calls.&lt;/p&gt;


&lt;p&gt;Do people think this hack is the right approach? My other thought was to add a new boolean config flag like hadoop.nativeio.workaround.hadoop7156 or some nonsense like that, and if that flag is set, add the monitor lock.&lt;/p&gt;</comment>
                            <comment id="13001702" author="tlipcon" created="Wed, 2 Mar 2011 22:01:10 +0000"  >&lt;p&gt;Another possibility is to look in /etc/redhat-release and match the contents against known-buggy releases.&lt;/p&gt;</comment>
                            <comment id="13002046" author="aw" created="Thu, 3 Mar 2011 16:25:40 +0000"  >&lt;p&gt;Again, we&apos;re patching around a particular bug in a particular OS, just as we did in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7115&quot; title=&quot;Add a cache for getpwuid_r and getpwgid_r calls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7115&quot;&gt;&lt;del&gt;HADOOP-7115&lt;/del&gt;&lt;/a&gt;.  This trend is very disturbing.  &lt;/p&gt;

&lt;p&gt;If we really want to go down this road, then yes, this should be compile time.  But for now, I&apos;d rather just advertise &quot;RHEL 6.0 is broken; don&apos;t use it&quot; just like we do for JREs. &lt;/p&gt;</comment>
                            <comment id="13002903" author="tlipcon" created="Sat, 5 Mar 2011 01:43:26 +0000"  >&lt;p&gt;Apparently no one out there who implements pam modules knows that getpwuid_r is supposed to be reentrant &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; A user saw this same issue with VAS:&lt;/p&gt;

&lt;p&gt;/lib64/libc.so.6&lt;span class=&quot;error&quot;&gt;&amp;#91;0x3757c7230f&amp;#93;&lt;/span&gt;&lt;br/&gt;
/lib64/libc.so.6(cfree+0x4b)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x3757c7276b&amp;#93;&lt;/span&gt;&lt;br/&gt;
/opt/quest/lib64/libvas.so.4(vassym_sqlite3FreeX+0xe)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab2bd15e&amp;#93;&lt;/span&gt;&lt;br/&gt;
/opt/quest/lib64/libvas.so.4&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab2ac9b9&amp;#93;&lt;/span&gt;&lt;br/&gt;
/opt/quest/lib64/libvas.so.4(vassym_sqlite3OsClose+0x93)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab2ad6d3&amp;#93;&lt;/span&gt;&lt;br/&gt;
/opt/quest/lib64/libvas.so.4(vassym_sqlite3pager_close+0x4d)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab2af1cd&amp;#93;&lt;/span&gt;&lt;br/&gt;
/opt/quest/lib64/libvas.so.4(vassym_sqlite3BtreeClose+0x15)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab29a235&amp;#93;&lt;/span&gt;&lt;br/&gt;
/opt/quest/lib64/libvas.so.4(vassym_sqlite3_close+0x15b)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab2ab62b&amp;#93;&lt;/span&gt;&lt;br/&gt;
/opt/quest/lib64/libvas.so.4(vassql_deinit+0xdf)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab3158de&amp;#93;&lt;/span&gt;&lt;br/&gt;
/opt/quest/lib64/libvas.so.4&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab2f3ef9&amp;#93;&lt;/span&gt;&lt;br/&gt;
/opt/quest/lib64/libvas.so.4(vascache_deinit+0x30)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab2f438f&amp;#93;&lt;/span&gt;&lt;br/&gt;
/lib64/libnss_vas3.so.2&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab027240&amp;#93;&lt;/span&gt;&lt;br/&gt;
/lib64/libnss_vas3.so.2(_nss_vas3_getXXent_release_tsd+0x10e)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab0284ff&amp;#93;&lt;/span&gt;&lt;br/&gt;
/lib64/libnss_vas3.so.2&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab02c3c0&amp;#93;&lt;/span&gt;&lt;br/&gt;
/lib64/libnss_vas3.so.2(_nss_vas3_getpwuid_r+0x36)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x2aaaab02d242&amp;#93;&lt;/span&gt;&lt;br/&gt;
/lib64/libc.so.6(getpwuid_r+0xa5)&lt;span class=&quot;error&quot;&gt;&amp;#91;0x3757c99515&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13003271" author="tlipcon" created="Mon, 7 Mar 2011 05:55:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;But for now, I&apos;d rather just advertise &quot;RHEL 6.0 is broken; don&apos;t use it&quot; just like we do for JREs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unfortunately many of us are not in a position to do this - RHEL 6.0 is a must for us, regardless of some bugs it might have. Same with support for Vintela Authentication Services (VAS) which has a similar bug. Asking users to switch their entire OS or auth system is not an option.&lt;/p&gt;

&lt;p&gt;I think there are three workable options here from my perspective:&lt;/p&gt;

&lt;p&gt;1) Always lock around getpwuid_r. Devaraj is added a cache for this function as part of another JIRA, so it shouldn&apos;t be a big performance issue.&lt;br/&gt;
2) Add a compile-time macro like LOCK_AROUND_PWUID, which, when set, will add the monitor lock around these calls.&lt;br/&gt;
3) Add a runtime Hadoop configuration option like hadoop.workaround.broken.getpwuid, which when enabled adds the lock.&lt;/p&gt;

&lt;p&gt;Which, if any, of these seem acceptable to you?&lt;/p&gt;

&lt;p&gt;Since we&apos;ve found that this isn&apos;t RHEL6 specific, but in fact occurs with other broken pieces of software as well, I&apos;m leaning towards option #1 or #3.&lt;/p&gt;</comment>
                            <comment id="13003453" author="aw" created="Mon, 7 Mar 2011 17:25:30 +0000"  >&lt;p&gt;If someone wants to use non-conforming software, that is their problem, not ours.  I&apos;d much rather shame a company into fixing it than pretending that everything is a-ok.  Yes, I realize that is idealistic.&lt;/p&gt;

&lt;p&gt;In the case of RHEL 6, it is what? 2 months old?  Like any .0, it is going to have growing pains during its first few months that should get fixed by the vendor.  As for VAS, I&apos;m not really sure I care.&lt;/p&gt;

&lt;p&gt;In the case of #1, what is the point of mutexes around a thread-safe function?  Why not just call the unsafe one and avoid the extra performance hit on machines that follow POSIX?&lt;/p&gt;

&lt;p&gt;In the case of #3, I&apos;ll be OK with this if we also add a huge warning in the task log telling the user that their system isn&apos;t POSIX compliant and to call their vendor to get it fixed. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="13003787" author="tlipcon" created="Tue, 8 Mar 2011 02:23:02 +0000"  >&lt;p&gt;I&apos;ll assume you&apos;re joking about the &quot;huge warning&quot; and implement option #3. Thanks Allen.&lt;/p&gt;</comment>
                            <comment id="13003793" author="tlipcon" created="Tue, 8 Mar 2011 02:53:38 +0000"  >&lt;p&gt;Here&apos;s a patch which implements the configuration option.&lt;/p&gt;

&lt;p&gt;I did not add it to core-default since it&apos;s a corner case... does that seem reasonable or should it be documented?&lt;/p&gt;</comment>
                            <comment id="13003796" author="roelofs" created="Tue, 8 Mar 2011 03:26:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;I did not add it to core-default since it&apos;s a corner case... does that seem reasonable or should it be documented?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Please please please...always document things like this. Picture it from the perspective of some new user who hasn&apos;t discovered the lists yet (or hasn&apos;t been subscribed for very long, and then only on the -user list(s)): they know they&apos;re running RHEL-6 and probably will notice a config item that explicitly mentions it (which I&apos;d recommend, along with CentOS and any other known distro versions), but they&apos;re much less likely to know what&apos;s up with a random glibc crash several months later.&lt;/p&gt;</comment>
                            <comment id="13004147" author="tlipcon" created="Tue, 8 Mar 2011 19:28:05 +0000"  >&lt;p&gt;Updated version includes docs in core-default.xml&lt;/p&gt;

&lt;p&gt;Do you agree with the current test case? It will fail with JVM exit on RHEL6 currently. Should we set the workaround variable to true in the test settings?&lt;/p&gt;

&lt;p&gt;Another option is to add a bit of code to apply some regexes to /etc/redhat-release and enable by default if running RHEL or CentOS 6.&lt;/p&gt;</comment>
                            <comment id="13004195" author="aw" created="Tue, 8 Mar 2011 20:35:51 +0000"  >&lt;p&gt;&amp;gt; have broken implementations of &lt;/p&gt;

&lt;p&gt;Let&apos;s call it for what it is: POSIX non-compliance.&lt;/p&gt;

&lt;p&gt;&amp;gt; Systems known to exhibit this issue include Red Hat Enterprise Linux 6.0,&lt;br/&gt;
&amp;gt; CentOS 6.0, and Vintela Authentication Services.&lt;/p&gt;

&lt;p&gt;Why is this text in here?  What happens when RHEL 6 gets this fixed? Do we make a new release to pull the text out?  To me, it makes much more sense to include a link to a wiki page where we can keep the information up-to-date.&lt;/p&gt;
</comment>
                            <comment id="13004197" author="tlipcon" created="Tue, 8 Mar 2011 20:39:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;What happens when RHEL 6 gets this fixed&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That will be RHEL 6.1, not RHEL 6.0. So this should remain accurate.&lt;br/&gt;
Happy to change &quot;Vintela Authentication Services&quot; to &quot;some version of Vintela Authentication Services&quot;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;it makes much more sense to include a link to a wiki page where we can keep the information up-to-date&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In my experience, we do a really bad job of keeping the wiki up to date. Greg, what do you think?&lt;/p&gt;</comment>
                            <comment id="13004209" author="eli" created="Tue, 8 Mar 2011 20:58:19 +0000"  >&lt;p&gt;The approach and code look good to me. I would leave as is, no need to add autodetection, but we should document it in core-default so users are aware of the issue. &lt;/p&gt;

&lt;p&gt;I think leaving the workaround disabled for the tests is the right thing, this way it fails on a broken system which will help users identify that they need to enable the workaround.&lt;/p&gt;

&lt;p&gt;Also, the description seems appropriate to me, this isn&apos;t about POSIX compliance, it&apos;s just a bug in a library function, that will probably be fixed.&lt;/p&gt;</comment>
                            <comment id="13004258" author="roelofs" created="Tue, 8 Mar 2011 22:22:06 +0000"  >&lt;p&gt;Doh!  FF crashed while I was replying, sigh.  Switching to e-mail:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In my experience, we do a really bad job of keeping the wiki up to date. Greg, what do you think?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree--we&apos;re much better at keeping the code up to date (frequently in&lt;br/&gt;
parallel across multiple branches &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ) than at keeping the wiki current.&lt;/p&gt;

&lt;p&gt;I think the XML config text is fine; you could optionally prefix it with&lt;br/&gt;
&quot;As of March 2011, systems known to ...&quot; as a hint to users or future versions&lt;br/&gt;
of us to recheck it if significant time has passed.  The comment in NativeIO.c&lt;br/&gt;
probably should be modified; perhaps &quot;monitor used for working around a bug&lt;br/&gt;
in the sssd security daemon, which was observed in getpwuid_r() on RHEL 6.0,&quot;&lt;br/&gt;
or words to that effect.  (Need not be that verbose, of course.)&lt;/p&gt;

&lt;p&gt;I also agree with Eli that we can leave the workaround disabled for tests.&lt;br/&gt;
It might be worthwhile to add a log message at the start that &quot;this test&lt;br/&gt;
may fail (crash) with an invalid free() on some systems; see &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7156&quot; title=&quot;getpwuid_r is not thread-safe on RHEL6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7156&quot;&gt;&lt;del&gt;HADOOP-7156&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
for details.&quot;  Again, feel free to word it however you wish.&lt;/p&gt;

&lt;p&gt;Trivial grammo:  &quot;workaround&quot; is a noun; the verb form is &quot;work around&quot;&lt;br/&gt;
(similar to layout, backup, setup, cleanup, checkin, cutoff, etc.).  The&lt;br/&gt;
various variable names would be more proper if they reflected this (e.g.,&lt;br/&gt;
WORK_AROUND_NON_THREADSAFE_CALLS_KEY, workAroundNonThreadSafePasswdCalls&lt;br/&gt;
[or workAroundNonThreadsafePasswdCalls, since you&apos;re using &quot;threadsafe&quot;&lt;br/&gt;
as a single word elsewhere]), but I won&apos;t fuss if you leave them as is.&lt;/p&gt;</comment>
                            <comment id="13004271" author="aw" created="Tue, 8 Mar 2011 22:57:04 +0000"  >&lt;p&gt;&amp;gt; That will be RHEL 6.1, not RHEL 6.0. So this should remain accurate.&lt;/p&gt;

&lt;p&gt;If I rpm install just a new pam from the Red Hat repo, what version am I running?&lt;/p&gt;

&lt;p&gt;&amp;gt; I agree--we&apos;re much better at keeping the code up to date (frequently in&lt;br/&gt;
&amp;gt; parallel across multiple branches ) than at keeping the wiki current.&lt;/p&gt;

&lt;p&gt;Really?  We haven&apos;t had a release marked stable in over a year.  (Releases outside Apache do &lt;b&gt;not&lt;/b&gt; count.)&lt;/p&gt;
</comment>
                            <comment id="13004284" author="roelofs" created="Tue, 8 Mar 2011 23:32:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;Really?  We haven&apos;t had a release marked stable in over a year.  (Releases outside Apache do &lt;b&gt;not&lt;/b&gt; count.)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How many of the &quot;currently relevant&quot; wiki pages have been updated in that&lt;br/&gt;
year-plus?  (I haven&apos;t checked, but the one or two &quot;getting started&quot; ones&lt;br/&gt;
I looked at way back when were incomplete at best, and possibly wrong in&lt;br/&gt;
places, so I&apos;m guessing the answer is &quot;not many.&quot;  That&apos;s certainly been&lt;br/&gt;
my repeated experience with internal, corporate wikis.)&lt;/p&gt;

&lt;p&gt;In my experience, the farther the docs are from the code, the less likely&lt;br/&gt;
they are to be current and correct.  That doesn&apos;t mean there can&apos;t be&lt;br/&gt;
additional forms of non-repo docs, but docs within the source-code repo&lt;br/&gt;
should be the priority.  Many of us &lt;em&gt;live&lt;/em&gt; in the repo, employmentally&lt;br/&gt;
speaking.  (New word.  Cool.)&lt;/p&gt;</comment>
                            <comment id="13004300" author="aw" created="Wed, 9 Mar 2011 00:14:28 +0000"  >&lt;p&gt;&amp;gt;How many of the &quot;currently relevant&quot; wiki pages have been updated in &lt;br/&gt;
&amp;gt; that year-plus? &lt;/p&gt;

&lt;p&gt;Considering how little has changed since Apache 0.20.0 was released almost two years, not many because there was no need.&lt;/p&gt;

&lt;p&gt;This JIRA is a great example of something that will likely be long fixed before an actual Apache release with the fix sees the light of day.  Which is why I&apos;m mostly opposed to it going in, but not enough to -1 it.  I think we&apos;ll look like fools when a year down the road we have a reference to a bug that was long fixed, but whatever.&lt;/p&gt;

&lt;p&gt;&amp;gt; Many of us live in the repo, employmentally speaking. &lt;/p&gt;

&lt;p&gt;In other words, &quot;Who gives a damn about the people who are not running some form of trunk and are not watching JIRAs religiously.&quot;  &lt;/p&gt;</comment>
                            <comment id="13004333" author="roelofs" created="Wed, 9 Mar 2011 02:02:59 +0000"  >

&lt;p&gt;That wasn&apos;t my personal experience (with the setup-related ones), but&lt;br/&gt;
admittedly it&apos;s a tiny sample.&lt;/p&gt;


&lt;p&gt;Dude, I&apos;m still running a 2004-era distro on one of my desktop boxes!&lt;br/&gt;
Sure, that&apos;s unusual, but ancient servers in production definitely&lt;br/&gt;
aren&apos;t.  The more you have, the harder it is to validate and move to&lt;br/&gt;
a new version.  You&apos;ve got, what, a few hundred servers to worry about?&lt;br/&gt;
We&apos;ve got a few hundred thousand.  (Not all Hadoop-related, I mean, just&lt;br/&gt;
in general.)  I have no idea what the overall mix is, but I was aware of&lt;br/&gt;
both RHEL 5.x and 4.x subsets up until fairly recently (the latter also&lt;br/&gt;
being 2004-era; the former more like 2007, I think), and I wouldn&apos;t be&lt;br/&gt;
surprised if there were still *BSD boxes lurking somewhere.  I don&apos;t&lt;br/&gt;
think there are any RHEL 6.x yet.&lt;/p&gt;

&lt;p&gt;So no, OS-related docs don&apos;t get stale &lt;em&gt;that&lt;/em&gt; quickly, at least not for&lt;br/&gt;
some of us. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;



&lt;p&gt;Not at all.  It&apos;s simply a statement that those working most closely with&lt;br/&gt;
the code and XML configs--i.e., those who &lt;em&gt;do&lt;/em&gt; watch JIRAs and the mailing&lt;br/&gt;
lists religiously--are more likely to keep things updated if they&apos;re&lt;br/&gt;
nearby/noticeable.  We all have limited attention-hours to devote to&lt;br/&gt;
maintenance, so anything that makes it easier, faster, or more likely to&lt;br/&gt;
happen is a Good Thing.&lt;/p&gt;

&lt;p&gt;And I &lt;em&gt;know&lt;/em&gt; you&apos;re aware that the default state for documentation is&lt;br/&gt;
&quot;nonexistent.&quot;  Especially where developers are concerned.&lt;/p&gt;

&lt;p&gt;(Btw, wasn&apos;t there a recent suggestion to automatically pull config keys&lt;br/&gt;
and descriptions out of the foo-default.xml files and publish them?  With&lt;br/&gt;
something like that in place, the docs you want would fall out of this&lt;br/&gt;
and similar patches immediately.  One of my mottos for the last few years&lt;br/&gt;
has been, &quot;if it can be automated, it should be automated.&quot;)&lt;/p&gt;

&lt;p&gt;I guess this has drifted a bit; perhaps further discussion should go to&lt;br/&gt;
one of the lists?&lt;/p&gt;</comment>
                            <comment id="13004684" author="aw" created="Wed, 9 Mar 2011 18:03:27 +0000"  >&lt;p&gt;Actually, rather than let you dig Yahoo! in deeper, I&apos;m just going to -1 the patch due to the config description on the grounds that it is both too generic and too specific:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Are we going to update this list if Debian/Scientific Linux/Mandriva/... are found to be non-POSIX compliant?&lt;/li&gt;
	&lt;li&gt;If yes, are we going to push a new Apache release when this list is updated?&lt;/li&gt;
	&lt;li&gt;What does RHEL 6.0 actually mean?  If I put a new pam rpm that fixes the issue, am I still running RHEL 6.0?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A living document for when to use this as an option is going to be much better over the long haul than a static file.&lt;/p&gt;</comment>
                            <comment id="13004691" author="tlipcon" created="Wed, 9 Mar 2011 18:16:03 +0000"  >&lt;p&gt;I will answer all of your questions and hope you will withdraw your -1:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Are we going to update this list if Debian/Scientific Linux/Mandriva/... are found to be non-POSIX compliant?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I will happily volunteer to +1 and commit a patch that anyone should submit to update the list. Please feel free to do so. The list doesn&apos;t claim to be complete, only to provide some examples of systems where it&apos;s the case.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If yes, are we going to push a new Apache release when this list is updated?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, like any other documentation improvement it should wait for the next release. Our definitive documentation lives in the source tree. The fact that some of it is in the wiki doesn&apos;t change that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What does RHEL 6.0 actually mean? If I put a new pam rpm that fixes the issue, am I still running RHEL 6.0?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I would assume RHEL 6.0 means that you are not installing packages that are not part of the RHEL 6.0 release. If you went and installed a random RPM that you built from source or some other vendor, you&apos;re no longer running a stock RHEL 6.0. Again, the docs are not meant to be complete. Assumedly if you&apos;ve updated your pam manually to workaround this issue, you&apos;d know that, and you wouldn&apos;t turn on the config option!&lt;/p&gt;


&lt;p&gt;And, seriously, with the &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7115&quot; title=&quot;Add a cache for getpwuid_r and getpwgid_r calls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7115&quot;&gt;&lt;del&gt;HADOOP-7115&lt;/del&gt;&lt;/a&gt; cache in place, this becomes a really rare race condition. Is it really worth making such a big deal? I&apos;d like to move on to fixing other bugs, please.&lt;/p&gt;</comment>
                            <comment id="13004720" author="aw" created="Wed, 9 Mar 2011 18:45:45 +0000"  >&lt;p&gt;&amp;gt; No, like any other documentation improvement it should wait for the &lt;br/&gt;
&amp;gt; next release. Our definitive documentation lives in the source tree. &lt;br/&gt;
&amp;gt; The fact that some of it is in the wiki doesn&apos;t change that.&lt;/p&gt;

&lt;p&gt;I agree to a certain extent.  But listing a moving target from suffering from a problem that exists today that may not exist tomorrow for a release of our software that is still months out is a mistake.  CentOS 6.0 doesn&apos;t even exist yet in any official form yet we&apos;re declaring it bugged. &lt;/p&gt;

&lt;p&gt;&amp;gt; Assumedly if you&apos;ve updated your pam manually to workaround this issue, &lt;br/&gt;
&amp;gt; you&apos;d know that, and you wouldn&apos;t turn on the config option!&lt;/p&gt;

&lt;p&gt;What I am applying the 6-updates repo after a kick? Are packages from &lt;a href=&quot;https://rhn.redhat.com/errata/rhel-server-6-errata.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://rhn.redhat.com/errata/rhel-server-6-errata.html&lt;/a&gt; not considered part of RHEL 6?  I suspect Red Hat would disagree.&lt;/p&gt;

&lt;p&gt;I realize that for the majority of committers don&apos;t actually use an Apache release so this doesn&apos;t seem like a big deal since you folks release seemingly monthly, if not more frequent.  I also realize that in order for the various commercial interests involved it behooves them to get any and all patches committed to show that they are &quot;contributing&quot;.  The reality is that by the time this patch shows up in an actual Apache release, it is bound to be outdated.... and that&apos;s where I take offense.&lt;/p&gt;</comment>
                            <comment id="13004738" author="tlipcon" created="Wed, 9 Mar 2011 19:10:52 +0000"  >&lt;p&gt;Made a wiki page and linked to it.&lt;/p&gt;

&lt;p&gt;If you don&apos;t like this patch or the wiki page, please edit it and contribute a version you find acceptable. Otherwise I will consider this version acceptable and commit tomorrow.&lt;/p&gt;</comment>
                            <comment id="13004956" author="eli" created="Thu, 10 Mar 2011 03:27:24 +0000"  >&lt;p&gt;Hey Allen,&lt;/p&gt;

&lt;p&gt;If you find the config description &quot;both too generic and too specific&quot; perhaps you could suggest a better one before veto&apos;ing the patch?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Eli&lt;/p&gt;</comment>
                            <comment id="13005493" author="hadoopqa" created="Fri, 11 Mar 2011 05:10:00 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12473179/hadoop-7156.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12473179/hadoop-7156.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1080396.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/306//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/306//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/306//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/306//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/306//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/306//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13005535" author="eli" created="Fri, 11 Mar 2011 07:31:54 +0000"  >&lt;p&gt;+1  for the latest patch&lt;/p&gt;</comment>
                            <comment id="13005780" author="aw" created="Fri, 11 Mar 2011 18:45:23 +0000"  >&lt;p&gt;Removing my -1.&lt;/p&gt;</comment>
                            <comment id="13005781" author="tlipcon" created="Fri, 11 Mar 2011 18:46:08 +0000"  >&lt;p&gt;Thanks. Committed to trunk and 22&lt;/p&gt;</comment>
                            <comment id="13005788" author="hudson" created="Fri, 11 Mar 2011 19:03:40 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #524 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/524/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/524/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7156&quot; title=&quot;getpwuid_r is not thread-safe on RHEL6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7156&quot;&gt;&lt;del&gt;HADOOP-7156&lt;/del&gt;&lt;/a&gt;. Workaround for unsafe implementations of getpwuid_r. Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="13005861" author="hudson" created="Fri, 11 Mar 2011 21:50:21 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-22-branch #32 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-22-branch/32/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-22-branch/32/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7156&quot; title=&quot;getpwuid_r is not thread-safe on RHEL6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7156&quot;&gt;&lt;del&gt;HADOOP-7156&lt;/del&gt;&lt;/a&gt;. Workaround for unsafe implementations of getpwuid_r. Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="13006028" author="hudson" created="Sat, 12 Mar 2011 11:13:14 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #628 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/628/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/628/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7156&quot; title=&quot;getpwuid_r is not thread-safe on RHEL6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7156&quot;&gt;&lt;del&gt;HADOOP-7156&lt;/del&gt;&lt;/a&gt;. Workaround for unsafe implementations of getpwuid_r. Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="13037223" author="aw" created="Sat, 21 May 2011 01:52:52 +0000"  >&lt;p&gt;Red Hat has released a fix for this as part of RHEL 6.1: &lt;a href=&quot;http://rhn.redhat.com/errata/RHSA-2011-0560.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://rhn.redhat.com/errata/RHSA-2011-0560.html&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="13103819" author="scott_carey" created="Tue, 13 Sep 2011 17:42:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;Red Hat has released a fix for this as part of RHEL 6.1&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;And months later, CentOS 6.1 is not out &amp;#8211; I would venture that many Hadoop users are on CentOS (or SL) and not RHEL.&lt;/p&gt;

&lt;p&gt;Thanks for fixing this!  For years to come, I suspect that some will still have RHEL 6.0 or CentOS 6.0 servers floating around that might run into this.&lt;/p&gt;

&lt;p&gt;FWIW, we&apos;re happily using CentOS 6.0 with Hadoop right now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12473179" name="hadoop-7156.txt" size="8087" author="tlipcon" created="Wed, 9 Mar 2011 19:10:52 +0000"/>
                            <attachment id="12473030" name="hadoop-7156.txt" size="7972" author="tlipcon" created="Tue, 8 Mar 2011 19:28:05 +0000"/>
                            <attachment id="12472902" name="hadoop-7156.txt" size="7057" author="tlipcon" created="Tue, 8 Mar 2011 02:53:38 +0000"/>
                            <attachment id="12472471" name="hadoop-7156.txt" size="5230" author="tlipcon" created="Wed, 2 Mar 2011 21:52:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34283</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02pgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13725</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Adds a new configuration hadoop.work.around.non.threadsafe.getpwuid which can be used to enable a mutex around this call to workaround thread-unsafe implementations of getpwuid_r. Users should consult &lt;a href=&quot;http://wiki.apache.org/hadoop/KnownBrokenPwuidImplementations&quot;&gt;http://wiki.apache.org/hadoop/KnownBrokenPwuidImplementations&lt;/a&gt; for a list of such systems.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>