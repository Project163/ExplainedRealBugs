<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:33:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6760] WebServer shouldn&apos;t increase port number in case of negative port setting caused by Jetty&apos;s race</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6760</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;When a negative port is assigned to a webserver socket (because of a race inside of the Jetty server) the workaround from &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6386&quot; title=&quot;NameNode&amp;#39;s HttpServer can&amp;#39;t instantiate InetSocketAddress: IllegalArgumentException is thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6386&quot;&gt;&lt;del&gt;HADOOP-6386&lt;/del&gt;&lt;/a&gt; is increasing the original port number on the next bind attempt. Apparently, this is an incorrect logic and next bind attempt should happen on the same port number if possible.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464271">HADOOP-6760</key>
            <summary>WebServer shouldn&apos;t increase port number in case of negative port setting caused by Jetty&apos;s race</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cos">Konstantin I Boudnik</assignee>
                                    <reporter username="cos">Konstantin I Boudnik</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 May 2010 18:11:50 +0000</created>
                <updated>Tue, 25 May 2010 19:38:45 +0000</updated>
                            <resolved>Sat, 22 May 2010 00:49:13 +0000</resolved>
                                    <version>0.20.3</version>
                                    <fixVersion>0.20.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12866247" author="cos" created="Tue, 11 May 2010 18:19:09 +0000"  >&lt;p&gt;same for 0.20 source tree&lt;/p&gt;</comment>
                            <comment id="12866251" author="cos" created="Tue, 11 May 2010 18:22:31 +0000"  >&lt;p&gt;Fix is simple and is ready for verification.&lt;/p&gt;</comment>
                            <comment id="12866257" author="hadoopqa" created="Tue, 11 May 2010 18:35:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12444225/HADOOP-6760.0.20.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12444225/HADOOP-6760.0.20.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 941662.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/515/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/515/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12866304" author="eli" created="Tue, 11 May 2010 20:09:25 +0000"  >&lt;p&gt;Hey Kos - your patch looks correct to me.  Rationale being that according to the jetty javadoc below getPort should never return a negative value, therefore oriPort should never be negative, therefore you don&apos;t need the workaround of adding one, and it&apos;s OK to re-bind to the same port.&lt;/p&gt;

&lt;p&gt;Not your change but the &quot;workaround &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-4744&quot; title=&quot;Wrong resolution of hostname and port &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-4744&quot;&gt;&lt;del&gt;HADOOP-4744&lt;/del&gt;&lt;/a&gt;&quot; looks ok, per the docs below it is valid for getLocalPort to return -1, but I think it could be simpler, something like the following. Make sense?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numRetries = 1;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (port &amp;lt; 0) {
  LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;listener.getLocalPort returned &quot;&lt;/span&gt; + port);
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (numRetries++ &amp;gt; MAX_RETRIES) {
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exception(&lt;span class=&quot;code-quote&quot;&gt;&quot; listener.getLocalPort is returning &quot;&lt;/span&gt; +
    		&lt;span class=&quot;code-quote&quot;&gt;&quot;less than 0 even after &quot;&lt;/span&gt; +numRetries+&lt;span class=&quot;code-quote&quot;&gt;&quot; resets&quot;&lt;/span&gt;);
  }
  LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Bouncing the listener&quot;&lt;/span&gt;);
  listener.close();
  &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
  listener.setPort(oriPort);
  listener.open();
  &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(100);
  port = listener.getLocalPort();
}


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;187     /**&lt;br/&gt;
188      * @return The configured port for the connector or 0 if any available&lt;br/&gt;
189      * port may be used.&lt;br/&gt;
190      */&lt;br/&gt;
191     int getPort();&lt;br/&gt;
192     &lt;br/&gt;
193     /* ------------------------------------------------------------ */&lt;br/&gt;
194     /**&lt;br/&gt;
195      * @return The actual port the connector is listening on or -1 if there &lt;br/&gt;
196      * is no port or the connector is not open.&lt;br/&gt;
197      */&lt;br/&gt;
198     int getLocalPort();&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12866373" author="cos" created="Tue, 11 May 2010 22:32:42 +0000"  >&lt;p&gt;Yes, Eli. This seems to be a valid simplification. We are seeing quite a bunch of -1 ports on our production clusters. And the workaround for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6386&quot; title=&quot;NameNode&amp;#39;s HttpServer can&amp;#39;t instantiate InetSocketAddress: IllegalArgumentException is thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6386&quot;&gt;&lt;del&gt;HADOOP-6386&lt;/del&gt;&lt;/a&gt; was trying to address it. I guess it has done a pretty good job however increasing the port was wrong. &lt;/p&gt;

&lt;p&gt;Two workarounds exist for a purpose, actually. First one &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-4744&quot; title=&quot;Wrong resolution of hostname and port &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-4744&quot;&gt;&lt;del&gt;HADOOP-4744&lt;/del&gt;&lt;/a&gt; is about getting a negative port as the result of initial &lt;tt&gt;getLocalPort()&lt;/tt&gt; call. However, what we are seeing sometime is that &lt;tt&gt;getLocalPort()&lt;/tt&gt; can get you a positive number and then when you are trying to bind to it you are getting &lt;tt&gt;IllegalArgumentException&lt;/tt&gt; because the port is actually negative.... It is apparently caused by some crazy race in Jetty. Therefore, the workaround #2 which verifies if allocated port is actually positive and if isn&apos;t it engage all that voodoo ...&lt;/p&gt;

&lt;p&gt;So, I believe your simplification won&apos;t address the second issue... Please correct me if I&apos;m wrong.&lt;/p&gt;</comment>
                            <comment id="12867330" author="eli" created="Fri, 14 May 2010 00:20:22 +0000"  >&lt;p&gt;Yes, I was just simplying the &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-4744&quot; title=&quot;Wrong resolution of hostname and port &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-4744&quot;&gt;&lt;del&gt;HADOOP-4744&lt;/del&gt;&lt;/a&gt; part, looks like you could do something similar for the &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6386&quot; title=&quot;NameNode&amp;#39;s HttpServer can&amp;#39;t instantiate InetSocketAddress: IllegalArgumentException is thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6386&quot;&gt;&lt;del&gt;HADOOP-6386&lt;/del&gt;&lt;/a&gt; part.  Feel free to ignore or defer to a separate jira, at the minimum that code could use a big comment explaining why it&apos;s jumping through so many hoops.&lt;/p&gt;

&lt;p&gt;+1 to your patch. The change for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6386&quot; title=&quot;NameNode&amp;#39;s HttpServer can&amp;#39;t instantiate InetSocketAddress: IllegalArgumentException is thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6386&quot;&gt;&lt;del&gt;HADOOP-6386&lt;/del&gt;&lt;/a&gt; should not have incremented oriPort.&lt;/p&gt;</comment>
                            <comment id="12867342" author="cos" created="Fri, 14 May 2010 01:06:30 +0000"  >&lt;p&gt;Aftere some considerations and investigations we have found that the workaround from &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6386&quot; title=&quot;NameNode&amp;#39;s HttpServer can&amp;#39;t instantiate InetSocketAddress: IllegalArgumentException is thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6386&quot;&gt;&lt;del&gt;HADOOP-6386&lt;/del&gt;&lt;/a&gt; has a very unpleasant side effect which weren&apos;t apparent at the time. Here what is happening:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;daemons like NN, TT, etc. are adding certain context to the webserver before it is started,&lt;/li&gt;
	&lt;li&gt;when the workaround in question detects a negative port problem (aka Jetty race) it applies some logic which essentially restarts the server via &lt;tt&gt;server.stop()&lt;/tt&gt; and &lt;tt&gt;server.start()&lt;/tt&gt; calls.&lt;/li&gt;
	&lt;li&gt;the trick is that &lt;tt&gt;server.stop()&lt;/tt&gt; clears up (or either shutdown) all previously added context.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The effect of this is that even a daemon&apos;s webserver was started it lacks all intimate little servlets which were  added initially. Thus a daemon&apos;s webserver becomes pretty much useless.&lt;/p&gt;

&lt;p&gt;Unfortunately, there&apos;s no easy way to fix it because the context is being added outside and it&apos;d be pretty tricky to trace what context needs to be preserved before server is restarted and so on.&lt;/p&gt;

&lt;p&gt;I believe the better solution would be to revert the workaround introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6386&quot; title=&quot;NameNode&amp;#39;s HttpServer can&amp;#39;t instantiate InetSocketAddress: IllegalArgumentException is thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6386&quot;&gt;&lt;del&gt;HADOOP-6386&lt;/del&gt;&lt;/a&gt;. In that case we&apos;ll get back to the original behavior where webserver either starts or fails but isn&apos;t left in an inconsistent state.&lt;/p&gt;</comment>
                            <comment id="12867346" author="devaraj" created="Fri, 14 May 2010 01:24:05 +0000"  >&lt;p&gt;+1 on reverting &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6386&quot; title=&quot;NameNode&amp;#39;s HttpServer can&amp;#39;t instantiate InetSocketAddress: IllegalArgumentException is thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6386&quot;&gt;&lt;del&gt;HADOOP-6386&lt;/del&gt;&lt;/a&gt; for now. BTW &lt;a href=&quot;http://jira.codehaus.org/browse/JETTY-748&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/JETTY-748&lt;/a&gt; is the jira that is tracking the fix on the jetty side.&lt;/p&gt;</comment>
                            <comment id="12867348" author="cos" created="Fri, 14 May 2010 01:27:55 +0000"  >&lt;p&gt;Patch removes the workaround in question.&lt;/p&gt;</comment>
                            <comment id="12867350" author="cos" created="Fri, 14 May 2010 01:34:57 +0000"  >&lt;p&gt;Fixing CHANGES.txt as well removing the JIRA numbers.&lt;/p&gt;</comment>
                            <comment id="12867351" author="cos" created="Fri, 14 May 2010 01:36:49 +0000"  >&lt;p&gt;Same for the trunk and 0.21 branch&lt;/p&gt;</comment>
                            <comment id="12867599" author="cos" created="Fri, 14 May 2010 17:56:35 +0000"  >&lt;p&gt;Need to re-verify the patch because it has been changed.&lt;/p&gt;</comment>
                            <comment id="12867615" author="hadoopqa" created="Fri, 14 May 2010 18:15:28 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12444456/HADOOP-6760.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12444456/HADOOP-6760.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 944012.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/67/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/67/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/67/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/67/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/67/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/67/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/67/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h1.grid.sp2.yahoo.net/67/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12868894" author="cos" created="Tue, 18 May 2010 23:25:16 +0000"  >&lt;p&gt;Patch should include modifications for CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="12868895" author="cos" created="Tue, 18 May 2010 23:26:41 +0000"  >&lt;p&gt;Patch is the same except for CHANGES.txt mods. Re verifying nonetheless. &lt;/p&gt;</comment>
                            <comment id="12868911" author="hadoopqa" created="Tue, 18 May 2010 23:49:10 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12444852/HADOOP-6760.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12444852/HADOOP-6760.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 945953.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/528/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/528/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/528/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/528/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/528/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/528/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/528/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/528/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12868921" author="cos" created="Wed, 19 May 2010 00:06:16 +0000"  >&lt;p&gt;Unit test isn&apos;t feasible for this fix. &lt;/p&gt;</comment>
                            <comment id="12868922" author="cos" created="Wed, 19 May 2010 00:06:43 +0000"  >&lt;p&gt;Same patch for 0.20&lt;/p&gt;</comment>
                            <comment id="12869298" author="knoguchi" created="Wed, 19 May 2010 20:01:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;Thus a daemon&apos;s webserver becomes pretty much useless.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Just for the record, we observed multiple Datanodes/TaskTrackers constantly failing as bleow. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2010-04-01 00:36:39,706 INFO org.apache.hadoop.tools.DistCp: FAIL 4/part-00031 : java.io.FileNotFoundException: http://abc1234.com:50076/streamFile?filename=/data/4/part-00031&amp;amp;ugi=knoguchi
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1288)
        at org.apache.hadoop.hdfs.HftpFileSystem.open(HftpFileSystem.java:143)
        at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:356)
        at org.apache.hadoop.tools.DistCp$CopyFilesMapper.copy(DistCp.java:415)
        at org.apache.hadoop.tools.DistCp$CopyFilesMapper.map(DistCp.java:543)
        at org.apache.hadoop.tools.DistCp$CopyFilesMapper.map(DistCp.java:310)
        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:358)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:307)
        at org.apache.hadoop.mapred.Child.main(Child.java:159)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2010-04-27 14:48:48,641 WARN org.apache.hadoop.mapred.ReduceTask: java.io.FileNotFoundException: http://abcl51349.com:50061/mapOutput?job=job_201004211814_6666&amp;amp;map=attempt_201004211814_6666_m_000791_0&amp;amp;reduce=0
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1288)
        at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getInputStream(ReduceTask.java:1500)
        at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(ReduceTask.java:1381)
        at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(ReduceTask.java:1293)
        at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run(ReduceTask.java:1224)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Map tasks on these tasktrackers kept on failing with &lt;br/&gt;
&quot;Status : FAILED Too many fetch-failures&quot;&lt;/p&gt;</comment>
                            <comment id="12869411" author="cos" created="Wed, 19 May 2010 23:58:34 +0000"  >&lt;p&gt;If not one else has any objections I&apos;m going to commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="12870245" author="cos" created="Sat, 22 May 2010 00:41:29 +0000"  >&lt;p&gt;Wrong file was uploaded for 0.20.3 branch&lt;/p&gt;</comment>
                            <comment id="12870247" author="hudson" created="Sat, 22 May 2010 00:43:34 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #262 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/262/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/262/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6760&quot; title=&quot;WebServer shouldn&amp;#39;t increase port number in case of negative port setting caused by Jetty&amp;#39;s race&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6760&quot;&gt;&lt;del&gt;HADOOP-6760&lt;/del&gt;&lt;/a&gt;. WebServer shouldn&apos;t increase port number in case of&lt;br/&gt;
negative port setting caused by Jetty&apos;s race. Contributed by Konstantin&lt;br/&gt;
Boudnik.&lt;/p&gt;</comment>
                            <comment id="12870251" author="cos" created="Sat, 22 May 2010 00:49:13 +0000"  >&lt;p&gt;I have just committed this to all open branches (0.20.3, 0.21) and trunk&lt;/p&gt;</comment>
                            <comment id="12870253" author="hudson" created="Sat, 22 May 2010 01:04:00 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #263 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/263/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/263/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6760&quot; title=&quot;WebServer shouldn&amp;#39;t increase port number in case of negative port setting caused by Jetty&amp;#39;s race&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6760&quot;&gt;&lt;del&gt;HADOOP-6760&lt;/del&gt;&lt;/a&gt;. Moving the entry to the correct base release 0.20.3&lt;/p&gt;</comment>
                            <comment id="12871324" author="hudson" created="Tue, 25 May 2010 19:38:45 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #346 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/346/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/346/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12440625">HADOOP-6386</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12445228" name="HADOOP-6760.0.20.patch" size="1541" author="cos" created="Sat, 22 May 2010 00:41:29 +0000"/>
                            <attachment id="12444860" name="HADOOP-6760.0.20.patch" size="592" author="cos" created="Wed, 19 May 2010 00:06:43 +0000"/>
                            <attachment id="12444455" name="HADOOP-6760.0.20.patch" size="2310" author="cos" created="Fri, 14 May 2010 01:34:57 +0000"/>
                            <attachment id="12444453" name="HADOOP-6760.0.20.patch" size="1575" author="cos" created="Fri, 14 May 2010 01:27:55 +0000"/>
                            <attachment id="12444225" name="HADOOP-6760.0.20.patch" size="592" author="cos" created="Tue, 11 May 2010 18:19:09 +0000"/>
                            <attachment id="12444852" name="HADOOP-6760.patch" size="1527" author="cos" created="Tue, 18 May 2010 23:25:16 +0000"/>
                            <attachment id="12444456" name="HADOOP-6760.patch" size="2189" author="cos" created="Fri, 14 May 2010 01:36:49 +0000"/>
                            <attachment id="12444223" name="HADOOP-6760.patch" size="558" author="cos" created="Tue, 11 May 2010 18:15:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37033</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02qgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13888</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>