<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:42:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-8942] Thundering herd of RPCs with large responses leads to OOM</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-8942</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;When a large number of clients are all making calls with large amounts of response data then the IPC server can exhaust memory.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4730&quot; title=&quot;AM crashes due to OOM while serving up map task completion events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4730&quot;&gt;&lt;del&gt;MAPREDUCE-4730&lt;/del&gt;&lt;/a&gt; for an example of this.&lt;/p&gt;

&lt;p&gt;There does not appear to be any flow control between the server&apos;s handler threads and the responder thread.  If a handler thread cannot write out all of the response data without blocking, it queues up the remainder for the responder thread and goes back to the next call in the call queue.  If there are enough clients, this can cause the handler threads to overwhelm the heap by queueing response data faster than it can be processed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12612479">HADOOP-8942</key>
            <summary>Thundering herd of RPCs with large responses leads to OOM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jlowe">Jason Darrell Lowe</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Oct 2012 19:28:54 +0000</created>
                <updated>Wed, 29 Jan 2014 20:12:34 +0000</updated>
                                            <version>0.23.3</version>
                                                    <component>ipc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>18</watches>
                                                                                                                <comments>
                            <comment id="13483821" author="hudson" created="Thu, 25 Oct 2012 01:58:18 +0000"  >&lt;p&gt;Integrated in Hadoop-trunk-Commit #2925 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/2925/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/2925/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4730&quot; title=&quot;AM crashes due to OOM while serving up map task completion events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4730&quot;&gt;&lt;del&gt;MAPREDUCE-4730&lt;/del&gt;&lt;/a&gt;. Fix Reducer&apos;s EventFetcher to scale the map-completion requests slowly to avoid &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8942&quot; title=&quot;Thundering herd of RPCs with large responses leads to OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8942&quot;&gt;HADOOP-8942&lt;/a&gt;. Contributed by Jason Lowe. (Revision 1401941)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
vinodkv : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401941&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401941&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/EventFetcher.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapreduce/task/reduce/TestEventFetcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13484035" author="hudson" created="Thu, 25 Oct 2012 10:47:39 +0000"  >&lt;p&gt;Integrated in Hadoop-Yarn-trunk #16 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/16/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/16/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4730&quot; title=&quot;AM crashes due to OOM while serving up map task completion events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4730&quot;&gt;&lt;del&gt;MAPREDUCE-4730&lt;/del&gt;&lt;/a&gt;. Fix Reducer&apos;s EventFetcher to scale the map-completion requests slowly to avoid &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8942&quot; title=&quot;Thundering herd of RPCs with large responses leads to OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8942&quot;&gt;HADOOP-8942&lt;/a&gt;. Contributed by Jason Lowe. (Revision 1401941)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
vinodkv : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401941&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401941&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/EventFetcher.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapreduce/task/reduce/TestEventFetcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13484077" author="hudson" created="Thu, 25 Oct 2012 12:39:17 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-0.23-Build #415 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/415/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/415/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4730&quot; title=&quot;AM crashes due to OOM while serving up map task completion events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4730&quot;&gt;&lt;del&gt;MAPREDUCE-4730&lt;/del&gt;&lt;/a&gt;. Fix Reducer&apos;s EventFetcher to scale the map-completion requests slowly to avoid &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8942&quot; title=&quot;Thundering herd of RPCs with large responses leads to OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8942&quot;&gt;HADOOP-8942&lt;/a&gt;. Contributed by Jason Lowe.&lt;br/&gt;
svn merge --ignore-ancestry -c 1401941 ../../trunk/ (Revision 1401943)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
vinodkv : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401943&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401943&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/EventFetcher.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapreduce/task/reduce/TestEventFetcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13484094" author="hudson" created="Thu, 25 Oct 2012 13:03:06 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1206 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1206/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1206/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4730&quot; title=&quot;AM crashes due to OOM while serving up map task completion events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4730&quot;&gt;&lt;del&gt;MAPREDUCE-4730&lt;/del&gt;&lt;/a&gt;. Fix Reducer&apos;s EventFetcher to scale the map-completion requests slowly to avoid &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8942&quot; title=&quot;Thundering herd of RPCs with large responses leads to OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8942&quot;&gt;HADOOP-8942&lt;/a&gt;. Contributed by Jason Lowe. (Revision 1401941)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
vinodkv : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401941&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401941&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/EventFetcher.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapreduce/task/reduce/TestEventFetcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13484135" author="hudson" created="Thu, 25 Oct 2012 14:01:26 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1236 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1236/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1236/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4730&quot; title=&quot;AM crashes due to OOM while serving up map task completion events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4730&quot;&gt;&lt;del&gt;MAPREDUCE-4730&lt;/del&gt;&lt;/a&gt;. Fix Reducer&apos;s EventFetcher to scale the map-completion requests slowly to avoid &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8942&quot; title=&quot;Thundering herd of RPCs with large responses leads to OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8942&quot;&gt;HADOOP-8942&lt;/a&gt;. Contributed by Jason Lowe. (Revision 1401941)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
vinodkv : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401941&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1401941&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/EventFetcher.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/test/java/org/apache/hadoop/mapreduce/task/reduce/TestEventFetcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12688877">HADOOP-10233</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12612335">MAPREDUCE-4730</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12689266">HDFS-5788</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249655</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ag6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>