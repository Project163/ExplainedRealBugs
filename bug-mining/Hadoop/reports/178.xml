<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:34:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6715] AccessControlList.toString() returns empty string when we set acl to &quot;*&quot;</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6715</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;AccessControlList.toString() returns empty string when we set the acl to &quot;&amp;#42;&quot; and also when we set it to empty(i.e. &quot; &quot;). This is causing wrong values for ACLs shown on jobdetails.jsp and jobdetailshistory.jsp web pages when acls are set to &quot;&amp;#42;&quot;.&lt;/p&gt;

&lt;p&gt;I think AccessControlList.toString() needs to be changed to return &quot;&amp;#42;&quot; when we set the acl to &quot;&amp;#42;&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12462513">HADOOP-6715</key>
            <summary>AccessControlList.toString() returns empty string when we set acl to &quot;*&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ravidotg">Ravi Gummadi</assignee>
                                    <reporter username="ravidotg">Ravi Gummadi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Apr 2010 06:41:19 +0000</created>
                <updated>Mon, 12 Dec 2011 06:18:25 +0000</updated>
                            <resolved>Thu, 12 Aug 2010 06:36:23 +0000</resolved>
                                                    <fixVersion>0.22.0</fixVersion>
                                    <component>security</component>
                    <component>util</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12858798" author="yhemanth" created="Tue, 20 Apr 2010 09:55:36 +0000"  >&lt;p&gt;Maybe something a little more user-friendly ? Like ALL USERS or something like that ? There is a similar, but more pertinent, display issue with empty string. There, we display an empty string, which in effect shows up as nothing. It would be nice to show something like NONE.&lt;/p&gt;</comment>
                            <comment id="12858884" author="ravidotg" created="Tue, 20 Apr 2010 13:41:22 +0000"  >&lt;p&gt;Right. Would look good, if .toString() is used for displaying only.&lt;br/&gt;
But if .toString() is used to save it as a String and later set it to a key in some Configuration object, then &quot;ALL USERS&quot; will not be considered as &quot;*&quot; and will cause an issue ?&lt;/p&gt;</comment>
                            <comment id="12859300" author="vinodkv" created="Wed, 21 Apr 2010 11:08:41 +0000"  >&lt;p&gt;I propose we separate the display functionality from &lt;tt&gt;toString()&lt;/tt&gt; as the latter can potentially be used for other purposes as Ravi mentioned above. So we will&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fix &lt;tt&gt;toString()&lt;/tt&gt; addressing the bug related to the wild-card &apos;*&apos;&lt;/li&gt;
	&lt;li&gt;add a new API say &lt;tt&gt;AccessControlList.getDisplayString()&lt;/tt&gt;. This should return &quot;ALL USERS&quot; for &apos;*&apos; and &quot;NONE&quot; for &apos; &apos; (empty space character) and the output of &lt;tt&gt;toString&lt;/tt&gt; for every other value of ACL.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12859303" author="yhemanth" created="Wed, 21 Apr 2010 11:23:28 +0000"  >&lt;p&gt;Can one of you help me understand what Ravi means by &quot;save it as a String and later set it to a key in some Configuration object&quot; ? It seems like we need to store the ACL objects in some map, and possibly these need to be reconstructed from a serialized representation (like for task log access, maybe ?) and we are using the key of the map as the String that is thus serialized.&lt;/p&gt;

&lt;p&gt;If that&apos;s the case, can we serialize the ACL using some representation that stores the actual name and value as separate fields rather than a toString representation, use a hashCode / equals on the ACL object to build a key based on these fields, and use toString for display purposes. This seems more canonical to me (inline with what toString is typically used for).&lt;/p&gt;</comment>
                            <comment id="12859680" author="ravidotg" created="Thu, 22 Apr 2010 06:25:48 +0000"  >&lt;p&gt;Right Hemanth. People wouldn&apos;t expect toString() to give serialized string of object. We can have our own messages in it.&lt;br/&gt;
Will modify AccessControlList.toString() itself to give &quot;ALL USERS&quot; and &quot;NONE&quot; for &quot;&amp;#42;&quot; and empty acl cases.&lt;/p&gt;</comment>
                            <comment id="12862144" author="vinodkv" created="Thu, 29 Apr 2010 09:38:20 +0000"  >&lt;p&gt;Um.. &apos;ALL&apos;, &apos;USERS&apos;, &apos;NONE&apos; can themselves be users/groups and will lead to confusions, however corner-cased they might be.&lt;/p&gt;

&lt;p&gt;How about something simpler like the following? Essentially, I&apos;m trying to make the space character stand out by using special chars &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39; and &amp;#39;&amp;#93;&lt;/span&gt;&apos; which are unlikely to end up in user/group names.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Job-ACLs: [*]
Job-ACLs: [ ]
Job-ACLs: [ group1]
Job-ACLs: [user1,user2 group1,group2]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12862145" author="vinodkv" created="Thu, 29 Apr 2010 09:42:19 +0000"  >&lt;p&gt;In fact more spaces between user-list and group-list makes things clearer, I think&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Job-ACLs: [*]
Job-ACLs: [             ]
Job-ACLs: [             group1]
Job-ACLs: [user1,user2             group1,group2]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12863673" author="yhemanth" created="Tue, 4 May 2010 05:36:18 +0000"  >&lt;p&gt;We could solve the problem of All, Users, None etc being valid user names by modifying the display string. Note that this is all primarily presentation layer changes. &lt;/p&gt;

&lt;p&gt;Firstly, I think displaying allowed users and groups separately in the UI would make it much more user friendly - rather than sticking to our internal representation.&lt;br/&gt;
So, we could say:&lt;/p&gt;

&lt;p&gt;Allowed Users: a,b,c&lt;br/&gt;
Allowed Groups: d,e,f&lt;/p&gt;

&lt;p&gt;When All or No users / groups have access, instead of saying:&lt;br/&gt;
&quot;Users: All&quot; or &quot;Groups: None&quot;&lt;br/&gt;
we could say&lt;br/&gt;
&quot;All users can access job&quot; or &quot;No groups can access job&quot;&lt;/p&gt;

&lt;p&gt;Would this work ?&lt;/p&gt;</comment>
                            <comment id="12863693" author="vinodkv" created="Tue, 4 May 2010 06:38:29 +0000"  >&lt;p&gt;+1. That&apos;s looks far better than anything else we considered before.&lt;/p&gt;

&lt;p&gt;So, in summary, what we have currently&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Job-ACLs:
      mapreduce.job.acl-view-job:  group1,group2
      mapreduce.job.acl-modify-job: *
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will become&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Job-ACLs:
      mapreduce.job.acl-view-job:
            Users: No users are allowed
           Groups: group1,group2
      mapreduce.job.acl-modify-job:
             Users: All users are allowed
            Groups: All groups are allowed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Right?&lt;/p&gt;</comment>
                            <comment id="12863714" author="yhemanth" created="Tue, 4 May 2010 08:28:26 +0000"  >&lt;p&gt;Yes, that&apos;s the general idea. +1 from me. You may just want to get some opinion (from users or operations folks about whether users will be confused if it says &quot;No users are allowed&quot;, but some groups are allowed.&lt;/p&gt;</comment>
                            <comment id="12864669" author="vinodkv" created="Thu, 6 May 2010 06:27:11 +0000"  >&lt;p&gt;Argh.. that is confusing too.. one final jab at it:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;ACL&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Message&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;user1,user2 group1,group2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Users user1,user2 and members of the groups group1,group2 are allowed&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;user1,user2 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Users user1,user2 are allowed&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; group1,group2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Members of the groups group1,group2 are allowed&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; (blank space) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; No users are allowed&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;*(asterisk)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; All users are allowed&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;How about that? (Nothing is easy around here.. )&lt;/p&gt;</comment>
                            <comment id="12865241" author="ravidotg" created="Fri, 7 May 2010 17:21:02 +0000"  >&lt;p&gt;Attaching patch for earlier version of hadoop. Not for commit here.&lt;/p&gt;</comment>
                            <comment id="12896796" author="ravidotg" created="Tue, 10 Aug 2010 08:01:32 +0000"  >&lt;p&gt;Attaching patch for trunk.&lt;/p&gt;

&lt;p&gt;AccessControlList.toString() returns a descriptive String of users and groups that are part of this ACL. This is same as that is there in 6715.20S.6.patch.&lt;/p&gt;

&lt;p&gt; Also added a new public method AccessControlList.getAclString() that returns the exact String that can be used for creating a new instance of AccessControlList by passing it to the constructor.&lt;/p&gt;</comment>
                            <comment id="12896817" author="ravidotg" created="Tue, 10 Aug 2010 09:00:23 +0000"  >&lt;p&gt;Attaching new patch for current trunk because &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6862&quot; title=&quot;Add api to add user/group to AccessControlList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6862&quot;&gt;&lt;del&gt;HADOOP-6862&lt;/del&gt;&lt;/a&gt; just got merged to trunk.&lt;/p&gt;</comment>
                            <comment id="12896832" author="vinodkv" created="Tue, 10 Aug 2010 10:07:59 +0000"  >&lt;p&gt;Patch looks good. +1.&lt;/p&gt;

&lt;p&gt;We should commit this together with &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1780&quot; title=&quot;AccessControlList.toString() is used for serialization of ACL in JobStatus.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1780&quot;&gt;&lt;del&gt;MAPREDUCE-1780&lt;/del&gt;&lt;/a&gt; so that mapreduce doesn&apos;t get broken.&lt;/p&gt;</comment>
                            <comment id="12897211" author="ravidotg" created="Wed, 11 Aug 2010 10:40:42 +0000"  >&lt;p&gt;Hudson didn&apos;t come back for 1 day.&lt;br/&gt;
I manually ran unit tests and test-patch.&lt;br/&gt;
All unit tests passed.&lt;br/&gt;
test-patch gave:&lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; -1 overall.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 @author.  The patch does not contain any @author tags.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 tests included.  The patch appears to include 3 new or modified tests.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;


&lt;p&gt;I verified that the existing javadoc warnings are not related to this patch.&lt;/p&gt;</comment>
                            <comment id="12897589" author="amareshwari" created="Thu, 12 Aug 2010 06:36:23 +0000"  >&lt;p&gt;I just committed this. Thanks Ravi !&lt;/p&gt;</comment>
                            <comment id="12897596" author="hudson" created="Thu, 12 Aug 2010 07:01:19 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #357 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/357/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/357/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6715&quot; title=&quot;AccessControlList.toString() returns empty string when we set acl to &amp;quot;*&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6715&quot;&gt;&lt;del&gt;HADOOP-6715&lt;/del&gt;&lt;/a&gt;. Fixes AccessControlList.toString() to return a descriptive String representation of the ACL. Contributed by Ravi Gummadi&lt;/p&gt;</comment>
                            <comment id="12897698" author="hudson" created="Thu, 12 Aug 2010 11:22:05 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #422 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/422/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/422/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6715&quot; title=&quot;AccessControlList.toString() returns empty string when we set acl to &amp;quot;*&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6715&quot;&gt;&lt;del&gt;HADOOP-6715&lt;/del&gt;&lt;/a&gt;. Fixes AccessControlList.toString() to return a descriptive String representation of the ACL. Contributed by Ravi Gummadi&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12464122">MAPREDUCE-1780</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12443982" name="6715.20S.6.patch" size="11163" author="ravidotg" created="Fri, 7 May 2010 17:21:02 +0000"/>
                            <attachment id="12451645" name="6715.patch" size="8234" author="ravidotg" created="Tue, 10 Aug 2010 08:01:32 +0000"/>
                            <attachment id="12451652" name="6715.v1.patch" size="10684" author="ravidotg" created="Tue, 10 Aug 2010 09:00:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37038</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02qi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>