<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:35:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-7440] HttpServer.getParameterValues throws NPE for missing parameters</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-7440</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;If the requested parameter was not specified in the request, the raw request&apos;s getParameterValues function returns null. Thus, trying to access &lt;tt&gt;unquoteValue.length&lt;/tt&gt; throws NPE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12512743">HADOOP-7440</key>
            <summary>HttpServer.getParameterValues throws NPE for missing parameters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tlipcon">Todd Lipcon</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jul 2011 21:31:12 +0000</created>
                <updated>Tue, 15 Nov 2011 00:51:06 +0000</updated>
                            <resolved>Tue, 5 Jul 2011 22:10:13 +0000</resolved>
                                    <version>0.23.0</version>
                                    <fixVersion>0.23.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13059626" author="hadoopqa" created="Mon, 4 Jul 2011 22:03:31 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12485182/hadoop-7440.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12485182/hadoop-7440.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1142556.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/691//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/691//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/691//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/691//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/691//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/691//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13059638" author="atm" created="Mon, 4 Jul 2011 23:48:02 +0000"  >&lt;p&gt;+1, looks good to me.&lt;/p&gt;</comment>
                            <comment id="13059666" author="bharathm" created="Tue, 5 Jul 2011 02:58:24 +0000"  >&lt;p&gt;Hi Todd,&lt;/p&gt;

&lt;p&gt;One minor comment: instead of returning null for this function, can we return empty string array? This was the cleanup we have done in the past with couple of JDK APIs. &lt;br/&gt;
The answer was never return null for the array return types. One reason is all the client code needs to check for null condition everywhere. So we should avoid returning null for array types. Do you agree?&lt;/p&gt;

&lt;p&gt;Otherwise, patch looks good.&lt;/p&gt;
</comment>
                            <comment id="13059679" author="devaraj.k" created="Tue, 5 Jul 2011 05:03:04 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7354&quot; title=&quot;NullPointerException in the job tracker UI, when we perform kill or change the priority of jobs without selecting the any job.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7354&quot;&gt;&lt;del&gt;HADOOP-7354&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13059842" author="devaraj.k" created="Tue, 5 Jul 2011 11:26:39 +0000"  >&lt;p&gt;Hi Bharath,&lt;/p&gt;

&lt;p&gt;    As per the specification, it should return null if the parameter does not exist.&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;http://download.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getParameterValues(java.lang.String&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getParameterValues(java.lang.String&lt;/a&gt;)&lt;/p&gt;
&lt;h5&gt;&lt;a name=&quot;getParameterValues&quot;&gt;&lt;/a&gt;getParameterValues&lt;/h5&gt;

&lt;p&gt;String[] getParameterValues(String name)Returns an array of String objects containing all of the values the given request parameter has, or null if the parameter does not exist. &lt;br/&gt;
If the parameter has a single value, the array has a length of 1. &lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;Parameters%3A&quot;&gt;&lt;/a&gt;Parameters:&lt;/h5&gt;
&lt;p&gt;name - a String containing the name of the parameter whose value is requested &lt;/p&gt;
&lt;h5&gt;&lt;a name=&quot;Returns%3A&quot;&gt;&lt;/a&gt;Returns:&lt;/h5&gt;
&lt;p&gt;an array of String objects containing the parameter&apos;s values&lt;/p&gt;
</comment>
                            <comment id="13059851" author="umamaheswararao" created="Tue, 5 Jul 2011 12:05:34 +0000"  >&lt;p&gt;Yes Devaraj,&lt;br/&gt;
Application layer should takecare of handling the null return values. Let us don&apos;t violate the specification.&lt;/p&gt;</comment>
                            <comment id="13059916" author="stevel@apache.org" created="Tue, 5 Jul 2011 14:10:35 +0000"  >&lt;p&gt;+1 for this patch. It propagates the nullness, and leaves it up to the caller to cope with it, as per the servlet specification. &lt;/p&gt;</comment>
                            <comment id="13059983" author="bharathm" created="Tue, 5 Jul 2011 16:20:17 +0000"  >&lt;p&gt;Hi Todd &amp;amp; Devaraj,&lt;/p&gt;

&lt;p&gt;I didn&apos;t see it was a servlet api. One of the problems we saw with propagating nullness to clients is that, clients forget to add these null checks. But we fixed case by case basis since some where fundamental JDK APIs. &lt;/p&gt;

&lt;p&gt;If you just search for how people are using this API, you will note that the following example will throw NPE.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] paramValues = request.getParameterValues(paramName);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (paramValues.length == 1) {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; paramValue = paramValues[0];
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (paramValue.length() == 0)
          out.print(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;I&amp;gt;No Value&amp;lt;/I&amp;gt;&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
          out.print(paramValue);
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;UL&amp;gt;&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0; i&amp;lt;paramValues.length; i++) {
          out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;LI&amp;gt;&quot;&lt;/span&gt; + paramValues[i]);
        }
        out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;/UL&amp;gt;&quot;&lt;/span&gt;);
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;I am proposing, if we are the API users, we should not return null rather return empty array. This will be much cleaner API. Is there any down side in returning empty array? &lt;/p&gt;
</comment>
                            <comment id="13059989" author="bharathm" created="Tue, 5 Jul 2011 16:29:25 +0000"  >&lt;p&gt;To be specific, I am proposing the following. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (unquoteValue == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[0];
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you think, this will confuse the users of this API since users might refer servlet spec then I am fine with Todd&apos;s change.  &lt;/p&gt;
</comment>
                            <comment id="13060154" author="tlipcon" created="Tue, 5 Jul 2011 21:56:08 +0000"  >&lt;p&gt;Since this code is in a filter, which is supposed to be transparent, I don&apos;t think changing the spec would be a good idea.&lt;/p&gt;</comment>
                            <comment id="13060163" author="tlipcon" created="Tue, 5 Jul 2011 22:10:13 +0000"  >&lt;p&gt;I committed this to trunk and credited both Uma and myself. I borrowed Uma&apos;s tests from the other JIRA in addition to my own.&lt;/p&gt;</comment>
                            <comment id="13060170" author="hudson" created="Tue, 5 Jul 2011 22:25:33 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #673 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/673/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/673/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7440&quot; title=&quot;HttpServer.getParameterValues throws NPE for missing parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7440&quot;&gt;&lt;del&gt;HADOOP-7440&lt;/del&gt;&lt;/a&gt;. HttpServer.getParameterValues throws NPE for missing parameters. Contributed by Uma Maheswara Rao G and Todd Lipcon.&lt;/p&gt;

&lt;p&gt;todd : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1143212&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1143212&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/java/org/apache/hadoop/http/HttpServer.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/http/TestHtmlQuoting.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/http/TestHttpServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13060315" author="raviteja" created="Wed, 6 Jul 2011 06:15:23 +0000"  >&lt;p&gt;Hi Todd, I think you have entered the wrong user for the credit, the patch for the other issue was contributed by Devaraj.&lt;/p&gt;</comment>
                            <comment id="13060321" author="tlipcon" created="Wed, 6 Jul 2011 06:39:36 +0000"  >&lt;p&gt;I see that now. Sorry, Devaraj. I misread. Unfortunately there&apos;s no way to edit a commit message.&lt;/p&gt;</comment>
                            <comment id="13060483" author="hudson" created="Wed, 6 Jul 2011 11:14:27 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #739 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk/739/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk/739/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7440&quot; title=&quot;HttpServer.getParameterValues throws NPE for missing parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7440&quot;&gt;&lt;del&gt;HADOOP-7440&lt;/del&gt;&lt;/a&gt;. HttpServer.getParameterValues throws NPE for missing parameters. Contributed by Uma Maheswara Rao G and Todd Lipcon.&lt;/p&gt;

&lt;p&gt;todd : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1143212&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1143212&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/java/org/apache/hadoop/http/HttpServer.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/http/TestHtmlQuoting.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/http/TestHttpServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12485182" name="hadoop-7440.txt" size="2588" author="tlipcon" created="Mon, 4 Jul 2011 21:40:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36898</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02p3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13668</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>