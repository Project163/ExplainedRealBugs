<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:43:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-9774] RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-9774</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;On Windows, when using RawLocalFileSystem.listStatus() to enumerate a relative path (without drive spec), e.g., &quot;file:///mydata&quot;, the resulting paths become absolute paths, e.g., &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;file://E:/mydata/t1.txt&amp;quot;, &amp;quot;file://E:/mydata/t2.txt&amp;quot;...&amp;#93;&lt;/span&gt;.&lt;br/&gt;
Note that if we use it to enumerate an absolute path, e.g., &quot;file://E:/mydata&quot; then the we get the same results as above.&lt;/p&gt;

&lt;p&gt;This breaks some hive unit tests which uses local file system to simulate HDFS when testing, therefore the drive spec is removed. Then after listStatus() the path is changed to absolute path, hive failed to find the path in its map reduce job.&lt;/p&gt;

&lt;p&gt;You&apos;ll see the following exception:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.io.IOException: cannot find dir = pfile:/E:/GitHub/hive-monarch/build/ql/test/data/warehouse/src/kv1.txt in pathToPartitionInfo: &lt;span class=&quot;error&quot;&gt;&amp;#91;pfile:/GitHub/hive-monarch/build/ql/test/data/warehouse/src&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getPartitionDescFromPathRecursively(HiveFileFormatUtils.java:298)&lt;/p&gt;


&lt;p&gt;This problem is introduced by this JIRA:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Prior to the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt; (merged in 0.23.5), the resulting paths are relative paths if the parent paths are relative, e.g., &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;file:///mydata/t1.txt&amp;quot;, &amp;quot;file:///mydata/t2.txt&amp;quot;...&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;This behavior change is a side effect of the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt;, not an intended change. The resulting behavior, even though is legitimate from a function point of view, break consistency from the caller&apos;s point of view. When the caller use a relative path (without drive spec) to do listStatus() the resulting path should be relative. Therefore, I think this should be fixed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12659946">HADOOP-9774</key>
            <summary>RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shanyu">shanyu zhao</assignee>
                                    <reporter username="shanyu">shanyu zhao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jul 2013 00:57:47 +0000</created>
                <updated>Thu, 12 May 2016 18:24:48 +0000</updated>
                            <resolved>Fri, 30 Aug 2013 01:34:44 +0000</resolved>
                                    <version>2.1.0-beta</version>
                    <version>3.0.0-alpha1</version>
                                    <fixVersion>2.1.1-beta</fixVersion>
                                    <component>fs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="13720340" author="shanyu" created="Fri, 26 Jul 2013 01:31:45 +0000"  >&lt;p&gt;Patch attached. Basically on Windows, we can resolve the files against their parent folder, which will result in consistent paths returned. Since &quot;:&quot; is not allowed in file name on Windows, the problem stated in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt; doesn&apos;t exist.&lt;/p&gt;

&lt;p&gt;I tried to come up with a more elegant way by introducing a new Path constructor or re-use other Path constructors, none of them worked in all situations. The Path class is very dangerous to modify and it&apos;s already confusing to readers. I decide to leave it alone.&lt;/p&gt;</comment>
                            <comment id="13720358" author="hadoopqa" created="Fri, 26 Jul 2013 02:30:12 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12594309/HADOOP-9774.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12594309/HADOOP-9774.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2852//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2852//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2852//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2852//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13720849" author="chuanliu" created="Fri, 26 Jul 2013 14:52:07 +0000"  >&lt;p&gt;I think the behavior of &lt;tt&gt;RawLocalFileSystem.listStatus()&lt;/tt&gt; will diverge with this patch, which is not a very good practice. If the intended behavior is the following, we should make it consistent on Linux and Windows in my opinion.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When the caller use a relative path (without drive spec) to do listStatus() the resulting path should be relative.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It will be good to add a unit test case to cover this scenario as well.&lt;/p&gt;</comment>
                            <comment id="13721463" author="shanyu" created="Sat, 27 Jul 2013 01:12:22 +0000"  >&lt;p&gt;The reason why I didn&apos;t add a unit test is because this behavior cannot be tested on Linux. I&apos;m reusing &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt;&apos;s unit test case to verify that this change doesn&apos;t break on Linux.&lt;/p&gt;

&lt;p&gt;In this specific context, by &quot;relative path&quot; I mean a path without a drive spec on Windows, e.g. &quot;file:///mydata&quot; (instead of &quot;file:///E:/mydata&quot;). I do not refer to a relative path in the sense of &quot;../mypath/&quot;. Maybe I should say &quot;Windows relative path&quot;.&lt;/p&gt;</comment>
                            <comment id="13722018" author="ivanmi" created="Sun, 28 Jul 2013 18:16:26 +0000"  >&lt;p&gt;Thanks Shanyu for reporting the problem and the patch.&lt;/p&gt;

&lt;p&gt;A few comments below.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The reason why I didn&apos;t add a unit test is because this behavior cannot be tested on Linux. I&apos;m reusing &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt;&apos;s unit test case to verify that this change doesn&apos;t break on Linux.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Please include a unittest that catches the issue on Windows, otherwise, some other change could break this functionality again.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;I think the behavior of RawLocalFileSystem.listStatus() will diverge with this patch, which is not a very good practice.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I share the same concern.  Now that we realized that &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt; does not work in all scenarios I&apos;d like to consider other options first. I think we can solve this problem in Path properly. There is a comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt; stating that changing Path is scary (what I have to agree with), but at this point, I&apos;d rather go with a clean fix. Others, please comment if you agree.&lt;/p&gt;

&lt;p&gt;The root cause of the problem for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt; is actually in the Path(String, String) constructor, coming from the internal Path URI parsing logic. I don&apos;t think we want to change the parsing logic as that would be really risky. What we can do is change the constructor:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Path(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; parent, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; child) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(parent), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(child));
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;not to create a Path() object directly out of a child path string, but to first create an URI (with assumption that child string is just a path portion of the URI), and then construct the child Path object using this URI. One gotcha to keep in mind is the URI encoding/decoding of escape chars. Otherwise, I think this will work.&lt;/p&gt;</comment>
                            <comment id="13722022" author="ivanmi" created="Sun, 28 Jul 2013 18:30:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;with assumption that child string is just a path portion of the URI&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Actually, looking at the documentation for &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/java/net/URI.html#resolve(java.lang.String)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;URI resolution&lt;/a&gt;, above sentence, although possibly the right thing to do, would be an incompatible change. &lt;/p&gt;

&lt;p&gt;Wouldn&apos;t the following solve both this and problem from &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;results[j] = getFileStatus(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(f, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, names[i])));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13722814" author="shanyu" created="Mon, 29 Jul 2013 18:44:26 +0000"  >&lt;p&gt;Thanks Ivan for chiming in. Actually I&apos;ve tried your suggestions but they don&apos;t work exactly because of the &quot;gotcha&quot; you mentioned:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;One gotcha to keep in mind is the URI encoding/decoding of escape chars.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In the code you posted: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;results[j] = getFileStatus(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(f, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, names[i])));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the names&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; on windows could be &quot;E:\mydata&quot; which will throw exception on new Path(null, null, names&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;) because it is not escaped. So it must be specially handled using a OS specific condition sentence. Like the following code snippet:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// add a slash in front of paths with Windows drive letters
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hasWindowsDrive(pathString) &amp;amp;&amp;amp; pathString.charAt(0) != &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;) {
      pathString = &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + pathString;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is why I chose not to touch Path.java at the beginning. But if we want to do a clean fix (but riskier), I can post a patch for review.&lt;/p&gt;</comment>
                            <comment id="13722980" author="ivanmi" created="Mon, 29 Jul 2013 21:11:58 +0000"  >&lt;p&gt;I see, thanks Shanyu for taking a look!&lt;/p&gt;

&lt;p&gt;Given the new input, I think it makes sense to change the following code in Path:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Path(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; scheme, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; authority, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path) {
    checkPathArg( path );
    initialize(scheme, authority, path, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and do the appropriate path correction on Windows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Path(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; scheme, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; authority, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path) {
    checkPathArg( path );

    &lt;span class=&quot;code-comment&quot;&gt;// add a slash in front of paths with Windows drive letters
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hasWindowsDrive(path, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;))
      pathString = &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;+path;

    initialize(scheme, authority, path, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This in combination with my previous comment should address the problem, and set things right longer term. All Path contractors should be working fine now for Windows absolute paths. Right Shanyu? &lt;/p&gt;

&lt;p&gt;Please also include a Path unittest that catches this Path bug on Windows.&lt;/p&gt;</comment>
                            <comment id="13722983" author="ivanmi" created="Mon, 29 Jul 2013 21:14:45 +0000"  >&lt;p&gt;Another incremental improvement would be to perform hasWindowsDrive() check on a single location in Path, to avoid code duplication. If you can get this part fixed easily (without having to change path parsing logic), let&apos;s do it, otherwise, let&apos;s have it on two places. &lt;/p&gt;</comment>
                            <comment id="13723246" author="shanyu" created="Tue, 30 Jul 2013 01:27:26 +0000"  >&lt;p&gt;Attached is a patch to fix the hadoop path resolution issues (&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt; and this jira) from its root.&lt;/p&gt;

&lt;p&gt;The fundamental cause of issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt; is that the constructor:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Path(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; parent, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; child)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;does not always work as it was intended to be in all scenarios. A simple example is that the relative path represented by &quot;child&quot; could contain colon in the file name, e.g. &quot;a:b/t1.txt&quot;, which cause Path constructor to wrongfully interpret the path. &lt;/p&gt;

&lt;p&gt;One way to fix this problem is to add &quot;./&quot; to the beginning of the child string if it&apos;s not an absolute path (starts with &quot;/&quot;). Also, on Windows, we need to add a slash to the beginning if the child string starts with dive spec, e.g., &quot;E:\data&quot; -&amp;gt; &quot;/E:\data&quot;.&lt;/p&gt;

&lt;p&gt;I added a few Path related test cases, also a new test case to make sure on Windows, the RawLocalFileSystem.listStatus() returns consistent paths.&lt;/p&gt;</comment>
                            <comment id="13723274" author="hadoopqa" created="Tue, 30 Jul 2013 02:07:13 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12594837/HADOOP-9774-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12594837/HADOOP-9774-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.fs.viewfs.TestChRootedFs&lt;br/&gt;
                  org.apache.hadoop.fs.viewfs.TestViewFsTrash&lt;br/&gt;
                  org.apache.hadoop.fs.TestHarFileSystemBasics&lt;br/&gt;
                  org.apache.hadoop.fs.TestFSMainOperationsLocalFileSystem&lt;br/&gt;
                  org.apache.hadoop.fs.viewfs.TestChRootedFileSystem&lt;br/&gt;
                  org.apache.hadoop.fs.TestSymlinkLocalFSFileSystem&lt;br/&gt;
                  org.apache.hadoop.fs.TestLocalFSFileContextMainOperations&lt;br/&gt;
                  org.apache.hadoop.fs.shell.TestPathData&lt;br/&gt;
                  org.apache.hadoop.fs.TestPath&lt;br/&gt;
                  org.apache.hadoop.util.TestGenericOptionsParser&lt;br/&gt;
                  org.apache.hadoop.fs.TestLocal_S3FileContextURI&lt;br/&gt;
                  org.apache.hadoop.fs.TestAfsCheckPath&lt;br/&gt;
                  org.apache.hadoop.fs.TestFsShellCopy&lt;br/&gt;
                  org.apache.hadoop.fs.viewfs.TestViewFsLocalFs&lt;br/&gt;
                  org.apache.hadoop.fs.TestTrash&lt;br/&gt;
                  org.apache.hadoop.fs.viewfs.TestFcMainOperationsLocalFs&lt;br/&gt;
                  org.apache.hadoop.fs.TestFsShellReturnCode&lt;br/&gt;
                  org.apache.hadoop.fs.TestFileSystemCanonicalization&lt;br/&gt;
                  org.apache.hadoop.fs.TestS3_LocalFileContextURI&lt;br/&gt;
                  org.apache.hadoop.fs.s3native.TestInMemoryNativeS3FileSystemContract&lt;br/&gt;
                  org.apache.hadoop.fs.viewfs.TestViewFsWithAuthorityLocalFs&lt;br/&gt;
                  org.apache.hadoop.fs.TestHarFileSystem&lt;br/&gt;
                  org.apache.hadoop.fs.TestLocalDirAllocator&lt;br/&gt;
                  org.apache.hadoop.fs.viewfs.TestFSMainOperationsLocalFileSystem&lt;br/&gt;
                  org.apache.hadoop.fs.TestSymlinkLocalFSFileContext&lt;br/&gt;
                  org.apache.hadoop.fs.shell.TestCopy&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2874//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2874//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2874//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2874//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13723307" author="shanyu" created="Tue, 30 Jul 2013 02:41:02 +0000"  >&lt;p&gt;This v3 of the patch. I created a new constructor with a isRelative parameter so that we don&apos;t change the behavior of old constructor Path(string).&lt;/p&gt;</comment>
                            <comment id="13724193" author="ivanmi" created="Tue, 30 Jul 2013 18:12:05 +0000"  >&lt;p&gt;Thanks Shanyu for additional comments. I also spent some time looking at the problem and it seems to be more complex than I initially thought.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to respond by later in the evening today with my proposal for the fix. My current line of though is the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If we revert things to before &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt; fix we have a problem where file names with colon are not interpreted the way we want them to be. Basically &quot;a:b&quot; will result in an URI with scheme &quot;a&quot;. This behavior is by design and we shouldn&apos;t try to change it.&lt;/li&gt;
	&lt;li&gt;The question is now how to address the problem from &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt;. One approach is to encode URI special characters in the given file name before it is passed to Path. This &quot;seems&quot; like the right thing to do, but I&#8217;ll have to look into it a bit more. It is also not obvious what would encoding mean for the rest of Hadoop codebase (i.e. do we just do a targeted fix for the RLFS scenario?).&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Another possibly relevant factor is that HDFS does not allow colon character in the file name. This means that supporting colon in RLFS does not help in scenarios where we copy HDFS context to RLFS and vice versa. &lt;/p&gt;

&lt;p&gt;In parallel feel free to share your thoughts.&lt;/p&gt;</comment>
                            <comment id="13724419" author="shanyu" created="Tue, 30 Jul 2013 20:59:47 +0000"  >&lt;p&gt;Thanks Ivan for your suggestions. You are right, the Path(String parent, String child) constructor is not designed to accept ONLY relative path in child. There are some unit test cases where child is absolution path like &quot;file:/mydata&quot;. My previous patch failed those cases.&lt;/p&gt;

&lt;p&gt;So basically we cannot support file names with colon in child parameter in constructor Path(String parent, String child). This is because a string like &quot;file:/&quot; can be interpret either as a scheme or a file named &quot;file:&quot;.&lt;/p&gt;

&lt;p&gt;That being said, we can still use the trick Ivan mentioned - the Path(String scheme, String authority, String path) constructor. If we expect the path to contain colon, then we should use this explicit constructor to avoid ambiguity. So we can try adding &quot;./&quot; to the path string in this constructor to deal with colon character.&lt;/p&gt;

&lt;p&gt;Attached is a new patch to implement this idea.&lt;/p&gt;</comment>
                            <comment id="13724454" author="hadoopqa" created="Tue, 30 Jul 2013 21:29:35 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12595042/HADOOP-9774-4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12595042/HADOOP-9774-4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2887//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2887//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2887//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2887//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13729045" author="ivanmi" created="Mon, 5 Aug 2013 00:44:26 +0000"  >&lt;p&gt;Thanks Shanyu! Your proposal from the latest patch looks good.&lt;/p&gt;

&lt;p&gt;Since I had only two minor comments (see below) I went ahead and applied them myself on top of your changes (v5 version of the patch) and also included a few more unittests.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Path.java: checPathArg seems to have a purpose to validate the input, so I would not overload its purpose&lt;/li&gt;
	&lt;li&gt;RawLocalFileSystem.java: I think we should revert to the behavior before &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8962&quot; title=&quot;RawLocalFileSystem.listStatus fails when a child filename contains a colon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8962&quot;&gt;&lt;del&gt;HADOOP-8962&lt;/del&gt;&lt;/a&gt; and just make sure the 3 arg Path constructor is called, such that ambiguity for relative paths with colon is avoided&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;At this point I am +1 on the patch. I think it would be good to get +1 from one more committer before we commit this. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt; you mind taking a quick look? &lt;/p&gt;</comment>
                            <comment id="13729060" author="hadoopqa" created="Mon, 5 Aug 2013 01:20:55 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12595838/HADOOP-9774-5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12595838/HADOOP-9774-5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2921//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2921//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2921//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2921//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13729527" author="jlowe" created="Mon, 5 Aug 2013 14:14:59 +0000"  >&lt;p&gt;The patch looks OK to me as well, but I agree with Ivan that a &lt;tt&gt;Path&lt;/tt&gt; expert should also chime in.&lt;/p&gt;</comment>
                            <comment id="13729545" author="daryn" created="Mon, 5 Aug 2013 14:39:54 +0000"  >&lt;p&gt;Riddling Path with windows conditionals dismays me but I suppose it fixes this problem.  Please run the hdfs FsShell tests.  I think some of them exercise the LFS to ensure the output is correct.  If they pass, +1.&lt;/p&gt;</comment>
                            <comment id="13730374" author="cnauroth" created="Tue, 6 Aug 2013 05:26:33 +0000"  >&lt;p&gt;+1 from me too, but I recommend a full test run before committing (including HDFS, YARN, and MapReduce, not just Common), just because &lt;tt&gt;Path&lt;/tt&gt; is used everywhere and the potential failures can be hard to diagnose.  Thanks for tracking down the problem, Shanyu!&lt;/p&gt;</comment>
                            <comment id="13740739" author="ivanmi" created="Thu, 15 Aug 2013 06:15:32 +0000"  >&lt;p&gt;Shanyu, will you be able to kick off a full test run per Chris&apos; recommendation? If not, I can help with this part so that we can get this change in. &lt;/p&gt;</comment>
                            <comment id="13741212" author="shanyu" created="Thu, 15 Aug 2013 17:20:59 +0000"  >&lt;p&gt;Sure. I actually have run all yarn unit tests on patch v4, I can run another test on v5.&lt;/p&gt;</comment>
                            <comment id="13749060" author="shanyu" created="Fri, 23 Aug 2013 21:59:21 +0000"  >&lt;p&gt;Hi Ivan, would you please run that patch against hdfs, mapreduce and a few other projects? &lt;/p&gt;

&lt;p&gt;I&apos;m still not able to run unit tests even WITHOUT this patch - I got the VM crash error here and there, so I even couldn&apos;t finish one project. This is completely irrelevant to this bug. I even created a bug for the VM crash - &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9896&quot; title=&quot;TestIPC fail on trunk with error VM crash or System.exit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9896&quot;&gt;&lt;del&gt;HADOOP-9896&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13749533" author="cnauroth" created="Sun, 25 Aug 2013 05:14:19 +0000"  >&lt;p&gt;I&apos;ve completed a full test run for all sub-projects with this patch on Windows, and there was no negative impact.  I think we just need some additional confirmation on Linux at this point.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivanmi&quot; class=&quot;user-hover&quot; rel=&quot;ivanmi&quot;&gt;ivanmi&lt;/a&gt;, would you mind taking care of the commit after all testing has been addressed?  I&apos;m going to be mostly offline until 9/2.&lt;/p&gt;</comment>
                            <comment id="13749853" author="ivanmi" created="Mon, 26 Aug 2013 06:17:15 +0000"  >&lt;p&gt;Sure Shanyu, Chris. Let me kick off the tests tonight and I&apos;ll reply back.&lt;/p&gt;</comment>
                            <comment id="13752193" author="ivanmi" created="Wed, 28 Aug 2013 07:48:55 +0000"  >&lt;p&gt;Sorry Shanyu for the delay, my linux machine got into a bad state, trying to setup a new one. Will respond once I validate the patch.&lt;/p&gt;</comment>
                            <comment id="13752687" author="shanyu" created="Wed, 28 Aug 2013 18:31:35 +0000"  >&lt;p&gt;Thank you Ivan. I actually was able to run all unit tests on hadoop trunk on Linux. I didn&apos;t observe any negative impact by this patch. Would you please commit this patch?&lt;/p&gt;</comment>
                            <comment id="13754137" author="ivanmi" created="Thu, 29 Aug 2013 22:24:51 +0000"  >&lt;p&gt;Thanks Shanyu for the confirmation! Will commit the patch shortly. &lt;/p&gt;</comment>
                            <comment id="13754274" author="hudson" created="Fri, 30 Aug 2013 01:15:53 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4350 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4350/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4350/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9774&quot; title=&quot;RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9774&quot;&gt;&lt;del&gt;HADOOP-9774&lt;/del&gt;&lt;/a&gt;. RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows. Contributed by Shanyu Zhao. (ivanmi: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1518865&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1518865&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestPath.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13754296" author="ivanmi" created="Fri, 30 Aug 2013 01:36:13 +0000"  >&lt;p&gt;Committed to trunk, branch-2 and branch-2.1-beta. Thank you Shanyu for the contribution!&lt;/p&gt;</comment>
                            <comment id="13754583" author="hudson" created="Fri, 30 Aug 2013 10:56:09 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #317 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/317/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/317/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9774&quot; title=&quot;RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9774&quot;&gt;&lt;del&gt;HADOOP-9774&lt;/del&gt;&lt;/a&gt;. RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows. Contributed by Shanyu Zhao. (ivanmi: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1518865&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1518865&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestPath.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13754668" author="hudson" created="Fri, 30 Aug 2013 13:14:19 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1507 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1507/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1507/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9774&quot; title=&quot;RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9774&quot;&gt;&lt;del&gt;HADOOP-9774&lt;/del&gt;&lt;/a&gt;. RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows. Contributed by Shanyu Zhao. (ivanmi: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1518865&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1518865&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestPath.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13754744" author="hudson" created="Fri, 30 Aug 2013 14:45:35 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1534 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1534/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1534/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9774&quot; title=&quot;RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9774&quot;&gt;&lt;del&gt;HADOOP-9774&lt;/del&gt;&lt;/a&gt;. RawLocalFileSystem.listStatus() return absolute paths when input path is relative on Windows. Contributed by Shanyu Zhao. (ivanmi: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1518865&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1518865&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestLocalFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestPath.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14381979" author="hasonhai" created="Thu, 26 Mar 2015 14:42:08 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
Kmeans algorythm also has problem with this in Centos with HDP 2.2. When kmeans is running, the intermediate result was stored on HDFS, but it look for the cluster directory on local file system and then fire out FileNotFound exception. To solve this, we had to specify the absolute path when using kmeans. Can anyone reopen the issues and check it? it took me several hours just to figure out the problem.&lt;/p&gt;</comment>
                            <comment id="14381982" author="hasonhai" created="Thu, 26 Mar 2015 14:44:25 +0000"  >&lt;p&gt;I&apos;m Sorry, I post on the wrong thread. I should post it on Mahout&apos;s place.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12613055">HADOOP-8962</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12594837" name="HADOOP-9774-2.patch" size="5304" author="shanyu" created="Tue, 30 Jul 2013 01:27:26 +0000"/>
                            <attachment id="12594847" name="HADOOP-9774-3.patch" size="5942" author="shanyu" created="Tue, 30 Jul 2013 02:41:02 +0000"/>
                            <attachment id="12595042" name="HADOOP-9774-4.patch" size="5355" author="shanyu" created="Tue, 30 Jul 2013 20:59:47 +0000"/>
                            <attachment id="12595838" name="HADOOP-9774-5.patch" size="5541" author="ivanmi" created="Mon, 5 Aug 2013 00:44:26 +0000"/>
                            <attachment id="12594309" name="HADOOP-9774.patch" size="932" author="shanyu" created="Fri, 26 Jul 2013 01:31:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mnyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340456</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324807">2.1.1-beta</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>