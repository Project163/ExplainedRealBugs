<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:44:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-10090] Jobtracker metrics not updated properly after execution of a mapreduce job</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-10090</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;After executing a wordcount mapreduce sample job, jobtracker metrics are not updated properly. Often times the response from the jobtracker has higher number of job_completed than job_submitted (for example 8 jobs completed and 7 jobs submitted). &lt;/p&gt;

&lt;p&gt;Issue reported by Toma Paunovic.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12678588">HADOOP-10090</key>
            <summary>Jobtracker metrics not updated properly after execution of a mapreduce job</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ivanmi">Ivan Mitic</assignee>
                                    <reporter username="ivanmi">Ivan Mitic</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Nov 2013 14:48:32 +0000</created>
                <updated>Mon, 24 Feb 2014 20:58:23 +0000</updated>
                            <resolved>Thu, 26 Dec 2013 19:55:52 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>1-win</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13819010" author="ivanmi" created="Mon, 11 Nov 2013 15:01:10 +0000"  >&lt;p&gt;I was able to repro the problem by looking at JMX metrics thru jconsole. See attached screenshot.&lt;/p&gt;

&lt;p&gt;The bug appears to be coming from how the JMX metrics cache is managed in MetricsSourceAdapter.java. To be more specific:&lt;br/&gt;
a) MetricsSourceAdapter keeps track of the latest metrics records obtained from the call into MetricsSource#getMetrics (see MetricsSourceAdapter#getMetrics)&lt;br/&gt;
b) Metrics system timer thread which periodically polls on all sources, only polls for the metrics that have changed (not all metrics)&lt;/p&gt;

&lt;p&gt;Scenario from this bug (JobTracker metrics):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Let&apos;s assume that the timer runs once per minute&lt;/li&gt;
	&lt;li&gt;At time 0, there were 0 jobs_submitted and 0 jobs_completed, and internal JMX cache reflects this state&lt;/li&gt;
	&lt;li&gt;At time t1, MetricsSystem timer thread runs and there were 1 jobs_submitted, and 0 jobs_completed. Internal JMX cache is not updated.&lt;/li&gt;
	&lt;li&gt;At time t1 + 0.5 minutes, above job is completed, and jobs_completed counter is set to 1.&lt;/li&gt;
	&lt;li&gt;At time t1 + 1 minute, MetricsSystem timer thread runs, and only jobs_completed metric changes from 0 to 1. Internal MetricsSourceAdapter &lt;tt&gt;lastRecs&lt;/tt&gt; contains only jobs_completed metric.&lt;/li&gt;
	&lt;li&gt;At time t1 + 1 minute + delta, JMX is polled for the current metrics, the current cache is updated using the current &lt;tt&gt;lastRecs&lt;/tt&gt;, and the final outcome is jobs_submitted = 0, jobs_completed = 1.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Since it is not obvious to me what is the intended behavior around metrics reported thru JMX is, I see two possible directions for the fix:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;JMX always reports the latest snapshot obtained by the MetricsSystem timer thread. This means that JMX does not report the fresh/current metrics state. Each time metrics are fetched from the timer thread, internal MetricsSourceAdapter JMX cache would be refreshed to keep the state in sync.&lt;/li&gt;
	&lt;li&gt;JMX always reports the current metric values (with small TTL on the internal cache). In this design, MetricsSourceAdapter would (almost) always have to poll on the source for JMX. Additionally, there would have to be means to mark the source as dirty internally when this happens, to guarantee that the next time timer thread polls for metrics, all metrics are returned (see b. from above).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Option 2 is definitely nicer from users perspective as JMX reflects the current in-memory state of servers. &lt;/p&gt;

&lt;p&gt;Please comment back with your thoughts/recommendations.&lt;/p&gt;</comment>
                            <comment id="13820293" author="cnauroth" created="Tue, 12 Nov 2013 18:11:00 +0000"  >&lt;p&gt;Another possibility could be to change &lt;tt&gt;MetricsSourceAdapter#getMetrics&lt;/tt&gt; to combine the prior elements of a non-null &lt;tt&gt;lastRecs&lt;/tt&gt; with the new values.  Right now, it&apos;s just a complete overwrite, so &quot;unconsumed&quot; values from the prior run get dropped.  If we combine, then we might need to de-duplicate (not simply append), and I haven&apos;t yet thought about whether or not this brings additional complexity.&lt;/p&gt;</comment>
                            <comment id="13820390" author="cnauroth" created="Tue, 12 Nov 2013 19:51:04 +0000"  >&lt;p&gt;Thinking about this some more, I&apos;m in favor of Ivan&apos;s proposal #2.  This would have the side effect of lower cache hit rate/higher frequency of pulling metrics from their sources.  From what I can tell, this is acceptable, because JMX queries haven&apos;t been a source of bottlenecks or high load.  (Others, please comment if you know otherwise.)&lt;/p&gt;</comment>
                            <comment id="13820394" author="cnauroth" created="Tue, 12 Nov 2013 19:56:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vicaya&quot; class=&quot;user-hover&quot; rel=&quot;vicaya&quot;&gt;vicaya&lt;/a&gt;, can we get your opinion on this before we proceed with a patch?  Thanks!&lt;/p&gt;</comment>
                            <comment id="13820421" author="vicaya" created="Tue, 12 Nov 2013 20:37:25 +0000"  >&lt;p&gt;I was aware of the suboptimal behavior and hoped it&apos;d be OK for metrics, which don&apos;t require strong consistency.&lt;/p&gt;

&lt;p&gt;#1 incurs unnecessary overhead (updating jmx cache) for people who don&apos;t use JMX. This is the reason of the current cache logic.&lt;br/&gt;
#2 is risky, as we don&apos;t know all existing jmx query patterns (especially due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-5333&quot; title=&quot;Improvement of current HDFS Web UI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-5333&quot;&gt;&lt;del&gt;HDFS-5333&lt;/del&gt;&lt;/a&gt;). User (admins) actually already has a choice to use a small JMX cache TTL for refreshness.&lt;/p&gt;

&lt;p&gt;How about #3: we only initialize and update the JMX cache when JMX is first used and stops updating after a period inactivity and reinitialize and update JMX cache upon activity. Initialize/reinitialize is a &quot;dense&quot; update, while &quot;update&quot; means the &quot;sparse&quot; update with the current lastRecs mechanisms. I think #3 is should be a fairly straightforward patch and more flexible than #1 and #2.&lt;/p&gt;</comment>
                            <comment id="13820662" author="ivanmi" created="Tue, 12 Nov 2013 23:38:51 +0000"  >&lt;p&gt;Thanks a lot Chris and Luke for commenting!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How about #3: we only initialize and update the JMX cache when JMX is first used and stops updating after a period inactivity and reinitialize and update JMX cache upon activity. Initialize/reinitialize is a &quot;dense&quot; update, while &quot;update&quot; means the &quot;sparse&quot; update with the current lastRecs mechanisms. I think #3 is should be a fairly straightforward patch and more flexible than #1 and #2.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Luke, I&apos;m not sure where #3 differs from #2. #2 basically says that each time JMX is queried, if TTL has exceeded, we update the internal cache and return the values. If TTL is not exceeded, we return the cached values. There are no updates in scenarios where users do not query JMX (metrics system timer thread does not trigger a cache update). We just have to make sure that when JMX is indeed queried, the next time the timer thread runs, we poll for all metric values (not just the ones that have changed &amp;#8211; I think this is the current behavior as well).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Thinking about this some more, I&apos;m in favor of Ivan&apos;s proposal #2. This would have the side effect of lower cache hit rate/higher frequency of pulling metrics from their sources. From what I can tell, this is acceptable, because JMX queries haven&apos;t been a source of bottlenecks or high load. (Others, please comment if you know otherwise.)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks Chris. I am also leaning in this direction, assuming that there aren&apos;t any gotchas that I did not know about &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13822313" author="ivanmi" created="Thu, 14 Nov 2013 11:02:25 +0000"  >&lt;p&gt;Hi Chris, Luke,&lt;/p&gt;

&lt;p&gt;I am attaching the fix for the #2 approach. The patch includes a unittest that catches the problem.&lt;/p&gt;

&lt;p&gt;This fix relaxes the &quot;inconsistent result&quot; issue, however it does not eliminate it completely. JMX will always return complete result, but the sink might miss some changes. The problem is that MetricsSourceAdapter must synchronize its calls to MetricsSource#getMetrics, otherwise, we can have two concurrent threads snapshotting the metrics, leading to one of them not getting all metrics that had changed (if &quot;all&quot; is not specified, like in the sink case). Because of the issue described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt; it is not possible to just add a lock as it can introduce a deadlock (we would also have to eliminate the system source issue).&lt;/p&gt;

&lt;p&gt;Let me know what you think. &lt;/p&gt;</comment>
                            <comment id="13822772" author="vicaya" created="Thu, 14 Nov 2013 18:57:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m not sure where #3 differs from #2.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;#3 is an improvement of #2, where cache TTL &amp;gt; regular snapshot interval, where jmx will get at least the same freshness of sinks, even with a longer TTL. Anyway, it appears #2 is easier to understand and serves typical use case (cache TTL &amp;lt; regular snapshot interval) well enough. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;JMX will always return complete result, but the sink might miss some changes&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You patch already introduced forceAllMetricsOnSource &lt;em&gt;after&lt;/em&gt; TTL expiry, it might be able to eliminate the problem with following changes?&lt;/p&gt;

&lt;p&gt;Comments on the patch:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;forceAllMetricsOnSource doesn&apos;t need to be volatile as it&apos;s always read/written in synchronized sections.&lt;/li&gt;
	&lt;li&gt;updateJmxCache now copies some logic of getMetrics and doesn&apos;t work with source metrics filtering (a feature regression). It seems to me that you can still reuse getMetrics by adding a check &lt;tt&gt;if (!calledWithAll)&lt;/tt&gt; for resetting forceAllMetricsOnSource to false, so that next sink update will be consistent?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13822816" author="cnauroth" created="Thu, 14 Nov 2013 19:44:43 +0000"  >&lt;p&gt;Here is a thought regarding the system source issue and reintroducing synchronization around &lt;tt&gt;MetricsSource#getMetrics&lt;/tt&gt; calls.&lt;/p&gt;

&lt;p&gt;My understanding of the &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt; deadlock is that we had a lock ordering conflict between a JMX thread (locking &lt;tt&gt;MetricsSourceAdapter&lt;/tt&gt; and then &lt;tt&gt;MetricsSystemImpl&lt;/tt&gt;) and a snapshotting thread (locking &lt;tt&gt;MetricsSystemImpl&lt;/tt&gt; and then &lt;tt&gt;MetricsSourceAdapter&lt;/tt&gt;).  &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt; resolved the deadlock by releasing the lock on the &lt;tt&gt;MetricsSourceAdapter&lt;/tt&gt; before calling &lt;tt&gt;MetricsSource#getMetrics&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;What if instead we do the following:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Change &lt;tt&gt;MetricsSourceAdapter#getMetrics&lt;/tt&gt; as follows:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  Iterable&amp;lt;MetricsRecordImpl&amp;gt; getMetrics(MetricsBuilderImpl builder,
                                         &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; all) {
    &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (source) {
      &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;) {
        &lt;span class=&quot;code-comment&quot;&gt;// existing method logic here
&lt;/span&gt;      }
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Change &lt;tt&gt;MetricsSystemImpl&lt;/tt&gt; so that it implements &lt;tt&gt;MetricsSource&lt;/tt&gt; directly instead of using an anonymous inner class.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The first part synchronizes &lt;tt&gt;getMetrics&lt;/tt&gt; calls using a locking order that&apos;s consistent with the snapshotting threads.  The second part is required so that the first part&apos;s synchronization on the source is really synchronizing on the &lt;tt&gt;MetricsSystemImpl&lt;/tt&gt; instance instead of the separate anonymous inner class instance.&lt;/p&gt;</comment>
                            <comment id="13823152" author="vicaya" created="Fri, 15 Nov 2013 00:17:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt;: That&apos;s a good idea. I actually thought about doing that for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;, as MetricsSystemImpl is already implementing MetricsSource in trunk.&lt;/p&gt;

&lt;p&gt;OTOH, this seems to be no longer an issue in trunk due to &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt;, which disabled sparse update completely. I was not aware of that until now. In retrospect, I probably should&apos;ve done that by default, as all the sinks except the first (and then sole) production sink that the system was designed for cannot handle sparse updates anyway. I still cringe at wasting resource snapshotting all the &quot;failure&quot; metrics that don&apos;t change much. Maybe I&apos;ll scratch that itch one day. &lt;/p&gt;</comment>
                            <comment id="13823173" author="ivanmi" created="Fri, 15 Nov 2013 00:56:25 +0000"  >&lt;p&gt;Thanks folks, this sounds promising. Let me take a look and try to code this up.&lt;/p&gt;

&lt;p&gt;Luke, do you think we should backport &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt;? Looks like an incompatible change so not sure whether we want it back to 1.0 line.&lt;/p&gt;</comment>
                            <comment id="13823960" author="ivanmi" created="Fri, 15 Nov 2013 19:08:29 +0000"  >&lt;p&gt;Attaching the updated patch which implements what was discussed above. All metrics unittests are passing. Will do a bit more testing separately. &lt;/p&gt;</comment>
                            <comment id="13824029" author="cnauroth" created="Fri, 15 Nov 2013 19:56:26 +0000"  >&lt;p&gt;Thanks, Ivan.  This looks right to me.  Thanks for catching the locking order in &lt;tt&gt;updateJmxCache&lt;/tt&gt; too.  (I had forgotten that this would be trying to take the lock on &lt;tt&gt;this&lt;/tt&gt; before calling &lt;tt&gt;getMetrics&lt;/tt&gt;, which would have invalidated the logic I described above.)  I verified that the new test is passing on Mac.&lt;/p&gt;

&lt;p&gt;Just one very minor nit: &lt;tt&gt;TestMetricsSourceAdapter#testJmx&lt;/tt&gt; could say &lt;tt&gt;throws Exception&lt;/tt&gt; instead of listing the various exception types.  Since it&apos;s a test, and any exception is unexpected, I think throwing the base &lt;tt&gt;Exception&lt;/tt&gt; class is acceptable, and it shrinks the code size a little.&lt;/p&gt;

&lt;p&gt;Shall we do a trunk patch too?  Like Luke said, this seems to be a moot point due to &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt;, but perhaps it&apos;s best to keep the code lines in sync as much as possible.&lt;/p&gt;</comment>
                            <comment id="13824041" author="vicaya" created="Fri, 15 Nov 2013 20:07:38 +0000"  >&lt;p&gt;I now recalled some hesitation of extra lock on source:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;It could adversely affect the application performance buy holding the source lock while doing a snapshot. Currently source have a choice on whether and how the snapshot should be synchronized or not depending on the nature of the metrics involved. In many cases, source is implemented by a real object the has application locking logic. Holding a lock doing a potentially large snapshot (many metrics) &lt;em&gt;could&lt;/em&gt; increase lock contention significantly.&lt;/li&gt;
	&lt;li&gt;Locking far away from the object is consider an anti-pattern that makes it hard to reason about locking by looking at the source only.&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;&lt;p&gt;do you think we should backport &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt;? Looks like an incompatible change so not sure whether we want it back to 1.0 line.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Always update all should be a compatible change, semantic wise, besides extra objects for non-changing metrics.  It seems that simply backporting the one line change (all is true always) from &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt; (and keeping the test) is less risky to change the locking mechanisms.&lt;/p&gt;</comment>
                            <comment id="13824105" author="ivanmi" created="Fri, 15 Nov 2013 21:18:48 +0000"  >&lt;p&gt;Thanks Chris and Luke.&lt;/p&gt;

&lt;p&gt;Luke, I tend to agree with the risk part.&lt;/p&gt;

&lt;p&gt;I guess we have a couple of options on the table:&lt;br/&gt;
#1: We lock the source and use this to guarantee consistency of metrics reported thru sinks.&lt;br/&gt;
#2. We go with my first patch attached (I just have address the feedback). This will guarantee that JMX returns back consistent state. Sinks on the other hand can get back partial results (same as what we have today in branch-1).&lt;br/&gt;
#3. We go with my first patch + &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt;. This will address the problem from this Jira + consistent results for sinks. &lt;/p&gt;

&lt;p&gt;Given our conversation from above, my preference is to go with #2. If we believe that &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt; makes sense for branch-1, I would prefer to do it as a separate Jira.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;

&lt;p&gt;It&apos;s definitely not easy to make the call... at least on my side... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;PS. Shall we do a trunk patch too?&lt;br/&gt;
I believe we&apos;ll want to do a trunk patch too. Haven&apos;t tried to repro the problem there yet though. &lt;/p&gt;</comment>
                            <comment id="13824183" author="cnauroth" created="Fri, 15 Nov 2013 22:28:49 +0000"  >&lt;p&gt;I think Ivan&apos;s last proposal sounds good: get in the JMX part of the patch now, including changes for Luke&apos;s last round of feedback, and then queue up a separate jira for consistency around the sinks.  Consistency around the sinks seems like the riskier change, so this is a good way to manage the risk.&lt;/p&gt;</comment>
                            <comment id="13824237" author="vicaya" created="Fri, 15 Nov 2013 23:25:52 +0000"  >&lt;p&gt;It seems to me that just porting the one line change from &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt; will fix the problem and less risky? The unit test in the current patch is still useful.&lt;/p&gt;

&lt;p&gt;Consistent issue should be fixed in trunk due to &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13825465" author="ivanmi" created="Mon, 18 Nov 2013 16:48:56 +0000"  >&lt;p&gt;Attaching a patch that goes with option #2 and addresses all the comments.&lt;/p&gt;

&lt;p&gt;Luke, doing only the backport is not enough, the bug from this Jira will remain. &lt;/p&gt;

&lt;p&gt;Now we have to decide whether to do the backport in this Jira or not. Whether we do it now or separately, I&apos;d recommend that we change MetricsSourceAdapter#getMetrics signature only to accept MetricsBuilderImpl parameter. This is a package private method so this change should be ok. Thoughts?&lt;/p&gt;
</comment>
                            <comment id="13825516" author="vicaya" created="Mon, 18 Nov 2013 17:39:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;doing only the backport is not enough, the bug from this Jira will remain. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I must be missing something obvious. Why would the bug remain if lastRecs always contains a complete snapshot?&lt;/p&gt;</comment>
                            <comment id="13825750" author="ivanmi" created="Mon, 18 Nov 2013 20:31:44 +0000"  >&lt;p&gt;I think you are right Luke, my mistake. Let me check again. Do you think we should keep the current interfaces intact?&lt;/p&gt;</comment>
                            <comment id="13829450" author="ivanmi" created="Thu, 21 Nov 2013 23:12:40 +0000"  >&lt;p&gt;Attaching a new patch that backports &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1043&quot; title=&quot;YARN Queue metrics are getting pushed to neither file nor Ganglia&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1043&quot;&gt;&lt;del&gt;YARN-1043&lt;/del&gt;&lt;/a&gt;. Will also prepare a trunk patch with a unittest if this looks good.&lt;/p&gt;</comment>
                            <comment id="13829460" author="cnauroth" created="Thu, 21 Nov 2013 23:20:50 +0000"  >&lt;p&gt;+1 for version 4 of the branch-1 patch.&lt;/p&gt;

&lt;p&gt;I also was mistaken in thinking there were 2 separate race conditions: one around the JMX cache and another around the update from the metrics sources.  If always pushing all metrics is sufficient to fix the problem in Ivan&apos;s tests, then I think we&apos;re good.&lt;/p&gt;</comment>
                            <comment id="13830141" author="ivanmi" created="Fri, 22 Nov 2013 17:33:42 +0000"  >&lt;p&gt;Thanks Chris!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vicaya&quot; class=&quot;user-hover&quot; rel=&quot;vicaya&quot;&gt;vicaya&lt;/a&gt; do you mind taking a quick look?&lt;/p&gt;</comment>
                            <comment id="13830403" author="vicaya" created="Fri, 22 Nov 2013 23:14:22 +0000"  >&lt;p&gt;The 1.4 patch lgtm. +1. &lt;/p&gt;</comment>
                            <comment id="13856506" author="ivanmi" created="Wed, 25 Dec 2013 01:31:23 +0000"  >&lt;p&gt;Thanks Luke for the review.&lt;/p&gt;

&lt;p&gt;Attaching the updated version of the patch that modifies the test case such that it makes more sense given the current implementation. &lt;/p&gt;

&lt;p&gt;Will also forward port the test case to trunk, and commit once I receive a +1 from Jenkins. &lt;/p&gt;</comment>
                            <comment id="13856507" author="ivanmi" created="Wed, 25 Dec 2013 01:31:41 +0000"  >&lt;p&gt;Attaching the trunk patch.&lt;/p&gt;</comment>
                            <comment id="13856526" author="hadoopqa" created="Wed, 25 Dec 2013 05:58:16 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620392/HADOOP-10090.trunk.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620392/HADOOP-10090.trunk.5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;        &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/3379//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/3379//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/3379//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/3379//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/3379//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/3379//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13856532" author="ivanmi" created="Wed, 25 Dec 2013 06:38:08 +0000"  >&lt;p&gt;Fixing the audit warning.&lt;/p&gt;</comment>
                            <comment id="13856536" author="hadoopqa" created="Wed, 25 Dec 2013 07:13:26 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12620400/HADOOP-10090.trunk.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12620400/HADOOP-10090.trunk.6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/3380//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/3380//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/3380//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/3380//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13857040" author="ivanmi" created="Thu, 26 Dec 2013 19:55:52 +0000"  >&lt;p&gt;Patch committed to branch-1, branch-1-win, trunk and branch-2.&lt;/p&gt;

&lt;p&gt;Thank you Chris and Luke for the review!&lt;/p&gt;</comment>
                            <comment id="13857041" author="hudson" created="Thu, 26 Dec 2013 19:57:32 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #4928 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4928/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4928/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10090&quot; title=&quot;Jobtracker metrics not updated properly after execution of a mapreduce job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10090&quot;&gt;&lt;del&gt;HADOOP-10090&lt;/del&gt;&lt;/a&gt;. Jobtracker metrics not updated properly after execution of a mapreduce job. Contributed by Ivan Mitic. (ivanmi: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553561&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/metrics2/impl/TestMetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13857437" author="hudson" created="Fri, 27 Dec 2013 11:01:28 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #434 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/434/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/434/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10090&quot; title=&quot;Jobtracker metrics not updated properly after execution of a mapreduce job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10090&quot;&gt;&lt;del&gt;HADOOP-10090&lt;/del&gt;&lt;/a&gt;. Jobtracker metrics not updated properly after execution of a mapreduce job. Contributed by Ivan Mitic. (ivanmi: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553561&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/metrics2/impl/TestMetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13857484" author="hudson" created="Fri, 27 Dec 2013 13:26:56 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1625 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1625/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1625/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10090&quot; title=&quot;Jobtracker metrics not updated properly after execution of a mapreduce job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10090&quot;&gt;&lt;del&gt;HADOOP-10090&lt;/del&gt;&lt;/a&gt;. Jobtracker metrics not updated properly after execution of a mapreduce job. Contributed by Ivan Mitic. (ivanmi: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553561&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/metrics2/impl/TestMetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13857508" author="hudson" created="Fri, 27 Dec 2013 14:46:50 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1651 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1651/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1651/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10090&quot; title=&quot;Jobtracker metrics not updated properly after execution of a mapreduce job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10090&quot;&gt;&lt;del&gt;HADOOP-10090&lt;/del&gt;&lt;/a&gt;. Jobtracker metrics not updated properly after execution of a mapreduce job. Contributed by Ivan Mitic. (ivanmi: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1553561&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/metrics2/impl/TestMetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12542022">HADOOP-8050</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12662484">YARN-1043</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12614109" name="HADOOP-10090.branch-1.2.patch" size="10317" author="ivanmi" created="Fri, 15 Nov 2013 19:08:29 +0000"/>
                            <attachment id="12614420" name="HADOOP-10090.branch-1.3.patch" size="6962" author="ivanmi" created="Mon, 18 Nov 2013 16:48:56 +0000"/>
                            <attachment id="12615219" name="HADOOP-10090.branch-1.4.patch" size="3506" author="ivanmi" created="Thu, 21 Nov 2013 23:12:40 +0000"/>
                            <attachment id="12620391" name="HADOOP-10090.branch-1.5.patch" size="3176" author="ivanmi" created="Wed, 25 Dec 2013 01:31:23 +0000"/>
                            <attachment id="12620399" name="HADOOP-10090.branch-1.6.patch" size="4002" author="ivanmi" created="Wed, 25 Dec 2013 06:37:39 +0000"/>
                            <attachment id="12613817" name="HADOOP-10090.branch-1.patch" size="7033" author="ivanmi" created="Thu, 14 Nov 2013 11:06:23 +0000"/>
                            <attachment id="12620392" name="HADOOP-10090.trunk.5.patch" size="2863" author="ivanmi" created="Wed, 25 Dec 2013 01:31:41 +0000"/>
                            <attachment id="12620400" name="HADOOP-10090.trunk.6.patch" size="3689" author="ivanmi" created="Wed, 25 Dec 2013 06:38:08 +0000"/>
                            <attachment id="12613165" name="OneBoxRepro.png" size="41798" author="ivanmi" created="Mon, 11 Nov 2013 15:01:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>357955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pph3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358245</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324327">1.3.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>