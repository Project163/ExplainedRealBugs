<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:42:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-9126] FormatZK and ZKFC startup can fail due to zkclient connection establishment delay</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-9126</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Format and ZKFC startup flows continue further after creation of zkclient connection without waiting to check whether the connection is completely established. This  leads to failure at the subsequent point if connection was not complete by then.&lt;/p&gt;

&lt;p&gt;Exception trace for format &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;12/05/30 19:48:24 INFO zookeeper.ClientCnxn: Socket connection established to HOST-xx-xx-xx-55/xx.xx.xx.55:2182, initiating session
12/05/30 19:48:24 INFO zookeeper.ClientCnxn: Session establishment complete on server HOST-xx-xx-xx-55/xx.xx.xx.55:2182, sessionid = 0x1379da4660c0014, negotiated timeout = 5000
12/05/30 19:48:24 WARN ha.ActiveStandbyElector: Ignoring stale result from old client with sessionId 0x1379da4660c0014
12/05/30 19:48:24 INFO zookeeper.ZooKeeper: Session: 0x1379da4660c0014 closed
12/05/30 19:48:24 INFO zookeeper.ClientCnxn: EventThread shut down
Exception in thread &quot;main&quot; java.io.IOException: Couldn&apos;t determine existence of znode &apos;/hadoop-ha/hacluster&apos;
        at org.apache.hadoop.ha.ActiveStandbyElector.parentZNodeExists(ActiveStandbyElector.java:263)
        at org.apache.hadoop.ha.ZKFailoverController.formatZK(ZKFailoverController.java:257)
        at org.apache.hadoop.ha.ZKFailoverController.doRun(ZKFailoverController.java:195)
        at org.apache.hadoop.ha.ZKFailoverController.access$000(ZKFailoverController.java:58)
        at org.apache.hadoop.ha.ZKFailoverController$1.run(ZKFailoverController.java:163)
        at org.apache.hadoop.ha.ZKFailoverController$1.run(ZKFailoverController.java:159)
        at org.apache.hadoop.security.SecurityUtil.doAsLoginUserOrFatal(SecurityUtil.java:438)
        at org.apache.hadoop.ha.ZKFailoverController.run(ZKFailoverController.java:159)
        at org.apache.hadoop.hdfs.tools.DFSZKFailoverController.main(DFSZKFailoverController.java:171)
Caused by: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hadoop-ha/hacluster
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:99)
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
        at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:1021)
        at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:1049)
        at org.apache.hadoop.ha.ActiveStandbyElector.parentZNodeExists(ActiveStandbyElector.java:261)
        ... 8 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12558603">HADOOP-9126</key>
            <summary>FormatZK and ZKFC startup can fail due to zkclient connection establishment delay</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rakeshr">Rakesh Radhakrishnan</assignee>
                                    <reporter username="suja">suja s</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 May 2012 14:15:07 +0000</created>
                <updated>Thu, 2 May 2013 02:29:54 +0000</updated>
                            <resolved>Mon, 10 Dec 2012 22:13:10 +0000</resolved>
                                    <version>2.0.0-alpha</version>
                                                    <component>auto-failover</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="13285699" author="rakeshr" created="Wed, 30 May 2012 14:28:46 +0000"  >&lt;p&gt;ActiveStandbyElector is missing the checks for SyncConnected event and not waiting for the connection establishment. I think we would be having a connection timeout associated with zk client and if it doesn&apos;t get the connection after this period throw exception saying &apos;unable to establish connection with zk server&apos;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;protected synchronized ZooKeeper getNewZooKeeper() throws IOException {
    ZooKeeper zk = new ZooKeeper(zkHostPort, zkSessionTimeout, null);    
    zk.register(new WatcherWithClientRef(zk));
    .......
    .......
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13286930" author="tlipcon" created="Thu, 31 May 2012 20:57:51 +0000"  >&lt;p&gt;Do you want to take a crack at a patch, Rakesh?&lt;/p&gt;</comment>
                            <comment id="13287361" author="rakeshr" created="Fri, 1 Jun 2012 12:40:11 +0000"  >&lt;p&gt;Attached patch. I have reused zkSessionTimeout as waiting period for zk connection establishment.&lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="13287383" author="hadoopqa" created="Fri, 1 Jun 2012 13:15:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12530543/HDFS-3477.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12530543/HDFS-3477.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ha.TestZKFailoverController&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2564//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2564//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2564//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2564//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13287486" author="hadoopqa" created="Fri, 1 Jun 2012 15:44:17 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12530557/HDFS-3477.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12530557/HDFS-3477.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2565//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2565//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2565//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2565//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13287734" author="tlipcon" created="Fri, 1 Jun 2012 22:21:21 +0000"  >&lt;p&gt;Nice work. Thanks for fixing this. A few comments below:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;When you catch and swallow InterruptedException, you should call &lt;tt&gt;Thread.currentThread().interrupt()&lt;/tt&gt; afterward, so that the interrupt status isn&apos;t lost&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  /**
+   * Watcher &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; waiting(connectionTimeout in milliseconds) to establish
+   * connection with the zookeeper server.
+   */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I don&apos;t think you need the parenthetical (&quot;connectionTimeout in milliseconds&quot;) since you already specify that down below in the relevant javadoc.&lt;/p&gt;

&lt;hr /&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In the case that the ZK connection fails (eg ZK is just not listening) do we now have to wait for the full session timeout? I think the latch should fire on either SyncConnected or Disconnected events, not just on SyncConnected.&lt;/li&gt;
	&lt;li&gt;We probably want some kind of sanity check that we don&apos;t get any other kind of events in the ZKConnectionWatcher. Otherwise I&apos;m afraid we might end up swallowing an event inadvertently, which could result in the elector hanging. In that case, we should also make sure that the &quot;authenticated&quot; message we get from a SASL-capable ZK is in the list of acceptable events.&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Nit: can you make ZKConnectionWatcher private, and move it to the bottom of the file? Also, I think zkConnectLatch can be made private.&lt;/li&gt;
	&lt;li&gt;Test nit: can you please use the &lt;tt&gt;GenericTestUtils.assertExceptionContains()&lt;/tt&gt; utility to check the exception? I&apos;ve found that the JUnit &quot;expected exception&quot; trick isn&apos;t great, since it catches all sorts of exceptions instead of just the targeted error you want to verify&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13288499" author="rakeshr" created="Mon, 4 Jun 2012 11:17:13 +0000"  >&lt;p&gt;Thanks Todd for the comments. I&apos;ll rework and upload the patch.&lt;/p&gt;

&lt;p&gt;For the following comment:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;In the case that the ZK connection fails (eg ZK is just not listening) do we now have to wait for the full session timeout? I think the latch should fire on either SyncConnected or Disconnected events, not just on SyncConnected.&lt;br/&gt;
We probably want some kind of sanity check that we don&apos;t get any other kind of events in the ZKConnectionWatcher. Otherwise I&apos;m afraid we might end up swallowing an event inadvertently, which could result in the elector hanging. In that case, we should also make sure that the &quot;authenticated&quot; message we get from a SASL-capable ZK is in the list of acceptable events.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m just thinking to change ZKConnectionWatcher logic like, it will just wait for any events from ZK and pass it to the activestandbyelector.processWatchEvent(zk, event). Here it will be processed those events. With this we would be able to avoid sanity checks in different places.&lt;/p&gt;

&lt;p&gt;Activestandbyelector.processWatchEvent(zk, event) is considering only the following events and there is no special sasl checks exists. &lt;br/&gt;
case SyncConnected:&lt;br/&gt;
case Disconnected:&lt;br/&gt;
case Expired:&lt;br/&gt;
default:&lt;/p&gt;

&lt;p&gt;Could you please tell me your thoughts on this.&lt;/p&gt;</comment>
                            <comment id="13291655" author="rakeshr" created="Fri, 8 Jun 2012 09:43:01 +0000"  >&lt;p&gt;Attached latest patch by fixing the comments. Please review.&lt;/p&gt;</comment>
                            <comment id="13291942" author="hadoopqa" created="Fri, 8 Jun 2012 20:01:27 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12531384/HDFS-3477.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12531384/HDFS-3477.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2621//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2621//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2621//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2621//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13292109" author="tlipcon" created="Sat, 9 Jun 2012 00:05:00 +0000"  >&lt;p&gt;Hey Rakesh. Looking good. One more small comment which I missed:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;We currently have the following code lower down inside &lt;tt&gt;doRun()&lt;/tt&gt;:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ioe.getCause() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; KeeperException.ConnectionLossException) {
        LOG.fatal(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to start failover controller. Unable to connect &quot;&lt;/span&gt; +
            &lt;span class=&quot;code-quote&quot;&gt;&quot;to ZooKeeper quorum at &quot;&lt;/span&gt; + zkQuorum + &lt;span class=&quot;code-quote&quot;&gt;&quot;. Please check the &quot;&lt;/span&gt; +
            &lt;span class=&quot;code-quote&quot;&gt;&quot;configured value &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + ZK_QUORUM_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot; and ensure that &quot;&lt;/span&gt; +
            &lt;span class=&quot;code-quote&quot;&gt;&quot;ZooKeeper is running.&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ERR_CODE_NO_ZK;
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; ioe;
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;but with your bug fix, we&apos;ll never get here since &lt;tt&gt;initZK()&lt;/tt&gt; would have failed already. So, can you move this fatal error message up to where you catch &lt;tt&gt;KeeperException&lt;/tt&gt; around &lt;tt&gt;initZK()&lt;/tt&gt;? This way we&apos;ll give a nice message for users who have a mistake in their configuration. Thanks.&lt;/p&gt;</comment>
                            <comment id="13293374" author="rakeshr" created="Tue, 12 Jun 2012 05:49:38 +0000"  >&lt;p&gt;Thanks Todd. I have updated the patch by fixing the comment.&lt;/p&gt;</comment>
                            <comment id="13293590" author="hadoopqa" created="Tue, 12 Jun 2012 13:04:04 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12531773/HDFS-3477.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12531773/HDFS-3477.3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ha.TestZKFailoverController&lt;br/&gt;
                  org.apache.hadoop.io.file.tfile.TestTFileByteArrays&lt;br/&gt;
                  org.apache.hadoop.io.file.tfile.TestTFileJClassComparatorByteArrays&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2643//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2643//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2643//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2643//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13402121" author="hadoopqa" created="Wed, 27 Jun 2012 10:30:08 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12533626/HDFS-3477.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12533626/HDFS-3477.3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ha.TestZKFailoverController&lt;br/&gt;
                  org.apache.hadoop.io.file.tfile.TestTFileByteArrays&lt;br/&gt;
                  org.apache.hadoop.io.file.tfile.TestTFileJClassComparatorByteArrays&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2711//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2711//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/2711//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/2711//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13412675" author="rakeshr" created="Thu, 12 Jul 2012 10:29:06 +0000"  >&lt;p&gt;Added links to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8591&quot; title=&quot;TestZKFailoverController tests time out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8591&quot;&gt;&lt;del&gt;HDFS-3635&lt;/del&gt;&lt;/a&gt; as I feel the cause is same and failing after timeout:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.Exception: test timed out after 30000 milliseconds
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	at org.apache.hadoop.ha.ZKFailoverController.waitForActiveAttempt(ZKFailoverController.java:457)
	at org.apache.hadoop.ha.ZKFailoverController.doGracefulFailover(ZKFailoverController.java:645)
	at org.apache.hadoop.ha.ZKFailoverController.access$400(ZKFailoverController.java:58)
	at org.apache.hadoop.ha.ZKFailoverController$3.run(ZKFailoverController.java:590)
	at org.apache.hadoop.ha.ZKFailoverController$3.run(ZKFailoverController.java:587)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13494494" author="tlipcon" created="Sat, 10 Nov 2012 01:36:16 +0000"  >&lt;p&gt;Hey Rakesh,&lt;/p&gt;

&lt;p&gt;I modified your patch a bit and came up with this new rev. I&apos;m afraid there might have been a race in the old version &amp;#8211; if multiple events came in to the registration watcher, it might have missed forwarding the second to the main watcher, which could produce an inconsistent state. I changed it around a bit so that the existing watcher wrapper takes care of the latching.&lt;/p&gt;

&lt;p&gt;If you&apos;re able to reproduce this in a real cluster, can you give it a try? I&apos;ve never seen the problem in practice, but my patch passes the unit test you added.&lt;/p&gt;</comment>
                            <comment id="13494557" author="hadoopqa" created="Sat, 10 Nov 2012 04:04:22 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12552945/hdfs-3477.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12552945/hdfs-3477.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/3479//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/3479//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/3479//artifact/trunk/patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/3479//artifact/trunk/patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/3479//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/3479//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13495459" author="tlipcon" created="Mon, 12 Nov 2012 18:02:36 +0000"  >&lt;p&gt;Fix inconsistent synchronization findbugs - just had to add a synchronized block around an access to the &lt;tt&gt;zk&lt;/tt&gt; variable in the watcher&lt;/p&gt;</comment>
                            <comment id="13495484" author="hadoopqa" created="Mon, 12 Nov 2012 18:37:14 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12553145/hdfs-3477.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12553145/hdfs-3477.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/3484//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/3484//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/3484//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/3484//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13500804" author="ewenpower" created="Tue, 20 Nov 2012 02:33:56 +0000"  >&lt;p&gt;Added links to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8591&quot; title=&quot;TestZKFailoverController tests time out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8591&quot;&gt;&lt;del&gt;HDFS-3635&lt;/del&gt;&lt;/a&gt; as I feel the cause is same and failing after timeout:&lt;/p&gt;

&lt;p&gt;java.lang.Exception: test timed out after 30000 milliseconds&lt;br/&gt;
	at java.lang.Object.wait(Native Method)&lt;br/&gt;
	at org.apache.hadoop.ha.ZKFailoverController.waitForActiveAttempt(ZKFailoverController.java:457)&lt;br/&gt;
	at org.apache.hadoop.ha.ZKFailoverController.doGracefulFailover(ZKFailoverController.java:645)&lt;br/&gt;
	at org.apache.hadoop.ha.ZKFailoverController.access$400(ZKFailoverController.java:58)&lt;br/&gt;
	at org.apache.hadoop.ha.ZKFailoverController$3.run(ZKFailoverController.java:590)&lt;br/&gt;
	at org.apache.hadoop.ha.ZKFailoverController$3.run(ZKFailoverController.java:587)&lt;br/&gt;
two reason&#65292;&lt;br/&gt;
1.one reason same to Rakesh.&lt;br/&gt;
2.second reason&lt;br/&gt;
when doGracefulFailover command is run in active NameNode,the test case will time out.because waitForActiveAttempt exit wait in standby NameNode,when the standby NameNode become active NameNode. The waitForActiveAttempt exit wait in actvie NameNode  when waitForActiveAttempt time out,and the time out defaut value is 70000.&lt;br/&gt;
the test case time out is 30000.30000&amp;lt;70000,so we need modify the test case timeout value.change it 30000 to 75000.&lt;br/&gt;
@Test(timeout=30000)&lt;br/&gt;
  public void testOneOfEverything() throws Exception {&lt;br/&gt;
    try {&lt;/p&gt;


&lt;p&gt;change to &lt;br/&gt;
@Test(timeout=75000)&lt;br/&gt;
  public void testOneOfEverything() throws Exception {&lt;br/&gt;
    try {&lt;/p&gt;

</comment>
                            <comment id="13501358" author="rakeshr" created="Tue, 20 Nov 2012 18:30:03 +0000"  >&lt;p&gt;@Todd&lt;br/&gt;
Sorry for the late reply. Yeah, you are absolutely correct. I had missed the case of receiving multiple events in between wait completion and watcher registration. &lt;/p&gt;

&lt;p&gt;I also could see a very corner case like: &lt;br/&gt;
Recevived the ZK connection event, immediately before the watcher registration, say ZK got Disconnected the event will be received to the old watcher and will never execute this event. In this case would be still in Synconnected and could go to an inconsistent state. I have tried this scenario in my cluster, but not able to re-produce the same, finally I just tried keeping debug points and has re-produced. Your approach of queuingup the events is fine and this is executing all the events sequentially without missing anything.&lt;/p&gt;</comment>
                            <comment id="13511170" author="atm" created="Thu, 6 Dec 2012 07:12:11 +0000"  >&lt;p&gt;+1, the latest patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="13528344" author="tlipcon" created="Mon, 10 Dec 2012 22:08:05 +0000"  >&lt;p&gt;I moved this JIRA to Common since the patch only affects the common ZKFC components.&lt;/p&gt;</comment>
                            <comment id="13528350" author="tlipcon" created="Mon, 10 Dec 2012 22:13:10 +0000"  >&lt;p&gt;Committed to trunk and branch-2. Thanks, Rakesh.&lt;/p&gt;</comment>
                            <comment id="13528435" author="hudson" created="Mon, 10 Dec 2012 23:33:24 +0000"  >&lt;p&gt;Integrated in Hadoop-trunk-Commit #3107 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/3107/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/3107/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9126&quot; title=&quot;FormatZK and ZKFC startup can fail due to zkclient connection establishment delay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9126&quot;&gt;&lt;del&gt;HADOOP-9126&lt;/del&gt;&lt;/a&gt;. FormatZK and ZKFC startup can fail due to zkclient connection establishment delay. Contributed by Rakesh R and Todd Lipcon. (Revision 1419831)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
todd : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419831&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419831&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ActiveStandbyElector.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ZKFailoverController.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestActiveStandbyElector.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13528874" author="hudson" created="Tue, 11 Dec 2012 10:45:40 +0000"  >&lt;p&gt;Integrated in Hadoop-Yarn-trunk #62 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/62/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/62/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9126&quot; title=&quot;FormatZK and ZKFC startup can fail due to zkclient connection establishment delay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9126&quot;&gt;&lt;del&gt;HADOOP-9126&lt;/del&gt;&lt;/a&gt;. FormatZK and ZKFC startup can fail due to zkclient connection establishment delay. Contributed by Rakesh R and Todd Lipcon. (Revision 1419831)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
todd : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419831&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419831&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ActiveStandbyElector.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ZKFailoverController.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestActiveStandbyElector.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13528939" author="hudson" created="Tue, 11 Dec 2012 13:11:47 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1251 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1251/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1251/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9126&quot; title=&quot;FormatZK and ZKFC startup can fail due to zkclient connection establishment delay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9126&quot;&gt;&lt;del&gt;HADOOP-9126&lt;/del&gt;&lt;/a&gt;. FormatZK and ZKFC startup can fail due to zkclient connection establishment delay. Contributed by Rakesh R and Todd Lipcon. (Revision 1419831)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
todd : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419831&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419831&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ActiveStandbyElector.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ZKFailoverController.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestActiveStandbyElector.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13528989" author="hudson" created="Tue, 11 Dec 2012 14:09:56 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1282 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1282/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1282/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9126&quot; title=&quot;FormatZK and ZKFC startup can fail due to zkclient connection establishment delay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9126&quot;&gt;&lt;del&gt;HADOOP-9126&lt;/del&gt;&lt;/a&gt;. FormatZK and ZKFC startup can fail due to zkclient connection establishment delay. Contributed by Rakesh R and Todd Lipcon. (Revision 1419831)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
todd : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419831&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1419831&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ActiveStandbyElector.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ZKFailoverController.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestActiveStandbyElector.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12598307">HADOOP-8591</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12530557" name="HDFS-3477.1.patch" size="11605" author="rakeshr" created="Fri, 1 Jun 2012 15:10:49 +0000"/>
                            <attachment id="12531384" name="HDFS-3477.2.patch" size="7495" author="rakeshr" created="Fri, 8 Jun 2012 09:43:01 +0000"/>
                            <attachment id="12533626" name="HDFS-3477.3.patch" size="8771" author="rakeshr" created="Wed, 27 Jun 2012 09:03:08 +0000"/>
                            <attachment id="12531773" name="HDFS-3477.3.patch" size="8771" author="rakeshr" created="Tue, 12 Jun 2012 05:48:31 +0000"/>
                            <attachment id="12530543" name="HDFS-3477.patch" size="4070" author="rakeshr" created="Fri, 1 Jun 2012 12:39:01 +0000"/>
                            <attachment id="12553145" name="hdfs-3477.txt" size="11231" author="tlipcon" created="Mon, 12 Nov 2012 18:02:36 +0000"/>
                            <attachment id="12552945" name="hdfs-3477.txt" size="11161" author="tlipcon" created="Sat, 10 Nov 2012 01:36:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00s2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2479</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>