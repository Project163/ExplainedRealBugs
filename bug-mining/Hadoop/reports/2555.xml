<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:55:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-16255] ChecksumFS.Make FileSystem.rename(path, path, options) doesn&apos;t rename checksum</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-16255</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;ChecksumFS doesn&apos;t override FilterFS rename/3, so doesn&apos;t rename the checksum with the file.&lt;/p&gt;

&lt;p&gt;As a result, if a file is renamed over an existing file using rename(src, dest, OVERWRITE) the renamed file will be considered to have an invalid checksum -the old one is picked up instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13228211">HADOOP-16255</key>
            <summary>ChecksumFS.Make FileSystem.rename(path, path, options) doesn&apos;t rename checksum</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kabhwan">Jungtaek Lim</assignee>
                                    <reporter username="stevel@apache.org">Steve Loughran</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Apr 2019 22:47:28 +0000</created>
                <updated>Thu, 10 Jun 2021 07:57:06 +0000</updated>
                            <resolved>Fri, 6 Sep 2019 20:56:44 +0000</resolved>
                                    <version>2.8.5</version>
                    <version>3.1.2</version>
                                    <fixVersion>2.8.6</fixVersion>
                    <fixVersion>3.2.1</fixVersion>
                    <fixVersion>2.9.3</fixVersion>
                    <fixVersion>2.10.1</fixVersion>
                                    <component>fs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16913832" author="kabhwan" created="Fri, 23 Aug 2019 01:00:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Spark also hits this issue&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SPARK-28025&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SPARK-28025&lt;/a&gt;&#160;though the concern is a bit different. Once &quot;crc for src&quot; is not renamed, it&apos;s a leak as we have no opaque way to delete this. We&apos;ll just delete the crc file directly as a workaround but definitely looking forward to remove the hack.&lt;/p&gt;

&lt;p&gt;Btw, the Hadoop version Spark is using is 2.7.4, but it seems to be a long standing issue through various version lines (maybe all 2.x versions, or even earlier?). What would be the preferred way to do this? Filing new issue describing Spark&apos;s case, or could you please add 2.7.4 to the affected version/s here?&lt;/p&gt;</comment>
                            <comment id="16914524" author="stevel@apache.org" created="Fri, 23 Aug 2019 18:07:51 +0000"  >&lt;p&gt;I see your issue. &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;It should just be matter of overriding the rename/3 call and having it move the CRC tool; this is good to preserve the checksum too.&lt;/li&gt;
	&lt;li&gt;patches with tests welcome...&lt;/li&gt;
	&lt;li&gt;we&apos;re never going to do another 2.7.x release so saying it is affected isn&apos;t going to make anyone care. I&apos;ve tagged 2.8.5 as affected too&lt;/li&gt;
	&lt;li&gt;now. can you upgrade spark&apos;s dependencies? please?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16919986" author="kabhwan" created="Sat, 31 Aug 2019 01:03:06 +0000"  >&lt;p&gt;Ah OK. Good to know that 2.7.x is EOL. Spark 3.0 is planning to support both 2.7.4 and 3.2.0, and upgrading Hadoop version could affect many things like transitive dependency, compatibility between old Hadoop server (does Hadoop client guarantee backward compatibility?), etc.&lt;/p&gt;

&lt;p&gt;I haven&apos;t contributed Hadoop project so may need to take time to do it. I&apos;ll see how I can contribute it, but you can also go ahead if I&apos;m taking too much time to do it.&lt;/p&gt;</comment>
                            <comment id="16920017" author="kabhwan" created="Sat, 31 Aug 2019 04:29:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hadoop/pull/1388&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/1388&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16921593" author="stevel@apache.org" created="Tue, 3 Sep 2019 17:34:16 +0000"  >&lt;p&gt;2.x clients should all be able to talk to 3.x clusters, if not -complain. The biggest troublespot is invariably live upgrades of HDFS clusters. Spark does not have to worry about that directly....&lt;/p&gt;</comment>
                            <comment id="16924588" author="hudson" created="Fri, 6 Sep 2019 20:56:02 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build Hadoop-trunk-Commit #17247 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/17247/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/17247/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-16255&quot; title=&quot;ChecksumFS.Make FileSystem.rename(path, path, options) doesn&amp;#39;t rename checksum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-16255&quot;&gt;&lt;del&gt;HADOOP-16255&lt;/del&gt;&lt;/a&gt;. Add ChecksumFs.rename(path, path, boolean) (stevel: rev bb0b922a71cba9ceaf00588e9f3e3b2a3c2e3eab)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(add) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestChecksumFs.java&lt;/li&gt;
	&lt;li&gt;(edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ChecksumFs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16924589" author="stevel@apache.org" created="Fri, 6 Sep 2019 20:56:44 +0000"  >&lt;p&gt;committed to branch-3.2; once you&apos;ve tested a backport to branch-2 we can put it in there too. thanks!&lt;/p&gt;</comment>
                            <comment id="16927199" author="kabhwan" created="Wed, 11 Sep 2019 02:27:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;&#160;Just attached the patch file for branch-2 as guided. Thanks!&lt;/p&gt;</comment>
                            <comment id="17128685" author="kihwal" created="Mon, 8 Jun 2020 22:18:01 +0000"  >&lt;p&gt;This needs to be in all active branches.&lt;/p&gt;</comment>
                            <comment id="17128690" author="kihwal" created="Mon, 8 Jun 2020 22:40:10 +0000"  >&lt;p&gt;Cherry-picked the change to branch-3.1. Committed the branch-2 patch to branch-2.10 and also cherry-picked it to branch-2.9 and branch-2.8.  Branch 2.9 and 2.8 are EOL except for security fixes, but some of us are still tracking the branches.&lt;/p&gt;</comment>
                            <comment id="17128724" author="kabhwan" created="Mon, 8 Jun 2020 23:52:26 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kihwal&quot; class=&quot;user-hover&quot; rel=&quot;kihwal&quot;&gt;kihwal&lt;/a&gt;&#160;to deal with this in Hadoop 2.x!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="12764119">HADOOP-11452</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13310234">HADOOP-17070</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12980013" name="HADOOP-16255-branch-2-001.patch" size="7686" author="kabhwan" created="Wed, 11 Sep 2019 02:27:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01tc8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>