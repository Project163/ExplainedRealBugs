<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:47:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-11332] KerberosAuthenticator#doSpnegoSequence should check if kerberos TGT is available in the subject </title>
                <link>https://issues.apache.org/jira/browse/HADOOP-11332</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;In &lt;tt&gt;KerberosAuthenticator#doSpnegoSequence&lt;/tt&gt;, it first check if the subject is &lt;tt&gt;null&lt;/tt&gt; before actually doing spnego, if the subject is &lt;tt&gt;null&lt;/tt&gt;, it will first perform kerberos login before doing spnego. We should also check if kerberos TGT exists in the subject, if not, we should also perform kerberos login. This situation will occur when we configure KMS as kerberos enabled (via configure &lt;tt&gt;hadoop.kms.authentication.type&lt;/tt&gt; as &lt;tt&gt;kerberos&lt;/tt&gt;) and other hadoop services not kerberos enabled(via configure &lt;tt&gt;hadoop.security.authentication&lt;/tt&gt; as &lt;tt&gt;simple&lt;/tt&gt;). In this case, when client connect to KMS, KMS will trigger kerberos authentication and as &lt;tt&gt;hadoop.security.authentication&lt;/tt&gt; is configured as &lt;tt&gt;simple&lt;/tt&gt; in hadoop cluster, the client side haven&apos;t login with kerberos method currently, but maybe it has already login using simple method which will make &lt;tt&gt;subject&lt;/tt&gt; not null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12757657">HADOOP-11332</key>
            <summary>KerberosAuthenticator#doSpnegoSequence should check if kerberos TGT is available in the subject </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dian.fu">Dian Fu</assignee>
                                    <reporter username="dian.fu">Dian Fu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Nov 2014 10:44:22 +0000</created>
                <updated>Fri, 10 Apr 2015 20:04:34 +0000</updated>
                            <resolved>Thu, 4 Dec 2014 02:56:16 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.7.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14224382" author="dian.fu" created="Tue, 25 Nov 2014 10:49:34 +0000"  >&lt;p&gt;A simple patch attached to solve this issue. Any comments would be welcome. Thanks very much.&lt;/p&gt;</comment>
                            <comment id="14224399" author="dian.fu" created="Tue, 25 Nov 2014 11:10:08 +0000"  >&lt;p&gt;This patch currently only considered the clients which use principles in kerberos cache, have not considered the clients which use principles in keytab, such as NameNode (NameNode connect to KMS as client). Will post a patch once have an idea of how to do this.&lt;/p&gt;</comment>
                            <comment id="14232235" author="hadoopqa" created="Tue, 2 Dec 2014 22:25:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12683520/HADOOP-11332.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12683520/HADOOP-11332.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 52bcefc.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-auth.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5143//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5143//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5143//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5143//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14233852" author="atm" created="Thu, 4 Dec 2014 02:48:00 +0000"  >&lt;p&gt;+1, the patch looks good to me. I&apos;m OK forgoing tests in this instance since doing so would require a fairly complex Kerberos setup.&lt;/p&gt;

&lt;p&gt;I&apos;m going to commit this momentarily.&lt;/p&gt;</comment>
                            <comment id="14233860" author="atm" created="Thu, 4 Dec 2014 02:56:16 +0000"  >&lt;p&gt;I&apos;ve just committed this to trunk and branch-2.&lt;/p&gt;

&lt;p&gt;Thanks a lot for the contribution, Fu Dian.&lt;/p&gt;</comment>
                            <comment id="14233865" author="hudson" created="Thu, 4 Dec 2014 03:03:22 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #6647 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/6647/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/6647/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11332&quot; title=&quot;KerberosAuthenticator#doSpnegoSequence should check if kerberos TGT is available in the subject &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11332&quot;&gt;&lt;del&gt;HADOOP-11332&lt;/del&gt;&lt;/a&gt;. KerberosAuthenticator#doSpnegoSequence should check if kerberos TGT is available in the subject. Contributed by Dian Fu. (atm: rev 9d1a8f5897d585bec96de32116fbd2118f8e0f95)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/client/KerberosAuthenticator.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14233869" author="dian.fu" created="Thu, 4 Dec 2014 03:15:22 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atm&quot; class=&quot;user-hover&quot; rel=&quot;atm&quot;&gt;atm&lt;/a&gt;, thanks for review and commit. This JIRA try to solve the authentication issue in this kind of cluster setup: hadoop services are configured as &quot;simple&quot; and other services such as KMS, Zookeeper, etc are configured as &quot;kerberos&quot;. The patch in this JIRA currently solves the authentication issue between clients which use principles in kerberos cache and KMS/Zookeeper Server, while have not considered the clients which use principles in keytab, such as NameNode (NameNode connect to KMS/Zookeeper as client). I&apos;m not sure if this kind of cluster setup should be considered. If so, I will create another JIRA to track it.&lt;/p&gt;</comment>
                            <comment id="14234779" author="atm" created="Thu, 4 Dec 2014 23:21:13 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dian.fu&quot; class=&quot;user-hover&quot; rel=&quot;dian.fu&quot;&gt;dian.fu&lt;/a&gt;, yea, not sure how I feel about that. It doesn&apos;t seem like a super reasonable cluster setup to me, so I&apos;m personally inclined to ignore that situation for now. I don&apos;t feel super strongly about this, though, and certainly could be convinced otherwise. Your call.&lt;/p&gt;</comment>
                            <comment id="14235472" author="dian.fu" created="Fri, 5 Dec 2014 13:33:41 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atm&quot; class=&quot;user-hover&quot; rel=&quot;atm&quot;&gt;atm&lt;/a&gt;, thanks for review and commit. Agree that currently this cluster setup is not so reasonable and we can reconsider this if it has requirements in the future.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12683520" name="HADOOP-11332.patch" size="1500" author="dian.fu" created="Tue, 25 Nov 2014 10:49:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22r9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327583">2.7.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>