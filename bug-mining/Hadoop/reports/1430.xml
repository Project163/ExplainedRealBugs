<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:47:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-11385] Prevent cross site scripting attack on JMXJSONServlet</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-11385</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;JMXJSONServlet allows passing a callback parameter in the JMX response, which is introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8922&quot; title=&quot;Provide alternate JSONP output for JMXJsonServlet to allow javascript in browser dashboard&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8922&quot;&gt;&lt;del&gt;HADOOP-8922&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-quote&quot;&gt;&quot;callback&quot;&lt;/span&gt; parameter implies JSONP outpout
&lt;/span&gt;        jsonpcb = request.getParameter(CALLBACK_PARAM);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (jsonpcb != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          response.setContentType(&lt;span class=&quot;code-quote&quot;&gt;&quot;application/javascript; charset=utf8&quot;&lt;/span&gt;);
          writer.write(jsonpcb + &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          response.setContentType(&lt;span class=&quot;code-quote&quot;&gt;&quot;application/json; charset=utf8&quot;&lt;/span&gt;);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The code writes the callback parameter directly to the output, allowing cross-site scripting attack. This vulnerability allows the attacker easily stealing the credential of the user on the browser.&lt;/p&gt;

&lt;p&gt;The original use case can be supported using Cross-origin resource sharing (CORS), which is used by the current NN web UI.&lt;/p&gt;

&lt;p&gt;This jira proposes to move JMXJSONServlet to CORS.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12760649">HADOOP-11385</key>
            <summary>Prevent cross site scripting attack on JMXJSONServlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wheat9">Haohui Mai</assignee>
                                    <reporter username="wheat9">Haohui Mai</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Dec 2014 05:16:21 +0000</created>
                <updated>Fri, 24 Apr 2015 22:49:08 +0000</updated>
                            <resolved>Thu, 18 Dec 2014 19:39:49 +0000</resolved>
                                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14250624" author="wheat9" created="Wed, 17 Dec 2014 21:45:30 +0000"  >&lt;p&gt;The patch replaces the &lt;tt&gt;callback()&lt;/tt&gt; parameters with CORS headers that allows all origins to access the information. Third party systems can issue AJAX requests to get the JMX information, as long as the connection is authorized by the services.&lt;/p&gt;</comment>
                            <comment id="14250749" author="hadoopqa" created="Wed, 17 Dec 2014 23:00:30 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12687834/HADOOP-11385.000.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12687834/HADOOP-11385.000.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision f2d150e.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The following test timeouts occurred in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.http.TestHttpServerLifecycle&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5294//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5294//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5294//artifact/patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5294//artifact/patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5294//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5294//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14252095" author="brandonli" created="Thu, 18 Dec 2014 19:28:59 +0000"  >&lt;p&gt;+1.&lt;br/&gt;
The findbugs warning and unit test failure are not introduced by the patch.&lt;/p&gt;</comment>
                            <comment id="14252120" author="wheat9" created="Thu, 18 Dec 2014 19:39:50 +0000"  >&lt;p&gt;I&apos;ve committed the patch to trunk and branch-2. Thanks Brandon for the review.&lt;/p&gt;</comment>
                            <comment id="14252126" author="hudson" created="Thu, 18 Dec 2014 19:43:38 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-trunk-Commit #6750 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/6750/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/6750/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11385&quot; title=&quot;Prevent cross site scripting attack on JMXJSONServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11385&quot;&gt;&lt;del&gt;HADOOP-11385&lt;/del&gt;&lt;/a&gt;. Prevent cross site scripting attack on JMXJSONServlet. Contributed by Haohui Mai. (wheat9: rev ef1fc51852cd2914accde4d80c2f496cd1ca042f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/jmx/JMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/jmx/TestJMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14253232" author="hudson" created="Fri, 19 Dec 2014 10:41:09 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #46 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/46/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/46/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11385&quot; title=&quot;Prevent cross site scripting attack on JMXJSONServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11385&quot;&gt;&lt;del&gt;HADOOP-11385&lt;/del&gt;&lt;/a&gt;. Prevent cross site scripting attack on JMXJSONServlet. Contributed by Haohui Mai. (wheat9: rev ef1fc51852cd2914accde4d80c2f496cd1ca042f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/jmx/TestJMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/jmx/JMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14253249" author="hudson" created="Fri, 19 Dec 2014 10:43:56 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #780 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/780/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/780/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11385&quot; title=&quot;Prevent cross site scripting attack on JMXJSONServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11385&quot;&gt;&lt;del&gt;HADOOP-11385&lt;/del&gt;&lt;/a&gt;. Prevent cross site scripting attack on JMXJSONServlet. Contributed by Haohui Mai. (wheat9: rev ef1fc51852cd2914accde4d80c2f496cd1ca042f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/jmx/TestJMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/jmx/JMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14253444" author="hudson" created="Fri, 19 Dec 2014 14:34:10 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1978 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1978/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1978/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11385&quot; title=&quot;Prevent cross site scripting attack on JMXJSONServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11385&quot;&gt;&lt;del&gt;HADOOP-11385&lt;/del&gt;&lt;/a&gt;. Prevent cross site scripting attack on JMXJSONServlet. Contributed by Haohui Mai. (wheat9: rev ef1fc51852cd2914accde4d80c2f496cd1ca042f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/jmx/TestJMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/jmx/JMXJsonServlet.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14253458" author="hudson" created="Fri, 19 Dec 2014 14:37:20 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #43 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/43/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/43/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11385&quot; title=&quot;Prevent cross site scripting attack on JMXJSONServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11385&quot;&gt;&lt;del&gt;HADOOP-11385&lt;/del&gt;&lt;/a&gt;. Prevent cross site scripting attack on JMXJSONServlet. Contributed by Haohui Mai. (wheat9: rev ef1fc51852cd2914accde4d80c2f496cd1ca042f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/jmx/JMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/jmx/TestJMXJsonServlet.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14253505" author="hudson" created="Fri, 19 Dec 2014 15:05:03 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #47 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/47/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/47/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11385&quot; title=&quot;Prevent cross site scripting attack on JMXJSONServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11385&quot;&gt;&lt;del&gt;HADOOP-11385&lt;/del&gt;&lt;/a&gt;. Prevent cross site scripting attack on JMXJSONServlet. Contributed by Haohui Mai. (wheat9: rev ef1fc51852cd2914accde4d80c2f496cd1ca042f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/jmx/TestJMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/jmx/JMXJsonServlet.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14253526" author="hudson" created="Fri, 19 Dec 2014 15:25:23 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1997 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1997/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1997/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11385&quot; title=&quot;Prevent cross site scripting attack on JMXJSONServlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11385&quot;&gt;&lt;del&gt;HADOOP-11385&lt;/del&gt;&lt;/a&gt;. Prevent cross site scripting attack on JMXJSONServlet. Contributed by Haohui Mai. (wheat9: rev ef1fc51852cd2914accde4d80c2f496cd1ca042f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/jmx/JMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/jmx/TestJMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12687834" name="HADOOP-11385.000.patch" size="7898" author="wheat9" created="Wed, 17 Dec 2014 21:43:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i239fj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>