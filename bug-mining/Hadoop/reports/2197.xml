<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:52:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-14283] Upgrade AWS SDK to 1.11.134</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-14283</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;We hit a hang bug when testing S3A with parallel renames.  &lt;/p&gt;

&lt;p&gt;I narrowed this down to the newer AWS Java SDK.  It only happens under load, and appears to be a failure to wake up a waiting thread on timeout/error.&lt;/p&gt;

&lt;p&gt;I&apos;ve created a github issue here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/aws/aws-sdk-java/issues/1102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aws/aws-sdk-java/issues/1102&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I can post a Hadoop scale test which reliably reproduces this after some cleanup.  I have posted an SDK-only test here which reproduces the issue without Hadoop:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ajfabbri/awstest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ajfabbri/awstest&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have a support ticket open and am working with Amazon on this bug so I&apos;ll take this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13061883">HADOOP-14283</key>
            <summary>Upgrade AWS SDK to 1.11.134</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fabbri">Aaron Fabbri</assignee>
                                    <reporter username="fabbri">Aaron Fabbri</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Apr 2017 22:10:10 +0000</created>
                <updated>Sat, 19 Jan 2019 17:27:19 +0000</updated>
                            <resolved>Thu, 8 Jun 2017 22:08:12 +0000</resolved>
                                    <version>3.0.0-alpha2</version>
                                    <fixVersion>2.9.0</fixVersion>
                    <fixVersion>3.0.0-alpha4</fixVersion>
                                    <component>fs/s3</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15957857" author="fabbri" created="Wed, 5 Apr 2017 22:13:51 +0000"  >&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liuml07&quot; class=&quot;user-hover&quot; rel=&quot;liuml07&quot;&gt;liuml07&lt;/a&gt;.  I&apos;ll keep this updated.&lt;/p&gt;</comment>
                            <comment id="15969327" author="fabbri" created="Fri, 14 Apr 2017 17:49:03 +0000"  >&lt;p&gt;This has been fixed in 1.11.119 (&lt;a href=&quot;https://github.com/aws/aws-sdk-java/issues/1102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;github issue&lt;/a&gt;), so we just need to upgrade our SDK version to resolve this.&lt;/p&gt;</comment>
                            <comment id="15986010" author="fabbri" created="Thu, 27 Apr 2017 04:59:45 +0000"  >&lt;p&gt;I am testing with current SDK to reproduce the bug, then again with the new version to confirm the fix.  I&apos;ll post a patch soon, assuming the new SDK looks good.&lt;/p&gt;</comment>
                            <comment id="16033352" author="fabbri" created="Thu, 1 Jun 2017 17:30:35 +0000"  >&lt;p&gt;FYI Testing on recent (.134) SDK release has been going well.  I just need to get around to posting a patch here.&lt;/p&gt;</comment>
                            <comment id="16035243" author="fabbri" created="Fri, 2 Jun 2017 18:59:41 +0000"  >&lt;p&gt;Attaching patch which bumps SDK from 1.11.86 to 1.11.134.  There are now newer versions but I&apos;ve done a good amount of testing on .134.&lt;/p&gt;

&lt;p&gt;I ran unit, integration, and scale tests in us-west-2.&lt;/p&gt;</comment>
                            <comment id="16035248" author="fabbri" created="Fri, 2 Jun 2017 19:04:21 +0000"  >&lt;p&gt;Attaching related Hadoop scale test but I&apos;m leaning towards not including in the codebase it because:&lt;/p&gt;

&lt;p&gt;1. It is slow as heck.  One of those things you need to run 4+ hours to get some confidence on.&lt;br/&gt;
2. The direct-to-SDK &lt;a href=&quot;https://github.com/ajfabbri/awstest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;test&lt;/a&gt; I posted in the description is an easier way to reproduce the SDK hang.&lt;/p&gt;
</comment>
                            <comment id="16038751" author="stevel@apache.org" created="Tue, 6 Jun 2017 12:12:35 +0000"  >&lt;p&gt;OK, +1 for the patch without the scale test;&lt;/p&gt;

&lt;p&gt;rename the JIRA to something about &quot;upgrade to AWS SDK ...&quot; once in, make a dependency of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9991&quot; title=&quot;Fix up Hadoop POMs, roll up JARs to latest versions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9991&quot;&gt;HADOOP-9991&lt;/a&gt;, &amp;amp; the S3A phase III so we can keep an eye on where it surfaces. &lt;/p&gt;

&lt;p&gt;FWIW, Rajesh has &lt;a href=&quot;https://github.com/aws/aws-sdk-java/pull/1105#issuecomment-306279002&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;an ongoing AWS patch&lt;/a&gt; which I think would be good to pick up in some future AWS release. But as they come out so often, we can wait&lt;/p&gt;</comment>
                            <comment id="16043529" author="liuml07" created="Thu, 8 Jun 2017 22:08:12 +0000"  >&lt;p&gt;Committed to &lt;tt&gt;trunk&lt;/tt&gt; and &lt;tt&gt;branch-2&lt;/tt&gt; branches. Thanks for your contribution &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fabbri&quot; class=&quot;user-hover&quot; rel=&quot;fabbri&quot;&gt;fabbri&lt;/a&gt;; and thanks for your review and discussion &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16043547" author="hudson" created="Thu, 8 Jun 2017 22:29:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #11847 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/11847/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/11847/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-14283&quot; title=&quot;Upgrade AWS SDK to 1.11.134&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-14283&quot;&gt;&lt;del&gt;HADOOP-14283&lt;/del&gt;&lt;/a&gt;. Upgrade AWS SDK to 1.11.134. Contributed by Aaron Fabbri (liuml07: rev 7c9694c56712e20589d83b31e71c7bbddc131b8d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hadoop-project/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16043555" author="liuml07" created="Thu, 8 Jun 2017 22:42:53 +0000"  >&lt;p&gt;I check and find aws sdk 1.11.134 does not have DynamoDBLocal which is used by S3Guard. Currently in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13345&quot; title=&quot;S3Guard: Improved Consistency for S3A&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13345&quot;&gt;&lt;del&gt;HADOOP-13345&lt;/del&gt;&lt;/a&gt;, we can either wait till it catches up, or use old 1.11.86 version only for &lt;tt&gt;DynamoDBLocal&lt;/tt&gt; artifactId. As it&apos;s for testing only, having different versions should be fine in development.&lt;/p&gt;</comment>
                            <comment id="16043570" author="fabbri" created="Thu, 8 Jun 2017 22:49:30 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liuml07&quot; class=&quot;user-hover&quot; rel=&quot;liuml07&quot;&gt;liuml07&lt;/a&gt;.  I ran into the same problem when testing with S3Guard.  I ended up using a ranged version for it, as I found it hard to find the list of dynamodblocal releases:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;com.amazonaws&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;DynamoDBLocal&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;[1.11.86,2.0)&amp;lt;/version&amp;gt;
      &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16043740" author="liuml07" created="Fri, 9 Jun 2017 00:48:15 +0000"  >&lt;p&gt;yeah we may need this in next merge from trunk to s3guard; or perhaps we can get this change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13345&quot; title=&quot;S3Guard: Improved Consistency for S3A&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13345&quot;&gt;&lt;del&gt;HADOOP-13345&lt;/del&gt;&lt;/a&gt; branch now?&lt;/p&gt;

&lt;p&gt;After applying the change, I merged from trunk locally and run the integration tests against both -Ddynamo (us-west-1 region) and -Ddynamodblocal, all tests pass.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ mvn -Dit.test=&lt;span class=&quot;code-quote&quot;&gt;&apos;ITestS3A*,ITestS3Guard*,ITestDynamo*&apos;&lt;/span&gt; -Dtest=none -Ds3guard -Ddynamodblocal -q  verify
Results :

Tests run: 391, Failures: 0, Errors: 0, Skipped: 59

$ mvn -Dit.test=&lt;span class=&quot;code-quote&quot;&gt;&apos;ITestS3A*,ITestS3Guard*,ITestDynamo*&apos;&lt;/span&gt; -Dtest=none -Ds3guard -Ddynamo -q  verify
Results :

Tests run: 391, Failures: 0, Errors: 0, Skipped: 59
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13082837">HADOOP-14596</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13210329">HADOOP-16055</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13082514">HADOOP-14589</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12670007">HADOOP-9991</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12973070">HADOOP-13204</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12871042" name="HADOOP-14283.001.patch" size="681" author="fabbri" created="Fri, 2 Jun 2017 18:59:41 +0000"/>
                            <attachment id="12871044" name="ITestS3AConcurrentRename.java" size="6914" author="fabbri" created="Fri, 2 Jun 2017 19:04:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3d9gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>