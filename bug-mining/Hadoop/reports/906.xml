<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:43:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-9439] JniBasedUnixGroupsMapping: fix some crash bugs</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-9439</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;JniBasedUnixGroupsMapping has some issues.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;sometimes on error paths variables are freed prior to being initialized&lt;/li&gt;
	&lt;li&gt;re-allocate buffers less frequently (can reuse the same buffer for multiple calls to getgrnam)&lt;/li&gt;
	&lt;li&gt;allow non-reentrant functions to be used, to work around client bugs&lt;/li&gt;
	&lt;li&gt;don&apos;t throw IOException from JNI functions if the JNI functions do not declare this checked exception.&lt;/li&gt;
	&lt;li&gt;don&apos;t bail out if only one group name among all the ones associated with a user can&apos;t be looked up.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12639219">HADOOP-9439</key>
            <summary>JniBasedUnixGroupsMapping: fix some crash bugs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmccabe">Colin McCabe</assignee>
                                    <reporter username="cmccabe">Colin McCabe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Mar 2013 22:53:48 +0000</created>
                <updated>Wed, 3 Sep 2014 22:47:00 +0000</updated>
                            <resolved>Mon, 24 Jun 2013 16:33:09 +0000</resolved>
                                    <version>2.0.4-alpha</version>
                                    <fixVersion>2.1.0-beta</fixVersion>
                                    <component>native</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                                <comments>
                            <comment id="13614645" author="cmccabe" created="Tue, 26 Mar 2013 22:56:12 +0000"  >&lt;p&gt;I should explain the error path comment a bit.  When you have something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (error)
    &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt; done;
MyFoo *foo = NULL;
done:
    free(foo);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The compiler treats foo as uninitialized on the error path.  It is best to move the declarations of stuff that gets freed at the end to the top to avoid this problem.&lt;/p&gt;</comment>
                            <comment id="13614730" author="atm" created="Wed, 27 Mar 2013 00:33:05 +0000"  >&lt;p&gt;Seems like we should move this JIRA to Common, no? The groups mapping stuff is used by YARN as well, and none of these changes are HDFS-specific.&lt;/p&gt;</comment>
                            <comment id="13614808" author="hadoopqa" created="Wed, 27 Mar 2013 02:08:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12575606/HDFS-4640.002.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12575606/HDFS-4640.002.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/4151//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/4151//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/4151//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/4151//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13615542" author="cmccabe" created="Wed, 27 Mar 2013 17:48:14 +0000"  >&lt;p&gt;moved this to common at ATM&apos;s suggestion.&lt;/p&gt;</comment>
                            <comment id="13615577" author="cmccabe" created="Wed, 27 Mar 2013 18:14:19 +0000"  >&lt;p&gt;add the ability to configure JniBasedUnixGroupsMapping to use the non-reentrant getpwent and getgrent functions at runtime.  They are buggy on some implementations.&lt;/p&gt;

&lt;p&gt;pass in an empty array in a threadsafe manner, duplicating the optimization we had before where we return a pre-allocated empty array when there are no groups to be found.&lt;/p&gt;</comment>
                            <comment id="13615592" author="cnauroth" created="Wed, 27 Mar 2013 18:23:33 +0000"  >&lt;p&gt;Hi, Colin.  I had filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9312&quot; title=&quot;JniBasedUnixGroupsMapping#getGroupForUser can potentially leak memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9312&quot;&gt;HADOOP-9312&lt;/a&gt; for a potential memory leak around the lazy initialization of &lt;tt&gt;emptyGroups&lt;/tt&gt;.  From my quick scan of the patch here, it looks like this will fix it (at least for the non-Windows codebase).  Do you agree?  If so, I will relate the 2 jiras, or perhaps file a new jira for porting this patch to the Windows version.  Thanks!&lt;/p&gt;</comment>
                            <comment id="13615601" author="hadoopqa" created="Wed, 27 Mar 2013 18:28:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12575606/HDFS-4640.002.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12575606/HDFS-4640.002.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2371//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2371//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2371//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2371//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13615948" author="cmccabe" created="Thu, 28 Mar 2013 01:12:31 +0000"  >&lt;p&gt;yeah, this will definitely fix the memory leak identified in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9312&quot; title=&quot;JniBasedUnixGroupsMapping#getGroupForUser can potentially leak memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9312&quot;&gt;HADOOP-9312&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13657348" author="tlipcon" created="Tue, 14 May 2013 18:41:19 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; empty[] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[0];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should probably be static final, right? And rename to &lt;tt&gt;NO_GROUPS&lt;/tt&gt; or &lt;tt&gt;EMPTY_STIRNG_ARRAY&lt;/tt&gt; or something a little more descriptive&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] getGroupsForUser(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; empty[],
+        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; reentrant);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t get why &lt;tt&gt;empty&lt;/tt&gt; is a parameter here... aside from it being a premature optimization (is allocating an empty array that bad?), it seems like the JNI code could just grab this field itself and return a reference, rather than taking it as a parameter.&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+      groups = getGroupsForUser(user, empty, useReentrant );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Style nit: extra space here before &apos;)&apos;&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+      snprintf(buf, sizeof(buf), &lt;span class=&quot;code-quote&quot;&gt;&quot;getgrouplist error %d&quot;&lt;/span&gt;, ret);
+      THROW(env, &lt;span class=&quot;code-quote&quot;&gt;&quot;java/lang/RuntimeException&quot;&lt;/span&gt;, buf);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can we use strerror here on the return, assuming it&apos;s probably a standard errnum?&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+    ret = hadoop_group_info_fetch(ginfo, uinfo-&amp;gt;gids[i]);
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!ret) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here if the group info lookup fails for a particular gid, you end up swallowing the error without any warnings, etc. Maybe instead we should just return the numeric gid as a group? This is what the &apos;groups&apos; shell command does:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;todd@todd-w510:~$ groups todd
todd : groups: cannot find name &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; group ID 1050
1050 adm dialout cdrom audio video plugdev lpadmin admin sambashare mrtest wireshark
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I noticed you use different locks for getgrnam and getpwnam. But when I was working on &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7156&quot; title=&quot;getpwuid_r is not thread-safe on RHEL6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7156&quot;&gt;&lt;del&gt;HADOOP-7156&lt;/del&gt;&lt;/a&gt;, I found that the buggy implementations were racey in other parts of their code &amp;#8211; ie a concurrent getgrnam and a concurrent getpwnam might race with eachother and cause either to fail. I know that you added this function to deal with a crash we saw on a production cluster - did you verify that with the same buggy underlying implementation that the workaround prevents the issue?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We may have to actually share this lock and configuration with the lock used in NativeIO.c.&lt;/p&gt;

&lt;p&gt;Additionally, when I did that patch, I found it simpler to continue to use the reentrant functions wrapped with a lock &amp;#8211; less repeated code, etc. &lt;/p&gt;</comment>
                            <comment id="13658658" author="cmccabe" created="Wed, 15 May 2013 18:45:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t get why empty is a parameter here... aside from it being a premature optimization (is allocating an empty array that bad?), it seems like the JNI code could just grab this field itself and return a       reference, rather than taking it as a parameter.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This optimization was in the existing code, so I kept it in.  But actually, looking at it again, I think you&apos;re right.  We might as well take it out.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Style nit: extra space here before getGroupsForUser&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ok.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can we use strerror here on the return, assuming it&apos;s probably a standard errnum?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;good idea.&lt;/p&gt;

&lt;p&gt;+    ret = hadoop_group_info_fetch(ginfo, uinfo-&amp;gt;gids&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;);&lt;br/&gt;
+    if (!ret) {&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Here if the group info lookup fails for a particular gid, you end up swallowing the error without any warnings, etc. Maybe instead we should just return the numeric gid as a group? This is what the &apos;groups&apos;      shell command does:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The &apos;groups&apos; shell command returns nonzero if it can&apos;t look up a group (at least according to the internet; I didn&apos;t want to mess up my groups settings to test).  That would cause ShellBasedUnixGroupsMapping to get  &quot;got exception trying to get groups for user.&quot;  So as far as I know, there is no scenario currently where we treat the numeric gid as a group name.&lt;/p&gt;

&lt;p&gt;We could be bug-compatible with ShellBasedUnixGroupsMapping, and refuse to look up &lt;b&gt;any&lt;/b&gt; groups if one fails.  However, that doesn&apos;t seem like a good idea.  Instead, I added some code that fires off a log4j message in that scenario, and continues with the other groups.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We may have to actually share this lock and configuration with the lock used in NativeIO.c.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yeah, let&apos;s do that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Additionally, when I did that patch, I found it simpler to continue to use the reentrant functions wrapped with a lock &#8211; less repeated code, etc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ok.&lt;/p&gt;</comment>
                            <comment id="13658686" author="hadoopqa" created="Wed, 15 May 2013 19:18:12 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12583352/HADOOP-9439.003.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12583352/HADOOP-9439.003.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2544//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2544//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2544//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2544//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13677450" author="tlipcon" created="Thu, 6 Jun 2013 20:17:24 +0000"  >&lt;p&gt;It looks like you&apos;ve inverted the meaning of the boolean in some places here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+   * @param reentrant        True &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we should use the reentrant versions of
+   *                         getgrent, getpwent, etc.  They are faster, but
+   *                         buggy in some implementations.
+   *
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;                 The set of groups associated with a user.
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] getGroupsForUser(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; reentrant);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;suggests that the second parameter being &apos;false&apos; disables locking. But then: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getGroups(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; user) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
     &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] groups = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[0];
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
-      groups = getGroupForUser(user);
+      groups = getGroupsForUser(user, removeConcurrency);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;passes &apos;true&apos; if you want to disable locking.&lt;/p&gt;

&lt;p&gt;The native implementation seems to agree with the latter (i.e that passing true will introduce the locking)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void logError(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; groupIdx, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; error) {
+    LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;error looking up the name of group &quot;&lt;/span&gt; + groupIdx + &lt;span class=&quot;code-quote&quot;&gt;&quot;: &quot;&lt;/span&gt; + error);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This parameter should be &apos;groupId&apos; not &apos;groupIdx&apos;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  g_log_error_method = (*env)-&amp;gt;GetStaticMethodID(env, clazz, &lt;span class=&quot;code-quote&quot;&gt;&quot;logError&quot;&lt;/span&gt;,
+        &lt;span class=&quot;code-quote&quot;&gt;&quot;(ILjava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;)V&quot;&lt;/span&gt;);
+  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!g_log_error_method) {
+    jthrowable jthr = newRuntimeException(env,
+        &lt;span class=&quot;code-quote&quot;&gt;&quot;JniBasedUnixGroupsMapping#anchorNative: failed to look &quot;&lt;/span&gt;
+        &lt;span class=&quot;code-quote&quot;&gt;&quot;up JniBasedUnixGroupsMapping#logError method\n&quot;&lt;/span&gt;);
+    (*env)-&amp;gt;Throw(env, jthr);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;No need to throw an exception here - GetStaticMethodID already throws NoSuchMethodError if it fails. Same with the &lt;tt&gt;FindClass&lt;/tt&gt; call below, and I assume NewGlobalRef as well (at least I&apos;ve never seen this pattern of checking the result of NewGlobalRef).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  error_msg = (*env)-&amp;gt;NewStringUTF(env, terror(ret));
+  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!error_msg) {
+    (*env)-&amp;gt;ExceptionClear(env);
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Why are you ignoring exceptions in this method? Add a comment explaining this.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In general, you don&apos;t need to &lt;tt&gt;DeleteLocalRef&lt;/tt&gt; inside short-lived JNI methods. It just adds clutter to the code &amp;#8211; they&apos;re automatically deleted at the end of the method. It&apos;s only important if you plan on doing a lot of allocation/freeing inside the method and need to let GC collect the stuff before the method returns.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Can you explain how you tested the various error code paths here in the JNI? eg did you create a user which has some invalid groups? I&apos;m nervous about missing some bug until we hit it in production.&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="13677465" author="tlipcon" created="Thu, 6 Jun 2013 20:28:24 +0000"  >&lt;p&gt;Also, looks like you missed the following:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&amp;lt;Todd&amp;gt; We may have to actually share this lock and configuration with the lock used in NativeIO.c.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;lt;Colin&amp;gt; yeah, let&apos;s do that.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Instead you&apos;re just sharing between the user_info and group_info, but not the lock used by NativeIO.c (which is actually a java monitor lock rather than a pthread mutex).&lt;/p&gt;

&lt;p&gt;Given the above, why not something like the following:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;move the lock object from NativeIO.c to be defined in the NativeIO.java class as a static field&lt;/li&gt;
	&lt;li&gt;change the Java code in both places to just do something like:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldLock) {
  &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (lockObject) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; myJniCall(...);
  }
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; myJniCall(...);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Would that end up simpler?&lt;/p&gt;</comment>
                            <comment id="13677534" author="cmccabe" created="Thu, 6 Jun 2013 21:31:42 +0000"  >&lt;p&gt;Thanks, very thorough review.&lt;/p&gt;

&lt;p&gt;I fixed the naming of the parameters to getGroupsForUser and logError.  Although it didn&apos;t affect correctness, it certainly was very confusing.&lt;/p&gt;

&lt;p&gt;You&apos;re right that &lt;tt&gt;GetStaticMethodID&lt;/tt&gt; and &lt;tt&gt;FindClass&lt;/tt&gt; throw exceptions on failure.  There is no need to throw another one (and it is probably actually harmful).  Thanks for finding that.  However, &lt;tt&gt;NewGlobalRef&lt;/tt&gt; does not throw an exception, but merely returns &lt;tt&gt;NULL&lt;/tt&gt; when you&apos;re out of memory.&lt;/p&gt;

&lt;p&gt;I will add a comment clarifying why we ignore exceptions in logError.&lt;/p&gt;

&lt;p&gt;I agree that we should probably just use the existing monitor lock from NativeIO.java.  That way, I don&apos;t have to modify that code.  I wasn&apos;t aware that there were other folks poking the user/group functions in Hadoop.  Right now, it looks like &lt;tt&gt;NativeIO#getUserName&lt;/tt&gt; is only called from tests calling &lt;tt&gt;NativeIO#POSIX#getFstat&lt;/tt&gt;, but of course that may change in the future.&lt;/p&gt;

&lt;p&gt;Invalid groups are a sore point for &lt;tt&gt;ShellBasedUnixGroupsMapping&lt;/tt&gt;.  If any invalid groups are associated with a user, the &quot;&lt;tt&gt;groups&lt;/tt&gt;&quot; program will fail with a non-zero return code, and no information is returned.  For &lt;tt&gt;JniBasedUnixGroupsMapping&lt;/tt&gt;, I would prefer to return the groups that were valid, rather than nothing at all.  I suppose this is debatable, though.  I can test creating such invalid groups.&lt;/p&gt;

&lt;p&gt;I understand that sometimes it&apos;s unnecessary, but I&apos;d rather have &lt;tt&gt;DeleteLocalRef&lt;/tt&gt; used for all allocations.  For one thing, in libhdfs, it really &lt;b&gt;is&lt;/b&gt; necessary everywhere (the JNI invocation API never automatically disposes of Java references that are made in the invoking C code).  It confuses people when they copy a piece of code from one part of the source tree to another and it suddenly becomes incorrect.  For another thing, the spec only says that the JVM has to provide at least 16 local references at once, which is not very many at all.  It&apos;s only one line of overhead per Java reference, and &lt;tt&gt;DeleteLocalRef&lt;/tt&gt; already ignores NULLs, so I&apos;d rather just have a consistent style everywhere, than try to be clever.&lt;/p&gt;</comment>
                            <comment id="13678312" author="cmccabe" created="Fri, 7 Jun 2013 19:00:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;Invalid groups are a sore point for ShellBasedUnixGroupsMapping. If any invalid groups are associated with a user, the &quot;groups&quot; program will fail with a non-zero return code, and no information is returned&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually, I just tested the behavior of ShellBasedUnixGroupsMapping when a group can&apos;t be resolved.  Apparently it just creates an empty array entry for that group, but returns all the others (at least on Linux.)  I think the reason is because although the &quot;groups&quot; command has the behavior I described, we are now using the &quot;id -Gn&quot; command, which ignores illegal groups.&lt;/p&gt;

&lt;p&gt;I also verified that this patch works in the case where a group can&apos;t be resolved.&lt;/p&gt;</comment>
                            <comment id="13678397" author="hadoopqa" created="Fri, 7 Jun 2013 20:31:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12586769/HADOOP-9439.005.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12586769/HADOOP-9439.005.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2621//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2621//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2621//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2621//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13687295" author="tlipcon" created="Tue, 18 Jun 2013 22:27:46 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;seems like &lt;tt&gt;pw_lock_object&lt;/tt&gt; is declared in two .c files... one should probably be marked extern&lt;/li&gt;
	&lt;li&gt;The following code is smelly to me:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i, ret, nvalid, pw_lock_locked = 0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;because only the last variable is actually initialized. I don&apos;t &lt;em&gt;think&lt;/em&gt; you end up using any of the uninitialized variables, so it&apos;s not a true bug, but I think it&apos;s worth separating them out into their own lines. Do we not allow C99 style declaration in the middle of a function in our JNI code? I&apos;ve always liked that better than the original C style of declaring all at the top.&lt;/p&gt;</comment>
                            <comment id="13687314" author="cmccabe" created="Tue, 18 Jun 2013 22:39:30 +0000"  >&lt;p&gt;I don&apos;t like C99 style declarations because they tend to introduce bugs.  When you have some cleanup label at the end of the function, if your goto passes over the variable declaration, the variable will be treated as undefined.  So, for example, if you have:&lt;/p&gt;

&lt;p&gt;int i = 4;&lt;/p&gt;</comment>
                            <comment id="13687317" author="cmccabe" created="Tue, 18 Jun 2013 22:43:13 +0000"  >&lt;p&gt;ok, these keyboard shortcuts defeated me again.  I wish I could turn that off.  Anyway, if you have:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt; cleanup:
  struct foo *foo= calloc(1, sizeof(*foo));
  ...
cleanup:
  free(foo);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;  

&lt;p&gt;then you&apos;re freeing an uninitialized pointer.  Not good.&lt;/p&gt;

&lt;p&gt;I also don&apos;t like declarations in the middle because of a philosophical reason: it tends to lead to excessively long functions, rather than encouraging modularity.&lt;/p&gt;

&lt;p&gt;As to the extern thing, yeah, I agree.  It&apos;s rather odd that the linker does that kind of symbol merging, but apparently it does.&lt;/p&gt;

&lt;p&gt;I don&apos;t see the point of putting all variable declarations on separate lines.  Java allows declaration of variables on the same line as well.  C+&lt;ins&gt;0x allows things like vector&amp;lt;&amp;gt; to be initialized with a reasonable syntax, so you are finally allowed to admit that this is a good thing, you C&lt;/ins&gt;+ advocate, you. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13687398" author="tlipcon" created="Tue, 18 Jun 2013 23:54:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t see the point of putting all variable declarations on separate lines. Java allows declaration of variables on the same line as well&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The point is that when a lot of people see &lt;tt&gt;int a, b, c = 0;&lt;/tt&gt; they think that all three variables are getting set to 0, but in fact it&apos;s only &lt;tt&gt;c&lt;/tt&gt; that is set. Putting on separate lines makes it more obvious &amp;#8211; probably not important if you expect mostly veteran C programmers to read the code, but given that a lot of folks in the Hadoop community rarely look at C, I figured it would be more obvious this way.&lt;/p&gt;

&lt;p&gt;In Java, you always get a compile time error for accessing an uninitialized variable, whereas in C it&apos;s just a warning, which I&apos;m certain we&apos;ll miss in the compile spew of a Hadoop build. So, probably better to explicitly initialize all the variables, whether on one line or multiple.&lt;/p&gt;</comment>
                            <comment id="13687459" author="cmccabe" created="Wed, 19 Jun 2013 00:49:04 +0000"  >&lt;ul&gt;
	&lt;li&gt;declare pw_lock_object as extern&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;put declaration of pw_lock_locked on a separate line&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13687524" author="hadoopqa" created="Wed, 19 Jun 2013 02:39:32 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12588505/HADOOP-9439.006.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12588505/HADOOP-9439.006.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2671//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2671//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2671//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2671//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13688251" author="cmccabe" created="Wed, 19 Jun 2013 18:14:40 +0000"  >&lt;p&gt;We&apos;ve been seeing a lot of people hit segfaults that we believe result from non-threadsafe implementations of the getpwuid, etc interfaces.  Let&apos;s change the default to locking.&lt;/p&gt;</comment>
                            <comment id="13688318" author="hadoopqa" created="Wed, 19 Jun 2013 18:56:38 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12588656/HADOOP-9439.007.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12588656/HADOOP-9439.007.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ipc.TestSaslRPC&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2676//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2676//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2676//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2676//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13688354" author="cnauroth" created="Wed, 19 Jun 2013 19:34:14 +0000"  >&lt;p&gt;The patch caused unsatisfied link errors on Windows.  The problem was most easily visible as a test failure in &lt;tt&gt;TestJNIGroupsMapping&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It would be valuable to port this to the Windows side.  The Windows implementation was largely based on the prior code, so it&apos;s subject to the same problems, such as the problems listed in the description here and the memory leak I reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9312&quot; title=&quot;JniBasedUnixGroupsMapping#getGroupForUser can potentially leak memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9312&quot;&gt;HADOOP-9312&lt;/a&gt;.  Unfortunately, I&apos;m not available to do a full port and test it right now.  (Any other volunteers?)&lt;/p&gt;

&lt;p&gt;Meanwhile, I&apos;m uploading version 8 of the patch, which is the minimal work required to prevent breaking Windows.  The only thing I changed in addition to Colin&apos;s patch is JniBasedUnixGroupsMappingWin.c.  I handled the signature change on &lt;tt&gt;getGroupsForUser&lt;/tt&gt;.  I stubbed &lt;tt&gt;anchorNative&lt;/tt&gt; to do nothing and left a comment explaining that we need the full port of this patch later.&lt;/p&gt;</comment>
                            <comment id="13688357" author="cnauroth" created="Wed, 19 Jun 2013 19:41:54 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Do we not allow C99 style declaration in the middle of a function in our JNI code? I&apos;ve always liked that better than the original C style of declaring all at the top.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;One more thing about this: I think Visual Studio still does not support C99.  In the Windows native code, we&apos;re declaring all variables at the top of the function, and it&apos;s a compilation error to put declarations in the middle.  With conditional compilation, we could potentially do C99 in the Linux path and C89 in the Windows path, but this might cause confusion.&lt;/p&gt;

&lt;p&gt;This isn&apos;t an issue for this patch, but I thought I&apos;d mention it.&lt;/p&gt;</comment>
                            <comment id="13688385" author="hadoopqa" created="Wed, 19 Jun 2013 20:16:55 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12588669/HADOOP-9439.008.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12588669/HADOOP-9439.008.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ipc.TestSaslRPC&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2677//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2677//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2677//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2677//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13688421" author="cnauroth" created="Wed, 19 Jun 2013 20:35:39 +0000"  >&lt;p&gt;The &lt;tt&gt;TestSaslRPC&lt;/tt&gt; failure appears to be unrelated.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atm&quot; class=&quot;user-hover&quot; rel=&quot;atm&quot;&gt;atm&lt;/a&gt;, do you think it&apos;s related to this?  &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1494702&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1494702&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13688486" author="cmccabe" created="Wed, 19 Jun 2013 21:29:27 +0000"  >&lt;p&gt;Thanks, Chris.&lt;/p&gt;</comment>
                            <comment id="13688488" author="atm" created="Wed, 19 Jun 2013 21:31:05 +0000"  >&lt;p&gt;Yea, it&apos;s unrelated. I&apos;m fixing it.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13692095" author="tlipcon" created="Mon, 24 Jun 2013 16:06:57 +0000"  >&lt;p&gt;+1, latest rev of the patch lgtm.&lt;/p&gt;</comment>
                            <comment id="13692120" author="cmccabe" created="Mon, 24 Jun 2013 16:33:09 +0000"  >&lt;p&gt;committed to trunk, branch-2, branch-2.1&lt;/p&gt;</comment>
                            <comment id="13692122" author="hudson" created="Mon, 24 Jun 2013 16:35:35 +0000"  >&lt;p&gt;Integrated in Hadoop-trunk-Commit #4004 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/4004/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/4004/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9439&quot; title=&quot;JniBasedUnixGroupsMapping: fix some crash bugs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9439&quot;&gt;&lt;del&gt;HADOOP-9439&lt;/del&gt;&lt;/a&gt;.  JniBasedUnixGroupsMapping: fix some crash bugs (Colin Patrick McCabe) (Revision 1496112)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
cmccabe : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1496112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1496112&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/CMakeLists.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/nativeio/NativeIO.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/JniBasedUnixGroupsMapping.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/exception.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/exception.h&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/nativeio/NativeIO.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/JniBasedUnixGroupsMapping.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/JniBasedUnixGroupsMappingWin.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/getGroup.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_group_info.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_group_info.h&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_user_info.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_user_info.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13692918" author="hudson" created="Tue, 25 Jun 2013 10:41:23 +0000"  >&lt;p&gt;Integrated in Hadoop-Yarn-trunk #251 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/251/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/251/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9439&quot; title=&quot;JniBasedUnixGroupsMapping: fix some crash bugs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9439&quot;&gt;&lt;del&gt;HADOOP-9439&lt;/del&gt;&lt;/a&gt;.  JniBasedUnixGroupsMapping: fix some crash bugs (Colin Patrick McCabe) (Revision 1496112)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cmccabe : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1496112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1496112&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/CMakeLists.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/nativeio/NativeIO.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/JniBasedUnixGroupsMapping.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/exception.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/exception.h&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/nativeio/NativeIO.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/JniBasedUnixGroupsMapping.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/JniBasedUnixGroupsMappingWin.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/getGroup.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_group_info.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_group_info.h&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_user_info.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_user_info.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13693008" author="hudson" created="Tue, 25 Jun 2013 13:11:11 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1441 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1441/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1441/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9439&quot; title=&quot;JniBasedUnixGroupsMapping: fix some crash bugs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9439&quot;&gt;&lt;del&gt;HADOOP-9439&lt;/del&gt;&lt;/a&gt;.  JniBasedUnixGroupsMapping: fix some crash bugs (Colin Patrick McCabe) (Revision 1496112)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cmccabe : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1496112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1496112&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/CMakeLists.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/nativeio/NativeIO.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/JniBasedUnixGroupsMapping.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/exception.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/exception.h&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/nativeio/NativeIO.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/JniBasedUnixGroupsMapping.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/JniBasedUnixGroupsMappingWin.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/getGroup.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_group_info.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_group_info.h&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_user_info.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_user_info.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13693039" author="hudson" created="Tue, 25 Jun 2013 13:46:53 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1468 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1468/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1468/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9439&quot; title=&quot;JniBasedUnixGroupsMapping: fix some crash bugs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9439&quot;&gt;&lt;del&gt;HADOOP-9439&lt;/del&gt;&lt;/a&gt;.  JniBasedUnixGroupsMapping: fix some crash bugs (Colin Patrick McCabe) (Revision 1496112)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cmccabe : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1496112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1496112&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/CMakeLists.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/nativeio/NativeIO.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/JniBasedUnixGroupsMapping.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/exception.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/exception.h&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/nativeio/NativeIO.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/JniBasedUnixGroupsMapping.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/JniBasedUnixGroupsMappingWin.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/getGroup.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_group_info.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_group_info.h&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_user_info.c&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/security/hadoop_user_info.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12632678">HADOOP-9312</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12575742" name="HADOOP-9439.001.patch" size="36246" author="cmccabe" created="Wed, 27 Mar 2013 18:14:19 +0000"/>
                            <attachment id="12583352" name="HADOOP-9439.003.patch" size="37764" author="cmccabe" created="Wed, 15 May 2013 18:45:27 +0000"/>
                            <attachment id="12586769" name="HADOOP-9439.005.patch" size="34522" author="cmccabe" created="Fri, 7 Jun 2013 18:54:49 +0000"/>
                            <attachment id="12588505" name="HADOOP-9439.006.patch" size="34538" author="cmccabe" created="Wed, 19 Jun 2013 00:49:04 +0000"/>
                            <attachment id="12588656" name="HADOOP-9439.007.patch" size="35295" author="cmccabe" created="Wed, 19 Jun 2013 18:14:40 +0000"/>
                            <attachment id="12588669" name="HADOOP-9439.008.patch" size="36595" author="cnauroth" created="Wed, 19 Jun 2013 19:34:14 +0000"/>
                            <attachment id="12575606" name="HDFS-4640.002.patch" size="32389" author="cmccabe" created="Tue, 26 Mar 2013 22:59:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319689</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j5s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320030</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>