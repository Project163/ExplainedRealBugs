<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:42:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-8816] HTTP Error 413 full HEAD if using kerberos authentication</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-8816</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;The HTTP Authentication: header is too large if using kerberos and the request is rejected by Jetty because Jetty has a too low default header size limit.&lt;/p&gt;

&lt;p&gt;Can be fixed by adding ret.setHeaderBufferSize(1024*128); in org.apache.hadoop.http.HttpServer.createDefaultChannelConnector&lt;/p&gt;
</description>
                <environment>&lt;p&gt;ubuntu linux with active directory kerberos.&lt;/p&gt;</environment>
        <key id="12607802">HADOOP-8816</key>
            <summary>HTTP Error 413 full HEAD if using kerberos authentication</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="moritzmoeller">Moritz Moeller</assignee>
                                    <reporter username="moritzmoeller">Moritz Moeller</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Sep 2012 13:21:35 +0000</created>
                <updated>Tue, 20 Jan 2015 17:05:59 +0000</updated>
                            <resolved>Tue, 15 Jan 2013 18:29:42 +0000</resolved>
                                    <version>2.0.1-alpha</version>
                                    <fixVersion>2.0.3-alpha</fixVersion>
                    <fixVersion>0.23.7</fixVersion>
                                    <component>net</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="13457119" author="tucu00" created="Mon, 17 Sep 2012 16:16:42 +0000"  >&lt;p&gt;128K as header buffer size seems a bit too big. &lt;/p&gt;

&lt;p&gt;Could this be related to this? &lt;a href=&quot;http://www.novell.com/communities/node/11516/kerberos-authentication-may-fail-access-manager-identity-server-users-large-group-members&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.novell.com/communities/node/11516/kerberos-authentication-may-fail-access-manager-identity-server-users-large-group-members&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Would be possible to get the actual header size that is making things to fail?&lt;/p&gt;</comment>
                            <comment id="13457121" author="tucu00" created="Mon, 17 Sep 2012 16:19:39 +0000"  >&lt;p&gt;Also, if we tweak the header buffer size, we should doing it in a configurable way. &lt;/p&gt;</comment>
                            <comment id="13457129" author="moritzmoeller" created="Mon, 17 Sep 2012 16:29:08 +0000"  >&lt;p&gt;No, Kerberos tokens do not contain group membership information, but tend to get pretty large, 4-8k base64 encoded.&lt;br/&gt;
I guess 16kb header size would be enough.&lt;/p&gt;

&lt;p&gt;Making that configurable is your choice, I personally wouldn&apos;t as I know no things that cause header sizes larger than Kerberos, but then if it was configurable already this ticket wouldn&apos;t exist.&lt;/p&gt;</comment>
                            <comment id="13466501" author="moritzmoeller" created="Sun, 30 Sep 2012 15:29:10 +0000"  >&lt;p&gt;attached is a patch that changes the header buffer size to 64kb.&lt;/p&gt;

&lt;p&gt;32kb is the highest suggested value that I found in the following pages that deal with the same problem:&lt;br/&gt;
&lt;a href=&quot;https://issues.alfresco.com/jira/browse/ALF-13810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.alfresco.com/jira/browse/ALF-13810&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=42003&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=42003&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I know no disadvantages of a higher header buffer size limit.&lt;/p&gt;
</comment>
                            <comment id="13551681" author="tucu00" created="Sat, 12 Jan 2013 00:05:49 +0000"  >&lt;p&gt;I&apos;ve just added a testcase to Moritz&apos; patch.&lt;/p&gt;</comment>
                            <comment id="13551707" author="hadoopqa" created="Sat, 12 Jan 2013 00:49:09 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564524/HADOOP-8816.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564524/HADOOP-8816.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2031//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2031//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2031//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2031//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13551709" author="eli" created="Sat, 12 Jan 2013 00:58:37 +0000"  >&lt;p&gt;+1  looks good&lt;/p&gt;

&lt;p&gt;How about adding a comment to the test where you check the 63kb length that the buffer size set is for ALL headers which is why you&apos;re only adding a 63kb header when the limit is 64kb (leaving 1kb room for other headers).  No need to spin a new patch for just adding this comment IMO.&lt;/p&gt;</comment>
                            <comment id="13554092" author="tucu00" created="Tue, 15 Jan 2013 18:29:43 +0000"  >&lt;p&gt;Thanks Mortiz. Committed to trunk and branch-1.&lt;/p&gt;</comment>
                            <comment id="13554102" author="hudson" created="Tue, 15 Jan 2013 18:35:16 +0000"  >&lt;p&gt;Integrated in Hadoop-trunk-Commit #3240 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/3240/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/3240/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8816&quot; title=&quot;HTTP Error 413 full HEAD if using kerberos authentication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8816&quot;&gt;&lt;del&gt;HADOOP-8816&lt;/del&gt;&lt;/a&gt;. HTTP Error 413 full HEAD if using kerberos authentication. (moritzmoeller via tucu) (Revision 1433567)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433567&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/http/TestHttpServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13554926" author="hudson" created="Wed, 16 Jan 2013 10:47:47 +0000"  >&lt;p&gt;Integrated in Hadoop-Yarn-trunk #98 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/98/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/98/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8816&quot; title=&quot;HTTP Error 413 full HEAD if using kerberos authentication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8816&quot;&gt;&lt;del&gt;HADOOP-8816&lt;/del&gt;&lt;/a&gt;. HTTP Error 413 full HEAD if using kerberos authentication. (moritzmoeller via tucu) (Revision 1433567)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433567&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/http/TestHttpServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13555006" author="hudson" created="Wed, 16 Jan 2013 12:55:10 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1287 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1287/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1287/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8816&quot; title=&quot;HTTP Error 413 full HEAD if using kerberos authentication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8816&quot;&gt;&lt;del&gt;HADOOP-8816&lt;/del&gt;&lt;/a&gt;. HTTP Error 413 full HEAD if using kerberos authentication. (moritzmoeller via tucu) (Revision 1433567)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433567&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/http/TestHttpServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13555054" author="hudson" created="Wed, 16 Jan 2013 14:05:07 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1315 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1315/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1315/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8816&quot; title=&quot;HTTP Error 413 full HEAD if using kerberos authentication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8816&quot;&gt;&lt;del&gt;HADOOP-8816&lt;/del&gt;&lt;/a&gt;. HTTP Error 413 full HEAD if using kerberos authentication. (moritzmoeller via tucu) (Revision 1433567)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433567&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/http/TestHttpServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13601205" author="daryn" created="Wed, 13 Mar 2013 14:55:10 +0000"  >&lt;p&gt;I pulled this back into 23.  We may want to consider marking this an incompatible or making it a config option because the new 64K buffer causes the tests to hang on OS X, whereas it&apos;s fine up to 32K.  I haven&apos;t debugged why yet.&lt;/p&gt;</comment>
                            <comment id="13602222" author="hudson" created="Thu, 14 Mar 2013 12:40:34 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-0.23-Build #553 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/553/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/553/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8816&quot; title=&quot;HTTP Error 413 full HEAD if using kerberos authentication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8816&quot;&gt;&lt;del&gt;HADOOP-8816&lt;/del&gt;&lt;/a&gt;.  HTTP Error 413 full HEAD if using kerberos authentication (daryn) (Revision 1455974)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
daryn : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1455974&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1455974&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/http/TestHttpServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12636441">HDFS-4585</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12768713">STORM-633</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12564524" name="HADOOP-8816.patch" size="3023" author="tucu00" created="Sat, 12 Jan 2013 00:05:49 +0000"/>
                            <attachment id="12547164" name="hadoop-common-kerberos-increase-http-header-buffer-size.patch" size="449" author="moritzmoeller" created="Sun, 30 Sep 2012 15:29:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>246649</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07s9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43347</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>