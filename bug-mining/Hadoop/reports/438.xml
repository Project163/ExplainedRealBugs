<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:36:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-7933] Viewfs changes for MAPREDUCE-3529</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-7933</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;ViewFs.getDelegationTokens returns a list of tokens for the associated namenodes. Credentials serializes these tokens using the service name for the actual namenodes. Effectively, tokens are not cached for viewfs (some more details in MR 3529). Affects any job which uses the TokenCache in tasks along with viewfs (some Pig jobs).&lt;/p&gt;

&lt;p&gt;Talk to Jitendra about this, some options&lt;br/&gt;
1. Change Credentials.getAllTokens to return the key, instead of just a token list (associate the viewfs canonical name with a token in credentials)&lt;br/&gt;
2. Have viewfs issue a fake token.&lt;br/&gt;
Both of these would allow for a single viewfs configuration only.&lt;br/&gt;
3. An additional API in FileSystem - something like getDelegationTokens(String renewer, Credentials credentials) - which would check the credentials object before making token requests to the actual namenode.&lt;br/&gt;
4. An additional API in FileSystem - getCanonicalServiceNames - similar to getDelegationTokens, which would return service names for the actual namenodes. TokenCache/Credentials can work using this list.&lt;br/&gt;
5. have getDelegationTokens check the current UGI - and fetch tokens only if they don&apos;t exist.&lt;/p&gt;

&lt;p&gt;Have a quick patch for 3, along with associated MR changes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12534861">HADOOP-7933</key>
            <summary>Viewfs changes for MAPREDUCE-3529</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseth">Siddharth Seth</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Dec 2011 23:57:23 +0000</created>
                <updated>Fri, 25 May 2012 18:56:04 +0000</updated>
                            <resolved>Tue, 3 Jan 2012 19:00:30 +0000</resolved>
                                    <version>0.23.0</version>
                                    <fixVersion>0.23.1</fixVersion>
                                    <component>viewfs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13167989" author="jnp" created="Tue, 13 Dec 2011 00:31:22 +0000"  >&lt;p&gt;I think, option 3 is ok. It is an optimization over the existing API.&lt;br/&gt;
Please specify in the javadoc that if a token is found for the filesystem, the api returns it without verifying the expiry or renewer.&lt;br/&gt;
Also since Credentials class is LimitedPrivate for hdfs and mapreduce, we should annotate this API also with limitedprivate.&lt;/p&gt;</comment>
                            <comment id="13172941" author="sseth" created="Tue, 20 Dec 2011 05:51:27 +0000"  >&lt;p&gt;Added a new API to FileSystem - getDelegationTokens(String , Credentials)&lt;/p&gt;

&lt;p&gt;If this change looks Ok, will make similar changes for AbstractFileSystem and FileContext.&lt;/p&gt;

&lt;p&gt;Also, the new API gets delegation tokens once per service name (instead of once per mount point). The same change can be made for getDelegationTokens as well.&lt;/p&gt;</comment>
                            <comment id="13172958" author="hadoopqa" created="Tue, 20 Dec 2011 06:07:28 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508047/HDFS2665_v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508047/HDFS2665_v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/1732//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/1732//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13173510" author="sseth" created="Tue, 20 Dec 2011 21:18:54 +0000"  >&lt;p&gt;Not sure why the patch cannot be applied. &lt;br/&gt;
test-patch results from applying it locally to trunk.&lt;/p&gt;

&lt;p&gt;-1 overall.  &lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 26 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 13 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;The Findbugs warnings are pre-existing ones. Checking about the javadoc warnings.&lt;/p&gt;

&lt;p&gt;The patch does contain changes to common. Should that be a separate jira ?&lt;br/&gt;
Re-uploading the same patch again.&lt;/p&gt;</comment>
                            <comment id="13173513" author="hadoopqa" created="Tue, 20 Dec 2011 21:24:24 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508130/HDFS2665_v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508130/HDFS2665_v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/1734//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/1734//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13173530" author="hadoopqa" created="Tue, 20 Dec 2011 21:45:56 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508130/HDFS2665_v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508130/HDFS2665_v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/1735//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/1735//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13173546" author="sureshms" created="Tue, 20 Dec 2011 22:06:01 +0000"  >&lt;p&gt;Sid, I am moving this jira to common and attach common only patch. Please open a separate jira for HDFS part of the patch.&lt;/p&gt;</comment>
                            <comment id="13173549" author="sureshms" created="Tue, 20 Dec 2011 22:07:13 +0000"  >&lt;p&gt;Attaching common only part of Sid&apos;s patch.&lt;/p&gt;</comment>
                            <comment id="13173580" author="hadoopqa" created="Tue, 20 Dec 2011 22:44:14 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508137/HADOOP-7933.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508137/HADOOP-7933.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 5 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                  org.apache.hadoop.fs.TestFilterFileSystem&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/486//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/486//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/486//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/486//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13173692" author="sseth" created="Wed, 21 Dec 2011 00:46:59 +0000"  >&lt;p&gt;Updated patch to fix the failing test. Javadoc warnings are not related.&lt;/p&gt;</comment>
                            <comment id="13173711" author="hadoopqa" created="Wed, 21 Dec 2011 01:03:14 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508168/HADOOP7933_v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508168/HADOOP7933_v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 5 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/487//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/487//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/487//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/487//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13174488" author="sureshms" created="Wed, 21 Dec 2011 23:23:09 +0000"  >&lt;p&gt;Comments:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;FileSystem.java
	&lt;ul&gt;
		&lt;li&gt;Instead of calling credentials.getToken() twice, save it the first time you look and use it later.&lt;/li&gt;
		&lt;li&gt;&quot;renewer renewer&quot; drop one of the renewer&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;ViewFileSystem - unlike FileSystem it does not check if the token already exists in Credentials? If this is the expected behavior, then the javadoc of FileSystem#getDelegationTokens() does not apply to ViewFileSystem?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13174515" author="sseth" created="Thu, 22 Dec 2011 00:04:47 +0000"  >&lt;p&gt;Thanks for the review Suresh. Patch incorporates the feedback.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;ViewFileSystem - unlike FileSystem it does not check if the token already exists in Credentials?&lt;br/&gt;
ViewFileSystem does check for existing credentials - so the javadoc continues to apply.&lt;/p&gt;</comment>
                            <comment id="13174525" author="hadoopqa" created="Thu, 22 Dec 2011 00:25:28 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508321/HADOOP7933_v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508321/HADOOP7933_v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 5 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/489//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/489//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/489//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/489//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13176910" author="sureshms" created="Thu, 29 Dec 2011 00:30:03 +0000"  >&lt;p&gt;+1 for the change.&lt;/p&gt;</comment>
                            <comment id="13178925" author="sseth" created="Tue, 3 Jan 2012 19:00:30 +0000"  >&lt;p&gt;Thanks for the review Suresh. Committed to trunk and branch-0.23&lt;/p&gt;</comment>
                            <comment id="13178931" author="hudson" created="Tue, 3 Jan 2012 19:05:25 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #1487 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1487/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1487/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Add a getDelegationTokens api to FileSystem which checks for known tokens in the passed Credentials object. (sseth)&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13178936" author="hudson" created="Tue, 3 Jan 2012 19:09:22 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #1559 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1559/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1559/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Add a getDelegationTokens api to FileSystem which checks for known tokens in the passed Credentials object. (sseth)&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13178937" author="daryn" created="Tue, 3 Jan 2012 19:10:21 +0000"  >&lt;p&gt;Minor: Maybe store &lt;tt&gt;mountPoints.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.target.targetFileSystem&lt;/tt&gt; in a temp instead of invoking twice?&lt;/p&gt;

&lt;p&gt;I&apos;m somewhat uneasy about adding a &lt;tt&gt;FileSystem&lt;/tt&gt; dependency on &lt;tt&gt;Credentials&lt;/tt&gt;.  This forces the caller of &lt;tt&gt;getDelegationTokens(renewer,creds)&lt;/tt&gt; to use a &lt;tt&gt;Credentials&lt;/tt&gt; object when ideally the caller should be able to use any object to store the tokens.  The method returns a generic &lt;tt&gt;List&lt;/tt&gt;, so maybe take a generic &lt;tt&gt;Set&lt;/tt&gt;?  (It appears &lt;tt&gt;Credentials&lt;/tt&gt; was selected for convenience since that&apos;s what the MR&apos;s &lt;tt&gt;TokenCache&lt;/tt&gt; uses internally?)&lt;/p&gt;

&lt;p&gt;Would it be reasonable to populate the &lt;tt&gt;Credentials/Set&lt;/tt&gt; directly?  Ie. &lt;tt&gt;ViewFileSystem&lt;/tt&gt; takes a set of existing tokens, then returns the subset of tokens for its mounts that are not already in the existing tokens.  Then the new tokens are added right back into the existing tokens, loop again.&lt;/p&gt;

&lt;p&gt;I&apos;m concerned that this appears to be creating a cross-component dependency whereby &lt;tt&gt;ViewFileSystem&lt;/tt&gt; it required to &quot;assume&quot; how MR&apos;s &lt;tt&gt;TokenCache&lt;/tt&gt; will want the tokens keyed within its &lt;tt&gt;Credentials&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13178941" author="daryn" created="Tue, 3 Jan 2012 19:13:44 +0000"  >&lt;p&gt;Darn, missed the commit by minutes.  I also noticed &lt;tt&gt;getDelegationTokens(renewer,creds)&lt;/tt&gt; is returning null where &lt;tt&gt;getDelegationTokens(renewer)&lt;/tt&gt; would return a 0-length list.&lt;/p&gt;</comment>
                            <comment id="13178942" author="hudson" created="Tue, 3 Jan 2012 19:13:56 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-0.23-Commit #321 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/321/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/321/&lt;/a&gt;)&lt;br/&gt;
    merge &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt; from trunk&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13178953" author="hudson" created="Tue, 3 Jan 2012 19:18:22 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-0.23-Commit #332 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-0.23-Commit/332/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-0.23-Commit/332/&lt;/a&gt;)&lt;br/&gt;
    merge &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt; from trunk&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13178968" author="daryn" created="Tue, 3 Jan 2012 19:28:54 +0000"  >&lt;p&gt;&lt;tt&gt;FileSystem#getDelegationTokens(renewer,creds)&lt;/tt&gt; will leak tokens that already exist, leaving the namenode holding an unnecessary token.  Perhaps these should be cancelled.&lt;/p&gt;</comment>
                            <comment id="13178980" author="hudson" created="Tue, 3 Jan 2012 19:46:16 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #1508 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1508/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1508/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Add a getDelegationTokens api to FileSystem which checks for known tokens in the passed Credentials object. (sseth)&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13178985" author="hudson" created="Tue, 3 Jan 2012 19:55:54 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-0.23-Commit #343 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/343/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/343/&lt;/a&gt;)&lt;br/&gt;
    merge &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt; from trunk&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13178986" author="sseth" created="Tue, 3 Jan 2012 19:58:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;Minor: Maybe store mountPoints.get.target.targetFileSystem in a temp instead of invoking twice?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Could be done - but i don&apos;t believe this lookup is very expensive.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It appears Credentials was selected for convenience since that&apos;s what the MR&apos;s TokenCache uses internally? It appears Credentials was selected for convenience since that&apos;s what the MR&apos;s TokenCache uses internally?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The API is limited private (at least for now) to MR and HDFS - so I don&apos;t see this as a very big issue. Changing it to a set is a simple change though. Thoughts ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Would it be reasonable to populate the Credentials/Set directly? Ie. ViewFileSystem takes a set of existing tokens, then returns the subset of tokens for its mounts that are not already in the existing tokens.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Was returning all tokens (instead of just new ones) to be consistent with the existing API. Having this call populate tokens into the Credentials object was an option - but that increases the cross-component dependency.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;I&apos;m concerned that this appears to be creating a cross-component dependency whereby ViewFileSystem it required to &quot;assume&quot; how MR&apos;s TokenCache will want the tokens keyed within its Credentials.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m not very happy with this either - suggestion on a better approach ? Again, being LimitedPrivate to MR and HDFS limits the impact.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I also noticed getDelegationTokens(renewer,creds) is returning null where getDelegationTokens(renewer) would return a 0-length list.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I believe getDelegationTokens(renewer, creds) is also returning an empty list and not null.&lt;br/&gt;
However, there is a potential issue with the ViewFileSystem implementation - &lt;tt&gt;result = new ArrayList&amp;lt;Token&amp;lt;?&amp;gt;&amp;gt;(initialListSize)&lt;/tt&gt; - if there&apos;s multiple mount points - part of the array will not be populated.&lt;/p&gt;</comment>
                            <comment id="13179444" author="hudson" created="Wed, 4 Jan 2012 12:42:07 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #915 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/915/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/915/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Add a getDelegationTokens api to FileSystem which checks for known tokens in the passed Credentials object. (sseth)&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13179451" author="hudson" created="Wed, 4 Jan 2012 12:50:32 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-0.23-Build #128 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/128/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/128/&lt;/a&gt;)&lt;br/&gt;
    merge &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt; from trunk&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13179464" author="hudson" created="Wed, 4 Jan 2012 13:18:49 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-0.23-Build #150 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Build/150/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Build/150/&lt;/a&gt;)&lt;br/&gt;
    merge &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt; from trunk&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226917&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13179486" author="hudson" created="Wed, 4 Jan 2012 13:54:16 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #948 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/948/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/948/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Add a getDelegationTokens api to FileSystem which checks for known tokens in the passed Credentials object. (sseth)&lt;/p&gt;

&lt;p&gt;sseth : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1226916&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FilterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/ViewFileSystemBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13179643" author="daryn" created="Wed, 4 Jan 2012 17:05:12 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It appears Credentials was selected for convenience since that&apos;s what the MR&apos;s TokenCache uses internally? It appears Credentials was selected for convenience since that&apos;s what the MR&apos;s TokenCache uses internally?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The API is limited private (at least for now) to MR and HDFS - so I don&apos;t see this as a very big issue. Changing it to a set is a simple change though. Thoughts ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Although it&apos;s limited audience, it&apos;s arguably creating a cross-component dependency where the cart is leading the horse.  However, &lt;tt&gt;Credentials&lt;/tt&gt; is part of common, so perhaps it&apos;s not a big deal or even moot if the next point is addressed.&lt;/p&gt;

&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I&apos;m concerned that this appears to be creating a cross-component dependency whereby ViewFileSystem it required to &quot;assume&quot; how MR&apos;s TokenCache will want the tokens keyed within its Credentials.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not very happy with this either - suggestion on a better approach ? Again, being LimitedPrivate to MR and HDFS limits the impact.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;A simple solution is to centralize the chosen key to a single location.  Awhile back I played with adding &lt;tt&gt;Credentials#addToken(Token)&lt;/tt&gt; or &lt;tt&gt;Credentials#addServiceToken(token)&lt;/tt&gt; to enforce &lt;tt&gt;token.getService()&lt;/tt&gt; as the key.  Along the same lines, &lt;tt&gt;Credentials#getToken(TokenIssuer)&lt;/tt&gt; could fetch all tokens for the token issuing object.&lt;/p&gt;

&lt;p&gt;The cited inconsistency about &lt;tt&gt;getDelegationTokens&lt;/tt&gt; was a misread of the code...&lt;/p&gt;</comment>
                            <comment id="13180713" author="hudson" created="Thu, 5 Jan 2012 19:05:17 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #1573 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1573/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1573/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2710&quot; title=&quot;HDFS part of MAPREDUCE-3529, HADOOP-7933&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2710&quot;&gt;&lt;del&gt;HDFS-2710&lt;/del&gt;&lt;/a&gt;. Add HDFS tests related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Contributed by Siddarth Seth.&lt;/p&gt;

&lt;p&gt;suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/fs/viewfs/TestViewFileSystemHdfs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13180720" author="hudson" created="Thu, 5 Jan 2012 19:10:15 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #1501 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1501/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1501/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2710&quot; title=&quot;HDFS part of MAPREDUCE-3529, HADOOP-7933&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2710&quot;&gt;&lt;del&gt;HDFS-2710&lt;/del&gt;&lt;/a&gt;. Add HDFS tests related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Contributed by Siddarth Seth.&lt;/p&gt;

&lt;p&gt;suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/fs/viewfs/TestViewFileSystemHdfs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13180773" author="hudson" created="Thu, 5 Jan 2012 19:53:51 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #1521 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1521/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1521/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2710&quot; title=&quot;HDFS part of MAPREDUCE-3529, HADOOP-7933&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2710&quot;&gt;&lt;del&gt;HDFS-2710&lt;/del&gt;&lt;/a&gt;. Add HDFS tests related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Contributed by Siddarth Seth.&lt;/p&gt;

&lt;p&gt;suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/fs/viewfs/TestViewFileSystemHdfs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13181269" author="hudson" created="Fri, 6 Jan 2012 12:40:55 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #917 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/917/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/917/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2710&quot; title=&quot;HDFS part of MAPREDUCE-3529, HADOOP-7933&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2710&quot;&gt;&lt;del&gt;HDFS-2710&lt;/del&gt;&lt;/a&gt;. Add HDFS tests related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Contributed by Siddarth Seth.&lt;/p&gt;

&lt;p&gt;suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/fs/viewfs/TestViewFileSystemHdfs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13181307" author="hudson" created="Fri, 6 Jan 2012 13:22:28 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #950 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/950/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/950/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2710&quot; title=&quot;HDFS part of MAPREDUCE-3529, HADOOP-7933&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2710&quot;&gt;&lt;del&gt;HDFS-2710&lt;/del&gt;&lt;/a&gt;. Add HDFS tests related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7933&quot; title=&quot;Viewfs changes for MAPREDUCE-3529&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7933&quot;&gt;&lt;del&gt;HADOOP-7933&lt;/del&gt;&lt;/a&gt;. Contributed by Siddarth Seth.&lt;/p&gt;

&lt;p&gt;suresh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1227756&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/fs/viewfs/TestViewFileSystemHdfs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12535941">HDFS-2710</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12534584">MAPREDUCE-3529</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12537203">HADOOP-7951</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12537920">HADOOP-7967</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12508137" name="HADOOP-7933.txt" size="9904" author="sureshms" created="Tue, 20 Dec 2011 22:07:13 +0000"/>
                            <attachment id="12508168" name="HADOOP7933_v1.txt" size="11155" author="sseth" created="Wed, 21 Dec 2011 00:46:59 +0000"/>
                            <attachment id="12508321" name="HADOOP7933_v2.txt" size="11160" author="sseth" created="Thu, 22 Dec 2011 00:04:47 +0000"/>
                            <attachment id="12508130" name="HDFS2665_v1.txt" size="13983" author="sseth" created="Tue, 20 Dec 2011 21:19:21 +0000"/>
                            <attachment id="12508047" name="HDFS2665_v1.txt" size="13983" author="sseth" created="Tue, 20 Dec 2011 05:51:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220545</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07w33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43965</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12318884">0.23.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>