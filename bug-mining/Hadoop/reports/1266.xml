<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:45:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-10957] The globber will sometimes erroneously return a permission denied exception when there is a non-terminal wildcard</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-10957</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;The globber will sometimes erroneously return a permission denied exception when there is a non-terminal wildcard.  The existing unit tests don&apos;t catch this, because it doesn&apos;t happen for superusers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12733375">HADOOP-10957</key>
            <summary>The globber will sometimes erroneously return a permission denied exception when there is a non-terminal wildcard</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmccabe">Colin McCabe</assignee>
                                    <reporter username="cmccabe">Colin McCabe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Aug 2014 01:30:54 +0000</created>
                <updated>Fri, 12 Sep 2014 01:16:32 +0000</updated>
                            <resolved>Thu, 28 Aug 2014 02:58:51 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.5.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14093632" author="cmccabe" created="Tue, 12 Aug 2014 01:42:58 +0000"  >&lt;p&gt;Credit goes to Daryn for originally identifying this issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10942&quot; title=&quot;Globbing optimizations and regression fix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10942&quot;&gt;&lt;del&gt;HADOOP-10942&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14093751" author="hadoopqa" created="Tue, 12 Aug 2014 05:15:01 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12661109/HADOOP-10957.001.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12661109/HADOOP-10957.001.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover&lt;br/&gt;
                  org.apache.hadoop.fs.TestGlobPaths&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4453//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4453//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4453//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4453//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14094843" author="cmccabe" created="Tue, 12 Aug 2014 22:50:23 +0000"  >&lt;p&gt;v1 of this patch tried to remove the code described by this comment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// If we get back only one result, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; could be either a listing
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// of a directory with one entry, or it could reflect the fact
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// that what we listed resolved to a file.
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// Unfortunately, we can&apos;t just compare the returned paths to
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// figure &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; out.  Consider the &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; where you have /a/b, where
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// b is a symlink to &lt;span class=&quot;code-quote&quot;&gt;&quot;..&quot;&lt;/span&gt;.  In that &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;, listing /a/b will give
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// back &lt;span class=&quot;code-quote&quot;&gt;&quot;/a/b&quot;&lt;/span&gt; again.  If we just went by returned pathname, we&apos;d
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// incorrectly conclude that /a/b was a file and should not match
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// /a/*/*.  So we use getFileStatus of the path we just listed to
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// disambiguate.
&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately, removing this code isn&apos;t possible.  In the presence of symlinks, the result of &lt;tt&gt;listStatus&lt;/tt&gt; is simply ambiguous when it returns only one item.  Comparing paths won&apos;t work, because of the way symlinks play with paths.  The only way around this would be adding a new RPC (or a new option to the old &lt;tt&gt;listStatus&lt;/tt&gt; RPC) that would let us know whether we listed a directory or file.&lt;/p&gt;

&lt;p&gt;Anyway, v2 of the patch is super minimal.  It basically just adds a fix for the case where we tried to recurse into a file when handling a glob.  I also took the liberty of fixing two lines that had bad indentation in Globber.java, and avoiding the &quot;no groups found for user&quot; spew by adding this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-      UserGroupInformation.createRemoteUser(&lt;span class=&quot;code-quote&quot;&gt;&quot;myuser&quot;&lt;/span&gt;);
+    UserGroupInformation.createUserForTesting(&lt;span class=&quot;code-quote&quot;&gt;&quot;myuser&quot;&lt;/span&gt;,
+        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] { &lt;span class=&quot;code-quote&quot;&gt;&quot;mygroup&quot;&lt;/span&gt; });
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14095081" author="hadoopqa" created="Wed, 13 Aug 2014 02:58:54 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12661325/HADOOP-10957.002.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12661325/HADOOP-10957.002.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4459//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4459//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4459//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4459//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14095490" author="daryn" created="Wed, 13 Aug 2014 14:02:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;Unfortunately, removing this code isn&apos;t possible. In the presence of symlinks, the result of listStatus is simply ambiguous when it returns only one item&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The original patch this is an offshoot from is never supposed to call listStatus on a symlink which avoids the problem.  A symlink is resolved via getFileStatus prior to a listStatus call.  Do you see a bug in the original patch?&lt;/p&gt;

&lt;p&gt;I&apos;d rather not fragment the original patch.  We already have it internally deployed.  A piecemeal change will cause me to rework the internal patch multiple times due to conflicts...&lt;/p&gt;</comment>
                            <comment id="14095864" author="cmccabe" created="Wed, 13 Aug 2014 18:23:12 +0000"  >&lt;p&gt;Let&apos;s just discuss the bug here, and discuss optimizations on &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10942&quot; title=&quot;Globbing optimizations and regression fix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10942&quot;&gt;&lt;del&gt;HADOOP-10942&lt;/del&gt;&lt;/a&gt;.  This is a tiny patch which fixes a significant bug, so hopefully we can get it in quickly.&lt;/p&gt;</comment>
                            <comment id="14096186" author="daryn" created="Wed, 13 Aug 2014 21:53:30 +0000"  >&lt;p&gt;If you insist on splitting up the patch, take all the test changes on &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10942&quot; title=&quot;Globbing optimizations and regression fix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10942&quot;&gt;&lt;del&gt;HADOOP-10942&lt;/del&gt;&lt;/a&gt;.  The existing tests were sufficient if permissions are enabled and the the priv/unpriv fs are handled as intended.&lt;/p&gt;</comment>
                            <comment id="14098138" author="cmccabe" created="Fri, 15 Aug 2014 04:45:03 +0000"  >&lt;p&gt;OK.  This patch also switches over TestGlobPaths to use non-privileged FC and FS&lt;/p&gt;</comment>
                            <comment id="14113048" author="andrew.wang" created="Wed, 27 Aug 2014 23:19:46 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="14113218" author="hadoopqa" created="Thu, 28 Aug 2014 02:10:17 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12661995/HADOOP-10957.003.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12661995/HADOOP-10957.003.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.hdfs.TestDatanodeBlockScanner&lt;br/&gt;
                  org.apache.hadoop.hdfs.web.TestWebHdfsFileSystemContract&lt;br/&gt;
                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4559//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4559//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4559//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4559//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14113264" author="cmccabe" created="Thu, 28 Aug 2014 03:00:37 +0000"  >&lt;p&gt;Committed to branch 2.5.1.  Good find, Daryn.  Thanks for the reviews, Daryn and Andrew.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12733376">HADOOP-10958</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12732410">HADOOP-10942</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12661109" name="HADOOP-10957.001.patch" size="5104" author="cmccabe" created="Tue, 12 Aug 2014 01:37:58 +0000"/>
                            <attachment id="12661325" name="HADOOP-10957.002.patch" size="3890" author="cmccabe" created="Tue, 12 Aug 2014 22:50:23 +0000"/>
                            <attachment id="12661995" name="HADOOP-10957.003.patch" size="20541" author="cmccabe" created="Fri, 15 Aug 2014 04:45:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411403</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ys0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411394</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326263">2.5.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>