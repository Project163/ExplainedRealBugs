<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:45:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-11055] non-daemon pid files are missing</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-11055</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Somewhere along the way, daemons run in default mode lost pid files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12738650">HADOOP-11055</key>
            <summary>non-daemon pid files are missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aw">Allen Wittenauer</assignee>
                                    <reporter username="aw">Allen Wittenauer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Sep 2014 23:56:18 +0000</created>
                <updated>Thu, 12 May 2016 18:21:42 +0000</updated>
                            <resolved>Tue, 16 Sep 2014 21:11:41 +0000</resolved>
                                                    <fixVersion>3.0.0-alpha1</fixVersion>
                                    <component>scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14119047" author="aw" created="Wed, 3 Sep 2014 00:24:07 +0000"  >&lt;p&gt;OK, this appears to be fairly easy to solve.  The big thing is that the pid file var needs to get sent to start_daemon so that it can write the pid file &lt;b&gt;before&lt;/b&gt; launching java.  The exec will replace the running process with the java, but the pid should not change.  &lt;/p&gt;

&lt;p&gt;This, however, means breaking/updating the params that get sent to start_daemon. Since this is an unreleased version, not a big deal.&lt;/p&gt;</comment>
                            <comment id="14119050" author="aw" created="Wed, 3 Sep 2014 00:27:14 +0000"  >&lt;p&gt;It&apos;s worth noting that _wrapper should keep its pid code since we are forking the java bit. This will replace that pid with the forked one.&lt;/p&gt;</comment>
                            <comment id="14123065" author="pocky" created="Fri, 5 Sep 2014 15:48:32 +0000"  >&lt;p&gt;Isn&apos;t it safe to write the pid file inside the hadoop_start_daemon function since that is the process id of the pid file?&lt;/p&gt;</comment>
                            <comment id="14123276" author="aw" created="Fri, 5 Sep 2014 18:05:40 +0000"  >&lt;p&gt;Yup, you are absolutely correct.  There&apos;s no point in keeping the pid write after the fork since it should write the exact same info anyway.&lt;/p&gt;</comment>
                            <comment id="14132093" author="aw" created="Fri, 12 Sep 2014 20:55:33 +0000"  >&lt;ul&gt;
	&lt;li&gt;Fixes the error in secure_prereq to resemble English&lt;/li&gt;
	&lt;li&gt;_daemon functions now write the pidfile on execution&lt;/li&gt;
	&lt;li&gt;_wrapper functions now overwrite the pidfile with the proper post-fork pid&lt;/li&gt;
	&lt;li&gt;Counter put in place to avoid a race condition with pid file creation vs. fork pid&lt;/li&gt;
	&lt;li&gt;Cleaned up daemon related error messages&lt;/li&gt;
	&lt;li&gt;Fixed disown to actually operate on the correct pid&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14132097" author="aw" created="Fri, 12 Sep 2014 20:57:29 +0000"  >&lt;p&gt;Playing around, the $$ inside the &amp;amp;&apos;d process is wrong for the daemonization case during the pid write. So &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pocky&quot; class=&quot;user-hover&quot; rel=&quot;pocky&quot;&gt;pocky&lt;/a&gt;, we were both wrong after some experimentation! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="14132165" author="hadoopqa" created="Fri, 12 Sep 2014 21:46:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12668452/HADOOP-11055.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12668452/HADOOP-11055.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 54e5794.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4706//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4706//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4706//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4706//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14136172" author="owen.omalley" created="Tue, 16 Sep 2014 20:46:22 +0000"  >&lt;p&gt;+1 looks good, Allen.&lt;/p&gt;</comment>
                            <comment id="14136221" author="aw" created="Tue, 16 Sep 2014 21:07:30 +0000"  >&lt;p&gt;-01 is just some syntax cleanup.&lt;/p&gt;

&lt;p&gt;Thanks Owen! I&apos;ll commit this in a bit.&lt;/p&gt;</comment>
                            <comment id="14136234" author="aw" created="Tue, 16 Sep 2014 21:11:41 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="14136350" author="hadoopqa" created="Tue, 16 Sep 2014 22:14:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12669202/HADOOP-11055-01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12669202/HADOOP-11055-01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 56119fe.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The following test timeouts occurred in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.security.token.delegation.web.TestWebDelegationToken&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4739//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4739//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4739//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4739//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14137082" author="hudson" created="Wed, 17 Sep 2014 11:31:16 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #683 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/683/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/683/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11055&quot; title=&quot;non-daemon pid files are missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11055&quot;&gt;&lt;del&gt;HADOOP-11055&lt;/del&gt;&lt;/a&gt;. non-daemon pid files are missing (aw) (aw: rev ffdb7eb3b256c8e064948a962aa07e2e276889c5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/bin/hadoop-functions.sh&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14137233" author="hudson" created="Wed, 17 Sep 2014 13:46:52 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1899 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1899/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1899/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11055&quot; title=&quot;non-daemon pid files are missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11055&quot;&gt;&lt;del&gt;HADOOP-11055&lt;/del&gt;&lt;/a&gt;. non-daemon pid files are missing (aw) (aw: rev ffdb7eb3b256c8e064948a962aa07e2e276889c5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/bin/hadoop-functions.sh&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14137260" author="hudson" created="Wed, 17 Sep 2014 13:57:34 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1874 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1874/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1874/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11055&quot; title=&quot;non-daemon pid files are missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11055&quot;&gt;&lt;del&gt;HADOOP-11055&lt;/del&gt;&lt;/a&gt;. non-daemon pid files are missing (aw) (aw: rev ffdb7eb3b256c8e064948a962aa07e2e276889c5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/bin/hadoop-functions.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12737002">HADOOP-11010</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12669202" name="HADOOP-11055-01.patch" size="8207" author="aw" created="Tue, 16 Sep 2014 21:07:30 +0000"/>
                            <attachment id="12668452" name="HADOOP-11055.patch" size="8120" author="aw" created="Fri, 12 Sep 2014 20:55:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zlpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>