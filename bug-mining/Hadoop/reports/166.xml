<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:34:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6670] UserGroupInformation doesn&apos;t support use in hash tables</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6670</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;The UserGroupInformation objects are mutable, but they are used as keys in hash tables. This leads to serious problems in the FileSystem cache and RPC connection cache. We need to change the hashCode to be the identity hash code of the Subject and change equals to use == between the Subjects.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12460872">HADOOP-6670</key>
            <summary>UserGroupInformation doesn&apos;t support use in hash tables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="omalley">Owen O&apos;Malley</assignee>
                                    <reporter username="omalley">Owen O&apos;Malley</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Mar 2010 23:35:52 +0000</created>
                <updated>Tue, 20 Mar 2018 21:09:43 +0000</updated>
                            <resolved>Sat, 17 Jul 2010 01:43:18 +0000</resolved>
                                                    <fixVersion>0.22.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="12852261" author="owen.omalley" created="Thu, 1 Apr 2010 06:07:01 +0000"  >&lt;p&gt;This patch fixes the problem and the testcases. I&apos;m still getting a test case failure in the dist cache one.&lt;/p&gt;</comment>
                            <comment id="12852542" author="owen.omalley" created="Thu, 1 Apr 2010 20:49:03 +0000"  >&lt;p&gt;This patch changes UGI.hashCode to be the identity hash of the Subject and equals to check == between the subjects.&lt;/p&gt;</comment>
                            <comment id="12853428" author="owen.omalley" created="Mon, 5 Apr 2010 16:29:43 +0000"  >&lt;p&gt;This is the updated patch for y20. Not for inclusion.&lt;/p&gt;</comment>
                            <comment id="12860618" author="devaraj" created="Sun, 25 Apr 2010 00:06:39 +0000"  >&lt;p&gt;Fixes a testcase that got affected by the UGI changes in hashcode/equals methods.&lt;/p&gt;</comment>
                            <comment id="12887097" author="kzhang" created="Sat, 10 Jul 2010 22:08:11 +0000"  >&lt;p&gt;Attaching a straight-forward port for trunk. Changes made to TestFileSystem in the original patch is now applied to TestFileSystemCaching. Changes made to FileSystem.java are ignored since only debug messages were added. Changes made to TestTrackerDistributedCacheManager are also ignored for the same reason. Devaraj&apos;s bug fix for Gridmix is not ported at this time since related Gridmix files are not forward ported yet. It&apos;s better to incorporate the bug fix when porting Gridmix.&lt;/p&gt;</comment>
                            <comment id="12887555" author="hadoopqa" created="Mon, 12 Jul 2010 21:52:24 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12449172/c6670-02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12449172/c6670-02.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 963490.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/609/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/609/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/609/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/609/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/609/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/609/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/609/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/609/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12887588" author="kzhang" created="Mon, 12 Jul 2010 23:41:56 +0000"  >&lt;p&gt;The javadoc warnings are due to KerberosName.java and SecurityUtil.java, and not related to this patch.&lt;/p&gt;</comment>
                            <comment id="12888513" author="jnp" created="Wed, 14 Jul 2010 20:10:01 +0000"  >&lt;p&gt;In TestUserGroupInformation.java there is a repeated check for equality of two UGIs with same subject which can be removed.&lt;/p&gt;</comment>
                            <comment id="12889367" author="kzhang" created="Fri, 16 Jul 2010 22:23:41 +0000"  >&lt;p&gt;Attaching a new patch that removes the redundant checking in test per Jitendra&apos;s comment. Otherwise, it stays the same.&lt;/p&gt;</comment>
                            <comment id="12889385" author="hadoopqa" created="Fri, 16 Jul 2010 23:01:11 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12449720/c6670-03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12449720/c6670-03.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 964939.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/620/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/620/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/620/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/620/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/620/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/620/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/620/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/620/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12889449" author="devaraj" created="Sat, 17 Jul 2010 01:43:18 +0000"  >&lt;p&gt;I just committed this. Thanks, Owen and Kan!&lt;/p&gt;</comment>
                            <comment id="12889451" author="hudson" created="Sat, 17 Jul 2010 02:03:03 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #329 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/329/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/329/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6670&quot; title=&quot;UserGroupInformation doesn&amp;#39;t support use in hash tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6670&quot;&gt;&lt;del&gt;HADOOP-6670&lt;/del&gt;&lt;/a&gt;. Use the UserGroupInformation&apos;s Subject as the criteria for equals and hashCode. Contributed by Owen O&apos;Malley and Kan Zhang.&lt;/p&gt;</comment>
                            <comment id="12889493" author="hudson" created="Sat, 17 Jul 2010 11:12:54 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #395 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/395/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/395/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6670&quot; title=&quot;UserGroupInformation doesn&amp;#39;t support use in hash tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6670&quot;&gt;&lt;del&gt;HADOOP-6670&lt;/del&gt;&lt;/a&gt;. Use the UserGroupInformation&apos;s Subject as the criteria for equals and hashCode. Contributed by Owen O&apos;Malley and Kan Zhang.&lt;/p&gt;</comment>
                            <comment id="16407050" author="ctubbsii" created="Tue, 20 Mar 2018 21:09:43 +0000"  >&lt;p&gt;I just tried to compare two UGIs using UserGroupInformation.equals() and it failed, because even though they had the same Subject (.equals), they were not the same instance (==). This seems like a bug which was introduced here. Why was (==) used to compare Subject? Was this intentional?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12909099">HADOOP-12529</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12442760" name="6670-gridmix-test.bugfix.patch" size="1653" author="ddas" created="Sun, 25 Apr 2010 00:06:38 +0000"/>
                            <attachment id="12449172" name="c6670-02.patch" size="6088" author="kzhang" created="Sat, 10 Jul 2010 22:08:11 +0000"/>
                            <attachment id="12449720" name="c6670-03.patch" size="6095" author="kzhang" created="Fri, 16 Jul 2010 22:23:41 +0000"/>
                            <attachment id="12440773" name="fs-close.patch" size="12562" author="omalley" created="Mon, 5 Apr 2010 16:29:43 +0000"/>
                            <attachment id="12440538" name="fs-close.patch" size="8988" author="omalley" created="Thu, 1 Apr 2010 20:49:03 +0000"/>
                            <attachment id="12440448" name="fs-close.patch" size="12862" author="omalley" created="Thu, 1 Apr 2010 06:07:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02qm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>