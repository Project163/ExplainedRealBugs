<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:35:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-7111] Several TFile tests failing when native libraries are present</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-7111</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;When running tests with native libraries present, TestTFileByteArrays and TestTFileJClassComparatorByteArrays fail on trunk. They don&apos;t seem to fail in 0.20 with native libraries.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12495940">HADOOP-7111</key>
            <summary>Several TFile tests failing when native libraries are present</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="atm">Aaron Myers</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jan 2011 22:57:03 +0000</created>
                <updated>Wed, 27 Jun 2012 22:12:32 +0000</updated>
                            <resolved>Wed, 20 Jul 2011 20:43:08 +0000</resolved>
                                                    <fixVersion>0.23.0</fixVersion>
                                    <component>io</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="12983445" author="tlipcon" created="Tue, 18 Jan 2011 23:44:41 +0000"  >&lt;p&gt;This is a regression caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6683&quot; title=&quot;the first optimization: ZlibCompressor does not fully utilize the buffer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6683&quot;&gt;&lt;del&gt;HADOOP-6683&lt;/del&gt;&lt;/a&gt;. Reverting that patch allows the test to patch.&lt;/p&gt;

&lt;p&gt;Haven&apos;t looked into it yet whether the tests are faulty or that patch is faulty.&lt;/p&gt;</comment>
                            <comment id="12985979" author="hong.tang" created="Mon, 24 Jan 2011 21:00:55 +0000"  >&lt;p&gt;There could be two possibilities. &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;in some of the TFile tests, we hard-coded the sizes of the compressed blocks. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6683&quot; title=&quot;the first optimization: ZlibCompressor does not fully utilize the buffer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6683&quot;&gt;&lt;del&gt;HADOOP-6683&lt;/del&gt;&lt;/a&gt; may have affected the compressed sizes.&lt;/li&gt;
	&lt;li&gt;TFile closes a block when it observes the compressed size of the block exceeds the configured minimum block size. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6683&quot; title=&quot;the first optimization: ZlibCompressor does not fully utilize the buffer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6683&quot;&gt;&lt;del&gt;HADOOP-6683&lt;/del&gt;&lt;/a&gt; waits until a full-buffer if raw bytes before compressing, and thus changes the behavior.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13051227" author="tlipcon" created="Fri, 17 Jun 2011 18:01:32 +0000"  >&lt;p&gt;Something in trunk just changed such that the native libs are on the classpath when the tests run, so the tests are now failing:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk/721/testReport/junit/org.apache.hadoop.io.file.tfile/TestTFileByteArrays/testOneBlockPlusOneEntry/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk/721/testReport/junit/org.apache.hadoop.io.file.tfile/TestTFileByteArrays/testOneBlockPlusOneEntry/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13056358" author="eli" created="Tue, 28 Jun 2011 07:13:55 +0000"  >&lt;p&gt;Strange, bi-secting on my host leads to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7206&quot; title=&quot;Integrate Snappy compression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7206&quot;&gt;&lt;del&gt;HADOOP-7206&lt;/del&gt;&lt;/a&gt; but that was committed after these tests started failing, must be triggering something.&lt;/p&gt;</comment>
                            <comment id="13068018" author="atm" created="Tue, 19 Jul 2011 22:22:12 +0000"  >&lt;p&gt;Patch which addresses the issue. Hong&apos;s theory #2 was correct.&lt;/p&gt;

&lt;p&gt;The only change which actually fixes the tests is the change to the initialization of &lt;tt&gt;records1stBlock&lt;/tt&gt; and &lt;tt&gt;records2ndBlock&lt;/tt&gt; to be dependent upon whether or not the native libs are present.&lt;/p&gt;

&lt;p&gt;While I was in the file, I also took the opportunity to do a little cleanup by:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Converting to the new style of test annotations.&lt;/li&gt;
	&lt;li&gt;Refactoring some methods which had unused parameters.&lt;/li&gt;
	&lt;li&gt;Fixing up some formatting.&lt;/li&gt;
	&lt;li&gt;Reducing some code duplication in &lt;tt&gt;TestTFileJClassComparatorByteArrays&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Fixing some &quot;unused variable&quot; compiler warnings.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;ve tested both &lt;tt&gt;TestTFileJClassComparatorByteArrays&lt;/tt&gt; and &lt;tt&gt;TestTFileByteArrays&lt;/tt&gt; both with and without native code being present.&lt;/p&gt;</comment>
                            <comment id="13068034" author="hadoopqa" created="Tue, 19 Jul 2011 22:42:06 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12487068/hadoop-7111.0.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12487068/hadoop-7111.0.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1147971.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/750//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/750//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/750//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/750//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/750//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/750//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13068605" author="tomwhite" created="Wed, 20 Jul 2011 20:20:20 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;The TODO you added should be removed along with the assertNull on the following line, since the Assert.fail is sufficient.&lt;/p&gt;</comment>
                            <comment id="13068618" author="atm" created="Wed, 20 Jul 2011 20:39:31 +0000"  >&lt;p&gt;Thanks a lot, Tom. Here&apos;s a patch removing the TODO and the useless assert.&lt;/p&gt;</comment>
                            <comment id="13068621" author="atm" created="Wed, 20 Jul 2011 20:43:08 +0000"  >&lt;p&gt;I&apos;ve just committed this. Looking forward to a green Common build!&lt;/p&gt;

&lt;p&gt;Thanks again for the review, Tom.&lt;/p&gt;</comment>
                            <comment id="13068626" author="hadoopqa" created="Wed, 20 Jul 2011 20:51:57 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12487211/hadoop-7111.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12487211/hadoop-7111.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1147971.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/754//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13068640" author="hudson" created="Wed, 20 Jul 2011 21:05:52 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #695 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/695/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/695/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7111&quot; title=&quot;Several TFile tests failing when native libraries are present&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7111&quot;&gt;&lt;del&gt;HADOOP-7111&lt;/del&gt;&lt;/a&gt;. Several TFile tests failing when native libraries are present. (atm)&lt;/p&gt;

&lt;p&gt;atm : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1148933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1148933&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/io/file/tfile/TestTFileStreams.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/io/file/tfile/TestTFileJClassComparatorByteArrays.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/io/file/tfile/TestTFileByteArrays.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13068913" author="hudson" created="Thu, 21 Jul 2011 11:15:28 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #753 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk/753/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk/753/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7111&quot; title=&quot;Several TFile tests failing when native libraries are present&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7111&quot;&gt;&lt;del&gt;HADOOP-7111&lt;/del&gt;&lt;/a&gt;. Several TFile tests failing when native libraries are present. (atm)&lt;/p&gt;

&lt;p&gt;atm : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1148933&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1148933&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/io/file/tfile/TestTFileStreams.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/io/file/tfile/TestTFileJClassComparatorByteArrays.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/common/src/test/core/org/apache/hadoop/io/file/tfile/TestTFileByteArrays.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13402598" author="tlipcon" created="Wed, 27 Jun 2012 22:12:32 +0000"  >&lt;p&gt;These seem to be failing again in some patch builds. I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8537&quot; title=&quot;Two TFile tests failing recently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8537&quot;&gt;&lt;del&gt;HADOOP-8537&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12513158">HADOOP-7453</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12511114">HADOOP-7409</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12461200">HADOOP-6683</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12487068" name="hadoop-7111.0.patch" size="25966" author="atm" created="Tue, 19 Jul 2011 22:22:12 +0000"/>
                            <attachment id="12487211" name="hadoop-7111.1.patch" size="25862" author="atm" created="Wed, 20 Jul 2011 20:39:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>67290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09kkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>53766</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>