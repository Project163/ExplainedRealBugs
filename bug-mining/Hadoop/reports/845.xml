<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:42:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-9357] Fallback to default authority if not specified in FileContext</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-9357</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Currently, FileContext adheres rather strictly to RFC2396 when it comes to parsing absolute URIs (URIs with a scheme). If a user asks for a URI like &quot;hdfs:///tmp&quot;, FileContext will error while FileSystem will add the authority of the default FS (e.g. turn it into &quot;hdfs://defaultNN:port/tmp&quot;). &lt;/p&gt;

&lt;p&gt;This is technically correct, but FileSystem&apos;s behavior is nicer for users and okay based on 5.2.3 in the RFC, so lets do it in FileContext too:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;For backwards
compatibility, an implementation may work around such references
by removing the scheme if it matches that of the base URI and the
scheme is known to always use the  syntax.  The parser
can then continue with the steps below for the remainder of the
reference components.  Validating parsers should mark such a
misformed relative reference as an error.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12635177">HADOOP-9357</key>
            <summary>Fallback to default authority if not specified in FileContext</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="andrew.wang">Andrew Wang</assignee>
                                    <reporter username="andrew.wang">Andrew Wang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Mar 2013 18:40:04 +0000</created>
                <updated>Mon, 6 Mar 2017 22:33:48 +0000</updated>
                            <resolved>Mon, 6 Mar 2017 22:33:48 +0000</resolved>
                                    <version>2.0.0-alpha</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                                <comments>
                            <comment id="13592758" author="andrew.wang" created="Mon, 4 Mar 2013 22:42:15 +0000"  >&lt;p&gt;Here&apos;s a patch that implements the recommendation in the RFC.&lt;/p&gt;

&lt;p&gt;If you want to actually see the fail-before-pass-after behavior of the new test, run &lt;tt&gt;mvn test -Dtest=TestHDFSFileContextMainOperations#testPathSchemeNoAuthority&lt;/tt&gt;. The new code only kicks in when the defaultFS has a non-null authority (thus you need &lt;tt&gt;Hdfs&lt;/tt&gt; and not &lt;tt&gt;RawLocalFs&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="13592791" author="hadoopqa" created="Mon, 4 Mar 2013 23:27:12 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571972/hadoop-9357-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571972/hadoop-9357-1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;red&quot;&gt;-1 one of tests included doesn&apos;t have a timeout.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2258//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2258//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2258//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2258//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13592832" author="andrew.wang" created="Tue, 5 Mar 2013 00:08:05 +0000"  >&lt;p&gt;Add test timeout.&lt;/p&gt;</comment>
                            <comment id="13592864" author="hadoopqa" created="Tue, 5 Mar 2013 00:45:53 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571995/hadoop-9357-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571995/hadoop-9357-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included appear to have a timeout.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2259//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2259//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2259//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2259//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13612277" author="eli" created="Sun, 24 Mar 2013 22:39:04 +0000"  >&lt;p&gt;Hey Andrew,&lt;/p&gt;

&lt;p&gt;The rationale and change looks good. Nits:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The new code can live in the first case of the existing if right? Ie all URIs that need fixing are absolute.&lt;/li&gt;
	&lt;li&gt;More descriptive name than &quot;fixPath&quot;?&lt;/li&gt;
	&lt;li&gt;Consider adding new Path method (similar to isAbsoluteAndSchemeAuthorityNull)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Not something we need to fix with this change, but what do you think about moving this logic into the path constructor so we don&apos;t have to call this fixup method explicitly all over the place?&lt;/p&gt;</comment>
                            <comment id="13614779" author="andrew.wang" created="Wed, 27 Mar 2013 01:15:35 +0000"  >&lt;p&gt;Hi Eli, thanks for the review,&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The new code can live in the first case of the existing if right? Ie all URIs that need fixing are absolute.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I thought about this a bit, and I think you can have URIs with a scheme and relative path, e.g. &lt;tt&gt;hdfs:foo/bar&lt;/tt&gt;, which should then just be treated as &lt;tt&gt;foo/bar&lt;/tt&gt;. I added a test case for this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;More descriptive name than &quot;fixPath&quot;?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since &quot;fixRelativePartAndSchemaNoAuthority&quot; doesn&apos;t roll off the tongue so well, I just changed it back to the original &quot;fixRelativePart&quot;. In FileSystem, this is done in checkPath (not a great name either).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Consider adding new Path method (similar to isAbsoluteAndSchemeAuthorityNull)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good idea, added. I didn&apos;t refactor FileSystem&apos;s handling to use this since it&apos;s kind of gnarly, but I could if desirable.&lt;/p&gt;

&lt;p&gt;On putting this in the constructor, I don&apos;t think we can easily pursue that path. We can&apos;t do the fixup until we know the default scheme of the filesystem where the path is being resolved, which would mean passing un-fixed URIs around as a &lt;tt&gt;URI&lt;/tt&gt; or &lt;tt&gt;String&lt;/tt&gt; or &lt;tt&gt;NewPath&lt;/tt&gt; before we can make it into a &lt;tt&gt;Path&lt;/tt&gt;. FS and FC already process incoming paths in fixup/check methods, so that&apos;s probably the right place for this too.&lt;/p&gt;</comment>
                            <comment id="13614832" author="hadoopqa" created="Wed, 27 Mar 2013 02:35:27 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12575626/hadoop-9357-3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12575626/hadoop-9357-3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2368//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2368//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2368//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2368//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13615885" author="eli" created="Wed, 27 Mar 2013 23:31:43 +0000"  >&lt;p&gt;+1 looks great&lt;/p&gt;</comment>
                            <comment id="13615895" author="eli" created="Wed, 27 Mar 2013 23:47:48 +0000"  >&lt;p&gt;I&apos;ve committed this and merged to branch-2. Thanks Andrew!&lt;/p&gt;</comment>
                            <comment id="13616789" author="hudson" created="Thu, 28 Mar 2013 23:16:28 +0000"  >&lt;p&gt;Integrated in Hadoop-trunk-Commit #3537 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/3537/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/3537/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. Fallback to default authority if not specified in FileContext. Contributed by Andrew Wang (Revision 1461898)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1461898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1461898&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileContextMainOperationsBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617062" author="cnauroth" created="Fri, 29 Mar 2013 04:28:08 +0000"  >&lt;p&gt;Hi, Andrew.  I&apos;ve just started to see a test failure in YARN nodemanager: &lt;tt&gt;TestContainerLocalizer#testContainerLocalizerMain&lt;/tt&gt;.  git bisect indicates that the problem was introduced with this patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;.  I first noticed the problem because of a test failure during pre-commit checks on my patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-493&quot; title=&quot;NodeManager job control logic flaws on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-493&quot;&gt;&lt;del&gt;YARN-493&lt;/del&gt;&lt;/a&gt;.  Here is the output from the pre-commit test failure:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/PreCommit-YARN-Build/619//testReport/org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer/TestContainerLocalizer/testContainerLocalizerMain/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-YARN-Build/619//testReport/org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer/TestContainerLocalizer/testContainerLocalizerMain/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It looks like a mock was strictly expecting to see &quot;file&quot; authority, and now it&apos;s no longer receiving it.  Are you seeing this test fail too?  Thanks!&lt;/p&gt;</comment>
                            <comment id="13617106" author="vinodkv" created="Fri, 29 Mar 2013 05:50:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt;, we are seeing this consistently, filed &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eli&quot; class=&quot;user-hover&quot; rel=&quot;eli&quot;&gt;eli&lt;/a&gt;, it seems like an incompatible change, mark it so?&lt;/p&gt;</comment>
                            <comment id="13617107" author="cnauroth" created="Fri, 29 Mar 2013 05:50:35 +0000"  >&lt;p&gt;I think this patch also has caused a problem with &lt;tt&gt;TestFcHdfsSymlink&lt;/tt&gt; in HDFS.  I saw a failure during the pre-commit checks on my patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-4372&quot; title=&quot;Track NameNode startup progress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-4372&quot;&gt;&lt;del&gt;HDFS-4372&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/4164//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/4164//testReport/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Are you also seeing this one fail?  Thanks again!&lt;/p&gt;</comment>
                            <comment id="13617112" author="vinodkv" created="Fri, 29 Mar 2013 05:55:33 +0000"  >&lt;p&gt;Yes, the 4 test-cases are all failing for me too, with same exception message.&lt;/p&gt;</comment>
                            <comment id="13617114" author="vinodkv" created="Fri, 29 Mar 2013 05:57:26 +0000"  >&lt;p&gt;The fix version was set to 2.0.4-alpha, should be 2.0.5-beta? Also, it was left unresolved?&lt;/p&gt;</comment>
                            <comment id="13617142" author="andrew.wang" created="Fri, 29 Mar 2013 06:38:01 +0000"  >&lt;p&gt;Hi guys,&lt;/p&gt;

&lt;p&gt;Thanks for looking into this. You&apos;re right about the test breakages. Reverting this to do a fixup is fine; I already have fixes lined up for both. The symlink test is incorrectly enforcing the old behavior, and the yarn test is testing a mocked AFS call that just needs to be updated.&lt;/p&gt;

&lt;p&gt;Agree that this is an incompatible change to FileContext in that we can now consume a broader class of URIs, but it&apos;s still quite desirable since it makes FileContext more FileSystem-like.&lt;/p&gt;</comment>
                            <comment id="13617226" author="hudson" created="Fri, 29 Mar 2013 10:40:00 +0000"  >&lt;p&gt;Integrated in Hadoop-Yarn-trunk #169 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/169/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/169/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. Fallback to default authority if not specified in FileContext. Contributed by Andrew Wang (Revision 1461898)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1461898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1461898&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileContextMainOperationsBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617302" author="hudson" created="Fri, 29 Mar 2013 12:56:03 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1358 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1358/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1358/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. Fallback to default authority if not specified in FileContext. Contributed by Andrew Wang (Revision 1461898)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1461898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1461898&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileContextMainOperationsBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617350" author="hudson" created="Fri, 29 Mar 2013 14:05:36 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1386 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1386/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1386/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. Fallback to default authority if not specified in FileContext. Contributed by Andrew Wang (Revision 1461898)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1461898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1461898&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileContextMainOperationsBaseTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617412" author="cnauroth" created="Fri, 29 Mar 2013 15:14:32 +0000"  >&lt;p&gt;Thanks, Andrew!&lt;/p&gt;</comment>
                            <comment id="13617688" author="andrew.wang" created="Fri, 29 Mar 2013 20:24:15 +0000"  >&lt;p&gt;If not reverting is preferred, I&apos;m attaching an additional patch which fixes the broken tests.&lt;/p&gt;</comment>
                            <comment id="13617814" author="hadoopqa" created="Fri, 29 Mar 2013 22:24:23 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12576152/hadoop-9357-testfixup.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12576152/hadoop-9357-testfixup.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2382//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2382//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/2382//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/2382//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13617936" author="djp" created="Sat, 30 Mar 2013 01:09:55 +0000"  >&lt;p&gt;The test failure is not related to this patch. I partial fixed it in &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-4261&quot; title=&quot;TestBalancerWithNodeGroup times out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-4261&quot;&gt;&lt;del&gt;HDFS-4261&lt;/del&gt;&lt;/a&gt;, but still some timeout in occasional case. So I will continue to fix that in &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-4261&quot; title=&quot;TestBalancerWithNodeGroup times out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-4261&quot;&gt;&lt;del&gt;HDFS-4261&lt;/del&gt;&lt;/a&gt;. I am fine with testfixup patch and I think it should be checked in soon to get rid of -1 for other patches.&lt;/p&gt;</comment>
                            <comment id="13617942" author="djp" created="Sat, 30 Mar 2013 01:16:50 +0000"  >&lt;p&gt;Also, I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-4653&quot; title=&quot;4 unit tests in TestFcHdfsSymlink failed on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-4653&quot;&gt;&lt;del&gt;HDFS-4653&lt;/del&gt;&lt;/a&gt; to track tests failure before I found this jira (Thanks Andrew for noting). If we don&apos;t want to roll back previous 9357 patch, I think it could be better to put fixup patch there.&lt;/p&gt;</comment>
                            <comment id="13619389" author="vinodkv" created="Tue, 2 Apr 2013 00:55:12 +0000"  >&lt;p&gt;@Andrew, I am posting your YARN fix at &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt;, and committing it to unblock builds.&lt;/p&gt;</comment>
                            <comment id="13619403" author="sanjay.radia" created="Tue, 2 Apr 2013 01:20:30 +0000"  >&lt;p&gt;Failing when authority-port is not specified was consciously done when fileContext was implemented.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A user wanting /tmp on the default file system should say &quot;/tmp&quot; and not &quot;hdfs:///tmp&quot;.&lt;/li&gt;
	&lt;li&gt;While the notion of a default file system is very appropriate, the notion of default authority per scheme does not make sense, especially if it is derived from the default file system.&lt;/li&gt;
	&lt;li&gt;In a multi-cluster environment, getting in the default authority/port from the default file system can lead to accessing the files at the wrong HDFS cluster/volume (each cluster has its own default and a user is allowed to access the HDFS volumes in different HDFS clusters from within the same application (as in distcp)).&lt;/li&gt;
	&lt;li&gt;If you encourage the use of hdfs:///tmp then as you change your default file system from hdfs to localfs, the app can suddenly fail.  Being able to change the local file system to different HDFS volumes/clusters, s3, localfs in a fairly transparent fashion is a useful feature of Hadoop. For example, if /tmp  refers to the tmp on the default file system then things work transparently when the the default file system is changed from hdfs://cluster1NN:37 to hdfs://cluster2NN:55 to &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt; to s3fs etc.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Is this Jira being driven by customer apps that are breaking?&lt;/p&gt;</comment>
                            <comment id="13619485" author="andrew.wang" created="Tue, 2 Apr 2013 03:41:10 +0000"  >&lt;p&gt;Hi Sanjay,&lt;/p&gt;

&lt;p&gt;Thanks for taking a look, I understand and agree with most of your points. I created this JIRA after some end user confusion when porting an app from FileSystem to FileContext. I felt that URIs like &lt;tt&gt;hdfs:///tmp&lt;/tt&gt; should be discouraged but supported, since they are supported by FileSystem, and this case is specifically mentioned in the RFC as an okay fallback.&lt;/p&gt;

&lt;p&gt;A couple potentially clarifying points:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;A user wanting /tmp on the default file system should say &quot;/tmp&quot; and not &quot;hdfs:///tmp&quot;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This code triggers when the schema matches the schema of the default FS. &lt;tt&gt;hdfs:///tmp&lt;/tt&gt; will only work if the default FS is an HDFS instance.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;While the notion of a default file system is very appropriate, the notion of default authority per scheme does not make sense, especially if it is derived from the default file system.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There is not a default authority per scheme, as per the previous.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In a multi-cluster environment, getting in the default authority/port from the default file system can lead to accessing the files at the wrong HDFS cluster/volume...&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;If you encourage the use of hdfs:///tmp then as you change your default file system from hdfs to localfs...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree there could be ambiguity if you have multiple FS with the same schema, or change the default FS.&lt;/p&gt;

&lt;p&gt;Moving toward a meta question, we already have all these problems with FileSystem, which is the dominant interface to HDFS. Have we encountered these problems in FileSystem with ambiguity and changing the default FS? I at least haven&apos;t heard of any, but I did see the mail that led to this JIRA.&lt;/p&gt;</comment>
                            <comment id="13619546" author="hudson" created="Tue, 2 Apr 2013 05:57:41 +0000"  >&lt;p&gt;Integrated in Hadoop-trunk-Commit #3546 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/3546/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/3546/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt;. Fix failure in TestContainerLocalizer caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. Contributed by Andrew Wang. (Revision 1463362)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
vinodkv : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463362&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13619693" author="hudson" created="Tue, 2 Apr 2013 10:49:05 +0000"  >&lt;p&gt;Integrated in Hadoop-Yarn-trunk #173 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/173/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/173/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt;. Fix failure in TestContainerLocalizer caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. Contributed by Andrew Wang. (Revision 1463362)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
vinodkv : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463362&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13619764" author="hudson" created="Tue, 2 Apr 2013 12:53:51 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1362 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1362/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1362/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt;. Fix failure in TestContainerLocalizer caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. Contributed by Andrew Wang. (Revision 1463362)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
vinodkv : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463362&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13619820" author="hudson" created="Tue, 2 Apr 2013 14:07:11 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1389 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1389/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1389/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt;. Fix failure in TestContainerLocalizer caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. Contributed by Andrew Wang. (Revision 1463362)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
vinodkv : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463362&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13621153" author="sureshms" created="Wed, 3 Apr 2013 18:33:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt; sorry I do not have time to look through all the comments. I see that this commit has caused test issues. Are we trying to fix those issues by attaching more patches to this jira? My suggestion would be revert this change and once all the discussions are done, committing a new consolidated patch? Thoughts?&lt;/p&gt;</comment>
                            <comment id="13621216" author="andrew.wang" created="Wed, 3 Apr 2013 19:14:35 +0000"  >&lt;p&gt;I posted a fixup patch here which I&apos;m fairly sure is okay. I&apos;m okay with revert and recommit, but do note that Vinod already split and committed the YARN test fixup from my patch, so you&apos;d have to revert that too. Whatever is easier.&lt;/p&gt;</comment>
                            <comment id="13621248" author="eli" created="Wed, 3 Apr 2013 19:41:09 +0000"  >&lt;p&gt;I&apos;ll revert both changes, let&apos;s figure out the right behavior here and then we can post one cross-project patch that also has the yarn and hdfs test fixes (if necessary).&lt;/p&gt;</comment>
                            <comment id="13621325" author="hudson" created="Wed, 3 Apr 2013 21:05:40 +0000"  >&lt;p&gt;Integrated in Hadoop-trunk-Commit #3555 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/3555/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/3555/&lt;/a&gt;)&lt;br/&gt;
    Revert initial &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt; patch. (Revision 1464182)&lt;br/&gt;
Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt; per &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. (Revision 1464181)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464182&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileContextMainOperationsBaseTest.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464181&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13622014" author="hudson" created="Thu, 4 Apr 2013 10:48:33 +0000"  >&lt;p&gt;Integrated in Hadoop-Yarn-trunk #174 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/174/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/174/&lt;/a&gt;)&lt;br/&gt;
    Revert initial &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt; patch. (Revision 1464182)&lt;br/&gt;
Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt; per &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. (Revision 1464181)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464182&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileContextMainOperationsBaseTest.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464181&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13622140" author="hudson" created="Thu, 4 Apr 2013 13:09:02 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1363 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1363/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1363/&lt;/a&gt;)&lt;br/&gt;
    Revert initial &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt; patch. (Revision 1464182)&lt;br/&gt;
Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt; per &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. (Revision 1464181)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464182&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileContextMainOperationsBaseTest.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464181&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13622334" author="hudson" created="Thu, 4 Apr 2013 14:05:51 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1390 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1390/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1390/&lt;/a&gt;)&lt;br/&gt;
    Revert initial &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt; patch. (Revision 1464182)&lt;br/&gt;
Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-516&quot; title=&quot;TestContainerLocalizer.testContainerLocalizerMain is failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-516&quot;&gt;&lt;del&gt;YARN-516&lt;/del&gt;&lt;/a&gt; per &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-9357&quot; title=&quot;Fallback to default authority if not specified in FileContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-9357&quot;&gt;&lt;del&gt;HADOOP-9357&lt;/del&gt;&lt;/a&gt;. (Revision 1464181)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464182&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileContext.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/Path.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/FileContextMainOperationsBaseTest.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;eli : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464181&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13641210" author="andrew.wang" created="Thu, 25 Apr 2013 00:07:29 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanjay.radia&quot; class=&quot;user-hover&quot; rel=&quot;sanjay.radia&quot;&gt;sanjay.radia&lt;/a&gt;, have you had a chance to take another look at this? Again, my main point is that these URIs are allowed by the RFC and allowed by FileSystem, and would make things a little easier for users transitioning from FS to FC (which is the origin of this JIRA).&lt;/p&gt;</comment>
                            <comment id="13641399" author="sureshms" created="Thu, 25 Apr 2013 04:20:24 +0000"  >&lt;p&gt;Eli, has this patch been reverted in branch-2? &lt;/p&gt;</comment>
                            <comment id="13641423" author="sureshms" created="Thu, 25 Apr 2013 04:55:20 +0000"  >&lt;p&gt;I reverted this patch committed from branch-2 as well to fix test failures.&lt;/p&gt;</comment>
                            <comment id="13641861" author="daryn" created="Thu, 25 Apr 2013 14:36:29 +0000"  >&lt;p&gt;Instead of stripping a scheme with no authority and deferring the qualification (which appears to be causing issues), why not just immediately re-construct the URI by subbing in the authority of the default fs?&lt;/p&gt;</comment>
                            <comment id="13642428" author="andrew.wang" created="Fri, 26 Apr 2013 00:25:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daryn&quot; class=&quot;user-hover&quot; rel=&quot;daryn&quot;&gt;daryn&lt;/a&gt; I suppose we could, it&apos;d mean we&apos;d no longer need the YARN test fixup, but considering that it&apos;s just one test that&apos;s not a big deal. I just did it this way because it&apos;s the approach recommended in the RFC.&lt;/p&gt;</comment>
                            <comment id="13642584" author="sanjay.radia" created="Fri, 26 Apr 2013 04:31:18 +0000"  >&lt;p&gt;Daryn. I am missing your comment. The current patch does exactly what your are proposing - take the authority from the default fs IF the default fs is hdfs. &lt;/p&gt;</comment>
                            <comment id="13642597" author="sanjay.radia" created="Fri, 26 Apr 2013 04:46:38 +0000"  >&lt;p&gt;Andrew, the challenge I am having is that FileSystem has a bogus incorrect solution  since it is taking the authority from the default file system iff the scheme matches.&lt;br/&gt;
 The URI RFC can assert  that a notion of default authority is sensible because one can arrange for a default for each of the schemes.&lt;br/&gt;
To pick the default form the default fs (which is a hadoop concept that is not necessarily translatable to URIs in general) is what I am not happy about. &lt;br/&gt;
I have a concern with allowing folks to move from FS to FC for a usage pattern that we believe is incorrect (as outlined by me above) and which we want to discourage&lt;br/&gt;
(since /path is better then hdfs:///path).&lt;br/&gt;
The only merit I see is compatibility &amp;#8211; FS allowed it (even though it was incorrect) and hence FC should allow it.&lt;br/&gt;
Wouldn&apos;t you want folks to catch the hdfs:///path and change it to /path if that is what they really intended?&lt;br/&gt;
What do others think?&lt;/p&gt;</comment>
                            <comment id="13642934" author="daryn" created="Fri, 26 Apr 2013 15:04:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;Daryn. I am missing your comment. The current patch does exactly what your are proposing - take the authority from the default fs IF the default fs is hdfs.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanjay.radia&quot; class=&quot;user-hover&quot; rel=&quot;sanjay.radia&quot;&gt;sanjay.radia&lt;/a&gt;, unless I&apos;m looking at the wrong patch: if there&apos;s no authority, it&apos;s immediately dropping it and relying on it being re-added later, instead of just adding the authority immediately.  I&apos;m unclear which is the more desirable behavior of this method.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The URI RFC can assert that a notion of default authority is sensible because one can arrange for a default for each of the schemes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The default uri is providing the default authority for a scheme.  Given it&apos;s not flexible to support multiple schemes, it is arguable doing the right thing for one specific case.&lt;/p&gt;

&lt;p&gt;I agree specifying /path is preferable to hdfs:///path and assuming the defaultFS must be hdfs, else it breaks.  My big concern is the backwards incompatibility since this has been long standing behavior in hadoop.  Perhaps a deprecated warning should be emitted in 2.x, and we can remove it in 3.x?&lt;/p&gt;
</comment>
                            <comment id="13643418" author="sanjay.radia" created="Sat, 27 Apr 2013 00:26:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;unless I&apos;m looking at the wrong patch: if there&apos;s no authority, it&apos;s immediately dropping it and relying on it being re-added later, instead of just adding the authority immediately. I&apos;m unclear which is the more desirable behavior of this method.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If the authority is missing and the scheme is default fs then it changes path from hdfs:///path to /path.&lt;br/&gt;
Whether this is &quot;immediate&quot; or &quot;later&quot; the effect is the same as grabbing the default authority from the defaultfs.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;.. incompatibility ... &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;as I mentioned this is the only reason to do it. Let me sleep over this one. Maybe there is an actual use case for this usage.&lt;/p&gt;</comment>
                            <comment id="15898276" author="andrew.wang" created="Mon, 6 Mar 2017 22:33:48 +0000"  >&lt;p&gt;I&apos;m going to just resolve this one, unlikely we&apos;re going to make any FileContext changes at this point.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12639822">HDFS-4653</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12639765">YARN-516</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12571972" name="hadoop-9357-1.patch" size="15458" author="andrew.wang" created="Mon, 4 Mar 2013 22:42:15 +0000"/>
                            <attachment id="12571995" name="hadoop-9357-2.patch" size="15473" author="andrew.wang" created="Tue, 5 Mar 2013 00:08:05 +0000"/>
                            <attachment id="12575626" name="hadoop-9357-3.patch" size="5286" author="andrew.wang" created="Wed, 27 Mar 2013 00:54:35 +0000"/>
                            <attachment id="12576152" name="hadoop-9357-testfixup.patch" size="4351" author="andrew.wang" created="Fri, 29 Mar 2013 20:24:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1igzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316013</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324030">2.1.0-beta</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>