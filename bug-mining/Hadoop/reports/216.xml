<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:34:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6496] HttpServer sends wrong content-type for CSS files (and others)</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6496</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;CSS files are send as text/html causing problems if the HTML page is rendered in standards mode. The HDFS interface for example still works because it is rendered in quirks mode, the HBase interface doesn&apos;t work because it is rendered in standards mode. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2110&quot; title=&quot;Move to ivy broke our finding stylesheet (Tables don&amp;#39;t have blue lines around them any more).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2110&quot;&gt;&lt;del&gt;HBASE-2110&lt;/del&gt;&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;I&apos;ve had a quick look at HttpServer but I&apos;m too unfamiliar with it to see the problem. I think this started happening with &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6441&quot; title=&quot;Prevent remote CSS attacks in Hostname and UTF-7.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6441&quot;&gt;&lt;del&gt;HADOOP-6441&lt;/del&gt;&lt;/a&gt; which would lead me to believe that the filter is called for every request and not only *.jsp and *.html. I&apos;d consider this a bug but I don&apos;t know enough about this to provide a fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445651">HADOOP-6496</key>
            <summary>HttpServer sends wrong content-type for CSS files (and others)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ivanmi">Ivan Mitic</assignee>
                                    <reporter username="larsfrancke">Lars Francke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 18:26:42 +0000</created>
                <updated>Wed, 15 May 2013 05:15:58 +0000</updated>
                            <resolved>Wed, 17 Oct 2012 06:58:53 +0000</resolved>
                                    <version>0.21.0</version>
                    <version>0.22.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>0.22.0</fixVersion>
                    <fixVersion>1-win</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="12800942" author="owen.omalley" created="Fri, 15 Jan 2010 22:10:01 +0000"  >&lt;p&gt;There was a security concern about the encoding being unspecified resulting in some browsers (namely older versions of IE) doing some bad unquoting, so &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6441&quot; title=&quot;Prevent remote CSS attacks in Hostname and UTF-7.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6441&quot;&gt;&lt;del&gt;HADOOP-6441&lt;/del&gt;&lt;/a&gt; set the default content type to text/html. Unfortunately, Jetty doesn&apos;t seem to let me set a default for the encoding and so I needed to set the content type to &quot;text/html;charset=utf-8&quot;. I guess we could have the filter look at the name of the request and special case it for urls that end in &quot;.css&quot;. Is there a better approach?&lt;/p&gt;</comment>
                            <comment id="12801245" author="steve_l" created="Sat, 16 Jan 2010 18:23:23 +0000"  >&lt;p&gt;Looking at my Jetty code, I see this code to set mime mappings. &lt;br/&gt;
    public void addMimeMapping(String extension, String mimeType) &lt;/p&gt;
{
        log.info(&quot;Adding mime mapping &quot; + extension + &quot; maps to &quot; + mimeType);
        MimeTypes mimes = getServletContext().getMimeTypes();
        mimes.addMimeMapping(extension, mimeType);
    }
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Maybe the filter could look for text/html and text/plain content types in the response and only change the encoding value if it matches these types.&lt;/p&gt;</comment>
                            <comment id="12804061" author="steve_l" created="Sat, 23 Jan 2010 10:30:20 +0000"  >&lt;p&gt;Thinking about this some more&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;the HttpServer could add a basic set of mime mappings&lt;/li&gt;
	&lt;li&gt;We could use the test/ webapp of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6461&quot; title=&quot;webapps aren&amp;#39;t located correctly post-split&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6461&quot;&gt;&lt;del&gt;HADOOP-6461&lt;/del&gt;&lt;/a&gt; to stick some html, xml, css, txt content into the test classpath of -common&lt;/li&gt;
	&lt;li&gt;then test w/ HtmlUnit. A test-time only dependency. I&apos;ve used HtmlUnit before, very nice.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12928663" author="hadoopqa" created="Fri, 5 Nov 2010 16:31:43 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12455942/hadoop-6496.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12455942/hadoop-6496.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1031422.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 15 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 3 release audit warnings (more than the trunk&apos;s current 1 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/63//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/63//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/63//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/63//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/63//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/63//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/63//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/63//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12928800" author="tlipcon" created="Fri, 5 Nov 2010 20:06:32 +0000"  >&lt;p&gt;Add license headers to the two new files&lt;/p&gt;</comment>
                            <comment id="12928806" author="hadoopqa" created="Fri, 5 Nov 2010 20:30:32 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12458948/hadoop-6496.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12458948/hadoop-6496.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1031743.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 15 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/76//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/76//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/76//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/76//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/76//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/76//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12930803" author="tomwhite" created="Wed, 10 Nov 2010 21:52:37 +0000"  >&lt;p&gt;+1 looks good.&lt;/p&gt;</comment>
                            <comment id="12932111" author="tomwhite" created="Mon, 15 Nov 2010 17:03:26 +0000"  >&lt;p&gt;I&apos;ve just committed this. Thanks Todd!&lt;/p&gt;</comment>
                            <comment id="12932120" author="hudson" created="Mon, 15 Nov 2010 17:35:47 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #426 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/426/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/426/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6496&quot; title=&quot;HttpServer sends wrong content-type for CSS files (and others)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6496&quot;&gt;&lt;del&gt;HADOOP-6496&lt;/del&gt;&lt;/a&gt;. HttpServer sends wrong content-type for CSS files (and others). Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="12932422" author="hudson" created="Tue, 16 Nov 2010 11:23:21 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #514 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/514/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/514/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6496&quot; title=&quot;HttpServer sends wrong content-type for CSS files (and others)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6496&quot;&gt;&lt;del&gt;HADOOP-6496&lt;/del&gt;&lt;/a&gt;. HttpServer sends wrong content-type for CSS files (and others). Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="13462230" author="ivanmi" created="Mon, 24 Sep 2012 22:55:57 +0000"  >&lt;p&gt;We need to backport this to branch-1.1 as it blocks the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7827&quot; title=&quot;jsp pages missing DOCTYPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7827&quot;&gt;&lt;del&gt;HADOOP-7827&lt;/del&gt;&lt;/a&gt;. Attaching the patch.&lt;/p&gt;

&lt;p&gt;Please see comments on &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7827&quot; title=&quot;jsp pages missing DOCTYPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7827&quot;&gt;&lt;del&gt;HADOOP-7827&lt;/del&gt;&lt;/a&gt; for additional details.&lt;/p&gt;</comment>
                            <comment id="13472806" author="ivanmi" created="Tue, 9 Oct 2012 22:28:29 +0000"  >&lt;p&gt;Assigning to myself to prepare the backport patch. The initial backport patch I attached introduced unit test regression, will post a new patch soon.&lt;/p&gt;</comment>
                            <comment id="13477332" author="ivanmi" created="Tue, 16 Oct 2012 20:47:08 +0000"  >&lt;p&gt;Reopening for branch 1.1 backport.&lt;/p&gt;</comment>
                            <comment id="13477334" author="ivanmi" created="Tue, 16 Oct 2012 20:48:16 +0000"  >&lt;p&gt;Attaching the patch for branch-1.1.&lt;/p&gt;</comment>
                            <comment id="13477658" author="sureshms" created="Wed, 17 Oct 2012 06:25:43 +0000"  >&lt;p&gt;Ivan, the branch-1.1 patch is missing the addition of file test.css, changes to build.xml, HttpServerFunctionalTest.java. Is that intentional?&lt;/p&gt;</comment>
                            <comment id="13477669" author="ivanmi" created="Wed, 17 Oct 2012 06:46:01 +0000"  >&lt;p&gt;Thanks for reviewing Suresh.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;the branch-1.1 patch is missing the addition of file test.css, changes to build.xml, HttpServerFunctionalTest.java. Is that intentional?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;HttpServerFunctionalTest does not exist in branch-1, that is why I don&apos;t have any changes around it. &lt;br/&gt;
Other changes (build.xml/test.css) are only related to adding a new &lt;tt&gt;test.css&lt;/tt&gt; test file. However, that introduced unittest regressions in branch-1, since Jetty ended up resolving resources against the local test path &lt;tt&gt;build/test/webapps&lt;/tt&gt;. Specifically, &lt;tt&gt;test.classpath&lt;/tt&gt; would have &lt;tt&gt;build/test/webapps&lt;/tt&gt; before &lt;tt&gt;build/webapps&lt;/tt&gt; causing many tests dependent on files under &lt;tt&gt;build/webapps&lt;/tt&gt; to fail, since HttpServer binds to an incorrect path.&lt;/p&gt;

&lt;p&gt;As an alternative, I used an existing &lt;tt&gt;/static/hadoop.css&lt;/tt&gt; test file. This way we have both the fix and a test covering the new functionality. Let me know if this makes sense or if you have other proposals.&lt;/p&gt;</comment>
                            <comment id="13477680" author="sureshms" created="Wed, 17 Oct 2012 06:58:38 +0000"  >&lt;p&gt;Thanks for the explanation. +1 for the branch-1 patch.&lt;/p&gt;</comment>
                            <comment id="13477681" author="sureshms" created="Wed, 17 Oct 2012 07:00:57 +0000"  >&lt;p&gt;I committed the patch to branch-1 and branch-1-win. Thank you Ivan for porting the patch.&lt;/p&gt;</comment>
                            <comment id="13657977" author="mattf" created="Wed, 15 May 2013 05:15:58 +0000"  >&lt;p&gt;Closed upon release of Hadoop 1.2.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12445237">HBASE-2110</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12549382" name="HADOOP-6496.branch-1.1.backport.2.patch" size="4792" author="ivanmi" created="Tue, 16 Oct 2012 20:48:16 +0000"/>
                            <attachment id="12546401" name="HADOOP-6496.branch-1.1.backport.patch" size="8537" author="ivanmi" created="Mon, 24 Sep 2012 22:55:57 +0000"/>
                            <attachment id="12458948" name="hadoop-6496.txt" size="10329" author="tlipcon" created="Fri, 5 Nov 2010 20:06:31 +0000"/>
                            <attachment id="12455942" name="hadoop-6496.txt" size="8643" author="tlipcon" created="Wed, 29 Sep 2010 19:51:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37007</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02q67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13841</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>