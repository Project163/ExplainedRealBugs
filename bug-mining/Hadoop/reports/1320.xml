<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:45:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-11151] Automatically refresh auth token and retry on auth failure</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-11151</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Enable CFS and KMS service in the cluster, initially it worked to put/copy file into encryption zone. But after a while (might be one day), it fails to put/copy file into the encryption zone with the error&lt;br/&gt;
java.util.concurrent.ExecutionException: java.io.IOException: HTTP status &lt;span class=&quot;error&quot;&gt;&amp;#91;403&amp;#93;&lt;/span&gt;, message &lt;span class=&quot;error&quot;&gt;&amp;#91;Forbidden&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The kms.log shows below&lt;br/&gt;
AbstractDelegationTokenSecretManager - Updating the current master key for generating delegation tokens&lt;br/&gt;
2014-09-29 13:18:46,599 WARN  AuthenticationFilter - AuthenticationToken ignored: org.apache.hadoop.security.authentication.util.SignerException: Invalid signature&lt;br/&gt;
2014-09-29 13:18:46,599 WARN  AuthenticationFilter - Authentication exception: Anonymous requests are disallowed&lt;br/&gt;
org.apache.hadoop.security.authentication.client.AuthenticationException: Anonymous requests are disallowed&lt;br/&gt;
        at org.apache.hadoop.security.authentication.server.PseudoAuthenticationHandler.authenticate(PseudoAuthenticationHandler.java:184)&lt;br/&gt;
        at org.apache.hadoop.security.token.delegation.web.DelegationTokenAuthenticationHandler.authenticate(DelegationTokenAuthenticationHandler.java:331)&lt;br/&gt;
        at org.apache.hadoop.security.authentication.server.AuthenticationFilter.doFilter(AuthenticationFilter.java:507)&lt;br/&gt;
        at org.apache.hadoop.crypto.key.kms.server.KMSAuthenticationFilter.doFilter(KMSAuthenticationFilter.java:129)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)&lt;br/&gt;
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)&lt;br/&gt;
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)&lt;br/&gt;
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)&lt;br/&gt;
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)&lt;br/&gt;
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)&lt;br/&gt;
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)&lt;br/&gt;
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)&lt;br/&gt;
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12744612">HADOOP-11151</key>
            <summary>Automatically refresh auth token and retry on auth failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asuresh">Arun Suresh</assignee>
                                    <reporter username="zb161">zhubin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Sep 2014 08:18:04 +0000</created>
                <updated>Mon, 1 Dec 2014 03:11:48 +0000</updated>
                            <resolved>Fri, 3 Oct 2014 03:03:47 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.6.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14152076" author="andrew.wang" created="Mon, 29 Sep 2014 19:01:54 +0000"  >&lt;p&gt;I think this is possibly related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11113&quot; title=&quot;Namenode not able to reconnect to KMS after KMS restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11113&quot;&gt;&lt;del&gt;HADOOP-11113&lt;/del&gt;&lt;/a&gt;, since it might be that the auth cookie expires after some time and then can&apos;t be refreshed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zb161&quot; class=&quot;user-hover&quot; rel=&quot;zb161&quot;&gt;zb161&lt;/a&gt;, maybe you could try out the patch there? If it doesn&apos;t work, we can keep hunting for the fix.&lt;/p&gt;</comment>
                            <comment id="14152767" author="hitliuyi" created="Tue, 30 Sep 2014 03:54:06 +0000"  >&lt;p&gt;Andrew, I think the environment here is for simple authentication, and the exception is because there is no auth parameter (user.name) when doing init request. &lt;br/&gt;
Can you resolve it in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11113&quot; title=&quot;Namenode not able to reconnect to KMS after KMS restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11113&quot;&gt;&lt;del&gt;HADOOP-11113&lt;/del&gt;&lt;/a&gt; too? And also resolve the &lt;tt&gt;TestEncryptionZonesWithKMS&lt;/tt&gt; issue recently in Jenkins report together.&lt;br/&gt;
Of course, if you want to resolve them separately using this JIRA, you can take this JIRA or I can do it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="14154111" author="andrew.wang" created="Wed, 1 Oct 2014 00:42:22 +0000"  >&lt;p&gt;Hey Yi, I think the &lt;tt&gt;TestEncryptionZonesWithKMS&lt;/tt&gt; issue is due to BUILDS-17. I guess we could make efforts to reduce the # of fds needed for each of these tests, but better would be to fix the build environment. The build team has been unsuccessful thus far though.&lt;/p&gt;</comment>
                            <comment id="14154175" author="hitliuyi" created="Wed, 1 Oct 2014 01:18:23 +0000"  >&lt;p&gt;Right, thanks Andrew.&lt;/p&gt;</comment>
                            <comment id="14154278" author="asuresh" created="Wed, 1 Oct 2014 03:28:49 +0000"  >&lt;p&gt;Uploading initial patch&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hitliuyi&quot; class=&quot;user-hover&quot; rel=&quot;hitliuyi&quot;&gt;hitliuyi&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt;,&lt;br/&gt;
So &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11113&quot; title=&quot;Namenode not able to reconnect to KMS after KMS restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11113&quot;&gt;&lt;del&gt;HADOOP-11113&lt;/del&gt;&lt;/a&gt; handles this for simple authentication. But it does not automatically retry the request. This patch adds automatic retry incase of authentication errors caused due to stale authToken&lt;/p&gt;</comment>
                            <comment id="14154327" author="hadoopqa" created="Wed, 1 Oct 2014 04:24:51 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12672243/HADOOP-11151.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12672243/HADOOP-11151.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 17d1202.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-common-project/hadoop-kms:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.crypto.random.TestOsSecureRandom&lt;br/&gt;
                  org.apache.hadoop.crypto.key.kms.server.TestKMS&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4842//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4842//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4842//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4842//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14154658" author="asuresh" created="Wed, 1 Oct 2014 10:59:19 +0000"  >&lt;p&gt;Fixing test case..&lt;/p&gt;</comment>
                            <comment id="14154702" author="hadoopqa" created="Wed, 1 Oct 2014 11:54:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12672302/HADOOP-11151.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12672302/HADOOP-11151.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 17d1202.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-common-project/hadoop-kms:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.crypto.random.TestOsSecureRandom&lt;br/&gt;
                  org.apache.hadoop.ha.TestZKFailoverControllerStress&lt;/p&gt;

&lt;p&gt;                                      The test build failed in hadoop-common-project/hadoop-kms &lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4845//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4845//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4845//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4845//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14154723" author="asuresh" created="Wed, 1 Oct 2014 12:11:43 +0000"  >&lt;p&gt;The test failures are un-related&lt;/p&gt;</comment>
                            <comment id="14155262" author="andrew.wang" created="Wed, 1 Oct 2014 18:35:27 +0000"  >&lt;p&gt;Cool patch, logic makes sense. Couple small comments though:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Could we avoid doing getConf().getInt on each call? The Configuration hash lookup isn&apos;t free.&lt;/li&gt;
	&lt;li&gt;Is there a reason why doing more than one retry would fix the issue? Seems if we get the same error even after one retry, then something else is wrong.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14155713" author="asuresh" created="Wed, 1 Oct 2014 22:46:37 +0000"  >&lt;p&gt;Uploading updated patch addressing feedback suggestions&lt;/p&gt;

&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt;&lt;br/&gt;
agreed.. we don&apos;t really need to do more than 1 retry.. but thought it safer to just keep it configurable.. i&apos;ve changed default to 1&lt;/p&gt;</comment>
                            <comment id="14155800" author="hadoopqa" created="Wed, 1 Oct 2014 23:41:05 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12672444/HADOOP-11151.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12672444/HADOOP-11151.3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 52bbe0f.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;        &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-common-project/hadoop-kms:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.crypto.key.kms.server.TestKMS&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4848//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4848//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4848//artifact/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4848//artifact/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4848//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4848//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14156089" author="andrew.wang" created="Thu, 2 Oct 2014 05:13:00 +0000"  >&lt;p&gt;Hi Arun, thanks for revving. Few more comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Nit: can make authRetry final&lt;/li&gt;
	&lt;li&gt;Could you comment on why authToken needs to be volatile?&lt;/li&gt;
	&lt;li&gt;In the new if statement, I don&apos;t follow a few things. Why is the special case we need to handle a &quot;success&quot; error code rather than an error one? Also, we don&apos;t need to do another retry in this case? The operation succeeded even though we need to refresh the authToken?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14156093" author="andrew.wang" created="Thu, 2 Oct 2014 05:23:16 +0000"  >&lt;p&gt;I also ran apache-rat:check successfully with this patch applied, so not sure what&apos;s up with that.&lt;/p&gt;</comment>
                            <comment id="14156893" author="asuresh" created="Thu, 2 Oct 2014 18:02:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt;, thanks for the followup review&lt;/p&gt;

&lt;p&gt;So, about the volatile authToken, the KMSClientProvider also starts background threads to fill the encryptedKeyCache when it goes below threshold, which is an HTTP call to the server using the authToken, so if in case the authToken gets flushed, I wanted to avoid a situation when the bg thread might use the older token&lt;/p&gt;

&lt;p&gt;wrt the new if statement.. &lt;br/&gt;
in kerberos mode, the first time the Client connects,  it initiates a SPNEGO handshake with the server. This involves first sending an &lt;tt&gt;OPTIONS&lt;/tt&gt; request, to which the Server will respond with &lt;tt&gt;Set-Cookie:&lt;/tt&gt; containing the correct &lt;tt&gt;hadoop.auth&lt;/tt&gt; cookie. This cookie string is then &lt;b&gt;set&lt;/b&gt; in the authToken. All subsequent requests &lt;tt&gt;GET / POST / DELETE etc.&lt;/tt&gt; from the client would just send the &lt;tt&gt;hadoop.auth&lt;/tt&gt; cookie. The issue is that the authToken can be &lt;b&gt;set&lt;/b&gt; only during initialization, i.e. the response to the OPTIONS request (you can blame &lt;tt&gt;KerberosAuthenticator&lt;/tt&gt; for that). Now, if the authToken is stale, the Server will send a 401 to the client with &lt;tt&gt;WWW-Authenticate : Negotiate&lt;/tt&gt; Header. This is intercepted by the JDK SPNEGO implementing classes on the client side and it automatically responds (no control is returned to the call method in KMSClientProvider) with an &lt;tt&gt;Authorize : Negotiate &amp;lt;kerb token&amp;gt;&lt;/tt&gt; header.  This will generally be accepted by the server and along with the &apos;success&apos; response, the KMS server also sends back a &lt;tt&gt;Set-Cookie&lt;/tt&gt; with the correct value of &lt;tt&gt;hadoop.auth&lt;/tt&gt; cookie.. unfortunately, since this is not a response to a connection initialization call, and since the authToken is already &lt;b&gt;set&lt;/b&gt;, the new &lt;tt&gt;hadoop.auth&lt;/tt&gt; cookie is simply ignored.. Which mean for every subsequent request after the authToken has gone stale, the client will actually be sending 2 requests.. one with the old stale token which returns 401 and the second which is successful. The only way to know in the &lt;tt&gt;KMSClientProvider&lt;/tt&gt; that there was an authentication failure and that the authToken needs to be flushed is to see if a SUCCESSFUL response has a &lt;tt&gt;hadoop.auth&lt;/tt&gt; Set-Cookie. Also since I cannot just &apos;set&apos; the authToken with the cookie, since the &lt;tt&gt;set()&lt;/tt&gt; method is package protected.. only option I have is to create a new instance of the authToken.. so that the next request from the client will initialize the SPNEGO handshake and &apos;set&apos; the authToken correctly.&lt;/p&gt;

&lt;p&gt;Hope this made sense..&lt;/p&gt;

</comment>
                            <comment id="14157516" author="asuresh" created="Fri, 3 Oct 2014 00:39:50 +0000"  >&lt;p&gt;Uploading new patch :&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;addressing some of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt;&apos;s suggestions&lt;/li&gt;
	&lt;li&gt;Using &lt;tt&gt;AuthenticatedURL#extractToken&lt;/tt&gt; to set the authToken on successful response if it contains a &lt;b&gt;hadoop.auth&lt;/b&gt; cookie.. so subsequent requests need not initiate SPNEGO handshake&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14157550" author="asuresh" created="Fri, 3 Oct 2014 01:19:03 +0000"  >&lt;p&gt;Updating patch again :&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Modified &lt;tt&gt;TestKMS#testKMSRestart&lt;/tt&gt; to check case when kerb is both enabled and dissabled(simple auth)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14157566" author="hadoopqa" created="Fri, 3 Oct 2014 01:37:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12672710/HADOOP-11151.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12672710/HADOOP-11151.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 054f285.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-auth hadoop-common-project/hadoop-common hadoop-common-project/hadoop-kms:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.crypto.random.TestOsSecureRandom&lt;br/&gt;
                  org.apache.hadoop.metrics2.impl.TestMetricsSystemImpl&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4853//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4853//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4853//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4853//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14157592" author="hadoopqa" created="Fri, 3 Oct 2014 02:15:30 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12672715/HADOOP-11151.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12672715/HADOOP-11151.5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 054f285.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-auth hadoop-common-project/hadoop-common hadoop-common-project/hadoop-kms:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.metrics2.impl.TestMetricsSystemImpl&lt;br/&gt;
                  org.apache.hadoop.ha.TestZKFailoverControllerStress&lt;br/&gt;
                  org.apache.hadoop.crypto.key.kms.server.TestKMS&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4854//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4854//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4854//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4854//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14157622" author="andrew.wang" created="Fri, 3 Oct 2014 02:50:37 +0000"  >&lt;p&gt;Looks real good. I like the revs you&apos;ve made, and thanks for the very thorough explanations. +1, will commit shortly.&lt;/p&gt;</comment>
                            <comment id="14157625" author="andrew.wang" created="Fri, 3 Oct 2014 03:03:47 +0000"  >&lt;p&gt;Committed to the three branches, thanks much Arun for working on this!&lt;/p&gt;</comment>
                            <comment id="14157626" author="hudson" created="Fri, 3 Oct 2014 03:04:13 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #6184 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/6184/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/6184/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11151&quot; title=&quot;Automatically refresh auth token and retry on auth failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11151&quot;&gt;&lt;del&gt;HADOOP-11151&lt;/del&gt;&lt;/a&gt;. Automatically refresh auth token and retry on auth failure. Contributed by Arun Suresh. (wang: rev 2d8e6e2c4a52a4ba815b23d6d1ac21be4df23d9e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-kms/src/test/java/org/apache/hadoop/crypto/key/kms/server/TestKMS.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/client/AuthenticatedURL.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/kms/KMSClientProvider.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/resources/core-default.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14157627" author="hitliuyi" created="Fri, 3 Oct 2014 03:04:35 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asuresh&quot; class=&quot;user-hover&quot; rel=&quot;asuresh&quot;&gt;asuresh&lt;/a&gt; for the patch and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.wang&quot; class=&quot;user-hover&quot; rel=&quot;andrew.wang&quot;&gt;andrew.wang&lt;/a&gt; for review.&lt;/p&gt;</comment>
                            <comment id="14157906" author="hudson" created="Fri, 3 Oct 2014 11:39:35 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #699 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/699/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/699/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11151&quot; title=&quot;Automatically refresh auth token and retry on auth failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11151&quot;&gt;&lt;del&gt;HADOOP-11151&lt;/del&gt;&lt;/a&gt;. Automatically refresh auth token and retry on auth failure. Contributed by Arun Suresh. (wang: rev 2d8e6e2c4a52a4ba815b23d6d1ac21be4df23d9e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/client/AuthenticatedURL.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/kms/KMSClientProvider.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/resources/core-default.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-kms/src/test/java/org/apache/hadoop/crypto/key/kms/server/TestKMS.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14158019" author="hudson" created="Fri, 3 Oct 2014 14:15:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1890 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1890/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1890/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11151&quot; title=&quot;Automatically refresh auth token and retry on auth failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11151&quot;&gt;&lt;del&gt;HADOOP-11151&lt;/del&gt;&lt;/a&gt;. Automatically refresh auth token and retry on auth failure. Contributed by Arun Suresh. (wang: rev 2d8e6e2c4a52a4ba815b23d6d1ac21be4df23d9e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/client/AuthenticatedURL.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-kms/src/test/java/org/apache/hadoop/crypto/key/kms/server/TestKMS.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/kms/KMSClientProvider.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/resources/core-default.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14158068" author="hudson" created="Fri, 3 Oct 2014 15:11:35 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1915 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1915/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1915/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11151&quot; title=&quot;Automatically refresh auth token and retry on auth failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11151&quot;&gt;&lt;del&gt;HADOOP-11151&lt;/del&gt;&lt;/a&gt;. Automatically refresh auth token and retry on auth failure. Contributed by Arun Suresh. (wang: rev 2d8e6e2c4a52a4ba815b23d6d1ac21be4df23d9e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/resources/core-default.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-kms/src/test/java/org/apache/hadoop/crypto/key/kms/server/TestKMS.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/client/AuthenticatedURL.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/kms/KMSClientProvider.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14158927" author="zb161" created="Sat, 4 Oct 2014 03:47:08 +0000"  >&lt;p&gt;Hi, I tried with the check-in of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11113&quot; title=&quot;Namenode not able to reconnect to KMS after KMS restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11113&quot;&gt;&lt;del&gt;HADOOP-11113&lt;/del&gt;&lt;/a&gt; and 1.patch here, it worked for the first 2 days, but failed again in the 3rd day, the same error message and exception in the log.&lt;/p&gt;

&lt;p&gt;I&apos;m using branch-2 and will try the latest code since already checked in.&lt;/p&gt;</comment>
                            <comment id="14159991" author="zb161" created="Mon, 6 Oct 2014 04:29:50 +0000"  >&lt;p&gt;BTW, after restart namenode and kms service, it can get back to put file into the encryption zone.&lt;/p&gt;</comment>
                            <comment id="14162126" author="asuresh" created="Tue, 7 Oct 2014 17:06:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zb161&quot; class=&quot;user-hover&quot; rel=&quot;zb161&quot;&gt;zb161&lt;/a&gt;, this patch should handle Token expirations without having to restart NN.. &lt;/p&gt;</comment>
                            <comment id="14162886" author="zb161" created="Wed, 8 Oct 2014 01:02:59 +0000"  >&lt;p&gt;Arun Suresh, I&apos;m using branch-2 code and think the patch is already in, but get the same error I mentioned in 3 days&lt;/p&gt;</comment>
                            <comment id="14166223" author="zb161" created="Fri, 10 Oct 2014 03:10:49 +0000"  >&lt;p&gt;so far it will occasionally report java.util.concurrent.ExecutionException: java.io.IOException: HTTP status &lt;span class=&quot;error&quot;&gt;&amp;#91;403&amp;#93;&lt;/span&gt;, message &lt;span class=&quot;error&quot;&gt;&amp;#91;Forbidden&amp;#93;&lt;/span&gt;&lt;br/&gt;
and get back to work after re-execute the command.&lt;/p&gt;

&lt;p&gt;as a workaround, would it be better to add more than one retry by default? or add sleep or any other reason?&lt;/p&gt;</comment>
                            <comment id="14170059" author="andrew.wang" created="Mon, 13 Oct 2014 21:51:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zb161&quot; class=&quot;user-hover&quot; rel=&quot;zb161&quot;&gt;zb161&lt;/a&gt; thanks for the additional testing, maybe we should file a new JIRA to track? You could also try increasing the retry count via configuration if you want to test it. Based on Arun&apos;s explanations though, I&apos;d be surprised if it made a difference, barring network issues.&lt;/p&gt;</comment>
                            <comment id="14170475" author="asuresh" created="Tue, 14 Oct 2014 03:45:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zb161&quot; class=&quot;user-hover&quot; rel=&quot;zb161&quot;&gt;zb161&lt;/a&gt;, we had identified another related issue, which I suspect is what you are facing : &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11187&quot; title=&quot;NameNode - KMS communication fails after a long period of inactivity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11187&quot;&gt;&lt;del&gt;HADOOP-11187&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
The are a couple of workarounds you can try till the above bug is resolved :&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;One may increase the KMS authentication token validity period to some very high number (default is 10 hours, so by default this bug will only be encountered after 20 hours of no communication between the NN and KMS) by putting the following in the &lt;tt&gt;kms-site.xml&lt;/tt&gt; safety valve:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
&amp;lt;property&amp;gt; 
  &amp;lt;name&amp;gt;hadoop.kms.authentication.token.validity&amp;lt;/name&amp;gt; 
  &amp;lt;value&amp;gt;SOME VERY HIGH NUMBER&amp;lt;/value&amp;gt; 
&amp;lt;/property&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; &lt;/li&gt;
	&lt;li&gt;You can switch the KMS signature secret provider to the string secret provider by putting the following in the &lt;tt&gt;kms-site.xml&lt;/tt&gt; safety valve:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
&amp;lt;property&amp;gt; 
  &amp;lt;name&amp;gt;hadoop.kms.authentication.signature.secret&amp;lt;/name&amp;gt; 
  &amp;lt;value&amp;gt;SOME VERY SECRET STRING&amp;lt;/value&amp;gt; 
&amp;lt;/property&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12742931">HADOOP-11113</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12672243" name="HADOOP-11151.1.patch" size="10971" author="asuresh" created="Wed, 1 Oct 2014 03:28:49 +0000"/>
                            <attachment id="12672302" name="HADOOP-11151.2.patch" size="10989" author="asuresh" created="Wed, 1 Oct 2014 10:59:19 +0000"/>
                            <attachment id="12672444" name="HADOOP-11151.3.patch" size="13675" author="asuresh" created="Wed, 1 Oct 2014 22:46:37 +0000"/>
                            <attachment id="12672710" name="HADOOP-11151.4.patch" size="13814" author="asuresh" created="Fri, 3 Oct 2014 00:39:50 +0000"/>
                            <attachment id="12672715" name="HADOOP-11151.5.patch" size="14575" author="asuresh" created="Fri, 3 Oct 2014 01:19:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20ksf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>