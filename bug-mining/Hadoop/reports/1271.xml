<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:45:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-10911] hadoop.auth cookie after HADOOP-10710 still not proper according to RFC2109</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-10911</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;I&apos;m seeing the same problem reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10710&quot; title=&quot;hadoop.auth cookie is not properly constructed according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10710&quot;&gt;&lt;del&gt;HADOOP-10710&lt;/del&gt;&lt;/a&gt; (that is, httpclient is unable to authenticate with servers running the authentication filter), even with &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10710&quot; title=&quot;hadoop.auth cookie is not properly constructed according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10710&quot;&gt;&lt;del&gt;HADOOP-10710&lt;/del&gt;&lt;/a&gt; applied.&lt;/p&gt;

&lt;p&gt;From my reading of the spec, the problem is as follows:&lt;br/&gt;
Expires is not a valid directive according to the RFC, though it is mentioned for backwards compatibility with netscape draft spec.  When httpclient sees &quot;Expires&quot;, it parses according to the netscape draft spec, but note from RFC2109:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Note that the Expires date format contains embedded spaces, and that &lt;span class=&quot;code-quote&quot;&gt;&quot;old&quot;&lt;/span&gt; cookies did not have quotes around values. 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and note that AuthenticationFilter puts quotes around the value:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hadoop-common/blob/6b11bff94ebf7d99b3a9e513edd813cb82538400/hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java#L437-L439&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop-common/blob/6b11bff94ebf7d99b3a9e513edd813cb82538400/hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java#L437-L439&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So httpclient&apos;s parsing appears to be kosher.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12730938">HADOOP-10911</key>
            <summary>hadoop.auth cookie after HADOOP-10710 still not proper according to RFC2109</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gchanan">Gregory Chanan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jul 2014 22:52:39 +0000</created>
                <updated>Mon, 1 Dec 2014 03:10:51 +0000</updated>
                            <resolved>Fri, 29 Aug 2014 18:25:35 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.6.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14080152" author="gchanan" created="Wed, 30 Jul 2014 23:07:49 +0000"  >&lt;p&gt;Here&apos;s a trivial patch that removes the quotes.&lt;/p&gt;

&lt;p&gt;Alternatively, we could get rid of Expires or use Max-Age.&lt;/p&gt;

&lt;p&gt;Finally, since this has been broken multiple times perhaps we should add a test against httpclient directly?&lt;/p&gt;</comment>
                            <comment id="14080171" author="tucu00" created="Wed, 30 Jul 2014 23:20:13 +0000"  >&lt;p&gt;Please don&apos;t remove the quotes.&lt;/p&gt;

&lt;p&gt;By looking at RFC2109:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   set-cookie      =       &lt;span class=&quot;code-quote&quot;&gt;&quot;Set-Cookie:&quot;&lt;/span&gt; cookies
   cookies         =       1#cookie
   cookie          =       NAME &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; VALUE *(&lt;span class=&quot;code-quote&quot;&gt;&quot;;&quot;&lt;/span&gt; cookie-av)
   NAME            =       attr
   VALUE           =       value
   cookie-av       =       &lt;span class=&quot;code-quote&quot;&gt;&quot;Comment&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; value
                   |       &lt;span class=&quot;code-quote&quot;&gt;&quot;Domain&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; value
                   |       &lt;span class=&quot;code-quote&quot;&gt;&quot;Max-Age&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; value
                   |       &lt;span class=&quot;code-quote&quot;&gt;&quot;Path&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; value
                   |       &lt;span class=&quot;code-quote&quot;&gt;&quot;Secure&quot;&lt;/span&gt;
                   |       &lt;span class=&quot;code-quote&quot;&gt;&quot;Version&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; 1*DIGIT
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems we are only off with &lt;tt&gt;Max-Age&lt;/tt&gt; (ignoring HttpOnly which is not breaking things).&lt;/p&gt;

&lt;p&gt;Good idea on adding a test for HttpClient.&lt;/p&gt;</comment>
                            <comment id="14080217" author="gchanan" created="Wed, 30 Jul 2014 23:44:47 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;tucu00&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Please don&apos;t remove the quotes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Is this because the value can contain whitespace?&lt;/p&gt;

&lt;p&gt;So you want to use Max-Age?  It seems it&apos;s not supported by older versions of IE (&lt;a href=&quot;http://mrcoles.com/blog/cookies-max-age-vs-expires/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mrcoles.com/blog/cookies-max-age-vs-expires/&lt;/a&gt;) &amp;#8211; do we care about that?&lt;/p&gt;</comment>
                            <comment id="14080263" author="tucu00" created="Thu, 31 Jul 2014 00:08:28 +0000"  >&lt;p&gt;on the quotes, we had them, they got removed, that broke things, we added again. They don&apos;t do any harm if they are there.&lt;/p&gt;

&lt;p&gt;On Max-Age &amp;amp; Expired, i don&apos;t think we want to break old browsers. It seems to me an HttpClient bug that uses the presence of Expire to go back to old cookie format, the precense of Version=1 should trump. Can you dig on HttpClient side?&lt;/p&gt;</comment>
                            <comment id="14080313" author="gchanan" created="Thu, 31 Jul 2014 00:41:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;on the quotes, we had them, they got removed, that broke things, we added again. They don&apos;t do any harm if they are there.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s a little more complicated &amp;#8211; &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10379&quot; title=&quot;Protect authentication cookies with the HttpOnly and Secure flags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10379&quot;&gt;&lt;del&gt;HADOOP-10379&lt;/del&gt;&lt;/a&gt; made multiple changes like removing the quotes and the Version field.  So it was the combination of changes that broke things, not specifically removing the quotes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;On Max-Age &amp;amp; Expired, i don&apos;t think we want to break old browsers. It seems to me an HttpClient bug that uses the presence of Expire to go back to old cookie format, the precense of Version=1 should trump. Can you dig on HttpClient side?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Seems reasonable, I&apos;ll dig.&lt;/p&gt;</comment>
                            <comment id="14081526" author="gchanan" created="Thu, 31 Jul 2014 21:41:41 +0000"  >&lt;p&gt;Here are a couple of test cases.  You&apos;ll notice they fail with the current cookie format and pass without the quotes.&lt;/p&gt;

&lt;p&gt;I&apos;m still investigating httpclient&apos;s handling of the cookies, as we discussed above.&lt;/p&gt;</comment>
                            <comment id="14081656" author="gchanan" created="Thu, 31 Jul 2014 23:10:44 +0000"  >&lt;p&gt;Did a little more digging.  Httpclient is indeed acting like I thought: if there is &quot;expires&quot; it is parsed as a netscape cookie, even if there is a version field.  I&apos;ll check with httpclient why that is.  By the way, even if it was parsed as an RFC2109 cookie, it wouldn&apos;t parse correctly because the Expires value has non-quoted spaces.&lt;/p&gt;</comment>
                            <comment id="14081682" author="gchanan" created="Thu, 31 Jul 2014 23:39:37 +0000"  >&lt;p&gt;Sent an e-mail to the httpclient list.  FWIW, I think we should just remove the quotes, as in my original patch.  It&apos;s a valid cookie, at least according to the netscape draft spec, and it works with current versions of httpclient.  That&apos;s good because it won&apos;t break existing clients and httpclient is popular enough to warrant consideration.  If they consider the above a bug and fix it in a later version, we can upgrade the required httpclient version and have a proper RFC2109 cookie format.&lt;/p&gt;</comment>
                            <comment id="14081684" author="gchanan" created="Thu, 31 Jul 2014 23:40:31 +0000"  >&lt;p&gt;Thoughts &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;tucu00&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14085540" author="gchanan" created="Tue, 5 Aug 2014 00:14:12 +0000"  >&lt;p&gt;I tried the tests with the format used in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10379&quot; title=&quot;Protect authentication cookies with the HttpOnly and Secure flags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10379&quot;&gt;&lt;del&gt;HADOOP-10379&lt;/del&gt;&lt;/a&gt; and they seem to pass.  Let me see if I can come up with a test that fails for both those and &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10710&quot; title=&quot;hadoop.auth cookie is not properly constructed according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10710&quot;&gt;&lt;del&gt;HADOOP-10710&lt;/del&gt;&lt;/a&gt;.  I think only then would I be confident in our cookie format.&lt;/p&gt;</comment>
                            <comment id="14103007" author="gchanan" created="Tue, 19 Aug 2014 22:59:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;On Max-Age &amp;amp; Expired, i don&apos;t think we want to break old browsers. It seems to me an HttpClient bug that uses the presence of Expire to go back to old cookie format, the precense of Version=1 should trump. Can you dig on HttpClient side?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is a bit complicated &amp;#8211; see the discussion here: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hc-httpclient-users/201408.mbox/%3C1406895602.17749.8.camel%40ubuntu%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/hc-httpclient-users/201408.mbox/%3C1406895602.17749.8.camel%40ubuntu%3E&lt;/a&gt;&lt;br/&gt;
In short, it&apos;s not a valid Version=1 cookie, but httpclient would like to be able to handle it anyway, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-1546&quot; title=&quot;Cookie values can end up being double quoted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCLIENT-1546&quot;&gt;&lt;del&gt;HTTPCLIENT-1546&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I added a patch that does the following:&lt;br/&gt;
1) Runs the TestKerberosAuthenticator test cases against Tomcat as well as Jetty, this exposes the bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10379&quot; title=&quot;Protect authentication cookies with the HttpOnly and Secure flags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10379&quot;&gt;&lt;del&gt;HADOOP-10379&lt;/del&gt;&lt;/a&gt;, which didn&apos;t get a test added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10710&quot; title=&quot;hadoop.auth cookie is not properly constructed according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10710&quot;&gt;&lt;del&gt;HADOOP-10710&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
2) Adds an httpclient test case to TestKerberosAuthenticator.  This does 2 things:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Checks that the cookie is actually being processed.  Note that it&apos;s possible for the existing tests to pass by doing the SPNego negotiation on each request, rather than relying on the cookie.  But the entity type we use in the test doesn&apos;t support repeating, so an exception is raised if the SPNego process repeats&lt;/li&gt;
	&lt;li&gt;Verifies that httpclient works with our cookie format (probably not strictly necessary, but nice to have given httpclient&apos;s popularity)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So, I think the the test cases are pretty useful for catching regressions.&lt;/p&gt;

&lt;p&gt;As for the format itself, I just chose a simple format that passes all the tests.  That seems like a reasonable improvement over what we have now, but I&apos;m not married to the particular format.&lt;/p&gt;</comment>
                            <comment id="14103124" author="wheat9" created="Wed, 20 Aug 2014 00:16:32 +0000"  >&lt;p&gt;Once hadoop itself moves over to Java 7 at 2.7, is it possible to use &lt;tt&gt;java.net.HttpCookie&lt;/tt&gt; directly and delegate this issue to JDK?&lt;/p&gt;</comment>
                            <comment id="14111626" author="gchanan" created="Wed, 27 Aug 2014 00:18:34 +0000"  >&lt;p&gt;Latest version of the patch.&lt;/p&gt;

&lt;p&gt;This patch has the following changes from the previous patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds a check that a cookie with a proper token is included with each POST request.  This guarantees that the cookies are being handled correctly (i.e. the test can&apos;t pass by just redoing negotiate on each request).  The previous patch had a test for this with httpclient, but not with AuthenticatedURL.&lt;/li&gt;
	&lt;li&gt;Changes the cookie format.  Note with the new tests, we are checking 
{jetty, tomcat}
&lt;p&gt; x &lt;/p&gt;
{AuthenticatedURL, HttpClient}
&lt;p&gt;.  So we should be pretty confident in any cookie that passes all those tests.  To generate the cookie format, I used jetty 8.1.15.v20140411.  (NOTE: I didn&apos;t actually use the Cookie class and the 3.0 servlet API, I called the helper function jetty uses to produce the format: &lt;a href=&quot;http://archive.eclipse.org/jetty/9.0.0.RC0/apidocs/org/eclipse/jetty/http/HttpFields.html#addSetCookie%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20long,%20java.lang.String,%20boolean,%20boolean,%20int%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://archive.eclipse.org/jetty/9.0.0.RC0/apidocs/org/eclipse/jetty/http/HttpFields.html#addSetCookie%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20long,%20java.lang.String,%20boolean,%20boolean,%20int%29&lt;/a&gt; ).  It produced a cookie like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Set-Cookie=hadoop.auth=&lt;span class=&quot;code-quote&quot;&gt;&quot;u=client&amp;amp;p=client@EXAMPLE.COM&amp;amp;t=kerberos&amp;amp;e=1409128342379&amp;amp;s=R6rNnd4CcMV0bNtK1dNLiJr1ivk=&quot;&lt;/span&gt;;Expires=Mon, 31-Aug-2026 08:36:23 GMT;HttpOnly
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is if you set to use version 0 cookies, version 1 is identical with a Max-Age entry added:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Set-Cookie=hadoop.auth=&lt;span class=&quot;code-quote&quot;&gt;&quot;u=client&amp;amp;p=client@EXAMPLE.COM&amp;amp;t=kerberos&amp;amp;e=1409128342379&amp;amp;s=R6rNnd4CcMV0bNtK1dNLiJr1ivk=&quot;&lt;/span&gt;;Expires=Mon, 31-Aug-2026 08:36:23 GMT;Max-Age=379069291;HttpOnly
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Max-Age entry doesn&apos;t seem necessary, given even the JDK docs say version 1 is experimental.  Note that I kept the spaces after the ; in our format, as they don&apos;t seem to affect anything and make it easier to read.  Also, I tested the new format against Solr on real cluster and it passed, while the old format fails.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14115409" author="tucu00" created="Fri, 29 Aug 2014 16:29:56 +0000"  >&lt;p&gt;+1, pending jenkins. Greg, thanks for you patience and for doing all those combinations of scenarios in the tests.&lt;/p&gt;</comment>
                            <comment id="14115474" author="hadoopqa" created="Fri, 29 Aug 2014 17:01:39 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12664529/HADOOP-10911v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12664529/HADOOP-10911v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 4ae8178.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-auth.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4594//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4594//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4594//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4594//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14115621" author="tucu00" created="Fri, 29 Aug 2014 18:25:35 +0000"  >&lt;p&gt;Thanks Greg. Committed to trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="14116342" author="hudson" created="Sat, 30 Aug 2014 11:38:09 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #664 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/664/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/664/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10911&quot; title=&quot;hadoop.auth cookie after HADOOP-10710 still not proper according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10911&quot;&gt;&lt;del&gt;HADOOP-10911&lt;/del&gt;&lt;/a&gt;. hadoop.auth cookie after &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10710&quot; title=&quot;hadoop.auth cookie is not properly constructed according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10710&quot;&gt;&lt;del&gt;HADOOP-10710&lt;/del&gt;&lt;/a&gt; still not proper according to RFC2109. (gchanan via tucu) (tucu: rev 156e6a4f8aed69febec408af423b2a8ac313c643)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/TestKerberosAuthenticator.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java&lt;/li&gt;
	&lt;li&gt;hadoop-project/pom.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/AuthenticatorTestCase.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14116375" author="hudson" created="Sat, 30 Aug 2014 13:45:33 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1855 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1855/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1855/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10911&quot; title=&quot;hadoop.auth cookie after HADOOP-10710 still not proper according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10911&quot;&gt;&lt;del&gt;HADOOP-10911&lt;/del&gt;&lt;/a&gt;. hadoop.auth cookie after &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10710&quot; title=&quot;hadoop.auth cookie is not properly constructed according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10710&quot;&gt;&lt;del&gt;HADOOP-10710&lt;/del&gt;&lt;/a&gt; still not proper according to RFC2109. (gchanan via tucu) (tucu: rev 156e6a4f8aed69febec408af423b2a8ac313c643)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/AuthenticatorTestCase.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/TestKerberosAuthenticator.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/pom.xml&lt;/li&gt;
	&lt;li&gt;hadoop-project/pom.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14116461" author="hudson" created="Sat, 30 Aug 2014 16:47:16 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #1881 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1881/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1881/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10911&quot; title=&quot;hadoop.auth cookie after HADOOP-10710 still not proper according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10911&quot;&gt;&lt;del&gt;HADOOP-10911&lt;/del&gt;&lt;/a&gt;. hadoop.auth cookie after &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10710&quot; title=&quot;hadoop.auth cookie is not properly constructed according to RFC2109&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10710&quot;&gt;&lt;del&gt;HADOOP-10710&lt;/del&gt;&lt;/a&gt; still not proper according to RFC2109. (gchanan via tucu) (tucu: rev 156e6a4f8aed69febec408af423b2a8ac313c643)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/pom.xml&lt;/li&gt;
	&lt;li&gt;hadoop-project/pom.xml&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/AuthenticatorTestCase.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/TestKerberosAuthenticator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14188041" author="cnauroth" created="Wed, 29 Oct 2014 05:52:49 +0000"  >&lt;p&gt;We&apos;ve discovered that this patch has broken the Oozie web console in secure clusters.  The attached trace shows that the cookie is getting truncated after the first occurrence of &apos;=&apos;.  Reintroducing the quotes fixes the issue.&lt;/p&gt;

&lt;p&gt;I&apos;d like to revert this patch for 2.6.0.  We can reopen this issue if there is still a need to make a subsequent attempt at another patch for something related to HttpClient.  What do others think?&lt;/p&gt;

&lt;p&gt;Thanks to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=venkatnrangan&quot; class=&quot;user-hover&quot; rel=&quot;venkatnrangan&quot;&gt;venkatnrangan&lt;/a&gt; for reporting the bug and providing the root cause analysis that identified this patch.&lt;/p&gt;</comment>
                            <comment id="14188065" author="gchanan" created="Wed, 29 Oct 2014 06:26:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt; do you have a test?  Ideally we&apos;d have a format that worked for as many users as possible.&lt;/p&gt;

&lt;p&gt;Also, can you check out &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11068&quot; title=&quot;Match hadoop.auth cookie format to jetty output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11068&quot;&gt;&lt;del&gt;HADOOP-11068&lt;/del&gt;&lt;/a&gt;?  I changed the format there to what&apos;s output by the latest jetty but it hasn&apos;t been committed.  Perhaps that works for you?&lt;/p&gt;</comment>
                            <comment id="14188071" author="cnauroth" created="Wed, 29 Oct 2014 06:35:20 +0000"  >&lt;p&gt;Thanks, Gregory.  From a quick scan of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11068&quot; title=&quot;Match hadoop.auth cookie format to jetty output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11068&quot;&gt;&lt;del&gt;HADOOP-11068&lt;/del&gt;&lt;/a&gt;, I think that will do the trick.  I&apos;ll try it out and report back there.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12721514">HADOOP-10710</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12739565">HADOOP-11068</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12737910">HADOOP-11028</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12659009" name="HADOOP-10911-tests.patch" size="5608" author="gchanan" created="Thu, 31 Jul 2014 21:41:41 +0000"/>
                            <attachment id="12658765" name="HADOOP-10911.patch" size="939" author="gchanan" created="Wed, 30 Jul 2014 23:07:49 +0000"/>
                            <attachment id="12662887" name="HADOOP-10911v2.patch" size="14823" author="gchanan" created="Tue, 19 Aug 2014 22:59:56 +0000"/>
                            <attachment id="12664529" name="HADOOP-10911v3.patch" size="14823" author="gchanan" created="Wed, 27 Aug 2014 00:18:34 +0000"/>
                            <attachment id="12677835" name="oozie-webconsole.stream" size="16707" author="cnauroth" created="Wed, 29 Oct 2014 05:52:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409010</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ydhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409007</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>