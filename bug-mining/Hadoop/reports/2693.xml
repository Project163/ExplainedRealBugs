<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:56:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-17224] Install Intel ISA-L library in Dockerfile</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-17224</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Currently, there is not isa-l library in the docker container, and jenkins skips the natvie tests, TestNativeRSRawCoder and TestNativeXORRawCoder.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13324360">HADOOP-17224</key>
            <summary>Install Intel ISA-L library in Dockerfile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tasanuma">Takanobu Asanuma</assignee>
                                    <reporter username="tasanuma">Takanobu Asanuma</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 25 Aug 2020 01:22:38 +0000</created>
                <updated>Sun, 11 Feb 2024 13:40:32 +0000</updated>
                            <resolved>Fri, 22 Jan 2021 01:31:15 +0000</resolved>
                                    <version>3.3.1</version>
                    <version>3.4.0</version>
                                    <fixVersion>3.3.1</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="23400">6.5h</timespent>
                                <comments>
                            <comment id="17185213" author="tasanuma0829" created="Wed, 26 Aug 2020 14:17:00 +0000"  >&lt;p&gt;Merged to trunk. Thanks for reviewing it, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iwasakims&quot; class=&quot;user-hover&quot; rel=&quot;iwasakims&quot;&gt;iwasakims&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17226478" author="ahussein" created="Thu, 5 Nov 2020 03:26:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tasanuma&quot; class=&quot;user-hover&quot; rel=&quot;tasanuma&quot;&gt;tasanuma&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iwasakims&quot; class=&quot;user-hover&quot; rel=&quot;iwasakims&quot;&gt;iwasakims&lt;/a&gt; Thank you for creating that patch. I agree that it is important that the environment does not skip any tests.&lt;/p&gt;

&lt;p&gt;However, IMHO that change was &lt;b&gt;never safe&lt;/b&gt; to be merged into trunk without evaluating its side effect on all the test cases.&lt;br/&gt;
It blocked everyone else committing to Trunk.&lt;/p&gt;

&lt;p&gt;Adding ISA-L triggered several failures listed under &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15646&quot; title=&quot;Track failing tests in HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15646&quot;&gt;HDFS-15646&lt;/a&gt; (i.e., &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15654&quot; title=&quot;TestBPOfferService#testMissBlocksWhenReregister fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15654&quot;&gt;&lt;del&gt;HDFS-15654&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15461&quot; title=&quot;TestDFSClientRetries#testGetFileChecksum fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15461&quot;&gt;&lt;del&gt;HDFS-15461&lt;/del&gt;&lt;/a&gt; ..etc)&lt;br/&gt;
Also, the testing run out of native memory, and it is possible that the bug was triggered as aside effect of this native library.&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;I suggest that:&lt;/ins&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;This change gets reverted.&lt;/li&gt;
	&lt;li&gt;A thorough evaluation is performed on a local environment. This includes the native unit tests, and any test that might load the new library (EC, Stripedfiles..etc).&lt;/li&gt;
	&lt;li&gt;When the failing units are fixed, then a PR that includes all the changes may be merged.&lt;/li&gt;
	&lt;li&gt;keep an eye on the qbt-report to evaluate the environment post the merge.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aajisaka&quot; class=&quot;user-hover&quot; rel=&quot;aajisaka&quot;&gt;aajisaka&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elgoiri&quot; class=&quot;user-hover&quot; rel=&quot;elgoiri&quot;&gt;elgoiri&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kihwal&quot; class=&quot;user-hover&quot; rel=&quot;kihwal&quot;&gt;kihwal&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daryn&quot; class=&quot;user-hover&quot; rel=&quot;daryn&quot;&gt;daryn&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=weichiu&quot; class=&quot;user-hover&quot; rel=&quot;weichiu&quot;&gt;weichiu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushtkn&quot; class=&quot;user-hover&quot; rel=&quot;ayushtkn&quot;&gt;ayushtkn&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ebadger&quot; class=&quot;user-hover&quot; rel=&quot;ebadger&quot;&gt;ebadger&lt;/a&gt;&lt;/p&gt;


</comment>
                            <comment id="17226530" author="tasanuma0829" created="Thu, 5 Nov 2020 06:55:21 +0000"  >&lt;p&gt;Thanks for reporting it, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahussein&quot; class=&quot;user-hover&quot; rel=&quot;ahussein&quot;&gt;ahussein&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Sorry that I didn&apos;t realize the side effects like &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt;. But it seems that the bug was already there, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17224&quot; title=&quot;Install Intel ISA-L library in Dockerfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17224&quot;&gt;&lt;del&gt;HADOOP-17224&lt;/del&gt;&lt;/a&gt; is not the root cause.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Adding ISA-L triggered several failures listed under &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15646&quot; title=&quot;Track failing tests in HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15646&quot;&gt;HDFS-15646&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If many failed after &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17224&quot; title=&quot;Install Intel ISA-L library in Dockerfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17224&quot;&gt;&lt;del&gt;HADOOP-17224&lt;/del&gt;&lt;/a&gt;, I agree with reverting &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17224&quot; title=&quot;Install Intel ISA-L library in Dockerfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17224&quot;&gt;&lt;del&gt;HADOOP-17224&lt;/del&gt;&lt;/a&gt; once even if it is not the root cause. But does ISA-L really relate to them except for &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17226543" author="iwasakims" created="Thu, 5 Nov 2020 07:28:14 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Adding ISA-L triggered several failures listed under &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15646&quot; title=&quot;Track failing tests in HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15646&quot;&gt;HDFS-15646&lt;/a&gt; (i.e., &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15654&quot; title=&quot;TestBPOfferService#testMissBlocksWhenReregister fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15654&quot;&gt;&lt;del&gt;HDFS-15654&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15461&quot; title=&quot;TestDFSClientRetries#testGetFileChecksum fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15461&quot;&gt;&lt;del&gt;HDFS-15461&lt;/del&gt;&lt;/a&gt; ..etc)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahussein&quot; class=&quot;user-hover&quot; rel=&quot;ahussein&quot;&gt;ahussein&lt;/a&gt; If the cause is in the tests, we should fix them or make them skipped if it takes time. If the cause is ISA-L feature itself, we should disable it first then fix or drop it.&lt;/p&gt;

&lt;p&gt;I&apos;m going to look into relevant OPEN issues under &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15646&quot; title=&quot;Track failing tests in HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15646&quot;&gt;HDFS-15646&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17226561" author="ahussein" created="Thu, 5 Nov 2020 08:02:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;Ahmed Hussein If the cause is in the tests, we should fix them or make them skipped if it takes time. If the cause is ISA-L feature itself, we should disable it first then fix or drop it.&lt;br/&gt;
I&apos;m going to look into relevant OPEN issues under &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15646&quot; title=&quot;Track failing tests in HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15646&quot;&gt;HDFS-15646&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iwasakims&quot; class=&quot;user-hover&quot; rel=&quot;iwasakims&quot;&gt;iwasakims&lt;/a&gt;. I certainly agree with you that the tests need to be fixed.&lt;/p&gt;

&lt;p&gt;This change adds native libraries and it looks plausible that those JUnits in question are affected by loading the native library.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushtkn&quot; class=&quot;user-hover&quot; rel=&quot;ayushtkn&quot;&gt;ayushtkn&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aajisaka&quot; class=&quot;user-hover&quot; rel=&quot;aajisaka&quot;&gt;aajisaka&lt;/a&gt; were able to narrow the reason of the failure (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643?focusedCommentId=17223204&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17223204&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;comment&lt;/a&gt;).&lt;br/&gt;
While this was a bug in the implementation, it is still does not seem right that those debugging are done after merging &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17224&quot; title=&quot;Install Intel ISA-L library in Dockerfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17224&quot;&gt;&lt;del&gt;HADOOP-17224&lt;/del&gt;&lt;/a&gt; .&lt;br/&gt;
If &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushtkn&quot; class=&quot;user-hover&quot; rel=&quot;ayushtkn&quot;&gt;ayushtkn&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aajisaka&quot; class=&quot;user-hover&quot; rel=&quot;aajisaka&quot;&gt;aajisaka&lt;/a&gt; were not aware of that change, I would not figure out the problem on my own.&lt;/p&gt;

&lt;p&gt;The closed jiras &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15654&quot; title=&quot;TestBPOfferService#testMissBlocksWhenReregister fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15654&quot;&gt;&lt;del&gt;HDFS-15654&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15461&quot; title=&quot;TestDFSClientRetries#testGetFileChecksum fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15461&quot;&gt;&lt;del&gt;HDFS-15461&lt;/del&gt;&lt;/a&gt;  need to be re-investigated after the fix done in &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Also, Yetus fails when the JVM fails to allocate memory to create new threads. It is unclear so far when that error was introduced in Hadoop. Yet, I can imagine that calling a new native library could lead to different memory behavior.&lt;br/&gt;
For Example, there could be a bug in the native code that leads to a memory leak, or the library reserves buffer that are not released back.&lt;/p&gt;

&lt;p&gt;If you think &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17224&quot; title=&quot;Install Intel ISA-L library in Dockerfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17224&quot;&gt;&lt;del&gt;HADOOP-17224&lt;/del&gt;&lt;/a&gt; is unlikely to trigger the failures of Junits, then do you have suggestions what could be the code commit that change the behavior of those units and trigger OOM on Yetus?&lt;/p&gt;</comment>
                            <comment id="17226696" author="tasanuma0829" created="Thu, 5 Nov 2020 12:35:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;The closed jiras &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15654&quot; title=&quot;TestBPOfferService#testMissBlocksWhenReregister fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15654&quot;&gt;&lt;del&gt;HDFS-15654&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15461&quot; title=&quot;TestDFSClientRetries#testGetFileChecksum fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15461&quot;&gt;&lt;del&gt;HDFS-15461&lt;/del&gt;&lt;/a&gt; need to be re-investigated after the fix done in &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Aren&apos;t they covered by the last jenkins result of &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt;? Sorry if I&apos;m missing something.&lt;/p&gt;

&lt;p&gt;About the OOM error, I think it happened occasionally before that. &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-12711&quot; title=&quot;deadly hdfs test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-12711&quot;&gt;&lt;del&gt;HDFS-12711&lt;/del&gt;&lt;/a&gt; is a similar issue and closed as incomplete. I&apos;m not sure if the ISA-L has made that more likely to happen. We could revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17224&quot; title=&quot;Install Intel ISA-L library in Dockerfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17224&quot;&gt;&lt;del&gt;HADOOP-17224&lt;/del&gt;&lt;/a&gt; once and see the qbt results for a while.&lt;/p&gt;</comment>
                            <comment id="17226779" author="ahussein" created="Thu, 5 Nov 2020 15:47:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;Aren&apos;t they covered by the last jenkins result of &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt;? Sorry if I&apos;m missing something.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tasanuma&quot; class=&quot;user-hover&quot; rel=&quot;tasanuma&quot;&gt;tasanuma&lt;/a&gt;. I put a patch to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15654&quot; title=&quot;TestBPOfferService#testMissBlocksWhenReregister fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15654&quot;&gt;&lt;del&gt;HDFS-15654&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15461&quot; title=&quot;TestDFSClientRetries#testGetFileChecksum fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15461&quot;&gt;&lt;del&gt;HDFS-15461&lt;/del&gt;&lt;/a&gt;  before we learned about the bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt; .&lt;br/&gt;
Once &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt; got merged new errors started to show up in &lt;tt&gt;TestDFSClientRetries&lt;/tt&gt; and &lt;tt&gt;TestBPOfferService&lt;/tt&gt; (Example see &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15654?focusedCommentId=17226334&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17226334&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this comment&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;BTW, the reason I point to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17224&quot; title=&quot;Install Intel ISA-L library in Dockerfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17224&quot;&gt;&lt;del&gt;HADOOP-17224&lt;/del&gt;&lt;/a&gt; to be the trigger of those failures is that the errors can only be reproduced with native flag. (See &lt;a href=&quot;https://github.com/apache/hadoop/pull/2408#discussion_r513963136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Akira&apos;s comment on GitHub&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17226917" author="kihwal" created="Thu, 5 Nov 2020 18:41:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tasanuma&quot; class=&quot;user-hover&quot; rel=&quot;tasanuma&quot;&gt;tasanuma&lt;/a&gt;, If there are many test failures caused after the commit of this feature, it might be better to revert and rework, unless there is a simple change that will fix most failures quickly.&#160; It does not matter which part is to blame. It could be faulty assumptions or designs in existing tests or unforeseen negative side-effect of the feature.&#160; The point is, trunk build is in a broken state and more commits continue to come in with the justification like &quot;I didn&apos;t break it. It was broken before&quot;.&#160;&#160;This is a situation we really want to avoid.&lt;/p&gt;

&lt;p&gt;If the test failures cannot be fixed quickly, we need to bring it back to the sane state first. Again, this has nothing to do with who is technically right or wrong.  Please review the test failures and determine whether they can be fixed quickly.  Feel free to ask if you need additional eyes.&lt;/p&gt;</comment>
                            <comment id="17227098" author="tasanuma0829" created="Fri, 6 Nov 2020 01:16:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahussein&quot; class=&quot;user-hover&quot; rel=&quot;ahussein&quot;&gt;ahussein&lt;/a&gt; I understood. Thanks for your explanation.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kihwal&quot; class=&quot;user-hover&quot; rel=&quot;kihwal&quot;&gt;kihwal&lt;/a&gt; I agree with you to revert and rework. It&apos;s not going to be easy to fix them.&lt;/p&gt;

&lt;p&gt;I will revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-17224&quot; title=&quot;Install Intel ISA-L library in Dockerfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-17224&quot;&gt;&lt;del&gt;HADOOP-17224&lt;/del&gt;&lt;/a&gt; and let&apos;s see how it goes.&lt;/p&gt;</comment>
                            <comment id="17227115" author="tasanuma0829" created="Fri, 6 Nov 2020 02:24:07 +0000"  >&lt;p&gt;Reverted it by&#160;&lt;a href=&quot;https://github.com/apache/hadoop/pull/2440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#2440&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17228719" author="ahussein" created="Mon, 9 Nov 2020 17:07:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tasanuma&quot; class=&quot;user-hover&quot; rel=&quot;tasanuma&quot;&gt;tasanuma&lt;/a&gt; Thank you.&lt;br/&gt;
Let&apos;s watch the qbt report after merging that change.&lt;/p&gt;

&lt;p&gt;So far, there is a noticeable decrease in failed tests in HDFS. &lt;/p&gt;</comment>
                            <comment id="17232728" author="iwasakims" created="Mon, 16 Nov 2020 12:39:30 +0000"  >&lt;blockquote&gt;
&lt;p&gt;So far, there is a noticeable decrease in failed tests in HDFS.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahussein&quot; class=&quot;user-hover&quot; rel=&quot;ahussein&quot;&gt;ahussein&lt;/a&gt; Could you give me the name of relevant test cases? I would like good example for digging the effect of ISA-L.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Once &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt; got merged new errors started to show up in TestDFSClientRetries and TestBPOfferService (Example see this comment)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;TestDFSClientRetries looks fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15461&quot; title=&quot;TestDFSClientRetries#testGetFileChecksum fails intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15461&quot;&gt;&lt;del&gt;HDFS-15461&lt;/del&gt;&lt;/a&gt;. TestBPOfferService is still flaky.&lt;/p&gt;</comment>
                            <comment id="17246107" author="ayushtkn" created="Tue, 8 Dec 2020 19:38:26 +0000"  >&lt;p&gt;I don&apos;t think reverting this helped, It is still happening more or less in similar fashion.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tasanuma&quot; class=&quot;user-hover&quot; rel=&quot;tasanuma&quot;&gt;tasanuma&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iwasakims&quot; class=&quot;user-hover&quot; rel=&quot;iwasakims&quot;&gt;iwasakims&lt;/a&gt; do you folks think ISA-L could bother other tests, It is something very much EC specific, and is actually running in lot of prod. environments as well. On the other side I remember seeing this &quot;Unable to create native thread&quot; failures, even last year as well or even before that as well, So this isn&apos;t something new pitching in.....&lt;/p&gt;

&lt;p&gt;Any pointers, what you folks are thinking about this, Want to push this again, got something concerning, or still doubting this, or got something else, or stuck somewhere...&lt;/p&gt;

&lt;p&gt;If nothing, we might even try taking help from Infra team as well, they might have some idea, may be something at their end?&lt;/p&gt;</comment>
                            <comment id="17246214" author="ahussein" created="Wed, 9 Dec 2020 00:37:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushtkn&quot; class=&quot;user-hover&quot; rel=&quot;ayushtkn&quot;&gt;ayushtkn&lt;/a&gt;, in addition to touching pom files, perhaps sending on the mailing list to stop commits for a day would be helpful .&lt;br/&gt;
After the latest qbt-report is generated, then we guarantee that the following qbt-report will be good to find all the side effects&lt;br/&gt;
of the ISA-L (if any).&lt;/p&gt;

&lt;p&gt;I remember that the last time the ISA-L was in, the unit tests were failing with different stack traces.&lt;br/&gt;
The concern was that there were around hundred failing tests, many of which were EC specific.&lt;br/&gt;
I think that the ISA-L can be committed when it won&apos;t change the Yetus report outcome.&lt;/p&gt;

&lt;p&gt;Once we commit ISLA-L, we might get different behavior and the opened Jira opened for failed tests will be confusing&lt;br/&gt;
because they have would have different description and stack trace. Then, someone doing bisect to find root cause of a&lt;br/&gt;
failure, would get stuck because he would have to consider the change of behavior before and after ISA-L.&lt;/p&gt;



&lt;p&gt;The &lt;a href=&quot;https://ci-hadoop.apache.org/job/hadoop-qbt-trunk-java8-linux-x86_64/349/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;latest qbt-report &lt;/a&gt;points to usual suspects: &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
Test Result (17 failures / -207)
org.apache.hadoop.yarn.sls.appmaster.TestAMSimulator.testAMSimulatorWithNodeLabels[1]
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testUpdateAppStateXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testAppQueueXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testAppTimeoutsXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testGetContainersXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testUpdateAppPriorityXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testUpdateAppQueueXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testAppTimeoutXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testAppAttemptXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testGetAppAttemptXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testAppXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testAppStateXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testAppPriorityXML
org.apache.hadoop.yarn.server.router.webapp.TestRouterWebServicesREST.testGetAppsMultiThread
org.apache.hadoop.tools.dynamometer.TestDynamometerInfra.org.apache.hadoop.tools.dynamometer.TestDynamometerInfra
org.apache.hadoop.yarn.applications.distributedshell.TestDistributedShell.testDSShellWithOpportunisticContainers
org.apache.hadoop.yarn.applications.distributedshell.TestDistributedShell.testDSShellWithEnforceExecutionType
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="17246258" author="tasanuma0829" created="Wed, 9 Dec 2020 02:43:43 +0000"  >&lt;p&gt;I also think it&apos;s time to enable ISA-L. Otherwise, I fear that we will miss some bugs that relate to ISA-L, such as &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-15643&quot; title=&quot;EC: Fix checksum computation in case of native encoders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-15643&quot;&gt;&lt;del&gt;HDFS-15643&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
To see the side effects, how about committing it this Friday or Saturday since the number of commits will be lower on weekends?&lt;/p&gt;</comment>
                            <comment id="17246276" author="iwasakims" created="Wed, 9 Dec 2020 03:44:08 +0000"  >&lt;p&gt;I could not reproduce the possibly relevant test failures on CentOS/RHEL on which I usually work. Same for Ubuntu VMs/containers on my local. I&apos;m +1 to commit it again to see the difference.&lt;/p&gt;</comment>
                            <comment id="17246526" author="ayushtkn" created="Wed, 9 Dec 2020 13:13:53 +0000"  >&lt;p&gt;Yahh, sounds good to me, we can commit over weekend and observe, if we get some EC related failures, or some suspicious test failures, or change in reasons of test failures, we can revert back by Monday. If there are failures, then that would be some bug itself in our code, which we need to fix. As of now, we don&apos;t know what to do here. Atleast we would have the traces and the names of the tests which are problematic, in case if they are...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahussein&quot; class=&quot;user-hover&quot; rel=&quot;ahussein&quot;&gt;ahussein&lt;/a&gt; does that make sense?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tasanuma&quot; class=&quot;user-hover&quot; rel=&quot;tasanuma&quot;&gt;tasanuma&lt;/a&gt; will it be possible to run the entire test suite while raising the PR? May be just increasing the timeout in the Jenkinsfile or touching the hadoop-project/pom.xml should do the trick.&lt;/p&gt;</comment>
                            <comment id="17247007" author="tasanuma0829" created="Thu, 10 Dec 2020 04:31:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushtkn&quot; class=&quot;user-hover&quot; rel=&quot;ayushtkn&quot;&gt;ayushtkn&lt;/a&gt; Sure, I created the PR.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hadoop/pull/2537&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hadoop/pull/2537&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17247893" author="tasanuma0829" created="Fri, 11 Dec 2020 12:40:32 +0000"  >&lt;p&gt;I didn&apos;t know the trick that editing Jenkinsfile and one java file run all unit tests. Thanks for letting me know. I&apos;ll try a few more times.&lt;/p&gt;</comment>
                            <comment id="17269750" author="tasanuma0829" created="Fri, 22 Jan 2021 01:31:15 +0000"  >&lt;p&gt;Merged the PR again. Thank you, everyone.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13336103">HDFS-15643</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="13346619">HADOOP-17438</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i1yo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12346893">3.3.1</customfieldvalue>
    <customfieldvalue id="12346894">3.4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>