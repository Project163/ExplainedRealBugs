<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:47:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-11509] change parsing sequence in GenericOptionsParser to parse -D parameters first</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-11509</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;In GenericOptionsParser, we need to parse -D parameter first. In that case, the user input parameter (through -D) can be set into configuration object earlier and used to process other parameters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12769991">HADOOP-11509</key>
            <summary>change parsing sequence in GenericOptionsParser to parse -D parameters first</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xgong">Xuan Gong</assignee>
                                    <reporter username="xgong">Xuan Gong</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Jan 2015 03:50:01 +0000</created>
                <updated>Fri, 24 Apr 2015 22:49:17 +0000</updated>
                            <resolved>Mon, 26 Jan 2015 23:38:11 +0000</resolved>
                                                    <fixVersion>2.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14291469" author="hadoopqa" created="Mon, 26 Jan 2015 05:14:23 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12694467/HADOOP-11509.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12694467/HADOOP-11509.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 7b82c4a.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5478//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5478//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5478//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5478//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14292313" author="jianhe" created="Mon, 26 Jan 2015 19:50:14 +0000"  >&lt;p&gt;Patch looks good overall, &lt;br/&gt;
one other thing noticed is that: &lt;br/&gt;
if user first calls &lt;tt&gt;Path.getFileSystem(Configuration conf)&lt;/tt&gt;, user gets an filesystem object;&lt;br/&gt;
The next time user invokes &lt;tt&gt;Path.getFileSystem(Configuration conf)&lt;/tt&gt; again with a different conf,  the returned filesystem object still uses the old conf.  &lt;/p&gt;

&lt;p&gt;Should the API &lt;tt&gt;Path.getFileSystem(Configuration conf)&lt;/tt&gt; be that the returned file system object always apply the up-to-date conf ?  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt;, your opinion ?&lt;/p&gt;</comment>
                            <comment id="14292357" author="cnauroth" created="Mon, 26 Jan 2015 20:25:15 +0000"  >&lt;p&gt;Thank you, Xuan and Jian.&lt;/p&gt;

&lt;p&gt;Just to provide a bit more background on this, Xuan found that streaming jobs using files in Azure Storage were not able to override the setting of &lt;tt&gt;fs.azure.block.size&lt;/tt&gt; from the command line.  It looks like he found the root cause is that &lt;tt&gt;validateFiles&lt;/tt&gt; checks for existence of files against a &lt;tt&gt;FileSystem&lt;/tt&gt; instance, but this &lt;tt&gt;FileSystem&lt;/tt&gt; instance is obtained before handling -D options.  This would mean we then have an instance sitting in the &lt;tt&gt;FileSystem&lt;/tt&gt; cache that was created without the -D options set in the &lt;tt&gt;Configuration&lt;/tt&gt;.  Later, during MapReduce job split calculation, it would use the cached instance that didn&apos;t have the override of &lt;tt&gt;fs.azure.block.size&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I agree with the change here, because the expectation is that the command line arguments take precedence.  However, I don&apos;t think we should move the -D handling all the way to the top of the method.  Right now, the handling is such that -D options would take precedence over -fs and -jt.  The current patch would reverse that.  I don&apos;t know if anyone depends on that behavior, but we can avoid changing it by doing the -D handling in between the handling of -conf and the handling of -libjars.  I&apos;d be +1 for the patch with that change if you test it and it still works for overriding &lt;tt&gt;fs.azure.block.size&lt;/tt&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should the API Path.getFileSystem(Configuration conf) be that the returned file system object always apply the up-to-date conf ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is a long-standing weakness of the &lt;tt&gt;FileSystem&lt;/tt&gt; cache.  It has been discussed in other jiras, but I can&apos;t find those now.  The &lt;tt&gt;FileSystem&lt;/tt&gt; cache key is composed of scheme, authority, and &lt;tt&gt;UserGroupInformation&lt;/tt&gt;.  However, the &lt;tt&gt;FileSystem#get&lt;/tt&gt; API is phrased in terms of a whole &lt;tt&gt;Configuration&lt;/tt&gt;.  Various other configuration properties can tune the behavior of a &lt;tt&gt;FileSystem&lt;/tt&gt;, but if you get a cached instance, then these configuration properties might not be applied.  OTOH, it would be too costly to make the whole &lt;tt&gt;Configuration&lt;/tt&gt; part of the cache key.&lt;/p&gt;

&lt;p&gt;This is an existing problem, unrelated to the current patch.&lt;/p&gt;</comment>
                            <comment id="14292397" author="xgong" created="Mon, 26 Jan 2015 20:49:14 +0000"  >&lt;p&gt;Thanks for the comment. Move the -D handling in between the handling of -conf and the handling of -libjars&lt;/p&gt;</comment>
                            <comment id="14292461" author="hadoopqa" created="Mon, 26 Jan 2015 21:44:10 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12694613/HADOOP-11509.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12694613/HADOOP-11509.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 21d5599.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.security.token.delegation.web.TestWebDelegationToken&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5484//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5484//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5484//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5484//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14292527" author="cnauroth" created="Mon, 26 Jan 2015 22:29:30 +0000"  >&lt;p&gt;+1 for the patch.  Thank you again, Xuan.  The test failure is unrelated.  I verified that it passes locally for me.&lt;/p&gt;</comment>
                            <comment id="14292573" author="xgong" created="Mon, 26 Jan 2015 22:59:19 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jianhe&quot; class=&quot;user-hover&quot; rel=&quot;jianhe&quot;&gt;jianhe&lt;/a&gt;&lt;br/&gt;
I have tested the patch locally. It works for overriding fs.azure.block.size.&lt;/p&gt;</comment>
                            <comment id="14292634" author="xgong" created="Mon, 26 Jan 2015 23:38:00 +0000"  >&lt;p&gt;Committed to trunk/branch-2. Thanks for the review.&lt;/p&gt;</comment>
                            <comment id="14292643" author="hudson" created="Mon, 26 Jan 2015 23:42:33 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-trunk-Commit #6936 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/6936/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/6936/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11509&quot; title=&quot;change parsing sequence in GenericOptionsParser to parse -D parameters first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11509&quot;&gt;&lt;del&gt;HADOOP-11509&lt;/del&gt;&lt;/a&gt;. Change parsing sequence in GenericOptionsParser to parse (xgong: rev 0bf333911c950f22ec0f784bf465306e20b0d507)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14292689" author="aw" created="Tue, 27 Jan 2015 00:12:22 +0000"  >&lt;p&gt;Umm, isn&apos;t this an incompatible change?  I&apos;m sort of surprised to see this committed to branch-2.&lt;/p&gt;</comment>
                            <comment id="14292728" author="cnauroth" created="Tue, 27 Jan 2015 00:35:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aw&quot; class=&quot;user-hover&quot; rel=&quot;aw&quot;&gt;aw&lt;/a&gt;.  Based on my code review, I thought this change was OK for backwards compatibility.&lt;/p&gt;

&lt;p&gt;The first version would have been backwards-incompatible, because it would have changed the precedence of -D arguments over -fs and -jt.  (See 2 comments back from me for more details.)&lt;/p&gt;

&lt;p&gt;The committed version of the patch still moves the -D handling before the handling of -libjars, -files and -archives.  However, these are not analogous to -fs and -jt.  They do not map directly to an underlying user-facing configuration property, so I expect the change in precedence isn&apos;t relevant.  While it is a change in behavior, I think the prior behavior can only be considered a bug due to validateFiles caching a FileSystem with configuration that didn&apos;t consider the -D arguments.&lt;/p&gt;

&lt;p&gt;Please let me know if you disagree or if you think I missed something in the review.  The intent was not to put a backwards-incompatible change in branch-2.&lt;/p&gt;</comment>
                            <comment id="14292765" author="aw" created="Tue, 27 Jan 2015 00:58:48 +0000"  >&lt;p&gt;I understand your position and mostly agree.  But we have a huge documentation problem:  all of the examples and java help messages, etc, for the entirety of Hadoop&apos;s lifetime have these options in a different order.  Since it doesn&apos;t appear that the parser is particularly smart about processing these things in any particular order, all of these examples break.  This likely means real world code breaks. &lt;/p&gt;

&lt;p&gt;At a minimum, I think this patch requires some human-side edits to make sure everything is in sync with the expected order of the options.&lt;/p&gt;</comment>
                            <comment id="14293320" author="hudson" created="Tue, 27 Jan 2015 10:41:33 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #86 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/86/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/86/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11509&quot; title=&quot;change parsing sequence in GenericOptionsParser to parse -D parameters first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11509&quot;&gt;&lt;del&gt;HADOOP-11509&lt;/del&gt;&lt;/a&gt;. Change parsing sequence in GenericOptionsParser to parse (xgong: rev 0bf333911c950f22ec0f784bf465306e20b0d507)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14293332" author="hudson" created="Tue, 27 Jan 2015 10:45:09 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #820 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/820/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/820/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11509&quot; title=&quot;change parsing sequence in GenericOptionsParser to parse -D parameters first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11509&quot;&gt;&lt;del&gt;HADOOP-11509&lt;/del&gt;&lt;/a&gt;. Change parsing sequence in GenericOptionsParser to parse (xgong: rev 0bf333911c950f22ec0f784bf465306e20b0d507)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14293574" author="hudson" created="Tue, 27 Jan 2015 14:21:02 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #83 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/83/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/83/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11509&quot; title=&quot;change parsing sequence in GenericOptionsParser to parse -D parameters first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11509&quot;&gt;&lt;del&gt;HADOOP-11509&lt;/del&gt;&lt;/a&gt;. Change parsing sequence in GenericOptionsParser to parse (xgong: rev 0bf333911c950f22ec0f784bf465306e20b0d507)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14293583" author="hudson" created="Tue, 27 Jan 2015 14:21:33 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #2037 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2037/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2037/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11509&quot; title=&quot;change parsing sequence in GenericOptionsParser to parse -D parameters first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11509&quot;&gt;&lt;del&gt;HADOOP-11509&lt;/del&gt;&lt;/a&gt;. Change parsing sequence in GenericOptionsParser to parse (xgong: rev 0bf333911c950f22ec0f784bf465306e20b0d507)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14293606" author="hudson" created="Tue, 27 Jan 2015 14:31:03 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #2018 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2018/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2018/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11509&quot; title=&quot;change parsing sequence in GenericOptionsParser to parse -D parameters first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11509&quot;&gt;&lt;del&gt;HADOOP-11509&lt;/del&gt;&lt;/a&gt;. Change parsing sequence in GenericOptionsParser to parse (xgong: rev 0bf333911c950f22ec0f784bf465306e20b0d507)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14293651" author="hudson" created="Tue, 27 Jan 2015 15:05:01 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #87 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/87/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/87/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11509&quot; title=&quot;change parsing sequence in GenericOptionsParser to parse -D parameters first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11509&quot;&gt;&lt;del&gt;HADOOP-11509&lt;/del&gt;&lt;/a&gt;. Change parsing sequence in GenericOptionsParser to parse (xgong: rev 0bf333911c950f22ec0f784bf465306e20b0d507)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/GenericOptionsParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14293817" author="cnauroth" created="Tue, 27 Jan 2015 16:57:45 +0000"  >&lt;p&gt;I took a look at how the generic command line options are documented, currently and going back to 1.0.4:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hadoop.apache.org/docs/r2.6.0/hadoop-project-dist/hadoop-common/CommandsManual.html#Generic_Options&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hadoop.apache.org/docs/r2.6.0/hadoop-project-dist/hadoop-common/CommandsManual.html#Generic_Options&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hadoop.apache.org/docs/r1.0.4/commands_manual.html#Generic+Options&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hadoop.apache.org/docs/r1.0.4/commands_manual.html#Generic+Options&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also relevant is the streaming documentation, which basically repeats the information:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hadoop.apache.org/docs/r2.6.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/HadoopStreaming.html#Generic_Command_Options&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hadoop.apache.org/docs/r2.6.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/HadoopStreaming.html#Generic_Command_Options&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hadoop.apache.org/docs/r1.0.4/streaming.html#Generic+Command+Options&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hadoop.apache.org/docs/r1.0.4/streaming.html#Generic+Command+Options&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There is no way for a user to interpret this documentation to get a complete and correct understanding of these precedence rules (regardless of this patch).  It sounds like you&apos;re suggesting we file a follow-on jira to improve the documentation.  Do I understand correctly?&lt;/p&gt;

&lt;p&gt;I still can&apos;t see a way that this patch would cause calling code to break.  The argument handling at this layer is not strictly positional, due to the way commons-cli works.  I don&apos;t expect anyone will need to swap the order of arguments in their script or anything like that.  Do you have an example of something that would break after this patch?&lt;/p&gt;</comment>
                            <comment id="14295008" author="stevel@apache.org" created="Wed, 28 Jan 2015 11:10:43 +0000"  >&lt;p&gt;FWIW, my experience with the &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-679&quot; title=&quot;add an entry point that can start any Yarn service&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-679&quot;&gt;&lt;del&gt;YARN-679&lt;/del&gt;&lt;/a&gt; &quot;generic entry point&quot; code was that any attempt to instantiate a FileSystem instance, even indirectly, would trigger the UGI setup. If HdfsConfiguration and, if needed YarnConfiguration hadn&apos;t been instantiated first, you&apos;d have an invalid filesystem/auth combo.&lt;/p&gt;

&lt;p&gt;it was that, not the order of -D eval on the CLI, which caused problems&lt;/p&gt;</comment>
                            <comment id="14295404" author="cnauroth" created="Wed, 28 Jan 2015 17:11:45 +0000"  >&lt;p&gt;Sometimes you can work around these problems by configuring &lt;tt&gt;fs.&amp;lt;file system scheme&amp;gt;.impl.disable.cache&lt;/tt&gt; to &lt;tt&gt;true&lt;/tt&gt; or using &lt;tt&gt;FileSystem#newInstance&lt;/tt&gt; to guarantee a certain spot in the code gets a distinct instance that won&apos;t be pulled from the cache later by another part of the code.  However, this has its own problems.  Disabling the cache can cause a performance problem.  If using &lt;tt&gt;FileSystem#newInstance&lt;/tt&gt;, then it&apos;s very important that the owner of the instance eventually call &lt;tt&gt;close&lt;/tt&gt; to avoid bloating memory over time.  In the case where the &lt;tt&gt;FileSystem&lt;/tt&gt; instance creation happens indirectly, these workarounds might not be viable, because you might not want to change code several layers below just to accommodate a new patch.&lt;/p&gt;

&lt;p&gt;Issues like this have made the &lt;tt&gt;FileSystem&lt;/tt&gt; cache a frequent source of confusion.  This might warrant a redesign at some point.  I&apos;d prefer that a lot of the implicit behavior around use of &lt;tt&gt;Configuration&lt;/tt&gt; and &lt;tt&gt;UserGroupInformation&lt;/tt&gt; were made explicit to the caller in the API.  I also think we&apos;d benefit from full reference counting instead of the current &quot;best effort&quot; caching where an unrelated thread could call &lt;tt&gt;close&lt;/tt&gt; and trigger a cache eviction.  I believe doing this would require changing the contract so that callers must always call &lt;tt&gt;close&lt;/tt&gt;.  Unfortunately, that would be backwards-incompatible.  There is a ton of existing code all over the ecosystem that doesn&apos;t bother calling &lt;tt&gt;close&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14296677" author="stevel@apache.org" created="Thu, 29 Jan 2015 10:34:38 +0000"  >&lt;p&gt;UGI and Config setup are irreversible. Once UGI has set itself up, you are stuck with the singleton. As for Configurations, give it an invalid XML document as a base resource and there goes Hadoop&lt;/p&gt;</comment>
                            <comment id="14299035" author="cnauroth" created="Fri, 30 Jan 2015 18:46:13 +0000"  >&lt;p&gt;I have filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11528&quot; title=&quot;Document precedence rules for generic command line options.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11528&quot;&gt;HADOOP-11528&lt;/a&gt; to improve the documentation to discuss the precedence rules for generic command line options.&lt;/p&gt;

&lt;p&gt;Has anyone found a concrete example of a backwards-compatibility problem, or has this discussion been addressed adequately?  Please comment if there are still concerns.  Otherwise, I&apos;m going to move on from this jira.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="14299038" author="aw" created="Fri, 30 Jan 2015 18:47:24 +0000"  >&lt;p&gt;Sorry, I haven&apos;t had a chance to try things where I knew precedence mattered.  Let&apos;s move on and just wait to see what breaks.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14299046" author="cnauroth" created="Fri, 30 Jan 2015 18:55:05 +0000"  >&lt;p&gt;Thank you for reviewing, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aw&quot; class=&quot;user-hover&quot; rel=&quot;aw&quot;&gt;aw&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12771395">HADOOP-11528</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12694467" name="HADOOP-11509.1.patch" size="1645" author="xgong" created="Mon, 26 Jan 2015 04:15:33 +0000"/>
                            <attachment id="12694613" name="HADOOP-11509.2.patch" size="1621" author="xgong" created="Mon, 26 Jan 2015 20:48:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24s7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>