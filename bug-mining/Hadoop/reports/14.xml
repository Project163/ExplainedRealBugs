<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:31:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6172] bin/hadoop version not working</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6172</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Two problems found:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;${build.src} not included in ant target &quot;compile-core-classes&quot;, thus o.a.h.package-info.java is not compiled, which contains the version annotation.&lt;/li&gt;
	&lt;li&gt;bin/hadoop-config.sh attempts to include jar files matching pattern hadoop-&lt;b&gt;&lt;del&gt;core.jar rather than hadoop-core&lt;/del&gt;&lt;/b&gt;.jar.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12431870">HADOOP-6172</key>
            <summary>bin/hadoop version not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hong.tang">Hong Tang</assignee>
                                    <reporter username="hong.tang">Hong Tang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Jul 2009 07:32:42 +0000</created>
                <updated>Tue, 24 Aug 2010 20:39:12 +0000</updated>
                            <resolved>Fri, 31 Jul 2009 21:39:50 +0000</resolved>
                                    <version>0.21.0</version>
                                    <fixVersion>0.21.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12737448" author="hong.tang" created="Fri, 31 Jul 2009 07:38:25 +0000"  >&lt;p&gt;Problem symptoms:&lt;br/&gt;
% bin/hadoop version&lt;br/&gt;
Hadoop Unknown&lt;br/&gt;
Subversion Unknown -r Unknown&lt;br/&gt;
Compiled by Unknown on Unknown&lt;br/&gt;
From source with checksum Unknown&lt;/p&gt;

&lt;p&gt;% build/hadoop-core-0.21.0-dev/bin/hadoop version&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/util/VersionInfo&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.VersionInfo&lt;br/&gt;
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:319)&lt;br/&gt;
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:330)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:254)&lt;br/&gt;
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:402)&lt;/p&gt;</comment>
                            <comment id="12737449" author="sreekanth" created="Fri, 31 Jul 2009 07:39:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-4503&quot; title=&quot;ant jar when run for first time does not inclue version information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-4503&quot;&gt;&lt;del&gt;HADOOP-4503&lt;/del&gt;&lt;/a&gt; actually talks about the first problem which is mentioned in this JIRA.&lt;/p&gt;</comment>
                            <comment id="12737450" author="hong.tang" created="Fri, 31 Jul 2009 07:42:10 +0000"  >&lt;p&gt;Trivial patch that fixes both problems. No junit test required. Manually tested and confirmed to resolve the problems.&lt;/p&gt;</comment>
                            <comment id="12737452" author="hong.tang" created="Fri, 31 Jul 2009 07:46:58 +0000"  >&lt;p&gt;@sreekanth, I am not sure if they are the same problem. For &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-4503&quot; title=&quot;ant jar when run for first time does not inclue version information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-4503&quot;&gt;&lt;del&gt;HADOOP-4503&lt;/del&gt;&lt;/a&gt;, call &quot;ant jar&quot; twice would resolve the problem. But for this one, a java file (build/src/org/apache/hadoop/package-info.java) is simply not compiled and deposited to build/classes directory.&lt;/p&gt;</comment>
                            <comment id="12737631" author="szetszwo" created="Fri, 31 Jul 2009 18:15:36 +0000"  >&lt;p&gt;+1 patch looks good.&lt;/p&gt;</comment>
                            <comment id="12737633" author="szetszwo" created="Fri, 31 Jul 2009 18:17:22 +0000"  >&lt;p&gt;Since this is a script changes, test-patch and unit tests are not related.  I am going to commit this without submitting it to hudson.&lt;/p&gt;</comment>
                            <comment id="12737641" author="cos" created="Fri, 31 Jul 2009 18:25:32 +0000"  >&lt;p&gt;Shouldn&apos;t we have a primitive unit test to check bin/hadoop version result? I believe this is a very basic sanity test too.&lt;/p&gt;</comment>
                            <comment id="12737648" author="szetszwo" created="Fri, 31 Jul 2009 18:33:19 +0000"  >&lt;p&gt;&amp;gt; Shouldn&apos;t we have a primitive unit test to check bin/hadoop version result? ..&lt;/p&gt;

&lt;p&gt;I think this is a good idea but we do not have any unit test to test any script (correct me if I am wrong).  Not sure why we are not creating unit tests for scripts.  I guess we usually do manual tests for scripts.  Are you proposing to add unit tests for scripts?&lt;/p&gt;

&lt;p&gt;Holding on the commit.&lt;/p&gt;</comment>
                            <comment id="12737660" author="hong.tang" created="Fri, 31 Jul 2009 19:03:01 +0000"  >&lt;p&gt;Such test could change the dependency, because it is testing whether the tar target runs correctly. Or we probably could incorporate it as part of the &quot;test-patch&quot; target (because that would build a tar in the process).&lt;/p&gt;</comment>
                            <comment id="12737675" author="cos" created="Fri, 31 Jul 2009 19:24:58 +0000"  >&lt;p&gt;I&apos;m not sure why the dependency would be changed - it seems that scripts are coming directly from SVN and nothing special is required to run&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bin/hadoop version
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but compilation. Thus certain script tests won&apos;t require anything special too. Am I mistaken?&lt;/p&gt;

&lt;p&gt;Also, I think whatever tests might be automated with a relatively low effort should be automated. Manual tests aren&apos;t that efficient nor error proof. E.g. in the current common trunk bin/hadoop version produces a lot of &apos;unknown&apos; version tags which might&apos;ve been caught by a routinely executed test. &lt;/p&gt;

&lt;p&gt;Shall we start adding tests for scripts right now? Why not - this day isn&apos;t worst than any consequent one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12737692" author="hong.tang" created="Fri, 31 Jul 2009 20:17:53 +0000"  >&lt;p&gt;@Cos, in this particular case, I want to conduct two tests:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;$hadoop-src-dir/bin/hadoop version&lt;/li&gt;
	&lt;li&gt;$hadoop-src-dir/build/hadoop-xxx/bin/hadoop version&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The second test requires hadoop being copied to build/bin, which would not happen until &quot;ant tar&quot; is called. So the second test would depend on &quot;tar&quot; target.&lt;/p&gt;</comment>
                            <comment id="12737701" author="szetszwo" created="Fri, 31 Jul 2009 20:45:06 +0000"  >&lt;p&gt;&amp;gt; Also, I think whatever tests might be automated with a relatively low effort should be automated. ...&lt;/p&gt;

&lt;p&gt;Since our build process does not support script unit tests, I think it is not a relatively low effort to add a test for this issue.  The fixes in this issue are simple but important.  Even we decide to create unit tests for script, how about do it in a separated issue, so that we can commit this first?&lt;/p&gt;</comment>
                            <comment id="12737711" author="cos" created="Fri, 31 Jul 2009 21:11:13 +0000"  >&lt;p&gt;Fine with me. Let&apos;s commit this first. To track the scripts testing I&apos;ve created &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6172&quot; title=&quot;bin/hadoop version not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6172&quot;&gt;&lt;del&gt;HADOOP-6172&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12737725" author="szetszwo" created="Fri, 31 Jul 2009 21:39:50 +0000"  >&lt;p&gt;Tested manually as shown below:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bash-3.2$ ./bin/hadoop version
Hadoop Unknown
Subversion Unknown -r Unknown
Compiled by Unknown on Unknown
From source with checksum Unknown

# apply patch and recompile
bash-3.2$ patch -p0 -i ../hadoop-6172-20090731.patch 
...

bash-3.2$ ./bin/hadoop version
Hadoop 0.21.0-dev
Subversion https://svn.apache.org/repos/asf/hadoop/common/trunk -r 798247
Compiled by tsz on Fri Jul 31 14:40:51 PDT 2009
From source with checksum 4cec386d7ec492be92e14fc12a5a50a4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have committed this.  Thanks, Hong!&lt;/p&gt;</comment>
                            <comment id="12737864" author="hudson" created="Sat, 1 Aug 2009 11:09:18 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #41 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/41/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/41/&lt;/a&gt;)&lt;br/&gt;
    . Fix jar file names in hadoop-config.sh and include ${build.src} as a part of the source list in build.xml.  Contributed by Hong Tang&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12431938">HADOOP-6174</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415103" name="hadoop-6172-20090731.patch" size="799" author="hong.tang" created="Fri, 31 Jul 2009 07:40:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>77797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0i1nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>103363</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>