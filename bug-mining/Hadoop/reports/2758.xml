<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:56:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-17723] [build] fix the Dockerfile for ARM</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-17723</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Running the create-release script for Hadoop 3.3.1 on an ARM machine, docker image fails to build:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    aarch64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -Iast27/Include -I/usr/include/python3.6m -c ast27/Parser/acceler.c -o build/temp.linux-aarch64-3.6/ast27/Parser/acceler.o                                                                                                            In file included from ast27/Parser/acceler.c:13:0:                                                                                ast27/Parser/../Include/pgenheaders.h:8:10: fatal error: Python.h: No such file or directory                                       #include &quot;Python.h&quot;                                                                                                                        ^~~~~~~~~~                                                                                                              compilation terminated.                                                                                                           error: command &apos;aarch64-linux-gnu-gcc&apos; failed with exit status 1


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The missing Python3.h requires python3-dev package: &lt;a href=&quot;https://stackoverflow.com/questions/21530577/fatal-error-python-h-no-such-file-or-directory&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/21530577/fatal-error-python-h-no-such-file-or-directory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The PhantomJS binary was built for Xenial, doesn&apos;t run after the Dockerfile migrated to Bionic/Focal. Fortunately Bionic/Focal has official PhantomJS packages.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13379711">HADOOP-17723</key>
            <summary>[build] fix the Dockerfile for ARM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="weichiu">Wei-Chiu Chuang</assignee>
                                    <reporter username="weichiu">Wei-Chiu Chuang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 21 May 2021 09:12:15 +0000</created>
                <updated>Thu, 5 Jun 2025 14:02:39 +0000</updated>
                            <resolved>Tue, 1 Jun 2021 01:58:06 +0000</resolved>
                                    <version>3.3.1</version>
                    <version>3.4.0</version>
                                    <fixVersion>3.3.1</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="12000">3h 20m</timespent>
                                <comments>
                            <comment id="17452329" author="smeng" created="Thu, 2 Dec 2021 10:55:24 +0000"  >&lt;p&gt;Hmm. This patch doesn&apos;t fix the &quot;header not found&quot; (&lt;tt&gt;Python.h: No such file&lt;/tt&gt;) issue for me. It is possible that a previous version of &lt;tt&gt;python2.7&lt;/tt&gt; package for &lt;tt&gt;ubuntu:bionic&lt;/tt&gt; contains the header but now it is gone.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;docker build -t apache/hadoop:3 -f Dockerfile_aarch64 .&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#13 9.705     In file included from ast27/Parser/acceler.c:13:0:
#13 9.705     ast27/Parser/../Include/pgenheaders.h:8:10: fatal error: Python.h: No such file or directory
#13 9.705      #include &lt;span class=&quot;code-quote&quot;&gt;&quot;Python.h&quot;&lt;/span&gt;
#13 9.705               ^~~~~~~~~~
#13 9.705     compilation terminated.
#13 9.705     error: command &lt;span class=&quot;code-quote&quot;&gt;&apos;aarch64-linux-gnu-gcc&apos;&lt;/span&gt; failed with exit status 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am able to work around the issue by installing the &lt;tt&gt;python3-dev&lt;/tt&gt; package (which should have the Python.h header file):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Fix&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
diff --git a/dev-support/docker/Dockerfile_aarch64 b/dev-support/docker/Dockerfile_aarch64
index 46818a6e234..63de24146a4 100644
--- a/dev-support/docker/Dockerfile_aarch64
+++ b/dev-support/docker/Dockerfile_aarch64
@@ -74,6 +74,7 @@ RUN apt-get -q update \
         pkg-config \
         python2.7 \
         python3 \
+        python3-dev \
         python3-pip \
         python3-pkg-resources \
         python3-setuptools \
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not sure why &lt;tt&gt;python3-dev&lt;/tt&gt; is mentioned in the jira description but somehow omitted in the PR?&lt;/p&gt;

&lt;p&gt;With the diff above, &lt;tt&gt;cd dev-support/docker/ &amp;amp;&amp;amp; docker build -t apache/hadoop:3 -f Dockerfile_aarch64 .&lt;/tt&gt; works for me. Same deal for branch-3.3.2 (need to add python3-dev). trunk (3.4.0) works without any changes.&lt;/p&gt;</comment>
                            <comment id="17453765" author="jojochuang" created="Mon, 6 Dec 2021 03:27:54 +0000"  >&lt;p&gt;can you post a PR?&lt;br/&gt;
i think the problem is intermittent for me.&lt;/p&gt;</comment>
                            <comment id="17454198" author="smeng" created="Mon, 6 Dec 2021 19:11:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=weichiu&quot; class=&quot;user-hover&quot; rel=&quot;weichiu&quot;&gt;weichiu&lt;/a&gt; Yup, will post the one-line change for branch-3.3 later.&lt;/p&gt;</comment>
                            <comment id="17459557" author="smeng" created="Tue, 14 Dec 2021 23:04:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=weichiu&quot; class=&quot;user-hover&quot; rel=&quot;weichiu&quot;&gt;weichiu&lt;/a&gt; Posted &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-18048&quot; title=&quot;[branch-3.3] Dockerfile_aarch64 build fails with fatal error: Python.h: No such file or directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-18048&quot;&gt;&lt;del&gt;HADOOP-18048&lt;/del&gt;&lt;/a&gt;. The plan is to merge to branch-3.3 first then backport it to branch-3.3.2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13588186">YARN-11712</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r8z4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>