<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:34:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6947] Kerberos relogin should set refreshKrb5Config to true</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6947</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;In working on securing a daemon that uses two different principals from different threads, I found that I wasn&apos;t able to login from a second keytab after I&apos;d logged in from the first. This is because we don&apos;t set the refreshKrb5Config in the Configuration for the Krb5LoginModule - hence it won&apos;t switch over to the correct keytab file if it&apos;s different than the first.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473648">HADOOP-6947</key>
            <summary>Kerberos relogin should set refreshKrb5Config to true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tlipcon">Todd Lipcon</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Sep 2010 04:42:18 +0000</created>
                <updated>Fri, 20 Jun 2014 10:15:28 +0000</updated>
                            <resolved>Tue, 26 Oct 2010 17:06:08 +0000</resolved>
                                    <version>1.0.0</version>
                    <version>0.22.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                    <fixVersion>0.22.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="12907517" author="tlipcon" created="Thu, 9 Sep 2010 05:01:55 +0000"  >&lt;p&gt;There is no automatic test capability for keytab logins, so I wrote a manual test that can be run in a kerberized environment. The test takes as arguments the paths and principals for two separate keytabs and tries to login as each in turn and verify the resulting UGI.&lt;/p&gt;

&lt;p&gt;Without the refreshKrb5Config option, it fails with this error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[todd@minotaur01 hadoop]$ HADOOP_CLASSPATH=build/test/classes/ ./bin/hadoop org.apache.hadoop.security.ManualTestKeytabLogins hbase/rs@MINOTAUR.CLOUDERA.COM ~/haus-cluster/hbase-minotaur-security/rs.keytab  hbase/master@MINOTAUR.CLOUDERA.COM ~/haus-cluster/hbase-minotaur-security/master.keytab 
UGI 1 = hbase/rs@MINOTAUR.CLOUDERA.COM
Exception in thread &quot;main&quot; java.io.IOException: Login failure for hbase/master@MINOTAUR.CLOUDERA.COM from keytab /home/todd/haus-cluster/hbase-minotaur-security/master.keytab
        at org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytabAndReturnUGI(UserGroupInformation.java:681)
        at org.apache.hadoop.security.ManualTestKeytabLogins.main(ManualTestKeytabLogins.java:49)
Caused by: javax.security.auth.login.LoginException: Unable to obtain password from user

        at com.sun.security.auth.module.Krb5LoginModule.promptForPass(Krb5LoginModule.java:789)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With the fix:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[todd@minotaur01 hadoop]$ HADOOP_CLASSPATH=build/test/classes/ ./bin/hadoop org.apache.hadoop.security.ManualTestKeytabLogins hbase/rs@MINOTAUR.CLOUDERA.COM ~/haus-cluster/hbase-minotaur-security/rs.keytab  hbase/master@MINOTAUR.CLOUDERA.COM ~/haus-cluster/hbase-minotaur-security/master.keytab 
UGI 1 = hbase/rs@MINOTAUR.CLOUDERA.COM
UGI 2 = hbase/master@MINOTAUR.CLOUDERA.COM
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12907518" author="tlipcon" created="Thu, 9 Sep 2010 05:02:36 +0000"  >&lt;p&gt;branch 20 fix not for commit, trunk coming in a few moments.&lt;/p&gt;</comment>
                            <comment id="12907519" author="tlipcon" created="Thu, 9 Sep 2010 05:09:04 +0000"  >&lt;p&gt;Same patch for trunk - also ran the manual test on trunk to verify.&lt;/p&gt;</comment>
                            <comment id="12908169" author="kzhang" created="Fri, 10 Sep 2010 19:49:21 +0000"  >&lt;p&gt;+1. We noticed this too. Just haven&apos;t got around to fix it. Thanks.&lt;/p&gt;</comment>
                            <comment id="12909644" author="hadoopqa" created="Wed, 15 Sep 2010 07:55:42 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12454185/hadoop-6947.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12454185/hadoop-6947.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 995285.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 5 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system tests framework.  The patch passed system tests framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/681/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/681/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/681/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/681/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/681/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/681/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/681/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/681/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12923722" author="tlipcon" created="Fri, 22 Oct 2010 00:58:24 +0000"  >&lt;p&gt;Kan, mind committing this? It got +1 from you and Hudson.&lt;/p&gt;</comment>
                            <comment id="12924621" author="kzhang" created="Mon, 25 Oct 2010 16:32:40 +0000"  >&lt;p&gt;Todd, sorry for late reply. I just got back after a long leave. And sorry for not being able to commit it as I&apos;m not a committer yet. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12924804" author="tlipcon" created="Tue, 26 Oct 2010 01:10:19 +0000"  >&lt;p&gt;Ah, I misremembered, I guess we are in the same boat &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Hopefully someone else will pick this up and commit. Thanks Kan!&lt;/p&gt;</comment>
                            <comment id="12925041" author="tomwhite" created="Tue, 26 Oct 2010 17:06:08 +0000"  >&lt;p&gt;I&apos;ve just committed this. Thanks Todd!&lt;/p&gt;</comment>
                            <comment id="12925055" author="hudson" created="Tue, 26 Oct 2010 17:27:54 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #400 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/400/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/400/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6947&quot; title=&quot;Kerberos relogin should set refreshKrb5Config to true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6947&quot;&gt;&lt;del&gt;HADOOP-6947&lt;/del&gt;&lt;/a&gt;.  Kerberos relogin should set refreshKrb5Config to true.  Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="12925328" author="hudson" created="Wed, 27 Oct 2010 11:21:43 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #494 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/494/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/494/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6947&quot; title=&quot;Kerberos relogin should set refreshKrb5Config to true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6947&quot;&gt;&lt;del&gt;HADOOP-6947&lt;/del&gt;&lt;/a&gt;.  Kerberos relogin should set refreshKrb5Config to true.  Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="13290365" author="devaraj" created="Wed, 6 Jun 2012 20:16:57 +0000"  >&lt;p&gt;I am going to commit this to branch-1.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12722748">HADOOP-10730</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12454184" name="hadoop-6947-branch20.txt" size="3507" author="tlipcon" created="Thu, 9 Sep 2010 05:02:36 +0000"/>
                            <attachment id="12454185" name="hadoop-6947.txt" size="3380" author="tlipcon" created="Thu, 9 Sep 2010 05:09:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02pa7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13697</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>