<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:55:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-16150] checksumFS doesn&apos;t wrap concat(): concatenated files don&apos;t have checksums</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-16150</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Followon from &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-16107&quot; title=&quot;FilterFileSystem doesn&amp;#39;t wrap all create() or new builder calls; may skip CRC logic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-16107&quot;&gt;&lt;del&gt;HADOOP-16107&lt;/del&gt;&lt;/a&gt;. FilterFS passes through the concat operation, and checksum FS doesn&apos;t override that call -so files created through concat &lt;b&gt;do not have checksums&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;If people are using a checksummed fs directly with the expectations that they will, that expectation is not being met. &lt;/p&gt;

&lt;p&gt;What to do?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;fail always?&lt;/li&gt;
	&lt;li&gt;fail if checksums are enabled?&lt;/li&gt;
	&lt;li&gt;try and implement the concat operation from raw local up at the checksum level&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;append() just gives up always; doing the same for concat would be the simplest. Again, brings us back to &quot;need a way to see if an FS supports a feature before invocation&quot;, here checksum fs would reject append and concat&lt;/p&gt;</description>
                <environment></environment>
        <key id="13218153">HADOOP-16150</key>
            <summary>checksumFS doesn&apos;t wrap concat(): concatenated files don&apos;t have checksums</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stevel@apache.org">Steve Loughran</assignee>
                                    <reporter username="stevel@apache.org">Steve Loughran</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Feb 2019 19:07:20 +0000</created>
                <updated>Tue, 5 Mar 2019 22:24:24 +0000</updated>
                            <resolved>Tue, 5 Mar 2019 18:37:17 +0000</resolved>
                                    <version>3.2.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                    <component>fs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16778569" author="eyang" created="Tue, 26 Feb 2019 20:50:01 +0000"  >&lt;p&gt;It would be ok for ChecksumFileSystem to fail on concat.  Other implementations extend ChecksumFileSystem must implement their own concat and append logic.  At minimum, check writeChecksum flag to be false, then throw UnsupportedOperationException to be backward compatible.  This ensures that public API doesn&apos;t allow silent corruption to occur unless explicitly set writeChecksum flag which helps to track down callers that maybe affected by this change.&lt;/p&gt;</comment>
                            <comment id="16778696" author="stevel@apache.org" created="Tue, 26 Feb 2019 23:40:46 +0000"  >&lt;p&gt;sound good&lt;/p&gt;

&lt;p&gt;People working on the multipart upload stuff (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehiggs&quot; class=&quot;user-hover&quot; rel=&quot;ehiggs&quot;&gt;ehiggs&lt;/a&gt; need to be aware that for testing, they&apos;ll need to go through the raw local FS or turn checksums off&lt;/p&gt;</comment>
                            <comment id="16779862" author="stevel@apache.org" created="Wed, 27 Feb 2019 23:00:46 +0000"  >&lt;p&gt;Created a github PR. I am exploring how well the new workflow works. First conclusion: we need to make sure the git commit text includes author&lt;/p&gt;</comment>
                            <comment id="16779901" author="eyang" created="Wed, 27 Feb 2019 23:32:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt; Pull request link doesn&apos;t seem to include .patch suffix.  I am not sure if precommit build will pick it up.  &lt;/p&gt;</comment>
                            <comment id="16780422" author="stevel@apache.org" created="Thu, 28 Feb 2019 11:34:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;I am not sure if precommit build will pick it up.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;check it out: yetus is automatically working off PRs right now. We aren&apos;t getting comments in the PR into the JIRA, but once we all get more used to reviewing github PRs that may not matter so much. Biggest limitation there is that the discussion can span &amp;gt;1 PR if different people get involved&lt;/p&gt;</comment>
                            <comment id="16780621" author="stevel@apache.org" created="Thu, 28 Feb 2019 15:23:20 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-15691&quot; title=&quot;Add PathCapabilities to FS and FC to complement StreamCapabilities&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-15691&quot;&gt;&lt;del&gt;HADOOP-15691&lt;/del&gt;&lt;/a&gt;  ChecksumFileSystem declares that it doesn&apos;t support append or concat, so you can check before you use&lt;/p&gt;</comment>
                            <comment id="16780841" author="eyang" created="Thu, 28 Feb 2019 19:06:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt;, in Hadoop wiki &lt;a href=&quot;https://cwiki.apache.org/confluence/display/HADOOP/How+To+Contribute#HowToContribute-CreatingaGitHubpullrequest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;create a github pull request&lt;/a&gt;, it says that precommit job will search the URL that starts with &quot;https://github.com&quot; and ends with &quot;.patch&quot; in the JIRA issue.&lt;/p&gt;

&lt;p&gt;I set this jira to patch available and see if the patch gets tested.&lt;/p&gt;</comment>
                            <comment id="16781144" author="eyang" created="Fri, 1 Mar 2019 00:53:40 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16784759" author="eyang" created="Tue, 5 Mar 2019 18:37:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt; Thank you for the patch.  I committed this to trunk.&lt;/p&gt;</comment>
                            <comment id="16784783" author="hudson" created="Tue, 5 Mar 2019 18:57:21 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #16132 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/16132/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/16132/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-16150&quot; title=&quot;checksumFS doesn&amp;#39;t wrap concat(): concatenated files don&amp;#39;t have checksums&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-16150&quot;&gt;&lt;del&gt;HADOOP-16150&lt;/del&gt;&lt;/a&gt;. Added concat method to ChecksumFS as unsupported (eyang: rev 3c5b7136e25d39a3c29cc2025dc8ae7b347f4db0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ChecksumFileSystem.java&lt;/li&gt;
	&lt;li&gt;(edit) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/contract/localfs/TestLocalFSContractMultipartUploader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16784976" author="stevel@apache.org" created="Tue, 5 Mar 2019 22:22:28 +0000"  >&lt;p&gt;thanks. Sorry, I&apos;d missed the +1; I&apos;d have done the commit myself if I&apos;d noticed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13140509">HDFS-13186</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13215288">HADOOP-16107</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13180785">HADOOP-15691</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13186879">HDFS-13934</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z003u8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>