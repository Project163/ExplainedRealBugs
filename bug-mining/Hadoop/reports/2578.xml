<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:55:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-16110] ~/hadoop-env doesn&apos;t support HADOOP_OPTIONAL_TOOLS</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-16110</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;if you set &lt;tt&gt;HADOOP_OPTIONAL_TOOLS&lt;/tt&gt; in ~.hadoop-env, it doesn&apos;t get picked up because the HADOOP_OPTIONAL_TOOLS expansion takes place in the parse process way before &lt;tt&gt;hadoop_exec_user_hadoopenv&lt;/tt&gt; is invoked.&lt;/p&gt;

&lt;p&gt;Unless I&apos;ve really misunderstood what ~/.hadoop-env is meant to do &quot;let me set hadoop env vars&quot;, I&apos;d have expected that tools env var examining (and so: loading of optional tools) to take place after&lt;/p&gt;


&lt;h1&gt;&lt;a name=&quot;301%3AifyouareherefortheYetus0.11commit%2CseeHADOOP16610&quot;&gt;&lt;/a&gt;301: if you are here for the Yetus 0.11 commit, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-16610&quot; title=&quot;Upgrade to yetus 0.11.1 and use emoji vote on github pre commit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-16610&quot;&gt;&lt;del&gt;HADOOP-16610&lt;/del&gt;&lt;/a&gt;&lt;/h1&gt;</description>
                <environment></environment>
        <key id="13215624">HADOOP-16110</key>
            <summary>~/hadoop-env doesn&apos;t support HADOOP_OPTIONAL_TOOLS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stevel@apache.org">Steve Loughran</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Feb 2019 23:38:36 +0000</created>
                <updated>Mon, 8 Mar 2021 17:22:30 +0000</updated>
                            <resolved>Tue, 26 Feb 2019 23:31:27 +0000</resolved>
                                    <version>3.3.0</version>
                                                    <component>bin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16767699" author="stevel@apache.org" created="Wed, 13 Feb 2019 23:39:17 +0000"  >&lt;p&gt;thoughts &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aw&quot; class=&quot;user-hover&quot; rel=&quot;aw&quot;&gt;aw&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Spent a while trying to track this little quirk down&lt;/p&gt;</comment>
                            <comment id="16767756" author="aw" created="Thu, 14 Feb 2019 01:03:12 +0000"  >&lt;p&gt;HADOOP_OPTIONAL_TOOLS is one of the big exceptions.  It was designed to be a cluster-wide setting.&lt;/p&gt;

&lt;p&gt;The problem is user expectation: a local HADOOP_OPTIONAL_TOOLS setting does not translate (AFAIK) into a remote resource manager being able to renew tokens for a given optional service or those jars being in the classpath on the node manager.  There should probably an error message for settings that don&apos;t work, but that&apos;s fairly hard to implement correctly.&lt;/p&gt;</comment>
                            <comment id="16768534" author="stevel@apache.org" created="Thu, 14 Feb 2019 17:15:56 +0000"  >&lt;p&gt;I see your point, but this isn&apos;t even working for the hadoop fs -ls command&lt;/p&gt;

&lt;p&gt;For apps (e.g spark, Tez) we end up adding the relevant files to the archives stored in HDFS, and in the cluster itself we put things somewhere on the CP that all works on the CLI.&lt;/p&gt;

&lt;p&gt;I&apos;m not worried about token renewal as none of the object stores do token renewal, even the stuff in s3a only does issuing and use in the deployed app. &lt;/p&gt;

&lt;p&gt;Thoughts&lt;/p&gt;

&lt;p&gt;1. I pull the env var setting up earlier&lt;br/&gt;
2. we cache the value of the tools env var, and then, if it has changed, warn people that the change is ignored&lt;/p&gt;

&lt;p&gt;for now, I&apos;ve moved my env var setting into .profile, it just took me a while to work out why things weren&apos;t getting on the CP&lt;/p&gt;
</comment>
                            <comment id="16768612" author="aw" created="Thu, 14 Feb 2019 18:38:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;I see your point, but this isn&apos;t even working for the hadoop fs -ls command&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Correct. It won&apos;t by design. HADOOP_OPTIONAL_TOOLS must be set in hadoop-env.sh.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m not worried about token renewal as none of the object stores do token renewal, even the stuff in s3a only does issuing and use in the deployed app. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Who says that HADOOP_OPTIONAL_TOOLS will only be object stores or even only contain parts that ship with Hadoop?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;1. I pull the env var setting up earlier&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What should be the error message when someone enables, e.g., Spectrum locally so now hadoop fs -ls works but then their job fails because it doesn&apos;t work remotely?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;2. we cache the value of the tools env var, and then, if it has changed, warn people that the change is ignored&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is probably the best bet.&lt;/p&gt;</comment>
                            <comment id="16977290" author="hudson" created="Tue, 19 Nov 2019 09:17:58 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #17664 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/17664/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/17664/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-16110&quot; title=&quot;~/hadoop-env doesn&amp;#39;t support HADOOP_OPTIONAL_TOOLS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-16110&quot;&gt;&lt;del&gt;HADOOP-16110&lt;/del&gt;&lt;/a&gt; Upgrade to yetus 0.11.1 and use emoji vote on github pre (ayushsaxena: rev 3cecb2a46974d446a91435ac49c70742e3cbb6bd)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) Jenkinsfile&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0yo8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>