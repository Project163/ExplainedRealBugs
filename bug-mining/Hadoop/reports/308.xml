<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:34:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-7353] Cleanup FsShell and prevent masking of RTE stacktraces</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-7353</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;&lt;tt&gt;FsShell&lt;/tt&gt;&apos;s top level exception handler catches and displays exceptions.  Unfortunately it displays only the first line of an exception, which means an unexpected &lt;tt&gt;RuntimeExceptions&lt;/tt&gt; like &lt;tt&gt;NullPointerException&lt;/tt&gt; only display &quot;&lt;tt&gt;cmd: NullPointerException&lt;/tt&gt;&quot;.  This user has no context to understand and/or accurately report the issue.&lt;/p&gt;

&lt;p&gt;Found due to bugs such as &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7327&quot; title=&quot;FileSystem.listStatus() throws NullPointerException instead of IOException upon access permission failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7327&quot;&gt;&lt;del&gt;HADOOP-7327&lt;/del&gt;&lt;/a&gt;&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12509097">HADOOP-7353</key>
            <summary>Cleanup FsShell and prevent masking of RTE stacktraces</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daryn">Daryn Sharp</assignee>
                                    <reporter username="daryn">Daryn Sharp</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jun 2011 15:03:37 +0000</created>
                <updated>Tue, 15 Nov 2011 00:50:08 +0000</updated>
                            <resolved>Mon, 6 Jun 2011 20:54:12 +0000</resolved>
                                    <version>0.23.0</version>
                                    <fixVersion>0.23.0</fixVersion>
                                    <component>fs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13043881" author="daryn" created="Fri, 3 Jun 2011 17:16:01 +0000"  >&lt;p&gt;Cleanup exception handling in &lt;tt&gt;FsShell.run()&lt;/tt&gt; method to print the stack trace of unexpected exceptions such as NPEs.&lt;/p&gt;

&lt;p&gt;Converted -help &amp;amp; -usage into &lt;tt&gt;FsCommand&lt;/tt&gt; subclasses to greatly simplify the aforementioned exception handling block.  All conditional chains are now gone!  Everything is dynamic.&lt;/p&gt;

&lt;p&gt;A few trivial changes to &lt;tt&gt;Command&lt;/tt&gt; &amp;amp; &lt;tt&gt;CommandFactory&lt;/tt&gt; to support nested classes needed for -help/-usage to access the &lt;tt&gt;CommandFactory&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Break shell object instantiation, and population of commandFactory, into separate methods so DFSAdmin (already a subclass) can eventually take advantage of the modularity.&lt;/p&gt;</comment>
                            <comment id="13043894" author="hadoopqa" created="Fri, 3 Jun 2011 17:33:09 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12481372/HADOOP-7353.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12481372/HADOOP-7353.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1130833.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/569//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/569//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/569//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/569//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/569//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/569//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13043896" author="daryn" created="Fri, 3 Jun 2011 17:33:53 +0000"  >&lt;p&gt;I also removed the slew of pre-existing warnings in &lt;tt&gt;FsShell&lt;/tt&gt;...&lt;/p&gt;</comment>
                            <comment id="13044740" author="atm" created="Mon, 6 Jun 2011 08:04:46 +0000"  >&lt;p&gt;Looks pretty good, Daryn. A few small nits:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;There&apos;s no need to expressly initialize the instance variables in the &lt;tt&gt;FsShell} ctor to {{null&lt;/tt&gt;. Java will do that automatically.&lt;/li&gt;
	&lt;li&gt;&quot;The follow methods are syntactic sugar.&quot; - They&apos;re not really &quot;&lt;em&gt;syntactic&lt;/em&gt;&quot; sugar, as much as they are just helpers.&lt;/li&gt;
	&lt;li&gt;&quot;if (instance == null) throw new UnknownCommandException(cmd);&quot; - coding guidelines say to put always use braces on &lt;tt&gt;if&lt;/tt&gt; statements, and always put the body on a new line.&lt;/li&gt;
	&lt;li&gt;There seems to be an inconsistency with printing to stdout vs. stderr, or at least I can&apos;t tell why you chose to use one in some places, and the other in other places.&lt;/li&gt;
	&lt;li&gt;&quot;// historical abstract method in Command &quot; - move this comment above the method.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13044914" author="daryn" created="Mon, 6 Jun 2011 15:31:39 +0000"  >&lt;p&gt;Thanks Aaron!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There&apos;s no need to expressly initialize the instance variables in the &lt;tt&gt;FsShell&lt;/tt&gt; ctor to &lt;tt&gt;null&lt;/tt&gt;. Java will do that automatically.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sure, I removed the initialization.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&quot;The follow methods are syntactic sugar.&quot; - They&apos;re not really &quot;syntactic&quot; sugar, as much as they are just helpers.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Changed.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&quot;if (instance == null) throw new UnknownCommandException(cmd);&quot; - coding guidelines say to put always use braces on if statements, and always put the body on a new line.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Changed.  I found a few more, so I changed them too.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There seems to be an inconsistency with printing to stdout vs. stderr, or at least I can&apos;t tell why you chose to use one in some places, and the other in other places.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The -help/-usage commands will print to stdout.  The usage goes to stderr when no command is given, or because of an illegal argument.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&quot;// historical abstract method in Command &quot; - move this comment above the method.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Moved.&lt;/p&gt;

&lt;p&gt;Thanks again!&lt;/p&gt;</comment>
                            <comment id="13044923" author="hadoopqa" created="Mon, 6 Jun 2011 15:54:01 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12481578/HADOOP-7353-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12481578/HADOOP-7353-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1132511.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/581//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/581//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/581//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/581//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/581//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/PreCommit-HADOOP-Build/581//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13045068" author="atm" created="Mon, 6 Jun 2011 20:22:19 +0000"  >&lt;p&gt;+1, latest patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="13045091" author="tlipcon" created="Mon, 6 Jun 2011 20:54:12 +0000"  >&lt;p&gt;Committed to trunk based on atm&apos;s +1 and a quick sanity check. Thanks Daryn/Aaron.&lt;/p&gt;</comment>
                            <comment id="13045119" author="hudson" created="Mon, 6 Jun 2011 21:14:46 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #643 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Hadoop-Common-trunk-Commit/643/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/Hadoop-Common-trunk-Commit/643/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7353&quot; title=&quot;Cleanup FsShell and prevent masking of RTE stacktraces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7353&quot;&gt;&lt;del&gt;HADOOP-7353&lt;/del&gt;&lt;/a&gt;. Cleanup FsShell and prevent masking of RTE stack traces. Contributed by Daryn Sharp.&lt;/p&gt;

&lt;p&gt;todd : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1132764&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1132764&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/Count.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/FsCommand.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/CommandFactory.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/test/core/org/apache/hadoop/cli/testConf.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/Display.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/FsShell.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13045367" author="hudson" created="Tue, 7 Jun 2011 11:14:33 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #712 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk/712/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk/712/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7353&quot; title=&quot;Cleanup FsShell and prevent masking of RTE stacktraces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7353&quot;&gt;&lt;del&gt;HADOOP-7353&lt;/del&gt;&lt;/a&gt;. Cleanup FsShell and prevent masking of RTE stack traces. Contributed by Daryn Sharp.&lt;/p&gt;

&lt;p&gt;todd : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1132764&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1132764&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/Count.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/FsCommand.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/CommandFactory.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/test/core/org/apache/hadoop/cli/testConf.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/shell/Display.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/src/java/org/apache/hadoop/fs/FsShell.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12500935">HADOOP-7176</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12508150">HADOOP-7327</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12481578" name="HADOOP-7353-2.patch" size="26640" author="daryn" created="Mon, 6 Jun 2011 15:31:39 +0000"/>
                            <attachment id="12481372" name="HADOOP-7353.patch" size="26476" author="daryn" created="Fri, 3 Jun 2011 17:16:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>71833</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09ju7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>53647</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>