<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:40:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-8031] Configuration class fails to find embedded .jar resources; should use URL.openStream()</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-8031</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;While running a hadoop client within RHQ (monitoring software) using its classloader, I see this:&lt;/p&gt;

&lt;p&gt;2012-02-07 09:15:25,313 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;ResourceContainer.invoker.daemon-2&amp;#93;&lt;/span&gt; (org.apache.hadoop.conf.Configuration)- parsing jar:&lt;a href=&quot;file:/usr/local/rhq-agent/data/tmp/rhq-hadoop-plugin-4.3.0-SNAPSHOT.jar6856622641102893436.classloader/hadoop-core-0.20.2+737+1.jar7204287718482036191.tmp!/core-default.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/usr/local/rhq-agent/data/tmp/rhq-hadoop-plugin-4.3.0-SNAPSHOT.jar6856622641102893436.classloader/hadoop-core-0.20.2+737+1.jar7204287718482036191.tmp!/core-default.xml&lt;/a&gt;&lt;br/&gt;
2012-02-07 09:15:25,318 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;InventoryManager.discovery-1&amp;#93;&lt;/span&gt; (rhq.core.pc.inventory.InventoryManager)- Failed to start component for Resource&lt;span class=&quot;error&quot;&gt;&amp;#91;id=16290, type=NameNode, key=NameNode:/usr/lib/hadoop-0.20, name=NameNode, parent=vg61l01ad-hadoop002.apple.com&amp;#93;&lt;/span&gt; from synchronized merge.&lt;br/&gt;
org.rhq.core.clientapi.agent.PluginContainerException: Failed to start component for resource Resource&lt;span class=&quot;error&quot;&gt;&amp;#91;id=16290, type=NameNode, key=NameNode:/usr/lib/hadoop-0.20, name=NameNode, parent=vg61l01ad-hadoop002.apple.com&amp;#93;&lt;/span&gt;.&lt;br/&gt;
Caused by: java.lang.RuntimeException: core-site.xml not found&lt;br/&gt;
	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1308)&lt;br/&gt;
	at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1228)&lt;br/&gt;
	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1169)&lt;br/&gt;
	at org.apache.hadoop.conf.Configuration.set(Configuration.java:438)&lt;/p&gt;

&lt;p&gt;This is because the URL&lt;/p&gt;

&lt;p&gt;jar:&lt;a href=&quot;file:/usr/local/rhq-agent/data/tmp/rhq-hadoop-plugin-4.3.0-SNAPSHOT.jar6856622641102893436.classloader/hadoop-core-0.20.2+737+1.jar7204287718482036191.tmp!/core-default.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/usr/local/rhq-agent/data/tmp/rhq-hadoop-plugin-4.3.0-SNAPSHOT.jar6856622641102893436.classloader/hadoop-core-0.20.2+737+1.jar7204287718482036191.tmp!/core-default.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;cannot be found by DocumentBuilder (doesn&apos;t understand it). (Note: the logs are for an old version of Configuration class, but the new version has the same code.)&lt;/p&gt;

&lt;p&gt;The solution is to obtain the resource stream directly from the URL object itself.&lt;/p&gt;

&lt;p&gt;That is to say:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;         URL url = getResource((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)name);
-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (url != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
-          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!quiet) {
-            LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;parsing &quot;&lt;/span&gt; + url);
-          }
-          doc = builder.parse(url.toString());
-        }
+        doc = builder.parse(url.openStream());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note: I have a full patch pending approval at Apple for this change, including some cleanup.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541687">HADOOP-8031</key>
            <summary>Configuration class fails to find embedded .jar resources; should use URL.openStream()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="genman">Elias Ross</assignee>
                                    <reporter username="genman">Elias Ross</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2012 20:22:24 +0000</created>
                <updated>Thu, 11 Oct 2012 17:45:09 +0000</updated>
                            <resolved>Thu, 30 Aug 2012 20:16:47 +0000</resolved>
                                    <version>2.0.0-alpha</version>
                                    <fixVersion>2.0.2-alpha</fixVersion>
                                    <component>conf</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="13223677" author="genman" created="Tue, 6 Mar 2012 21:35:37 +0000"  >&lt;p&gt;Simple patch&lt;/p&gt;</comment>
                            <comment id="13283874" author="eli2" created="Sat, 26 May 2012 01:52:58 +0000"  >&lt;p&gt;Thanks for contributing Elias. Can you update TestConfiguration with a case that will fail w/o your patch?&lt;/p&gt;

&lt;p&gt;I&apos;ve rebased your patch on trunk.&lt;/p&gt;</comment>
                            <comment id="13283875" author="eli2" created="Sat, 26 May 2012 01:53:33 +0000"  >&lt;p&gt;Patch attached.&lt;/p&gt;</comment>
                            <comment id="13283897" author="genman" created="Sat, 26 May 2012 03:39:41 +0000"  >&lt;p&gt;Eli,&lt;/p&gt;

&lt;p&gt;Thanks for your response. I would like to reproduce the problem but I&apos;d have to somehow embed the .xml file inside a .jar and adjust the test classpath to match. I&apos;d likely have to isolate the test from the rest of the existing classpath as well. Maybe you could guide me through this?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13440122" author="ahmed.radwan" created="Thu, 23 Aug 2012 08:19:17 +0000"  >&lt;p&gt;Thanks Elias, &lt;/p&gt;

&lt;p&gt;I have noticed that the patch no longer applies due to the recent changes to Configuration.java. I have made the required changes so it can apply cleanly on trunk. &lt;/p&gt;

&lt;p&gt;Also changed:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+        doc = builder.parse((InputStream)name);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+        doc = parse(builder, (InputStream) resource);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to insure the InputStream will be closed.&lt;/p&gt;

&lt;p&gt;Regarding testing, I am not sure if there is an easy way to reproduce this issue in a unit test.&lt;/p&gt;</comment>
                            <comment id="13440169" author="hadoopqa" created="Thu, 23 Aug 2012 09:17:53 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542098/HADOOP-8031.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542098/HADOOP-8031.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/1350//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/1350//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/1350//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/1350//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13440761" author="tucu00" created="Thu, 23 Aug 2012 23:22:01 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13440768" author="tucu00" created="Thu, 23 Aug 2012 23:30:10 +0000"  >&lt;p&gt;Thanks Elias. Committed to trunk and branch-2.&lt;/p&gt;</comment>
                            <comment id="13440794" author="hudson" created="Thu, 23 Aug 2012 23:55:53 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #2632 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2632/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2632/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt;. Configuration class fails to find embedded .jar resources; should use URL.openStream() (genman via tucu) (Revision 1376772)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13440803" author="hudson" created="Thu, 23 Aug 2012 23:59:09 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #2696 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2696/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2696/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt;. Configuration class fails to find embedded .jar resources; should use URL.openStream() (genman via tucu) (Revision 1376772)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13440849" author="hudson" created="Fri, 24 Aug 2012 01:21:19 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #2660 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2660/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2660/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt;. Configuration class fails to find embedded .jar resources; should use URL.openStream() (genman via tucu) (Revision 1376772)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13441116" author="hudson" created="Fri, 24 Aug 2012 12:56:38 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1144 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1144/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1144/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt;. Configuration class fails to find embedded .jar resources; should use URL.openStream() (genman via tucu) (Revision 1376772)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13441198" author="hudson" created="Fri, 24 Aug 2012 14:31:11 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1175 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1175/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1175/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt;. Configuration class fails to find embedded .jar resources; should use URL.openStream() (genman via tucu) (Revision 1376772)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1376772&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13444582" author="tlipcon" created="Thu, 30 Aug 2012 01:00:00 +0000"  >&lt;p&gt;Hey Tucu. I think this commit broke the way in which relative xincludes are handled in Configuration. I have some development confs which use xinclude with non-absolute paths, and it used to successfully pick up the included files from my conf directory. Now, it seems to be looking in the current working directory instead.&lt;/p&gt;

&lt;p&gt;Is it possible to fix the code so that the relative paths are resolved the same as before? I think xinclude is relatively common for deployments.&lt;/p&gt;</comment>
                            <comment id="13444590" author="tlipcon" created="Thu, 30 Aug 2012 01:13:20 +0000"  >&lt;p&gt;I confirmed that reverting this patch locally restored the old behavior.&lt;/p&gt;

&lt;p&gt;If we can&apos;t maintain the old behavior, we should at least mark this as an incompatible change. But I bet it&apos;s doable to both fix it and have relative xincludes.&lt;/p&gt;</comment>
                            <comment id="13444600" author="ahmed.radwan" created="Thu, 30 Aug 2012 01:37:01 +0000"  >&lt;p&gt;Hi Todd, It is weird that this patch caused this behavior change. The patch didn&apos;t modify the builder or the docBuilderFactory, and it is still  docBuilderFactory.setXIncludeAware(true). In essence, the patch is basically using DocumentBuilder#parse(InputStream uri.openStream()) instead of DocumentBuilder#parse(String uri.toString()). Seems there is a change in implementation of both parse methods, which seems weird.&lt;/p&gt;</comment>
                            <comment id="13444602" author="tlipcon" created="Thu, 30 Aug 2012 01:43:27 +0000"  >&lt;p&gt;Yea, I don&apos;t know much about the underlying API, but it definitely changed the behavior. It&apos;s still trying to do the xinclude, it&apos;s just looking in cwd instead of my conf dir.&lt;/p&gt;</comment>
                            <comment id="13444657" author="ahmed.radwan" created="Thu, 30 Aug 2012 04:08:56 +0000"  >&lt;p&gt;I looked into the implementation of javax.xml.parsers.DocumentBuilder and org.xml.sax.InputSource and there is a difference when the DocumentBuilder parse(String) method is used versus parse(InputStream). Basically we need to use parse(InputStream is, String systemId) which provides a base for resolving relative URIs. Here is a new patch that fixes this issue. It needs to be applied on top of the previously committed patch. I am not sure if we need to create a new ticket since this one is already committed.&lt;/p&gt;</comment>
                            <comment id="13445175" author="eli" created="Thu, 30 Aug 2012 18:35:51 +0000"  >&lt;p&gt;I&apos;d either file a new jira explaining the bug with a new patch with fix/test, or revert this patch and post a new one that includes the fix.&lt;/p&gt;</comment>
                            <comment id="13445199" author="ahmed.radwan" created="Thu, 30 Aug 2012 18:59:37 +0000"  >&lt;p&gt;Thanks Eli! I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8749&quot; title=&quot;HADOOP-8031 changed the way in which relative xincludes are handled in Configuration.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8749&quot;&gt;&lt;del&gt;HADOOP-8749&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13445265" author="tlipcon" created="Thu, 30 Aug 2012 20:16:47 +0000"  >&lt;p&gt;Re-resolving this since Ahmed is addressing my issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8749&quot; title=&quot;HADOOP-8031 changed the way in which relative xincludes are handled in Configuration.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8749&quot;&gt;&lt;del&gt;HADOOP-8749&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13449897" author="hudson" created="Thu, 6 Sep 2012 18:24:55 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #2758 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2758/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2758/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8749&quot; title=&quot;HADOOP-8031 changed the way in which relative xincludes are handled in Configuration.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8749&quot;&gt;&lt;del&gt;HADOOP-8749&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt; changed the way in which relative xincludes are handled in Configuration. (ahmed via tucu) (Revision 1381703)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/conf/TestConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13449902" author="hudson" created="Thu, 6 Sep 2012 18:28:06 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #2695 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2695/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2695/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8749&quot; title=&quot;HADOOP-8031 changed the way in which relative xincludes are handled in Configuration.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8749&quot;&gt;&lt;del&gt;HADOOP-8749&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt; changed the way in which relative xincludes are handled in Configuration. (ahmed via tucu) (Revision 1381703)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/conf/TestConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13449956" author="hudson" created="Thu, 6 Sep 2012 19:15:41 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #2719 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2719/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2719/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8749&quot; title=&quot;HADOOP-8031 changed the way in which relative xincludes are handled in Configuration.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8749&quot;&gt;&lt;del&gt;HADOOP-8749&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt; changed the way in which relative xincludes are handled in Configuration. (ahmed via tucu) (Revision 1381703)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/conf/TestConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13450587" author="hudson" created="Fri, 7 Sep 2012 13:03:04 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1158 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1158/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1158/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8749&quot; title=&quot;HADOOP-8031 changed the way in which relative xincludes are handled in Configuration.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8749&quot;&gt;&lt;del&gt;HADOOP-8749&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt; changed the way in which relative xincludes are handled in Configuration. (ahmed via tucu) (Revision 1381703)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/conf/TestConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13450633" author="hudson" created="Fri, 7 Sep 2012 14:01:06 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1189 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1189/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1189/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8749&quot; title=&quot;HADOOP-8031 changed the way in which relative xincludes are handled in Configuration.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8749&quot;&gt;&lt;del&gt;HADOOP-8749&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8031&quot; title=&quot;Configuration class fails to find embedded .jar resources; should use URL.openStream()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8031&quot;&gt;&lt;del&gt;HADOOP-8031&lt;/del&gt;&lt;/a&gt; changed the way in which relative xincludes are handled in Configuration. (ahmed via tucu) (Revision 1381703)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tucu : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1381703&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/conf/TestConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12605564">HADOOP-8749</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12517303" name="0001-fix-HADOOP-7982-class-loader.patch" size="2941" author="genman" created="Tue, 6 Mar 2012 21:35:37 +0000"/>
                            <attachment id="12543031" name="HADOOP-8031-part2.patch" size="1997" author="ahmed.radwan" created="Thu, 30 Aug 2012 04:09:15 +0000"/>
                            <attachment id="12542098" name="HADOOP-8031.patch" size="3418" author="ahmed.radwan" created="Thu, 23 Aug 2012 08:19:41 +0000"/>
                            <attachment id="12529840" name="hadoop-8031.txt" size="3191" author="eli2" created="Sat, 26 May 2012 01:53:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226974</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i015sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4709</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>