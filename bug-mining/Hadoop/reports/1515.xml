<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:47:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-11638] OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-11638</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;In OpensslSecureRandom.c you use Linux-specific syscall gettid():&lt;br/&gt;
static unsigned long pthreads_thread_id(void)&lt;br/&gt;
{&lt;br/&gt;
return (unsigned long)syscall(SYS_gettid);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Man page says:&lt;br/&gt;
gettid()  is Linux-specific and should not be used in programs that are&lt;br/&gt;
intended to be portable.&lt;/p&gt;


&lt;p&gt;This breaks hadoop-2.6.0 compilation on FreeBSD (may be on other OSes too).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12777938">HADOOP-11638</key>
            <summary>OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kiranmr">Kiran Kumar M R</assignee>
                                    <reporter username="trtrmitya">Dmitry Sivachenko</reporter>
                        <labels>
                            <label>freebsd</label>
                    </labels>
                <created>Thu, 26 Feb 2015 17:41:05 +0000</created>
                <updated>Fri, 10 Apr 2015 20:04:18 +0000</updated>
                            <resolved>Mon, 16 Mar 2015 21:13:24 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.7.0</fixVersion>
                                    <component>native</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14338797" author="trtrmitya" created="Thu, 26 Feb 2015 17:54:28 +0000"  >&lt;p&gt;Suggested patch.&lt;/p&gt;</comment>
                            <comment id="14340144" author="trtrmitya" created="Fri, 27 Feb 2015 14:00:51 +0000"  >&lt;p&gt;I don&apos;t quite understand the code here: do you really need gettid() here or it can be replaced with pthread_self()?&lt;/p&gt;</comment>
                            <comment id="14343533" author="cmccabe" created="Mon, 2 Mar 2015 18:23:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t quite understand the code here: do you really need gettid() here or it can be replaced with pthread_self()?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;pthread_self&lt;/tt&gt; returns an opaque identifier.  On many platforms, this is not a &lt;tt&gt;long&lt;/tt&gt;.  Since the &lt;tt&gt;pthreads_thread_id&lt;/tt&gt; function requires a &lt;tt&gt;long&lt;/tt&gt;, &lt;tt&gt;pthread_self&lt;/tt&gt; will not do.  The fix is going to have to be platform-specific.  I don&apos;t know what it would be for OpenBSD but maybe someone here does.&lt;/p&gt;</comment>
                            <comment id="14346448" author="kiranmr" created="Wed, 4 Mar 2015 06:02:01 +0000"  >&lt;p&gt;See this method in Wine source code &lt;a href=&quot;https://github.com/wine-mirror/wine/blob/master/dlls/ntdll/server.c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/wine-mirror/wine/blob/master/dlls/ntdll/server.c&lt;/a&gt;&lt;br/&gt;
It has platform specific code to get thread id&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/***********************************************************************
 *           get_unix_tid
 *
 * Retrieve the Unix tid to use on the server side &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the current thread.
 */
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; get_unix_tid(void)
{
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ret = -1;
#ifdef HAVE_PTHREAD_GETTHREADID_NP
    ret = pthread_getthreadid_np();
#elif defined(linux)
    ret = syscall( __NR_gettid );
#elif defined(__sun)
    ret = pthread_self();
#elif defined(__APPLE__)
    ret = mach_thread_self();
    mach_port_deallocate(mach_task_self(), ret);
#elif defined(__NetBSD__)
    ret = _lwp_self();
#elif defined(__FreeBSD__)
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; lwpid;
    thr_self( &amp;amp;lwpid );
    ret = lwpid;
#elif defined(__DragonFly__)
    ret = lwp_gettid();
#endif
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ret;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14346531" author="kiranmr" created="Wed, 4 Mar 2015 07:29:35 +0000"  >&lt;p&gt;I have attached a patch. Currently included only Linux and FreeBSD platform specific code.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; pthreads_thread_id(void)
{
  unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; thread_id = 0;
#&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; defined(__linux__)
  thread_id = (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)syscall(SYS_gettid);
#elif defined(__FreeBSD__)
  thread_id = (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)pthread_getthreadid_np();
#endif
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; thread_id;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14346703" author="hadoopqa" created="Wed, 4 Mar 2015 10:41:21 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12702400/HADOOP-11638-001.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12702400/HADOOP-11638-001.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 3560180.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5842//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5842//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5842//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5842//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14348010" author="cmccabe" created="Thu, 5 Mar 2015 02:29:50 +0000"  >&lt;p&gt;Can you add an &lt;tt&gt;#else&lt;/tt&gt; clause that has an &lt;tt&gt;#error&lt;/tt&gt;?  +1 after that is done.&lt;/p&gt;

&lt;p&gt;thanks.&lt;/p&gt;</comment>
                            <comment id="14348097" author="kiranmr" created="Thu, 5 Mar 2015 04:08:12 +0000"  >&lt;p&gt;Thanks for review Colin. Added new patch as per comments.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trtrmitya&quot; class=&quot;user-hover&quot; rel=&quot;trtrmitya&quot;&gt;trtrmitya&lt;/a&gt;, you can compile on FreeBSD and confirm if patch is working. &lt;/p&gt;</comment>
                            <comment id="14348152" author="hadoopqa" created="Thu, 5 Mar 2015 05:07:58 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12702696/HADOOP-11638-002.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12702696/HADOOP-11638-002.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 8d88691.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5852//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5852//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5852//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5852//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14348741" author="trtrmitya" created="Thu, 5 Mar 2015 13:37:36 +0000"  >&lt;p&gt;Why not to include the whole patch from wine you provided?&lt;br/&gt;
There are efforts on porting hadoop to Solaris at least, which would automatically benefit from this.&lt;/p&gt;</comment>
                            <comment id="14348868" author="aw" created="Thu, 5 Mar 2015 15:26:09 +0000"  >&lt;p&gt;I really really hope someone checked the license on that code before they contaminated all of us.&lt;/p&gt;</comment>
                            <comment id="14349257" author="cmccabe" created="Thu, 5 Mar 2015 18:54:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;Dmitry asked: Why not to include the whole patch from wine you provided? There are efforts on porting hadoop to Solaris at least, which would automatically benefit from this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We cannot use code from Wine because Wine is under some flavor of the GPL.  This is class X license according to Apache.  (See &lt;a href=&quot;http://www.apache.org/legal/resolved.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/legal/resolved.html&lt;/a&gt; )&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Allen said: I really really hope someone checked the license on that code before they contaminated all of us.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This patch isn&apos;t a copy-paste of the code from Wine.  You can see that the Wine code uses &lt;tt&gt;thr_self&lt;/tt&gt;, whereas this code uses &lt;tt&gt;pthread_getthreadid_np&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I am +1 on 002.  Will commit in a few hours if there&apos;s no more comments.  Thanks guys&lt;/p&gt;</comment>
                            <comment id="14349271" author="kiranmr" created="Thu, 5 Mar 2015 18:57:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aw&quot; class=&quot;user-hover&quot; rel=&quot;aw&quot;&gt;aw&lt;/a&gt;, I quoted wine source code for reference. Not to use their code as-is. BTW wine is under LGPL.&lt;br/&gt;
You can find similar approach to get platform specific thread id in lots of other implementations also. I hope there should not be any license issues for the patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=trtrmitya&quot; class=&quot;user-hover&quot; rel=&quot;trtrmitya&quot;&gt;trtrmitya&lt;/a&gt;, In my opinion we should include platform specific code that we can actually compile and test on. Adding Solaris specific code is possible, I have also seen few JIRA related to that. But not sure who can compile and verify on Solaris. Did FreeBSD specific code work for you?&lt;/p&gt;

&lt;p&gt;Let me know if Solaris specific code is needed.&lt;/p&gt;

</comment>
                            <comment id="14349273" author="trtrmitya" created="Thu, 5 Mar 2015 18:57:57 +0000"  >&lt;p&gt;Does it mean we can never use ret = pthread_self(); for Solaris here just because Wine already used that?&lt;/p&gt;</comment>
                            <comment id="14349274" author="trtrmitya" created="Thu, 5 Mar 2015 18:58:47 +0000"  >&lt;p&gt;Yes, that FreeBSD-specific code looks fine for me, thanks!&lt;/p&gt;</comment>
                            <comment id="14349275" author="aw" created="Thu, 5 Mar 2015 18:59:27 +0000"  >&lt;p&gt;For the record, LGPL code is not allowed in ASF code.  &lt;a href=&quot;http://www.apache.org/legal/resolved.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/legal/resolved.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14349290" author="kiranmr" created="Thu, 5 Mar 2015 19:06:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does it mean we can never use ret = pthread_self(); for Solaris here just because Wine already used that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think that&apos;s not the case, we can use. This will be the type of code you will end up to be compatible with multiple platforms even if wine reference was not there.&lt;/p&gt;</comment>
                            <comment id="14349341" author="kiranmr" created="Thu, 5 Mar 2015 19:35:54 +0000"  >&lt;p&gt;Attached 003 patch with Solaris specific code.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;#elif defined(__sun)
  thread_id = (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)pthread_self();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Checked Solaris threading documentation &lt;a href=&quot;http://docs.oracle.com/cd/E19455-01/806-5257/6je9h033p/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/cd/E19455-01/806-5257/6je9h033p/index.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;thr_self&lt;/tt&gt; and &lt;tt&gt;pthread_self&lt;/tt&gt; are same, document says &quot;you can safely mix Solaris threads functions and pthread functions in the same program&quot;&lt;/p&gt;

&lt;p&gt;We can go ahead with  &lt;tt&gt;pthread_self&lt;/tt&gt;. No need to use &lt;tt&gt;thr_self&lt;/tt&gt;, as this needs new include file &lt;tt&gt;#include &amp;lt;thread.h&amp;gt;&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cmccabe&quot; class=&quot;user-hover&quot; rel=&quot;cmccabe&quot;&gt;cmccabe&lt;/a&gt;, If Solaris support is needed, use 003 patch else 002 should be fine.&lt;/p&gt;</comment>
                            <comment id="14349425" author="hadoopqa" created="Thu, 5 Mar 2015 20:26:56 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12702880/HADOOP-11638-003.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12702880/HADOOP-11638-003.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 952640f.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ipc.TestRPCWaitForProxy&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5859//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5859//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5859//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5859//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14349436" author="hadoopqa" created="Thu, 5 Mar 2015 20:37:40 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12702884/HADOOP-11638-003.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12702884/HADOOP-11638-003.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 952640f.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ipc.TestRPCWaitForProxy&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5860//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5860//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/5860//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/5860//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14350803" author="dankm" created="Fri, 6 Mar 2015 19:57:37 +0000"  >&lt;p&gt;Casting the return value of pthread_getthreadid_np may be lossy. FreeBSD uses an unsigned long for thread IDs, but that function casts it to an int. FreeBSD&apos;s pthread_t is a pointer to a structure whose first member is the thread id, so:&lt;/p&gt;

&lt;p&gt;    thread_id = *(unsigned long *)pthread_self();&lt;/p&gt;

&lt;p&gt;may be what is wanted. My concern about this, though, is that it&apos;s relying on undocumented implementation details.&lt;/p&gt;</comment>
                            <comment id="14350862" author="cmccabe" created="Fri, 6 Mar 2015 20:43:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;Casting the return value of pthread_getthreadid_np may be lossy. FreeBSD uses an unsigned long for thread IDs, but that function casts it to an int.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Did you look at the wrong patch?  The function doesn&apos;t cast anything to an int.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; pthreads_thread_id(void)
 {
-  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)syscall(SYS_gettid);
+  unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; thread_id = 0;
+#&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; defined(__linux__)
+  thread_id = (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)syscall(SYS_gettid);
+#elif defined(__FreeBSD__)
+  thread_id = (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)pthread_getthreadid_np();
+#elif defined(__sun)
+  thread_id = (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)pthread_self();
+#&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
+#error &lt;span class=&quot;code-quote&quot;&gt;&quot;Platform not supported&quot;&lt;/span&gt;
+#endif
+  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; thread_id;
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;also, FreeBSD&apos;s pthread_getthreadid_np returns an int, not an unsigned long.  &lt;a href=&quot;http://www.freebsd.org/cgi/man.cgi?query=pthread_getthreadid_np&amp;amp;sektion=3&amp;amp;apropos=0&amp;amp;manpath=FreeBSD%2B10.0-RELEASE&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.freebsd.org/cgi/man.cgi?query=pthread_getthreadid_np&amp;amp;sektion=3&amp;amp;apropos=0&amp;amp;manpath=FreeBSD%2B10.0-RELEASE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;+1 for 003.  Let&apos;s commit this.&lt;/p&gt;</comment>
                            <comment id="14351240" author="dankm" created="Sat, 7 Mar 2015 00:52:03 +0000"  >&lt;p&gt;Sorry, I could have been more clear. pthread_getthreadid_np() on FreeBSD casts the real thread ID into an int and returns it. The thread ID is stored as the first member of the pthread_t structure.&lt;/p&gt;

&lt;p&gt;FreeBSD&apos;s pthread_getthreadid_np function does this:&lt;/p&gt;

&lt;p&gt;struct pthread *curthread;&lt;br/&gt;
curthread = _get_curthread();&lt;br/&gt;
return (TID(curthread));&lt;/p&gt;

&lt;p&gt;Where TID() is this:&lt;/p&gt;

&lt;p&gt;#define TID(thread) ((uint32_t) ((thread)-&amp;gt;tid))&lt;/p&gt;

&lt;p&gt;And the member tid of struct pthread is an unsigned long. That said, the TID macro is used all over FreeBSD&apos;s pthread implementation, so it&apos;s safe to say it will never be bigger than a uint32_t.&lt;/p&gt;
</comment>
                            <comment id="14352637" author="kiranmr" created="Mon, 9 Mar 2015 07:38:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;And the member tid of struct pthread is an unsigned long. That said, the TID macro is used all over FreeBSD&apos;s pthread implementation, so it&apos;s safe to say it will never be bigger than a uint32_t.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes I had checked it, FreeBSD API itself is returning an &lt;tt&gt;int&lt;/tt&gt;. So there should not be any issue.&lt;/p&gt;

&lt;p&gt;I guess current patch-003 is fine. Let me know if any other comments need to be taken care.&lt;/p&gt;</comment>
                            <comment id="14353479" author="cmccabe" created="Mon, 9 Mar 2015 19:56:51 +0000"  >&lt;p&gt;Thanks for that clarification, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dankm&quot; class=&quot;user-hover&quot; rel=&quot;dankm&quot;&gt;dankm&lt;/a&gt;.  That sounds like an internal implementation issue of the &lt;tt&gt;pthread_getthreadid_np&lt;/tt&gt; function on FreeBSD and possibly even a kernel-level detail.  If FreeBSD later supplies an API for getting longer numeric thread IDs than 32-bits, we can think about switching over to it then.  But for now we have to use the OS-provided API that exists.&lt;/p&gt;

&lt;p&gt;Committed to 2.7.  Thanks, all.&lt;/p&gt;</comment>
                            <comment id="14353483" author="trtrmitya" created="Mon, 9 Mar 2015 19:58:38 +0000"  >&lt;p&gt;I asked Jung-uk Kim &amp;lt;jkim@FreeBSD.org&amp;gt;, the author of pthread_getthreadid_np on FreeBSD, and he confirmed that pthread_getthreadid_np() is the correct solution for FreeBSD.&lt;/p&gt;</comment>
                            <comment id="14353493" author="hudson" created="Mon, 9 Mar 2015 20:03:25 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-trunk-Commit #7290 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/7290/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/7290/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe) (cmccabe: rev 3241fc2b17f11e621d8ffb6160caa4b850c278b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14353577" author="cnauroth" created="Mon, 9 Mar 2015 20:50:19 +0000"  >&lt;p&gt;This patch broke native compilation on Mac, because it falls through to the &lt;tt&gt;#error&lt;/tt&gt; case.  Shall we revert?&lt;/p&gt;</comment>
                            <comment id="14353599" author="aw" created="Mon, 9 Mar 2015 21:03:01 +0000"  >&lt;p&gt;Yes.&lt;/p&gt;</comment>
                            <comment id="14353983" author="dankm" created="Tue, 10 Mar 2015 00:39:41 +0000"  >&lt;p&gt;Dimitry: I saw that. He committed a change to FreeBSD clarifying the use of the TID macro as well.&lt;/p&gt;</comment>
                            <comment id="14354755" author="hudson" created="Tue, 10 Mar 2015 11:35:58 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #128 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/128/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/128/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe) (cmccabe: rev 3241fc2b17f11e621d8ffb6160caa4b850c278b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14354767" author="hudson" created="Tue, 10 Mar 2015 11:39:07 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #862 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/862/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/862/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe) (cmccabe: rev 3241fc2b17f11e621d8ffb6160caa4b850c278b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14354985" author="hudson" created="Tue, 10 Mar 2015 14:43:04 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #2060 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2060/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2060/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe) (cmccabe: rev 3241fc2b17f11e621d8ffb6160caa4b850c278b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14355021" author="hudson" created="Tue, 10 Mar 2015 15:04:08 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #119 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/119/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/119/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe) (cmccabe: rev 3241fc2b17f11e621d8ffb6160caa4b850c278b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14355045" author="hudson" created="Tue, 10 Mar 2015 15:19:43 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #128 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/128/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/128/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe) (cmccabe: rev 3241fc2b17f11e621d8ffb6160caa4b850c278b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14355071" author="hudson" created="Tue, 10 Mar 2015 15:36:37 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #2078 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2078/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2078/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe) (cmccabe: rev 3241fc2b17f11e621d8ffb6160caa4b850c278b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14355356" author="cnauroth" created="Tue, 10 Mar 2015 18:12:19 +0000"  >&lt;p&gt;I have reverted this patch from trunk.  I see a comment that it was committed to 2.7, but I didn&apos;t find it there, so I only touched the trunk branch.  If you don&apos;t have access to a Mac and you need someone else to verify another version of the patch on Mac, I&apos;m happy to help.  Thanks, Kiran.&lt;/p&gt;</comment>
                            <comment id="14355396" author="hudson" created="Tue, 10 Mar 2015 18:22:43 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-trunk-Commit #7298 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/7298/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/7298/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe)&quot; (cnauroth: rev 8d5b01e005b2647262861acf522e9b5c6d6f8bba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14355454" author="kiranmr" created="Tue, 10 Mar 2015 18:47:46 +0000"  >&lt;p&gt;Thanks for offering help Chris. I am checking best thread_id API to use on Mac, will submit a patch soon.&lt;/p&gt;</comment>
                            <comment id="14356759" author="hudson" created="Wed, 11 Mar 2015 11:42:57 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #129 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/129/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/129/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe)&quot; (cnauroth: rev 8d5b01e005b2647262861acf522e9b5c6d6f8bba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14356767" author="hudson" created="Wed, 11 Mar 2015 11:45:04 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #863 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/863/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/863/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe)&quot; (cnauroth: rev 8d5b01e005b2647262861acf522e9b5c6d6f8bba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14356944" author="hudson" created="Wed, 11 Mar 2015 14:37:00 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #2061 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2061/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2061/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe)&quot; (cnauroth: rev 8d5b01e005b2647262861acf522e9b5c6d6f8bba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14356964" author="hudson" created="Wed, 11 Mar 2015 14:47:12 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #120 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/120/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/120/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe)&quot; (cnauroth: rev 8d5b01e005b2647262861acf522e9b5c6d6f8bba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14357011" author="hudson" created="Wed, 11 Mar 2015 15:20:59 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #129 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/129/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/129/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe)&quot; (cnauroth: rev 8d5b01e005b2647262861acf522e9b5c6d6f8bba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14357040" author="hudson" created="Wed, 11 Mar 2015 15:37:17 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #2079 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2079/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2079/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux (Kiran Kumar M R via Colin P.  McCabe)&quot; (cnauroth: rev 8d5b01e005b2647262861acf522e9b5c6d6f8bba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14357133" author="kiranmr" created="Wed, 11 Mar 2015 16:29:44 +0000"  >&lt;p&gt;I have added new patch-004 to include Mac OS specific code.&lt;br/&gt;
Mac has &lt;tt&gt;int pthread_threadid_np(pthread_t thread, uint64_t *thread_id)&lt;/tt&gt; method to get thread id &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Its declared in &lt;tt&gt;pthread.h&lt;/tt&gt; Refer &lt;a href=&quot;https://opensource.apple.com/source/libpthread/libpthread-105.1.4/pthread/pthread.h&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://opensource.apple.com/source/libpthread/libpthread-105.1.4/pthread/pthread.h&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Its implementation can be seen at &lt;a href=&quot;https://opensource.apple.com/source/libpthread/libpthread-105.1.4/src/pthread.c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://opensource.apple.com/source/libpthread/libpthread-105.1.4/src/pthread.c&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Its usage can be seen at &lt;a href=&quot;https://opensource.apple.com/source/libpthread/libpthread-105.1.4/src/pthread_rwlock.c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://opensource.apple.com/source/libpthread/libpthread-105.1.4/src/pthread_rwlock.c&lt;/a&gt; as below
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  uint64_t myid;
  (void)pthread_threadid_np(pthread_self(), &amp;amp;myid);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now my patch code is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; pthreads_thread_id(void)
{
  unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; thread_id = 0;
#&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; defined(__linux__)
  thread_id = (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)syscall(SYS_gettid);
#elif defined(__FreeBSD__)
  thread_id = (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)pthread_getthreadid_np();
#elif defined(__sun)
  thread_id = (unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)pthread_self();
#elif defined(__APPLE__ )
  (void)pthread_threadid_np(pthread_self(), &amp;amp;thread_id);
#&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
#error &lt;span class=&quot;code-quote&quot;&gt;&quot;Platform not supported&quot;&lt;/span&gt;
#endif
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; thread_id;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt;, please check if patch-004 works on Mac&lt;/p&gt;</comment>
                            <comment id="14361054" author="cnauroth" created="Fri, 13 Mar 2015 20:42:24 +0000"  >&lt;p&gt;Thanks for the update, Kiran.  I verified the new patch on Mac.  +1 from me.  I&apos;ll wait a bit before committing in case any of the other watchers want to take a look.&lt;/p&gt;</comment>
                            <comment id="14361233" author="cmccabe" created="Fri, 13 Mar 2015 22:45:57 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kirankumarmr&quot; class=&quot;user-hover&quot; rel=&quot;kirankumarmr&quot;&gt;kirankumarmr&lt;/a&gt;.  The new patch looks fine to me, although I&apos;m not familiar with Mac.&lt;/p&gt;

&lt;p&gt;I would slightly prefer doing this in a new JIRA, since this one was already committed (and didn&apos;t mention Apple support in the description).  However, I don&apos;t feel strongly about this... I will leave it up to you guys.&lt;/p&gt;</comment>
                            <comment id="14363956" author="cnauroth" created="Mon, 16 Mar 2015 21:13:24 +0000"  >&lt;p&gt;I committed this to trunk, branch-2 and branch-2.7.  Kiran, thank you for the patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I would slightly prefer doing this in a new JIRA, since this one was already committed (and didn&apos;t mention Apple support in the description).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I had to revert the prior committed patch, because it actually broke compilation for Mac.  That&apos;s why I reopened this issue and asked for a corrected patch.&lt;/p&gt;</comment>
                            <comment id="14363967" author="hudson" created="Mon, 16 Mar 2015 21:18:29 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-trunk-Commit #7337 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/7337/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/7337/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux. Contributed by Kiran Kumar M R. (cnauroth: rev 72cd4e4a4eb2a9f8695d4c67eb55dd2be36c52dc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14364215" author="cmccabe" created="Mon, 16 Mar 2015 23:34:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;I had to revert the prior committed patch, because it actually broke compilation for Mac. That&apos;s why I reopened this issue and asked for a corrected patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m very surprised that it compiled on Mac earlier.  It was using system calls which we believed were Linux-specific.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;288	#elif defined(__APPLE__)
289	  (void)pthread_threadid_np(pthread_self(), &amp;amp;thread_id);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I looked at this and found that &lt;tt&gt;pthread_threadid_np&lt;/tt&gt; on Mac has the type signature: &lt;tt&gt;int pthread_threadid_np(pthread_t thread, __uint64_t *thread_id)&lt;/tt&gt;  This doesn&apos;t match with using an &lt;tt&gt;unsigned long&lt;/tt&gt;.  I&apos;m not sure under what conditions an &lt;tt&gt;unsigned long&lt;/tt&gt; is different than a &lt;tt&gt;uint64_t&lt;/tt&gt; on Mac (on Linux, that would be the case with 32-bit compilation).  So this patch may have a buffer overflow in that case.&lt;/p&gt;

&lt;p&gt;Should we file a follow-on to fix this?  Simplest fix is just using a temporary variable of type &lt;tt&gt;uint64_t&lt;/tt&gt; and copying that into the &lt;tt&gt;unsigned long&lt;/tt&gt;.  It&apos;s not a perfect solution since two threads may get the same ID in 32-bit land ( you can blame openssl&apos;s boneheaded use of a long here instead of a uint64_t) but it&apos;s sure better than a buffer overflow.&lt;/p&gt;</comment>
                            <comment id="14364398" author="cmccabe" created="Tue, 17 Mar 2015 01:46:33 +0000"  >&lt;p&gt;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11787&quot; title=&quot;OpensslSecureRandom.c pthread_threadid_np usage signature is wrong on 32-bit Mac&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11787&quot;&gt;&lt;del&gt;HDFS-7938&lt;/del&gt;&lt;/a&gt; to fix type signature&lt;/p&gt;</comment>
                            <comment id="14364485" author="cnauroth" created="Tue, 17 Mar 2015 03:27:20 +0000"  >&lt;p&gt;Thanks, Colin.  While the previous code compiled on Mac, I&apos;m not sure if anyone knows whether or not it really worked.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  We only use Mac as a deployment environment and never as a real deployment environment (AFAIK), so it&apos;s quite possible that no one noticed a problem.  The revert was based on the fact that the prior patch took us from a working Mac build (but possibly with bugs in this part of the code) to a compilation failure.&lt;/p&gt;

&lt;p&gt;Thanks for filing &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11787&quot; title=&quot;OpensslSecureRandom.c pthread_threadid_np usage signature is wrong on 32-bit Mac&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11787&quot;&gt;&lt;del&gt;HDFS-7938&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14364707" author="kiranmr" created="Tue, 17 Mar 2015 07:28:53 +0000"  >&lt;p&gt;Thanks to Dmitry,  Dan McGregor, Allen, Colin and Chris for reviews and verification of the patch.&lt;/p&gt;</comment>
                            <comment id="14364910" author="hudson" created="Tue, 17 Mar 2015 10:44:09 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #869 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/869/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/869/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux. Contributed by Kiran Kumar M R. (cnauroth: rev 72cd4e4a4eb2a9f8695d4c67eb55dd2be36c52dc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14364992" author="hudson" created="Tue, 17 Mar 2015 11:32:37 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #135 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/135/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/135/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux. Contributed by Kiran Kumar M R. (cnauroth: rev 72cd4e4a4eb2a9f8695d4c67eb55dd2be36c52dc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14365183" author="hudson" created="Tue, 17 Mar 2015 14:32:27 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #126 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/126/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/126/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux. Contributed by Kiran Kumar M R. (cnauroth: rev 72cd4e4a4eb2a9f8695d4c67eb55dd2be36c52dc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14365222" author="hudson" created="Tue, 17 Mar 2015 14:44:37 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #2067 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2067/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/2067/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux. Contributed by Kiran Kumar M R. (cnauroth: rev 72cd4e4a4eb2a9f8695d4c67eb55dd2be36c52dc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14365278" author="hudson" created="Tue, 17 Mar 2015 15:11:32 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #135 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/135/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/135/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux. Contributed by Kiran Kumar M R. (cnauroth: rev 72cd4e4a4eb2a9f8695d4c67eb55dd2be36c52dc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14365329" author="hudson" created="Tue, 17 Mar 2015 15:34:12 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Mapreduce-trunk #2085 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2085/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2085/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11638&quot; title=&quot;OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11638&quot;&gt;&lt;del&gt;HADOOP-11638&lt;/del&gt;&lt;/a&gt;. OpensslSecureRandom.c pthreads_thread_id should support FreeBSD and Solaris in addition to Linux. Contributed by Kiran Kumar M R. (cnauroth: rev 72cd4e4a4eb2a9f8695d4c67eb55dd2be36c52dc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/crypto/random/OpensslSecureRandom.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14368184" author="cmccabe" created="Thu, 19 Mar 2015 00:06:26 +0000"  >&lt;p&gt;Yeah, that makes sense, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt;.  I definitely don&apos;t object to including mac support, just was commenting that I was kind of surprised that it compiled before &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14368191" author="cnauroth" created="Thu, 19 Mar 2015 00:11:04 +0000"  >&lt;p&gt;I just realized there was a significant typo in my last comment.  I meant to say that we only use Mac as a &lt;b&gt;development&lt;/b&gt; environment, not a deployment environment.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12776794">HADOOP-11623</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12782441">HADOOP-11787</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12726047">HADOOP-10796</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12702400" name="HADOOP-11638-001.patch" size="1230" author="kiranmr" created="Wed, 4 Mar 2015 07:27:26 +0000"/>
                            <attachment id="12702696" name="HADOOP-11638-002.patch" size="1270" author="kiranmr" created="Thu, 5 Mar 2015 04:05:57 +0000"/>
                            <attachment id="12702884" name="HADOOP-11638-003.patch" size="1338" author="kiranmr" created="Thu, 5 Mar 2015 19:36:36 +0000"/>
                            <attachment id="12703934" name="HADOOP-11638-004.patch" size="1422" author="kiranmr" created="Wed, 11 Mar 2015 16:28:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i263qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327583">2.7.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>