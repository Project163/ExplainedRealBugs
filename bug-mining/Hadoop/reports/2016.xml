<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:51:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-13699] Configuration does not substitute multiple references to the same var</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-13699</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Config var loop detection was originally introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6871&quot; title=&quot;When the value of a configuration key is set to its unresolved form, it causes the IllegalStateException in Configuration.get() stating that substitution depth is too large.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6871&quot;&gt;&lt;del&gt;HADOOP-6871&lt;/del&gt;&lt;/a&gt;. Due to cycle detection changes in the trunk patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11506&quot; title=&quot;Configuration variable expansion regex expensive for long values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11506&quot;&gt;&lt;del&gt;HADOOP-11506&lt;/del&gt;&lt;/a&gt;, resolution for multiple references to the same variable no longer resolved, e.g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;somekey = &quot;${otherkey} ${otherkey}&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This loop detection business is fragile, expensive, and not in branch-2, so let&apos;s reduce it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13010646">HADOOP-13699</key>
            <summary>Configuration does not substitute multiple references to the same var</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrew.wang">Andrew Wang</assignee>
                                    <reporter username="andrew.wang">Andrew Wang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Oct 2016 23:06:40 +0000</created>
                <updated>Mon, 10 Oct 2016 20:01:36 +0000</updated>
                            <resolved>Mon, 10 Oct 2016 19:19:44 +0000</resolved>
                                    <version>3.0.0-alpha1</version>
                                    <fixVersion>3.0.0-alpha2</fixVersion>
                                    <component>conf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15556549" author="andrew.wang" created="Fri, 7 Oct 2016 23:09:43 +0000"  >&lt;p&gt;Patch attached. This only attempts to catch the simple case of a variable resolving to itself. Support for detecting multiple variable loops is removed.&lt;/p&gt;

&lt;p&gt;Solving this generally is like detecting a loop in a linked list. Since this is performance sensitive code, I think we&apos;d rather not do that.&lt;/p&gt;</comment>
                            <comment id="15556739" author="xiaochen" created="Sat, 8 Oct 2016 00:25:30 +0000"  >&lt;p&gt;Thanks for finding and fixing this Andrew. I&apos;m +1 on the return-fast change, and looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6871&quot; title=&quot;When the value of a configuration key is set to its unresolved form, it causes the IllegalStateException in Configuration.get() stating that substitution depth is too large.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6871&quot;&gt;&lt;del&gt;HADOOP-6871&lt;/del&gt;&lt;/a&gt; it&apos;s fixing a bug that&apos;s not considered in the original implementation. Ideally we should let people from either jira comment, in case they feel differently.&lt;/p&gt;

&lt;p&gt;And man &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6871&quot; title=&quot;When the value of a configuration key is set to its unresolved form, it causes the IllegalStateException in Configuration.get() stating that substitution depth is too large.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6871&quot;&gt;&lt;del&gt;HADOOP-6871&lt;/del&gt;&lt;/a&gt; is 4+ years ago. I hope no one has been waiting for that for the past half-decade. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Mind linking the jira (I didn&apos;t find a &lt;tt&gt;replaces&lt;/tt&gt; option, maybe &lt;tt&gt;supercedes&lt;/tt&gt;?) and comment there, so this is change is more advertised?&lt;/p&gt;</comment>
                            <comment id="15563208" author="andrew.wang" created="Mon, 10 Oct 2016 19:19:44 +0000"  >&lt;p&gt;Committed to trunk, thanks for reviewing Xiao!&lt;/p&gt;</comment>
                            <comment id="15563320" author="hudson" created="Mon, 10 Oct 2016 20:01:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #10579 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/10579/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/10579/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13699&quot; title=&quot;Configuration does not substitute multiple references to the same var&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13699&quot;&gt;&lt;del&gt;HADOOP-13699&lt;/del&gt;&lt;/a&gt;. Configuration does not substitute multiple references to (wang: rev 03060075c53a2cecfbf5f60b6fc77afecf64ace5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java&lt;/li&gt;
	&lt;li&gt;(edit) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/conf/TestConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12769468">HADOOP-11506</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12469861">HADOOP-6871</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12832216" name="HADOOP-13699.001.patch" size="4479" author="andrew.wang" created="Fri, 7 Oct 2016 23:09:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34lsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>This changes the config var cycle detection introduced in 3.0.0-alpha1 by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6871&quot; title=&quot;When the value of a configuration key is set to its unresolved form, it causes the IllegalStateException in Configuration.get() stating that substitution depth is too large.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6871&quot;&gt;&lt;strike&gt;HADOOP-6871&lt;/strike&gt;&lt;/a&gt; such that it detects single-variable but not multi-variable loops. This also fixes resolution of multiple specifications of the same variable in a config value.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12337975">3.0.0-alpha2</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>