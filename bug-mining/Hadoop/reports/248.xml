<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:34:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-7140] IPC Reader threads do not stop when server stops</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-7140</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6713&quot; title=&quot;The RPC server Listener thread is a scalability bottleneck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6713&quot;&gt;&lt;del&gt;HADOOP-6713&lt;/del&gt;&lt;/a&gt;, the new IPC &quot;Reader&quot; threads are not properly stopped when the server shuts down. One repercussion of this is that conditions that are supposed to shut down a daemon no longer work (eg the TT doesn&apos;t shut itself down if it detects an incompatible build version)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12498495">HADOOP-7140</key>
            <summary>IPC Reader threads do not stop when server stops</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tlipcon">Todd Lipcon</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Feb 2011 03:18:37 +0000</created>
                <updated>Fri, 21 Jun 2013 05:03:59 +0000</updated>
                            <resolved>Tue, 15 Feb 2011 07:33:17 +0000</resolved>
                                    <version>0.22.0</version>
                    <version>1-win</version>
                    <version>1.3.0</version>
                                    <fixVersion>0.22.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="12994192" author="hadoopqa" created="Mon, 14 Feb 2011 03:52:45 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12470978/hadoop-7140.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12470978/hadoop-7140.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1070021.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/234//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/234//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/234//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/234//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/234//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/234//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12994193" author="tlipcon" created="Mon, 14 Feb 2011 03:56:05 +0000"  >&lt;p&gt;This patch also fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7132&quot; title=&quot;IPC Reader threads should be named&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7132&quot;&gt;&lt;del&gt;HADOOP-7132&lt;/del&gt;&lt;/a&gt;, since it was simple to fix while I was at it.&lt;/p&gt;</comment>
                            <comment id="12994489" author="tomwhite" created="Mon, 14 Feb 2011 20:56:53 +0000"  >&lt;p&gt;This looks fine, but I wonder if it would be simpler to act on the InterruptedException in Reader (rather than just log it as the code currently does) so the thread exits when the pool is shutdown?&lt;/p&gt;

&lt;p&gt;Minor nit: add messages to the test assertions so that the case of zero running threads can be more easily distinguished for the before and after case.&lt;/p&gt;</comment>
                            <comment id="12994499" author="tlipcon" created="Mon, 14 Feb 2011 21:21:50 +0000"  >&lt;p&gt;New rev of the patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;improves test assertions as suggested by Tom&lt;/li&gt;
	&lt;li&gt;adds a try{}finally{} in the test so as to avoid causing problems if the test fails&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Tom and I discussed his idea about interrupts offline - we decided that using interrupt() is a bit harsh since we don&apos;t want to catch a reader in the middle of a readAndProcess(). Using selector.wakeup is cleaner.&lt;/p&gt;</comment>
                            <comment id="12994507" author="hadoopqa" created="Mon, 14 Feb 2011 21:42:44 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12471020/hadoop-7140.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12471020/hadoop-7140.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1070021.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;    +1 system test framework.  The patch passed system test framework compile.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/235//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/235//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/235//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/235//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/235//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-HADOOP-Build/235//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12994630" author="tomwhite" created="Tue, 15 Feb 2011 02:31:58 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12994676" author="tlipcon" created="Tue, 15 Feb 2011 07:33:17 +0000"  >&lt;p&gt;Committed to trunk and 22, thanks for reviewing, Tom.&lt;/p&gt;</comment>
                            <comment id="12994677" author="hudson" created="Tue, 15 Feb 2011 07:33:38 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #503 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/503/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/503/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7140&quot; title=&quot;IPC Reader threads do not stop when server stops&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7140&quot;&gt;&lt;del&gt;HADOOP-7140&lt;/del&gt;&lt;/a&gt;. IPC Reader threads do not stop when server stops. Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="12994727" author="hudson" created="Tue, 15 Feb 2011 09:43:35 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-22-branch #25 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-22-branch/25/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-22-branch/25/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7140&quot; title=&quot;IPC Reader threads do not stop when server stops&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7140&quot;&gt;&lt;del&gt;HADOOP-7140&lt;/del&gt;&lt;/a&gt;. IPC Reader threads do not stop when server stops. Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="12994756" author="hudson" created="Tue, 15 Feb 2011 11:13:11 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk #607 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/607/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/607/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7140&quot; title=&quot;IPC Reader threads do not stop when server stops&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7140&quot;&gt;&lt;del&gt;HADOOP-7140&lt;/del&gt;&lt;/a&gt;. IPC Reader threads do not stop when server stops. Contributed by Todd Lipcon.&lt;/p&gt;</comment>
                            <comment id="13689709" author="ivanmi" created="Thu, 20 Jun 2013 21:34:02 +0000"  >&lt;p&gt;Looks like we merged &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6713&quot; title=&quot;The RPC server Listener thread is a scalability bottleneck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6713&quot;&gt;&lt;del&gt;HADOOP-6713&lt;/del&gt;&lt;/a&gt; to branch-1 but missed this Jira. I run into an issue where TT didn&apos;t shut itself down because of running IPC reader threads. &lt;/p&gt;

&lt;p&gt;Reopening for backport to branch-1 and branch-1-win.&lt;/p&gt;</comment>
                            <comment id="13689710" author="ivanmi" created="Thu, 20 Jun 2013 21:34:33 +0000"  >&lt;p&gt;Attaching the branch-1 and branch-1-win compatible patches. &lt;/p&gt;</comment>
                            <comment id="13690009" author="cnauroth" created="Fri, 21 Jun 2013 04:18:29 +0000"  >&lt;p&gt;+1 for the backport patches.  I ran &lt;tt&gt;TestRPC&lt;/tt&gt; successfully with the backport.&lt;/p&gt;</comment>
                            <comment id="13690030" author="ivanmi" created="Fri, 21 Jun 2013 04:50:07 +0000"  >&lt;p&gt;Thanks Chris! Will commit to branch-1 shortly.&lt;/p&gt;

&lt;p&gt;Since we&apos;ll be merging branch-1 changes into branch-1-win, I&apos;ll wait for the merge to pick up this change. &lt;/p&gt;</comment>
                            <comment id="13690039" author="ivanmi" created="Fri, 21 Jun 2013 05:03:59 +0000"  >&lt;p&gt;Patch committed to branch-1.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12497890">HADOOP-7132</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12588928" name="HADOOP-7140.branch-1-win.patch" size="4925" author="ivanmi" created="Thu, 20 Jun 2013 21:34:33 +0000"/>
                            <attachment id="12588927" name="HADOOP-7140.branch-1.patch" size="4947" author="ivanmi" created="Thu, 20 Jun 2013 21:34:33 +0000"/>
                            <attachment id="12471020" name="hadoop-7140.txt" size="5119" author="tlipcon" created="Mon, 14 Feb 2011 21:21:49 +0000"/>
                            <attachment id="12470978" name="hadoop-7140.txt" size="4974" author="tlipcon" created="Mon, 14 Feb 2011 03:33:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02pjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13741</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>