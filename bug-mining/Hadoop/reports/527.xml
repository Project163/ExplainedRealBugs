<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:36:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6963] Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6963</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;The getDU method should not include the size of the directory. The Java interface says that the value is undefined and in Linux/Sun it gets the 4096 for the inode. Clearly this isn&apos;t useful.&lt;br/&gt;
It also recursively calls itself. In case the directory has a symbolic link forming a cycle, getDU keeps spinning in the cycle. In our case, we saw this in the org.apache.hadoop.mapred.JobLocalizer.downloadPrivateCacheObjects call. This prevented other tasks on the same node from committing, causing the TT to become effectively useless (because the JT thinks it already has enough tasks running)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474567">HADOOP-6963</key>
            <summary>Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="raviprak">Ravi Prakash</assignee>
                                    <reporter username="omalley">Owen O&apos;Malley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Sep 2010 07:27:56 +0000</created>
                <updated>Fri, 7 Sep 2012 21:01:45 +0000</updated>
                            <resolved>Thu, 5 Apr 2012 19:51:12 +0000</resolved>
                                    <version>0.20.205.0</version>
                    <version>0.23.1</version>
                                    <fixVersion>0.23.3</fixVersion>
                    <fixVersion>2.0.2-alpha</fixVersion>
                                    <component>fs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="13242464" author="raviprak" created="Fri, 30 Mar 2012 15:47:48 +0000"  >&lt;p&gt;@Owen : I took the liberty of editing this JIRA to include another fix in the same method.&lt;/p&gt;</comment>
                            <comment id="13242727" author="raviprak" created="Fri, 30 Mar 2012 20:54:46 +0000"  >&lt;p&gt;This patch applies to branch-0.23. Will soon upload one for 0.20 and trunk (if its different)&lt;/p&gt;</comment>
                            <comment id="13244330" author="raviprak" created="Mon, 2 Apr 2012 16:56:59 +0000"  >&lt;p&gt;Uploading a patch that applies on top of branch-1.0.2. Can someone please review and commit this?&lt;/p&gt;

&lt;p&gt;The patch for branch-0.23 also applies on trunk.&lt;/p&gt;</comment>
                            <comment id="13244332" author="raviprak" created="Mon, 2 Apr 2012 16:57:28 +0000"  >&lt;p&gt;Can some kind committer please review and commit the patches?&lt;/p&gt;</comment>
                            <comment id="13244340" author="hadoopqa" created="Mon, 2 Apr 2012 17:06:17 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12520989/HADOOP-6963.branch-1.0.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12520989/HADOOP-6963.branch-1.0.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/811//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/811//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13244550" author="raviprak" created="Mon, 2 Apr 2012 20:23:33 +0000"  >&lt;p&gt;Hadoop QA could not apply the latest patch (meant for branch-1.0.2) to trunk. &lt;/p&gt;

&lt;p&gt;The patches apply perfectly fine to their targets. Can committers please review and commit these?&lt;/p&gt;</comment>
                            <comment id="13244551" author="raviprak" created="Mon, 2 Apr 2012 20:23:34 +0000"  >&lt;p&gt;Hadoop QA could not apply the latest patch (meant for branch-1.0.2) to trunk. &lt;/p&gt;

&lt;p&gt;The patches apply perfectly fine to their targets. Can committers please review and commit these?&lt;/p&gt;</comment>
                            <comment id="13246631" author="revans2" created="Wed, 4 Apr 2012 19:29:57 +0000"  >&lt;p&gt;Kicking Jenkins&lt;/p&gt;</comment>
                            <comment id="13246652" author="hadoopqa" created="Wed, 4 Apr 2012 19:45:15 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521370/HADOOP-6963.branch-23.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521370/HADOOP-6963.branch-23.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/819//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/819//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/819//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/819//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/819//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/819//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13246672" author="raviprak" created="Wed, 4 Apr 2012 20:00:09 +0000"  >&lt;p&gt;Thanks Bobby! The findbugs warning is because I am ignoring an IOException. I can do that because I am already setting isSymLink to false during initialization. &lt;/p&gt;</comment>
                            <comment id="13246694" author="revans2" created="Wed, 4 Apr 2012 20:23:44 +0000"  >&lt;p&gt;I can see that, but we need to filter it either by bumping the findbugs count in hadoop-common-project/dev-support/test-patch.properties&lt;/p&gt;

&lt;p&gt;or by adding something to &lt;/p&gt;

&lt;p&gt;hadoop-common-project/hadoop-common/pom.xml&lt;/p&gt;

&lt;p&gt;similar to &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &amp;lt;/plugin&amp;gt;
      &amp;lt;plugin&amp;gt;
        &amp;lt;groupId&amp;gt;org.codehaus.mojo&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;findbugs-maven-plugin&amp;lt;/artifactId&amp;gt;
         &amp;lt;configuration&amp;gt;
          &amp;lt;findbugsXmlOutput&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/findbugsXmlOutput&amp;gt;
          &amp;lt;xmlOutput&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/xmlOutput&amp;gt;
          &amp;lt;excludeFilterFile&amp;gt;${mr.examples.basedir}/dev-support/findbugs-exclude.xml&amp;lt;/excludeFilterFile&amp;gt;
          &amp;lt;effort&amp;gt;Max&amp;lt;/effort&amp;gt;
        &amp;lt;/configuration&amp;gt;
      &amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I would prefer the second because it is less likely to mask other errors, but I am fine either way.&lt;/p&gt;

&lt;p&gt;Please also update the 1.0.2 patch similarly so test-patch will work there too.&lt;/p&gt;</comment>
                            <comment id="13247289" author="raviprak" created="Thu, 5 Apr 2012 15:25:32 +0000"  >&lt;p&gt;Thanks Bobby! I modofied my own code to include a statement in the catch clause. I ran findbugs on my local computer and it did not generate any new warnings. Hopefully this should pass&lt;/p&gt;</comment>
                            <comment id="13247303" author="raviprak" created="Thu, 5 Apr 2012 15:44:06 +0000"  >&lt;p&gt;Uploading a new patch for 1.0.2 with the same change to get rid of the findbugs warning&lt;/p&gt;</comment>
                            <comment id="13247308" author="hadoopqa" created="Thu, 5 Apr 2012 15:48:59 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521513/HADOOP-6963.branch-23.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521513/HADOOP-6963.branch-23.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/826//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/826//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/826//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/826//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13247314" author="hadoopqa" created="Thu, 5 Apr 2012 15:53:11 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521518/HADOOP-6963.branch-1.0.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521518/HADOOP-6963.branch-1.0.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/827//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/827//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13247475" author="szetszwo" created="Thu, 5 Apr 2012 18:30:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13247485" author="hudson" created="Thu, 5 Apr 2012 18:35:39 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #2080 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2080/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2080/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt;. In FileUtil.getDU(..), neither include the size of directories nor follow symbolic links.  Contributed by Ravi Prakash (Revision 1309994)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFileUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13247486" author="szetszwo" created="Thu, 5 Apr 2012 18:36:20 +0000"  >&lt;p&gt;I have committed this to trunk and branch-2.  Thanks, Ravi!&lt;/p&gt;

&lt;p&gt;(The branch-1 patch did not apply and so I skipped it.  Please post a new patch if necessary.)&lt;/p&gt;</comment>
                            <comment id="13247491" author="hudson" created="Thu, 5 Apr 2012 18:37:15 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #2005 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2005/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2005/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt;. In FileUtil.getDU(..), neither include the size of directories nor follow symbolic links.  Contributed by Ravi Prakash (Revision 1309994)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFileUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13247516" author="hudson" created="Thu, 5 Apr 2012 18:48:47 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #2017 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2017/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2017/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt;. In FileUtil.getDU(..), neither include the size of directories nor follow symbolic links.  Contributed by Ravi Prakash (Revision 1309994)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFileUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13247547" author="revans2" created="Thu, 5 Apr 2012 19:14:58 +0000"  >&lt;p&gt;I pulled this into 0.23.3 too.&lt;/p&gt;</comment>
                            <comment id="13247562" author="raviprak" created="Thu, 5 Apr 2012 19:35:09 +0000"  >&lt;p&gt;Thanks Nicholas and Bobby! Bobby pointed out to me that the patch must apply to branch-1 . I&apos;d originally targetted branch-1.0.2. Silly me.&lt;/p&gt;

&lt;p&gt;Could you please commit this updated patch too Nicholas?&lt;/p&gt;</comment>
                            <comment id="13247563" author="raviprak" created="Thu, 5 Apr 2012 19:35:54 +0000"  >&lt;p&gt;Reopening for committing to branch-1.&lt;/p&gt;</comment>
                            <comment id="13247566" author="hudson" created="Thu, 5 Apr 2012 19:39:05 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #2018 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2018/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2018/&lt;/a&gt;)&lt;br/&gt;
    Moved &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt; to 0.23.3 (Revision 1310022)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13247570" author="szetszwo" created="Thu, 5 Apr 2012 19:44:23 +0000"  >&lt;p&gt;&amp;gt; Could you please commit this updated patch too Nicholas?&lt;/p&gt;

&lt;p&gt;Sure.  Thanks for posting a patch for branch-1.  +1 it looks good.&lt;/p&gt;</comment>
                            <comment id="13247579" author="szetszwo" created="Thu, 5 Apr 2012 19:51:13 +0000"  >&lt;p&gt;I also committed the patch to branch-1 and branch-1.0.&lt;/p&gt;</comment>
                            <comment id="13247597" author="hudson" created="Thu, 5 Apr 2012 20:06:31 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #2006 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2006/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2006/&lt;/a&gt;)&lt;br/&gt;
    Moved &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt; to 0.23.3 (Revision 1310022)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13247603" author="hudson" created="Thu, 5 Apr 2012 20:10:45 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #2081 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2081/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2081/&lt;/a&gt;)&lt;br/&gt;
    Moved &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt; to 0.23.3 (Revision 1310022)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13248274" author="hudson" created="Fri, 6 Apr 2012 12:42:00 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-0.23-Build #219 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/219/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/219/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt;. In FileUtil.getDU(..), neither include the size of directories nor follow symbolic links.  (Ravi Prakash via bobby) (Revision 1310018)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310018&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310018&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFileUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13248296" author="hudson" created="Fri, 6 Apr 2012 13:00:35 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #1006 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1006/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1006/&lt;/a&gt;)&lt;br/&gt;
    Moved &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt; to 0.23.3 (Revision 1310022)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt;. In FileUtil.getDU(..), neither include the size of directories nor follow symbolic links.  Contributed by Ravi Prakash (Revision 1309994)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFileUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13248351" author="hudson" created="Fri, 6 Apr 2012 13:58:46 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1041 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1041/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1041/&lt;/a&gt;)&lt;br/&gt;
    Moved &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt; to 0.23.3 (Revision 1310022)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6963&quot; title=&quot;Fix FileUtil.getDU. It should not include the size of the directory or follow symbolic links&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6963&quot;&gt;&lt;del&gt;HADOOP-6963&lt;/del&gt;&lt;/a&gt;. In FileUtil.getDU(..), neither include the size of directories nor follow symbolic links.  Contributed by Ravi Prakash (Revision 1309994)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
bobby : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1310022&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;szetszwo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1309994&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/FileUtil.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFileUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13255122" author="raviprak" created="Mon, 16 Apr 2012 22:15:25 +0000"  >&lt;p&gt;I just wanted to come back and say this was a very peculiar case too.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The cycle has to be nested within another cycle. Inside the inner cycle an ELOOP is thrown by the kernel, which (I don&apos;t understand how) causes it to abandon that branch and come back to the outer loop. This probably also clears the stack, so that the JVM stack doesn&apos;t exhaust the memory either. (In our case, the process had been running for 9 days without getting an OOME).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13255133" author="raviprak" created="Mon, 16 Apr 2012 22:35:23 +0000"  >&lt;p&gt;A guess at why an Exception is not thrown when an ELOOP is received. File.exists() is the first method called with the path which should trigger the ELOOP and this is probably returning false which then causes the recursion to unroll until the outer loop.&lt;/p&gt;</comment>
                            <comment id="13277121" author="mattf" created="Wed, 16 May 2012 20:45:18 +0000"  >&lt;p&gt;Closed upon release of Hadoop-1.0.3.&lt;/p&gt;</comment>
                            <comment id="13279644" author="vicaya" created="Sun, 20 May 2012 01:04:52 +0000"  >&lt;p&gt;Looks like we forgot to update the upgraded commons-io version in hadoop-core-pom-template.xml, which breaks downstream projects (e.g. HBase).&lt;/p&gt;</comment>
                            <comment id="13279817" author="raviprak" created="Sun, 20 May 2012 16:58:58 +0000"  >&lt;p&gt;I see &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8417&quot; title=&quot;HADOOP-6963 didn&amp;#39;t update hadoop-core-pom-template.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8417&quot;&gt;&lt;del&gt;HADOOP-8417&lt;/del&gt;&lt;/a&gt; has been filed! Thanks for reporting this Luke&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12521518" name="HADOOP-6963.branch-1.0.2.patch" size="2722" author="raviprak" created="Thu, 5 Apr 2012 15:44:06 +0000"/>
                            <attachment id="12520989" name="HADOOP-6963.branch-1.0.2.patch" size="2686" author="raviprak" created="Mon, 2 Apr 2012 16:56:58 +0000"/>
                            <attachment id="12521559" name="HADOOP-6963.branch-1.patch" size="2720" author="raviprak" created="Thu, 5 Apr 2012 19:35:09 +0000"/>
                            <attachment id="12521513" name="HADOOP-6963.branch-23.patch" size="2859" author="raviprak" created="Thu, 5 Apr 2012 15:25:32 +0000"/>
                            <attachment id="12521370" name="HADOOP-6963.branch-23.patch" size="2821" author="revans2" created="Wed, 4 Apr 2012 19:30:23 +0000"/>
                            <attachment id="12520666" name="HADOOP-6963.branch-23.patch" size="2821" author="raviprak" created="Fri, 30 Mar 2012 20:54:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>77592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05hhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29932</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12320248">1.0.3</customfieldvalue>
    <customfieldvalue id="12320059">0.23.3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>