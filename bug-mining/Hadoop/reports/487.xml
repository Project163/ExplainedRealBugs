<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:36:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-8050] Deadlock in metrics</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-8050</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;The metrics serving thread and the periodic snapshot thread can deadlock.&lt;br/&gt;
It happened a few times on one of namenodes we have. When it happens RPC works but the web ui and hftp stop working. I haven&apos;t look at the trunk too closely, but it might happen there too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542022">HADOOP-8050</key>
            <summary>Deadlock in metrics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kihwal">Kihwal Lee</assignee>
                                    <reporter username="kihwal">Kihwal Lee</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2012 20:29:42 +0000</created>
                <updated>Thu, 14 Nov 2013 19:45:00 +0000</updated>
                            <resolved>Wed, 22 Feb 2012 16:13:45 +0000</resolved>
                                    <version>0.20.204.0</version>
                    <version>0.20.205.0</version>
                    <version>1.0.0</version>
                    <version>0.23.0</version>
                                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>0.23.2</fixVersion>
                                    <component>metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="13204828" author="kihwal" created="Thu, 9 Feb 2012 20:32:31 +0000"  >&lt;p&gt;&quot;1822485214@qtp-1598533502-1267&quot;:&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSourceAdapter.getMBeanInfo(MetricsSourceAdapter.java:141)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;0x00002aabae0cdb18&amp;gt; (a org.apache.hadoop.metrics2.impl.MetricsSourceAdapter)&lt;br/&gt;
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBeanInfo(DefaultMBeanServerInterceptor.java:1375)&lt;br/&gt;
        at com.sun.jmx.mbeanserver.JmxMBeanServer.getMBeanInfo(JmxMBeanServer.java:880)&lt;br/&gt;
        at org.apache.hadoop.jmx.JMXJsonServlet.listBeans(JMXJsonServlet.java:183)&lt;br/&gt;
        at org.apache.hadoop.jmx.JMXJsonServlet.doGet(JMXJsonServlet.java:159)&lt;br/&gt;
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)&lt;br/&gt;
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)&lt;br/&gt;
        at com.yahoo.hadoop.HadoopBouncerFilter.doFilter(HadoopBouncerFilter.java:60)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)&lt;br/&gt;
        at org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:818)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)&lt;br/&gt;
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)&lt;br/&gt;
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)&lt;br/&gt;
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)&lt;br/&gt;
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)&lt;br/&gt;
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)&lt;br/&gt;
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
        at org.mortbay.jetty.Server.handle(Server.java:326)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)&lt;br/&gt;
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)&lt;br/&gt;
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)&lt;br/&gt;
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)&lt;br/&gt;
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)&lt;br/&gt;
&quot;902074768@qtp-1598533502-432&quot;:&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSystemImpl$5.getMetrics(MetricsSystemImpl.java:477)&lt;/li&gt;
	&lt;li&gt;waiting to lock &amp;lt;0x00002aabae06f408&amp;gt; (a org.apache.hadoop.metrics2.impl.MetricsSystemImpl)&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSourceAdapter.getMetrics(MetricsSourceAdapter.java:169)&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSourceAdapter.updateJmxCache(MetricsSourceAdapter.java:149)&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSourceAdapter.getMBeanInfo(MetricsSourceAdapter.java:141)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00002aabae0cdb18&amp;gt; (a org.apache.hadoop.metrics2.impl.MetricsSourceAdapter)&lt;br/&gt;
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBeanInfo(DefaultMBeanServerInterceptor.java:1375)&lt;br/&gt;
        at com.sun.jmx.mbeanserver.JmxMBeanServer.getMBeanInfo(JmxMBeanServer.java:880)&lt;br/&gt;
        at org.apache.hadoop.jmx.JMXJsonServlet.listBeans(JMXJsonServlet.java:183)&lt;br/&gt;
        at org.apache.hadoop.jmx.JMXJsonServlet.doGet(JMXJsonServlet.java:159)&lt;br/&gt;
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)&lt;br/&gt;
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)&lt;br/&gt;
        at com.yahoo.hadoop.HadoopBouncerFilter.doFilter(HadoopBouncerFilter.java:60)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)&lt;br/&gt;
        at org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:818)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)&lt;br/&gt;
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)&lt;br/&gt;
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)&lt;br/&gt;
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)&lt;br/&gt;
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)&lt;br/&gt;
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)&lt;br/&gt;
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)&lt;br/&gt;
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
        at org.mortbay.jetty.Server.handle(Server.java:326)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)&lt;br/&gt;
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)&lt;br/&gt;
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)&lt;br/&gt;
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)&lt;br/&gt;
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)&lt;br/&gt;
&quot;Timer for &apos;NameNode&apos; metrics system&quot;:&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSourceAdapter.getMetrics(MetricsSourceAdapter.java:164)&lt;/li&gt;
	&lt;li&gt;waiting to lock &amp;lt;0x00002aabae0cdb18&amp;gt; (a org.apache.hadoop.metrics2.impl.MetricsSourceAdapter)&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.snapshotMetrics(MetricsSystemImpl.java:336)&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.snapshotMetrics(MetricsSystemImpl.java:327)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00002aabae06f408&amp;gt; (a org.apache.hadoop.metrics2.impl.MetricsSystemImpl)&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.onTimerEvent(MetricsSystemImpl.java:309)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00002aabae06f408&amp;gt; (a org.apache.hadoop.metrics2.impl.MetricsSystemImpl)&lt;br/&gt;
        at org.apache.hadoop.metrics2.impl.MetricsSystemImpl$4.run(MetricsSystemImpl.java:296)&lt;br/&gt;
        at java.util.TimerThread.mainLoop(Timer.java:512)&lt;br/&gt;
        at java.util.TimerThread.run(Timer.java:462)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Found 1 deadlock.&lt;/p&gt;

&lt;p&gt;--------------------------------&lt;br/&gt;
There is no problem for normal metrics sources, which locks the source adapter object while doing getMetrics(). But the system source locks MetricsSystemImpl on getMetrics(). &lt;/p&gt;</comment>
                            <comment id="13205736" author="kihwal" created="Fri, 10 Feb 2012 20:44:57 +0000"  >&lt;p&gt;If a lot of methods are synchronized and two classes containing them have interdependency, deadlock is likely.&lt;/p&gt;

&lt;p&gt;The current way of locking in metrics is a little excessive. I do not believe the strict global consistency is required in processing metrics. For one, sources are not cordinating with each other (they are mostly independent), so locking the whole subsystem and taking snapshot does not add much value to the quality of data. &lt;/p&gt;

&lt;p&gt;This patch removes some locks around accessing the source adapter map within MetricsSystemImpl. This makes the metric snapshot only lock on each individual source adapter, one at a time, instead of the entire metrics impl.  This is safe because:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Once sources are registered, they are not removed until shutdown(). Even shoutdown() or stop() is called rarely.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;During snapshot, the source adapter hashmap is the only data structure that needs protection.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;snapshot() is only called from the timer event handler. startTimer() makes sure that there is only one timer.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I wrapped the LinkeHashMap used for the source adapter map with Collections.synchronizedMap. This made accessing the data structure safe without holding a big coarse lock. No further synchronization between sources seem needed.&lt;/p&gt;</comment>
                            <comment id="13205756" author="hadoopqa" created="Fri, 10 Feb 2012 21:06:59 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514152/hadoop-8050.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514152/hadoop-8050.patch.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/586//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/586//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13206336" author="vicaya" created="Sun, 12 Feb 2012 02:23:07 +0000"  >&lt;p&gt;Always wanted to move the JMX stuff to a sink to untangle the mess and never got around to do it (maybe I&apos;ll do it with &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8061&quot; title=&quot;Back port trunk metrics2 changes to 1.x branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8061&quot;&gt;HADOOP-8061&lt;/a&gt;). The main reason for locking metrics system during snapshots is that people can trigger a metrics system restart (stop/start) via JMX in another thread.&lt;/p&gt;</comment>
                            <comment id="13206342" author="vicaya" created="Sun, 12 Feb 2012 03:01:19 +0000"  >&lt;p&gt;The reason of the deadlock is that the JMX serving thread has different lock order (source adapter, source (which can be metrics system)) than the snapshot thread (metrics system, source adapter). The correct fix (sans moving jmx to a sink) is not removing the lock on metrics system in the snapshot thread but fixing the lock order in MetricsSourceAdapter (to make source.getMetrics is done without holding the adapter lock).&lt;/p&gt;</comment>
                            <comment id="13206374" author="mattf" created="Sun, 12 Feb 2012 08:56:44 +0000"  >&lt;p&gt;Hi Luke, would you be able to submit an alternate patch per your proposal (quick fix for lock order)?  I&apos;m trying to get a 1.0.1 build done, and it would be great to get this in.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13206522" author="vicaya" created="Sun, 12 Feb 2012 21:17:45 +0000"  >&lt;p&gt;@Matt, I&apos;d have already attached a patch if not for my employer&apos;s patch review/approval process. For a quick fix for 1.0.1, the least risky approach would be commenting out the registerSystemSource line in MetricsSystemImpl#configureSources. The metrics system metrics was mostly for the original dev testing/debugging and not required for production. I&apos;ll review the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="13206558" author="kihwal" created="Sun, 12 Feb 2012 23:37:48 +0000"  >&lt;p&gt;what if we set publishSelfMetrics to false?&lt;/p&gt;</comment>
                            <comment id="13206564" author="kihwal" created="Mon, 13 Feb 2012 00:00:30 +0000"  >&lt;p&gt;The new patch sets publishSelfMetrics to false, which causes the snapshot to skip the system source.&lt;/p&gt;</comment>
                            <comment id="13206649" author="hadoopqa" created="Mon, 13 Feb 2012 03:05:10 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514294/hadoop-8050-trunk.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514294/hadoop-8050-trunk.patch.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                  org.apache.hadoop.metrics2.impl.TestMetricsSystemImpl&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/587//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/587//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/587//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/587//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13206689" author="kihwal" created="Mon, 13 Feb 2012 05:34:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;The correct fix (sans moving jmx to a sink) is not removing the lock on metrics system in the snapshot thread but fixing the lock order in MetricsSourceAdapter (to make source.getMetrics is done without holding the adapter lock).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I tried to do this in the new patch. Since updateJmxCache() doesn&apos;t block while calling getMetrics(), some may not get the latest metric data if updateJmxCache() is already being executed by another thread.&lt;/p&gt;

&lt;p&gt;The patch passes all metrics related tests. &lt;/p&gt;</comment>
                            <comment id="13206693" author="hadoopqa" created="Mon, 13 Feb 2012 05:45:32 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514317/hadoop-8050-trunk.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514317/hadoop-8050-trunk.patch.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/588//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/588//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/588//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/588//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13206704" author="vicaya" created="Mon, 13 Feb 2012 06:21:58 +0000"  >&lt;p&gt;Ah those pesky tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Kihwal&apos;s latest patch looks reasonable to me besides the redundant &quot;needUpdate&quot; variable.&lt;/p&gt;</comment>
                            <comment id="13206873" author="kihwal" created="Mon, 13 Feb 2012 13:36:39 +0000"  >&lt;p&gt;Thanks for the review, Luke. I removed the unused variable in the new patches. Attaching patches for branch-1 and trunk.&lt;/p&gt;</comment>
                            <comment id="13206878" author="hadoopqa" created="Mon, 13 Feb 2012 13:53:37 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514353/hadoop-8050-trunk.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514353/hadoop-8050-trunk.patch.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/590//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/590//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/590//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/590//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13206966" author="kihwal" created="Mon, 13 Feb 2012 16:28:33 +0000"  >&lt;p&gt;No test was added since there is no functional change.&lt;br/&gt;
I wish static analysis tools catch this kind of bugs.&lt;/p&gt;</comment>
                            <comment id="13207239" author="vicaya" created="Mon, 13 Feb 2012 21:39:40 +0000"  >&lt;p&gt;static analysis is hopeless for this case, as the compiler needs to know all the possible dynamic bindings of metrics source before hand. I recall that Todd ran jcarder (dynamic deadlock finder) on metrics2 in trunk and didn&apos;t find the issue, probably due to a lack of test coverage in the jmx metrics serving (there are some tests but we need to make sure snapshot thread happens in the tests as well), or the fact that metrics sources can be created via annotations.&lt;/p&gt;</comment>
                            <comment id="13208085" author="vicaya" created="Tue, 14 Feb 2012 22:25:42 +0000"  >&lt;p&gt;The latest patch lgtm, +1. Thanks Kihwal. It&apos;ll be great if you can add a test case for the jmx metrics serving (the purpose is not reproduce the deadlock, but people can run something like jcarder with the unit tests and detect potential deadlocks). I&apos;m not holding my +1 for it though.&lt;/p&gt;</comment>
                            <comment id="13208108" author="kihwal" created="Tue, 14 Feb 2012 23:27:12 +0000"  >&lt;p&gt;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8073&quot; title=&quot;Add a test for the jmx metrics serving&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8073&quot;&gt;HADOOP-8073&lt;/a&gt; per Luke&apos;s comment. Thanks for the review.&lt;/p&gt;</comment>
                            <comment id="13211582" author="hudson" created="Sun, 19 Feb 2012 22:45:34 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-0.23-Commit #565 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/565/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/565/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291081)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211584" author="hudson" created="Sun, 19 Feb 2012 22:47:08 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-0.23-Commit #578 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-0.23-Commit/578/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-0.23-Commit/578/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291081)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211585" author="mattf" created="Sun, 19 Feb 2012 22:47:10 +0000"  >&lt;p&gt;Committed to branch-1.0, branch-1, branch-0.23, and trunk.&lt;br/&gt;
Thanks, Kihwal and Luke!&lt;/p&gt;</comment>
                            <comment id="13211587" author="hudson" created="Sun, 19 Feb 2012 22:56:15 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #1831 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1831/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1831/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291084)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211588" author="hudson" created="Sun, 19 Feb 2012 22:57:09 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #1757 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1757/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1757/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291084)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211596" author="hudson" created="Sun, 19 Feb 2012 23:27:23 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-0.23-Commit #580 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/580/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/580/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291081)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211599" author="hudson" created="Sun, 19 Feb 2012 23:37:07 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #1768 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1768/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1768/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291084)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211716" author="mattf" created="Mon, 20 Feb 2012 08:16:55 +0000"  >&lt;p&gt;The Commit integration to both trunk and v0.23 succeeded with common and hdfs, but aborted in mapreduce.  The log records:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ivy-resolve-mapred:
Build timed out (after 45 minutes). Marking the build as aborted.
Build was aborted
Recording test results
None of the test reports contained any result
Updating HADOOP-8050
No emails were triggered.
Finished: ABORTED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This looks more like a connectivity issue with ivy than a problem with the patch, but re-opening pending investigation.&lt;/p&gt;</comment>
                            <comment id="13211813" author="hudson" created="Mon, 20 Feb 2012 12:40:09 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #961 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/961/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/961/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291084)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211814" author="hudson" created="Mon, 20 Feb 2012 12:42:40 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-0.23-Build #174 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/174/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/174/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291081)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211845" author="hudson" created="Mon, 20 Feb 2012 13:55:00 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #996 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/996/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/996/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291084)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291084&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211846" author="hudson" created="Mon, 20 Feb 2012 13:57:24 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-0.23-Build #202 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Build/202/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Build/202/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8050&quot; title=&quot;Deadlock in metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8050&quot;&gt;&lt;del&gt;HADOOP-8050&lt;/del&gt;&lt;/a&gt;. Deadlock in metrics. Contributed by Kihwal Lee. (Revision 1291081)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
mattf : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291081&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/metrics2/impl/MetricsSourceAdapter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13212747" author="revans2" created="Tue, 21 Feb 2012 17:20:50 +0000"  >&lt;p&gt;I have seen a number of other builds fail with this, or with aborted lately. The failures look like they started around Feb 10th, but I don&apos;t know for sure.  The first I saw of this, when looking through JIRA is &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3852&quot; title=&quot;test TestLinuxResourceCalculatorPlugin failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-3852&quot;&gt;&lt;del&gt;MAPREDUCE-3852&lt;/del&gt;&lt;/a&gt;.  But JQL cannot look for &quot;RESULT = ABORTED&quot; in a comment.  It just pulls out everything that has result or = or ABORTED in it. &lt;/p&gt;</comment>
                            <comment id="13213733" author="kihwal" created="Wed, 22 Feb 2012 16:11:13 +0000"  >&lt;p&gt;So this time, the mr trunk build went through okay, but 0.23 was not. I just filed &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3894&quot; title=&quot;0.23 and trunk MR builds fail intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-3894&quot;&gt;&lt;del&gt;MAPREDUCE-3894&lt;/del&gt;&lt;/a&gt; to investigate the build issue. Since the issue is independent of this jira, I think we can close it.&lt;/p&gt;</comment>
                            <comment id="13232179" author="mattf" created="Sun, 18 Mar 2012 06:01:48 +0000"  >&lt;p&gt;Was committed to 1.0.2, not 1.0.1.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12678588">HADOOP-10090</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12514352" name="hadoop-8050-branch-1.patch.txt" size="3180" author="kihwal" created="Mon, 13 Feb 2012 13:36:39 +0000"/>
                            <attachment id="12514316" name="hadoop-8050-branch-1.patch.txt" size="3241" author="kihwal" created="Mon, 13 Feb 2012 05:21:31 +0000"/>
                            <attachment id="12514293" name="hadoop-8050-branch-1.patch.txt" size="693" author="kihwal" created="Sun, 12 Feb 2012 23:57:33 +0000"/>
                            <attachment id="12514292" name="hadoop-8050-branch-1.patch.txt" size="665" author="kihwal" created="Sun, 12 Feb 2012 23:49:22 +0000"/>
                            <attachment id="12514353" name="hadoop-8050-trunk.patch.txt" size="3172" author="kihwal" created="Mon, 13 Feb 2012 13:36:39 +0000"/>
                            <attachment id="12514317" name="hadoop-8050-trunk.patch.txt" size="3233" author="kihwal" created="Mon, 13 Feb 2012 05:21:31 +0000"/>
                            <attachment id="12514294" name="hadoop-8050-trunk.patch.txt" size="865" author="kihwal" created="Sun, 12 Feb 2012 23:57:47 +0000"/>
                            <attachment id="12514152" name="hadoop-8050.patch.txt" size="1858" author="kihwal" created="Fri, 10 Feb 2012 20:44:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227309</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07vfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>