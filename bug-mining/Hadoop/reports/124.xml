<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:32:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-6730] Bug in FileContext#copy and provide base class for FileContext tests</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-6730</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Thanks to Eli, He noticed that there is no test for FileContext#Copy operation. &lt;/p&gt;

&lt;p&gt;On further investigation with the help of Sanjay we found that there is bug in FileContext#checkDest.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  FileStatus dstFs = getFileStatus(dst);
    try {
      if (dstFs.isDir()) {
        if (null == srcNa
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt; &lt;b&gt;FileStatus dstFs = getFileStatus(dst);&lt;/b&gt; should be in try...catch block.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    try {
       FileStatus dstFs = getFileStatus(dst);
       if (dstFs.isDir()) {
          if (null == srcNa
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12463243">HADOOP-6730</key>
            <summary>Bug in FileContext#copy and provide base class for FileContext tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="raviphulari">Ravi Phulari</assignee>
                                    <reporter username="eli">Eli Collins</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Apr 2010 18:50:09 +0000</created>
                <updated>Mon, 12 Dec 2011 06:19:03 +0000</updated>
                            <resolved>Sat, 1 May 2010 21:09:36 +0000</resolved>
                                    <version>0.22.0</version>
                                    <fixVersion>0.22.0</fixVersion>
                                    <component>fs</component>
                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12862366" author="raviphulari" created="Thu, 29 Apr 2010 19:34:10 +0000"  >&lt;p&gt;Adding information about bug in FileContext#checkDest. &lt;/p&gt;

&lt;p&gt;Will upload patch soon with bug fix and Tests for copy.&lt;/p&gt;</comment>
                            <comment id="12862371" author="eli" created="Thu, 29 Apr 2010 19:48:17 +0000"  >&lt;p&gt;The call to getFileStatus is outside the try block to make sure FileNotFoundException is thrown per the interface no?&lt;/p&gt;</comment>
                            <comment id="12862384" author="raviphulari" created="Thu, 29 Apr 2010 20:08:58 +0000"  >&lt;p&gt;Attaching patch for review. &lt;/p&gt;</comment>
                            <comment id="12862404" author="eli" created="Thu, 29 Apr 2010 20:52:50 +0000"  >&lt;p&gt;Hey Ravi,  per the previous comment I left the getFileStatus outside the try block so the FileNotFoundException is now swallowed silently and is thrown up to copy (whose API wants FileNotFoundThrown). This deserves a comment.&lt;/p&gt;

&lt;p&gt;The patch just has util classes - perhaps you forgot to add the test class in your diff?&lt;/p&gt;</comment>
                            <comment id="12862423" author="raviphulari" created="Thu, 29 Apr 2010 21:26:31 +0000"  >
&lt;p&gt; FileContext.Util.Copy() operation was failing with file not found exception if destination file does not exits , this was happening due to the fact that  getFileStatus was out of try block.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The patch just has util classes - perhaps you forgot to add the test class in your diff?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I have included test runner with  util base.  Please check that there are two classes added with this patch  - &lt;tt&gt;TestFcLocalFsUtil.java&lt;/tt&gt; and &lt;tt&gt;FileContextUtilBase.java&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="12862435" author="eli" created="Thu, 29 Apr 2010 21:54:08 +0000"  >&lt;p&gt;+1 Looks good to me.&lt;/p&gt;</comment>
                            <comment id="12862517" author="jghoman" created="Fri, 30 Apr 2010 02:52:50 +0000"  >&lt;p&gt;Review of the patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Lines 47-52: These notes aren&apos;t necessary since the test writers should know about @Before and @After. Also, the provided methods (setUp() and tearDown()) conflict with the provided names.&lt;/li&gt;
	&lt;li&gt;Lines 55 &amp;amp; 56: These values should be all capitalized and final. Alternatively, it may be good to provide these values via functions so that implementing classes may override as needed.&lt;/li&gt;
	&lt;li&gt;Line 64: catch should be on the same line as closing brace, per our coding style&lt;/li&gt;
	&lt;li&gt;Line 70: fc should not be declared static. It is the responsibility of each implementing class to provide an instance of it. Also, fc should probably be protected&lt;/li&gt;
	&lt;li&gt;Line 91: Please provide assert message for assertion failure&lt;/li&gt;
	&lt;li&gt;Since this is a test that the copy method worked, we should prove it by comparing the contents of the copied file with the original.&lt;/li&gt;
	&lt;li&gt;Lines 135-138: This code: 
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@After
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void tearDown() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
  &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.tearDown();
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; is a no-op and should be removed.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Nits:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Rather than Assert.assertTrue() you can do a static import of org.junit.Assert.
{assertTrue|*}
&lt;p&gt;.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Line 57: Remove extra line&lt;/li&gt;
	&lt;li&gt;Line 47: &quot;Since this a junit 4&quot; -&amp;gt;&quot;Since this is a junit 4 test&quot;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12862584" author="raviphulari" created="Fri, 30 Apr 2010 08:33:57 +0000"  >&lt;p&gt;Thanks for reviewing patch Jakob.&lt;br/&gt;
Uploading updated patch. &lt;/p&gt;</comment>
                            <comment id="12862804" author="raviphulari" created="Fri, 30 Apr 2010 18:56:12 +0000"  >&lt;p&gt;Updated patch with changes.&lt;br/&gt;
1. Removed unnecessary  tearDown method.&lt;br/&gt;
2. Changed file read write to bytes from String.&lt;/p&gt;</comment>
                            <comment id="12862824" author="raviphulari" created="Fri, 30 Apr 2010 19:28:45 +0000"  >&lt;p&gt;Updated patch.&lt;br/&gt;
Removed static from fc initialization.&lt;br/&gt;
Removed invalid comments.  &lt;/p&gt;</comment>
                            <comment id="12862869" author="raviphulari" created="Fri, 30 Apr 2010 21:14:22 +0000"  >&lt;p&gt;Submitting patch for hudson queue.&lt;/p&gt;</comment>
                            <comment id="12862955" author="hadoopqa" created="Sat, 1 May 2010 00:57:47 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12443315/HADOOP-6730.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12443315/HADOOP-6730.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 939864.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/492/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/492/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/492/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/492/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/492/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/492/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/492/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/492/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12863054" author="jghoman" created="Sat, 1 May 2010 20:58:45 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12863058" author="jghoman" created="Sat, 1 May 2010 21:09:36 +0000"  >&lt;p&gt;I have committed this. Thanks, Ravi. Resolving as fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12443267" name="HADOOP-6730.2.patch" size="6708" author="raviphulari" created="Fri, 30 Apr 2010 08:33:57 +0000"/>
                            <attachment id="12443309" name="HADOOP-6730.3.patch" size="6607" author="raviphulari" created="Fri, 30 Apr 2010 18:56:12 +0000"/>
                            <attachment id="12443315" name="HADOOP-6730.4.patch" size="6546" author="raviphulari" created="Fri, 30 Apr 2010 19:28:45 +0000"/>
                            <attachment id="12443227" name="HADOOP-6730.patch" size="5322" author="raviphulari" created="Thu, 29 Apr 2010 20:08:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>77664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hzi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>103014</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>