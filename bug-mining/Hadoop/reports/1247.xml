<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:45:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-10224] JavaKeyStoreProvider has to protect against corrupting underlying store</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-10224</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Java keystores get corrupted at times. A key management operation that writes the store to disk could cause a corruption and all protected data would then be unaccessible.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688362">HADOOP-10224</key>
            <summary>JavaKeyStoreProvider has to protect against corrupting underlying store</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asuresh">Arun Suresh</assignee>
                                    <reporter username="lmccay">Larry McCay</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Jan 2014 00:02:38 +0000</created>
                <updated>Mon, 1 Dec 2014 03:08:25 +0000</updated>
                            <resolved>Sat, 9 Aug 2014 00:01:15 +0000</resolved>
                                                    <fixVersion>2.6.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13868499" author="lmccay" created="Sat, 11 Jan 2014 00:06:45 +0000"  >&lt;p&gt;I am thinking that the flush() needs to backup the original store to a randomized name, write the contents of the store, reload and maybe list the keys to ensure that it isn&apos;t corrupt.&lt;/p&gt;

&lt;p&gt;Once it has proven to not e corrupt we can delete the backup.&lt;/p&gt;</comment>
                            <comment id="14069875" author="tucu00" created="Tue, 22 Jul 2014 05:59:44 +0000"  >&lt;p&gt;As commented in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10869&quot; title=&quot;JavaKeyStoreProvider backing jceks file may get corrupted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10869&quot;&gt;&lt;del&gt;HADOOP-10869&lt;/del&gt;&lt;/a&gt;, this could be done as follows:&lt;/p&gt;

&lt;p&gt; KeyProvider should &lt;tt&gt;flush()&lt;/tt&gt; to a temporary file, load temporary file to verify it is healthy and then rename the temporary file to the actual file. The rename must be done in 2 steps to enable recovery on startup if the rename process was not complete:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;rename CURRENT to OLD&lt;/li&gt;
	&lt;li&gt;rename NEW to CURRENT&lt;/li&gt;
	&lt;li&gt;delete OLD&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;On start up:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;if CURRENT exists, delete NEW &amp;amp; OLD&lt;/li&gt;
	&lt;li&gt;if CURRENT does not exist and OLD exists, rename OLD back to CURRENT and delete NEW&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14069879" author="tucu00" created="Tue, 22 Jul 2014 06:01:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmccay&quot; class=&quot;user-hover&quot; rel=&quot;lmccay&quot;&gt;lmccay&lt;/a&gt;, are you planning to work on this JIRA anytime soon? Else, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asuresh&quot; class=&quot;user-hover&quot; rel=&quot;asuresh&quot;&gt;asuresh&lt;/a&gt; or myself may have cycles to do it as we want this done by the time HDFS encryption is complete.&lt;/p&gt;</comment>
                            <comment id="14070313" author="lmccay" created="Tue, 22 Jul 2014 14:30:41 +0000"  >&lt;p&gt;Please, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;tucu00&lt;/a&gt; - have at it! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Thanks for asking though.&lt;br/&gt;
I was just pointing out that the two were duplicates.&lt;br/&gt;
It is especially vulnerable to corruption while backing the KMS with a greater potential for concurrent access - so it needs to be addressed.&lt;/p&gt;</comment>
                            <comment id="14070485" author="tucu00" created="Tue, 22 Jul 2014 16:44:32 +0000"  >&lt;p&gt;Thanks Larry.&lt;/p&gt;</comment>
                            <comment id="14080874" author="asuresh" created="Thu, 31 Jul 2014 13:39:00 +0000"  >&lt;p&gt;Attaching initial patch&lt;/p&gt;</comment>
                            <comment id="14080951" author="hadoopqa" created="Thu, 31 Jul 2014 14:50:27 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12658926/HADOOP-10224.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12658926/HADOOP-10224.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ipc.TestRPCCallBenchmark&lt;br/&gt;
                  org.apache.hadoop.net.TestNetUtils&lt;br/&gt;
                  org.apache.hadoop.security.TestSecurityUtil&lt;br/&gt;
                  org.apache.hadoop.crypto.key.TestKeyProviderFactory&lt;br/&gt;
                  org.apache.hadoop.ipc.TestRPC&lt;br/&gt;
                  org.apache.hadoop.security.TestDoAsEffectiveUser&lt;br/&gt;
                  org.apache.hadoop.conf.TestConfiguration&lt;br/&gt;
                  org.apache.hadoop.ipc.TestIPC&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4395//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4395//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4395//artifact/trunk/patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4395//artifact/trunk/patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4395//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4395//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14081041" author="asuresh" created="Thu, 31 Jul 2014 16:04:24 +0000"  >&lt;p&gt;Updated patch to fix testcase&lt;/p&gt;</comment>
                            <comment id="14081115" author="hadoopqa" created="Thu, 31 Jul 2014 17:00:21 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12658939/HADOOP-10224.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12658939/HADOOP-10224.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ipc.TestRPCCallBenchmark&lt;br/&gt;
                  org.apache.hadoop.net.TestNetUtils&lt;br/&gt;
                  org.apache.hadoop.security.TestSecurityUtil&lt;br/&gt;
                  org.apache.hadoop.crypto.key.TestKeyProviderFactory&lt;br/&gt;
                  org.apache.hadoop.ipc.TestRPC&lt;br/&gt;
                  org.apache.hadoop.security.TestDoAsEffectiveUser&lt;br/&gt;
                  org.apache.hadoop.conf.TestConfiguration&lt;br/&gt;
                  org.apache.hadoop.ipc.TestIPC&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4396//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4396//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4396//artifact/trunk/patchprocess/newPatchFindbugsWarningshadoop-common.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4396//artifact/trunk/patchprocess/newPatchFindbugsWarningshadoop-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4396//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4396//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14081147" author="tucu00" created="Thu, 31 Jul 2014 17:21:11 +0000"  >&lt;p&gt;&lt;b&gt;JavaKeyStoreProvider.java&lt;/b&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;if ((pwFile != null)&amp;amp;&amp;amp;(pwdFile == null))&lt;/tt&gt;, no need to check for pwFile not NULL here,  we can be here only if it is not NULL already.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think we should go over all corner cases (even if not happening under normal circumstances).&lt;/p&gt;

&lt;p&gt;&lt;b&gt;On startup should be something like:&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; loaded = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
  Path keyStorePath = ....
  Path newPath = constructNewPath(path);
  Path oldPath = constructOldPath(path);
  FSPermission permission = ...
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(keyStorePath)) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(newPath)) {
      &lt;span class=&quot;code-comment&quot;&gt;//THROW EXCEPTION, something weird happened, admin should take care of
&lt;/span&gt;    }
    keyStore = loadKeyStore(path, password);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(oldPath)) {
      fs.delete(oldPath);
    }
    loaded = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    &lt;span class=&quot;code-comment&quot;&gt;//LOG
&lt;/span&gt;  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(newPath) || fs.exists(oldPath)) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(newPath)) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          keyStore = loadKeyStore(newPath, password);
          fs.rename(newPath, path);
          fs.delete(oldPath);
          loaded = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
          &lt;span class=&quot;code-comment&quot;&gt;//LOG
&lt;/span&gt;        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
          &lt;span class=&quot;code-comment&quot;&gt;//THROW EXCEPTION &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; password issue, we don&#8217;t want to trash the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; file because of wrong password, admin should take care
&lt;/span&gt;        }
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!loaded) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(oldPath)) {
          &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            keyStore = loadKeyStore(oldPath, password);
            fs.rename(oldPath, path);
            loaded = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
            &lt;span class=&quot;code-comment&quot;&gt;//LOG
&lt;/span&gt;          } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
          &lt;span class=&quot;code-comment&quot;&gt;//THROW EXCEPTION &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; password issue, we don&#8217;t want to trash the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; file because of wrong password, admin should take care
&lt;/span&gt;          }
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          &lt;span class=&quot;code-comment&quot;&gt;//LOG
&lt;/span&gt;        }
      }
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;code-comment&quot;&gt;//LOG
&lt;/span&gt;    }
  }
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!loaded) {
    &lt;span class=&quot;code-comment&quot;&gt;// creating an empty store
&lt;/span&gt;    keyStore = KeyStore.getInstance(SCHEME_NAME);
    OutputStream out = FileSystem.create(fs, path, permissions);
    keyStore.store(out, password);
    out.close();
    &lt;span class=&quot;code-comment&quot;&gt;//LOG
&lt;/span&gt;  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;On flush code should be something like:&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  Path keyStorePath = ....
  Path newPath = constructNewPath(path);
  Path oldPath = constructOldPath(path);
  FSPermission permission = ...
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(newPath) || fs.exists(oldPath)) {
    &lt;span class=&quot;code-comment&quot;&gt;//THROW EXCEPTION, something weird happened, admin should take care of
&lt;/span&gt;  }
  fs.rename(path, oldPath);
  &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    OutputStream out = FileSystem.create(fs, newPath, permissions);
    keyStore.store(out, password);
    out.close();
  } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
    fs.rename(oldPath, path);
    &lt;span class=&quot;code-comment&quot;&gt;//THROW EXCEPTION
&lt;/span&gt;  }
  fs.rename(newPath, path); &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; it happens &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; we need to revert and &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; exception
&lt;/span&gt;  fs.delete(oldPath); &lt;span class=&quot;code-comment&quot;&gt;//LOG WARN &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; does not happen.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14081192" author="asuresh" created="Thu, 31 Jul 2014 18:00:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;tucu00&lt;/a&gt;, thanx for the review..&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;..
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(keyStorePath)) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(newPath)) {
      &lt;span class=&quot;code-comment&quot;&gt;//THROW EXCEPTION, something weird happened, admin should take care of
&lt;/span&gt;    }
..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should we actually throw an exception here ? If new exists, it would imply that the flush did not proceed to completion.. in which case, I was thinking, the JKS should restart with the last know good configuration silently. Not sure if the admin should be flagged at this point.&lt;/p&gt;

&lt;p&gt;Also, during startup, &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;..
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(newPath) || fs.exists(oldPath)) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(newPath)) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I was wondering if we have to check if &quot;new&quot; exist ? Ideally, on startup, the JKS should be brought to one of two states : &quot;old&quot; state or a completely flushed state (&quot;current&quot;). the &quot;new&quot; file in my opinion is an intermediate file (and should be deleted by flush() if it proceeds to completion)&lt;/p&gt;

&lt;p&gt;I was also wondering if :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(newPath) || fs.exists(oldPath)) {
    &lt;span class=&quot;code-comment&quot;&gt;//THROW EXCEPTION, something weird happened, admin should take care of
&lt;/span&gt;  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is needed, since we can safely assume that if the JKS has initialized properly, there should not exits a &quot;new&quot; and &quot;old&quot; file at the time of flush. no ?&lt;/p&gt;
</comment>
                            <comment id="14081220" author="asuresh" created="Thu, 31 Jul 2014 18:17:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;tucu00&lt;/a&gt;, in my previous comment, for the first item, I now see why you need to throw an exception.. please ignore.&lt;/p&gt;</comment>
                            <comment id="14082050" author="asuresh" created="Fri, 1 Aug 2014 08:04:10 +0000"  >&lt;p&gt;Updated patch with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;tucu00&lt;/a&gt;&apos;s feedback suggestions&lt;/p&gt;</comment>
                            <comment id="14082169" author="hadoopqa" created="Fri, 1 Aug 2014 11:54:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12659118/HADOOP-10224.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12659118/HADOOP-10224.3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The following test timeouts occurred in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.http.TestHttpServerLifecycle&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4397//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4397//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4397//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4397//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14082553" author="tucu00" created="Fri, 1 Aug 2014 17:21:51 +0000"  >&lt;p&gt;In the constructor, the &lt;tt&gt;throw new IOException(&quot;Keystore cannot be loaded !!&quot;);&lt;/tt&gt; should be more descriptive of the problem, why is the exception is being thrown, that CURRENT &amp;amp; _NEW exists, and it should not be the case, only one should be there.&lt;/p&gt;

&lt;p&gt;In the constructor, when loading the CURRENT and having an error other than bad password we should log that CURRENT was corrupted and we loaded OLD. We should rename CURRENT to &lt;em&gt;BAD&lt;/em&gt;$DATE, and report that as well for an admin to delete it.&lt;/p&gt;

&lt;p&gt;When loading _NEW and corrupt, we should report that in the exception message clearly. Also, shouldn&#8217;t we be renaming _NEW to CURRENT here?&lt;/p&gt;

&lt;p&gt;&quot;// Check if _NEW exists (incase flush had finished writing but not&quot;, typo &quot;in case&quot;&lt;/p&gt;

&lt;p&gt;&quot;KeyStore intialized anew sucessfully&quot; 2 typos, &quot;KeyStore initialized anew successfully&quot;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;isBadorWrongPassword()&lt;/tt&gt; method, always use {}s for IF blocks.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;loadFromPath()&lt;/tt&gt;, you don&#8217;t want to rename until you know you can load the keystore, i would do the rename outside of here.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;flush()&lt;/tt&gt;, when renaming files verify rename is successful (boolean return value) and fail if not.&lt;/p&gt;</comment>
                            <comment id="14082644" author="asuresh" created="Fri, 1 Aug 2014 18:07:57 +0000"  >&lt;p&gt;Updated patch. thanx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;tucu00&lt;/a&gt; for the reviews&lt;/p&gt;</comment>
                            <comment id="14082855" author="hadoopqa" created="Fri, 1 Aug 2014 20:04:12 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12659217/HADOOP-10224.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12659217/HADOOP-10224.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4403//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4403//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4403//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4403//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14082873" author="asuresh" created="Fri, 1 Aug 2014 20:13:29 +0000"  >&lt;p&gt;Added one more test&lt;/p&gt;</comment>
                            <comment id="14083000" author="hadoopqa" created="Fri, 1 Aug 2014 21:36:13 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12659242/HADOOP-10224.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12659242/HADOOP-10224.5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4404//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4404//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4404//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4404//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14083896" author="asuresh" created="Sun, 3 Aug 2014 07:31:04 +0000"  >&lt;p&gt;Updating patch with minor error message modifications.&lt;/p&gt;</comment>
                            <comment id="14083899" author="asuresh" created="Sun, 3 Aug 2014 07:38:20 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmccay&quot; class=&quot;user-hover&quot; rel=&quot;lmccay&quot;&gt;lmccay&lt;/a&gt;, I was wondering if you were ok with the patch or if you had any further suggestions with regard to this.&lt;/p&gt;</comment>
                            <comment id="14083919" author="hadoopqa" created="Sun, 3 Aug 2014 08:21:51 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12659530/HADOOP-10224.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12659530/HADOOP-10224.6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.metrics2.impl.TestMetricsSystemImpl&lt;br/&gt;
                  org.apache.hadoop.ha.TestZKFailoverControllerStress&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4413//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4413//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4413//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4413//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14083922" author="asuresh" created="Sun, 3 Aug 2014 08:42:13 +0000"  >&lt;p&gt;The above test errors are un-related to the patch.&lt;/p&gt;</comment>
                            <comment id="14085005" author="asuresh" created="Mon, 4 Aug 2014 18:10:11 +0000"  >&lt;p&gt;Minor re-factor&lt;/p&gt;</comment>
                            <comment id="14085090" author="hadoopqa" created="Mon, 4 Aug 2014 18:56:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12659685/HADOOP-10224.7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12659685/HADOOP-10224.7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.metrics2.impl.TestMetricsSystemImpl&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4419//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4419//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4419//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4419//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14085202" author="tucu00" created="Mon, 4 Aug 2014 20:06:07 +0000"  >&lt;p&gt;LGTM +1. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmccay&quot; class=&quot;user-hover&quot; rel=&quot;lmccay&quot;&gt;lmccay&lt;/a&gt;, do you want to review the latest patch? I&apos;ll wait till WED morning to commit.&lt;/p&gt;</comment>
                            <comment id="14085656" author="lmccay" created="Tue, 5 Aug 2014 01:51:18 +0000"  >&lt;p&gt;I will have a look tonight or tomorrow, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tucu00&quot; class=&quot;user-hover&quot; rel=&quot;tucu00&quot;&gt;tucu00&lt;/a&gt;.&lt;br/&gt;
Thanks for the opportunity to do so.&lt;/p&gt;</comment>
                            <comment id="14085673" author="lmccay" created="Tue, 5 Aug 2014 02:14:13 +0000"  >&lt;p&gt;Thanks for the patch for this - it will be helpful in both the KeyProvider and CredentialProvider APIs!&lt;/p&gt;

&lt;p&gt;Personally, I think that we can make that method a bit more concise and readable - consolidate the boilerplate code that verifies that the old or new keystores can be loaded, renamed and/or deleted into a common method. Also, break the other exception handling blocks into separate methods. This is just for readability and maintainability. &lt;/p&gt;

&lt;p&gt;I will try and dig into the actual behavior there tomorrow. Hopefully, with a more easily read version? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14085903" author="asuresh" created="Tue, 5 Aug 2014 07:04:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmccay&quot; class=&quot;user-hover&quot; rel=&quot;lmccay&quot;&gt;lmccay&lt;/a&gt;, Ive re-factored the JKS constructor a bit. Hope this helps to make it a bit more readable.&lt;/p&gt;</comment>
                            <comment id="14085994" author="hadoopqa" created="Tue, 5 Aug 2014 08:25:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12659844/HADOOP-10224.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12659844/HADOOP-10224.8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.net.TestNetUtils&lt;br/&gt;
                  org.apache.hadoop.security.TestDoAsEffectiveUser&lt;br/&gt;
                  org.apache.hadoop.ipc.TestRPC&lt;br/&gt;
                  org.apache.hadoop.ipc.TestRPCCallBenchmark&lt;br/&gt;
                  org.apache.hadoop.crypto.key.TestKeyProviderFactory&lt;br/&gt;
                  org.apache.hadoop.security.TestSecurityUtil&lt;br/&gt;
                  org.apache.hadoop.ipc.TestIPC&lt;br/&gt;
                  org.apache.hadoop.conf.TestConfiguration&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4427//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4427//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4427//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4427//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14086647" author="hadoopqa" created="Tue, 5 Aug 2014 19:40:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12659844/HADOOP-10224.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12659844/HADOOP-10224.8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-common-project/hadoop-common:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.ipc.TestRPCCallBenchmark&lt;br/&gt;
                  org.apache.hadoop.net.TestNetUtils&lt;br/&gt;
                  org.apache.hadoop.security.TestSecurityUtil&lt;br/&gt;
                  org.apache.hadoop.crypto.key.TestKeyProviderFactory&lt;br/&gt;
                  org.apache.hadoop.ipc.TestRPC&lt;br/&gt;
                  org.apache.hadoop.security.TestDoAsEffectiveUser&lt;br/&gt;
                  org.apache.hadoop.conf.TestConfiguration&lt;br/&gt;
                  org.apache.hadoop.ipc.TestIPC&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4429//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4429//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4429//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4429//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14086658" author="lmccay" created="Tue, 5 Aug 2014 19:55:06 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asuresh&quot; class=&quot;user-hover&quot; rel=&quot;asuresh&quot;&gt;asuresh&lt;/a&gt;! That should make it easier to read. I will take a look at the general behavior tonight. Thanks again.&lt;/p&gt;</comment>
                            <comment id="14087062" author="hadoopqa" created="Wed, 6 Aug 2014 01:08:12 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12659844/HADOOP-10224.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12659844/HADOOP-10224.8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4432//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4432//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4432//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4432//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14087680" author="lmccay" created="Wed, 6 Aug 2014 13:48:06 +0000"  >&lt;p&gt;Reviewing in detail now - will have feedback shortly.&lt;/p&gt;</comment>
                            <comment id="14087773" author="lmccay" created="Wed, 6 Aug 2014 15:12:34 +0000"  >&lt;p&gt;This is understandably a complicated dance and it seems that you have thought through a great number (if not all) of the complexities. I am going to need a little more time to grok them all.&lt;/p&gt;

&lt;p&gt;In the meantime, here are my initial observations:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the refactoring is in the right direction but seems like it may need a little more polishing&lt;/li&gt;
	&lt;li&gt;I am currently trying to see whether we can consolidate the tryLoadFromPath and loadAndReturnPerm methods - they are largely the same in implementation and goals.&lt;/li&gt;
	&lt;li&gt;throwing exception if config file specified but not found - changes default password behavior. This may be acceptable given that an explicit action of configuring a password file was taken but misconfigured but I just wanted to make sure that we were aware that this is short-circuiting the previous behavior.&lt;/li&gt;
	&lt;li&gt;comment for the Need to save off the permissions in case it has to be rewritten should be moved to where that is actually being done now - or perhaps this whole block could be in a saveOffPermissions method.&lt;/li&gt;
	&lt;li&gt;I think that the comments in the following block are misleading and should be reworded to indicate that we are testing whether flush has completed successfully or they should moved inside the condition that proves that it hasn&apos;t:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(path)) {
        &lt;span class=&quot;code-comment&quot;&gt;// flush did not proceed to completion
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// _NEW should not exist
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fs.exists(newPath)) {
          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(
              &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;Keystore not loaded due to some inconsistency &quot;&lt;/span&gt;
              + &lt;span class=&quot;code-quote&quot;&gt;&quot;(&lt;span class=&quot;code-quote&quot;&gt;&apos;%s&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;%s&apos;&lt;/span&gt; should not exist together)!!&quot;&lt;/span&gt;, path, newPath));
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;d also like to know whether and how this has been functionally tested with concurrent activity in order to tease out all of these scenarios. I am a little concerned about _NEW and _OLDs getting stepped on by concurrent requests. Especially in KMS.&lt;/p&gt;</comment>
                            <comment id="14088042" author="asuresh" created="Wed, 6 Aug 2014 18:59:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmccay&quot; class=&quot;user-hover&quot; rel=&quot;lmccay&quot;&gt;lmccay&lt;/a&gt;, Thank you for the review and feedback. Will post a followup patch with your suggestions. Couple of things though :&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;blockquote&gt;&lt;p&gt;.. consolidate the tryLoadFromPath and loadAndReturnPerm methods ..&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The &lt;tt&gt;try..&lt;/tt&gt; methods were intended to mark the different code paths and thereby reduce the size of the constructor making it a bit more readable. The &lt;tt&gt;loadAndReturnPerm&lt;/tt&gt; method is more a utility method that is used in a couple of places. I agree it might look similar, but I feel we should keep it as it is to aid the readability.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;blockquote&gt;&lt;p&gt;I&apos;d also like to know whether and how this has been functionally tested with concurrent activity in order to tease out all of these scenarios. I am a little concerned about _NEW and _OLDs getting stepped on by concurrent requests. Especially in KMS.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So, The KMS is always configured with a single instance of the JKS and the &lt;tt&gt;flush()&lt;/tt&gt; method is protected by a writeLock. The constructor is the only other thing that can mess up the _NEW and _OLD files, which I don&apos;t think will be called concurrently. &lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14089228" author="lmccay" created="Thu, 7 Aug 2014 13:49:54 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asuresh&quot; class=&quot;user-hover&quot; rel=&quot;asuresh&quot;&gt;asuresh&lt;/a&gt; - &lt;/p&gt;

&lt;p&gt;Sorry for taking longer than I anticipated to review this.&lt;br/&gt;
I understood what you were doing with the methods but something doesn&apos;t feel quite right about how similar they actually are. There are a couple things that I think would make it easier to understand:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;javadocs on those private methods that really explain what is being done&lt;/li&gt;
	&lt;li&gt;the tryLoadFromPath takes a path argument but is being passed the oldPath which seems wrong from where it is being called. You have to read the method to understand that it is being passed to clean up or to fallback to. Either pass both paths as arguments, make them all member variables or somehow change the name of the method to make it more clear that it is the right argument to pass.&lt;/li&gt;
	&lt;li&gt;inside flush - I think you could extract a couple methods like backupOld, restoreOld or something to that effect. We are basically implementing a common pattern of backup, write-new and swap the current to new or old versions. We should be able to code to methods that are representing that pattern clearly.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Functionally, it all seems to hold together to me.&lt;br/&gt;
Given sufficient javadocs and maybe some new methods and names - I think it will be ready to go.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="14091300" author="asuresh" created="Fri, 8 Aug 2014 21:02:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmccay&quot; class=&quot;user-hover&quot; rel=&quot;lmccay&quot;&gt;lmccay&lt;/a&gt;, Thank you for your detailed review and suggestions.&lt;br/&gt;
Updating the patch addressing your feedback comments...&lt;/p&gt;</comment>
                            <comment id="14091408" author="tucu00" created="Fri, 8 Aug 2014 22:54:49 +0000"  >&lt;p&gt;+1 pending jenkins.&lt;/p&gt;</comment>
                            <comment id="14091439" author="lmccay" created="Fri, 8 Aug 2014 23:22:33 +0000"  >&lt;p&gt;Thank you, Arun!&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="14091463" author="hadoopqa" created="Fri, 8 Aug 2014 23:49:17 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12660714/HADOOP-10224.9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12660714/HADOOP-10224.9.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in hadoop-common-project/hadoop-common.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4444//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4444//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/4444//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/4444//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14091474" author="tucu00" created="Sat, 9 Aug 2014 00:01:15 +0000"  >&lt;p&gt;Thanks Arun, nice work. Thanks Larry for reviewing it in detail. Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="14091518" author="hudson" created="Sat, 9 Aug 2014 00:52:25 +0000"  >&lt;p&gt;FAILURE: Integrated in Hadoop-trunk-Commit #6040 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/6040/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/6040/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10224&quot; title=&quot;JavaKeyStoreProvider has to protect against corrupting underlying store&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10224&quot;&gt;&lt;del&gt;HADOOP-10224&lt;/del&gt;&lt;/a&gt;. JavaKeyStoreProvider has to protect against corrupting underlying store. (asuresh via tucu) (tucu: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1616908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1616908&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/JavaKeyStoreProvider.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/crypto/key/TestKeyProviderFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14091725" author="hudson" created="Sat, 9 Aug 2014 11:30:14 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Yarn-trunk #639 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/639/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/639/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10224&quot; title=&quot;JavaKeyStoreProvider has to protect against corrupting underlying store&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10224&quot;&gt;&lt;del&gt;HADOOP-10224&lt;/del&gt;&lt;/a&gt;. JavaKeyStoreProvider has to protect against corrupting underlying store. (asuresh via tucu) (tucu: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1616908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1616908&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/JavaKeyStoreProvider.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/crypto/key/TestKeyProviderFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14091758" author="hudson" created="Sat, 9 Aug 2014 14:04:08 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Hdfs-trunk #1832 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1832/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1832/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10224&quot; title=&quot;JavaKeyStoreProvider has to protect against corrupting underlying store&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10224&quot;&gt;&lt;del&gt;HADOOP-10224&lt;/del&gt;&lt;/a&gt;. JavaKeyStoreProvider has to protect against corrupting underlying store. (asuresh via tucu) (tucu: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1616908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1616908&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/JavaKeyStoreProvider.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/crypto/key/TestKeyProviderFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14091778" author="hudson" created="Sat, 9 Aug 2014 14:57:04 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Mapreduce-trunk #1858 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1858/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1858/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10224&quot; title=&quot;JavaKeyStoreProvider has to protect against corrupting underlying store&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10224&quot;&gt;&lt;del&gt;HADOOP-10224&lt;/del&gt;&lt;/a&gt;. JavaKeyStoreProvider has to protect against corrupting underlying store. (asuresh via tucu) (tucu: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1616908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1616908&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/JavaKeyStoreProvider.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/crypto/key/TestKeyProviderFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12728732">HADOOP-10869</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12658926" name="HADOOP-10224.1.patch" size="5735" author="asuresh" created="Thu, 31 Jul 2014 13:39:00 +0000"/>
                            <attachment id="12658939" name="HADOOP-10224.2.patch" size="6833" author="asuresh" created="Thu, 31 Jul 2014 16:04:24 +0000"/>
                            <attachment id="12659118" name="HADOOP-10224.3.patch" size="12358" author="asuresh" created="Fri, 1 Aug 2014 08:04:10 +0000"/>
                            <attachment id="12659217" name="HADOOP-10224.4.patch" size="12697" author="asuresh" created="Fri, 1 Aug 2014 18:07:57 +0000"/>
                            <attachment id="12659242" name="HADOOP-10224.5.patch" size="13549" author="asuresh" created="Fri, 1 Aug 2014 20:13:29 +0000"/>
                            <attachment id="12659530" name="HADOOP-10224.6.patch" size="13515" author="asuresh" created="Sun, 3 Aug 2014 07:31:04 +0000"/>
                            <attachment id="12659685" name="HADOOP-10224.7.patch" size="13477" author="asuresh" created="Mon, 4 Aug 2014 18:10:11 +0000"/>
                            <attachment id="12659844" name="HADOOP-10224.8.patch" size="13469" author="asuresh" created="Tue, 5 Aug 2014 07:04:42 +0000"/>
                            <attachment id="12660714" name="HADOOP-10224.9.patch" size="14859" author="asuresh" created="Fri, 8 Aug 2014 21:02:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367381</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rbq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367690</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>