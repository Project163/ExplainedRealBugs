<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:36:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HADOOP-8146] FsShell commands cannot be interrupted</title>
                <link>https://issues.apache.org/jira/browse/HADOOP-8146</link>
                <project id="12310240" key="HADOOP">Hadoop Common</project>
                    <description>&lt;p&gt;Control-c is apparently generating &lt;tt&gt;InterruptedIOExceptions&lt;/tt&gt;.  The path processing loop traps &lt;tt&gt;IOException&lt;/tt&gt;, displays the error, and moves to the next path.  This means that recursive operations cannot be aborted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12545420">HADOOP-8146</key>
            <summary>FsShell commands cannot be interrupted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daryn">Daryn Sharp</assignee>
                                    <reporter username="daryn">Daryn Sharp</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Mar 2012 23:10:29 +0000</created>
                <updated>Wed, 28 Mar 2012 09:19:45 +0000</updated>
                            <resolved>Fri, 9 Mar 2012 19:42:24 +0000</resolved>
                                    <version>0.23.0</version>
                    <version>0.24.0</version>
                                    <fixVersion>0.23.2</fixVersion>
                                    <component>fs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13223778" author="daryn" created="Tue, 6 Mar 2012 23:12:34 +0000"  >&lt;p&gt;convert InterruptedIOException into a runtime exception and catch it in the run method&lt;/p&gt;</comment>
                            <comment id="13223825" author="hadoopqa" created="Tue, 6 Mar 2012 23:45:37 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12517334/HADOOP-8146.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12517334/HADOOP-8146.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/681//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/681//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HADOOP-Build/681//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HADOOP-Build/681//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13223988" author="umamaheswararao" created="Wed, 7 Mar 2012 05:35:33 +0000"  >&lt;p&gt;Hi Daryn,&lt;br/&gt;
 It make sense to handle interrupt exceptions as you mentioned it is creating problem with recursive operations.&lt;/p&gt;

&lt;p&gt;I reviewed your patch, few comments.&lt;/p&gt;

&lt;p&gt;1) Instead of hardcoding return codes, why can&apos;t we create some enum with exitcodes for more readability?&lt;/p&gt;

&lt;p&gt;something like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; ExitCodes {
    SUCCESS(0), ERROR(1), INTERRUPT(130);
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; exitCode;

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; ExitCodes(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; exitCode) {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.exitCode = exitCode;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getValue() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.exitCode;
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2) Could you please add a test with recursive operations by extending some existing command class and put your counter for testing and register that command. what do you say? &lt;/p&gt;</comment>
                            <comment id="13224490" author="daryn" created="Wed, 7 Mar 2012 16:39:47 +0000"  >&lt;ol&gt;
	&lt;li&gt;I think it&apos;s overall a good idea, but dfsadmin is still subclassing FsShell/Command.  It&apos;s not using the rest of the logic, but I&apos;d rather not change nor risk destabilizing that command at this time.  Would you be willing to file a new jira?&lt;/li&gt;
	&lt;li&gt;I wish I could, but the commands do not have public visibility to prevent direct instantiation.  All the loops for processing paths including a try loop that catches IOException, so interrupts are always converted to exceptions.  The 2nd interrupt test does already exercise recursion into a directory.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Let me know if you want me to make further changes.&lt;/p&gt;</comment>
                            <comment id="13225432" author="umamaheswararao" created="Thu, 8 Mar 2012 19:38:33 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I think it&apos;s overall a good idea, but dfsadmin is still subclassing FsShell/Command. It&apos;s not using the rest of the logic, but I&apos;d rather not change nor risk destabilizing that command at this time. Would you be willing to file a new jira?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, please file it.&lt;/p&gt;

&lt;p&gt;Agree with your second point.&lt;/p&gt;

&lt;p&gt;+1 for the patch.&lt;/p&gt;</comment>
                            <comment id="13225437" author="umamaheswararao" created="Thu, 8 Mar 2012 19:48:24 +0000"  >&lt;p&gt;I will commit this patch tomorrow if there are no other comments.&lt;/p&gt;</comment>
                            <comment id="13225462" author="daryn" created="Thu, 8 Mar 2012 20:23:16 +0000"  >&lt;p&gt;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8155&quot; title=&quot;Use enum for shell exit codes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8155&quot;&gt;HADOOP-8155&lt;/a&gt; for the enum improvement.  Thanks!&lt;/p&gt;</comment>
                            <comment id="13226315" author="hudson" created="Fri, 9 Mar 2012 18:55:28 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk-Commit #1933 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1933/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1933/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8146&quot; title=&quot;FsShell commands cannot be interrupted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8146&quot;&gt;&lt;del&gt;HADOOP-8146&lt;/del&gt;&lt;/a&gt;.  FsShell commands cannot be interrupted. Contributed by Daryn Shar (Revision 1298976)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
umamahesh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFsShellReturnCode.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13226318" author="hudson" created="Fri, 9 Mar 2012 18:56:16 +0000"  >&lt;p&gt;Integrated in Hadoop-Common-trunk-Commit #1858 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1858/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1858/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8146&quot; title=&quot;FsShell commands cannot be interrupted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8146&quot;&gt;&lt;del&gt;HADOOP-8146&lt;/del&gt;&lt;/a&gt;.  FsShell commands cannot be interrupted. Contributed by Daryn Shar (Revision 1298976)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
umamahesh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFsShellReturnCode.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13226337" author="umamaheswararao" created="Fri, 9 Mar 2012 19:11:41 +0000"  >&lt;p&gt;Just Committed to Trunk. Thanks a lot to Daryn!&lt;br/&gt;
Will merge it to 23.2 as well.&lt;/p&gt;</comment>
                            <comment id="13226369" author="hudson" created="Fri, 9 Mar 2012 19:36:19 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk-Commit #1867 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1867/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1867/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8146&quot; title=&quot;FsShell commands cannot be interrupted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8146&quot;&gt;&lt;del&gt;HADOOP-8146&lt;/del&gt;&lt;/a&gt;.  FsShell commands cannot be interrupted. Contributed by Daryn Shar (Revision 1298976)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
umamahesh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFsShellReturnCode.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13226376" author="umamaheswararao" created="Fri, 9 Mar 2012 19:42:24 +0000"  >&lt;p&gt;Merged to 23.2 also. Thanks!&lt;/p&gt;</comment>
                            <comment id="13226830" author="hudson" created="Sat, 10 Mar 2012 12:53:47 +0000"  >&lt;p&gt;Integrated in Hadoop-Hdfs-trunk #980 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/980/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/980/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8146&quot; title=&quot;FsShell commands cannot be interrupted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8146&quot;&gt;&lt;del&gt;HADOOP-8146&lt;/del&gt;&lt;/a&gt;.  FsShell commands cannot be interrupted. Contributed by Daryn Shar (Revision 1298976)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
umamahesh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFsShellReturnCode.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13226851" author="hudson" created="Sat, 10 Mar 2012 13:57:05 +0000"  >&lt;p&gt;Integrated in Hadoop-Mapreduce-trunk #1015 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1015/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1015/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8146&quot; title=&quot;FsShell commands cannot be interrupted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-8146&quot;&gt;&lt;del&gt;HADOOP-8146&lt;/del&gt;&lt;/a&gt;.  FsShell commands cannot be interrupted. Contributed by Daryn Shar (Revision 1298976)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
umamahesh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298976&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Command.java&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestFsShellReturnCode.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12517334" name="HADOOP-8146.patch" size="4263" author="daryn" created="Tue, 6 Mar 2012 23:12:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 37 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07ux3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43776</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12319855">0.23.2</customfieldvalue>
    <customfieldvalue id="12317652">0.24.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>