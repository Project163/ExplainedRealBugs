<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:32:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FTPSERVER-103] DirectoryListerTest fails when listed files come back in unexpected order; breaks build</title>
                <link>https://issues.apache.org/jira/browse/FTPSERVER-103</link>
                <project id="10571" key="FTPSERVER">FtpServer</project>
                    <description>&lt;p&gt;DirectoryListerTest fails when listed files come back in unexpected order; breaks build.&lt;/p&gt;

&lt;p&gt;The project can&apos;t be built completely because of this.&lt;/p&gt;

&lt;p&gt;To fix, replace the testListFiles() function in DirectoryListerTest.java with the following:&lt;/p&gt;

&lt;p&gt;    public void testListFiles() throws Exception {&lt;br/&gt;
        ListArgument arg = new ListArgument(TEST_DIR1.getName(), null, null);&lt;br/&gt;
        FileFormater formater = new NLSTFileFormater();&lt;/p&gt;

&lt;p&gt;        String actual = directoryLister.listFiles(arg, fileSystemView, formater);&lt;br/&gt;
/// This doesn&apos;t work because the files sometimes come back in a different order.&lt;br/&gt;
///        assertEquals(&quot;dir3\r\ntest3.txt\r\ntest4.txt\r\n&quot;, actual);&lt;br/&gt;
		java.util.StringTokenizer st = new java.util.StringTokenizer(actual, &quot;\r\n&quot;);&lt;br/&gt;
		boolean gotDir3 = false, gotTest3_txt = false, gotTest4_txt = false;&lt;br/&gt;
		int i = 0;&lt;br/&gt;
		while (true) {&lt;br/&gt;
			if (!st.hasMoreTokens()) break;&lt;br/&gt;
			String s = st.nextToken();&lt;br/&gt;
			if (s.length() &amp;gt; 0) {&lt;br/&gt;
				i++;&lt;br/&gt;
				if (s.equals(&quot;dir3&quot;)) &lt;/p&gt;
{
					gotDir3 = true;
				}
&lt;p&gt; else if (s.equals(&quot;test3.txt&quot;)) &lt;/p&gt;
{
					gotTest3_txt = true;
				}
&lt;p&gt; else if (s.equals(&quot;test4.txt&quot;)) &lt;/p&gt;
{
					gotTest4_txt = true;
				}
&lt;p&gt;			}&lt;br/&gt;
		}&lt;br/&gt;
		assertTrue((i == 3) &amp;amp;&amp;amp; gotDir3 &amp;amp;&amp;amp; gotTest3_txt &amp;amp;&amp;amp; gotTest4_txt);&lt;br/&gt;
    }&lt;/p&gt;</description>
                <environment>Windows XP</environment>
        <key id="12375711">FTPSERVER-103</key>
            <summary>DirectoryListerTest fails when listed files come back in unexpected order; breaks build</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="roncemer">Ron Cemer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Aug 2007 00:34:31 +0000</created>
                <updated>Sun, 12 Aug 2007 12:22:42 +0000</updated>
                            <resolved>Sun, 12 Aug 2007 12:22:42 +0000</resolved>
                                    <version>1.0.0-M1</version>
                    <version>1.0.0-M2</version>
                    <version>1.0.0</version>
                    <version>WISHLIST</version>
                                    <fixVersion>1.0.0-M2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12518885" author="roncemer" created="Fri, 10 Aug 2007 00:36:33 +0000"  >&lt;p&gt;Replacement DirectoryListerTest.java with the bug fixed.&lt;/p&gt;</comment>
                            <comment id="12518961" author="niklas" created="Fri, 10 Aug 2007 09:36:31 +0000"  >&lt;p&gt;Thanks for reporting. Should we attack this problem by updating the test to allow random order or should we force an order in the lister?&lt;/p&gt;</comment>
                            <comment id="12519029" author="roncemer" created="Fri, 10 Aug 2007 14:56:02 +0000"  >&lt;p&gt;Hmmm, good question.  Seems like if you sort the filenames in the lister, it may be more consistent.  If you take that approach, there would be no need to change the test class.&lt;/p&gt;</comment>
                            <comment id="12519298" author="niklas" created="Sun, 12 Aug 2007 12:22:42 +0000"  >&lt;p&gt;Fixed by now returting a sorted file listing. Thanks for reporting!&lt;/p&gt;

&lt;p&gt;commit -m &quot;Make sure files are returned in alphabetical order (&lt;a href=&quot;https://issues.apache.org/jira/browse/FTPSERVER-103&quot; title=&quot;DirectoryListerTest fails when listed files come back in unexpected order; breaks build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FTPSERVER-103&quot;&gt;&lt;del&gt;FTPSERVER-103&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
Refactor tests further to make the reusable for other file system implementations&quot; C:/home/niklas/workspaces/apache/ftpserver/ftplet-api/src/java/org/apache/ftpserver/ftplet/FileObject.java C:/home/niklas/workspaces/apache/ftpserver/core/src/java/org/apache/ftpserver/filesystem/NativeFileObject.java C:/home/niklas/workspaces/apache/ftpserver/core/src/java/org/apache/ftpserver/listing/DirectoryLister.java C:/home/niklas/workspaces/apache/ftpserver/core/src/test/org/apache/ftpserver/filesystem/FileObjectTestTemplate.java C:/home/niklas/workspaces/apache/ftpserver/core/src/test/org/apache/ftpserver/filesystem/FileSystemViewTemplate.java C:/home/niklas/workspaces/apache/ftpserver/core/src/test/org/apache/ftpserver/filesystem/NativeFileObjectTest.java C:/home/niklas/workspaces/apache/ftpserver/core/src/test/org/apache/ftpserver/filesystem/NativeFileSystemViewTest.java&lt;br/&gt;
    Sending        C:/home/niklas/workspaces/apache/ftpserver/core/src/java/org/apache/ftpserver/filesystem/NativeFileObject.java&lt;br/&gt;
    Sending        C:/home/niklas/workspaces/apache/ftpserver/core/src/java/org/apache/ftpserver/listing/DirectoryLister.java&lt;br/&gt;
    Sending        C:/home/niklas/workspaces/apache/ftpserver/core/src/test/org/apache/ftpserver/filesystem/FileObjectTestTemplate.java&lt;br/&gt;
    Adding         C:/home/niklas/workspaces/apache/ftpserver/core/src/test/org/apache/ftpserver/filesystem/FileSystemViewTemplate.java&lt;br/&gt;
    Sending        C:/home/niklas/workspaces/apache/ftpserver/core/src/test/org/apache/ftpserver/filesystem/NativeFileObjectTest.java&lt;br/&gt;
    Sending        C:/home/niklas/workspaces/apache/ftpserver/core/src/test/org/apache/ftpserver/filesystem/NativeFileSystemViewTest.java&lt;br/&gt;
    Sending        C:/home/niklas/workspaces/apache/ftpserver/ftplet-api/src/java/org/apache/ftpserver/ftplet/FileObject.java&lt;br/&gt;
    Transmitting file data ...&lt;br/&gt;
    Committed revision 565040.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12363546" name="DirectoryListerTest.java" size="3911" author="roncemer" created="Fri, 10 Aug 2007 00:36:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38966</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i096dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>51467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>