{"url":"https://api.github.com/repos/xunit/xunit/issues/1585","repository_url":"https://api.github.com/repos/xunit/xunit","labels_url":"https://api.github.com/repos/xunit/xunit/issues/1585/labels{/name}","comments_url":"https://api.github.com/repos/xunit/xunit/issues/1585/comments","events_url":"https://api.github.com/repos/xunit/xunit/issues/1585/events","html_url":"https://github.com/xunit/xunit/issues/1585","id":276857087,"node_id":"MDU6SXNzdWUyNzY4NTcwODc=","number":1585,"title":"Newer platforms (macOS 10.13, Ubuntu 17, Debian 9) are broken with `dotnet xunit`","user":{"login":"andreabalducci","id":212729,"node_id":"MDQ6VXNlcjIxMjcyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/212729?v=4","gravatar_id":"","url":"https://api.github.com/users/andreabalducci","html_url":"https://github.com/andreabalducci","followers_url":"https://api.github.com/users/andreabalducci/followers","following_url":"https://api.github.com/users/andreabalducci/following{/other_user}","gists_url":"https://api.github.com/users/andreabalducci/gists{/gist_id}","starred_url":"https://api.github.com/users/andreabalducci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreabalducci/subscriptions","organizations_url":"https://api.github.com/users/andreabalducci/orgs","repos_url":"https://api.github.com/users/andreabalducci/repos","events_url":"https://api.github.com/users/andreabalducci/events{/privacy}","received_events_url":"https://api.github.com/users/andreabalducci/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":75574707,"node_id":"MDU6TGFiZWw3NTU3NDcwNw==","url":"https://api.github.com/repos/xunit/xunit/labels/Bug","name":"Bug","color":"FEF2C0","default":false,"description":"A fault in an existing feature"},{"id":176559198,"node_id":"MDU6TGFiZWwxNzY1NTkxOTg=","url":"https://api.github.com/repos/xunit/xunit/labels/External","name":"External","color":"C2E0C6","default":false,"description":"The issue is caused by an external party"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2017-11-26T21:14:00Z","updated_at":"2017-12-18T08:23:57Z","closed_at":"2017-12-18T05:08:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Platform: MacOs\r\nDotnet version: 2.0.0\r\n\r\nUpgrading xunit-runner from 2.3.0-beta1-build3642 to 2.3.0 breaks SqlClient (2.3.1 is broken too).\r\n\r\nRepro: https://github.com/andreabalducci/xunit-issue\r\n\r\n```\r\nusing System;\r\nusing System.Data.SqlClient;\r\nusing Xunit;\r\n\r\nnamespace xunit_issue\r\n{\r\n    public class Sqltest\r\n    {\r\n        [Fact]\r\n        public void should_connect()\r\n        {\r\n            var ex = Assert.Throws<InvalidOperationException>(() =>\r\n             {\r\n                 using (var connection = new SqlConnection())\r\n                 {\r\n                     using (var cmd = new SqlCommand(\"SELECT 1\"))\r\n                     {\r\n                         cmd.ExecuteNonQuery();\r\n                     }\r\n                 }\r\n             });\r\n\r\n             Assert.True(ex.Message.StartsWith(\"ExecuteNonQuery: Connection property\"));\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\nRunning .NET Core 2.0.0 tests for framework netcoreapp2.0...\r\nxUnit.net Console Runner (64-bit .NET Core 4.6.00001.0)\r\n  Discovering: xunit-issue\r\n  Discovered:  xunit-issue\r\n  Starting:    xunit-issue\r\n    xunit_issue.Sqltest.should_connect [FAIL]\r\n      Assert.Throws() Failure\r\n      Expected: typeof(System.InvalidOperationException)\r\n      Actual:   typeof(System.PlatformNotSupportedException): System.Data.SqlClient is not supported on this platform.\r\n      Stack Trace:\r\n           at System.Data.SqlClient.SqlConnection..ctor()\r\n        /Users/andrea/dev/xunit-issue/Sqltest.cs(14,0): at xunit_issue.Sqltest.<>c.<should_connect>b__0_0()\r\n  Finished:    xunit-issue\r\n=== TEST EXECUTION SUMMARY ===\r\n   xunit-issue  Total: 1, Errors: 0, Failed: 1, Skipped: 0, Time: 0,271s\r\n```","closed_by":{"login":"bradwilson","id":16944,"node_id":"MDQ6VXNlcjE2OTQ0","avatar_url":"https://avatars.githubusercontent.com/u/16944?v=4","gravatar_id":"","url":"https://api.github.com/users/bradwilson","html_url":"https://github.com/bradwilson","followers_url":"https://api.github.com/users/bradwilson/followers","following_url":"https://api.github.com/users/bradwilson/following{/other_user}","gists_url":"https://api.github.com/users/bradwilson/gists{/gist_id}","starred_url":"https://api.github.com/users/bradwilson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradwilson/subscriptions","organizations_url":"https://api.github.com/users/bradwilson/orgs","repos_url":"https://api.github.com/users/bradwilson/repos","events_url":"https://api.github.com/users/bradwilson/events{/privacy}","received_events_url":"https://api.github.com/users/bradwilson/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/xunit/xunit/issues/1585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/xunit/xunit/issues/1585/timeline","performed_via_github_app":null,"state_reason":"completed"}