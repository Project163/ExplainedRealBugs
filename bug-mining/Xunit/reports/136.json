{"url":"https://api.github.com/repos/xunit/xunit/issues/1673","repository_url":"https://api.github.com/repos/xunit/xunit","labels_url":"https://api.github.com/repos/xunit/xunit/issues/1673/labels{/name}","comments_url":"https://api.github.com/repos/xunit/xunit/issues/1673/comments","events_url":"https://api.github.com/repos/xunit/xunit/issues/1673/events","html_url":"https://github.com/xunit/xunit/issues/1673","id":307086681,"node_id":"MDU6SXNzdWUzMDcwODY2ODE=","number":1673,"title":"Add appconfig setting to enable file and line information in test failure stack traces in net472","user":{"login":"shyamnamboodiripad","id":10579684,"node_id":"MDQ6VXNlcjEwNTc5Njg0","avatar_url":"https://avatars.githubusercontent.com/u/10579684?v=4","gravatar_id":"","url":"https://api.github.com/users/shyamnamboodiripad","html_url":"https://github.com/shyamnamboodiripad","followers_url":"https://api.github.com/users/shyamnamboodiripad/followers","following_url":"https://api.github.com/users/shyamnamboodiripad/following{/other_user}","gists_url":"https://api.github.com/users/shyamnamboodiripad/gists{/gist_id}","starred_url":"https://api.github.com/users/shyamnamboodiripad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shyamnamboodiripad/subscriptions","organizations_url":"https://api.github.com/users/shyamnamboodiripad/orgs","repos_url":"https://api.github.com/users/shyamnamboodiripad/repos","events_url":"https://api.github.com/users/shyamnamboodiripad/events{/privacy}","received_events_url":"https://api.github.com/users/shyamnamboodiripad/received_events","type":"User","user_view_type":"public","site_admin":true},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-03-21T00:35:50Z","updated_at":"2018-05-21T15:23:53Z","closed_at":"2018-05-21T15:23:53Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"In order for exception stack trace information to be displayed correctly when running tests atop netfx 4.7.2 (which is not yet released) in SDK-style projects (which use portable pdbs by default), the test execution processes will require the following app config setting -\r\n\r\n```\r\n<runtime>\r\n  <AppContextSwitchOverrides value=\"Switch.System.Diagnostics.IgnorePortablePDBsInStackTraces=false\" />\r\n</runtime>\r\n```\r\n\r\nhttps://github.com/dotnet/designs/blob/master/accepted/diagnostics/debugging-with-symbols-and-sources.md#stack-traces has more details.\r\n\r\nWe will be fixing up the VS's runner processes to include this setting. Logging this issue to track corresponding fix that will be required in xUnit (console) runner (and any other non-VS execution environments for xUnit).\r\n\r\n---\r\n\r\nNote that today, for SDK-style projects targeting 4.7.1, exception stack trace does not include line number and file path information and the only work around is to switch all projects to use \"Full\" pdbs instead of \"Portable\" pdbs (the default). But once 4.7.2. is released it will be possible to \"opt-in\" for stack trace information via the above app config setting (and we will be fixing the VS runners so that this works).\r\n\r\nTo repro the behavior for net471 today -\r\n\r\n1. Create a new xunit test project in VS (File -> New Project -> .NET Core -> xUnit Test Project)\r\n2. Edit the project to change the target framework to net471\r\n3. Throw an exception from within the test\r\n4. Execute the test and look at the exception stack trace in the results pane\r\n5. Clicking on the hyperlinks in the stack trace does not work because of the missing file and line number information in the stack trace\r\n6. Adding `<DebugType>full</DebugType>` property in the project file should work around this and make the hyperlinks to work correctly\r\n\r\nhttps://developercommunity.visualstudio.com/content/problem/210760/unit-test-source-code.html contains a report of this problem.","closed_by":{"login":"bradwilson","id":16944,"node_id":"MDQ6VXNlcjE2OTQ0","avatar_url":"https://avatars.githubusercontent.com/u/16944?v=4","gravatar_id":"","url":"https://api.github.com/users/bradwilson","html_url":"https://github.com/bradwilson","followers_url":"https://api.github.com/users/bradwilson/followers","following_url":"https://api.github.com/users/bradwilson/following{/other_user}","gists_url":"https://api.github.com/users/bradwilson/gists{/gist_id}","starred_url":"https://api.github.com/users/bradwilson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradwilson/subscriptions","organizations_url":"https://api.github.com/users/bradwilson/orgs","repos_url":"https://api.github.com/users/bradwilson/repos","events_url":"https://api.github.com/users/bradwilson/events{/privacy}","received_events_url":"https://api.github.com/users/bradwilson/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/xunit/xunit/issues/1673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/xunit/xunit/issues/1673/timeline","performed_via_github_app":null,"state_reason":"completed"}