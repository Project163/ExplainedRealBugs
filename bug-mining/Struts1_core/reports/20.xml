<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:53:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[STR-2959] File upload has 2GB limit</title>
                <link>https://issues.apache.org/jira/browse/STR-2959</link>
                <project id="12311043" key="STR">Struts 1</project>
                    <description>&lt;p&gt;Struts currently has a 2GB limit on file upload.  &lt;/p&gt;

&lt;p&gt;org.apache.struts.upload has an artificial limit of 2GB.&lt;br/&gt;
org.apache.commons.fileupload does not have this limit since &apos;long&apos; is used in place of &apos;int&apos;  &lt;/p&gt;</description>
                <environment>Websphere Application Server 6.0 </environment>
        <key id="12448228">STR-2959</key>
            <summary>File upload has 2GB limit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pbenedict">Paul Benedict</assignee>
                                    <reporter username="harding">Richard Harding</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Oct 2006 09:49:17 +0000</created>
                <updated>Fri, 13 Jul 2007 09:28:53 +0000</updated>
                            <resolved>Fri, 13 Jul 2007 09:28:53 +0000</resolved>
                                    <version>1.2.7</version>
                    <version>1.2.8</version>
                    <version>1.2.9</version>
                    <version>1.3.5</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12815446" author="niallp" created="Wed, 29 Nov 2006 12:51:33 +0000"  >&lt;p&gt;Can you be specific - are you talking about the FormFile&apos;s getFileSize() method? Or was there somewhere else? I don&apos;t think this limits it to 2GB, just limits whether you can get the correct size of file&lt;/p&gt;</comment>
                            <comment id="12814824" author="pbenedict" created="Wed, 29 Nov 2006 23:13:09 +0000"  >&lt;p&gt;Isn&apos;t 2GB the upper limit of a signed integer, which is what Java uses?&lt;/p&gt;</comment>
                            <comment id="12814809" author="harding" created="Thu, 30 Nov 2006 10:12:25 +0000"  >&lt;p&gt;Not being able to get the file size is the issue I am referring to.   I am unable to confirm that struts.upload can infact deal with a larger file whilst not being able to find the size of the file.  &lt;/p&gt;

&lt;p&gt;org.apache.struts.upload simply wraps org.apache.commons.fileupload but changes the signature of the getFileSize() method to return an int.  Which, as Paul mentions, has an upper limit of about 2GB.  A long however, as used by the commons.fileupload does not have this limit.  &lt;/p&gt;</comment>
                            <comment id="12814756" author="pbenedict" created="Thu, 30 Nov 2006 23:54:54 +0000"  >&lt;p&gt;You raise a great point. I&apos;d like to see this changed too. &lt;/p&gt;</comment>
                            <comment id="12816415" author="jirareport" created="Wed, 14 Feb 2007 22:32:43 +0000"  >&lt;p&gt;I&apos;m presuming that this isn&apos;t something that would go in 1.3, but can go in 1.4? Seems like an easy fix once we can have an API change.&lt;/p&gt;</comment>
                            <comment id="12812705" author="pbenedict" created="Wed, 14 Feb 2007 23:02:55 +0000"  >&lt;p&gt;Henri, want to lead the way? The problem is resides in Jakarta Commons.&lt;/p&gt;</comment>
                            <comment id="12814833" author="niallp" created="Thu, 15 Mar 2007 23:41:07 +0000"  >&lt;p&gt;+1 to fixing in 1.4 but I would prefer we add new methods that sets/gets the size as a long and deprecate the existing ones - which would minimize the pain for the majority.&lt;/p&gt;
</comment>
                            <comment id="12808251" author="pbenedict" created="Tue, 19 Jun 2007 04:10:59 +0000"  >&lt;p&gt;I believe the signature should be changed. Adding a second method begs the question why the original one still exists, and what happens if you use it when the file is bigger than 2GB? 1.4 should be able to correct limitations of past versions. Niall, do you feel strongly about your viewpoint? Otherwise, I&apos;d like to commit a change.&lt;/p&gt;</comment>
                            <comment id="12815389" author="niallp" created="Tue, 19 Jun 2007 14:15:06 +0000"  >&lt;p&gt;We have generally been pretty careful about backwards incompatible changes using deprecate/remove cycles giving users advance warning. I see no reason not to follow that approach in this case - i.e. Add a new method that returns a long and deprecate the old method. The answer to the question &quot;why the original one still exists&quot; should of course be in the deprecation message (i.e. use the new method). Changing the method signature will of course beg the question &quot;why did you break compatibility with 1.3 without warning?&quot;&lt;/p&gt;</comment>
                            <comment id="12808242" author="pbenedict" created="Tue, 19 Jun 2007 22:33:29 +0000"  >&lt;p&gt;I forgot about deprecation. Good point, Niall.&lt;/p&gt;</comment>
                            <comment id="12808165" author="pbenedict" created="Tue, 19 Jun 2007 23:04:04 +0000"  >&lt;p&gt;On second thoughts, I still think changing the signature is better. I have this difference of opinion because FormFile is an interface and any additional methods will require an implementation change. If this was a concrete subclass, simply adding a method would be transparent and pretty non-invasive. But in this case, I see the work of adding the method is worse than the work of changing the signature.&lt;/p&gt;</comment>
                            <comment id="12815396" author="niallp" created="Wed, 20 Jun 2007 01:46:24 +0000"  >&lt;p&gt;Hmmm had forgotten this was an interface &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; but I suspect in practice most people use the default CommonsFormFile implementation and wouldn&apos;t be affected. IMO theres no real difference breaking compatibility either by changing the method signature or adding a method for anyone implementing the FormFile interface. Whatever the solution though the issue still remains about breaking compatibility between versions.&lt;/p&gt;

&lt;p&gt;At one point (2-3 years ago!) Martin was talking about enhancements to Commons FileUpload then would make the struts file upload features redundant - unfortunatley he moved on to pastures new without it coming to fruition. Anyway, from memory, there are a number of deficiencies in the file upload implementation (?multiple files with the same name, content encoding, and perhaps/probably more?) - each of which probably require at least breaking compatibility if not a new clean implementation. My question is - are we going to just address this deficiency or are others going to come along/be fixed in dribs and drabs? I would hate to see us repeatedly having this conversation. The best approach would be to review all the outstanding issues and consider them all togteher - but that sounds like a much bigger job and would need someone interested in working on it.&lt;/p&gt;</comment>
                            <comment id="12808259" author="pbenedict" created="Fri, 22 Jun 2007 03:26:02 +0000"  >&lt;p&gt;If there is going to be an overhaul, I&apos;d still like the current uploading interface to be fixed. If you find no real difference between changing the signature vs. adding method, I will prefer the former.&lt;/p&gt;</comment>
                            <comment id="12815417" author="niallp" created="Sat, 23 Jun 2007 00:50:14 +0000"  >&lt;p&gt;Actually this is a mis-representation of my view - I qualifed the &quot;no real difference&quot; with &quot;for anyone implementing the FormFile interface&quot; - but as I also said I think the majority use the default implementation. If I&apos;m right about that then this solution breaks compatibility for the majority (if they use getFileSize) - as well as the few that implement FormFile themselves - rather than just the few.&lt;/p&gt;

&lt;p&gt;The real issue is whether we should break compatibility with Struts 1.3 though - it makes me uneasy and I haven&apos;t yet decided how I would vote on a release containing this change. Would be good to hear other opinions on whether its OK or not.&lt;/p&gt;</comment>
                            <comment id="12808317" author="wsmoak" created="Sat, 23 Jun 2007 01:12:06 +0000"  >&lt;p&gt;I&apos;m not familiar with this issue, but echoing Niall&apos;s concerns, Struts has always followed a deprecate-release-remove cycle and if this does break compatiblity IMO there would have to be a really good (probably security related) reason to do it.&lt;/p&gt;</comment>
                            <comment id="12808302" author="pbenedict" created="Sat, 23 Jun 2007 16:53:08 +0000"  >&lt;p&gt;I am re-opening the issue. Wendy, see my above comments. Because FormFile is an interface, any change to it breaks backwards compatibility. If we ever want to move above the 2GB limit, we have to add a new method or change the method signature. Deprecating an interface method is semi-worthless because it would have to be supplemented by another method for the user to implement. There&apos;s really no way around it except to break it. However, I find this change extremely minor and appropriate for an upgrade.&lt;/p&gt;</comment>
                            <comment id="12808222" author="pbenedict" created="Sun, 24 Jun 2007 02:38:14 +0000"  >&lt;p&gt;After some more discussion with Niall, this approach was amicable to the both of us:&lt;/p&gt;

&lt;p&gt;1) Deprecate the first method&lt;br/&gt;
2) Add second method that returns a long&lt;br/&gt;
3) Delegate the first to the second&lt;br/&gt;
4) Throw IllegalStateException if first method finds a file bigger than 2GB&lt;/p&gt;</comment>
                            <comment id="12815397" author="fassev@gmx.de" created="Mon, 25 Jun 2007 19:52:44 +0000"  >&lt;p&gt;Just a side note: Currently there is no browser which supports more than 4 GByte upload or download. The Internet Explorer for instance has a 2 GB Limitation. If you try to upload more the 2 GB, the IE will silently upload only the part of the last 2 GB without any comment or error notification. And you can not check with java script what the use has selected.&lt;/p&gt;

&lt;p&gt;Firefox may upload or download up to 4 GB, but only when the Server does not keep alive. If you try to upload more then 4 GB, Firefox does refuses to send the form. But there is no message why, actually there is no message at all.&lt;/p&gt;

&lt;p&gt;So someone has to use some other client but not a browser to send and receive such big files. But files up to 2 GBytes are OK.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Peter&lt;/p&gt;</comment>
                            <comment id="12808503" author="pbenedict" created="Thu, 5 Jul 2007 03:35:34 +0000"  >&lt;p&gt;This issue also relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/FILEUPLOAD-102&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FILEUPLOAD-102&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12808514" author="pbenedict" created="Fri, 13 Jul 2007 09:28:53 +0000"  >&lt;p&gt;Firefox has a 2GB - 1 limit like IE so this cannot be tested. However, the FormFile interface signature is now ready for this feature. Based on committer feedback, here&apos;s what has changed:&lt;/p&gt;

&lt;p&gt;1) Binary compatibility has been preserved.&lt;br/&gt;
2) fileSize property methods have been deprecated but still function. If the actual file size is larger than an int, an IllegalStateException is thrown.&lt;br/&gt;
3) New fileLength property that return a long. &lt;/p&gt;

&lt;p&gt;The word &quot;length&quot; was chosen to fit into common nomenclature: File.length, ServletRequest.getContentLength, etc.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12450099">STR-2585</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12448215">STR-3059</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34706</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a9tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>