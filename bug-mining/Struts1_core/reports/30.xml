<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:53:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[STR-3110] PropertyUtils.clearDescriptors() call in ActionServlet.destroy() method is causing appliction classloader memory leak on Weblogic Portal</title>
                <link>https://issues.apache.org/jira/browse/STR-3110</link>
                <project id="12311043" key="STR">Struts 1</project>
                    <description>&lt;p&gt;PropertyUtils.clearDescriptors() is being called from ActionServlet.destroy() when undeploying an appliction. This call is made after LogFactory.release(). LogFactory.release() removes the application classloader instance from the LogFactory class. However PropertyUtils.clearDescriptors() causes LogFactory.getFactory() to be invoked again:&lt;/p&gt;

&lt;p&gt;getFactory():218, org.apache.commons.logging.LogFactory&lt;br/&gt;
getLog():351, org.apache.commons.logging.LogFactory&lt;br/&gt;
&amp;lt;init&amp;gt;():130, org.apache.commons.beanutils.ConvertUtilsBean&lt;br/&gt;
&amp;lt;init&amp;gt;():110, org.apache.commons.beanutils.BeanUtilsBean&lt;br/&gt;
initialValue():68, org.apache.commons.beanutils.BeanUtilsBean$1&lt;br/&gt;
get():80, org.apache.commons.beanutils.ContextClassLoaderLocal&lt;br/&gt;
getInstance():78, org.apache.commons.beanutils.BeanUtilsBean&lt;br/&gt;
getInstance():101, org.apache.commons.beanutils.PropertyUtilsBean&lt;br/&gt;
clearDescriptors():121, org.apache.commons.beanutils.PropertyUtils&lt;br/&gt;
destroy():308, org.apache.struts.action.ActionServlet&lt;/p&gt;

&lt;p&gt;This puts the application classloader instance back in the factories hashmap in LogFactory after which it is never removed. This causes a leak. &lt;/p&gt;

&lt;p&gt;I think that the PropertyUtils.clearDescriptors() call should be made before LogFactory.release() and that should fix this problem. I just tried using an earlier version of struts without the PropertyUtils.clearDescriptors() call and that solved the application classloader memory leak.&lt;/p&gt;
</description>
                <environment>Weblogic Portal on windows</environment>
        <key id="12448089">STR-3110</key>
            <summary>PropertyUtils.clearDescriptors() call in ActionServlet.destroy() method is causing appliction classloader memory leak on Weblogic Portal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pbenedict">Paul Benedict</assignee>
                                    <reporter username="roopang">Roopang Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Oct 2007 11:11:50 +0000</created>
                <updated>Thu, 5 Jun 2008 06:18:01 +0000</updated>
                            <resolved>Wed, 7 Nov 2007 06:49:51 +0000</resolved>
                                    <version>1.2.7</version>
                                    <fixVersion>1.3.10</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12814987" author="pbenedict" created="Wed, 7 Nov 2007 06:49:51 +0000"  >&lt;p&gt;Thanks for the report. Please test out the snapshots and report back verification.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34560</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a8xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57720</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>