<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:53:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[STR-3169] Infinite loop in wildcard mapping</title>
                <link>https://issues.apache.org/jira/browse/STR-3169</link>
                <project id="12311043" key="STR">Struts 1</project>
                    <description>&lt;p&gt;I have that mapping:&lt;/p&gt;

&lt;p&gt;    &amp;lt;action path=&quot;/page-*&quot;&lt;br/&gt;
                   type=&quot;ru.ryabko.actions.ShowPage&quot;&lt;br/&gt;
                   parameter=&quot;&lt;/p&gt;
{1}
&lt;p&gt;&quot;&amp;gt;&lt;br/&gt;
               &amp;lt;forward name=&quot;success&quot; path=&quot;/page.jsp&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/action&amp;gt;&lt;/p&gt;

&lt;p&gt;The application hang up in WildcardHelper.match() method if i construct URL like that:&lt;br/&gt;
              &lt;a href=&quot;http://localhost/page-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/page-&lt;/a&gt;&lt;/p&gt;
{0}</description>
                <environment></environment>
        <key id="12450119">STR-3169</key>
            <summary>Infinite loop in wildcard mapping</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pbenedict">Paul Benedict</assignee>
                                    <reporter username="ryabko">ryabko</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Nov 2008 06:15:06 +0000</created>
                <updated>Mon, 22 Dec 2008 07:25:11 +0000</updated>
                            <resolved>Sun, 21 Dec 2008 19:01:46 +0000</resolved>
                                    <version>1.3.9</version>
                                    <fixVersion>1.3.12</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12815130" author="pbenedict" created="Mon, 1 Dec 2008 03:48:11 +0000"  >&lt;p&gt;You say an infinite loop happens. Does it end with a StackOverflowException or anything? Can you give more details?&lt;/p&gt;</comment>
                            <comment id="12815137" author="ryabko" created="Mon, 1 Dec 2008 06:43:41 +0000"  >&lt;p&gt;I&apos;m waiting for a 5 minutes and no exceptions are thrown.&lt;br/&gt;
Sorry, I made a mistake identifying the bad method.&lt;br/&gt;
I run the application under debugger and found the really bad method.&lt;br/&gt;
It is ActionConfigMatcher.convertParam(String val, Map vars). It has an infinite loop at line 262 (struts-1.3.9).&lt;/p&gt;

&lt;p&gt;In my case the parameters passed into method are:&lt;/p&gt;

&lt;p&gt;    val = &quot;&lt;/p&gt;
{1}
&lt;p&gt;&quot;&lt;br/&gt;
    vars = &quot;1-&amp;gt;&lt;/p&gt;
{0}, 0-&amp;gt;page-{0}
&lt;p&gt;&quot;&lt;/p&gt;

&lt;p&gt;So, there is an infinite loop while replacing all instances of the placeholoder, because the placeholder wildcard looks like exact value.&lt;/p&gt;</comment>
                            <comment id="12815148" author="pbenedict" created="Wed, 17 Dec 2008 03:41:10 +0000"  >&lt;p&gt;Do you have a recommendation on how to fix it?&lt;/p&gt;</comment>
                            <comment id="12815163" author="pbenedict" created="Sun, 21 Dec 2008 07:52:12 +0000"  >&lt;p&gt;I solved the issue and have unit tests to prevent the regression.&lt;/p&gt;

&lt;p&gt;So what to do when this happens? Obviously, the action mapping can never successfully be valid. It is an edge case where a couple of requests are incompatible with the action mapping.&lt;/p&gt;

&lt;p&gt;I see two possible outcomes:&lt;br/&gt;
1) Do not return the action config and log a warning&lt;br/&gt;
2) Throw an IllegalStateException.&lt;/p&gt;

&lt;p&gt;I think #1 is most appropriate since the request truly has no way of being processed. It&apos;s not a system error like #2 so it should be handled gracefully like any other bad request.&lt;/p&gt;

&lt;p&gt;Opinions?&lt;/p&gt;</comment>
                            <comment id="12815161" author="pbenedict" created="Sun, 21 Dec 2008 19:01:46 +0000"  >&lt;p&gt;convertParam() now throws an IllegalStateException when matching is recursive. The caller will catch this and not match anything.&lt;/p&gt;</comment>
                            <comment id="12815154" author="ryabko" created="Mon, 22 Dec 2008 07:25:11 +0000"  >&lt;p&gt;Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a8lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57665</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>