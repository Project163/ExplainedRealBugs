<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:53:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[STR-3173] Regression : NullPointerException in org.apache.struts.util.RequestUtils.rationalizeMultipleFileProperty</title>
                <link>https://issues.apache.org/jira/browse/STR-3173</link>
                <project id="12311043" key="STR">Struts 1</project>
                    <description>&lt;p&gt;With version 1.3.10 we got the following error but not with previous stable version.&lt;br/&gt;
We are using a Form with fileUpload.&lt;br/&gt;
Here is the stack trace : &lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
   at java.lang.Class.isAssignableFrom(Native Method)&lt;br/&gt;
   at org.apache.struts.util.RequestUtils.rationalizeMultipleFileProperty(RequestUtils.java:506)&lt;br/&gt;
   at org.apache.struts.util.RequestUtils.populate(RequestUtils.java:459)&lt;br/&gt;
   at org.apache.struts.chain.commands.servlet.PopulateActionForm.populate(PopulateActionForm.java:50)&lt;br/&gt;
   at org.apache.struts.chain.commands.AbstractPopulateActionForm.execute(AbstractPopulateActionForm.java:60)&lt;br/&gt;
   at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)&lt;br/&gt;
   at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)&lt;br/&gt;
   at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)&lt;br/&gt;
   at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)&lt;br/&gt;
   at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)&lt;br/&gt;
   at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)&lt;br/&gt;
   at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)&lt;br/&gt;
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)&lt;br/&gt;
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)&lt;br/&gt;
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) &lt;/p&gt;</description>
                <environment></environment>
        <key id="12450579">STR-3173</key>
            <summary>Regression : NullPointerException in org.apache.struts.util.RequestUtils.rationalizeMultipleFileProperty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="niallp">Niall Pemberton</assignee>
                                    <reporter username="xpoinsard@openpricer.com">Xavier Poinsard</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Dec 2008 12:52:16 +0000</created>
                <updated>Thu, 16 Feb 2012 15:20:08 +0000</updated>
                            <resolved>Tue, 16 Dec 2008 21:59:51 +0000</resolved>
                                    <version>1.3.10</version>
                                    <fixVersion>1.3.12</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12815168" author="pbenedict" created="Mon, 15 Dec 2008 14:27:28 +0000"  >&lt;p&gt;With the latest release, I don&apos;t think anything was changed with file uploading. Can you help diagnose it a little more?&lt;/p&gt;</comment>
                            <comment id="12815356" author="niallp" created="Mon, 15 Dec 2008 23:14:19 +0000"  >
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/STR-487&quot; title=&quot;Multiple file upload not possible due to MultiPartRequestHandler limitation?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;STR-487&quot;&gt;&lt;del&gt;STR-487&lt;/del&gt;&lt;/a&gt; added the rationalizeMultipleFileProperty() in Struts 1.3.9 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/STR-3081&quot; title=&quot;Uploading a File using LazyDynaBean causes ClassCastException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;STR-3081&quot;&gt;&lt;del&gt;STR-3081&lt;/del&gt;&lt;/a&gt; fix a bug in that method in Struts 1.3.10 &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;So I guess the question is &quot;Which version did Xavier upgrade from?&quot;&lt;/p&gt;

&lt;p&gt;The other possibility is that the BeanUtils version has been changed and PropertyUtils&apos;s getPropertyType() is now returning something different (i.e. null) from a previous BeanUtils version - can you say what BeanUtils version you were using previously and what version now?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/viewvc/struts/struts1/branches/STRUTS_1_3_BRANCH/core/src/main/java/org/apache/struts/util/RequestUtils.java?r1=505116&amp;amp;r2=524895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/struts/struts1/branches/STRUTS_1_3_BRANCH/core/src/main/java/org/apache/struts/util/RequestUtils.java?r1=505116&amp;amp;r2=524895&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/viewvc/struts/struts1/branches/STRUTS_1_3_BRANCH/core/src/main/java/org/apache/struts/util/RequestUtils.java?r1=560652&amp;amp;r2=560654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/struts/struts1/branches/STRUTS_1_3_BRANCH/core/src/main/java/org/apache/struts/util/RequestUtils.java?r1=560652&amp;amp;r2=560654&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12815149" author="pbenedict" created="Tue, 16 Dec 2008 00:52:26 +0000"  >&lt;p&gt;&lt;a href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Class.html#isAssignableFrom(java.lang.Class&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Class.html#isAssignableFrom(java.lang.Class&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Class#isAssignableFrom throws a documented NPE if the parameter is null. So that means getPropertyType is returning null.&lt;/p&gt;</comment>
                            <comment id="12815358" author="xpoinsard@openpricer.com" created="Tue, 16 Dec 2008 11:34:09 +0000"  >&lt;p&gt;I upgraded from 1.3.8.&lt;br/&gt;
BeanUtils is now 1.8.0 but just reverting to Struts 1.3.8 fixes the problem.&lt;/p&gt;</comment>
                            <comment id="12815158" author="pbenedict" created="Tue, 16 Dec 2008 12:57:54 +0000"  >&lt;p&gt;Xaiver, would you be kind enough to try these 2 steps:&lt;/p&gt;

&lt;p&gt;1) Try Struts 1.3.9: &lt;a href=&quot;http://www.apache.org/dist/struts/binaries/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/dist/struts/binaries/&lt;/a&gt;&lt;br/&gt;
2) With the broken version, step into the debugger and determine why getPropertyType() returns null?&lt;/p&gt;

&lt;p&gt;You may also upload an example for us to replicate the bug with.&lt;/p&gt;</comment>
                            <comment id="12815162" author="xpoinsard@openpricer.com" created="Tue, 16 Dec 2008 15:43:20 +0000"  >&lt;p&gt;1/ Same problem with struts 1.3.9. 1.3.8 doesn&apos;t exhibit the problem.&lt;br/&gt;
2/ getPropertyType return nulls because the specified property doesn&apos;t exist on the bean/Form object.&lt;/p&gt;</comment>
                            <comment id="12815131" author="pbenedict" created="Tue, 16 Dec 2008 15:55:41 +0000"  >&lt;p&gt;Isn&apos;t the property supposed to be there? I thought the property was the name of the FormFile on the form.&lt;/p&gt;</comment>
                            <comment id="12815147" author="xpoinsard@openpricer.com" created="Tue, 16 Dec 2008 16:28:02 +0000"  >&lt;p&gt;In this particular case we are using the following code to retrieve the file content :&lt;br/&gt;
FormFile fileInfo = (FormFile) form.getMultipartRequestHandler().getFileElements().get(name_of_the_field);&lt;/p&gt;

&lt;p&gt;But I don&apos;t think it&apos;s mandatory to declare all form properties not handled by standard struts methods.&lt;/p&gt;</comment>
                            <comment id="12815155" author="pbenedict" created="Tue, 16 Dec 2008 18:14:32 +0000"  >&lt;p&gt;I a bit confused, so please bear with me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; So you upload a file but it&apos;s not a property on the form?&lt;/p&gt;</comment>
                            <comment id="12815152" author="niallp" created="Tue, 16 Dec 2008 20:23:05 +0000"  >&lt;p&gt;Xavier is correct the Map of properties that is built from the request parameters and passed to the BeanUtils populate method (which delegates to BeanUtils setProperty() method&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;) to populate the form ignores properties that don&apos;t exist - so this method should do as well. We just need to add a null check to that method.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://commons.apache.org/beanutils/v1.8.0/apidocs/org/apache/commons/beanutils/BeanUtilsBean.html#setProperty(java.lang.Object,%20java.lang.String,%20java.lang.Object&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/beanutils/v1.8.0/apidocs/org/apache/commons/beanutils/BeanUtilsBean.html#setProperty(java.lang.Object,%20java.lang.String,%20java.lang.Object&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12817206" author="niallp" created="Tue, 16 Dec 2008 21:59:51 +0000"  >&lt;p&gt;I re-created this problem in the Struts examples webapp and verified that a null check resolves this issue - fixed in 1.3 Branch:&lt;br/&gt;
   &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=727179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=727179&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And ported to trunk:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=727180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=727180&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12815141" author="pbenedict" created="Wed, 17 Dec 2008 03:56:39 +0000"  >&lt;p&gt;Xavier, please try 1.3.11-SNAPSHOT and report on your findings:&lt;br/&gt;
&lt;a href=&quot;http://people.apache.org/repo/m2-snapshot-repository/org/apache/struts/struts-core/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://people.apache.org/repo/m2-snapshot-repository/org/apache/struts/struts-core/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12815165" author="xpoinsard@openpricer.com" created="Wed, 17 Dec 2008 09:06:24 +0000"  >&lt;p&gt;The problem is fixed with this build.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="13209417" author="sproket" created="Thu, 16 Feb 2012 15:00:20 +0000"  >&lt;p&gt;Hello, I have a old project that uses Struts 1.3.10 where I get this error.  &lt;/p&gt;

&lt;p&gt;Can we publish 1.3.11?  What&apos;s the delay?&lt;/p&gt;

&lt;p&gt;Is there a work around?&lt;/p&gt;</comment>
                            <comment id="13209424" author="xpoinsard@openpricer.com" created="Thu, 16 Feb 2012 15:20:08 +0000"  >&lt;p&gt;The snapshot given by Paul Benedict is still here.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34501</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a8kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57661</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>