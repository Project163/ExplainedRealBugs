<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:53:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[STR-3161] Servlet not injected into newly created action in higly concurrent env</title>
                <link>https://issues.apache.org/jira/browse/STR-3161</link>
                <project id="12311043" key="STR">Struts 1</project>
                    <description>&lt;p&gt;In struts 1.3.8 we encountered such an issue&lt;/p&gt;

&lt;p&gt; getServlet() invoked from action code returns null.&lt;/p&gt;

&lt;p&gt;After quick investigation I found a bit susspicious place in the&lt;br/&gt;
RequestProcessor#processActionCreate code.&lt;br/&gt;
The synchronized block seems to be a bit risky in highly concurrent  environment because it does not cover also  the code injecting servlet into freshly created action:&lt;/p&gt;

&lt;p&gt;if (instance.getServlet() == null) {&lt;br/&gt;
instance.setServlet(this.servlet);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;After I had extended  synchronisation to above code fragment, it seems,  our nullpointer vanished.&lt;/p&gt;</description>
                <environment>win xp, jvm 1.5.0_12</environment>
        <key id="12450074">STR-3161</key>
            <summary>Servlet not injected into newly created action in higly concurrent env</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="niallp">Niall Pemberton</assignee>
                                    <reporter username="bartek">Bartek Wasko</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Jul 2008 09:16:42 +0000</created>
                <updated>Thu, 31 Jul 2008 13:00:50 +0000</updated>
                            <resolved>Mon, 28 Jul 2008 13:28:27 +0000</resolved>
                                    <version>1.3.8</version>
                                    <fixVersion>1.3.10</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12815101" author="bartek" created="Mon, 28 Jul 2008 09:43:12 +0000"  >&lt;p&gt;Patch - synchronisation extended (RequestProcessor.processActionCreate) to cover also code, where servlet is injected into action.&lt;/p&gt;</comment>
                            <comment id="12817200" author="niallp" created="Mon, 28 Jul 2008 13:28:27 +0000"  >&lt;p&gt;Thanks, I have applied your patch:&lt;br/&gt;
    &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=680345&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=680345&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However I&apos;m wondering why you&apos;re still using the RequestProcessor with Struts 1.3.x? The new ComposableRequestProcessor delegates this to the CreateAction command and the whole method is synchronized (so should resolve this issue for you):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/struts/struts1/trunk/core/src/main/java/org/apache/struts/chain/commands/servlet/CreateAction.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/struts/struts1/trunk/core/src/main/java/org/apache/struts/chain/commands/servlet/CreateAction.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12817191" author="niallp" created="Mon, 28 Jul 2008 13:34:14 +0000"  >&lt;p&gt;Also ported to 1.3 Branch: &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=680350&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=680350&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12433140" name="RequestProcessor.patch" size="559" author="bartek" created="Mon, 28 Jul 2008 09:43:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34513</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a8n3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>