<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:53:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[STR-3029] ActionConfigMatcher does not instantiate the correct ActionForward</title>
                <link>https://issues.apache.org/jira/browse/STR-3029</link>
                <project id="12311043" key="STR">Struts 1</project>
                    <description>&lt;p&gt;If you create an action config like this:&lt;/p&gt;

&lt;p&gt;	&amp;lt;action    path=&quot;/mf/**&quot;&lt;br/&gt;
		   type=&quot;it.test.pfwk.actions.MultiFrameAction&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;forward name=&quot;success&quot; className=&quot;it.test.framework.actions.WsActionForward&quot; path=&quot;/luca.jsp&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;/action&amp;gt;&lt;/p&gt;

&lt;p&gt;When you do a mapping.findForward() you get an org.apache.struts.action.ActionForward instead of it.test.framework.actions.WsActionForward.&lt;/p&gt;

&lt;p&gt;I think that the problem is in ActionconfigMatcher, convertActionConfig():&lt;/p&gt;

&lt;p&gt;        ForwardConfig[] fConfigs = orig.findForwardConfigs();&lt;br/&gt;
        ForwardConfig cfg;&lt;br/&gt;
        for (int x = 0; x &amp;lt; fConfigs.length; x++) {&lt;br/&gt;
            cfg = new ActionForward();&lt;br/&gt;
            cfg.setContextRelative(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getContextRelative());&lt;/p&gt;

&lt;p&gt;Here you should instatiate the correct actionForrward, for instance, if you modifiy ActionForwrad in order to have a method like newInstance():&lt;/p&gt;

&lt;p&gt;        ForwardConfig[] fConfigs = orig.findForwardConfigs();&lt;br/&gt;
        ForwardConfig cfg;&lt;br/&gt;
        for (int x = 0; x &amp;lt; fConfigs.length; x++) {&lt;br/&gt;
            cfg = fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.newInstnce();&lt;br/&gt;
            cfg.setContextRelative(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getContextRelative());&lt;/p&gt;
</description>
                <environment>Solaris WebSphere 5.1.1</environment>
        <key id="12448220">STR-3029</key>
            <summary>ActionConfigMatcher does not instantiate the correct ActionForward</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lbonco">Luca Boncompagni</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Apr 2007 08:29:05 +0000</created>
                <updated>Sat, 18 Aug 2007 00:46:25 +0000</updated>
                            <resolved>Fri, 4 May 2007 15:07:46 +0000</resolved>
                                    <version>1.2.9</version>
                                    <fixVersion>1.3.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12814880" author="niallp" created="Wed, 11 Apr 2007 13:49:48 +0000"  >&lt;p&gt;I agree with your assesment of the issue - but IMO the solution would be to use BeanUtils.cloneBean() rather than the newInstance() method - otherwise additional properties in the custom ActionForward implementation (presumably the reason for having a custom impl) would not be copied.&lt;/p&gt;</comment>
                            <comment id="12814881" author="lbonco" created="Wed, 11 Apr 2007 14:27:51 +0000"  >&lt;p&gt;Hi, do you think that is posiible to have a patch for this issue, or are you&lt;br/&gt;
releasing 1.2.10 soon?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Luca&lt;/p&gt;
</comment>
                            <comment id="12817161" author="niallp" created="Wed, 11 Apr 2007 15:31:16 +0000"  >&lt;p&gt;I doubt there will be a 1.2.10 release more likely to make the next 1.3.x or 1.4 release - whenever those may be&lt;/p&gt;</comment>
                            <comment id="12814896" author="pbenedict" created="Wed, 11 Apr 2007 22:06:50 +0000"  >&lt;p&gt;Luca, please help us out by testing this against 1.3.8. if the problem still exists, and it&apos;s an easy fix, you may see it in 1.3.9 (or 1.4 if complex). Can you test to make sure it hasn&apos;t been fixed?&lt;/p&gt;</comment>
                            <comment id="12814903" author="lbonco" created="Thu, 12 Apr 2007 08:06:51 +0000"  >&lt;p&gt;Hi Paul,&lt;/p&gt;

&lt;p&gt;I&apos;ll try to test 1.3.8 with the following code:&lt;/p&gt;

&lt;p&gt;        ForwardConfig[] fConfigs = orig.findForwardConfigs();&lt;br/&gt;
        ForwardConfig cfg;&lt;/p&gt;

&lt;p&gt;        for (int x = 0; x &amp;lt; fConfigs.length; x++) {&lt;br/&gt;
            try &lt;/p&gt;
{
               cfg = (ActionForward) BeanUtils.cloneBean(fConfigs[x]);
            }
&lt;p&gt; catch (Exception ex) &lt;/p&gt;
{
               log.warn(&quot;Unable to clone action forward, recommend not using
&quot;
                   + &quot;wildcards&quot;, ex);

               return null;
            }
&lt;p&gt;            // cfg.setName(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getName());&lt;br/&gt;
            cfg.setPath(convertParam(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getPath(), vars));&lt;br/&gt;
            // cfg.setRedirect(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getRedirect());&lt;br/&gt;
            cfg.setCommand(convertParam(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getCommand(), vars));&lt;br/&gt;
            cfg.setCatalog(convertParam(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getCatalog(), vars));&lt;br/&gt;
            cfg.setModule(convertParam(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getModule(), vars));&lt;/p&gt;

&lt;p&gt;I&apos;ll let you know how it run.&lt;/p&gt;

&lt;p&gt;Luca&lt;/p&gt;
</comment>
                            <comment id="12814926" author="lbonco" created="Tue, 17 Apr 2007 14:52:43 +0000"  >&lt;p&gt;I tried the above code and it seems to work.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Luca&lt;/p&gt;
</comment>
                            <comment id="12814897" author="pbenedict" created="Wed, 18 Apr 2007 00:35:32 +0000"  >&lt;p&gt;Does that mean that upgrading to 1.3.8 fixes your problem?&lt;/p&gt;</comment>
                            <comment id="12814923" author="lbonco" created="Wed, 18 Apr 2007 06:35:43 +0000"  >&lt;p&gt;no, I upgraded to 1.3.8 and I patched the ActionconfigMatcher to use&lt;br/&gt;
BeanUtils.cloneBean(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;), in this way everything works well. Here&lt;br/&gt;
you can find the patch:&lt;/p&gt;

&lt;p&gt;&amp;#8212; ActionConfigMatcher.java    2007-03-03 09:44:10.000000000 +0100&lt;br/&gt;
+++ ActionConfigMatcher-new.java        2007-04-12 09:45:10.168689442 +0200&lt;br/&gt;
@@ -180,10 +180,17 @@&lt;br/&gt;
         ForwardConfig cfg;&lt;/p&gt;

&lt;p&gt;         for (int x = 0; x &amp;lt; fConfigs.length; x++) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cfg = new ActionForward();&lt;/li&gt;
	&lt;li&gt;cfg.setName(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getName());&lt;br/&gt;
+           try 
{
+               cfg = (ActionForward) BeanUtils.cloneBean(fConfigs[x]);
+           }
&lt;p&gt; catch (Exception ex) &lt;/p&gt;
{
+               log.warn(&quot;Unable to clone action forward, recommend not
using &quot;
+                   + &quot;wildcards&quot;, ex);
+
+               return null;
+           }
&lt;p&gt;+            // cfg.setName(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getName());&lt;br/&gt;
             cfg.setPath(convertParam(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getPath(), vars));&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;cfg.setRedirect(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getRedirect());&lt;br/&gt;
+            // cfg.setRedirect(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getRedirect());&lt;br/&gt;
             cfg.setCommand(convertParam(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getCommand(), vars));&lt;br/&gt;
             cfg.setCatalog(convertParam(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getCatalog(), vars));&lt;br/&gt;
             cfg.setModule(convertParam(fConfigs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;.getModule(), vars));&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;regards,&lt;br/&gt;
Luca&lt;/p&gt;
</comment>
                            <comment id="12814891" author="pbenedict" created="Wed, 18 Apr 2007 07:25:36 +0000"  >&lt;p&gt;Why is name and redirect commented out?&lt;/p&gt;</comment>
                            <comment id="12814914" author="lbonco" created="Wed, 18 Apr 2007 09:13:44 +0000"  >&lt;p&gt;I commented it out because they are not changede by convertParam().&lt;/p&gt;

&lt;p&gt;Luca&lt;/p&gt;
</comment>
                            <comment id="12814876" author="pbenedict" created="Wed, 18 Apr 2007 12:37:21 +0000"  >&lt;p&gt;Please try 1.3.9-SNAPSHOT out and tell me if this works for you.&lt;/p&gt;</comment>
                            <comment id="12814928" author="jirareport" created="Thu, 3 May 2007 15:23:58 +0000"  >&lt;p&gt;Did this work Luca?&lt;/p&gt;</comment>
                            <comment id="12814887" author="lbonco" created="Thu, 3 May 2007 15:47:44 +0000"  >&lt;p&gt;Yes it worked.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Luca&lt;/p&gt;
</comment>
                            <comment id="12814927" author="jirareport" created="Fri, 4 May 2007 15:07:46 +0000"  >&lt;p&gt;Marking as fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34637</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a9en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>