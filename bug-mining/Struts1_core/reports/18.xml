<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:53:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[STR-2802] Validator validwhen cannot test between two different indices in array</title>
                <link>https://issues.apache.org/jira/browse/STR-2802</link>
                <project id="12311043" key="STR">Struts 1</project>
                    <description>&lt;p&gt;This code in the validator.xml fails with this error : &quot;unexpected token adr..&quot;&lt;/p&gt;


&lt;p&gt;&amp;lt;field property=&quot;adr&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&quot; depends =&quot;validwhen&quot;&amp;gt; &lt;br/&gt;
  &amp;lt;var&amp;gt; &lt;br/&gt;
      &amp;lt;var-name&amp;gt;test&amp;lt;/var-name&amp;gt; &lt;br/&gt;
      &amp;lt;var-value&amp;gt;((&lt;b&gt;this&lt;/b&gt;!=null) or (adr&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; != null ))&amp;lt;/var-value&amp;gt; &lt;br/&gt;
  &amp;lt;/var&amp;gt; &lt;br/&gt;
&amp;lt;/field&amp;gt; &lt;/p&gt;


&lt;p&gt;adr is an array of two adress lines. Only one of them needs tobe filled.&lt;br/&gt;
According to the document of the validator, it should work.&lt;/p&gt;</description>
                <environment>Operating System: Windows 2000&lt;br/&gt;
Platform: PC</environment>
        <key id="12448203">STR-2802</key>
            <summary>Validator validwhen cannot test between two different indices in array</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="christophe.oudot@fr.ibm.com">Oudot Christophe</reporter>
                        <labels>
                    </labels>
                <created>Sat, 18 Mar 2006 00:54:22 +0000</created>
                <updated>Thu, 5 Jun 2008 06:18:03 +0000</updated>
                            <resolved>Wed, 21 Mar 2007 05:59:51 +0000</resolved>
                                    <version>1.2.8</version>
                                    <fixVersion>1.3.10</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12817011" author="niallp" created="Sat, 18 Mar 2006 01:02:51 +0000"  >&lt;p&gt;Adding a link to the related thread on the user list:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.mail-archive.com/user%40struts.apache.org/msg43177.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/user%40struts.apache.org/msg43177.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I had a quick look at the source (ValidWhenParser.g) and I agree it looks like &lt;br/&gt;
it should cater for this. I also tried adding a test case (to &lt;br/&gt;
TestValidWhen.java) to and got the same result as Christophe.&lt;/p&gt;</comment>
                            <comment id="12817074" author="jakarta@rizzoweb.com" created="Mon, 21 Aug 2006 17:05:56 +0000"  >&lt;p&gt;Is there any workaround for this bug? I have a similar requirement (need to check for presence of EITHER one field or at least one item in an array field (items selected from an HTML list), but have run into the same issue.&lt;br/&gt;
Is there any other way to configure the validator to do this kind of check, at least until this bug gets fixed?&lt;/p&gt;</comment>
                            <comment id="12814849" author="ljnelson" created="Mon, 5 Mar 2007 17:09:28 +0000"  >&lt;p&gt;It&apos;s now March 2007; I was wondering if any progress had been made on this bug.  I am working on struts 1.3.5, and I encounter the same issue with the following code:&lt;/p&gt;

&lt;p&gt;&amp;lt;var-value&amp;gt;((&lt;b&gt;this&lt;/b&gt; != null) or ((govIDParts&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; == null) and (govIDParts&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; == null)))&amp;lt;/var-value&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12817150" author="niallp" created="Mon, 5 Mar 2007 17:39:06 +0000"  >&lt;p&gt;I doubt anyones looking at this - It needs someone to come forward with a patch to fix it&lt;/p&gt;</comment>
                            <comment id="12814862" author="jirareport" created="Tue, 6 Mar 2007 17:18:35 +0000"  >&lt;p&gt;Do you still have your test case Niall?&lt;/p&gt;</comment>
                            <comment id="12815443" author="niallp" created="Tue, 6 Mar 2007 18:19:38 +0000"  >&lt;p&gt;I didn&apos;t (I changed machines since then) - but I&apos;ve re-created one and committed it:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=515237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=515237&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12817168" author="jirareport" created="Thu, 15 Mar 2007 22:01:57 +0000"  >
&lt;p&gt;I suspect that the third of the array rules shouldn&apos;t have the LBRACKET on the end of it. The problem with both Niall&apos;s test and the original report is that neither of them match one of the 5 array rules. &lt;/p&gt;

&lt;p&gt;ie:&lt;/p&gt;

&lt;p&gt;Index: ValidWhenParser.g&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; ValidWhenParser.g   (revision 518754)&lt;br/&gt;
+++ ValidWhenParser.g   (working copy)&lt;br/&gt;
@@ -182,7 +182,7 @@&lt;br/&gt;
             Object i3 = argStack.pop();&lt;br/&gt;
             argStack.push(ValidatorUtils.getValueAsString(form, i3 + &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot; + i4 + &amp;quot;&amp;#93;&lt;/span&gt;&quot; + i5));&lt;br/&gt;
 }&lt;br/&gt;
-| identifier LBRACKET integer RBRACKET LBRACKET {&lt;br/&gt;
+| identifier LBRACKET integer RBRACKET {&lt;br/&gt;
             Object i7 = argStack.pop();&lt;br/&gt;
             Object i6 = argStack.pop();&lt;br/&gt;
             argStack.push(ValidatorUtils.getValueAsString(form, i6 + &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot; + i7 + &amp;quot;&amp;#93;&lt;/span&gt;&quot;));&lt;/p&gt;</comment>
                            <comment id="12817153" author="jirareport" created="Wed, 21 Mar 2007 05:59:51 +0000"  >&lt;p&gt; svn ci -m &quot;Fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/STR-2802&quot; title=&quot;Validator validwhen cannot test between two different indices in array&quot; class=&quot;issue-link&quot; data-issue-key=&quot;STR-2802&quot;&gt;&lt;del&gt;STR-2802&lt;/del&gt;&lt;/a&gt; by removing the unnecessary LBRACKET. Test now passes and I don&apos;t understan&lt;br/&gt;
d what the LBRACKET would have been there for so I think it was just an error that&apos;s been in there forever and ever. &quot; src/&lt;br/&gt;
Sending        src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.g&lt;br/&gt;
Sending        src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 520763.&lt;/p&gt;</comment>
                            <comment id="12814403" author="niallp" created="Mon, 10 Sep 2007 22:41:56 +0000"  >&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/STR-3088&quot; title=&quot;N-length empty strings not treated as *null* by validwhen&quot; class=&quot;issue-link&quot; data-issue-key=&quot;STR-3088&quot;&gt;&lt;del&gt;STR-3088&lt;/del&gt;&lt;/a&gt; has also back-ported the fix for this issue into the 1.3 Branch - see revision 569606:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=569606&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=569606&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39020</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34840</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0aanr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58000</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>