diff --git a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenLexer.java b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenLexer.java
index ebb6cca02..fc02386a7 100644
--- a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenLexer.java
+++ b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenLexer.java
@@ -1,4 +1,4 @@
-// $ANTLR 2.7.2: "ValidWhenParser.g" -> "ValidWhenLexer.java"$
+// $ANTLR 2.7.6 (2005-12-22): "ValidWhenParser.g" -> "ValidWhenLexer.java"$
 
 /*
  * $Id$
diff --git a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.g b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.g
index f81c6ef0c..2636409d4 100644
--- a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.g
+++ b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.g
@@ -57,12 +57,12 @@ String value;
         boolean intCompare = true;
 	if ((v1 == null) || (v2 == null)) {
 		if (String.class.isInstance(v1)) {
-			if (((String) v1).length() == 0) {
+			if (((String) v1).trim().length() == 0) {
 				v1 = null;
 			}
 		}
 		if (String.class.isInstance(v2)) {
-			if (((String) v2).length() == 0) {
+			if (((String) v2).trim().length() == 0) {
 				v2 = null;
 			}
 		}
diff --git a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.java b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.java
index c7c7eeaf6..1b7e27f71 100644
--- a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.java
+++ b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParser.java
@@ -1,4 +1,4 @@
-// $ANTLR 2.7.2: "ValidWhenParser.g" -> "ValidWhenParser.java"$
+// $ANTLR 2.7.6 (2005-12-22): "ValidWhenParser.g" -> "ValidWhenParser.java"$
 
 /*
  * $Id$
@@ -69,12 +69,12 @@ String value;
         boolean intCompare = true;
 	if ((v1 == null) || (v2 == null)) {
 		if (String.class.isInstance(v1)) {
-			if (((String) v1).length() == 0) {
+			if (((String) v1).trim().length() == 0) {
 				v1 = null;
 			}
 		}
 		if (String.class.isInstance(v2)) {
-			if (((String) v2).length() == 0) {
+			if (((String) v2).trim().length() == 0) {
 				v2 = null;
 			}
 		}
diff --git a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParserTokenTypes.java b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParserTokenTypes.java
index 744c591ad..dc68f282e 100644
--- a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParserTokenTypes.java
+++ b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParserTokenTypes.java
@@ -1,4 +1,4 @@
-// $ANTLR 2.7.2: "ValidWhenParser.g" -> "ValidWhenParser.java"$
+// $ANTLR 2.7.6 (2005-12-22): "ValidWhenParser.g" -> "ValidWhenParser.java"$
 
 /*
  * $Id$
diff --git a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParserTokenTypes.txt b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParserTokenTypes.txt
index 50a81c65b..c8ef97cb3 100644
--- a/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParserTokenTypes.txt
+++ b/core/src/main/java/org/apache/struts/validator/validwhen/ValidWhenParserTokenTypes.txt
@@ -1,4 +1,4 @@
-// $ANTLR 2.7.2: ValidWhenParser.g -> ValidWhenParserTokenTypes.txt$
+// $ANTLR 2.7.6 (2005-12-22): ValidWhenParser.g -> ValidWhenParserTokenTypes.txt$
 ValidWhenParser    // output token vocab name
 DECIMAL_LITERAL=4
 HEX_LITERAL=5
diff --git a/core/src/test/java/org/apache/struts/validator/TestValidWhen.java b/core/src/test/java/org/apache/struts/validator/TestValidWhen.java
index ad57d837e..7ee415ed5 100644
--- a/core/src/test/java/org/apache/struts/validator/TestValidWhen.java
+++ b/core/src/test/java/org/apache/struts/validator/TestValidWhen.java
@@ -198,6 +198,14 @@ public class TestValidWhen extends TestCase {
 
         // Null
         doParse("(*this* == null)", testBean, 0, "stringValue2", true);
+
+        // 0-length empty string
+        testBean.setStringValue2("");
+        doParse("(*this* == null)", testBean, 0, "stringValue2", true);
+
+        // N-length empty string
+        testBean.setStringValue2("  ");
+        doParse("(*this* == null)", testBean, 0, "stringValue2", true);
     }
 
     /**
