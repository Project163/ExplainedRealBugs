{"url":"https://api.github.com/repos/Seldaek/monolog/issues/592","repository_url":"https://api.github.com/repos/Seldaek/monolog","labels_url":"https://api.github.com/repos/Seldaek/monolog/issues/592/labels{/name}","comments_url":"https://api.github.com/repos/Seldaek/monolog/issues/592/comments","events_url":"https://api.github.com/repos/Seldaek/monolog/issues/592/events","html_url":"https://github.com/Seldaek/monolog/issues/592","id":90894565,"node_id":"MDU6SXNzdWU5MDg5NDU2NQ==","number":592,"title":"ErrorHandler: non-zero exit code for exception handler","user":{"login":"pavelsmolka","id":432997,"node_id":"MDQ6VXNlcjQzMjk5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/432997?v=4","gravatar_id":"","url":"https://api.github.com/users/pavelsmolka","html_url":"https://github.com/pavelsmolka","followers_url":"https://api.github.com/users/pavelsmolka/followers","following_url":"https://api.github.com/users/pavelsmolka/following{/other_user}","gists_url":"https://api.github.com/users/pavelsmolka/gists{/gist_id}","starred_url":"https://api.github.com/users/pavelsmolka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavelsmolka/subscriptions","organizations_url":"https://api.github.com/users/pavelsmolka/orgs","repos_url":"https://api.github.com/users/pavelsmolka/repos","events_url":"https://api.github.com/users/pavelsmolka/events{/privacy}","received_events_url":"https://api.github.com/users/pavelsmolka/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":87833823,"node_id":"MDU6TGFiZWw4NzgzMzgyMw==","url":"https://api.github.com/repos/Seldaek/monolog/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2015-06-25T08:32:32Z","updated_at":"2019-01-10T10:49:49Z","closed_at":"2015-07-12T10:36:33Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"As far as I am aware, ErrorHandler is able to handle all errors, uncaught exceptions or fatals. When any of these happens, the problem is logged by the provided Logger object. \n\nThe shutdown function (i.e. fatal handler) does not affect the exit code. Therefore, if for example a non-existing function is called, the problem is logged by `ErrorHandler::handleFatalError`, and the process ends with exit code 255.\n\nHowever, if an exception is thrown and not handled on the application level, the `ErrorHandler::handleException` logs it and by default returns a zero exit code. I believe that's not the expected (intuitive) behavior. Without the error handler, an uncaught exception results in exit code 255, so that the environment knows the specific PHP process failed. \n\nIn my view Monolog should be responsible for logging the issue, but not hiding the exit status. I realize it's possible to work-around this by setting a custom exception_handler calling `exit(255)` prior to registering the Monolog handler, which is called after the problem has been logged. Despite that, I believe Monolog should do that by default. What do you think?\n","closed_by":{"login":"Seldaek","id":183678,"node_id":"MDQ6VXNlcjE4MzY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/183678?v=4","gravatar_id":"","url":"https://api.github.com/users/Seldaek","html_url":"https://github.com/Seldaek","followers_url":"https://api.github.com/users/Seldaek/followers","following_url":"https://api.github.com/users/Seldaek/following{/other_user}","gists_url":"https://api.github.com/users/Seldaek/gists{/gist_id}","starred_url":"https://api.github.com/users/Seldaek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seldaek/subscriptions","organizations_url":"https://api.github.com/users/Seldaek/orgs","repos_url":"https://api.github.com/users/Seldaek/repos","events_url":"https://api.github.com/users/Seldaek/events{/privacy}","received_events_url":"https://api.github.com/users/Seldaek/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Seldaek/monolog/issues/592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Seldaek/monolog/issues/592/timeline","performed_via_github_app":null,"state_reason":"completed"}