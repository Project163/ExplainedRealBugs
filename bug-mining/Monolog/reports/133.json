{"url":"https://api.github.com/repos/Seldaek/monolog/issues/1667","repository_url":"https://api.github.com/repos/Seldaek/monolog","labels_url":"https://api.github.com/repos/Seldaek/monolog/issues/1667/labels{/name}","comments_url":"https://api.github.com/repos/Seldaek/monolog/issues/1667/comments","events_url":"https://api.github.com/repos/Seldaek/monolog/issues/1667/events","html_url":"https://github.com/Seldaek/monolog/issues/1667","id":1229610657,"node_id":"I_kwDOABUBmM5JSl6h","number":1667,"title":"v3: Consider merging Level and LevelName enums","user":{"login":"tigitz","id":1524501,"node_id":"MDQ6VXNlcjE1MjQ1MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1524501?v=4","gravatar_id":"","url":"https://api.github.com/users/tigitz","html_url":"https://github.com/tigitz","followers_url":"https://api.github.com/users/tigitz/followers","following_url":"https://api.github.com/users/tigitz/following{/other_user}","gists_url":"https://api.github.com/users/tigitz/gists{/gist_id}","starred_url":"https://api.github.com/users/tigitz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tigitz/subscriptions","organizations_url":"https://api.github.com/users/tigitz/orgs","repos_url":"https://api.github.com/users/tigitz/repos","events_url":"https://api.github.com/users/tigitz/events{/privacy}","received_events_url":"https://api.github.com/users/tigitz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":87833791,"node_id":"MDU6TGFiZWw4NzgzMzc5MQ==","url":"https://api.github.com/repos/Seldaek/monolog/labels/Feature","name":"Feature","color":"009800","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-05-09T12:09:54Z","updated_at":"2022-05-10T09:15:16Z","closed_at":"2022-05-10T09:15:16Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Parsing v3 code I feel like splitting the level name in it's own Enum doesn't bring any benefit while on the contrary it adds complexity and probably confusion for users. \r\n\r\nThey will have to constantly think about which one they should use in their context while in fact all they want is to use a Level. The name is just a property of the Level, the same way the `int` value is.\r\n\r\nCould merging both enums into a single `Level` enum be considered an improvement ?\r\n\r\nSomething like this:\r\n\r\n```php\r\n// Not a backed enum anymore\r\nenum Level\r\n{\r\n    /**\r\n     * Detailed debug information\r\n     */\r\n    case Debug;\r\n   \r\n    private const DEBUG_VALUE = 100;\r\n    private const DEBUG_NAME = 'DEBUG';\r\n\r\n    /**\r\n     * @phpstan-param Level::*_NAME $name\r\n     */\r\n    public static function fromName(string $name): self\r\n    {\r\n        return match ($name) {\r\n            self::DEBUG_NAME => self::Debug,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @phpstan-param Level::*_VALUE $value\r\n     */\r\n    public static function fromValue(int $value): self\r\n    {\r\n        return match ($value) {\r\n            self::DEBUG_VALUE => self::Debug,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @phpstan-return Level::*_NAME\r\n     */\r\n    public function getName(): string\r\n    {\r\n        return match ($this) {\r\n            self::Debug => self::DEBUG_NAME,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @phpstan-return Level::*_VALUE\r\n     */\r\n    public function getValue(): int\r\n    {\r\n        return match ($this) {\r\n            self::Debug => self::DEBUG_VALUE,\r\n        };\r\n    }\r\n\r\n```\r\n\r\nDifference between current and supposedly improved usage:\r\n\r\n*Current version*\r\n\r\n```php\r\n// retrieved log level name as a string and test if it's debug\r\n$logLevel = 'debug'\r\nLevelName::from($logLevel) === LevelName::Debug\r\n\r\n// should I compare the *name* or the level itself ? What's the best practice here ? ðŸ¤” Maybe the level seems more appropriate\r\nLevel::fromLevelName(LevelName::from($logLevel)) === Level::Debug\r\n\r\n// seems a bit verbose...\r\n\r\n// retrieved log level as an int and test if it's debug\r\n$logLevel = 100;\r\nLevel::from($logLevel) === Level::Debug\r\n\r\n// now there's only one way to do the check, just because the initial value to represent a Level was an int instead of a string, seems not consistent.\r\n\r\n//retrieving the name of a level\r\nLevel::Debug->toLevelName()->value;\r\n```\r\n\r\n*Improved version*\r\n\r\n```php\r\n// retrieved log level name as a string\r\n$logLevel = 'debug'\r\nLevel::fromName($logLevel) === Level::Debug\r\n\r\n// retrieved log level name as an int\r\n$logLevel = 100\r\nLevel::fromValue($logLevel) === Level::Debug\r\n\r\n// Only 1 level concept to manage the level, api is clear on whether you need to represent a level from its name or its value, both can even be compared\r\n\r\nLevel::fromValue(100) === Level::fromName('debug')\r\n\r\n//retrieving the name of a level\r\nLevel::Debug->getName();\r\n```\r\n","closed_by":{"login":"Seldaek","id":183678,"node_id":"MDQ6VXNlcjE4MzY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/183678?v=4","gravatar_id":"","url":"https://api.github.com/users/Seldaek","html_url":"https://github.com/Seldaek","followers_url":"https://api.github.com/users/Seldaek/followers","following_url":"https://api.github.com/users/Seldaek/following{/other_user}","gists_url":"https://api.github.com/users/Seldaek/gists{/gist_id}","starred_url":"https://api.github.com/users/Seldaek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seldaek/subscriptions","organizations_url":"https://api.github.com/users/Seldaek/orgs","repos_url":"https://api.github.com/users/Seldaek/repos","events_url":"https://api.github.com/users/Seldaek/events{/privacy}","received_events_url":"https://api.github.com/users/Seldaek/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Seldaek/monolog/issues/1667/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Seldaek/monolog/issues/1667/timeline","performed_via_github_app":null,"state_reason":"completed"}