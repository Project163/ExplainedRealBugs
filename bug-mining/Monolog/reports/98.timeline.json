[{"id":1668915645,"node_id":"MDEyOkxhYmVsZWRFdmVudDE2Njg5MTU2NDU=","url":"https://api.github.com/repos/Seldaek/monolog/issues/events/1668915645","actor":{"login":"Seldaek","id":183678,"node_id":"MDQ6VXNlcjE4MzY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/183678?v=4","gravatar_id":"","url":"https://api.github.com/users/Seldaek","html_url":"https://github.com/Seldaek","followers_url":"https://api.github.com/users/Seldaek/followers","following_url":"https://api.github.com/users/Seldaek/following{/other_user}","gists_url":"https://api.github.com/users/Seldaek/gists{/gist_id}","starred_url":"https://api.github.com/users/Seldaek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seldaek/subscriptions","organizations_url":"https://api.github.com/users/Seldaek/orgs","repos_url":"https://api.github.com/users/Seldaek/repos","events_url":"https://api.github.com/users/Seldaek/events{/privacy}","received_events_url":"https://api.github.com/users/Seldaek/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-06-07T15:40:55Z","label":{"name":"Bug","color":"e11d21"},"performed_via_github_app":null},{"id":1668915761,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE2Njg5MTU3NjE=","url":"https://api.github.com/repos/Seldaek/monolog/issues/events/1668915761","actor":{"login":"Seldaek","id":183678,"node_id":"MDQ6VXNlcjE4MzY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/183678?v=4","gravatar_id":"","url":"https://api.github.com/users/Seldaek","html_url":"https://github.com/Seldaek","followers_url":"https://api.github.com/users/Seldaek/followers","following_url":"https://api.github.com/users/Seldaek/following{/other_user}","gists_url":"https://api.github.com/users/Seldaek/gists{/gist_id}","starred_url":"https://api.github.com/users/Seldaek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seldaek/subscriptions","organizations_url":"https://api.github.com/users/Seldaek/orgs","repos_url":"https://api.github.com/users/Seldaek/repos","events_url":"https://api.github.com/users/Seldaek/events{/privacy}","received_events_url":"https://api.github.com/users/Seldaek/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-06-07T15:40:57Z","milestone":{"title":"1.x"},"performed_via_github_app":null},{"id":1686569864,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE2ODY1Njk4NjQ=","url":"https://api.github.com/repos/Seldaek/monolog/issues/events/1686569864","actor":{"login":"Seldaek","id":183678,"node_id":"MDQ6VXNlcjE4MzY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/183678?v=4","gravatar_id":"","url":"https://api.github.com/users/Seldaek","html_url":"https://github.com/Seldaek","followers_url":"https://api.github.com/users/Seldaek/followers","following_url":"https://api.github.com/users/Seldaek/following{/other_user}","gists_url":"https://api.github.com/users/Seldaek/gists{/gist_id}","starred_url":"https://api.github.com/users/Seldaek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seldaek/subscriptions","organizations_url":"https://api.github.com/users/Seldaek/orgs","repos_url":"https://api.github.com/users/Seldaek/repos","events_url":"https://api.github.com/users/Seldaek/events{/privacy}","received_events_url":"https://api.github.com/users/Seldaek/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ee107778211ff0d027a6c15ecb77c4655a5c1b4b","commit_url":"https://api.github.com/repos/Seldaek/monolog/commits/ee107778211ff0d027a6c15ecb77c4655a5c1b4b","created_at":"2018-06-18T15:58:38Z","performed_via_github_app":null},{"id":1686569937,"node_id":"MDExOkNsb3NlZEV2ZW50MTY4NjU2OTkzNw==","url":"https://api.github.com/repos/Seldaek/monolog/issues/events/1686569937","actor":{"login":"Seldaek","id":183678,"node_id":"MDQ6VXNlcjE4MzY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/183678?v=4","gravatar_id":"","url":"https://api.github.com/users/Seldaek","html_url":"https://github.com/Seldaek","followers_url":"https://api.github.com/users/Seldaek/followers","following_url":"https://api.github.com/users/Seldaek/following{/other_user}","gists_url":"https://api.github.com/users/Seldaek/gists{/gist_id}","starred_url":"https://api.github.com/users/Seldaek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seldaek/subscriptions","organizations_url":"https://api.github.com/users/Seldaek/orgs","repos_url":"https://api.github.com/users/Seldaek/repos","events_url":"https://api.github.com/users/Seldaek/events{/privacy}","received_events_url":"https://api.github.com/users/Seldaek/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"ee107778211ff0d027a6c15ecb77c4655a5c1b4b","commit_url":"https://api.github.com/repos/Seldaek/monolog/commits/ee107778211ff0d027a6c15ecb77c4655a5c1b4b","created_at":"2018-06-18T15:58:40Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"cbcf","id":14228198,"node_id":"MDQ6VXNlcjE0MjI4MTk4","avatar_url":"https://avatars.githubusercontent.com/u/14228198?v=4","gravatar_id":"","url":"https://api.github.com/users/cbcf","html_url":"https://github.com/cbcf","followers_url":"https://api.github.com/users/cbcf/followers","following_url":"https://api.github.com/users/cbcf/following{/other_user}","gists_url":"https://api.github.com/users/cbcf/gists{/gist_id}","starred_url":"https://api.github.com/users/cbcf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbcf/subscriptions","organizations_url":"https://api.github.com/users/cbcf/orgs","repos_url":"https://api.github.com/users/cbcf/repos","events_url":"https://api.github.com/users/cbcf/events{/privacy}","received_events_url":"https://api.github.com/users/cbcf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-11T11:17:35Z","updated_at":"2020-09-11T11:17:35Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Seldaek/monolog/issues/1498","repository_url":"https://api.github.com/repos/Seldaek/monolog","labels_url":"https://api.github.com/repos/Seldaek/monolog/issues/1498/labels{/name}","comments_url":"https://api.github.com/repos/Seldaek/monolog/issues/1498/comments","events_url":"https://api.github.com/repos/Seldaek/monolog/issues/1498/events","html_url":"https://github.com/Seldaek/monolog/issues/1498","id":699188220,"node_id":"MDU6SXNzdWU2OTkxODgyMjA=","number":1498,"title":"Pushover notifications are randomly lost","user":{"login":"cbcf","id":14228198,"node_id":"MDQ6VXNlcjE0MjI4MTk4","avatar_url":"https://avatars.githubusercontent.com/u/14228198?v=4","gravatar_id":"","url":"https://api.github.com/users/cbcf","html_url":"https://github.com/cbcf","followers_url":"https://api.github.com/users/cbcf/followers","following_url":"https://api.github.com/users/cbcf/following{/other_user}","gists_url":"https://api.github.com/users/cbcf/gists{/gist_id}","starred_url":"https://api.github.com/users/cbcf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbcf/subscriptions","organizations_url":"https://api.github.com/users/cbcf/orgs","repos_url":"https://api.github.com/users/cbcf/repos","events_url":"https://api.github.com/users/cbcf/events{/privacy}","received_events_url":"https://api.github.com/users/cbcf/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":87833791,"node_id":"MDU6TGFiZWw4NzgzMzc5MQ==","url":"https://api.github.com/repos/Seldaek/monolog/labels/Feature","name":"Feature","color":"009800","default":false,"description":null},{"id":87833823,"node_id":"MDU6TGFiZWw4NzgzMzgyMw==","url":"https://api.github.com/repos/Seldaek/monolog/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/Seldaek/monolog/milestones/7","html_url":"https://github.com/Seldaek/monolog/milestone/7","labels_url":"https://api.github.com/repos/Seldaek/monolog/milestones/7/labels","id":7739999,"node_id":"MI_kwDOABUBmM4Adhpf","number":7,"title":"3.x","description":"","creator":{"login":"Seldaek","id":183678,"node_id":"MDQ6VXNlcjE4MzY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/183678?v=4","gravatar_id":"","url":"https://api.github.com/users/Seldaek","html_url":"https://github.com/Seldaek","followers_url":"https://api.github.com/users/Seldaek/followers","following_url":"https://api.github.com/users/Seldaek/following{/other_user}","gists_url":"https://api.github.com/users/Seldaek/gists{/gist_id}","starred_url":"https://api.github.com/users/Seldaek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seldaek/subscriptions","organizations_url":"https://api.github.com/users/Seldaek/orgs","repos_url":"https://api.github.com/users/Seldaek/repos","events_url":"https://api.github.com/users/Seldaek/events{/privacy}","received_events_url":"https://api.github.com/users/Seldaek/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":10,"closed_issues":91,"state":"open","created_at":"2022-03-06T12:34:44Z","updated_at":"2025-11-04T12:15:28Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2020-09-11T11:17:35Z","updated_at":"2025-10-23T00:03:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":1376664,"node_id":"MDEwOlJlcG9zaXRvcnkxMzc2NjY0","name":"monolog","full_name":"Seldaek/monolog","private":false,"owner":{"login":"Seldaek","id":183678,"node_id":"MDQ6VXNlcjE4MzY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/183678?v=4","gravatar_id":"","url":"https://api.github.com/users/Seldaek","html_url":"https://github.com/Seldaek","followers_url":"https://api.github.com/users/Seldaek/followers","following_url":"https://api.github.com/users/Seldaek/following{/other_user}","gists_url":"https://api.github.com/users/Seldaek/gists{/gist_id}","starred_url":"https://api.github.com/users/Seldaek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seldaek/subscriptions","organizations_url":"https://api.github.com/users/Seldaek/orgs","repos_url":"https://api.github.com/users/Seldaek/repos","events_url":"https://api.github.com/users/Seldaek/events{/privacy}","received_events_url":"https://api.github.com/users/Seldaek/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Seldaek/monolog","description":"Sends your logs to files, sockets, inboxes, databases and various web services","fork":false,"url":"https://api.github.com/repos/Seldaek/monolog","forks_url":"https://api.github.com/repos/Seldaek/monolog/forks","keys_url":"https://api.github.com/repos/Seldaek/monolog/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Seldaek/monolog/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Seldaek/monolog/teams","hooks_url":"https://api.github.com/repos/Seldaek/monolog/hooks","issue_events_url":"https://api.github.com/repos/Seldaek/monolog/issues/events{/number}","events_url":"https://api.github.com/repos/Seldaek/monolog/events","assignees_url":"https://api.github.com/repos/Seldaek/monolog/assignees{/user}","branches_url":"https://api.github.com/repos/Seldaek/monolog/branches{/branch}","tags_url":"https://api.github.com/repos/Seldaek/monolog/tags","blobs_url":"https://api.github.com/repos/Seldaek/monolog/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Seldaek/monolog/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Seldaek/monolog/git/refs{/sha}","trees_url":"https://api.github.com/repos/Seldaek/monolog/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Seldaek/monolog/statuses/{sha}","languages_url":"https://api.github.com/repos/Seldaek/monolog/languages","stargazers_url":"https://api.github.com/repos/Seldaek/monolog/stargazers","contributors_url":"https://api.github.com/repos/Seldaek/monolog/contributors","subscribers_url":"https://api.github.com/repos/Seldaek/monolog/subscribers","subscription_url":"https://api.github.com/repos/Seldaek/monolog/subscription","commits_url":"https://api.github.com/repos/Seldaek/monolog/commits{/sha}","git_commits_url":"https://api.github.com/repos/Seldaek/monolog/git/commits{/sha}","comments_url":"https://api.github.com/repos/Seldaek/monolog/comments{/number}","issue_comment_url":"https://api.github.com/repos/Seldaek/monolog/issues/comments{/number}","contents_url":"https://api.github.com/repos/Seldaek/monolog/contents/{+path}","compare_url":"https://api.github.com/repos/Seldaek/monolog/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Seldaek/monolog/merges","archive_url":"https://api.github.com/repos/Seldaek/monolog/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Seldaek/monolog/downloads","issues_url":"https://api.github.com/repos/Seldaek/monolog/issues{/number}","pulls_url":"https://api.github.com/repos/Seldaek/monolog/pulls{/number}","milestones_url":"https://api.github.com/repos/Seldaek/monolog/milestones{/number}","notifications_url":"https://api.github.com/repos/Seldaek/monolog/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Seldaek/monolog/labels{/name}","releases_url":"https://api.github.com/repos/Seldaek/monolog/releases{/id}","deployments_url":"https://api.github.com/repos/Seldaek/monolog/deployments","created_at":"2011-02-17T02:07:15Z","updated_at":"2025-11-09T16:20:07Z","pushed_at":"2025-10-27T13:40:53Z","git_url":"git://github.com/Seldaek/monolog.git","ssh_url":"git@github.com:Seldaek/monolog.git","clone_url":"https://github.com/Seldaek/monolog.git","svn_url":"https://github.com/Seldaek/monolog","homepage":"https://seldaek.github.io/monolog/","size":4917,"stargazers_count":21350,"watchers_count":21350,"language":"PHP","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":1904,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":33,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","logger","logging","php","psr-3"],"visibility":"public","forks":1904,"open_issues":33,"watchers":21350,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Symptom \r\nAbout half of the messages are dropped in an undeterministic fashion. \r\nThis applies to single messages as well as bulk-sending e.g. 20 messages.\r\n\r\n### How to reproduce\r\nI put together a test case at [cbcf/monolog-pushover-handler-bug-demo](https://github.com/cbcf/monolog-pushover-handler-bug-demo). This also contains rudimentary performance measures for the different approaches listed below.\r\n\r\n### Probable cause and fixes\r\nThe base SocketHandler takes a shortcut by only writing to the socket. Since it never reads back the response(s), most servers are likely to stop accepting new requests since response buffer is filling up.  Prematurely closing the connection may causes requests to be dropped server-side before reaching the actual processing stage. This is especially true if there is an intermediate server. Currently, for the Pushover API, the response headers indicate that cloudflare is used.\r\n\r\n**Closing the socket connection after every request** was introduced in PR #148 (discussion #146).\r\n\r\n**Reading back a bit of response data** seemed to help with SlackHandler #729 and HipChatHandler #1116.\r\nI tested this in [PushoverHandlerWithFread.php](https://github.com/cbcf/monolog-pushover-handler-bug-demo/blob/master/PushoverHandlerWithFread.php). \r\nThis seems to fix the primary symptom, but it is a significant slowdown for bulk-sending.\r\n\r\nOn the other hand, pushover recommend **keeping the connection open** for successive messages.\r\nI put together a proof-of-concept for reading the HTTP response bodies in [PushoverHandlerWithKeepAlive.php](https://github.com/cbcf/monolog-pushover-handler-bug-demo/blob/master/PushoverHandlerWithKeepAlive.php).\r\nFor my machines, this was only slightly slower than the current implementation and much faster than closing the socked for every write.\r\n\r\n### Conclusion/Opinion\r\nPushover it is targeted for medium-volume notifications (7500 messages per month). Therefore, the actual performance penalty of the \"clean\" solution may not justify implementing a full response read.\r\n\r\nIn my view, it would be well justified to actually interpret the response to ensure the messages was actually sent and accepted by the API. Throwing a proper exception would allow for fallback handlers. Due to the montly limit, I think Pushover is mostly suited for rare, high-priority notifications which demand such fallbacks.\r\n\r\nAs I understand, curl and the like were intentionally not used. Do you think adding a kind of \"custom\" HTTP response reader as an optional functionality of SocketHandler is desirable (in a separate feature issue I guess)?","reactions":{"url":"https://api.github.com/repos/Seldaek/monolog/issues/1498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Seldaek/monolog/issues/1498/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]