diff --git a/pylib/cqlshlib/test/run_cqlsh.py b/pylib/cqlshlib/test/run_cqlsh.py
index 1c90d58f31..2d0931ceb3 100644
--- a/pylib/cqlshlib/test/run_cqlsh.py
+++ b/pylib/cqlshlib/test/run_cqlsh.py
@@ -43,6 +43,12 @@ else:
 DEFAULT_CQLSH_PROMPT = DEFAULT_PREFIX + '(\S+@)?cqlsh(:\S+)?> '
 DEFAULT_CQLSH_TERM = 'xterm'
 
+try:
+    Pattern = re._pattern_type
+except AttributeError:
+    # Python 3.7+
+    Pattern = re.Pattern
+
 def get_smm_sequence(term='xterm'):
     """
     Return the set meta mode (smm) sequence, if any.
@@ -218,7 +224,7 @@ class ProcRunner:
 
     def read_until(self, until, blksize=4096, timeout=None,
                    flags=0, ptty_timeout=None, replace=[]):
-        if not isinstance(until, re._pattern_type):
+        if not isinstance(until, Pattern):
             until = re.compile(until, flags)
 
         cqlshlog.debug("Searching for %r" % (until.pattern,))
