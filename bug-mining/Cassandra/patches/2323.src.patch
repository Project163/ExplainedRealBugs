diff --git a/build.xml b/build.xml
index 254cc2d205..f37080ffa6 100644
--- a/build.xml
+++ b/build.xml
@@ -67,7 +67,7 @@
     </condition>
     <property name="version" value="${base.version}-SNAPSHOT"/>
     <property name="version.properties.dir"
-              value="${build.classes.main}/org/apache/cassandra/config/" />
+              value="${build.src.resources}/org/apache/cassandra/config/" />
     <property name="final.name" value="${ant.project.name}-${version}"/>
  
     <!-- details of what version of Maven ANT Tasks to fetch -->
@@ -167,6 +167,7 @@
         <delete dir="${build.classes}" />
         <delete dir="${cobertura.classes.dir}" />
         <delete dir="${build.src.gen-java}" />
+        <delete dir="${version.properties.dir}" />
     </target>
     <target depends="clean" name="cleanall"/>
 
@@ -603,6 +604,7 @@
     <!-- create properties file with C version -->
     <target name="createVersionPropFile">
       <taskdef name="propertyfile" classname="org.apache.tools.ant.taskdefs.optional.PropertyFile"/>
+      <mkdir dir="${version.properties.dir}"/>
       <propertyfile file="${version.properties.dir}/version.properties">
         <entry key="CassandraVersion" value="${version}"/>
       </propertyfile>
@@ -643,10 +645,10 @@
             <src path="${build.src.gen-java}"/>
             <classpath refid="cassandra.classpath"/>
         </javac>
+        <antcall target="createVersionPropFile"/>
         <copy todir="${build.classes.main}">
             <fileset dir="${build.src.resources}" />
         </copy>
-        <antcall target="createVersionPropFile"/>
     </target>
 
     <!-- Stress build file -->
