diff --git a/test/unit/org/apache/cassandra/cql3/CQLTester.java b/test/unit/org/apache/cassandra/cql3/CQLTester.java
index df2c370d9b..91d86d2c81 100644
--- a/test/unit/org/apache/cassandra/cql3/CQLTester.java
+++ b/test/unit/org/apache/cassandra/cql3/CQLTester.java
@@ -3556,12 +3556,17 @@ public abstract class CQLTester
         }
 
         protected static void prePrepareServer()
+        {
+            setupFileSystem();
+
+            CQLTester.prePrepareServer();
+        }
+
+        protected static void setupFileSystem()
         {
             fs = FileSystems.newGlobalInMemoryFileSystem();
             CassandraRelevantProperties.IGNORE_MISSING_NATIVE_FILE_HINTS.setBoolean(true);
             FileSystems.maybeCreateTmp();
-
-            CQLTester.prePrepareServer();
         }
 
         @Before
diff --git a/test/unit/org/apache/cassandra/index/accord/RouteIndexTest.java b/test/unit/org/apache/cassandra/index/accord/RouteIndexTest.java
index 3e808b7e11..011998e6ac 100644
--- a/test/unit/org/apache/cassandra/index/accord/RouteIndexTest.java
+++ b/test/unit/org/apache/cassandra/index/accord/RouteIndexTest.java
@@ -130,6 +130,8 @@ public class RouteIndexTest extends CQLTester.InMemory
         // this flag disables that flush
         CassandraRelevantProperties.UNSAFE_SYSTEM.setBoolean(true);
 
+        setupFileSystem();
+
         DatabaseDescriptor.daemonInitialization();
         DatabaseDescriptor.setAccordTransactionsEnabled(true);
         // disable journal compaction so the test can control when it happens
@@ -137,7 +139,7 @@ public class RouteIndexTest extends CQLTester.InMemory
         DatabaseDescriptor.setIncrementalBackupsEnabled(false);
         DatabaseDescriptor.setAutoSnapshot(false);
 
-        CQLTester.InMemory.prePrepareServer();
+        CQLTester.prePrepareServer();
 
         // Journal will async release segment references and close files... this adds possible race condition issues with truncate
         // so make these steps happen inline.
