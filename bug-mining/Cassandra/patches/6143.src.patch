diff --git a/.circleci/config.yml.HIGHRES b/.circleci/config.yml.HIGHRES
index 3ce70cd0bc..c5f23bd782 100644
--- a/.circleci/config.yml.HIGHRES
+++ b/.circleci/config.yml.HIGHRES
@@ -2390,48 +2390,24 @@ workflows:
         requires:
         - start_j8_unit_tests
         - build
-    - start_j8_unit_tests_repeat:
-        type: approval
-    - j8_unit_tests_repeat:
-        requires:
-        - start_j8_unit_tests_repeat
-        - build
     - start_j8_jvm_dtests:
         type: approval
     - j8_jvm_dtests:
         requires:
         - start_j8_jvm_dtests
         - build
-    - start_j8_jvm_dtests_repeat:
-        type: approval
-    - j8_jvm_dtests_repeat:
-        requires:
-        - start_j8_jvm_dtests_repeat
-        - build
     - start_utests_long:
         type: approval
     - utests_long:
         requires:
         - start_utests_long
         - build
-    - start_utests_long_repeat:
-        type: approval
-    - utests_long_repeat:
-        requires:
-        - start_utests_long_repeat
-        - build
     - start_utests_compression:
         type: approval
     - utests_compression:
         requires:
         - start_utests_compression
         - build
-    - start_utests_compression_repeat:
-        type: approval
-    - utests_compression_repeat:
-        requires:
-        - start_utests_compression_repeat
-        - build
     - start_j8_dtest_jars_build:
         type: approval
     - j8_dtest_jars_build:
@@ -2444,54 +2420,24 @@ workflows:
         requires:
         - start_jvm_upgrade_dtests
         - j8_dtest_jars_build
-    - start_jvm_upgrade_dtests_repeat:
-        type: approval
-    - j8_jvm_upgrade_dtests_repeat:
-        requires:
-        - start_jvm_upgrade_dtests_repeat
-        - j8_dtest_jars_build
     - start_j8_dtests:
         type: approval
     - j8_dtests:
         requires:
         - start_j8_dtests
         - build
-    - start_j8_dtests_repeat:
-        type: approval
-    - j8_dtests_repeat:
-        requires:
-        - start_j8_dtests_repeat
-        - build
     - start_j8_dtests_vnode:
         type: approval
     - j8_dtests_vnode:
         requires:
         - start_j8_dtests_vnode
         - build
-    - start_j8_dtests_vnode_repeat:
-        type: approval
-    - j8_dtests_vnode_repeat:
-        requires:
-        - start_j8_dtests_vnode_repeat
-        - build
     - start_j8_upgrade_dtests:
         type: approval
     - j8_upgrade_dtests:
         requires:
         - start_j8_upgrade_dtests
         - build
-    - start_j8_upgrade_dtests_repeat:
-        type: approval
-    - j8_upgrade_dtests_repeat:
-        requires:
-        - start_j8_upgrade_dtests_repeat
-        - build
-    - start_j8_repeated_ant_test:
-        type: approval
-    - j8_repeated_ant_test:
-        requires:
-        - start_j8_repeated_ant_test
-        - build
   pre-commit_tests:
     jobs:
     - start_pre-commit_tests:
@@ -2502,35 +2448,21 @@ workflows:
     - j8_unit_tests:
         requires:
         - build
-    - j8_unit_tests_repeat:
-        requires:
-        - build
     - j8_jvm_dtests:
         requires:
         - build
-    - j8_jvm_dtests_repeat:
-        requires:
-        - build
     - start_utests_long:
         type: approval
     - utests_long:
         requires:
         - start_utests_long
         - build
-    - utests_long_repeat:
-        requires:
-        - start_utests_long
-        - build
     - start_utests_compression:
         type: approval
     - utests_compression:
         requires:
         - start_utests_compression
         - build
-    - utests_compression_repeat:
-        requires:
-        - start_utests_compression
-        - build
     - start_jvm_upgrade_dtests:
         type: approval
     - j8_dtest_jars_build:
@@ -2540,28 +2472,15 @@ workflows:
     - j8_jvm_upgrade_dtests:
         requires:
         - j8_dtest_jars_build
-    - j8_jvm_upgrade_dtests_repeat:
-        requires:
-        - j8_dtest_jars_build
     - j8_dtests:
         requires:
         - build
-    - j8_dtests_repeat:
-        requires:
-        - build
     - j8_dtests_vnode:
         requires:
         - build
-    - j8_dtests_vnode_repeat:
-        requires:
-        - build
     - start_upgrade_dtests:
         type: approval
     - j8_upgrade_dtests:
         requires:
         - start_upgrade_dtests
         - build
-    - j8_upgrade_dtests_repeat:
-        requires:
-        - start_upgrade_dtests
-        - build
diff --git a/.circleci/config.yml.LOWRES b/.circleci/config.yml.LOWRES
index 6f2272d422..1141a9c923 100644
--- a/.circleci/config.yml.LOWRES
+++ b/.circleci/config.yml.LOWRES
@@ -2390,48 +2390,24 @@ workflows:
         requires:
         - start_j8_unit_tests
         - build
-    - start_j8_unit_tests_repeat:
-        type: approval
-    - j8_unit_tests_repeat:
-        requires:
-        - start_j8_unit_tests_repeat
-        - build
     - start_j8_jvm_dtests:
         type: approval
     - j8_jvm_dtests:
         requires:
         - start_j8_jvm_dtests
         - build
-    - start_j8_jvm_dtests_repeat:
-        type: approval
-    - j8_jvm_dtests_repeat:
-        requires:
-        - start_j8_jvm_dtests_repeat
-        - build
     - start_utests_long:
         type: approval
     - utests_long:
         requires:
         - start_utests_long
         - build
-    - start_utests_long_repeat:
-        type: approval
-    - utests_long_repeat:
-        requires:
-        - start_utests_long_repeat
-        - build
     - start_utests_compression:
         type: approval
     - utests_compression:
         requires:
         - start_utests_compression
         - build
-    - start_utests_compression_repeat:
-        type: approval
-    - utests_compression_repeat:
-        requires:
-        - start_utests_compression_repeat
-        - build
     - start_j8_dtest_jars_build:
         type: approval
     - j8_dtest_jars_build:
@@ -2444,54 +2420,24 @@ workflows:
         requires:
         - start_jvm_upgrade_dtests
         - j8_dtest_jars_build
-    - start_jvm_upgrade_dtests_repeat:
-        type: approval
-    - j8_jvm_upgrade_dtests_repeat:
-        requires:
-        - start_jvm_upgrade_dtests_repeat
-        - j8_dtest_jars_build
     - start_j8_dtests:
         type: approval
     - j8_dtests:
         requires:
         - start_j8_dtests
         - build
-    - start_j8_dtests_repeat:
-        type: approval
-    - j8_dtests_repeat:
-        requires:
-        - start_j8_dtests_repeat
-        - build
     - start_j8_dtests_vnode:
         type: approval
     - j8_dtests_vnode:
         requires:
         - start_j8_dtests_vnode
         - build
-    - start_j8_dtests_vnode_repeat:
-        type: approval
-    - j8_dtests_vnode_repeat:
-        requires:
-        - start_j8_dtests_vnode_repeat
-        - build
     - start_j8_upgrade_dtests:
         type: approval
     - j8_upgrade_dtests:
         requires:
         - start_j8_upgrade_dtests
         - build
-    - start_j8_upgrade_dtests_repeat:
-        type: approval
-    - j8_upgrade_dtests_repeat:
-        requires:
-        - start_j8_upgrade_dtests_repeat
-        - build
-    - start_j8_repeated_ant_test:
-        type: approval
-    - j8_repeated_ant_test:
-        requires:
-        - start_j8_repeated_ant_test
-        - build
   pre-commit_tests:
     jobs:
     - start_pre-commit_tests:
@@ -2502,35 +2448,21 @@ workflows:
     - j8_unit_tests:
         requires:
         - build
-    - j8_unit_tests_repeat:
-        requires:
-        - build
     - j8_jvm_dtests:
         requires:
         - build
-    - j8_jvm_dtests_repeat:
-        requires:
-        - build
     - start_utests_long:
         type: approval
     - utests_long:
         requires:
         - start_utests_long
         - build
-    - utests_long_repeat:
-        requires:
-        - start_utests_long
-        - build
     - start_utests_compression:
         type: approval
     - utests_compression:
         requires:
         - start_utests_compression
         - build
-    - utests_compression_repeat:
-        requires:
-        - start_utests_compression
-        - build
     - start_jvm_upgrade_dtests:
         type: approval
     - j8_dtest_jars_build:
@@ -2540,28 +2472,15 @@ workflows:
     - j8_jvm_upgrade_dtests:
         requires:
         - j8_dtest_jars_build
-    - j8_jvm_upgrade_dtests_repeat:
-        requires:
-        - j8_dtest_jars_build
     - j8_dtests:
         requires:
         - build
-    - j8_dtests_repeat:
-        requires:
-        - build
     - j8_dtests_vnode:
         requires:
         - build
-    - j8_dtests_vnode_repeat:
-        requires:
-        - build
     - start_upgrade_dtests:
         type: approval
     - j8_upgrade_dtests:
         requires:
         - start_upgrade_dtests
         - build
-    - j8_upgrade_dtests_repeat:
-        requires:
-        - start_upgrade_dtests
-        - build
diff --git a/.circleci/config.yml.MIDRES b/.circleci/config.yml.MIDRES
index 4d70e94832..5089a3ceac 100644
--- a/.circleci/config.yml.MIDRES
+++ b/.circleci/config.yml.MIDRES
@@ -2390,48 +2390,24 @@ workflows:
         requires:
         - start_j8_unit_tests
         - build
-    - start_j8_unit_tests_repeat:
-        type: approval
-    - j8_unit_tests_repeat:
-        requires:
-        - start_j8_unit_tests_repeat
-        - build
     - start_j8_jvm_dtests:
         type: approval
     - j8_jvm_dtests:
         requires:
         - start_j8_jvm_dtests
         - build
-    - start_j8_jvm_dtests_repeat:
-        type: approval
-    - j8_jvm_dtests_repeat:
-        requires:
-        - start_j8_jvm_dtests_repeat
-        - build
     - start_utests_long:
         type: approval
     - utests_long:
         requires:
         - start_utests_long
         - build
-    - start_utests_long_repeat:
-        type: approval
-    - utests_long_repeat:
-        requires:
-        - start_utests_long_repeat
-        - build
     - start_utests_compression:
         type: approval
     - utests_compression:
         requires:
         - start_utests_compression
         - build
-    - start_utests_compression_repeat:
-        type: approval
-    - utests_compression_repeat:
-        requires:
-        - start_utests_compression_repeat
-        - build
     - start_j8_dtest_jars_build:
         type: approval
     - j8_dtest_jars_build:
@@ -2444,54 +2420,24 @@ workflows:
         requires:
         - start_jvm_upgrade_dtests
         - j8_dtest_jars_build
-    - start_jvm_upgrade_dtests_repeat:
-        type: approval
-    - j8_jvm_upgrade_dtests_repeat:
-        requires:
-        - start_jvm_upgrade_dtests_repeat
-        - j8_dtest_jars_build
     - start_j8_dtests:
         type: approval
     - j8_dtests:
         requires:
         - start_j8_dtests
         - build
-    - start_j8_dtests_repeat:
-        type: approval
-    - j8_dtests_repeat:
-        requires:
-        - start_j8_dtests_repeat
-        - build
     - start_j8_dtests_vnode:
         type: approval
     - j8_dtests_vnode:
         requires:
         - start_j8_dtests_vnode
         - build
-    - start_j8_dtests_vnode_repeat:
-        type: approval
-    - j8_dtests_vnode_repeat:
-        requires:
-        - start_j8_dtests_vnode_repeat
-        - build
     - start_j8_upgrade_dtests:
         type: approval
     - j8_upgrade_dtests:
         requires:
         - start_j8_upgrade_dtests
         - build
-    - start_j8_upgrade_dtests_repeat:
-        type: approval
-    - j8_upgrade_dtests_repeat:
-        requires:
-        - start_j8_upgrade_dtests_repeat
-        - build
-    - start_j8_repeated_ant_test:
-        type: approval
-    - j8_repeated_ant_test:
-        requires:
-        - start_j8_repeated_ant_test
-        - build
   pre-commit_tests:
     jobs:
     - start_pre-commit_tests:
@@ -2502,35 +2448,21 @@ workflows:
     - j8_unit_tests:
         requires:
         - build
-    - j8_unit_tests_repeat:
-        requires:
-        - build
     - j8_jvm_dtests:
         requires:
         - build
-    - j8_jvm_dtests_repeat:
-        requires:
-        - build
     - start_utests_long:
         type: approval
     - utests_long:
         requires:
         - start_utests_long
         - build
-    - utests_long_repeat:
-        requires:
-        - start_utests_long
-        - build
     - start_utests_compression:
         type: approval
     - utests_compression:
         requires:
         - start_utests_compression
         - build
-    - utests_compression_repeat:
-        requires:
-        - start_utests_compression
-        - build
     - start_jvm_upgrade_dtests:
         type: approval
     - j8_dtest_jars_build:
@@ -2540,28 +2472,15 @@ workflows:
     - j8_jvm_upgrade_dtests:
         requires:
         - j8_dtest_jars_build
-    - j8_jvm_upgrade_dtests_repeat:
-        requires:
-        - j8_dtest_jars_build
     - j8_dtests:
         requires:
         - build
-    - j8_dtests_repeat:
-        requires:
-        - build
     - j8_dtests_vnode:
         requires:
         - build
-    - j8_dtests_vnode_repeat:
-        requires:
-        - build
     - start_upgrade_dtests:
         type: approval
     - j8_upgrade_dtests:
         requires:
         - start_upgrade_dtests
         - build
-    - j8_upgrade_dtests_repeat:
-        requires:
-        - start_upgrade_dtests
-        - build
diff --git a/.circleci/generate.sh b/.circleci/generate.sh
index 76fe9433c6..c3a836a97e 100755
--- a/.circleci/generate.sh
+++ b/.circleci/generate.sh
@@ -226,48 +226,61 @@ if $has_env_vars; then
   unset IFS
 fi
 
-# define function to remove unneeded jobs
+# Define function to remove unneeded jobs.
+# The first argument is the file name, and the second arguemnt is the job name.
 delete_job()
 {
   delete_yaml_block()
   {
-    sed -Ei.bak "/^    - ${1}/,/^    [^[:space:]]+|^  [^[:space:]]+/{//!d;}" $BASEDIR/config.yml
-    sed -Ei.bak "/^    - ${1}/d" $BASEDIR/config.yml
+    sed -Ei.bak "/^    - ${2}/,/^    [^[:space:]]+|^  [^[:space:]]+/{//!d;}" "$1"
+    sed -Ei.bak "/^    - ${2}/d" "$1"
   }
-  delete_yaml_block "${1}"
-  delete_yaml_block "start_${1}"
+  file="$BASEDIR/$1"
+  delete_yaml_block "$file" "${2}"
+  delete_yaml_block "$file" "start_${2}"
 }
 
-# removed unneeded repeated jobs
-if (! (echo "$env_vars" | grep -q "REPEATED_UTESTS=" )); then
-  delete_job "j8_unit_tests_repeat"
-  delete_job "j11_unit_tests_repeat"
-  delete_job "utests_compression_repeat"
-  delete_job "utests_system_keyspace_directory_repeat"
-fi
-if (! (echo "$env_vars" | grep -q "REPEATED_UTESTS_LONG=")); then
-  delete_job "utests_long_repeat"
-fi
-if (! (echo "$env_vars" | grep -q "REPEATED_JVM_DTESTS=")); then
-  delete_job "j8_jvm_dtests_repeat"
-  delete_job "j8_jvm_dtests_vnode_repeat"
-  delete_job "j11_jvm_dtests_repeat"
-  delete_job "j11_jvm_dtests_vnode_repeat"
-fi
-if (! (echo "$env_vars" | grep -q "REPEATED_JVM_UPGRADE_DTESTS=")); then
-  delete_job "start_jvm_upgrade_dtests_repeat"
-  delete_job "j8_jvm_upgrade_dtests_repeat"
-fi
-if (! (echo "$env_vars" | grep -q "REPEATED_DTESTS=")); then
-  delete_job "j8_dtests_repeat"
-  delete_job "j8_dtests_vnode_repeat"
-  delete_job "j11_dtests_repeat"
-  delete_job "j11_dtests_vnode_repeat"
-fi
-if (! (echo "$env_vars" | grep -q "REPEATED_UPGRADE_DTESTS=")); then
-  delete_job "j8_upgrade_dtests_repeat"
-fi
-if (! (echo "$env_vars" | grep -q "REPEATED_ANT_TEST_CLASS=")); then
-  delete_job "j8_repeated_ant_test"
-  delete_job "j11_repeated_ant_test"
+# Define function to remove any unneeded repeated jobs.
+# The first and only argument is the file name.
+delete_repeated_jobs()
+{
+  if (! (echo "$env_vars" | grep -q "REPEATED_UTESTS=" )); then
+    delete_job "$1" "j8_unit_tests_repeat"
+    delete_job "$1" "j11_unit_tests_repeat"
+    delete_job "$1" "utests_compression_repeat"
+    delete_job "$1" "utests_system_keyspace_directory_repeat"
+  fi
+  if (! (echo "$env_vars" | grep -q "REPEATED_UTESTS_LONG=")); then
+    delete_job "$1" "utests_long_repeat"
+  fi
+  if (! (echo "$env_vars" | grep -q "REPEATED_JVM_DTESTS=")); then
+    delete_job "$1" "j8_jvm_dtests_repeat"
+    delete_job "$1" "j8_jvm_dtests_vnode_repeat"
+    delete_job "$1" "j11_jvm_dtests_repeat"
+    delete_job "$1" "j11_jvm_dtests_vnode_repeat"
+  fi
+  if (! (echo "$env_vars" | grep -q "REPEATED_JVM_UPGRADE_DTESTS=")); then
+    delete_job "$1" "start_jvm_upgrade_dtests_repeat"
+    delete_job "$1" "j8_jvm_upgrade_dtests_repeat"
+  fi
+  if (! (echo "$env_vars" | grep -q "REPEATED_DTESTS=")); then
+    delete_job "$1" "j8_dtests_repeat"
+    delete_job "$1" "j8_dtests_vnode_repeat"
+    delete_job "$1" "j11_dtests_repeat"
+    delete_job "$1" "j11_dtests_vnode_repeat"
+  fi
+  if (! (echo "$env_vars" | grep -q "REPEATED_UPGRADE_DTESTS=")); then
+    delete_job "$1" "j8_upgrade_dtests_repeat"
+  fi
+  if (! (echo "$env_vars" | grep -q "REPEATED_ANT_TEST_CLASS=")); then
+    delete_job "$1" "j8_repeated_ant_test"
+    delete_job "$1" "j11_repeated_ant_test"
+  fi
+}
+
+delete_repeated_jobs "config.yml"
+if $all; then
+  delete_repeated_jobs "config.yml.LOWRES"
+  delete_repeated_jobs "config.yml.MIDRES"
+  delete_repeated_jobs "config.yml.HIGHRES"
 fi
