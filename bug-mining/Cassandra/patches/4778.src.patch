diff --git a/CHANGES.txt b/CHANGES.txt
index 1f6c21579d..4425aad7ba 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -1,4 +1,5 @@
 4.0
+ * NPE in IR cleanup when columnfamily has no sstables (CASSANDRA-13585)
  * Fix Randomness of stress values (CASSANDRA-12744)
  * Allow selecting Map values and Set elements (CASSANDRA-7396)
  * Fast and garbage-free Streaming Histogram (CASSANDRA-13444)
diff --git a/src/java/org/apache/cassandra/repair/consistent/PendingAntiCompaction.java b/src/java/org/apache/cassandra/repair/consistent/PendingAntiCompaction.java
index dd71537905..f183d1443a 100644
--- a/src/java/org/apache/cassandra/repair/consistent/PendingAntiCompaction.java
+++ b/src/java/org/apache/cassandra/repair/consistent/PendingAntiCompaction.java
@@ -69,8 +69,10 @@ public class PendingAntiCompaction
 
         void abort()
         {
-            txn.abort();
-            refs.release();
+            if (txn != null)
+                txn.abort();
+            if (refs != null)
+                refs.release();
         }
     }
 
diff --git a/test/unit/org/apache/cassandra/repair/consistent/PendingAntiCompactionTest.java b/test/unit/org/apache/cassandra/repair/consistent/PendingAntiCompactionTest.java
index 2126835806..3119453a30 100644
--- a/test/unit/org/apache/cassandra/repair/consistent/PendingAntiCompactionTest.java
+++ b/test/unit/org/apache/cassandra/repair/consistent/PendingAntiCompactionTest.java
@@ -255,6 +255,20 @@ public class PendingAntiCompactionTest
         result.abort();  // releases sstable refs
     }
 
+    @Test
+    public void pendingRepairNoSSTablesExist() throws Exception
+    {
+        cfs.disableAutoCompaction();
+
+        Assert.assertEquals(0, cfs.getLiveSSTables().size());
+
+        PendingAntiCompaction.AcquisitionCallable acquisitionCallable = new PendingAntiCompaction.AcquisitionCallable(cfs, FULL_RANGE, UUIDGen.getTimeUUID());
+        PendingAntiCompaction.AcquireResult result = acquisitionCallable.call();
+        Assert.assertNotNull(result);
+
+        result.abort();  // There's nothing to release, but we should exit cleanly
+    }
+
     /**
      * anti compaction task should be submitted if everything is ok
      */
