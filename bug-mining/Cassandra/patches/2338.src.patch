diff --git a/CHANGES.txt b/CHANGES.txt
index 049544ea04..e124ac0e85 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -17,6 +17,7 @@
  * Support null in CQL3 functions (CASSANDRA-5910)
  * Replace the deprecated MapMaker with CacheLoader (CASSANDRA-6007)
  * Add SSTableDeletingNotification to DataTracker (CASSANDRA-6010)
+ * Fix snapshots in use get deleted during snapshot repair (CASSANDRA-6011)
 
 
 1.2.9
diff --git a/src/java/org/apache/cassandra/db/compaction/CompactionManager.java b/src/java/org/apache/cassandra/db/compaction/CompactionManager.java
index 44b973fb37..4c9c7073ff 100644
--- a/src/java/org/apache/cassandra/db/compaction/CompactionManager.java
+++ b/src/java/org/apache/cassandra/db/compaction/CompactionManager.java
@@ -770,8 +770,8 @@ public class CompactionManager implements CompactionManagerMBean
         {
             SSTableReader.releaseReferences(sstables);
             iter.close();
-            if (cfs.table.snapshotExists(validator.request.sessionid))
-                cfs.table.clearSnapshot(validator.request.sessionid);
+            if (cfs.snapshotExists(validator.request.sessionid))
+                cfs.clearSnapshot(validator.request.sessionid);
 
             metrics.finishCompaction(ci);
         }
