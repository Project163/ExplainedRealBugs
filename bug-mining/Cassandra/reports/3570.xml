<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:54:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9409] Ensure that UDF and UDAs are keyspace-isolated</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9409</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;In table columns we don&apos;t allow to use UDTs from other keyspaces.&lt;/p&gt;

&lt;p&gt;We should also make sure that the following is &lt;b&gt;not&lt;/b&gt; allowed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;UDFs taking UDTs from other keyspaces as arguments or return types&lt;/li&gt;
	&lt;li&gt;UDAs using UDFs from other keyspaces as its subfunctions&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The only exception should be made for &lt;tt&gt;system&lt;/tt&gt; keyspace. UDAs and UDFs from any keyspace should be able to reference and reuse those.&lt;/p&gt;

&lt;p&gt;Having no dependencies between keyspaces makes this consistent with the way we treat UDTs, which is important, but also simplifies auth in multi-tenant environments, and is also crucial to upcoming 3.X strongly consistent schema work (the ability to treat keyspace as a unit of change and not having to worry about cross-keyspace dependencies).&lt;/p&gt;

&lt;p&gt;P.S. Should &lt;b&gt;probably&lt;/b&gt; still allow using other keyspaces UDFs and UDAs in &lt;tt&gt;SELECT&lt;/tt&gt; statements. Strict isolation in schema dependencies is what matters to me here.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12830496">CASSANDRA-9409</key>
            <summary>Ensure that UDF and UDAs are keyspace-isolated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="snazy">Robert Stupp</assignee>
                                    <reporter username="aleksey">Aleksey Yeschenko</reporter>
                        <labels>
                            <label>qa-resolved</label>
                    </labels>
                <created>Sun, 17 May 2015 13:53:40 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:10 +0000</updated>
                            <resolved>Wed, 20 May 2015 22:15:21 +0000</resolved>
                                        <fixVersion>2.2.0 rc1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14547209" author="iamaleksey" created="Sun, 17 May 2015 15:56:30 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6438&quot; title=&quot;Make user types keyspace scoped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6438&quot;&gt;&lt;del&gt;CASSANDRA-6438&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6643&quot; title=&quot;Limit user types to the keyspace they are defined in&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6643&quot;&gt;&lt;del&gt;CASSANDRA-6643&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14547276" author="snazy" created="Sun, 17 May 2015 18:24:31 +0000"  >&lt;p&gt;Note: UDAs cannot use a UDF from a different keyspace since &lt;tt&gt;CREATE AGGREGATE&lt;/tt&gt; syntax does not allow it.&lt;/p&gt;

&lt;p&gt;UDAs did not allow UDTs from another keyspace.&lt;br/&gt;
However, UDFs did allow that (and had a unit test to ensure that).&lt;/p&gt;

&lt;p&gt;Attached patch ensures that no types or functions from another keyspace can be used.&lt;/p&gt;

&lt;p&gt;The attached patch does not allow use of user-types or functions from &lt;tt&gt;system&lt;/tt&gt; keyspace. Will provide a separate patch to allow that so we can decide upon commit.&lt;/p&gt;</comment>
                            <comment id="14547283" author="snazy" created="Sun, 17 May 2015 18:44:00 +0000"  >&lt;p&gt;Attached the same patch but also allow &lt;tt&gt;system&lt;/tt&gt; ks for user types and functions (9404-with-system.txt).&lt;/p&gt;</comment>
                            <comment id="14551037" author="iamaleksey" created="Tue, 19 May 2015 19:10:09 +0000"  >&lt;p&gt;+1, but please run it through cassci first.&lt;/p&gt;</comment>
                            <comment id="14551116" author="snazy" created="Tue, 19 May 2015 20:04:44 +0000"  >&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;Just merged current c-2.2 branch:&lt;br/&gt;
testall: &lt;a href=&quot;http://cassci.datastax.com/job/snazy-9409-udf-ks-isol-testall/3/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/snazy-9409-udf-ks-isol-testall/3/&lt;/a&gt;&lt;br/&gt;
dtest: &lt;a href=&quot;http://cassci.datastax.com/job/snazy-9409-udf-ks-isol-dtest/3/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/snazy-9409-udf-ks-isol-dtest/3/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14551303" author="snazy" created="Tue, 19 May 2015 21:51:45 +0000"  >&lt;p&gt;Tests look fine regarding the patch.&lt;/p&gt;

&lt;p&gt;Committed 9409-with-system.txt as 6eea3ea395957d1e799952de3423cc29fd469e3e&lt;/p&gt;</comment>
                            <comment id="14552359" author="aboudreault" created="Wed, 20 May 2015 14:16:29 +0000"  >&lt;p&gt;Sorry for the last 73 Jira actions ... it is damn complicated for nothing to set the ticket back to the TESTING status.&lt;/p&gt;</comment>
                            <comment id="14553239" author="aboudreault" created="Wed, 20 May 2015 22:17:08 +0000"  >&lt;p&gt;dtests committed.&lt;/p&gt;</comment>
                            <comment id="14570009" author="zackurey" created="Tue, 2 Jun 2015 23:51:51 +0000"  >&lt;p&gt;Is it expected that built in functions cannot be resolved by a UDA unless we specify the system keyspace?  For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE AGGREGATE &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not exists ks.my_agg(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 
SFUNC ks.adder
STYPE &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;
FINALFUNC intasblob
;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Gives me me the error:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Final function ks.intasblob(int) does not exist or is not a scalar function&lt;/p&gt;&lt;/blockquote&gt;  
&lt;p&gt;Prefixing with &apos;system.&apos; fixes the issue.  But I was expecting it to resolve as if I were using a built in function elsewhere.&lt;/p&gt;</comment>
                            <comment id="14570432" author="slebresne" created="Wed, 3 Jun 2015 07:39:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is it expected that built in functions cannot be resolved by a UDA unless we specify the system keyspace?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No. Do you mind opening a separate ticket for that?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12733402" name="9409-with-system.txt" size="17623" author="snazy" created="Sun, 17 May 2015 18:44:00 +0000"/>
                            <attachment id="12733400" name="9409.txt" size="7314" author="snazy" created="Sun, 17 May 2015 18:24:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[snazy]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2eu7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aboudreault</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>