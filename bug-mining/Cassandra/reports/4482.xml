<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:05:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12450] CQLSSTableWriter does not allow Update statement</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12450</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;CQLSSTableWriter throws Exception when trying to use Update statement.&lt;br/&gt;
Has been working fine in previous versions for me.&lt;/p&gt;

&lt;p&gt;Code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; KS = &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;;
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; TABLE = &lt;span class=&quot;code-quote&quot;&gt;&quot;data&quot;&lt;/span&gt;;

		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; schema = &lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TABLE &quot;&lt;/span&gt; + KS + &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt; + TABLE
				+ &lt;span class=&quot;code-quote&quot;&gt;&quot;(k text, c1 text, c2 text, c3 text, v text, primary key(k, c1,c2,c3))&quot;&lt;/span&gt;;

		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; query = &lt;span class=&quot;code-quote&quot;&gt;&quot;UPDATE &quot;&lt;/span&gt; + KS + &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt; + TABLE + &lt;span class=&quot;code-quote&quot;&gt;&quot; SET v = ? WHERE k = ? and c1 = ? and c2 = ? and c3 = ?&quot;&lt;/span&gt;;

		File dataDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(...);

		CQLSSTableWriter writer = CQLSSTableWriter.builder().inDirectory(dataDir).forTable(schema).using(query).build(); &lt;span class=&quot;code-comment&quot;&gt;//Exception here (see below) 
&lt;/span&gt;
		HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; row = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();

		row.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;k&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;);
		row.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;c1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;);
		row.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;c2&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;);
		row.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;c3&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;);
		row.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;v&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;v&quot;&lt;/span&gt;);

		writer.addRow(row);
		writer.close();

	}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;14:51:00.461 [main] INFO  o.a.cassandra.cql3.QueryProcessor - Initialized prepar
ed statement caches with 0 MB (&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;) and 0 MB (Thrift)
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.IllegalArgumentException: Invalid query, mu
st be a INSERT statement but was: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.cassandra.cql3.statements.Upd
ateStatement$ParsedUpdate
        at org.apache.cassandra.io.sstable.CQLSSTableWriter.parseStatement(CQLSS
TableWriter.java:589)
        at org.apache.cassandra.io.sstable.CQLSSTableWriter.access$000(CQLSSTabl
eWriter.java:102)
        at org.apache.cassandra.io.sstable.CQLSSTableWriter$Builder.using(CQLSST
ableWriter.java:445)
        at CassandraJsonImporter.main(Cassand
raJsonImporter.java:66)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m currently testing it with 3.7 version, my POM looks like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.apache.cassandra&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;cassandra-all&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;3.7&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;

&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.apache.cassandra&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;cassandra-clientutil&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;3.7&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
  &amp;lt;groupId&amp;gt;com.datastax.cassandra&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;cassandra-driver-core&amp;lt;/artifactId&amp;gt;
  &amp;lt;version&amp;gt;3.0.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It has been working with 3.0.8 versions in the POM, but that version is somehow not including the UDT support? &lt;/p&gt;

&lt;p&gt;I want to use UPDATE instead of INSERT because I need to append data to lists and do not want to overwrite existing data in the lists. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12996944">CASSANDRA-12450</key>
            <summary>CQLSSTableWriter does not allow Update statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ifesdjeen">Alex Petrov</assignee>
                                    <reporter username="Kuku1">Kuku1</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Aug 2016 13:22:54 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:22 +0000</updated>
                            <resolved>Fri, 7 Oct 2016 04:18:02 +0000</resolved>
                                        <fixVersion>3.10</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15418856" author="kuku1" created="Fri, 12 Aug 2016 13:51:38 +0000"  >&lt;p&gt;I&apos;ve looked up on some more evidence whether the UPDATE statements have been intentionally removed or not: &lt;/p&gt;

&lt;p&gt;The CQLSSTableWriterTest also contains a test called &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/test/unit/org/apache/cassandra/io/sstable/CQLSSTableWriterTest.java#L131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&quot;testForbidCounterUpdates&quot;&lt;/a&gt; that should be testing &lt;em&gt;counter&lt;/em&gt; updates according to its name. &lt;br/&gt;
However, the IllegalArgumentException that will be thrown currently is not caused by the counter column (or at least it shouldn&apos;t be caused by it if I&apos;m not mistaken). &lt;/p&gt;

&lt;p&gt;Thus, I am expecting the UPDATE statement to be broken and not intentionally removed. &lt;/p&gt;</comment>
                            <comment id="15420700" author="kuku1" created="Mon, 15 Aug 2016 07:40:28 +0000"  >&lt;p&gt;Maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; knows if this is related to this commit &lt;a href=&quot;https://github.com/apache/cassandra/commit/cc90d0423cb64bcf61ad37126c32de85fbca22c6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/cc90d0423cb64bcf61ad37126c32de85fbca22c6&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Edit:&lt;br/&gt;
I went on and tested on which version it does not break anymore.&lt;br/&gt;
For version 3.6, the same exception is thrown but 3.5 is working for me. Version 3.5 does unfortunately not contain the UDT support I need though. &lt;/p&gt;</comment>
                            <comment id="15455478" author="slebresne" created="Thu, 1 Sep 2016 13:59:25 +0000"  >&lt;p&gt;It&apos;s pretty clearly a regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10624&quot; title=&quot;Support UDT in CQLSSTableWriter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10624&quot;&gt;&lt;del&gt;CASSANDRA-10624&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15478600" author="ifesdjeen" created="Fri, 9 Sep 2016 23:15:53 +0000"  >&lt;p&gt;Thanks for catching it! I&apos;ve made a patch that would allow both &lt;tt&gt;INSERT&lt;/tt&gt; and &lt;tt&gt;UPDATE&lt;/tt&gt; statements. The test with &lt;tt&gt;UPDATE&lt;/tt&gt; statement was only passing by accident since it was expecting an illegal argument exception, however with a different error message. Comment in one of the methods was misleading, as the order of builder methods does not matter anymore. Tests are updated to reflect and test that, too.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12450-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12450-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12450-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15479825" author="kuku1" created="Sat, 10 Sep 2016 13:47:35 +0000"  >&lt;p&gt;I have downloaded your branch, built it with ant and installed the jars to my local repository with maven.&lt;/p&gt;

&lt;p&gt;Then I have taken the code of the update test into a new project. It does not work for me.&lt;br/&gt;
Note that I have changed the input folder because it was throwing a exception on the temp file folder for me. &lt;/p&gt;

&lt;p&gt;I am using Windows.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cassandra.io.sstable.CQLSSTableWriter;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BulkCassandraImporter {
	
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; KS = &lt;span class=&quot;code-quote&quot;&gt;&quot;cql_keyspace6&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; TABLE = &lt;span class=&quot;code-quote&quot;&gt;&quot;table6&quot;&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; schema = &lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TABLE &quot;&lt;/span&gt; + KS + &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt; + TABLE + &lt;span class=&quot;code-quote&quot;&gt;&quot; (&quot;&lt;/span&gt;
                              + &lt;span class=&quot;code-quote&quot;&gt;&quot;  k &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,&quot;&lt;/span&gt;
                              + &lt;span class=&quot;code-quote&quot;&gt;&quot;  c1 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,&quot;&lt;/span&gt;
                              + &lt;span class=&quot;code-quote&quot;&gt;&quot;  c2 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,&quot;&lt;/span&gt;
                              + &lt;span class=&quot;code-quote&quot;&gt;&quot;  v text,&quot;&lt;/span&gt;
                              + &lt;span class=&quot;code-quote&quot;&gt;&quot;  PRIMARY KEY (k, c1, c2)&quot;&lt;/span&gt;
                              + &lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;;

        File tempdir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;H:\\cassandra code\\run&quot;&lt;/span&gt;);
        
        CQLSSTableWriter writer = CQLSSTableWriter.builder()
                                                  .inDirectory(tempdir)
                                                  .forTable(schema)
                                                  .using(&lt;span class=&quot;code-quote&quot;&gt;&quot;UPDATE &quot;&lt;/span&gt; + KS + &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt; + TABLE + &lt;span class=&quot;code-quote&quot;&gt;&quot; SET v = ? &quot;&lt;/span&gt; +
                                                         &lt;span class=&quot;code-quote&quot;&gt;&quot;WHERE k = ? AND c1 = ? AND c2 = ?&quot;&lt;/span&gt;)
                                                  .build();

        writer.addRow(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, 1, 2, 3);
        writer.addRow(&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;, 4, 5, 6);
        writer.addRow(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 7, 8, 9);
        writer.addRow(CQLSSTableWriter.UNSET_VALUE, 10, 11, 12);
        writer.close();
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  H:\cassandra code\workspace\BulkCassandraImporter&amp;gt;java -jar &lt;span class=&quot;code-quote&quot;&gt;&quot;H:\cassandra code\workspace\BulkCassandraImporter\target\BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar&quot;&lt;/span&gt;
15:43:22.259 [main] INFO  o.a.cassandra.cql3.QueryProcessor - Initialized prepared statement caches with 0 MB (&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;) and 0 MB (Thrift)
15:43:22.457 [main] DEBUG i.n.u.i.l.InternalLoggerFactory - Using SLF4J as the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; logging framework
15:43:22.458 [main] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.maxCapacity.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;: 262144
15:43:22.459 [main] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.maxSharedCapacityFactor: 2
15:43:22.459 [main] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.linkCapacity: 16
15:43:22.639 [main] INFO  o.a.cassandra.utils.SigarLibrary - Initializing SIGAR library
15:43:22.650 [main] DEBUG Sigar - no sigar-amd64-winnt.dll in java.library.path
org.hyperic.sigar.SigarException: no sigar-amd64-winnt.dll in java.library.path
        at org.hyperic.sigar.Sigar.loadLibrary(Sigar.java:172) ~[BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.hyperic.sigar.Sigar.&amp;lt;clinit&amp;gt;(Sigar.java:100) ~[BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.utils.SigarLibrary.&amp;lt;init&amp;gt;(SigarLibrary.java:47) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.utils.SigarLibrary.&amp;lt;clinit&amp;gt;(SigarLibrary.java:28) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.utils.UUIDGen.hash(UUIDGen.java:388) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.utils.UUIDGen.makeNode(UUIDGen.java:367) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.utils.UUIDGen.makeClockSeqAndNode(UUIDGen.java:300) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.utils.UUIDGen.&amp;lt;clinit&amp;gt;(UUIDGen.java:41) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.utils.ByteBufferUtil.bytes(ByteBufferUtil.java:576) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.db.Directories.&amp;lt;init&amp;gt;(Directories.java:202) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.db.Directories.&amp;lt;init&amp;gt;(Directories.java:188) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.io.sstable.CQLSSTableWriter$Builder.createOfflineTable(CQLSSTableWriter.java:619) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at org.apache.cassandra.io.sstable.CQLSSTableWriter$Builder.build(CQLSSTableWriter.java:556) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
        at de.whatever.BulkCassandraImporter.main(BulkCassandraImporter.java:36) [BulkCassandraImporter-0.0.1-SNAPSHOT-jar-with-dependencies.jar:na]
15:43:22.650 [main] INFO  o.a.cassandra.utils.SigarLibrary - Could not initialize SIGAR library org.hyperic.sigar.Sigar.getFileSystemListNative()[Lorg/hyperic/sigar/FileSystem;
15:43:22.734 [main] INFO  o.a.cassandra.db.view.ViewManager - Not submitting build tasks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; views in keyspace cql_keyspace6 as storage service is not initialized
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.ExceptionInInitializerError
        at org.apache.cassandra.io.sstable.CQLSSTableWriter$Builder.createOfflineTable(CQLSSTableWriter.java:622)
        at org.apache.cassandra.io.sstable.CQLSSTableWriter$Builder.build(CQLSSTableWriter.java:556)
        at de.whatever.BulkCassandraImporter.main(BulkCassandraImporter.java:36)
Caused by: java.lang.NullPointerException
        at org.apache.cassandra.config.DatabaseDescriptor.getFlushWriters(DatabaseDescriptor.java:1462)
        at org.apache.cassandra.db.ColumnFamilyStore.&amp;lt;clinit&amp;gt;(ColumnFamilyStore.java:137)
        ... 3 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15480203" author="ifesdjeen" created="Sat, 10 Sep 2016 18:25:06 +0000"  >&lt;p&gt;There were recent changes to the client initialisation process, which lead to initialisation errors. I&apos;ve tried it locally with another change and it worked. Could you check it out?&lt;/p&gt;</comment>
                            <comment id="15480229" author="kuku1" created="Sat, 10 Sep 2016 18:39:25 +0000"  >&lt;p&gt;The error is different now, but you can see it&apos;s trying to use the toolInitialization method&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.ExceptionInInitializerError
        at de.whatever.BulkCassandraImporter.main(BulkCassandraImporter.java:25)
Caused by: org.apache.cassandra.exceptions.ConfigurationException: Expecting URI in variable: [cassandra.config]. Found[cassandra.yaml]. Please prefix the file with [file:\\\] &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; local files and [file:\\&amp;lt;server&amp;gt;\] &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; remote files. If you are executing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; from an external tool, it needs to set Config.setClientMode(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) to avoid loading configuration.
        at org.apache.cassandra.config.YamlConfigurationLoader.getStorageConfigURL(YamlConfigurationLoader.java:80)
        at org.apache.cassandra.config.YamlConfigurationLoader.loadConfig(YamlConfigurationLoader.java:100)
        at org.apache.cassandra.config.DatabaseDescriptor.loadConfig(DatabaseDescriptor.java:251)
        at org.apache.cassandra.config.DatabaseDescriptor.toolInitialization(DatabaseDescriptor.java:170)
        at org.apache.cassandra.io.sstable.CQLSSTableWriter.&amp;lt;clinit&amp;gt;(CQLSSTableWriter.java:101)
        ... 1 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15482991" author="ifesdjeen" created="Mon, 12 Sep 2016 04:05:45 +0000"  >&lt;p&gt;Looks like after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11844&quot; title=&quot;Create compaction-stress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11844&quot;&gt;&lt;del&gt;CASSANDRA-11844&lt;/del&gt;&lt;/a&gt;, there&apos;s a call to &lt;tt&gt;Keyspace.openWithoutSSTables(keyspace);&lt;/tt&gt;, which calls &lt;tt&gt;Keyspace.open&lt;/tt&gt; internally, which requires some initialisation. I&apos;ll be working on this.&lt;/p&gt;</comment>
                            <comment id="15487732" author="ifesdjeen" created="Tue, 13 Sep 2016 16:52:23 +0000"  >&lt;p&gt;I&apos;ve cleaned up dependencies and rebased on top of &lt;a href=&quot;https://github.com/apache/cassandra/commit/0026e4eeec23367c74c44b23a9586562b939f6f8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this commit&lt;/a&gt;, so the problem you were having has to be fixed by now (tried a standalone writer as well). Would you have a minute to try it out, too?&lt;/p&gt;</comment>
                            <comment id="15488009" author="ifesdjeen" created="Tue, 13 Sep 2016 18:32:00 +0000"  >&lt;p&gt;&lt;tt&gt;3.0.x&lt;/tt&gt; versions are unaffected. After rebasing on top of current trunk, config issues are resolved. &lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12450-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12450-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12450-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15488058" author="kuku1" created="Tue, 13 Sep 2016 18:49:39 +0000"  >&lt;p&gt;I can confirm that the error outlined in the other comment was resolved in this version. &lt;/p&gt;</comment>
                            <comment id="15554071" author="stefania" created="Fri, 7 Oct 2016 04:17:41 +0000"  >&lt;p&gt;LGTM - committed to 3.X as 47c473ae3c0455e02b7a8529746988afdfdd9c54 and merged into trunk.&lt;/p&gt;</comment>
                            <comment id="15554405" author="ifesdjeen" created="Fri, 7 Oct 2016 07:36:52 +0000"  >&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13006307">CASSANDRA-12677</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12909152">CASSANDRA-10624</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="13005948">CASSANDRA-12667</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ifesdjeen]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i329c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12335693">3.7</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stefania</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>