<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:30:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-19448] CommitlogArchiver only has granularity to seconds for restore_point_in_time</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-19448</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Commitlog archiver allows users to backup commitlog files for the purpose of doing point in time restores.&#160; The &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/conf/commitlog_archiving.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;configuration file&lt;/a&gt; gives an example of down to the seconds granularity but then asks what whether the timestamps are microseconds or milliseconds - defaulting to microseconds.&#160; Because the &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/commitlog/CommitLogArchiver.java#L52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CommitLogArchiver uses a second based date format&lt;/a&gt;, if a user specifies to restore at something at a lower granularity like milliseconds or microseconds, that means that the it will truncate everything after the second and restore to that second.  So say you specify a restore_point_in_time like this:&lt;br/&gt;
restore_point_in_time=2024:01:18 17:01:01.623392&lt;br/&gt;
it will silently truncate everything after the 01 seconds.  So effectively to the user, it is missing updates between 01 and 01.623392.&lt;/p&gt;

&lt;p&gt;This appears to be a bug in the intent.  We should allow users to specify down to the millisecond or even microsecond level. If we allow them to specify down to microseconds for the restore point in time, then it may internally need to change from a long.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13570184">CASSANDRA-19448</key>
            <summary>CommitlogArchiver only has granularity to seconds for restore_point_in_time</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="maxwellguo">guo Maxwell</assignee>
                                    <reporter username="jeromatron">Jeremy Hanna</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Feb 2024 16:00:27 +0000</created>
                <updated>Fri, 27 Sep 2024 09:42:56 +0000</updated>
                            <resolved>Sun, 15 Sep 2024 18:28:24 +0000</resolved>
                                        <fixVersion>4.0.14</fixVersion>
                    <fixVersion>4.1.7</fixVersion>
                    <fixVersion>5.0.1</fixVersion>
                    <fixVersion>5.1</fixVersion>
                                    <component>Local/Commit Log</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="16200">4.5h</timespent>
                                <comments>
                            <comment id="17821988" author="maxwellguo" created="Thu, 29 Feb 2024 07:58:02 +0000"  >&lt;p&gt;I don&apos;t think this is a bug. This just can ensure that cassandra can ensure the rpo to second level,  as the description &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/conf/commitlog_archiving.properties#L39&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; for restore_point_in_time&lt;br/&gt;
do not say that we guarantee the rpo can be microseconds level or some other level. &lt;/p&gt;

&lt;p&gt;I think  this issue can be marked as an improvement. And I think the requirements raised by this issue are very meaningful.As I also encountered this problem when doing backup and restore for cassandra before.&lt;/p&gt;

&lt;p&gt;If this issue is unassigned ,I think I may do some help. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17822210" author="jeromatron" created="Thu, 29 Feb 2024 16:27:56 +0000"  >&lt;p&gt;It&apos;s currently unassigned so feel free to take a look. Thanks!&lt;/p&gt;

&lt;p&gt;I&apos;ve thought about it as a bug just because Cassandra stores update times as milliseconds or microseconds and there is nothing in the description that says that you can&apos;t use that granularity. It&apos;s just that the example is in seconds. It&apos;s not clear and there&apos;s no warning or error if you give it something with a granularity greater than seconds - it just ignores it. What to do about that could be either to:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;be clearer in the docs and have a warning/error when users try to use a granularity greater than seconds.&lt;/li&gt;
	&lt;li&gt;make it respect greater granularities which aligns more with the C* write timestamp formats&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I think 2 is the better outcome.&lt;/p&gt;

&lt;p&gt;So I think it could be argued as a bug or an improvement. &#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; do you have any thoughts on bug or improvement designation?&lt;/p&gt;</comment>
                            <comment id="17822212" author="brandon.williams" created="Thu, 29 Feb 2024 16:30:04 +0000"  >&lt;p&gt;Not any strong enough to convert this ticket, but feel free to do so if you decide.&lt;/p&gt;</comment>
                            <comment id="17822338" author="maxwellguo" created="Fri, 1 Mar 2024 02:15:44 +0000"  >&lt;p&gt;ok&#65292;then let&apos;s treat it as a bug .&lt;/p&gt;</comment>
                            <comment id="17824281" author="maxwellguo" created="Thu, 7 Mar 2024 07:21:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeromatron&quot; class=&quot;user-hover&quot; rel=&quot;jeromatron&quot;&gt;jeromatron&lt;/a&gt; I don&apos;t think this is a bug after I read the relevant code and configuration files,&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/conf/commitlog_archiving.properties#L40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;restore pint in time config &lt;/a&gt; shows that the restore_point_in_time  format is &quot; yyyy:MM:dd HH:mm:ss &quot; , that is to say we only support secondary level restore point. &lt;br/&gt;
But I think we can make the level to millisecond.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;WDYT ?&lt;/p&gt;</comment>
                            <comment id="17829886" author="tiagomlalves" created="Fri, 22 Mar 2024 13:53:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt; I&apos;ve looked into the code and it seems to be possible to implement millisecond and microsecond-level PIT restore. Supporting millisecond requires changes in `CommitLogArchiver` only while supporting microsecond requires additional changes in `CommitLogReplayer`.&lt;/p&gt;

&lt;p&gt;In both `CommitLogArchiver` and `CommitLogReplayer`, `restorePointInTime` and `restoreTarget` respectively, we&apos;re assuming long values in milliseconds. Supporting millisecond level PIT restore, can be achieved by just recognizing the milliseconds part specified in `restore_point_in_time` configuration. The existent code does not fail parsing if milliseconds are specified but it will ignore it.&lt;/p&gt;

&lt;p&gt;To support microsecond granularity, we need further changes in `CommitLogReplayer` to accept microseconds instead of forcing comparison to be in milliseconds.&lt;/p&gt;

&lt;p&gt;I have a patch that adds support for millisecond-level PIT restore and issues warnings on attempts to specify microseconds granularity: &lt;a href=&quot;https://github.com/apache/cassandra/pull/3200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/3200&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17829960" author="tiagomlalves" created="Fri, 22 Mar 2024 18:32:58 +0000"  >&lt;p&gt;I have an even simpler (and more correct) patch for this using `DateTimeFormatter`. The first patch would parse both &quot;2024:03:22 18:31:22.1&quot; and &quot;2024:03:22 18:31:22.1&quot; as &quot;2024:03:22 18:31:22.001&quot; &#160;which is incorrect. I&apos;ll provide an updated patch with tests later.&lt;/p&gt;</comment>
                            <comment id="17829999" author="tiagomlalves" created="Fri, 22 Mar 2024 22:27:26 +0000"  >&lt;p&gt;I&apos;ve simplified my original patched (fixing millisecond parsing), removed the warnings logic that was wrong, and added a test. I can prepare a patch for previous Cassandra versions if this change is accepted.&lt;/p&gt;</comment>
                            <comment id="17832273" author="brandon.williams" created="Fri, 29 Mar 2024 17:57:51 +0000"  >&lt;p&gt;This is indeed simpler and,  aside from one &lt;a href=&quot;https://github.com/driftx/cassandra/commit/86081f963472676b6dbb081163c68cf1cf182d21&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unused import&lt;/a&gt;, looks good to me.  Here&apos;s a CI run for trunk:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1551/workflows/4be37cee-7c92-4760-aa99-f3ab17d89b93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1551/workflows/be2ca359-49d7-4fb3-959d-454656f48d79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;  There are some known failures from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18753&quot; title=&quot;Add an optimized default configuration to tests and make it available for new users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18753&quot;&gt;&lt;del&gt;CASSANDRA-18753&lt;/del&gt;&lt;/a&gt;, the paxos failure is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19280&quot; title=&quot;Test Failure: org.apache.cassandra.simulator.test.ShortPaxosSimulationTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19280&quot;&gt;CASSANDRA-19280&lt;/a&gt;, and I created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19505&quot; title=&quot;Test failure: org.apache.cassandra.tcm.DiscoverySimulationTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19505&quot;&gt;&lt;del&gt;CASSANDRA-19505&lt;/del&gt;&lt;/a&gt; for the unrelated TCM failure.  The rest looks good including the &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1551/workflows/be2ca359-49d7-4fb3-959d-454656f48d79/jobs/80599&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;repeated tests&lt;/a&gt;, so I think we are ready for the other branches.  WDYT, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17832369" author="maxwellguo" created="Sat, 30 Mar 2024 03:36:58 +0000"  >&lt;p&gt;Hi Sorry for the late reply. I was in a hurry recently so I was away for a while. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tiagomlalves&quot; class=&quot;user-hover&quot; rel=&quot;tiagomlalves&quot;&gt;tiagomlalves&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeromatron&quot; class=&quot;user-hover&quot; rel=&quot;jeromatron&quot;&gt;jeromatron&lt;/a&gt;, I have also made a PR for this ,And I might want a more general solution to this problem, whether rip is seconds, milliseconds, or microseconds. &lt;br/&gt;
I have just prepare the pr but have not been tested very complete, here is the pr , and I will update the CI after they finished. &lt;br/&gt;
Besides, I used to pay more attention to whether this category is a bug or an improvement, because it is related to whether to prepare a copy for 4.x.&lt;/p&gt;


&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 2&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;PR for trunk &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3215/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pr&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;And the ci are running ,will check if the they finished.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 2&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;java11&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/553/workflows/a4f3412e-833d-4d50-878d-851bd6bdd94a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;java17&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/553/workflows/f61b7b2f-e239-4620-af85-af68186a6227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;Update:&lt;br/&gt;
fix build error for unused imports &lt;/p&gt;</comment>
                            <comment id="17832409" author="maxwellguo" created="Sat, 30 Mar 2024 07:22:32 +0000"  >&lt;p&gt;The reason why I fixed it like this is because I want to make the rip time configurable in seconds, milliseconds, and microseconds level . I think microseconds is the upper limit because the upper limit of c* timestamp is this;&lt;br/&gt;
Then the original method converts the timestamp to milliseconds by default see &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/ColumnFamilyStore.java#L2761&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/commitlog/CommitLogReplayer.java#L498&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. I feel that the timestamp granularity should be aligned with the timestamp of c*, and then the user granularity configuration can be selected for the rip time.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tiagomlalves&quot; class=&quot;user-hover&quot; rel=&quot;tiagomlalves&quot;&gt;tiagomlalves&lt;/a&gt; WDYT ?  &lt;/p&gt;</comment>
                            <comment id="17832870" author="brandon.williams" created="Mon, 1 Apr 2024 15:12:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;I feel that the timestamp granularity should be aligned with the timestamp of c*&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, and I think it can be argued it&apos;s a bug if it is not possible to restore with the same granularity as the data was created.&lt;/p&gt;</comment>
                            <comment id="17832876" author="tiagomlalves" created="Mon, 1 Apr 2024 15:45:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt; Thanks for providing a more general patch. I understand that C* timestamp allows microsecond granularity and aligning all those timestamps granularity sounds good.&lt;/p&gt;

&lt;p&gt;What I wonder is, in which scenarios would microsecond-level PIT restore would be useful?&lt;/p&gt;

&lt;p&gt;According to &lt;a href=&quot;https://stackoverflow.com/questions/97853/whats-the-best-way-to-synchronize-times-to-millisecond-accuracy-and-precision-b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/97853/whats-the-best-way-to-synchronize-times-to-millisecond-accuracy-and-precision-b&lt;/a&gt; it&apos;s possible to synchronize time to tenths of milliseconds. Wouldn&apos;t this mean that millisecond-level PIT restore would suffice? On the other hand, Amazon claims that&apos;s possible according to: &lt;a href=&quot;https://aws.amazon.com/blogs/compute/its-about-time-microsecond-accurate-clocks-on-amazon-ec2-instances/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://aws.amazon.com/blogs/compute/its-about-time-microsecond-accurate-clocks-on-amazon-ec2-instances/ &lt;/a&gt;&#160;opening the door for microsecond-level PIT restore.&lt;/p&gt;

&lt;p&gt;I would be happy to learn from your thoughts on those.&lt;/p&gt;

&lt;p&gt;Regarding the code changes, couldn&apos;t we detect automatically the granularity of PIT restore based on the value an user specifies? We could make our parsing more lenient by just doing `DateTimeFormatter.ofPattern(&quot;yyyy:MM:dd HH:mm:ss[.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;SSS&amp;#93;&lt;/span&gt;]&quot;)` allowing to parse all seconds, milliseconds, and microseconds. Also, if we could leverage on `Instant` datatype instead of `long` in `CommitLogArchiver` and postpone conversions to `CommitLogRestorer`. Wdyt?&lt;/p&gt;</comment>
                            <comment id="17832879" author="brandon.williams" created="Mon, 1 Apr 2024 15:50:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;What I wonder is, in which scenarios would microsecond-level PIT restore would be useful?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think there could be a  DR scenario where a delete was accidentally issued and to easily excise it the restore could be done to just before the delete and then just after it.  There may be other scenarios as well, but my main point here is time synchronization may not be necessary for the precision level.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;couldn&apos;t we detect automatically the granularity of PIT restore based on the value &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This seems viable to me and the most user-friendly.&lt;/p&gt;</comment>
                            <comment id="17832992" author="maxwellguo" created="Tue, 2 Apr 2024 02:19:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tiagomlalves&quot; class=&quot;user-hover&quot; rel=&quot;tiagomlalves&quot;&gt;tiagomlalves&lt;/a&gt;Thank you very much for your reply.&lt;/p&gt;

&lt;p&gt;Regarding the granularity of RIP, my main point is that it mainly depends on the needs of the user. My patch allows the user to select seconds, milliseconds and microseconds. All I need to do is to ensure that it is consistent with Cassandra &apos;s timestamp itself.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What I wonder is, in which scenarios would microsecond-level PIT restore would be useful?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; may have already described it clearly, but what I may want to say again is, if a batch of data is deleted by mistake, then accurate time granularity to microseconds is the only prerequisite to ensure that all data can be restored in c*. Milliseconds and seconds are not enough, they may lost data.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;couldn&apos;t we detect automatically the granularity of PIT restore based on the value&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I will update the PR again, and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tiagomlalves&quot; class=&quot;user-hover&quot; rel=&quot;tiagomlalves&quot;&gt;tiagomlalves&lt;/a&gt; If you are willing, can you be the reviewer  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;p&gt;And I will prepare PRs for other branch if the fix for trunk is accepted .&lt;/p&gt;

&lt;p&gt;Update:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Regarding the code changes, couldn&apos;t we detect automatically the granularity of PIT restore based on the value an user specifies? We could make our parsing more lenient by just doing `DateTimeFormatter.ofPattern(&quot;yyyy:MM:dd HH:mm:ss[.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;SSS&amp;#93;&lt;/span&gt;]&quot;)` allowing to parse all seconds, milliseconds, and microseconds.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;See &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/CASSANDRA-19448/conf/commitlog_archiving.properties#L43&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;description for rip &lt;/a&gt; , the user can randomly configures the rip time. I do not restrict the user to manually specify the accuracy level for Seconds, millseconds or microseconds . That&apos;s to say the code detect automatically  the granularity of PIT restore based on the value an user specifies. &lt;/p&gt;

&lt;p&gt;As for &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Also, if we could leverage on `Instant` datatype instead of `long` in `CommitLogArchiver` and postpone conversions to `CommitLogRestorer`&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I made some optimizations to the code based on your suggestions, but I find that changing to Instant  is not fundamentally different from the original long type, because &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/CASSANDRA-19448/src/java/org/apache/cassandra/db/commitlog/CommitLogArchiver.java#L123&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;restorePointInTime&lt;/a&gt; is only used for long value comparison, and as we have said the the restorePointInTime should be in microsecond level, so I change it to micro level &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/CASSANDRA-19448/src/java/org/apache/cassandra/db/commitlog/CommitLogArchiver.java#L207&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17833139" author="brandon.williams" created="Tue, 2 Apr 2024 11:13:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;If you are willing, can you be the reviewer&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well I have made it official now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;the code detect automatically the granularity of PIT restore based on the value an user specifies&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Excellent, I did not realize this earlier.&lt;/p&gt;
</comment>
                            <comment id="17833353" author="tiagomlalves" created="Wed, 3 Apr 2024 01:48:25 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt; for your feedback. Wrt. the granularity of the PIT restore, in theory I understand the support to microsecond level which is supported internally in C*. I understand the patch goal to align PIT restore with what C* supports internally. What I miss is the practical knowledge on how a customer can determine at microsecond level precision if something is being inserted in a cluster. It&apos;s just curiosity and I would be happy to learn about it.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt; regarding the patch, I&apos;ve seen the description for RIP:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Sorry for the dumb question, what does RIP stands for?&lt;/li&gt;
	&lt;li&gt;What I meant about detecting automatic the granularity was that we don&apos;t need to separately attempt to parse seconds, milliseconds, and microseconds. This can be achieved by using `DateTimeFormatter.ofPattern(&quot;yyyy:MM:dd HH:mm:ss[.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;SSS&amp;#93;&lt;/span&gt;]&quot;)` which works for all. This allows simplifying the code a lot by removing the need of the `RIPLEVEL` enum.&#160;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I would be willing to to pick up where you left in &lt;a href=&quot;https://github.com/apache/cassandra/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/3215&lt;/a&gt; and try out that simplification if you agree.&lt;/p&gt;</comment>
                            <comment id="17833365" author="maxwellguo" created="Wed, 3 Apr 2024 02:53:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tiagomlalves&quot; class=&quot;user-hover&quot; rel=&quot;tiagomlalves&quot;&gt;tiagomlalves&lt;/a&gt;Thanks for you reply :&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What I miss is the practical knowledge on how a customer can determine at microsecond level precision if something is being inserted in a cluster.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In my mind, as for this , seconds and millseconds may meet the same question , and microseconds can more accurately express whether data is needed .&lt;/p&gt;

&lt;p&gt;1&#12289;RIP is an abbreviation for error&#65292; and I have fixed it, thanks for reminding;&lt;br/&gt;
2&#12289;As for RIPLEVEL enum class,  I classified it intentionally. If you think this code is redundant, I can change it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I would be willing to to pick up where you left in &lt;a href=&quot;https://github.com/apache/cassandra/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/3215&lt;/a&gt; and try out that simplification if you agree.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;of course you can , but before that you can see my my latest update. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3215/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/3215/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17833784" author="tiagomlalves" created="Thu, 4 Apr 2024 00:08:18 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt;, I&apos;ve seen your last update - looks great. I&apos;ve made a few minor suggestions in the PR in case you are willing to consider them. Thank you - it was fun participating on this issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17833945" author="brandon.williams" created="Thu, 4 Apr 2024 14:24:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;What I miss is the practical knowledge on how a customer can determine at microsecond level precision if something is being inserted in a cluster.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since there aren&apos;t any tools to introspect the commitlog itself, I would probably do a full (sacrificial) replay to get sstables that I could dump, then locate the problematic tombstone&apos;s timestamp and do the real replay utilizing that knowledge.&lt;/p&gt;</comment>
                            <comment id="17834482" author="maxwellguo" created="Sat, 6 Apr 2024 04:19:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tiagomlalves&quot; class=&quot;user-hover&quot; rel=&quot;tiagomlalves&quot;&gt;tiagomlalves&lt;/a&gt;Thanks for your review, I have make a new update .&lt;/p&gt;

&lt;p&gt;Would you mind take a look ?  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;, then I can prepare for other branches.&lt;/p&gt;</comment>
                            <comment id="17834888" author="brandon.williams" created="Mon, 8 Apr 2024 11:25:04 +0000"  >&lt;p&gt;Looks good to me, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17834892" author="maxwellguo" created="Mon, 8 Apr 2024 11:43:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#65292; I will update the prs for other branches latter today.&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17834975" author="maxwellguo" created="Mon, 8 Apr 2024 15:57:36 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 2&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3238&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="17834997" author="brandon.williams" created="Mon, 8 Apr 2024 16:40:27 +0000"  >&lt;p&gt;I left one small note about a lingering todo that I can remove on commit if you agree.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1566/workflows/4fae134a-fb02-4b6e-bb97-dd781651b9ef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1566/workflows/49ac5ce2-0a63-48b5-bc41-da30073dfd73&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1567/workflows/efaf1236-111d-44cd-bee7-f0cffcc99986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1567/workflows/e9c2a9b3-2516-4b11-b701-5077144afe75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1569/workflows/601b0002-7536-4343-8499-e30368d4432d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1569/workflows/839908dc-5622-46da-bd04-4152a1305a43&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1570/workflows/247ebd77-4fe6-4d08-b95d-6c6e75ef99fa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1570/workflows/628377f0-98d7-4531-baa3-429ca5319f01&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17834999" author="brandon.williams" created="Mon, 8 Apr 2024 16:49:40 +0000"  >&lt;p&gt;Map.of unfortunately does not exist until Java 9, so the j8 builds for 4.0 and 4.1 are failing.&lt;/p&gt;</comment>
                            <comment id="17835036" author="brandon.williams" created="Mon, 8 Apr 2024 20:32:01 +0000"  >&lt;p&gt;I &lt;a href=&quot;https://github.com/driftx/cassandra/commit/a060134cb36d2be2d9c7529e92e7a5acb1400ca5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;removed&lt;/a&gt; the Map.of usage and here is &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1572/workflows/899cfaf5-0f5d-47dd-82e0-f7531dfb1abc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0 j8&lt;/a&gt; and &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1577/workflows/4a17a2f1-c20d-4f5a-84f3-d26cec580fe5/jobs/83623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1 j8&lt;/a&gt;, but it turns out the commitlog archiver test is flaky.&lt;/p&gt;</comment>
                            <comment id="17835164" author="maxwellguo" created="Tue, 9 Apr 2024 06:24:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; I fixed the failure and remove the  precision that you have mentioned . But the CI may be slow because of the limited resource .&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 2&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3238&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/572/workflows/949a3a12-ac70-40ab-b935-185d2a6c51e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/572/workflows/12ebdd83-1a87-4b2c-9806-261ce54c1bb1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/573/workflows/8983cd7b-8a35-4b06-81b4-bef66aa02ab7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/573/workflows/eeffd27e-227c-4720-865f-e0bc7c563496&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/574/workflows/08679195-4afd-4ff2-95e3-ea7800e2145a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/574/workflows/c889a4f2-76d9-4dc5-97b2-ce51f6c60405&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/575/workflows/276a267b-315d-41d2-a216-3ba2912fdb9f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/575/workflows/9fab5111-8209-4889-b839-006d02c4f3ce&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17835466" author="brandon.williams" created="Tue, 9 Apr 2024 15:42:50 +0000"  >&lt;p&gt;I&apos;m sorry that I missed that removing the precision would affect JMX, and I can see you fixed the &lt;a href=&quot;https://github.com/apache/cassandra/pull/3238/commits/b0db7522d34d82a67a8d1ef486394c0aee86f7f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JMXCompatibility test&lt;/a&gt;.  Unfortunately we can&apos;t do it like this, &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8734&quot; title=&quot;Expose commit log archive status&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8734&quot;&gt;&lt;del&gt;CASSANDRA-8734&lt;/del&gt;&lt;/a&gt; exposed these archiver methods, very likely for some automation.  We should deprecate this first, however in this instance we aren&apos;t removing functionality so much as obviating the need for precision, so any breakage should be minimal.  I suggest we leave precision alone and deprecate it in 4.0 and 4.1 and remove in 5.0 and trunk. WDYT?&lt;/p&gt;</comment>
                            <comment id="17835476" author="maxwellguo" created="Tue, 9 Apr 2024 16:21:51 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;, I agree with you , and should we ask &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnlwsu&quot; class=&quot;user-hover&quot; rel=&quot;cnlwsu&quot;&gt;cnlwsu&lt;/a&gt; too ?&lt;/p&gt;</comment>
                            <comment id="17835523" author="brandon.williams" created="Tue, 9 Apr 2024 20:19:43 +0000"  >&lt;p&gt;Let&apos;s see.  Perhaps we can gain a second committer to review as well.&lt;/p&gt;</comment>
                            <comment id="17835570" author="maxwellguo" created="Wed, 10 Apr 2024 02:12:16 +0000"  >&lt;p&gt;I asked &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnlwsu&quot; class=&quot;user-hover&quot; rel=&quot;cnlwsu&quot;&gt;cnlwsu&lt;/a&gt;, he agreed with your suggestion.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I suggest we leave precision alone and deprecate it in 4.0 and 4.1 and remove in 5.0 and trunk. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I updated the patch , and deprecated precision in 4.0 and 4.1 for the api in commitlogMbean, and removed it in 5.0 and trunk.&lt;/p&gt;</comment>
                            <comment id="17835802" author="brandon.williams" created="Wed, 10 Apr 2024 16:07:27 +0000"  >&lt;p&gt;Looks good to me, let&apos;s check CI:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1579/workflows/03c0b2f6-d84f-440d-baad-bf323810a292&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1579/workflows/ec2044d0-157a-4f21-a9a2-8a95214cf28f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1582/workflows/aa8c4b45-683e-4c55-80b3-a6923fa6338c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1582/workflows/0eb028d6-65d4-4a80-bd39-04d2eff73d10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1578/workflows/9caf1884-b1c5-44af-8413-87f1aa164396&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1578/workflows/5d2777fc-b33e-48a3-8e4f-739df29f3656&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1580/workflows/5c6cfe0b-c421-4112-a886-a3fbfda51d54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1580/workflows/c177c474-33d6-42b4-b88a-a72fc6abe8b5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17835822" author="brandon.williams" created="Wed, 10 Apr 2024 16:48:48 +0000"  >&lt;p&gt;One problem is that CommitLogArchiverTest seems to still be flaky on trunk.  This also seems to have made flaky the DropRecreateAndRestoreTest.testCreateWithIdRestore unit test on all branches.&lt;/p&gt;</comment>
                            <comment id="17835978" author="maxwellguo" created="Thu, 11 Apr 2024 03:42:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;,let met take a look.&lt;/p&gt;

&lt;p&gt;UPDATE:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tiagomlalves&quot; class=&quot;user-hover&quot; rel=&quot;tiagomlalves&quot;&gt;tiagomlalves&lt;/a&gt;&lt;br/&gt;
Sorry, I have been very busy recently. I looked at this problem in the past two days and made corresponding repairs. If it&apos;s convenient, can you help me review it?&lt;/p&gt;


&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 2&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3236/commits&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3238/commits&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17870142" author="maxwellguo" created="Thu, 1 Aug 2024 09:25:54 +0000"  >&lt;p&gt;ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tiagomlalves&quot; class=&quot;user-hover&quot; rel=&quot;tiagomlalves&quot;&gt;tiagomlalves&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17870195" author="brandon.williams" created="Thu, 1 Aug 2024 13:35:09 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1697/workflows/50c00fe4-f2d8-452e-bc7d-16900d973987&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1697/workflows/7aec5100-4489-4a13-8150-45007a87dd43&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1699/workflows/9477f095-357e-497b-ab9c-d826c55266a0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1699/workflows/631b7063-06c3-4b1a-a115-9e77da553119&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1698/workflows/c0213025-523a-4804-91dd-6bd676c36481&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1698/workflows/92071150-52df-419a-960f-ad82bd41f482&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1700/workflows/a65570df-fe2d-4422-978f-51ebee68a2b6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1700/workflows/83aba4d6-df61-434e-9a87-c23a86c5e834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Circle is currently down for maintenance, I&apos;ll start these when it&apos;s back.&lt;/p&gt;</comment>
                            <comment id="17870228" author="brandon.williams" created="Thu, 1 Aug 2024 16:08:56 +0000"  >&lt;p&gt;Looks like the Map.of usage in j8 is back, and the&#160;CommitLogArchiverTest in trunk is still &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1700/workflows/83aba4d6-df61-434e-9a87-c23a86c5e834/jobs/97143/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;flakey&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17870412" author="maxwellguo" created="Fri, 2 Aug 2024 08:50:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;Sorry for that. As my ci &apos;s resource is limited, so I just run the ut test case locally with a repeat number of 20 in a for loop. &lt;br/&gt;
The locally test were always successful, So I push the code .  I will run them again. &lt;/p&gt;</comment>
                            <comment id="17870469" author="brandon.williams" created="Fri, 2 Aug 2024 11:06:45 +0000"  >&lt;p&gt;No problem, next time I&apos;ll just multiplex that test to help speed things along.&lt;/p&gt;</comment>
                            <comment id="17873251" author="maxwellguo" created="Tue, 13 Aug 2024 16:08:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; would you mind help to run the repeat CI again ?&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3215/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.0 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3236/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.1 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3237/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3238/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;I ran the new test locally 100 times&lt;/p&gt;</comment>
                            <comment id="17873572" author="brandon.williams" created="Wed, 14 Aug 2024 14:42:16 +0000"  >&lt;p&gt;Unfortunately it looks like there are still a handful of &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1704/workflows/bd8b0614-0b2a-4231-aca7-22688e0a06b8/jobs/97629/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;failures&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17873830" author="maxwellguo" created="Thu, 15 Aug 2024 08:23:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; Um, let me take a look again~~~&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17874309" author="maxwellguo" created="Fri, 16 Aug 2024 16:14:54 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;, I think I  found the reason for this &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1704/workflows/bd8b0614-0b2a-4231-aca7-22688e0a06b8/jobs/97629/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;failures&lt;/a&gt;. I pulled a branch, made simple modifications &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/CASSANDRA-19448-test-repeat/test/unit/org/apache/cassandra/cql3/validation/operations/DropRecreateAndRestoreTest.java#L47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here by add a sleep&lt;/a&gt;, and did a repeat test according to your ci configuration, and it was &lt;a href=&quot;https://app.circleci.com/pipelines/github/Maxwell-Guo/cassandra/631/workflows/64d0372c-48e5-448c-99ae-87e326e5f09e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;successful&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Heading 2&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; trunk &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3215/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3236/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3237/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3238/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;The reason for the problem is that because I changed the recovery time point granularity to &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/CASSANDRA-19448/test/unit/org/apache/cassandra/cql3/validation/operations/DropRecreateAndRestoreTest.java#L81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;microseconds&lt;/a&gt; (this original test case is &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/trunk/test/unit/org/apache/cassandra/cql3/validation/operations/DropRecreateAndRestoreTest.java#L48&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;milliseconds&lt;/a&gt; level).&lt;br/&gt;
The three actions of [ INSERT twice and getting the current millisecond timestamp |https://github.com/Maxwell-Guo/cassandra/blob/trunk/test/unit/org/apache/cassandra/cql3/validation/operations/DropRecreateAndRestoreTest.java#L44-L48] in the test example are within one millisecond. If it happens, there will be a problem, because the timestamp of our c* is microseconds, then the  second &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/trunk/test/unit/org/apache/cassandra/cql3/validation/operations/DropRecreateAndRestoreTest.java#L45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;INSERT&lt;/a&gt; time will be 1 greater than the timestamp of the first &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/trunk/test/unit/org/apache/cassandra/cql3/validation/operations/DropRecreateAndRestoreTest.java#L44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;INSERT&lt;/a&gt; and the &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/CASSANDRA-19448/test/unit/org/apache/cassandra/cql3/validation/operations/DropRecreateAndRestoreTest.java#L81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;current millisecond timestamp multiplied by 1000&lt;/a&gt;, so the recovery failed, but if the original recovery granularity was milliseconds, this problem would not exist.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blambov&quot; class=&quot;user-hover&quot; rel=&quot;blambov&quot;&gt;blambov&lt;/a&gt; I found the case for  &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/CASSANDRA-19448/test/unit/org/apache/cassandra/cql3/validation/operations/DropRecreateAndRestoreTest.java#L52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DropRecreateAndRestoreTest&lt;/a&gt; is written by you . Would you mind I add a sleep here ?&lt;/p&gt;


&lt;p&gt;EDIT : &lt;br/&gt;
I will modify the test case by inserting  value with specified ts.&lt;/p&gt;</comment>
                            <comment id="17874419" author="maxwellguo" created="Sat, 17 Aug 2024 02:08:19 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;, &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I will modify the test case by inserting value with specified ts.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Finished.&lt;/p&gt;</comment>
                            <comment id="17874980" author="brandon.williams" created="Mon, 19 Aug 2024 20:07:43 +0000"  >&lt;p&gt;Since all branches changed, let&apos;s run the full gamut again:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1715/workflows/bdb19a99-6390-4f7f-a250-cd84efbc0627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1715/workflows/6d1904de-1ea0-4c3a-bac0-bb4ac0a8c146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1716/workflows/08926280-235e-4cab-a694-e55be2f955f8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1716/workflows/a1231bb9-9fbe-42f9-adf2-1b400ca65e28&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1713/workflows/c40f50a1-0772-4ecb-a934-76d0ae102792&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1713/workflows/262b6e3c-0fa5-4b9b-8fdb-cb6e5991c684&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1714/workflows/f7bfb8ad-d113-41f8-80b0-fa851d28b0ff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1714/workflows/33b35768-e97d-42b4-8135-751b72d1ee23&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17876405" author="maxwellguo" created="Sat, 24 Aug 2024 08:13:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;br/&gt;
There still seems to be failures for repeat test for CommitLogArchiverTest the , and the reason is that when commitlog archive is enabled , the log will be archived as soon as the commitlog is created, so if we start to clean up all the archived dir &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/blob/CASSANDRA-19448/test/unit/org/apache/cassandra/db/commitlog/CommitLogArchiverTest.java#L69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; , there may be newly archived files, then an error with &quot;Directory not empty&quot;.&lt;/p&gt;

&lt;p&gt;I fixed this bug for the test case, but I found there are still some other cases which seems have no relation with my patch , like &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;cqlsh_tests/test_cqlsh.py::TestCqlsh::test_tracing&lt;/li&gt;
	&lt;li&gt;pushed_notifications_test.py::TestVariousNotifications::test_tombstone_failure_threshold_message&lt;/li&gt;
	&lt;li&gt;org.apache.cassandra.distributed.test.NativeTransportEncryptionOptionsTest:testEndpointVerificationEnabledIpNotInSAN-cassandra.testtag_IS_UNDEFINED&lt;/li&gt;
	&lt;li&gt;TestCQLSlowQuery::test_local_query&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="17876849" author="brandon.williams" created="Mon, 26 Aug 2024 22:16:31 +0000"  >&lt;p&gt;We don&apos;t need to worry about those, we just only make sure there aren&apos;t new failures from this patch.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1718/workflows/8c905611-0986-4c44-b925-4cab1eb817d1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1718/workflows/2c4077f0-f123-41c4-aa5e-6f61c1632fa1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1719/workflows/216c35aa-53cb-45ec-975b-954170943371&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1719/workflows/ae11aa63-a55b-4e7f-816d-f73e80d6b455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1720/workflows/d66fee74-b544-4fe7-beb3-fc92710b4502&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1720/workflows/1bd8307b-1e65-4912-9da7-3509d49ab19a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1717/workflows/76f2613e-e207-48ee-a7f6-9a9f58c9bc74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1717/workflows/b84a1ea3-810f-4fc4-a38c-b76573039490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17876884" author="maxwellguo" created="Tue, 27 Aug 2024 02:30:57 +0000"  >&lt;p&gt;Looking into the latest updated test results:&lt;/p&gt;

&lt;p&gt;In addition to the errors I mentioned above, for the trunk branch&#65292;there some failures:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;4.0&#160;&#160;
	&lt;ul&gt;
		&lt;li&gt;(j8) org.apache.cassandra.tools.TopPartitionsTest #&#160; testServiceTopPartitionsSingleTable , BUT I&apos;m a little confused because it seems that the failure has been fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17455&quot; title=&quot;Flaky org.apache.cassandra.tools TopPartitionsTest testServiceTopPartitionsSingleTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17455&quot;&gt;&lt;del&gt;CASSANDRA-17455&lt;/del&gt;&lt;/a&gt;&#160;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;4.1
	&lt;ul&gt;
		&lt;li&gt;(j11) org.apache.cassandra.distributed.test.GossipTest # nodeDownDuringMove: see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15239&quot; title=&quot;[flaky in-mem dtest] nodeDownDuringMove - org.apache.cassandra.distributed.test.GossipTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15239&quot;&gt;CASSANDRA-15239&lt;/a&gt;&#160;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;trunk :
	&lt;ul&gt;
		&lt;li&gt;(j11)org.apache.cassandra.simulator.test.ShortPaxosSimulationTes#simulationTest, seems to be fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17769&quot; title=&quot;Fix org.apache.cassandra.simulator.test.ShortPaxosSimulationTest.simulationTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17769&quot;&gt;&lt;del&gt;CASSANDRA-17769&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;(j17)org.apache.cassandra.distributed.test.NativeTransportEncryptionOptionsTest#testEndpointVerificationEnabledIpNotInSAN-cassandra.testtag_IS_UNDEFINED see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19281&quot; title=&quot;NativeTransportEncryptionOptionsTest fails often in CI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19281&quot;&gt;&lt;del&gt;CASSANDRA-19281&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;(j17) for in-jvm-dtest , there are many &quot;: java.lang.OutOfMemoryError&quot; but seems has no relation to my patch&#160;&lt;/li&gt;
		&lt;li&gt;(j17) org.apache.cassandra.io.sstable.VerifyTest-oa_jdk17 # testMutateRepair see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18919&quot; title=&quot;Test failure: org.apache.cassandra.io.sstable.VerifyTest.testMutateRepair-.jdk11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18919&quot;&gt;CASSANDRA-18919&lt;/a&gt;but it is for java11&#160;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;it seems that&#160; these failures&#160; has nothing to do with my patch.&#160; cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17877090" author="brandon.williams" created="Tue, 27 Aug 2024 16:20:33 +0000"  >&lt;p&gt;TopPartitionsTest is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17798&quot; title=&quot;Flaky org.apache.cassandra.tools TopPartitionsTest testServiceTopPartitionsSingleTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17798&quot;&gt;CASSANDRA-17798&lt;/a&gt; now, previously it was &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17455&quot; title=&quot;Flaky org.apache.cassandra.tools TopPartitionsTest testServiceTopPartitionsSingleTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17455&quot;&gt;&lt;del&gt;CASSANDRA-17455&lt;/del&gt;&lt;/a&gt;.  The rest appears correct to me, but I&apos;m not sure what&apos;s going with the cqlsh failures.  I&apos;ve rebased 5.0 and trunk, let&apos;s see if they persist:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1721/workflows/0ef7ab43-5606-43f9-8427-9547d2e594e5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1721/workflows/c065040c-6641-429b-9519-74a642f1cebd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1722/workflows/981a522b-076f-4da6-95d7-023b741b9633&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1722/workflows/48bb150d-dd68-4e41-ae0c-008c6bef0e24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</comment>
                            <comment id="17877109" author="brandon.williams" created="Tue, 27 Aug 2024 17:20:46 +0000"  >&lt;p&gt;Rebasing fixed the cqlsh tests, but now we have the CommitLogArchiverTest failing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17877363" author="maxwellguo" created="Wed, 28 Aug 2024 12:07:34 +0000"  >&lt;p&gt;I found the key to the problem. After rebase, commitlog uses direct io by default, so commitlog segment size cannot be set &lt;a href=&quot;https://github.com/driftx/cassandra/blob/CASSANDRA-19448-trunk/test/unit/org/apache/cassandra/db/commitlog/CommitLogArchiverTest.java#L62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;br/&gt;
I fixed the failures, let me run these test by myself first. &lt;/p&gt;</comment>
                            <comment id="17877585" author="maxwellguo" created="Thu, 29 Aug 2024 05:29:26 +0000"  >&lt;p&gt;I ran the fixed code after  rebasing  the trunk and 5.0 branches. It seems that there is no problem.&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3215/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3236/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3237/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3238/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17877730" author="brandon.williams" created="Thu, 29 Aug 2024 14:41:08 +0000"  >&lt;p&gt;Alright, let&apos;s see:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1727/workflows/43cb9261-3a3f-4080-aa5a-ab07796c8c56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1727/workflows/307314f1-b3f1-4880-a5e8-65db74fd3e60&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1728/workflows/3d758072-de95-4216-943c-7af5a559352b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1728/workflows/e7dd3eb6-1d3b-42d2-bc08-95fa1a6a6efd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17877870" author="brandon.williams" created="Thu, 29 Aug 2024 19:08:07 +0000"  >&lt;p&gt;I see CommitLogArchiverTest failing again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17877900" author="maxwellguo" created="Thu, 29 Aug 2024 21:32:53 +0000"  >&lt;p&gt;It seems that the trunk branch do not cherry-pick the latest update for &lt;a href=&quot;https://github.com/driftx/cassandra/blob/CASSANDRA-19448-trunk/test/unit/org/apache/cassandra/db/commitlog/CommitLogArchiverTest.java#L62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;deleting the commitlog segment size of 5&lt;/a&gt; but my trunk has &lt;a href=&quot;https://github.com/apache/cassandra/pull/3215/files#diff-a5cdc7f0479f9676d4f07bca1b74066bb01b00e9bb06fb437a82de0c77754cab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;deleted&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="17878063" author="brandon.williams" created="Fri, 30 Aug 2024 11:11:30 +0000"  >&lt;p&gt;Thanks for rebasing, let&apos;s give this one more shot:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1729/workflows/e6405434-2093-493a-9117-fa09bacbcece&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1729/workflows/2a5f9d70-c97e-4d5c-9bad-aef7ae145ed2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17878175" author="brandon.williams" created="Fri, 30 Aug 2024 15:57:48 +0000"  >&lt;p&gt;So close... there are some unrelated failures we don&apos;t need to be concerned with, but the CommitlogShutdownTest failure is one that we do.&lt;/p&gt;</comment>
                            <comment id="17878182" author="maxwellguo" created="Fri, 30 Aug 2024 16:17:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;br/&gt;
I will take a closer look at CommitlogShutdownTest failure, but I also want to ask. Looking at this &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19101&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;CASSANDRA-19101&lt;/a&gt;, it seems that trunk has had similar failure too.&lt;/p&gt;</comment>
                            <comment id="17878183" author="brandon.williams" created="Fri, 30 Aug 2024 16:19:18 +0000"  >&lt;p&gt;Ah, I missed that ticket, thank you!  Okay, I think we are good here then. +1 from me.&lt;/p&gt;</comment>
                            <comment id="17878543" author="smiklosovic" created="Mon, 2 Sep 2024 09:53:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt; could&#160; you please link all pull requests to this ticket? (or put a comment here). It is becoming little bit confusing what is what. We are doing this from 4.0 to trunk, right? Also, could you please squash all your commits into one and rebase the branches on top of all the respective ones in upstream?&lt;/p&gt;</comment>
                            <comment id="17878713" author="maxwellguo" created="Tue, 3 Sep 2024 06:04:23 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt;, I have prepared PRs which have squashed all the commits , for 4.0/4.1/5.0 and trunk ,below are all the prs .&lt;/p&gt;


&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3514&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3512&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3513&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</comment>
                            <comment id="17878855" author="smiklosovic" created="Tue, 3 Sep 2024 12:07:44 +0000"  >&lt;p&gt;Can we just remove&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
precision=MICROSECONDS &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;just like that? I am trying to figure out if it is not for something and us removing it would break it. This is currently broken, yes, as a user can not specify anything in greater granularity then seconds because it would be ignored.&#160;&lt;/p&gt;

&lt;p&gt;Tiago says:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;To support microsecond granularity, we need further changes in `CommitLogReplayer` to accept microseconds instead of forcing comparison to be in milliseconds.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;I get that it is easier to just support the timestamp in microseconds granularity and drop precision but ... is it &lt;em&gt;the right way to do that&lt;/em&gt;?&#160;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;If we have precision in micro then timestamp should support micros, if precision is in millis, then timestamp should support millis etc. So based on what precision we have, we would have corresponding formatter.&#160;&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;EDIT: this above is wrong, precision would need to stay to instruct what we made inserts with etc. but formatter should support down-to-microseconds resolutions anyway and it should be handled internally. What we set precision to does not matter too much.&lt;/p&gt;

&lt;p&gt;I am not sure if we should go with the way I just suggested but my gut feeling is that precision was put there for these purposes, it is just broken / unfinished. If we go to change the behavior, even removing a property which seemingly does not do anything / it is broken, I think we should have it confirmed that we are indeed going to drop precision field in the configuration property.&lt;/p&gt;

&lt;p&gt;If we do and we plan to put this into 4.x etc (into minors), I wonder if this is not too much to ask. In that case we should probably keep precision around and we should fix time formatters.&#160;&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17878865" author="maxwellguo" created="Tue, 3 Sep 2024 12:36:20 +0000"  >&lt;p&gt;I am not opposed to retaining this precision configuration, and the first version of the code has this feature.&lt;/p&gt;

&lt;p&gt;UPDATE:&lt;br/&gt;
I recalled the entire review process, the reason we finally remove the precision is that , first time I saw &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/commitlog/CommitLogReplayer.java#L498&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;replay here use Milliseconds&lt;/a&gt; no matter what kind of precision is setted. So I left a comment &lt;a href=&quot;https://github.com/apache/cassandra/pull/3215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here &lt;/a&gt; said &quot; //todo remove this as this is not used&quot;, And I think nobody set this precision before as this is a obvious bug and nobody has created a bug for the restore precision. we all agree with the action of remove the  precision, so here we are .&lt;br/&gt;
I can modify the code to support different kind of precision based on microseconds level, but what about create a new ticket as this seems have a slight relationship to this ticket (the description is :&quot;* if a user specifies to restore at something at a lower granularity like milliseconds or microseconds, that means that the it will truncate everything after the second and restore to that second*&quot;)&lt;br/&gt;
and the essential reason for the precision deletion(my code did) you described is that the precision configuration is invalid.&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17878873" author="smiklosovic" created="Tue, 3 Sep 2024 12:52:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt;&#160; I created this PR (1) against your trunk branch while I was reviewing your patch. You are welcome to incorporate it into your patch (and older branches).&lt;/p&gt;

&lt;p&gt;We should park this for a while until we get some resolution if we can indeed remove the precision field (2) otherwise we will need to put it back I guess.&lt;/p&gt;

&lt;p&gt;(1) &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Maxwell-Guo/cassandra/pull/1&lt;/a&gt;&lt;br/&gt;
(2) &lt;a href=&quot;https://lists.apache.org/thread/rnoo4b3p74qt8s47crb0ttd6yvqz3h3b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/rnoo4b3p74qt8s47crb0ttd6yvqz3h3b&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17878903" author="maxwellguo" created="Tue, 3 Sep 2024 14:42:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt; the reason of the bug  for this ticket is &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/commitlog/CommitLogArchiver.java#L52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;br/&gt;
if we keep the restore point time level (precision) unchanged(Millisecond level). The the bug is fixed. &lt;br/&gt;
Then we can come to what you described here , the precision configuration does not take effect. Then I can create a new ticket to fix it. I can change the &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/commitlog/CommitLogReplayer.java#L498&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;upd.maxTimestamp()&lt;/a&gt;  to the time level that precision set .&lt;/p&gt;</comment>
                            <comment id="17878908" author="smiklosovic" created="Tue, 3 Sep 2024 15:02:51 +0000"  >&lt;p&gt;what about this? &lt;a href=&quot;https://github.com/Maxwell-Guo/cassandra/pull/1/commits/42b02febcb3a1c490b3cc9c3d05d58963008fd8b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Maxwell-Guo/cassandra/pull/1/commits/42b02febcb3a1c490b3cc9c3d05d58963008fd8b&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;basically we convert it all to micros and then do &lt;/p&gt;

&lt;p&gt;if (archiver.precision.toMicros(upd.maxTimestamp()) &amp;gt; archiver.restorePointInTimeInMicroseconds)&lt;/p&gt;</comment>
                            <comment id="17878911" author="maxwellguo" created="Tue, 3 Sep 2024 15:16:48 +0000"  >&lt;p&gt;Of course this is OK, too. &lt;br/&gt;
What do you think , if I create another ticket to fix this ? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tiagomlalves&quot; class=&quot;user-hover&quot; rel=&quot;tiagomlalves&quot;&gt;tiagomlalves&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17878915" author="smiklosovic" created="Tue, 3 Sep 2024 15:27:38 +0000"  >&lt;p&gt;why not to include it in this ticket? I will run the builds&lt;/p&gt;</comment>
                            <comment id="17878921" author="maxwellguo" created="Tue, 3 Sep 2024 15:46:11 +0000"  >&lt;p&gt;I&apos;m ok with that, but if we want to include the change to precision , we may need more tests for it. If there had been relevant tests before, we might have discovered this bug very early.&lt;/p&gt;

&lt;p&gt;If you can wait, I will correct this code tomorrow and add tests related to recovery accuracy.As it&apos;s already early morning here.&lt;/p&gt;</comment>
                            <comment id="17878965" author="smiklosovic" created="Tue, 3 Sep 2024 18:08:06 +0000"  >&lt;p&gt;I can indeed wait. Thank you for your persistence!&lt;/p&gt;</comment>
                            <comment id="17880379" author="maxwellguo" created="Mon, 9 Sep 2024 16:10:13 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt;, I have modified the code with some new test cases, here is the pr for &lt;a href=&quot;https://github.com/apache/cassandra/pull/3530/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;br/&gt;
Can you help to take a look at it ? I will prepare other branches if this one is ok . &lt;br/&gt;
I   ran the test cases , it seem to be ok&lt;/p&gt;</comment>
                            <comment id="17880589" author="smiklosovic" created="Tue, 10 Sep 2024 10:37:54 +0000"  >&lt;p&gt;reviewed again&lt;/p&gt;</comment>
                            <comment id="17881076" author="smiklosovic" created="Wed, 11 Sep 2024 17:25:41 +0000"  >&lt;p&gt;These 7h for cqlshlib is a bug on Circle side. There were some outages today and it just messed stuff up when it comes to run times. These jobs just passed fine, they are still marked as not finished.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19448-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19448-4.1&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java11_pre-commit_tests                         
  &#10003; j11_build                                        1m 45s
  &#10003; j11_cqlsh_dtests_py3                             6m 36s
  &#10003; j11_cqlsh_dtests_py311                           5m 40s
  &#10003; j11_cqlsh_dtests_py311_vnode                     6m 42s
  &#10003; j11_cqlsh_dtests_py38                            5m 39s
  &#10003; j11_cqlsh_dtests_py38_vnode                      5m 56s
  &#10003; j11_cqlsh_dtests_py3_vnode                        6m 5s
  &#10003; j11_jvm_dtests_vnode                            12m 11s
  &#10003; j11_unit_tests                                  10m 28s
  &#10003; j11_unit_tests_repeat                           11m 39s
    j11_cqlshlib_cython_tests                    7h 15m 31s
    j11_cqlshlib_tests                           7h 15m 31s
  &#10005; j11_dtests                                       40m 7s
      largecolumn_test.TestLargeColumn test_cleanup
  &#10005; j11_dtests_vnode                                37m 56s
      largecolumn_test.TestLargeColumn test_cleanup
  &#10005; j11_jvm_dtests                                  18m 20s
      org.apache.cassandra.distributed.test.RepairTest testForcedNormalRepairWithOneNodeDown
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4709/workflows/6a2bb4a3-6378-44ab-a725-a2f10ad629e5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17881406" author="smiklosovic" created="Thu, 12 Sep 2024 20:08:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19448-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19448-trunk&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java17_pre-commit_tests                         
  &#10003; j17_build                                         5m 8s
  &#10003; j17_cqlsh_dtests_py311                           7m 22s
  &#10003; j17_cqlsh_dtests_py311_vnode                     7m 39s
  &#10003; j17_cqlsh_dtests_py38                             7m 1s
  &#10003; j17_cqlsh_dtests_py38_vnode                       7m 2s
  &#10003; j17_cqlshlib_cython_tests                       10m 46s
  &#10003; j17_cqlshlib_tests                               9m 39s
  &#10003; j17_dtests                                      35m 19s
  &#10003; j17_dtests_vnode                                36m 24s
  &#10003; j17_unit_tests                                  15m 58s
  &#10003; j17_unit_tests_repeat                            9m 17s
  &#10003; j17_utests_latest                               14m 40s
  &#10003; j17_utests_latest_repeat                         9m 36s
  &#10003; j17_utests_oa_repeat                             9m 23s
  &#10005; j17_dtests_latest                               35m 24s
      replica_side_filtering_test.TestSecondaryIndexes test_complementary_deletion_with_limit_on_clustering_key_column
      replica_side_filtering_test.TestSecondaryIndexes test_complementary_deletion_with_limit_on_partition_key_column_with_not_empty_partitions
  &#10005; j17_jvm_dtests                                  23m 18s
      org.apache.cassandra.fuzz.ring.ConsistentBootstrapTest coordinatorIsBehindTest
      org.apache.cassandra.distributed.test.NativeTransportEncryptionOptionsTest testEndpointVerificationEnabledIpNotInSAN TIMEOUTED
      org.apache.cassandra.fuzz.harry.integration.model.ConcurrentQuiescentCheckerIntegrationTest testConcurrentReadWriteWorkload
      org.apache.cassandra.distributed.test.tcm.SplitBrainTest testSplitBrainStartup
  &#10005; j17_jvm_dtests_latest_vnode                     25m 46s
      org.apache.cassandra.distributed.test.tcm.CMSPlacementAfterMoveTest testMoveToCMS
  &#10005; j17_utests_oa                                    15m 3s
      org.apache.cassandra.tcm.DiscoverySimulationTest discoveryTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4723/workflows/4726de2e-5f9f-4b4c-a292-15ff94e5c488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17881407" author="smiklosovic" created="Thu, 12 Sep 2024 20:09:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19448-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19448-5.0&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java17_pre-commit_tests                         
  &#10003; j17_build                                         4m 8s
  &#10003; j17_cqlsh_dtests_py311                            6m 7s
  &#10003; j17_cqlsh_dtests_py311_vnode                     6m 22s
  &#10003; j17_cqlsh_dtests_py38                            5m 58s
  &#10003; j17_cqlsh_dtests_py38_vnode                      6m 33s
  &#10003; j17_cqlshlib_cython_tests                        7m 41s
  &#10003; j17_cqlshlib_tests                               6m 29s
  &#10003; j17_dtests                                      32m 42s
  &#10003; j17_dtests_vnode                                36m 10s
  &#10003; j17_jvm_dtests                                  23m 55s
  &#10003; j17_jvm_dtests_latest_vnode                     13m 59s
  &#10003; j17_unit_tests                                   16m 0s
  &#10003; j17_unit_tests_repeat                            9m 26s
  &#10003; j17_utests_latest                               18m 30s
  &#10003; j17_utests_latest_repeat                         9m 49s
  &#10003; j17_utests_oa                                   16m 15s
  &#10003; j17_utests_oa_repeat                             9m 23s
  &#10005; j17_dtests_latest                                34m 5s
      bootstrap_test.TestBootstrap test_killed_wiped_node_cannot_join
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4722/workflows/81e88afe-66dc-4485-83d5-df9f43e07746&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17881409" author="smiklosovic" created="Thu, 12 Sep 2024 20:12:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19448-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19448-4.1&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java11_pre-commit_tests                         
  &#10003; j11_build                                        1m 30s
  &#10003; j11_cqlsh_dtests_py3                             5m 19s
  &#10003; j11_cqlsh_dtests_py311                           5m 57s
  &#10003; j11_cqlsh_dtests_py311_vnode                      6m 0s
  &#10003; j11_cqlsh_dtests_py38                            5m 51s
  &#10003; j11_cqlsh_dtests_py38_vnode                      7m 37s
  &#10003; j11_cqlsh_dtests_py3_vnode                       5m 55s
  &#10003; j11_cqlshlib_cython_tests                        9m 58s
  &#10003; j11_cqlshlib_tests                               6m 42s
  &#10003; j11_jvm_dtests                                  19m 24s
  &#10003; j11_jvm_dtests_vnode                            12m 17s
  &#10003; j11_unit_tests                                   9m 43s
  &#10003; j11_unit_tests_repeat                           10m 19s
  &#10005; j11_dtests                                      33m 11s
      largecolumn_test.TestLargeColumn test_cleanup
  &#10005; j11_dtests_vnode                                36m 28s
      largecolumn_test.TestLargeColumn test_cleanup
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4721/workflows/119fe234-cb25-47e7-bc50-0c61a0159ac3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17881410" author="smiklosovic" created="Thu, 12 Sep 2024 20:16:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19448-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19448-4.0&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java11_pre-commit_tests                         
  &#10003; j11_build                                        1m 22s
  &#10003; j11_cqlsh-dtests-py2-no-vnodes                   5m 39s
  &#10003; j11_cqlsh-dtests-py2-with-vnodes                 5m 42s
  &#10003; j11_cqlsh_dtests_py3                             5m 56s
  &#10003; j11_cqlsh_dtests_py311                           5m 39s
  &#10003; j11_cqlsh_dtests_py311_vnode                     5m 58s
  &#10003; j11_cqlsh_dtests_py38                            5m 53s
  &#10003; j11_cqlsh_dtests_py38_vnode                      5m 42s
  &#10003; j11_cqlsh_dtests_py3_vnode                       5m 29s
  &#10003; j11_cqlshlib_tests                               5m 43s
  &#10003; j11_dtests                                      34m 45s
  &#10003; j11_dtests_vnode                                37m 44s
  &#10003; j11_jvm_dtests                                   10m 6s
  &#10003; j11_unit_tests                                    7m 7s
  &#10003; j11_unit_tests_repeat                            11m 1s                             
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4720/workflows/d4d5d592-14b1-429c-8169-d25dde3b2c56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[maxwellguo]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12986" cascade-level="1"><![CDATA[Recoverable Corruption / Loss]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1nofc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
        <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
        <customfieldvalue><![CDATA[tiagomlalves]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348835">NA</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/9f18aab1dcbc40bb038fdcbad15c5bcd40909819&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/9f18aab1dcbc40bb038fdcbad15c5bcd40909819&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;UT&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>