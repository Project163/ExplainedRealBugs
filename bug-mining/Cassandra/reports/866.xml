<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:20:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2499] cassandra-env.sh pattern matching for OpenJDK broken in some cases</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2499</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;With bash version 4.1.5, the section of cassandra-env that tries to match the JDK distribution seems to have some kind of syntax error.  I get the following message when running bin/cassandra:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bin/../conf/cassandra-env.sh: 99: [[: not found
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12504595">CASSANDRA-2499</key>
            <summary>cassandra-env.sh pattern matching for OpenJDK broken in some cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cywjackson">Jackson Chung</assignee>
                                    <reporter username="thobbs">Tom Hobbs</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Apr 2011 20:37:17 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:01 +0000</updated>
                            <resolved>Wed, 20 Apr 2011 19:16:29 +0000</resolved>
                                        <fixVersion>0.8.0 beta 2</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13021889" author="cywjackson" created="Wed, 20 Apr 2011 01:11:02 +0000"  >&lt;p&gt;chances are the default /bin/sh is linked to dash, please run a ls -al /bin/sh to confirm&lt;/p&gt;

&lt;p&gt;a minor fix could be remove the [[ and add &quot;&quot; around the variables and values.&lt;/p&gt;

&lt;p&gt;-if [[ $java_version != &amp;#42;OpenJDK&amp;#42; ]]&lt;br/&gt;
+if [ &quot;$java_version&quot; != &quot;&amp;#42;OpenJDK&amp;#42;&quot; ]&lt;/p&gt;

&lt;p&gt;a more drastic fix is to update all the /bin/sh with /bin/bash (if desired to only support on bash)&lt;/p&gt;

&lt;p&gt;see ref: &lt;a href=&quot;https://wiki.ubuntu.com/DashAsBinSh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.ubuntu.com/DashAsBinSh&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;suggest to be reviewed to make a decision.&lt;/p&gt;</comment>
                            <comment id="13022196" author="thobbs" created="Wed, 20 Apr 2011 16:27:28 +0000"  >&lt;p&gt;/bin/sh was a link to dash, and the current script seems to work fine with bash.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ &quot;$java_version&quot; != &quot;*OpenJDK*&quot; ]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; works for me in both dash and bash.&lt;/p&gt;</comment>
                            <comment id="13022218" author="thobbs" created="Wed, 20 Apr 2011 16:56:13 +0000"  >&lt;p&gt;Correction: the suggested replacement does &lt;b&gt;not&lt;/b&gt; seem to detect OpenJDK.&lt;/p&gt;</comment>
                            <comment id="13022254" author="cywjackson" created="Wed, 20 Apr 2011 17:46:08 +0000"  >&lt;p&gt;try this:&lt;/p&gt;

&lt;p&gt;-java_version=`java -version 2&amp;gt;&amp;amp;1`&lt;br/&gt;
-if [[ $java_version != &lt;b&gt;OpenJDK&lt;/b&gt; ]]&lt;br/&gt;
+check_openjdk=$(java -version 2&amp;gt;&amp;amp;1 | awk &apos;{if (NR == 2) {print $1}}&apos;)&lt;br/&gt;
+if [ &quot;$check_openjdk&quot; != &quot;OpenJDK&quot; ]&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ bash /tmp/testjdk java
version: Java(TM)
not OpenJDK
$ dash /tmp/testjdk /usr/bin/java
version: OpenJDK
yes OpenJDK
$ cat /tmp/testjdk
check_openjdk=$($1 -version 2&amp;gt;&amp;amp;1 | awk &apos;{if (NR ==2) {print $1}}&apos;)
echo &quot;version: $check_openjdk&quot;
if [ &quot;$check_openjdk&quot; != &quot;OpenJDK&quot; ]
then
    echo &quot;not OpenJDK&quot;
    JVM_OPTS=&quot;$JVM_OPTS -javaagent:$CASSANDRA_HOME/lib/jamm-0.2.1.jar&quot;
else
    echo &quot;yes OpenJDK&quot;
fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13022315" author="jbellis" created="Wed, 20 Apr 2011 19:16:29 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="13022345" author="hudson" created="Wed, 20 Apr 2011 20:02:24 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #30 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Cassandra-0.8/30/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/Cassandra-0.8/30/&lt;/a&gt;)&lt;br/&gt;
    fix jdk verison check for sh/dash&lt;br/&gt;
patch by Jackson Chung; reviewed by thobbs and jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2499&quot; title=&quot;cassandra-env.sh pattern matching for OpenJDK broken in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2499&quot;&gt;&lt;del&gt;CASSANDRA-2499&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[cywjackson]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20657</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gbpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>