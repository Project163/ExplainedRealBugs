<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:25:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14113] AssertionError while trying to upgrade 2.2.11 -&gt; 3.11.1</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14113</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We&apos;re trying to upgrade a test cluster from Cassandra 2.2.11 to Cassandra 3.11.1. The tables have been created using thrift and have supercolumns. When I try to run &lt;tt&gt;nodetool upgradesstables&lt;/tt&gt; I get the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;error: null
-- StackTrace --
java.lang.AssertionError
	at org.apache.cassandra.db.rows.BufferCell.&amp;lt;init&amp;gt;(BufferCell.java:42)
	at org.apache.cassandra.db.LegacyLayout$CellGrouper.addCell(LegacyLayout.java:1242)
	at org.apache.cassandra.db.LegacyLayout$CellGrouper.addAtom(LegacyLayout.java:1185)
	at org.apache.cassandra.db.UnfilteredDeserializer$OldFormatDeserializer$UnfilteredIterator.readRow(UnfilteredDeserializer.java:498)
	at org.apache.cassandra.db.UnfilteredDeserializer$OldFormatDeserializer$UnfilteredIterator.hasNext(UnfilteredDeserializer.java:472)
	at org.apache.cassandra.db.UnfilteredDeserializer$OldFormatDeserializer.hasNext(UnfilteredDeserializer.java:306)
	at org.apache.cassandra.io.sstable.SSTableSimpleIterator$OldFormatIterator.computeNext(SSTableSimpleIterator.java:188)
	at org.apache.cassandra.io.sstable.SSTableSimpleIterator$OldFormatIterator.computeNext(SSTableSimpleIterator.java:140)
	at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:47)
	at org.apache.cassandra.io.sstable.SSTableIdentityIterator.hasNext(SSTableIdentityIterator.java:122)
	at org.apache.cassandra.db.rows.LazilyInitializedUnfilteredRowIterator.computeNext(LazilyInitializedUnfilteredRowIterator.java:100)
	at org.apache.cassandra.db.rows.LazilyInitializedUnfilteredRowIterator.computeNext(LazilyInitializedUnfilteredRowIterator.java:32)
	at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:47)
	at org.apache.cassandra.utils.MergeIterator$TrivialOneToOne.computeNext(MergeIterator.java:484)
	at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:47)
	at org.apache.cassandra.db.rows.UnfilteredRowIterators$UnfilteredRowMergeIterator.computeNext(UnfilteredRowIterators.java:499)
	at org.apache.cassandra.db.rows.UnfilteredRowIterators$UnfilteredRowMergeIterator.computeNext(UnfilteredRowIterators.java:359)
	at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:47)
	at org.apache.cassandra.db.transform.BaseRows.hasNext(BaseRows.java:133)
	at org.apache.cassandra.db.transform.UnfilteredRows.isEmpty(UnfilteredRows.java:74)
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToPartition(PurgeFunction.java:75)
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToPartition(PurgeFunction.java:26)
	at org.apache.cassandra.db.transform.BasePartitions.hasNext(BasePartitions.java:96)
	at org.apache.cassandra.db.compaction.CompactionIterator.hasNext(CompactionIterator.java:233)
	at org.apache.cassandra.db.compaction.CompactionTask.runMayThrow(CompactionTask.java:196)
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)
	at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:85)
	at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(AbstractCompactionTask.java:61)
	at org.apache.cassandra.db.compaction.CompactionManager$5.execute(CompactionManager.java:428)
	at org.apache.cassandra.db.compaction.CompactionManager$2.call(CompactionManager.java:315)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.cassandra.concurrent.NamedThreadFactory.lambda$threadLocalDeallocator$0(NamedThreadFactory.java:81)
	at java.lang.Thread.run(Thread.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We also tried to upgrade to 3.0.15 instead and had a different error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR 11:00:40 Exception in thread Thread[CompactionExecutor:1,1,main]
java.lang.IllegalStateException: [ColumnDefinition{name=key, type=org.apache.cassandra.db.marshal.BytesType, kind=PARTITION_KEY, position=0}, ColumnDefinition{name=, type=org.apache.cassandra.db.marshal.MapType(org.apache.cassandra.db.marshal.BytesType,org.apache.cassandra.db.marshal.BytesType), kind=REGULAR, position=-1}] is not a subset of []
    at org.apache.cassandra.db.Columns$Serializer.encodeBitmap(Columns.java:532) ~[main/:na]
    at org.apache.cassandra.db.Columns$Serializer.serializedSubsetSize(Columns.java:484) ~[main/:na]
    at org.apache.cassandra.db.rows.UnfilteredSerializer.serializedRowBodySize(UnfilteredSerializer.java:290) ~[main/:na]
    at org.apache.cassandra.db.rows.UnfilteredSerializer.serialize(UnfilteredSerializer.java:169) ~[main/:na]
    at org.apache.cassandra.db.rows.UnfilteredSerializer.serialize(UnfilteredSerializer.java:114) ~[main/:na]
    at org.apache.cassandra.db.ColumnIndex$Builder.add(ColumnIndex.java:144) ~[main/:na]
    at org.apache.cassandra.db.ColumnIndex$Builder.build(ColumnIndex.java:112) ~[main/:na]
    at org.apache.cassandra.db.ColumnIndex.writeAndBuildIndex(ColumnIndex.java:52) ~[main/:na]
    at org.apache.cassandra.io.sstable.format.big.BigTableWriter.append(BigTableWriter.java:149) ~[main/:na]
    at org.apache.cassandra.io.sstable.SSTableRewriter.append(SSTableRewriter.java:125) ~[main/:na]
    at org.apache.cassandra.db.compaction.writers.MaxSSTableSizeWriter.realAppend(MaxSSTableSizeWriter.java:88) ~[main/:na]
    at org.apache.cassandra.db.compaction.writers.CompactionAwareWriter.append(CompactionAwareWriter.java:109) ~[main/:na]
    at org.apache.cassandra.db.compaction.CompactionTask.runMayThrow(CompactionTask.java:195) ~[main/:na]
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28) ~[main/:na]
    at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:89) ~[main/:na]
    at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(AbstractCompactionTask.java:61) ~[main/:na]
    at org.apache.cassandra.db.compaction.CompactionManager$5.execute(CompactionManager.java:424) ~[main/:na]
    at org.apache.cassandra.db.compaction.CompactionManager$2.call(CompactionManager.java:311) ~[main/:na]
    at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_151]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[na:1.8.0_151]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_151]
    at org.apache.cassandra.concurrent.NamedThreadFactory.lambda$threadLocalDeallocator$0(NamedThreadFactory.java:79) [main/:na]
    at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_151]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Attached are a set of sstables that reproduce the issue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tables have been created in 2.2.11 using thrift and have supercolumns&lt;/p&gt;</environment>
        <key id="13124699">CASSANDRA-14113</key>
            <summary>AssertionError while trying to upgrade 2.2.11 -&gt; 3.11.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knbk">Marten Kenbeek</assignee>
                                    <reporter username="xiu">Guillaume Herail</reporter>
                        <labels>
                            <label>supercolumns</label>
                    </labels>
                <created>Wed, 13 Dec 2017 15:24:50 +0000</created>
                <updated>Mon, 11 Jul 2022 14:54:24 +0000</updated>
                            <resolved>Mon, 11 Jul 2022 14:53:31 +0000</resolved>
                                        <fixVersion>3.11.14</fixVersion>
                                    <component>Legacy/Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16289384" author="xiu" created="Wed, 13 Dec 2017 15:25:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11613&quot; title=&quot;dtest failure in upgrade_tests.cql_tests.TestCQLNodes2RF1_2_2_HEAD_UpTo_Trunk.more_user_types_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11613&quot;&gt;&lt;del&gt;CASSANDRA-11613&lt;/del&gt;&lt;/a&gt; might be related to that one.&lt;/p&gt;</comment>
                            <comment id="16386637" author="bhanu.m.gandikota" created="Mon, 5 Mar 2018 19:45:09 +0000"  >&lt;p&gt;Here there, I&apos;ve been receiving the exact stack errors when I tried to upgrade from 2.2.5 to 3.11.1 using &quot;nodetool upgradesstables&quot;.&#160;&lt;/p&gt;

&lt;p&gt;I&apos;d appreciate if a solution is provided to this issue.&#160;&lt;/p&gt;

&lt;p&gt;Just wanted to let you know that I don&apos;t see any other errors/warnings in system.log or in debug.log. Just the upgrades stables fails after running for a while.&#160;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;

$ nodetool upgradesstables

WARN&#160; 11:28:28,430 Small cdc volume detected &lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; /cdc_raw; setting cdc_total_space_in_mb &lt;span class=&quot;code-keyword&quot;&gt;to&lt;/span&gt; 1982.&#160; You can override this &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; cassandra.yaml

error: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;

&#8211; StackTrace &#8211;

java.lang.AssertionError

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.&lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;.BufferCell.&amp;lt;init&amp;gt;(BufferCell.java:43)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.LegacyLayout$CellGrouper.addCell(LegacyLayout.java:1242)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.LegacyLayout$CellGrouper.addAtom(LegacyLayout.java:1185)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.UnfilteredDeserializer$OldFormatDeserializer$UnfilteredIterator.readRow(UnfilteredDeserializer.java:495)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.UnfilteredDeserializer$OldFormatDeserializer$UnfilteredIterator.hasNext(UnfilteredDeserializer.java:472)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.UnfilteredDeserializer$OldFormatDeserializer.hasNext(UnfilteredDeserializer.java:306)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.io.sstable.SSTableSimpleIterator$OldFormatIterator.readStaticRow(SSTableSimpleIterator.java:176)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.io.sstable.SSTableIdentityIterator.&amp;lt;init&amp;gt;(SSTableIdentityIterator.java:49)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.io.sstable.SSTableIdentityIterator.&lt;span class=&quot;code-keyword&quot;&gt;create&lt;/span&gt;(SSTableIdentityIterator.java:59)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.io.sstable.format.big.BigTableScanner$KeyScanningIterator$1.initializeIterator(BigTableScanner.java:384)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.&lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;.LazilyInitializedUnfilteredRowIterator.maybeInit(LazilyInitializedUnfilteredRowIterator.java:48)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.&lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;.LazilyInitializedUnfilteredRowIterator.isReverseOrder(LazilyInitializedUnfilteredRowIterator.java:70)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.partitions.UnfilteredPartitionIterators$1.reduce(UnfilteredPartitionIterators.java:122)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.partitions.UnfilteredPartitionIterators$1.reduce(UnfilteredPartitionIterators.java:113)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.utils.MergeIterator$OneToOne.computeNext(MergeIterator.java:466)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:47)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.partitions.UnfilteredPartitionIterators$2.hasNext(UnfilteredPartitionIterators.java:163)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.&lt;span class=&quot;code-keyword&quot;&gt;transform&lt;/span&gt;.BasePartitions.hasNext(BasePartitions.java:92)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.compaction.CompactionIterator.hasNext(CompactionIterator.java:233)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.compaction.CompactionTask.runMayThrow(CompactionTask.java:196)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:85)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.compaction.AbstractCompactionTask.&lt;span class=&quot;code-keyword&quot;&gt;execute&lt;/span&gt;(AbstractCompactionTask.java:61)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.compaction.CompactionManager$5.&lt;span class=&quot;code-keyword&quot;&gt;execute&lt;/span&gt;(CompactionManager.java:428)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.db.compaction.CompactionManager$2.&lt;span class=&quot;code-keyword&quot;&gt;call&lt;/span&gt;(CompactionManager.java:315)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; java.util.concurrent.FutureTask.run(FutureTask.java:266)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; org.apache.cassandra.concurrent.NamedThreadFactory.lambda$threadLocalDeallocator$0(NamedThreadFactory.java:81)

&lt;span class=&quot;code-keyword&quot;&gt;at&lt;/span&gt; java.lang.Thread.run(Thread.java:745)
{code:java}
&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16386644" author="bhanu.m.gandikota" created="Mon, 5 Mar 2018 19:46:31 +0000"  >&lt;p&gt;FYI, here is my JDK version:&lt;/p&gt;

&lt;p&gt;-bash-4.2$ java -version&lt;/p&gt;

&lt;p&gt;openjdk version &quot;1.8.0_151&quot;&lt;/p&gt;

&lt;p&gt;OpenJDK Runtime Environment (build 1.8.0_151-b12)&lt;/p&gt;

&lt;p&gt;OpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17130011" author="dcapwell" created="Wed, 10 Jun 2020 03:21:09 +0000"  >&lt;p&gt;I started looking into this since I hit the same exception but the problem I hit was that a frozen collection was written in a multi-cell column; will file a different JIRA for that.&lt;/p&gt;

&lt;p&gt;I downloaded the data and replicated the exception&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select * from &lt;span class=&quot;code-quote&quot;&gt;&quot;TDF_DATA&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Schema&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE TABLE &lt;span class=&quot;code-quote&quot;&gt;&quot;WafercloudData&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;TDF_DATA&quot;&lt;/span&gt; (
    key blob,
    column1 blob,
    column2 blob,
    &quot;&quot; map&amp;lt;blob, blob&amp;gt;,
    value blob,
    PRIMARY KEY (key, column1, column2)
) WITH COMPACT STORAGE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This produced the following in 3.0&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.IllegalStateException: [ColumnDefinition{name=key, type=org.apache.cassandra.db.marshal.BytesType, kind=PARTITION_KEY, position=0}, ColumnDefinition{name=, type=org.apache.cassandra.db.ma
rshal.MapType(org.apache.cassandra.db.marshal.BytesType,org.apache.cassandra.db.marshal.BytesType), kind=REGULAR, position=-1}] is not a subset of []
        at org.apache.cassandra.db.Columns$Serializer.encodeBitmap(Columns.java:545) ~[]
        at org.apache.cassandra.db.Columns$Serializer.serializeSubset(Columns.java:477) ~[]
        at org.apache.cassandra.db.rows.UnfilteredSerializer.serialize(UnfilteredSerializer.java:188) ~[]
        at org.apache.cassandra.db.rows.UnfilteredSerializer.serialize(UnfilteredSerializer.java:118) ~[]
        at org.apache.cassandra.db.rows.UnfilteredSerializer.serialize(UnfilteredSerializer.java:106) ~[]
        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer.serialize(UnfilteredRowIteratorSerializer.java:132) ~[]
        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer.serialize(UnfilteredRowIteratorSerializer.java:87) ~[]
        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer.serialize(UnfilteredRowIteratorSerializer.java:77) ~[]
        at org.apache.cassandra.db.partitions.UnfilteredPartitionIterators$Serializer.serialize(UnfilteredPartitionIterators.java:325) ~[]
        at org.apache.cassandra.db.ReadResponse$LocalDataResponse.build(ReadResponse.java:186) ~[]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The subset isn&apos;t empty but its actually the column with the empty name; the exception is rejecting the column &quot;key&quot; since it was only expected non rowKey columns.&lt;/p&gt;

&lt;p&gt;Now, this happens after the following steps&lt;/p&gt;

&lt;p&gt;1) read the lb using LegacyLayout&lt;br/&gt;
2) migrate the data to modern Unfiltered&lt;br/&gt;
3) serialize the partition to send over the wire - this is where the exception is happening.&lt;/p&gt;</comment>
                            <comment id="17130027" author="dcapwell" created="Wed, 10 Jun 2020 03:46:18 +0000"  >&lt;p&gt;When I comment out the metadata.isCQLTable() check here &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.0/src/java/org/apache/cassandra/db/LegacyLayout.java#L1434&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-3.0/src/java/org/apache/cassandra/db/LegacyLayout.java#L1434&lt;/a&gt;, I am able to read the data.&lt;/p&gt;

&lt;p&gt;The issue was that the partition key was written again as a normal column, in 2.1 this was dropped but in 3.0 we only drop if the table is a pure CQL table, which this table is not.&lt;/p&gt;</comment>
                            <comment id="17418567" author="knbk" created="Wed, 22 Sep 2021 12:27:34 +0000"  >&lt;p&gt;We ran into this issue while upgrading a supercolumn table from 2.2.13 to 3.11.11. The issue appears to be when the literal value in &quot;column2&quot; (the key of the surrogate map) corresponds to a defined column name (i.e. &quot;key&quot;, &quot;column1&quot;, &quot;value&quot; in the default case). This triggers the exception described in the issue and prevents us from upgrading the table to the 3.X format. I&apos;ve tracked it down to the following code:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/blob/8f4ae7d825d90a18327c5555386f3cdaf414d836/src/java/org/apache/cassandra/db/LegacyLayout.java#L146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/8f4ae7d825d90a18327c5555386f3cdaf414d836/src/java/org/apache/cassandra/db/LegacyLayout.java#L146&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Removing the if-block and always using the compact value column fixes the issue in our case. Disabling the metadata.isCQLTable() check as suggested in the above comment avoids the exception, but doesn&apos;t return the data for that row.&lt;/p&gt;

&lt;p&gt;Is there any case where a supercolumn table can have a statically defined column as indicated in the code comment? I can&apos;t think of any case: it&apos;s not possible to add a column to a supercolumn table, and after dropping the compact storage flag it is no longer regarded as a supercolumn table.&lt;/p&gt;

&lt;p&gt;Potential patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/src/java/org/apache/cassandra/db/LegacyLayout.java b/src/java/org/apache/cassandra/db/LegacyLayout.java
index 673aa4f849..780e0a54a1 100644
--- a/src/java/org/apache/cassandra/db/LegacyLayout.java
+++ b/src/java/org/apache/cassandra/db/LegacyLayout.java
@@ -143,14 +143,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LegacyLayout
&#160;
&#160;&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; LegacyCellName decodeForSuperColumn(CFMetaData metadata, Clustering clustering, ByteBuffer subcol)
&#160;&#160; &#160; {
-&#160; &#160; &#160; &#160; ColumnDefinition def = metadata.getColumnDefinition(subcol);
-&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (def != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
-&#160; &#160; &#160; &#160; {
-&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// it&apos;s a statically defined subcolumn
&lt;/span&gt;-&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LegacyCellName(clustering, def, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
-&#160; &#160; &#160; &#160; }
-
-&#160; &#160; &#160; &#160; def = metadata.compactValueColumn();
+&#160; &#160; &#160; &#160; ColumnDefinition def = metadata.compactValueColumn();
&#160;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; def != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; def.type &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; MapType;
&#160;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LegacyCellName(clustering, def, subcol);
&#160;&#160; &#160; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17418622" author="brandon.williams" created="Wed, 22 Sep 2021 14:12:25 +0000"  >&lt;p&gt;ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17419136" author="blerer" created="Thu, 23 Sep 2021 11:08:43 +0000"  >&lt;p&gt;I had some quick chat with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt; regarding statically defined subcolumn. His answer was:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When you defined a super column in thrift, it was actually possible to defined stuffs in the column_metadata , and when you did so, this was affecting sub-columns.&lt;br/&gt;
Another way to put it is that you could declare a super column family where all, inside a given super column, all of the cells have a value of type text, except when the cell is called, say foo, in which case the type of the value is bigint.&lt;br/&gt;
To be clear, I have no clue if anyone ever did that, but the API alllowed it.&lt;br/&gt;
This code is supposed to handle this case.&lt;br/&gt;
In the sense that, when translated in CQL, we translated this by using the normal map we use for super columns for everything that is text, but the foo one was a normal non-map column (with type bigint).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Now he does not know why this code trigger the exception. I would need to look into it.&lt;/p&gt;</comment>
                            <comment id="17419138" author="blerer" created="Thu, 23 Sep 2021 11:11:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knbk&quot; class=&quot;user-hover&quot; rel=&quot;knbk&quot;&gt;knbk&lt;/a&gt; Do you have an example of how the supercolumn was created?&lt;/p&gt;</comment>
                            <comment id="17419210" author="knbk" created="Thu, 23 Sep 2021 13:28:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&#160;This is the CfDef we used to create the table:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CfDef container = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CfDef(keyspace, tableName);
container.setColumn_type(SUPER.getValue());
container.setComparator_type(BYTESTYPE.getValue());
container.setSubcomparator_type(BYTESTYPE.getValue());
container.setCompression_options(compressionOptions);
container.setCaching(KEYS_ONLY);
container.setRead_repair_chance(0.0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Compression options just sets the DeflateCompressor with no options. We&apos;re creating the tables through hector, but I don&apos;t think that&apos;s adding/changing any options.&lt;/p&gt;

&lt;p&gt;The CQL table definition:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cqlsh:Keyspace1&amp;gt; desc table &lt;span class=&quot;code-quote&quot;&gt;&quot;Profile&quot;&lt;/span&gt;;


CREATE TABLE &lt;span class=&quot;code-quote&quot;&gt;&quot;Keyspace1&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;Profile&quot;&lt;/span&gt; (
&#160; &#160; key blob,
&#160; &#160; column1 blob,
&#160; &#160; column2 blob,
&#160; &#160; &quot;&quot; map&amp;lt;blob, blob&amp;gt;,
&#160; &#160; value blob,
&#160; &#160; PRIMARY KEY (key, column1, column2)
) WITH COMPACT STORAGE
&#160; &#160; AND CLUSTERING ORDER BY (column1 ASC, column2 ASC)
&#160; &#160; AND bloom_filter_fp_chance = 0.01
&#160; &#160; AND caching = {&lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;ALL&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;}
&#160; &#160; AND comment = &apos;&apos;
&#160; &#160; AND compaction = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;max_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;32&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;min_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;}
&#160; &#160; AND compression = {&lt;span class=&quot;code-quote&quot;&gt;&apos;chunk_length_in_kb&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;64&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.io.compress.DeflateCompressor&apos;&lt;/span&gt;}
&#160; &#160; AND crc_check_chance = 1.0
&#160; &#160; AND dclocal_read_repair_chance = 0.1
&#160; &#160; AND default_time_to_live = 0
&#160; &#160; AND gc_grace_seconds = 0
&#160; &#160; AND max_index_interval = 2048
&#160; &#160; AND memtable_flush_period_in_ms = 0
&#160; &#160; AND min_index_interval = 128
&#160; &#160; AND read_repair_chance = 0.0
&#160; &#160; AND speculative_retry = &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17419224" author="knbk" created="Thu, 23 Sep 2021 13:43:43 +0000"  >&lt;p&gt;I got Cassandra&apos;s test suite running with the above patch, and it causes a number of test failures related to sparse supercolumn tables in ThriftIntegrationTest. Changing the if to &lt;tt&gt;if (def != null &amp;amp;&amp;amp; !metadata.isDense())&lt;/tt&gt; seems to fix the test failures, but I can&apos;t really oversee the impact of that change. I also don&apos;t know if this issue can occur for sparse tables, we only have dense tables.&lt;/p&gt;</comment>
                            <comment id="17420536" author="blerer" created="Mon, 27 Sep 2021 07:53:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knbk&quot; class=&quot;user-hover&quot; rel=&quot;knbk&quot;&gt;knbk&lt;/a&gt; Thanks. I will find some time this week to look into the problem. &lt;/p&gt;</comment>
                            <comment id="17428772" author="knbk" created="Thu, 14 Oct 2021 11:52:12 +0000"  >&lt;p&gt;I&apos;ve looked into the case with column_metadata some more. Seems that on the thrift side, the column_metadata overrides the validation type of specific subcolumns, but it&apos;s still possible to add data for dynamic subcolumns, not just the statically defined ones. On CQL&apos;s side, however, only the static subcolumns defined in columns_metadata are accessible. Either way, it&apos;s these statically defined subcolumns in column_metadata that we need to account for in decodeForSuperColumn().&lt;/p&gt;

&lt;p&gt;So I think the solution for this should be:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;If the table is dense, always return the compact value column with the subcolumn as the collection element.&lt;/li&gt;
	&lt;li&gt;If the table is sparse, check for a statically defined subcolumn. This means it is a regular column, and is not the compact value column (i.e. the internal map column) or super column value column (i.e. the &quot;value&quot; column by default). If a statically defined subcolumn is found, return that column, otherwise fall back to the compact value column with collection element.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&#160;If you&apos;ve got some time to take a look, let me know what you think. We&apos;ve decided to temporarily patch Cassandra during the upgrade for this issue and another one specific to our usecase, so it&apos;s not blocking for us, but extra eyes are more than welcome.&lt;/p&gt;</comment>
                            <comment id="17433822" author="blerer" created="Mon, 25 Oct 2021 15:26:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knbk&quot; class=&quot;user-hover&quot; rel=&quot;knbk&quot;&gt;knbk&lt;/a&gt; Sorry for the long delay.&lt;br/&gt;
Your proposal make sense to me as a super column is considered as sparse if it has some &lt;tt&gt;column_metadata&lt;/tt&gt;.&lt;br/&gt;
Would you be interested in providing a patch for this ticket? &lt;/p&gt;</comment>
                            <comment id="17434815" author="knbk" created="Wed, 27 Oct 2021 11:57:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&#160;Sure, I can find some time to prepare a patch.&lt;/p&gt;</comment>
                            <comment id="17452839" author="blerer" created="Fri, 3 Dec 2021 08:52:50 +0000"  >&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knbk&quot; class=&quot;user-hover&quot; rel=&quot;knbk&quot;&gt;knbk&lt;/a&gt;. It looks good to me. I am just having some issues with the upgrade tests. Due to some CI instabilities it is difficult to be sure if the patch introduce a problem or not. I will look deeper into it but it might take a bit of time as I got involved in to many things.&lt;/p&gt;</comment>
                            <comment id="17500054" author="knbk" created="Wed, 2 Mar 2022 11:04:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; Do you think you can take a look at this anytime soon, or can someone else help with the review?&lt;/p&gt;

&lt;p&gt;We&apos;ve just hit the same issue while inserting data through Thrift. When inserting a subcolumn named &quot;key&quot;, the check in ThriftValidation.validateColumnData() uses the same method in LegacyLayout to decode the cell name. As this returns the partition key column, it throws an InvalidRequestException with the message &quot;Cannot add primary key column key to partition update&quot;.&lt;/p&gt;

&lt;p&gt;This affects inserts on any 3.11 keyspace, unlike the original issue that only affected queries on a 2.2 SSTable format.&lt;/p&gt;

&lt;p&gt;Thrift insert to reproduce the issue (same table as above):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ColumnParent parent = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ColumnParent(tableName).setSuper_column(UTF_8.encode(&lt;span class=&quot;code-quote&quot;&gt;&quot;Default&quot;&lt;/span&gt;));
Column column = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Column(UTF_8.encode(&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;)).setValue(UTF_8.encode(&quot;&quot;)).setTimestamp(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis());
cassandra.insert(UTF_8.encode(&lt;span class=&quot;code-quote&quot;&gt;&quot;partition_key&quot;&lt;/span&gt;), parent, column, ConsistencyLevel.QUORUM); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17504231" author="blerer" created="Thu, 10 Mar 2022 12:42:40 +0000"  >&lt;p&gt;Sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knbk&quot; class=&quot;user-hover&quot; rel=&quot;knbk&quot;&gt;knbk&lt;/a&gt;. The patch looked good to me. We just had some issue with CI at that time and it was unclear to me if the patch was causing some regressions or if the problems were coming from somewhere else. Then I got drag into other problems. I will look into it. &lt;/p&gt;</comment>
                            <comment id="17536087" author="knbk" created="Thu, 12 May 2022 12:32:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;, is there any improvement in the CI situation? Where would I be able to see the results (if they&apos;re still available)? I found &lt;a href=&quot;https://ci-cassandra.apache.org/,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/,&lt;/a&gt; but wasn&apos;t entirely sure where the results for patches would show up.&lt;/p&gt;

&lt;p&gt;It would be great if we could land this patch so we no longer have to run our own patched version. Please let me know if you have time for this, or if it would be better to find someone else for the review.&lt;/p&gt;</comment>
                            <comment id="17536108" author="brandon.williams" created="Thu, 12 May 2022 13:22:28 +0000"  >&lt;p&gt;I put &lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-14113-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt; through circle &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/476/workflows/3d84d20f-c919-4974-b7ed-8960381c0a64/jobs/5539&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; and unfortunately it looks like it indeed broke some things.&lt;/p&gt;</comment>
                            <comment id="17536195" author="knbk" created="Thu, 12 May 2022 15:40:28 +0000"  >&lt;p&gt;Ah sorry, that was my first idea for a patch, but it didn&apos;t handle sparse tables correctly. The latest patch is in an attachment to this issue, or you can find it at &lt;a href=&quot;https://github.com/knbk/cassandra/tree/cassandra-14133/3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/knbk/cassandra/tree/cassandra-14133/3.11&lt;/a&gt; if that&apos;s easier. That one passed the unit test suite when I ran it locally. I think the issues were in the upgrade tests.&lt;/p&gt;</comment>
                            <comment id="17536209" author="brandon.williams" created="Thu, 12 May 2022 16:09:25 +0000"  >&lt;p&gt;I&apos;ve started a circle run here: &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/478/workflows/ffdea584-a280-4d07-932b-36cf5e1dd6b8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/driftx/cassandra/478/workflows/ffdea584-a280-4d07-932b-36cf5e1dd6b8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17536650" author="knbk" created="Fri, 13 May 2022 13:49:43 +0000"  >&lt;p&gt;Thanks. I think the dtest failures are unrelated, right? I can reproduce them on a clean 3.11 branch, and the same tests are failing in other 3.X pipelines.&lt;/p&gt;</comment>
                            <comment id="17536696" author="brandon.williams" created="Fri, 13 May 2022 14:46:02 +0000"  >&lt;p&gt;They look unrelated to me.&lt;/p&gt;</comment>
                            <comment id="17551644" author="knbk" created="Wed, 8 Jun 2022 14:04:24 +0000"  >&lt;p&gt;What still needs to happen before this can be merged? Is there anything I can do?&lt;/p&gt;</comment>
                            <comment id="17551694" author="brandon.williams" created="Wed, 8 Jun 2022 16:24:43 +0000"  >&lt;p&gt;Pinging &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17554980" author="blerer" created="Thu, 16 Jun 2022 09:17:45 +0000"  >&lt;p&gt;+1 sorry for loosing track totally. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17565044" author="blerer" created="Mon, 11 Jul 2022 14:53:31 +0000"  >&lt;p&gt;Committed into cassandra-3.11 at dd51df6734d9b8d8dca9c2a22659e74f674060e2&lt;/p&gt;</comment>
                            <comment id="17565045" author="blerer" created="Mon, 11 Jul 2022 14:54:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knbk&quot; class=&quot;user-hover&quot; rel=&quot;knbk&quot;&gt;knbk&lt;/a&gt; Sorry for the multiple time where I dropped the ball.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13035569" name="14113-3.0.txt" size="6188" author="knbk" created="Mon, 1 Nov 2021 13:36:54 +0000"/>
                            <attachment id="12901905" name="data.tar.gz" size="67318" author="xiu" created="Wed, 13 Dec 2017 15:24:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[knbk]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nv13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12341001">3.0.15</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/dd51df6734d9b8d8dca9c2a22659e74f674060e2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/dd51df6734d9b8d8dca9c2a22659e74f674060e2&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Unit tests included&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>