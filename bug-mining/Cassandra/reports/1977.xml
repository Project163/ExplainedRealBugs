<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:36:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5117] CQL 3 ALTER TABLE ... ADD causes OOB</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5117</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;To reproduce:&lt;/p&gt;

&lt;p&gt;./cqlsh&lt;br/&gt;
Connected to Test Cluster at localhost:9160.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;cqlsh 2.3.0 | Cassandra 1.2.0-SNAPSHOT | CQL spec 3.0.0 | Thrift protocol 19.35.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
Use HELP for help.&lt;br/&gt;
cqlsh&amp;gt; create keyspace music with replication = &lt;/p&gt;
{&apos;CLASS&apos; : 
   ... &apos;SimpleStrategy&apos;, &apos;replication_factor&apos; : 3}
&lt;p&gt;;&lt;br/&gt;
cqlsh&amp;gt; use music&lt;br/&gt;
   ... ;&lt;br/&gt;
cqlsh:music&amp;gt; CREATE TABLE songs (&lt;br/&gt;
         ... id uuid PRIMARY KEY,&lt;br/&gt;
         ... title text,&lt;br/&gt;
         ... album text,&lt;br/&gt;
         ... artist text,&lt;br/&gt;
         ... data blob&lt;br/&gt;
         ... );&lt;br/&gt;
cqlsh:music&amp;gt; insert into songs (id, title, artist, album) values (&apos;a3e64f8f-bd44-4f28-b8d9-6938726e34d4&apos;, &apos;La Grange&apos;, &apos;ZZ Top&apos;, &apos;Tres Hombres&apos;);&lt;br/&gt;
cqlsh:music&amp;gt; insert into songs (id, title, artist, album) values (&apos;8a172618-b121-4136-bb10-f665cfc469eb&apos;, &apos;Moving in Stereo&apos;, &apos;Fu Manchu&apos;, &apos;We Must Obey&apos;);&lt;br/&gt;
cqlsh:music&amp;gt; insert into songs (id, title, artist, album) values (&apos;62c36092-82a1-3a00-93d1-46196ee77204&apos;, &apos;Outside Woman Blues&apos;, &apos;Back Door Slam&apos;, &apos;Roll Away&apos;);&lt;br/&gt;
cqlsh:music&amp;gt; CREATE TABLE song_tags (&lt;br/&gt;
         ... id uuid,&lt;br/&gt;
         ... tag_name text,&lt;br/&gt;
         ... PRIMARY KEY (id, tag_name)&lt;br/&gt;
         ... );&lt;br/&gt;
cqlsh:music&amp;gt; select * from song_tags;&lt;br/&gt;
cqlsh:music&amp;gt; INSERT INTO song_tags (id, tag_name) VALUES (&apos;a3e64f8f-bd44-4f28-b8d9-6938726e34d4&apos;, &apos;blues&apos;);&lt;br/&gt;
cqlsh:music&amp;gt; INSERT INTO song_tags (id, tag_name) VALUES (&apos;8a172618-b121-4136-bb10-f665cfc469eb&apos;, &apos;covers&apos;);&lt;br/&gt;
cqlsh:music&amp;gt; INSERT INTO song_tags (id, tag_name) VALUES (&apos;a3e64f8f-bd44-4f28-b8d9-6938726e34d4&apos;, &apos;1973&apos;);&lt;br/&gt;
cqlsh:music&amp;gt; INSERT INTO song_tags (id, tag_name) VALUES (&apos;8a172618-b121-4136-bb10-f665cfc469eb&apos;, &apos;2007&apos;);&lt;br/&gt;
cqlsh:music&amp;gt; select * from song_tags;&lt;/p&gt;

&lt;p&gt; id                                   | tag_name&lt;br/&gt;
-------------------------------------&lt;del&gt;+&lt;/del&gt;---------&lt;br/&gt;
 a3e64f8f-bd44-4f28-b8d9-6938726e34d4 |     1973&lt;br/&gt;
 a3e64f8f-bd44-4f28-b8d9-6938726e34d4 |    blues&lt;br/&gt;
 8a172618-b121-4136-bb10-f665cfc469eb |     2007&lt;br/&gt;
 8a172618-b121-4136-bb10-f665cfc469eb |   covers&lt;/p&gt;

&lt;p&gt;cqlsh:music&amp;gt; drop table song_tags;&lt;br/&gt;
cqlsh:music&amp;gt; ALTER TABLE songs ADD tags set&amp;lt;text&amp;gt;;&lt;br/&gt;
TSocket read 0 bytes&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OSX, DS Java Driver, apache-cassandra-1.2.0-src downloaded from project Jan 2, 2013&lt;/p&gt;</environment>
        <key id="12626142">CASSANDRA-5117</key>
            <summary>CQL 3 ALTER TABLE ... ADD causes OOB</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="khahn">K. B. Hahn</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jan 2013 23:38:00 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:20 +0000</updated>
                            <resolved>Tue, 8 Jan 2013 08:49:45 +0000</resolved>
                                        <fixVersion>1.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13544363" author="iamaleksey" created="Fri, 4 Jan 2013 23:55:59 +0000"  >&lt;p&gt;Looks like it could be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5064&quot; title=&quot;&amp;#39;Alter table&amp;#39; when it includes collections makes cqlsh hang&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5064&quot;&gt;&lt;del&gt;CASSANDRA-5064&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13544368" author="khahn" created="Sat, 5 Jan 2013 00:00:10 +0000"  >&lt;p&gt;system.log&lt;/p&gt;</comment>
                            <comment id="13545758" author="slebresne" created="Mon, 7 Jan 2013 10:28:40 +0000"  >&lt;p&gt;I don&apos;t think the attached patch is correct (that is, it fixes the fact that componentIndex be set to a negative value, but it&apos;s not the correct fix). The problem is that in the case where we add a collection but we had not collection previous, we should not do the &lt;tt&gt;component--&lt;/tt&gt; at all. Attaching a v2 to fix that.&lt;/p&gt;</comment>
                            <comment id="13546628" author="dbrosius" created="Tue, 8 Jan 2013 05:34:06 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13546709" author="slebresne" created="Tue, 8 Jan 2013 08:49:45 +0000"  >&lt;p&gt;Committed, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12563547" name="5117-v2.txt" size="2388" author="slebresne" created="Mon, 7 Jan 2013 10:28:40 +0000"/>
                            <attachment id="12563449" name="5117.txt" size="986" author="dbrosius@apache.org" created="Sun, 6 Jan 2013 01:16:15 +0000"/>
                            <attachment id="12563380" name="OOB.txt" size="10692" author="khahn" created="Sat, 5 Jan 2013 00:00:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302725</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i174zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249775</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>dbrosius</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dbrosius]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>