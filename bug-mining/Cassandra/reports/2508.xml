<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:41:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6427] Counter writes shouldn&apos;t be resubmitted after timeouts</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6427</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4753&quot; title=&quot;Timeout reporter writes hints for the local node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4753&quot;&gt;&lt;del&gt;CASSANDRA-4753&lt;/del&gt;&lt;/a&gt; made SP.counterWriteTask() return a LocalMutationRunnable instead of the usual DroppableRunnalbe, and LMR resubmits the original runnable in case of timing out instead of simply dropping it.&lt;/p&gt;

&lt;p&gt;For counters this is not the right option since it would lead to overcounting if the mutation got dropped-then-resubmitted and then retried by the user.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682005">CASSANDRA-6427</key>
            <summary>Counter writes shouldn&apos;t be resubmitted after timeouts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="aleksey">Aleksey Yeschenko</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Dec 2013 15:44:00 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:58 +0000</updated>
                            <resolved>Fri, 6 Dec 2013 15:29:03 +0000</resolved>
                                        <fixVersion>1.2.14</fixVersion>
                    <fixVersion>2.0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13836151" author="jbellis" created="Mon, 2 Dec 2013 00:17:59 +0000"  >&lt;p&gt;But if it&apos;s dropped-then-resubmitted then the user would only retry if the resubmit times out, right?  So we&apos;re better off than we would be in at least some situations (dropped, resubmitted, not retried) and no worse off in others (succeeded after timeout, but retried).&lt;/p&gt;</comment>
                            <comment id="13836933" author="iamaleksey" created="Mon, 2 Dec 2013 21:17:35 +0000"  >&lt;p&gt;But the coordinator (and thus the user) has no way of telling if the timeout was caused, by a leader node death or if the runnable had been resubmitted and successfully applied eventually.&lt;/p&gt;

&lt;p&gt;It&apos;s subtle, and it&apos;s about control.&lt;/p&gt;

&lt;p&gt;Consider the two possible timeout handling strategies:&lt;br/&gt;
1. Never lose a counter write - prefer overcounting to undercounting. In this scenario one would always retry, and with the current behavior there will be a lot more overcounting than there would&apos;ve been had Cassandra not resubmitted them under the cover.&lt;/p&gt;

&lt;p&gt;2. Never repeat a counter write - prefer undercounting to overcounting. One would never retry, and with the current behavior would actually get more accurate results than with pre-1.2.1 C* (no resubmitting).&lt;/p&gt;

&lt;p&gt;So on balance LocalMutationRunnable and DroppableRunnable do yield the same score, but I expect 1) to be more common, and LMR here makes things worse (and it&apos;s probably not something people are aware of and expect).&lt;/p&gt;

&lt;p&gt;So it&apos;s not a big deal, and I&apos;m fine with not-a-problem&apos;ing it, but I do believe that going back to DroppableRunnable and not resubmitting is less surprising to users and more preferable in most cases.&lt;/p&gt;</comment>
                            <comment id="13836936" author="iamaleksey" created="Mon, 2 Dec 2013 21:21:51 +0000"  >&lt;p&gt;Also, timeout due to node death is probably less common than timing out b/c of overload, and that makes always-retrying less accurate in general.&lt;/p&gt;</comment>
                            <comment id="13840916" author="jbellis" created="Fri, 6 Dec 2013 03:27:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13841348" author="iamaleksey" created="Fri, 6 Dec 2013 15:29:03 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12616476" name="6427.txt" size="2320" author="aleksey" created="Sun, 1 Dec 2013 15:47:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361264</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1q9x3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12322953">1.2.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>