<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:25:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-17740] BulkLoader tool initializes schema unnecessarily via streaming</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-17740</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Changes to streaming setup code for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17663&quot; title=&quot;Ensure FileStreamTask cannot compromise shared channel proxy for system table when interrupted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17663&quot;&gt;&lt;del&gt;CASSANDRA-17663&lt;/del&gt;&lt;/a&gt; mean that &lt;tt&gt;BulkLoader&lt;/tt&gt; initializes the schema/system keyspace, which is not what we want in a tool. Initialization is due to a call to &lt;tt&gt;SystemKeyspace.getPreferredIP&lt;/tt&gt; from the &lt;tt&gt;BulkLoader&lt;/tt&gt; when it starts to transmit the SSTables from the bulk loader to the Cassandra instance.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;getPreferredIP:1063, SystemKeyspace (org.apache.cassandra.db)
sendMessage:213, StreamingMultiplexedChannel (org.apache.cassandra.streaming.async)
sendControlMessage:191, StreamingMultiplexedChannel (org.apache.cassandra.streaming.async)
sendControlMessage:1033, StreamSession (org.apache.cassandra.streaming)
startStreamingFiles:1257, StreamSession (org.apache.cassandra.streaming)
prepareSynAck:802, StreamSession (org.apache.cassandra.streaming)
messageReceived:622, StreamSession (org.apache.cassandra.streaming)
run:76, StreamDeserializingTask (org.apache.cassandra.streaming)
run:30, FastThreadLocalRunnable (io.netty.util.concurrent)
run:748, Thread (java.lang)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The existing &lt;tt&gt;BulkLoaderTest&lt;/tt&gt; fails to detect this as it doesn&apos;t actually connect to anything so does not initialize streaming.&lt;/p&gt;

&lt;p&gt;Affects 4.1 and trunk, and may affect 4.0, although the 4.0 patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17663&quot; title=&quot;Ensure FileStreamTask cannot compromise shared channel proxy for system table when interrupted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17663&quot;&gt;&lt;del&gt;CASSANDRA-17663&lt;/del&gt;&lt;/a&gt; is different than 4.1+, and may require different mitigation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13470389">CASSANDRA-17740</key>
            <summary>BulkLoader tool initializes schema unnecessarily via streaming</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="maedhroz">Caleb Rackliffe</assignee>
                                    <reporter username="maedhroz">Caleb Rackliffe</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jul 2022 16:26:55 +0000</created>
                <updated>Tue, 12 Sep 2023 13:03:07 +0000</updated>
                            <resolved>Fri, 5 Aug 2022 20:51:48 +0000</resolved>
                                        <fixVersion>4.1-beta1</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>Tool/bulk load</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7800">2h 10m</timespent>
                                <comments>
                            <comment id="17575559" author="maedhroz" created="Fri, 5 Aug 2022 04:30:28 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;branch&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tests&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1769&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra?branch=CASSANDRA-17740-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra?branch=CASSANDRA-17740-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;UPDATE: J8 upgrade tests will be fine after we get a fix for the checkstyle violations from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17777&quot; title=&quot;Skip sstable startup checks for dropped system tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17777&quot;&gt;&lt;del&gt;CASSANDRA-17777&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17575944" author="jonmeredith" created="Fri, 5 Aug 2022 16:30:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17576036" author="maedhroz" created="Fri, 5 Aug 2022 19:50:22 +0000"  >&lt;p&gt;Tests look green, w/ the exception of existing issues, like&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17573&quot; title=&quot;Fix test org.apache.cassandra.distributed.test.PaxosRepairTest#paxosRepairVersionGate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17573&quot;&gt;&lt;del&gt;CASSANDRA-17573&lt;/del&gt;&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17804&quot; title=&quot;AutoSnapshotTtlTest#testAutoSnapshotTTlOnDropAfterRestart fails sporadically on missing stdout contents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17804&quot;&gt;&lt;del&gt;CASSANDRA-17804&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17576046" author="maedhroz" created="Fri, 5 Aug 2022 20:51:48 +0000"  >&lt;p&gt;4.1 - &lt;a href=&quot;https://github.com/apache/cassandra/commit/5e39c54678b0d70145b5c699593eb9ce7fa7706a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/5e39c54678b0d70145b5c699593eb9ce7fa7706a&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;trunk - &lt;a href=&quot;https://github.com/apache/cassandra/commit/881b08f7015a4342833079e648e478526cc3b31a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/881b08f7015a4342833079e648e478526cc3b31a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17704396" author="JIRAUSER299507" created="Fri, 24 Mar 2023 01:19:24 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt;, is there a plan to backport the fix to 4.0 branch? We are hitting this issue w/ 4.0.7. Thanks.&lt;/p&gt;</comment>
                            <comment id="17704652" author="maedhroz" created="Fri, 24 Mar 2023 14:53:38 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yijunm_ts&quot; class=&quot;user-hover&quot; rel=&quot;yijunm_ts&quot;&gt;yijunm_ts&lt;/a&gt;. Do you mind creating a new Jira and assigning it to me? I can take a look at it, but the 4.0 mitigation might look a little different than the 4.1/trunk patch.&lt;/p&gt;</comment>
                            <comment id="17705825" author="JIRAUSER299507" created="Tue, 28 Mar 2023 06:15:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt; Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18370&quot; title=&quot;BulkLoader tool initializes schema unnecessarily via streaming - 4.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18370&quot;&gt;&lt;del&gt;CASSANDRA-18370&lt;/del&gt;&lt;/a&gt; and assigned it to you. TIA.&lt;/p&gt;

&lt;p&gt;Yes, we took a look at the 4.1/trunk patch and realized that it is not that straightforward to bring it to 4.0 branch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13446872">CASSANDRA-17663</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13530347">CASSANDRA-18370</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[maedhroz]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12984" cascade-level=""><![CDATA[Degradation]]></customfieldvalue>
                                <customfieldvalue key="12995" cascade-level="1"><![CDATA[Resource Management]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12977"><![CDATA[Adhoc Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16nqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jmeredithco]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12350145">4.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/5e39c54678b0d70145b5c699593eb9ce7fa7706a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/5e39c54678b0d70145b5c699593eb9ce7fa7706a&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Make sure existing tests aren&apos;t disturbed.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>