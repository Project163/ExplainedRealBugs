<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:11:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14571] Fix race condition in MV build/propagate when there is existing data in the base table</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14571</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13426&quot; title=&quot;Make all DDL statements idempotent and not dependent on global state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13426&quot;&gt;&lt;del&gt;CASSANDRA-13426&lt;/del&gt;&lt;/a&gt; exposed a race in MV initialisation and building, which now breaks, consistently, &lt;tt&gt;materialized_views_test.py::TestMaterializedViews::test_populate_mv_after_insert_wide_rows&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14168&quot; title=&quot;Throw error when attempting to mutate non-existant table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14168&quot;&gt;&lt;del&gt;CASSANDRA-14168&lt;/del&gt;&lt;/a&gt; is also directly related.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13172697">CASSANDRA-14571</key>
            <summary>Fix race condition in MV build/propagate when there is existing data in the base table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="aleksey">Aleksey Yeschenko</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Jul 2018 15:44:21 +0000</created>
                <updated>Thu, 4 Jun 2020 12:34:01 +0000</updated>
                            <resolved>Fri, 20 Jul 2018 08:55:11 +0000</resolved>
                                        <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Feature/Materialized Views</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16547114" author="iamaleksey" created="Tue, 17 Jul 2018 21:15:14 +0000"  >&lt;p&gt;Also related - as in found while working on this ticket - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14574&quot; title=&quot;Incomplete handling of exceptions when decoding incoming messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14574&quot;&gt;&lt;del&gt;CASSANDRA-14574&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16549702" author="djoshi3" created="Thu, 19 Jul 2018 19:04:33 +0000"  >&lt;p&gt;I recommend marking this test as an expected failure until this ticket is fixed. Having tests fail and then ignored causes confusion&#160;(See:&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14574&quot; title=&quot;Incomplete handling of exceptions when decoding incoming messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14574&quot;&gt;&lt;del&gt;CASSANDRA-14574&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13426&quot; title=&quot;Make all DDL statements idempotent and not dependent on global state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13426&quot;&gt;&lt;del&gt;CASSANDRA-13426&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@xfail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Should be addressed with CASSANDRA-14571&quot;&lt;/span&gt;)
def test_populate_mv_after_insert_wide_rows(self):&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That way the test will still be run and still be included in the report but it wont fail the test suite. This is better than just ignoring dtest run failures.&lt;/p&gt;</comment>
                            <comment id="16550054" author="iamaleksey" created="Fri, 20 Jul 2018 00:19:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=beobal&quot; class=&quot;user-hover&quot; rel=&quot;beobal&quot;&gt;beobal&lt;/a&gt; Pushed the branch &lt;a href=&quot;https://github.com/iamaleksey/cassandra/commits/14571-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Had CircleCI run all three jobs multiple times. Examples &lt;a href=&quot;https://circleci.com/gh/iamaleksey/cassandra/465&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, &lt;a href=&quot;https://circleci.com/gh/iamaleksey/cassandra/467&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, and &lt;a href=&quot;https://circleci.com/gh/iamaleksey/cassandra/462&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, and more where it came from.&lt;/p&gt;

&lt;p&gt;It&apos;s a tiny patch, it makes a best-effort attempt at waiting for schema to converge. If it fails, it just logs. Hard-throwing caused some other MV-related tests to time out occasionally, sadly.&lt;/p&gt;

&lt;p&gt;If you can review it (it&apos;s really small, I promise) or maybe even commit, with whatever changes you feel necessary, tomorrow - I&apos;ll super appreciate it (I&apos;ll be away, but trunk dtests never rest and will keep falling until this gets in).&lt;/p&gt;

&lt;p&gt;Cheers (:&lt;/p&gt;</comment>
                            <comment id="16550530" author="beobal" created="Fri, 20 Jul 2018 08:55:11 +0000"  >&lt;p&gt;LGTM, committed to trunk in &lt;tt&gt;13150b001a8ddf82a77ac9525c446b7e9e32325c&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17125887" author="bereng" created="Thu, 4 Jun 2020 12:34:01 +0000"  >&lt;p&gt;Looking at 4.0 test failures this one was failing again. There is still a window for schema agreement to happen but the view not be available yet in some nodes. Marking the flaky test in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15855&quot; title=&quot;Mark test_populate_mv_after_insert_wide_rows as flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15855&quot;&gt;&lt;del&gt;CASSANDRA-15855&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15845&quot; title=&quot;MV schema version update race&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15845&quot;&gt;CASSANDRA-15845&lt;/a&gt; to address that root cause eventually. #justfyi&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13308898">CASSANDRA-15845</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vzg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>samt</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>