<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:37:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4795] replication, compaction, compression? options are not validated</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4795</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When creating a keyspace and specifying strategy options, you can pass any k/v pair you like.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12611434">CASSANDRA-4795</key>
            <summary>replication, compaction, compression? options are not validated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dbrosius">David Brosius</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Oct 2012 21:21:38 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:25 +0000</updated>
                            <resolved>Tue, 5 Mar 2013 11:05:28 +0000</resolved>
                                        <fixVersion>1.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13474522" author="jbellis" created="Thu, 11 Oct 2012 21:22:54 +0000"  >&lt;p&gt;We&apos;ve been WARNing about bad options since 1.1.1 (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4046&quot; title=&quot;when creating keyspace with simple strategy, it should only acception &amp;quot;replication_factor&amp;quot; as an option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4046&quot;&gt;&lt;del&gt;CASSANDRA-4046&lt;/del&gt;&lt;/a&gt;) so I would think making it stricter would be fair game for 1.2.&lt;/p&gt;</comment>
                            <comment id="13474579" author="brandon.williams" created="Thu, 11 Oct 2012 22:46:58 +0000"  >&lt;p&gt;I didn&apos;t realize we were warning about it already.  It&apos;s probably better to leave it at that since we&apos;ve allowed this for so long in case someone is relying on it.&lt;/p&gt;</comment>
                            <comment id="13474596" author="jbellis" created="Thu, 11 Oct 2012 23:01:04 +0000"  >&lt;p&gt;I still want to fix it &amp;#8211; as we found out today, it&apos;s definitely confusing when you think an option belongs to replication strategy but it actually belongs to the keyspace &amp;#8211; but we can push it out past 1.2.&lt;/p&gt;</comment>
                            <comment id="13488083" author="slebresne" created="Wed, 31 Oct 2012 18:50:57 +0000"  >&lt;p&gt;I think that ticket was initially targeting the replication strategy, but there is also a lack of validation for the compaction strategies. In that case, we don&apos;t even validate that the value of a know option is correct (or rather, for some of the options we log a warning in the log but just carry on, and AbstractCompactionStrategy.tombstoneThreshold is not validated at all. I do not that in the case of the compaction strategy, we don&apos;t currently build the compaction strategy until it&apos;s actually needed (i.e. when migration are apply), so we shouldn&apos;t &quot;just&quot; throw an exception in the constructor: we need to do as we do for the replication strategy in CreateKeyspaceStatement, i.e. do a trial run of building the strategy to make sure everything&apos;s ok. &lt;/p&gt;

&lt;p&gt;I do think we should correctly validate options (and by that I mean doing more than a warning in the log) for both replication and compaction strategy for 1.2. At least we should do it for CQL3 if we&apos;ve extremely afraid of breaking thrift (but I don&apos;t really buy that people would rely on our lack of validation).  &lt;/p&gt;</comment>
                            <comment id="13495089" author="jbellis" created="Mon, 12 Nov 2012 05:02:56 +0000"  >&lt;p&gt;Can you take a stab at Sylvain&apos;s proposal, Dave?&lt;/p&gt;</comment>
                            <comment id="13507828" author="dbrosius" created="Sat, 1 Dec 2012 01:47:50 +0000"  >&lt;p&gt;oops, just saw this...&lt;/p&gt;

&lt;p&gt;part1, replication strategy validation&lt;br/&gt;
4795.replication_strategy.txt&lt;/p&gt;

&lt;p&gt;(more to come)&lt;/p&gt;</comment>
                            <comment id="13547832" author="slebresne" created="Wed, 9 Jan 2013 10:20:18 +0000"  >&lt;p&gt;+1 on part1, committed).&lt;/p&gt;

&lt;p&gt;Dave, are you still planning on working on the compaction and compression validation? &lt;/p&gt;</comment>
                            <comment id="13550882" author="dbrosius" created="Fri, 11 Jan 2013 06:29:29 +0000"  >&lt;p&gt;yeah, sorry. fell asleep at the wheel.&lt;/p&gt;</comment>
                            <comment id="13553475" author="dbrosius" created="Tue, 15 Jan 2013 04:28:37 +0000"  >&lt;p&gt;so, for compaction options, it appears to me that you can&apos;t create a CompactionStrategy object to do validation, because the ColumnFamilyStore needs to exist for the ACS constructor, which means it&apos;s too late to safe guard invalid options, right?&lt;/p&gt;

&lt;p&gt;The validation would need to be in CFMetaData i think, and CFMetaData would validate options needed by fetching the valid set from a static call thru reflection on the compactionStrategyClass....&lt;/p&gt;

&lt;p&gt;which seems ugly... so am i missing something easier?&lt;/p&gt;</comment>
                            <comment id="13553488" author="jbellis" created="Tue, 15 Jan 2013 04:59:14 +0000"  >&lt;p&gt;What if we required a static &lt;tt&gt;validate&lt;/tt&gt; method on ACS subclasses that we call with the options and maybe CFMetaData?  Ugly, since there&apos;s no polymorphism on statics, but since we&apos;re doing ACS creation via reflection anyway it&apos;s not really a problem.&lt;/p&gt;

&lt;p&gt;Edit: which is pretty much what you suggested with the difference being where the logic lives.  Either way WFM.&lt;/p&gt;</comment>
                            <comment id="13553498" author="dbrosius" created="Tue, 15 Jan 2013 05:22:41 +0000"  >&lt;p&gt;the &apos;right&apos;?? solution perhaps is to remove the cfs from AbstractCompactionStrategy ctor, and instead pass it into the various methods that need it. Problem there is that you&apos;d need a &apos;postCreateInitialize(ColumnFamilyStore cfs)&apos; on ACS, as SizeTiered and Leveled do things with cfs in the ctor, that would need to move to that method.&lt;/p&gt;

&lt;p&gt;It would also break backwards compatibility with potential client ACS&apos;s.&lt;/p&gt;</comment>
                            <comment id="13553504" author="jbellis" created="Tue, 15 Jan 2013 05:29:19 +0000"  >&lt;p&gt;That&apos;s what I thought at first but ACS is free to maintain state as well, e.g. LCS&apos;s manifest.  It would suck to turn those all into Map&amp;lt;CFS, X&amp;gt;.  Alternativley you could split off the construction into a StrategyFactory, which IMO is clunkier than the reflection idea.&lt;/p&gt;</comment>
                            <comment id="13553511" author="dbrosius" created="Tue, 15 Jan 2013 05:34:16 +0000"  >&lt;p&gt;ok, and just fail with ConfigurationException if that static method doesn&apos;t exist?&lt;/p&gt;</comment>
                            <comment id="13553517" author="jbellis" created="Tue, 15 Jan 2013 05:43:19 +0000"  >&lt;p&gt;I&apos;d no-op it for backwards compatibility with user-provided ACS implementations.&lt;/p&gt;</comment>
                            <comment id="13553568" author="dbrosius" created="Tue, 15 Jan 2013 07:25:43 +0000"  >&lt;p&gt;validate compaction options. in 4795.compaction_strategy.txt&lt;/p&gt;

&lt;p&gt;pretty ugly... if you have suggestions, please do.&lt;/p&gt;</comment>
                            <comment id="13553647" author="slebresne" created="Tue, 15 Jan 2013 10:39:16 +0000"  >&lt;p&gt;On the compaction strategy patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I would move the call to &lt;tt&gt;validateCompactionOptions&lt;/tt&gt; in &lt;tt&gt;CFPropDefs.validate()&lt;/tt&gt;.  First because ALTER also need the validation and putting it in CFPropDefs handles both &quot;for free&quot;. And also because there is no guarantee that &lt;tt&gt;CFPropDefs.compactionStrategyClass&lt;/tt&gt; won&apos;t be &lt;tt&gt;null&lt;/tt&gt; which I think is not handled correctly by the patch (and moving things to &lt;tt&gt;CFPropDefs.validate()&lt;/tt&gt; makes it easier to deal with).&lt;/li&gt;
	&lt;li&gt;We should not only validate that there is no unknown option provided, but we should also move the validation of the options themselves from the ctors to the validateOptions method. Also, I&apos;d prefer adding a validateOptions to AbstractCompactionStrategy to handle the tombstone related option and have subclasses call that method explicitly rather than handling everything in the sublcasses.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13560359" author="dbrosius" created="Wed, 23 Jan 2013 03:19:29 +0000"  >&lt;p&gt;not sure where CFPropDefs.validate gets used with cql3&lt;/p&gt;

&lt;p&gt;ah, never mind. two CFPropDefs.&lt;/p&gt;</comment>
                            <comment id="13560541" author="slebresne" created="Wed, 23 Jan 2013 10:23:30 +0000"  >&lt;p&gt;Patch looks good but a few remaining remarks/nits:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I think the comment in AbstractCompactionStrategy ctor is a bit confusing as we don&apos;t really fully repeat all the &quot;checks&quot; (we don&apos;t catch NumberFormatException nor validate the tombstoneThreshold value). So I agree we should probably repeat the checks, but let&apos;s repeat them fully.&lt;/li&gt;
	&lt;li&gt;In SizeTiered validation, we might want to catch NumberFormatException.&lt;/li&gt;
	&lt;li&gt;Since validateOptions is supposed to return a map of the options it don&apos;t know about, let&apos;s maybe check it&apos;s empty at the end of CFMetaData.validateCompactionOptions and get rid of the individual checks in Leveled and SizeTiered (which avoid needing VALID_OPTIONS).&lt;/li&gt;
	&lt;li&gt;Might I suggest adding a few static getInt(map, property_name, defaut_value), getDouble, ... helper methods to simplify stuff like
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;try
{
    String optionValue = options.get(MIN_SSTABLE_SIZE_KEY);
    long minSSTableSize = optionValue == null ? DEFAULT_MIN_SSTABLE_SIZE : Long.parseLong(optionValue);
}
catch (NumberFormatException e)
{
    ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;In cql3.CFPropDefs, we should move the validateCompactionOptions line inside the preceding &apos;if&apos; statement.&lt;/li&gt;
	&lt;li&gt;In cql3.CreateColumnFamilyStatement, let&apos;s remove the validate method override since it&apos;s not doing anything.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As a side note, there&apos;s a bit too much line changed not related to the patch to my taste. I understand this is your editor doing that automatically, but while reordering imports is ok, removing static imports to inline the class name in the code (in CFMetaData) is less justified imo.&lt;/p&gt;</comment>
                            <comment id="13560671" author="dbrosius" created="Wed, 23 Jan 2013 13:27:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;Since validateOptions is supposed to return a map of the options it don&apos;t know about, let&apos;s maybe check it&apos;s empty at the end of CFMetaData.validateCompactionOptions and get rid of the individual checks in Leveled and SizeTiered (which avoid needing VALID_OPTIONS).&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;If user supplied compaction strategies derive from these classes, that won&apos;t work.&lt;/p&gt;</comment>
                            <comment id="13560678" author="slebresne" created="Wed, 23 Jan 2013 13:40:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;If user supplied compaction strategies derive from these classes&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why? tTe contract of validateOptions would be that it should return a list with &lt;b&gt;only&lt;/b&gt; the options it doesn&apos;t know about (which is kind of what it is supposed to do (and does) in your patch already anyway). Thus if a user supplied compaction derives from an existing one, it would have to either 1) return an empty map if he wants to ignore on purpose options or 2) call the super class validateOptions first (which is what Leveled and SizeTiered do with AbstractStrategy). Of course, in the case where the compaction strategy do not implement a validateOptions, we should skip the check for invalid options, but that&apos;s no different from what the patch does now.&lt;/p&gt;</comment>
                            <comment id="13560740" author="dbrosius" created="Wed, 23 Jan 2013 15:19:27 +0000"  >&lt;p&gt;yeah, your right. i shouldn&apos;t form opinions early in the morning.&lt;/p&gt;</comment>
                            <comment id="13561765" author="slebresne" created="Thu, 24 Jan 2013 17:05:57 +0000"  >&lt;p&gt;Alright, +1, committed (I did move the unrecognized option check inside CFMetadata so all interface gets it).&lt;/p&gt;</comment>
                            <comment id="13575964" author="xedin" created="Mon, 11 Feb 2013 18:55:22 +0000"  >&lt;p&gt;Ok, so changing this in 1.2.1 probably was a bit unfair to people, because e.g. Titan relies on providing custom strategy option &apos;titan-version&apos; and it can&apos;t do custom strategy because there is no control of what version people install, can we please start warning people about unrecognized options in the strategy again instead of restricting them, because those options are sometimes very convenient to safe meta-information.&lt;/p&gt;</comment>
                            <comment id="13576021" author="xedin" created="Mon, 11 Feb 2013 19:29:16 +0000"  >&lt;p&gt;Also, All of the old users how were adding custom properties to replication strategy (at least) wouldn&apos;t be able to start-up after upgrade to 1.2.1 because validation is also done on Table initialization.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: org.apache.cassandra.exceptions.ConfigurationException: Unrecognized strategy option {titan-version} passed to SimpleStrategy for keyspace titan
	at org.apache.cassandra.db.Table.&amp;lt;init&amp;gt;(Table.java:269)
	at org.apache.cassandra.db.Table.open(Table.java:110)
	at org.apache.cassandra.db.Table.open(Table.java:88)
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:223)
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:379)
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:422)
Caused by: org.apache.cassandra.exceptions.ConfigurationException: Unrecognized strategy option {titan-version} passed to SimpleStrategy for keyspace titan
	at org.apache.cassandra.locator.AbstractReplicationStrategy.validateExpectedOptions(AbstractReplicationStrategy.java:281)
	at org.apache.cassandra.locator.SimpleStrategy.validateOptions(SimpleStrategy.java:72)
	at org.apache.cassandra.locator.AbstractReplicationStrategy.createReplicationStrategy(AbstractReplicationStrategy.java:234)
	at org.apache.cassandra.db.Table.createReplicationStrategy(Table.java:288)
	at org.apache.cassandra.db.Table.&amp;lt;init&amp;gt;(Table.java:265)
	... 5 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13576438" author="slebresne" created="Tue, 12 Feb 2013 07:26:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;changing this in 1.2.1 probably was a bit unfair to people&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you mean &quot;in a minor release&quot;, then I agree, mea culpa.&lt;/p&gt;

&lt;p&gt;But on the principle, I disagree that we should allow people to shove random metadata in the stategy options. Especially because that means not validating correctly the actual strategy options (and no, warning in the log is not a good enough because 1) application developer may not have easy access to the server log and 2) asking people to check the server log when they do query to see if they hadn&apos;t mispelled some option is a ridiculously bad user experience).&lt;/p&gt;

&lt;p&gt;If application want to store data, they should create a column family and store data in there. But to be clear, I&apos;m open to discussing adding some new application_metadata field to the column family metadata that would explicitely be uninterpreted by Cassandra (not that I&apos;m particularly thrilled by the idea, but I&apos;m at least open to it), but the strategy options is just not the right place for that.&lt;/p&gt;

&lt;p&gt;So I&apos;m fine reverting this from 1.2 (in which case I&apos;d still prefer keeping the validation at least on the CQL3 side), not so much from trunk.&lt;/p&gt;</comment>
                            <comment id="13576440" author="xedin" created="Tue, 12 Feb 2013 07:42:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;If you mean &quot;in a minor release&quot;, then I agree, mea culpa.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s exactly what I mean.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;1) application developer may not have easy access to the server log 2) asking people to check the server log when they do query to see if they hadn&apos;t mispelled some option is a ridiculously bad user experience&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If the original intention was to protect people from mistypes then maybe we need to put more work and throw exception only if typed in is similar to what it should be, like git does e.g. &quot;option rplicatian_factor is not recognized maybe you mean &apos;replication_factor&apos;?&quot; ? Requiring those options to be typed in by the user especially with such a long names that we have already is a &quot;ridiculously bad user experience&quot;, especially when those names/options change frequently between releases.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If application want to store data, they should create a column family and store data in there. But to be clear, I&apos;m open to discussing adding some new application_metadata field to the column family metadata that would explicitely be uninterpreted by Cassandra (not that I&apos;m particularly thrilled by the idea, but I&apos;m at least open to it), but the strategy options is just not the right place for that.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So in the case of Titan when they just want to save one &apos;last seen version&apos; attribute, creating a separate column family or even having that per-cf doesn&apos;t make any sense but it&apos;s pretty convenient to keep it in the keypsace strategy options (without have any other alternatives) because it&apos;s not updated or even read that often.&lt;/p&gt;</comment>
                            <comment id="13576449" author="slebresne" created="Tue, 12 Feb 2013 08:00:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;If the original intention was to protect people from mistypes&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How can that &lt;b&gt;not&lt;/b&gt; be one&apos;s intent?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;like git does e.g. &quot;option rplicatian_factor is not recognized maybe you mean &apos;replication_factor&apos;?&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, that would be great: &quot;reject errors with fix suggestion in the error message&quot; is indeed even better than &quot;reject errors&quot; that is itself better than &quot;not reject errors silently&quot;. So be my guest, do open a ticket to do even better than what this patch does. But that patch is still progress.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;it&apos;s pretty convenient to keep it in the keypsace strategy options (without have any other alternatives)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Again, I&apos;m ok talking about alternatives that would be right if there is a need, but you will not convince me that &quot;shoving random application data inside the strategy options&quot; is right, or even a good idea.&lt;/p&gt;</comment>
                            <comment id="13576457" author="xedin" created="Tue, 12 Feb 2013 08:17:43 +0000"  >&lt;p&gt;I don&apos;t think this is about right or wrong but rather about living by means instead of re-inventing broken bicycle. I&apos;m not arguing or trying to convince, I&apos;m simply saying that committed patch made situation even worse and it should be reconsidered all together. Also, if somebody ever had mistyped and didn&apos;t fix or used unrecognized attributes in replication strategy or compaction, after upgrade to 1.2.1 Cassandra just &lt;b&gt;wouldn&apos;t start up&lt;/b&gt; which is also a &quot;ridiculously bad user experience&quot;, this is why I think this patch should be reverted.&lt;/p&gt;

&lt;p&gt;Edit: I think that concerns DSE as well, because AFAIK they used custom attributes in the compaction strategy as well as in keyspace replication.&lt;/p&gt;</comment>
                            <comment id="13576569" author="slebresne" created="Tue, 12 Feb 2013 12:02:01 +0000"  >&lt;p&gt;I&apos;m a little bit confused about what you are trying to say. If you&apos;re saying we&apos;ve broke stuff in a minor release, it&apos;s bad, we should revert the breakage, then I though I had made it pretty clear that I agree. But for 2.0 onwards, allowing to store random data in the replication strategy option &lt;b&gt;is&lt;/b&gt; wrong: it doesn&apos;t even work with NTS (which will interpret the random data as a datacenter).&lt;/p&gt;

&lt;p&gt;But anyway, less arguing more doing, I&apos;m attaching patches that do the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;patch 00001 re-allow unknown options in the replication strategy options on the thrift side (but not for CQL3 as I doubt there is any legacy CQL3 app using this since CQL3 is kind of new). It also allows startup if there was unknown options in the first place (that part was definitevely an oversight, the compaction strategy is clearly making sure to only log a warning in that case for instance).&lt;/li&gt;
	&lt;li&gt;patch 00002 does the same for the compaction strategy.&lt;/li&gt;
	&lt;li&gt;patch 00003 is my suggestion for an alternative to the problem &quot;I want to attach some tiny piece of metadata to a keyspace and creating a CF for that is overkill&quot; (for that patch the thrift file must be regen but I don&apos;t attach that). Could totally go into a separate ticket.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Those patches are against 1.2 but to be clear, my intent is to keep disallowing unknown options even for thrift in trunk.&lt;/p&gt;</comment>
                            <comment id="13576690" author="jbellis" created="Tue, 12 Feb 2013 15:36:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;So in the case of Titan when they just want to save one &apos;last seen version&apos; attribute, creating a separate column family or even having that per-cf doesn&apos;t make any sense but it&apos;s pretty convenient to keep it in the keypsace strategy options (without have any other alternatives) because it&apos;s not updated or even read that often.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No doubt everyone practicing this extremely awful hack has a perfectly good excuse. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;But fundamentally creating a last_seen_versions table with cfname (ksname?) is simply not that onerous and is the Right Thing To Do.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;patch 00003 is my suggestion for an alternative to the problem &quot;I want to attach some tiny piece of metadata to a keyspace and creating a CF for that is overkill&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;-1 from me, I get that change is painful for people who are abusing schema right now but we really shouldn&apos;t be encouraging this.&lt;/p&gt;</comment>
                            <comment id="13577119" author="xedin" created="Tue, 12 Feb 2013 22:33:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;But fundamentally creating a last_seen_versions table with cfname (ksname?) is simply not that onerous and is the Right Thing To Do.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For that specific case it&apos;s actually not worth it because it&apos;s always a single version as there is no reason to keep older version around, so creating separate CF for one row with empty value is overkill as specially as it&apos;s even not read that often and query wouldn&apos;t be as convenient as it was with describe keyspace for that single piece of data.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;-1 from me, I get that change is painful for people who are abusing schema right now but we really shouldn&apos;t be encouraging this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s usually one/two attributes that go there so I think it&apos;s pretty convenient to store it that way instead of dealing with separate CF/querying, but I&apos;m welcome to new ideas&lt;/p&gt;</comment>
                            <comment id="13577121" author="jbellis" created="Tue, 12 Feb 2013 22:39:14 +0000"  >&lt;p&gt;Show me an existing database that lets you attach random crap to a table definition and I will reconsider my position. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13577397" author="slebresne" created="Wed, 13 Feb 2013 08:03:45 +0000"  >&lt;p&gt;Do we agree on the first 2 patches in the meantime?&lt;/p&gt;</comment>
                            <comment id="13590518" author="slebresne" created="Fri, 1 Mar 2013 13:38:33 +0000"  >&lt;p&gt;So, does the absence of review of my 2 first patches mean that everyone decided the status quo was ok? Cause I could live with that. But if we think this should be reverted from 1.2 then let&apos;s do that sooner than later.&lt;/p&gt;</comment>
                            <comment id="13590852" author="xedin" created="Fri, 1 Mar 2013 19:24:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;Show me an existing database that lets you attach random crap to a table definition and I will reconsider my position. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What is HBase?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So, does the absence of review of my 2 first patches mean that everyone decided the status quo was ok? Cause I could live with that. But if we think this should be reverted from 1.2 then let&apos;s do that sooner than later.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m fine with those, I&apos;m fine even with removing those as soon as system doesn&apos;t crap on startup.&lt;/p&gt;</comment>
                            <comment id="13592395" author="jbellis" created="Mon, 4 Mar 2013 17:39:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m fine with those&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To clarify, is that &quot;I&apos;m fine in principle&quot; or &quot;I&apos;ve reviewed it, +1?&quot;&lt;/p&gt;</comment>
                            <comment id="13592621" author="xedin" created="Mon, 4 Mar 2013 20:52:42 +0000"  >&lt;p&gt;I&apos;ve reviewed those two, +1.&lt;/p&gt;</comment>
                            <comment id="13593322" author="slebresne" created="Tue, 5 Mar 2013 11:05:28 +0000"  >&lt;p&gt;Alright. I committed the 2 first patch. For trunk however, I&apos;ve kept the behavior of rejecting unknown options (though Cassandra won&apos;t refuse to start if there is unknown option in the first place), and I&apos;ve added a proper not in the NEWS file for that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12568965" name="0001-Reallow-unexpected-strategy-options-for-thrift.txt" size="20126" author="slebresne" created="Tue, 12 Feb 2013 12:02:01 +0000"/>
                            <attachment id="12568966" name="0002-Reallow-unexpected-strategy-options-for-thrift.txt" size="4837" author="slebresne" created="Tue, 12 Feb 2013 12:02:01 +0000"/>
                            <attachment id="12568967" name="0003-Adds-application_metadata-field-to-ks-metadata.txt" size="15982" author="slebresne" created="Tue, 12 Feb 2013 12:02:01 +0000"/>
                            <attachment id="12564894" name="4795.compaction_strategy.txt" size="16515" author="dbrosius" created="Tue, 15 Jan 2013 07:24:51 +0000"/>
                            <attachment id="12555602" name="4795.replication_strategy.txt" size="4914" author="dbrosius" created="Sat, 1 Dec 2012 01:48:52 +0000"/>
                            <attachment id="12566094" name="4795_compaction_strategy_v2.txt" size="29718" author="dbrosius" created="Wed, 23 Jan 2013 05:53:09 +0000"/>
                            <attachment id="12566255" name="4795_compaction_strategy_v3.txt" size="19040" author="dbrosius" created="Thu, 24 Jan 2013 05:59:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dbrosius]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08pxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>xedin</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>