<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:20:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2409] Add INSERT support to CQL</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2409</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;There are two reasons to support INSERT:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;It helps new users feel comfortable (everyone&apos;s first statement will be to try to INSERT something, we should make that a positive experience instead of slapping them)&lt;/li&gt;
	&lt;li&gt;Even though it is synonymous with update it is still useful in your code to have both to help communicate intent, similar to choosing good variable names&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The only downside is explaining how INSERT isn&apos;t a &quot;true&quot; insert because it doesn&apos;t error out if the row already exists &amp;#8211; but we already have to explain that same concept for UPDATE; the cognitive load is extremely minor.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12503053">CASSANDRA-2409</key>
            <summary>Add INSERT support to CQL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xedin">Pavel Yaskevich</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Mar 2011 18:13:08 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:03 +0000</updated>
                            <resolved>Mon, 4 Apr 2011 20:05:45 +0000</resolved>
                                        <fixVersion>0.8 beta 1</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13014136" author="urandom" created="Thu, 31 Mar 2011 18:45:37 +0000"  >&lt;p&gt;I don&apos;t think this is a good idea. &lt;tt&gt;UPDATE&lt;/tt&gt; already has semantics that are going to be a surprise to folks coming from SQL. Implementing &lt;tt&gt;INSERT&lt;/tt&gt; to have identical semantics is going to be (IMO) more surprising still, not less.&lt;/p&gt;

&lt;p&gt;But, I don&apos;t want to get wrapped up in a protracted debate about it, so I&apos;ll leave this as &quot;-0&quot;, and let you guys carry-on as you see fit.&lt;/p&gt;

&lt;p&gt;P.S. Please don&apos;t wait too long, the freeze is looming.&lt;/p&gt;</comment>
                            <comment id="13014139" author="xedin" created="Thu, 31 Mar 2011 18:50:34 +0000"  >&lt;p&gt;Maybe I have a solution which will satisfy both sides - we can just make INSERT as an alias for UPDATE, so no need to implement anything just a simple change in the grammar, what do you think? &lt;/p&gt;</comment>
                            <comment id="13014867" author="urandom" created="Fri, 1 Apr 2011 23:04:57 +0000"  >&lt;p&gt;I don&apos;t think this what Jonathan is after, he&apos;s looking for the equivalent of SQL&apos;s &lt;tt&gt;INSERT&lt;/tt&gt;. For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;INSERT INTO cf (foo, bar, baz) VALUES (1, 20 300) WHERE KEY = fnord;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13014904" author="jbellis" created="Sat, 2 Apr 2011 00:56:29 +0000"  >&lt;p&gt;Close.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;INSERT INTO cf (KEY, foo, bar, baz) VALUES (fnord, 1, 20 300);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13015052" author="xedin" created="Sat, 2 Apr 2011 17:09:04 +0000"  >&lt;p&gt;Format:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INSERT INTO
    &amp;lt;CF&amp;gt;
    (KEY, &amp;lt;column&amp;gt;, &amp;lt;column&amp;gt;, ...)
VALUES
    (&amp;lt;key&amp;gt;, &amp;lt;value&amp;gt;, &amp;lt;value&amp;gt;, ...)
(USING
  CONSISTENCY &amp;lt;level&amp;gt;)?;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Consistency level is set to ONE by default&lt;/p&gt;</comment>
                            <comment id="13015055" author="xedin" created="Sat, 2 Apr 2011 17:10:58 +0000"  >&lt;p&gt;Only thing for you, Eric, to change is exception message when column names size not equal to values size...&lt;/p&gt;</comment>
                            <comment id="13015065" author="urandom" created="Sat, 2 Apr 2011 18:40:32 +0000"  >&lt;p&gt;Thanks Pavel, I&apos;ll have a look at it and get back to you.&lt;/p&gt;</comment>
                            <comment id="13015523" author="urandom" created="Mon, 4 Apr 2011 18:08:04 +0000"  >&lt;p&gt;Attached is an updated version of the patch that refactors things a bit.  The biggest problem here is that we need to raise Thrift exceptions.&lt;/p&gt;

&lt;p&gt;Also included is some minimal system tests.&lt;/p&gt;</comment>
                            <comment id="13015547" author="xedin" created="Mon, 4 Apr 2011 18:58:06 +0000"  >&lt;p&gt;Can you please explane a part about exceptions, what should be done?&lt;/p&gt;</comment>
                            <comment id="13015562" author="urandom" created="Mon, 4 Apr 2011 19:28:06 +0000"  >&lt;p&gt;If you raise a RuntimeException from the lexer or parser, it will not be propagated down to the client (it&apos;s swallowed and turned into an internal server error).&lt;/p&gt;

&lt;p&gt;If you look at the revised patch, I moved the size equality test and conversion to Map into &lt;tt&gt;UpdateStatement.getColumns()&lt;/tt&gt; where an &lt;tt&gt;InvalidRequestException&lt;/tt&gt; can be raised (everything that calls &lt;tt&gt;getColumns()&lt;/tt&gt; already throws &lt;tt&gt;InvalidRequestException&lt;/tt&gt;. &lt;/p&gt;</comment>
                            <comment id="13015567" author="xedin" created="Mon, 4 Apr 2011 19:33:33 +0000"  >&lt;p&gt;Oh, yeah, I&apos;ve seen it, thats why I wrote you to change exception... I misunderstood your previous comment and I thought that there are still problems with exceptions left...&lt;/p&gt;

&lt;p&gt;+1 on your patch.&lt;/p&gt;</comment>
                            <comment id="13015594" author="urandom" created="Mon, 4 Apr 2011 20:05:45 +0000"  >&lt;p&gt;committed; thanks Pavel!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475392" name="ASF.LICENSE.NOT.GRANTED--v1-0001-CASSANDRA-2409-CQL-INSERT-implementation.txt" size="9563" author="urandom" created="Mon, 4 Apr 2011 18:05:51 +0000"/>
                            <attachment id="12475286" name="CASSANDRA-2409.patch" size="4727" author="xedin" created="Sat, 2 Apr 2011 17:09:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gb7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93245</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>urandom</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>