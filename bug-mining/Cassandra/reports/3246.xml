<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:49:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8231] Wrong size of cached prepared statements</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8231</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Cassandra counts memory footprint of prepared statements for caching purposes. It seems, that there is problem with some statements, ie SelectStatement. Even simple selects is counted as 100KB object, updates, deletes etc have few hundreds or thousands bytes. Result is that cache - QueryProcessor.preparedStatements  - holds just fraction of statements..&lt;/p&gt;

&lt;p&gt;I dig a little into the code, and it seems that problem is in jamm in class MemoryMeter. It seems that if instance contains reference to class, it counts size of whole class too. SelectStatement references EnumSet through ResultSet.Metadata and EnumSet holds reference to Enum class...&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12751967">CASSANDRA-8231</key>
            <summary>Wrong size of cached prepared statements</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blerer">Benjamin Lerer</assignee>
                                    <reporter username="shinigami">Jaroslav Kamenik</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Oct 2014 14:03:38 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:29 +0000</updated>
                            <resolved>Fri, 21 Nov 2014 21:44:31 +0000</resolved>
                                        <fixVersion>2.1.3</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14192388" author="snazy" created="Fri, 31 Oct 2014 20:15:40 +0000"  >&lt;p&gt;Yes - too many objects are measured.&lt;/p&gt;

&lt;p&gt;It&apos;s not just instances of &lt;tt&gt;Class&lt;/tt&gt;.&lt;br/&gt;
Also instances of &lt;tt&gt;AbstractType&lt;/tt&gt;, reverse comparators of &lt;tt&gt;AbstractType&lt;/tt&gt;, &lt;tt&gt;ColumnDefinition&lt;/tt&gt;, &lt;tt&gt;Function&lt;/tt&gt; - maybe more.&lt;br/&gt;
Additionally a single object is measured as often as it is referenced.&lt;br/&gt;
I&apos;ve attached &lt;tt&gt;8231-notes.txt&lt;/tt&gt;&#160;that shows the classes that are measured (used a patched version of jamm).&lt;/p&gt;</comment>
                            <comment id="14192409" author="snazy" created="Fri, 31 Oct 2014 20:23:14 +0000"  >&lt;p&gt;Attached &lt;tt&gt;Unsafes.java&lt;/tt&gt; that I&apos;ve written some time ago to calculate heap memory occupied by any object. Although it&apos;s a bit over-designed, it solves the problem of calculating the same object instance twice.&lt;br/&gt;
In order to solve the issue of taking irrelevant fields into account, I&apos;d propose some annotation to be added to those fields - or to provide a set of classes to exclude from calculation.&lt;/p&gt;</comment>
                            <comment id="14194840" author="jbellis" created="Mon, 3 Nov 2014 18:26:22 +0000"  >&lt;p&gt;JAMM provides something similar with ObjectSizes.&lt;/p&gt;</comment>
                            <comment id="14196098" author="blerer" created="Tue, 4 Nov 2014 13:34:00 +0000"  >&lt;p&gt;The enum problem has been solved has part the JAMM issue #17 (Do not count size of referenced classes). When I use the latest version of JAMM for a query like: &lt;tt&gt;Select * from test where id = ?&lt;/tt&gt; the object graph is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;root [org.apache.cassandra.cql3.statements.SelectStatement$Parameters] 24 bytes
   |
   +--orderings [java.util.LinkedHashMap] 56 bytes
      |
      +--table [java.util.HashMap$Entry[]] 16 bytes
      |
      +--header [java.util.LinkedHashMap$Entry] 40 bytes

root [org.apache.cassandra.cql3.statements.Selection$SimpleSelection] 32 bytes
   |
   +--metadata [org.apache.cassandra.cql3.ResultSet$Metadata] 32 bytes
   |  |
   |  +--names [java.util.ArrayList] 24 bytes
   |  |  |
   |  |  +--elementData [java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]] 32 bytes
   |  |     |
   |  |     +--2 [org.apache.cassandra.config.ColumnDefinition] 48 bytes
   |  |     |  |
   |  |     |  +--type [org.apache.cassandra.db.marshal.UTF8Type] 16 bytes
   |  |     |  |  |
   |  |     |  |  +--reverseComparator [org.apache.cassandra.db.marshal.AbstractType$1] 16 bytes
   |  |     |  |
   |  |     |  +--name [org.apache.cassandra.cql3.ColumnIdentifier] 24 bytes
   |  |     |  |  |
   |  |     |  |  +--text [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] 24 bytes
   |  |     |  |  |  |
   |  |     |  |  |  +--value [&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[]] 24 bytes
   |  |     |  |  |
   |  |     |  |  +--bytes [java.nio.HeapByteBuffer] 48 bytes
   |  |     |  |     |
   |  |     |  |     +--hb [&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]] 24 bytes
   |  |     |  |
   |  |     |  +--cfName [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] 24 bytes
   |  |     |  |  |
   |  |     |  |  +--value [&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[]] 32 bytes
   |  |     |  |
   |  |     |  +--ksName [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] 24 bytes
   |  |     |  |  |
   |  |     |  |  +--value [&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[]] 64 bytes
   |  |     |  |
   |  |     |  +--componentIndex [java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;] 16 bytes
   |  |     |
   |  |     +--1 [org.apache.cassandra.config.ColumnDefinition] 48 bytes
   |  |     |  |
   |  |     |  +--type [org.apache.cassandra.db.marshal.Int32Type] 16 bytes
   |  |     |  |  |
   |  |     |  |  +--reverseComparator [org.apache.cassandra.db.marshal.AbstractType$1] 16 bytes
   |  |     |  |
   |  |     |  +--name [org.apache.cassandra.cql3.ColumnIdentifier] 24 bytes
   |  |     |     |
   |  |     |     +--text [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] 24 bytes
   |  |     |     |  |
   |  |     |     |  +--value [&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[]] 24 bytes
   |  |     |     |
   |  |     |     +--bytes [java.nio.HeapByteBuffer] 48 bytes
   |  |     |        |
   |  |     |        +--hb [&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]] 24 bytes
   |  |     |
   |  |     +--0 [org.apache.cassandra.config.ColumnDefinition] 48 bytes
   |  |        |
   |  |        +--name [org.apache.cassandra.cql3.ColumnIdentifier] 24 bytes
   |  |           |
   |  |           +--text [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] 24 bytes
   |  |           |  |
   |  |           |  +--value [&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[]] 24 bytes
   |  |           |
   |  |           +--bytes [java.nio.HeapByteBuffer] 48 bytes
   |  |              |
   |  |              +--hb [&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]] 24 bytes
   |  |
   |  +--flags [java.util.RegularEnumSet] 32 bytes
   |     |
   |     +--universe [org.apache.cassandra.cql3.ResultSet$Flag[]] 32 bytes
   |
   +--columns [java.util.ArrayList] 24 bytes
      |
      +--elementData [java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]] 32 bytes

root [org.apache.cassandra.cql3.statements.Restriction[]] 24 bytes
   |
   +--0 [org.apache.cassandra.cql3.statements.SingleColumnRestriction$EQ] 24 bytes
      |
      +--value [org.apache.cassandra.cql3.Constants$Marker] 24 bytes
         |
         +--receiver [org.apache.cassandra.config.ColumnDefinition] 48 bytes
            |
            +--type [org.apache.cassandra.db.marshal.Int32Type] 16 bytes
            |  |
            |  +--reverseComparator [org.apache.cassandra.db.marshal.AbstractType$1] 16 bytes
            |
            +--name [org.apache.cassandra.cql3.ColumnIdentifier] 24 bytes
            |  |
            |  +--text [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] 24 bytes
            |  |  |
            |  |  +--value [&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[]] 24 bytes
            |  |
            |  +--bytes [java.nio.HeapByteBuffer] 48 bytes
            |     |
            |     +--hb [&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]] 24 bytes
            |
            +--cfName [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] 24 bytes
            |  |
            |  +--value [&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[]] 32 bytes
            |
            +--ksName [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] 24 bytes
               |
               +--value [&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[]] 64 bytes

root [org.apache.cassandra.cql3.statements.Restriction[]] 16 bytes

root [java.util.HashMap] 48 bytes
   |
   +--table [java.util.HashMap$Entry[]] 16 bytes

root [java.util.HashSet] 16 bytes
   |
   +--map [java.util.HashMap] 48 bytes
      |
      +--keySet [java.util.HashMap$KeySet] 16 bytes
      |
      +--table [java.util.HashMap$Entry[]] 80 bytes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;  

&lt;p&gt;The only elements that we should not take into account are the column types as they are singletons. Other elements seems fine to me.&lt;/p&gt;</comment>
                            <comment id="14196146" author="snazy" created="Tue, 4 Nov 2014 14:28:06 +0000"  >&lt;p&gt;+ instances of &lt;tt&gt;Function&lt;/tt&gt;&lt;br/&gt;
+ instances of &lt;tt&gt;AbstractType&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14215994" author="blerer" created="Tue, 18 Nov 2014 09:39:55 +0000"  >&lt;p&gt;I added to Jamm 0.2.9 the ability to exclude fields that have the been annoted with the Unmetered annotation. I started to use it but I realizes that what we really want to exclude is some specific classes that we consider as Singleton (e.g. the functions ot the AbstractTypes). Being able to directly annotate a Type like Function is safer as we only have to annotate the Interface once and it will not be taken into account by MemoryMeter no matter in which statement type or part of the statement it is. It is also more refactoring proof. &lt;/p&gt;</comment>
                            <comment id="14217590" author="blerer" created="Wed, 19 Nov 2014 08:16:27 +0000"  >&lt;p&gt;This patch replace the jamm version 0.2.8 by the version 0.3.0 which support the &lt;tt&gt;Unmetered&lt;/tt&gt; annotation on type.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;ignoreKnownSingleton&lt;/tt&gt; option of &lt;tt&gt;MemoryMeter&lt;/tt&gt; was already excluding &lt;tt&gt;Class&lt;/tt&gt; and &lt;tt&gt;Enum&lt;/tt&gt; instances. So only the &lt;tt&gt;CFMetadata&lt;/tt&gt;, &lt;tt&gt;AbstractType&lt;/tt&gt; and &lt;tt&gt;Function&lt;/tt&gt; had to be marked with the &lt;tt&gt;Unmetered&lt;/tt&gt; annotation. &lt;/p&gt;

&lt;p&gt;I used the &lt;tt&gt;enableDebug&lt;/tt&gt; option from &lt;tt&gt;MemoryMeter&lt;/tt&gt; to verify that the measured instances were the expected ones. &lt;/p&gt;</comment>
                            <comment id="14217593" author="blerer" created="Wed, 19 Nov 2014 08:20:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dbrosius%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;dbrosius@apache.org&quot;&gt;dbrosius@apache.org&lt;/a&gt;, you are quite familiar with Jamm, can you review my patch.&lt;/p&gt;</comment>
                            <comment id="14217884" author="dbrosius" created="Wed, 19 Nov 2014 13:14:40 +0000"  >&lt;p&gt;+LGTM. i&apos;ll push 0.30 to maven&lt;/p&gt;</comment>
                            <comment id="14217896" author="blerer" created="Wed, 19 Nov 2014 13:24:57 +0000"  >&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14217900" author="dbrosius" created="Wed, 19 Nov 2014 13:33:39 +0000"  >&lt;p&gt;ah one thing. don&apos;t forget to change the license file name for jamm.&lt;/p&gt;</comment>
                            <comment id="14219592" author="blerer" created="Thu, 20 Nov 2014 17:07:30 +0000"  >&lt;p&gt;Same patch as the previous with the renamed license file for Jamm.&lt;/p&gt;</comment>
                            <comment id="14220009" author="dbrosius" created="Thu, 20 Nov 2014 21:10:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14221463" author="blerer" created="Fri, 21 Nov 2014 21:34:59 +0000"  >&lt;p&gt;New patch for trunk.&lt;/p&gt;</comment>
                            <comment id="14221469" author="thobbs" created="Fri, 21 Nov 2014 21:44:31 +0000"  >&lt;p&gt;Thanks, committed as 1bb2dd90.&lt;/p&gt;</comment>
                            <comment id="14222257" author="rnamboodiri" created="Sat, 22 Nov 2014 23:38:33 +0000"  >&lt;p&gt;I see the following from git log &quot;f02d194 Add missing jamm jar from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8231&quot; title=&quot;Wrong size of cached prepared statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8231&quot;&gt;&lt;del&gt;CASSANDRA-8231&lt;/del&gt;&lt;/a&gt; commit&quot; and I think there is a problem associated with the jar file checked in. While running some of the tests, I am getting the following error messages &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Error opening zip file or JAR manifest missing : /Users/RajT/cassandra-source/cassandra-trunk/lib/jamm-0.3.0.jar 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please have a look at it. Thanks&lt;/p&gt;</comment>
                            <comment id="14222825" author="slebresne" created="Mon, 24 Nov 2014 09:34:42 +0000"  >&lt;p&gt;Seems that the jar pushed had some windows end of line in the manifest (or something like that). Pushed a new version of the jar (the one from maven actually) which appears to fix it.&lt;/p&gt;</comment>
                            <comment id="14222837" author="rnamboodiri" created="Mon, 24 Nov 2014 09:56:42 +0000"  >&lt;p&gt;I tried a get latest from the repo and it appears there is no check-in happened related to this jar file. Can you please check that? Thanks a lot&lt;/p&gt;</comment>
                            <comment id="14222841" author="slebresne" created="Mon, 24 Nov 2014 10:00:38 +0000"  >&lt;p&gt;Well, you might want to check again because it&apos;s been committed. Make sure you&apos;re using &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cassandra.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cassandra.git&lt;/a&gt;, not some mirror that lags behind.&lt;/p&gt;</comment>
                            <comment id="14222846" author="rnamboodiri" created="Mon, 24 Nov 2014 10:08:40 +0000"  >&lt;p&gt;Thanks a lot for the info. I was using &lt;a href=&quot;https://github.com/apache/cassandra/tree/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/tree/trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Any idea how long the above one takes to get it synced? &lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
-Raj&lt;/p&gt;


</comment>
                            <comment id="14222962" author="rnamboodiri" created="Mon, 24 Nov 2014 13:02:40 +0000"  >&lt;p&gt;Looks like the issue is still persisting even after getting the latest&#8230; Here is my git log and I see the jamm jar file changes in there.&lt;/p&gt;

&lt;p&gt;Rajanarayanans-MacBook-Pro:cassandra-trunk RajT$ git log --oneline&lt;br/&gt;
41435ef Merge branch &apos;cassandra-2.1&apos; into trunk&lt;br/&gt;
cab2b25 Merge branch &apos;cassandra-2.0&apos; into cassandra-2.1&lt;br/&gt;
0e3d9fc Validate size of indexed column values&lt;br/&gt;
065aeeb Merge branch &apos;trunk&apos; of &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf/cassandra&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf/cassandra&lt;/a&gt; into trunk&lt;br/&gt;
35f173a Merge branch &apos;cassandra-2.1&apos; of &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf/cassandra&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf/cassandra&lt;/a&gt; into cassandra-2.1&lt;br/&gt;
cd4f729 Merge branch &apos;cassandra-2.1&apos; into trunk&lt;br/&gt;
528cc3d Merge branch &apos;cassandra-2.1&apos; into trunk&lt;br/&gt;
6ae1b42 Better jamm 0.3.0 jar&lt;/p&gt;


&lt;p&gt;The error message is same though:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Error opening zip file or JAR manifest missing : /Users/RajT/cassandra-source/cassandra-trunk/lib/jamm-0.3.0.jar &lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
-Raj&lt;/p&gt;


</comment>
                            <comment id="14222982" author="blerer" created="Mon, 24 Nov 2014 13:36:16 +0000"  >&lt;p&gt;Could you try the following: &lt;br/&gt;
1) delete the jar &lt;br/&gt;
2) Dowload the jar from: &lt;a href=&quot;http://search.maven.org/remotecontent?filepath=com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search.maven.org/remotecontent?filepath=com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&lt;/a&gt; and put it in the lib folder&lt;br/&gt;
3) tell me if you still have the error&lt;/p&gt;</comment>
                            <comment id="14223140" author="rnamboodiri" created="Mon, 24 Nov 2014 17:09:40 +0000"  >&lt;p&gt;Hi Benjamin,&lt;br/&gt;
Still the problem persists. Here are the steps I have gone through.&lt;/p&gt;

&lt;p&gt;Rajanarayanans-MacBook-Pro:lib RajT$ rm jamm-0.3.0.jar&lt;br/&gt;
Rajanarayanans-MacBook-Pro:lib RajT$ wget &lt;a href=&quot;http://search.maven.org/remotecontent?filepath=com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search.maven.org/remotecontent?filepath=com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&lt;/a&gt;&lt;br/&gt;
-&lt;del&gt;2014-11-24 16:24:19&lt;/del&gt;-  &lt;a href=&quot;http://search.maven.org/remotecontent?filepath=com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search.maven.org/remotecontent?filepath=com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&lt;/a&gt;&lt;br/&gt;
Resolving search.maven.org... 207.223.241.72&lt;br/&gt;
Connecting to search.maven.org|207.223.241.72|:80... connected.&lt;br/&gt;
HTTP request sent, awaiting response... 302 Moved Temporarily&lt;br/&gt;
Location: &lt;a href=&quot;https://repo1.maven.org/maven2/com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repo1.maven.org/maven2/com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;following&amp;#93;&lt;/span&gt;&lt;br/&gt;
-&lt;del&gt;2014-11-24 16:24:19&lt;/del&gt;-  &lt;a href=&quot;https://repo1.maven.org/maven2/com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repo1.maven.org/maven2/com/github/jbellis/jamm/0.3.0/jamm-0.3.0.jar&lt;/a&gt;&lt;br/&gt;
Resolving repo1.maven.org... 185.31.18.209&lt;br/&gt;
Connecting to repo1.maven.org|185.31.18.209|:443... connected.&lt;br/&gt;
HTTP request sent, awaiting response... 200 OK&lt;br/&gt;
Length: 21033 (21K) &lt;span class=&quot;error&quot;&gt;&amp;#91;application/java-archive&amp;#93;&lt;/span&gt;&lt;br/&gt;
Saving to: &apos;remotecontent?filepath=com%2Fgithub%2Fjbellis%2Fjamm%2F0.3.0%2Fjamm-0.3.0.jar&apos;&lt;/p&gt;

&lt;p&gt;100%&lt;span class=&quot;error&quot;&gt;&amp;#91;========================================================================================================================&amp;gt;&amp;#93;&lt;/span&gt; 21,033      --.-K/s   in 0.04s   &lt;/p&gt;

&lt;p&gt;2014-11-24 16:24:20 (582 KB/s) - &apos;remotecontent?filepath=com%2Fgithub%2Fjbellis%2Fjamm%2F0.3.0%2Fjamm-0.3.0.jar&apos; saved &lt;span class=&quot;error&quot;&gt;&amp;#91;21033/21033&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Rajanarayanans-MacBook-Pro:lib RajT$ mv remotecontent?filepath=com%2Fgithub%2Fjbellis%2Fjamm%2F0.3.0%2Fjamm-0.3.0.jar jamm-0.3.0.jar&lt;br/&gt;
Rajanarayanans-MacBook-Pro:lib RajT$ cd ..&lt;br/&gt;
Rajanarayanans-MacBook-Pro:cassandra-trunk RajT$ ant test -Dtest.name=CleanupTest&lt;br/&gt;
Buildfile: /Users/RajT/cassandra-source/cassandra-trunk/build.xml&lt;/p&gt;

&lt;p&gt;init:&lt;/p&gt;

&lt;p&gt;maven-ant-tasks-localrepo:&lt;/p&gt;

&lt;p&gt;maven-ant-tasks-download:&lt;/p&gt;

&lt;p&gt;maven-ant-tasks-init:&lt;/p&gt;

&lt;p&gt;maven-declare-dependencies:&lt;/p&gt;

&lt;p&gt;maven-ant-tasks-retrieve-build:&lt;/p&gt;

&lt;p&gt;init-dependencies:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Loading dependency paths from file: /Users/RajT/cassandra-source/cassandra-trunk/build/build-dependencies.xml&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;unzip&amp;#93;&lt;/span&gt; Expanding: /Users/RajT/cassandra-source/cassandra-trunk/build/lib/jars/org.jacoco.agent-0.7.1.201405082137.jar into /Users/RajT/cassandra-source/cassandra-trunk/build/lib/jars&lt;/p&gt;

&lt;p&gt;check-gen-cql3-grammar:&lt;/p&gt;

&lt;p&gt;gen-cql3-grammar:&lt;/p&gt;

&lt;p&gt;build-project:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; apache-cassandra: /Users/RajT/cassandra-source/cassandra-trunk/build.xml&lt;/p&gt;

&lt;p&gt;createVersionPropFile:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;propertyfile&amp;#93;&lt;/span&gt; Updating property file: /Users/RajT/cassandra-source/cassandra-trunk/src/resources/org/apache/cassandra/config/version.properties&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;copy&amp;#93;&lt;/span&gt; Copying 1 file to /Users/RajT/cassandra-source/cassandra-trunk/build/classes/main&lt;/p&gt;

&lt;p&gt;build:&lt;/p&gt;

&lt;p&gt;build-test:&lt;/p&gt;

&lt;p&gt;test:&lt;/p&gt;

&lt;p&gt;testlist:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; running test bucket 0 tests&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; WARNING: multiple versions of ant detected in path for junit &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;          jar:&lt;a href=&quot;file:/usr/local/Cellar/ant/1.9.4/libexec/lib/ant.jar!/org/apache/tools/ant/Project.class&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/usr/local/Cellar/ant/1.9.4/libexec/lib/ant.jar!/org/apache/tools/ant/Project.class&lt;/a&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;      and jar:&lt;a href=&quot;file:/Users/RajT/cassandra-source/cassandra-trunk/build/lib/jars/ant-1.6.5.jar!/org/apache/tools/ant/Project.class&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/Users/RajT/cassandra-source/cassandra-trunk/build/lib/jars/ant-1.6.5.jar!/org/apache/tools/ant/Project.class&lt;/a&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Error occurred during initialization of VM&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; agent library failed to init: instrument&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; objc&lt;span class=&quot;error&quot;&gt;&amp;#91;7769&amp;#93;&lt;/span&gt;: Class JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk/Contents/Home/jre/bin/java and /Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk/Contents/Home/jre/lib/libinstrument.dylib. One of the two will be used. Which one is undefined.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Error opening zip file or JAR manifest missing : /Users/RajT/cassandra-source/cassandra-trunk/lib/jamm-0.3.0.jar &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Testsuite: org.apache.cassandra.db.CleanupTest&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Testcase: org.apache.cassandra.db.CleanupTest:null:	Caused an ERROR&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Forked Java VM exited abnormally. Please note the time in the report does not reflect the time until the VM exit.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Forked Java VM exited abnormally. Please note the time in the report does not reflect the time until the VM exit.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.cassandra.db.CleanupTest FAILED (crashed)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junitreport&amp;#93;&lt;/span&gt; Processing /Users/RajT/cassandra-source/cassandra-trunk/build/test/TESTS-TestSuites.xml to /var/folders/nf/trtmyt9534z03kq8p8zgbnxh0000gn/T/null1829125363&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junitreport&amp;#93;&lt;/span&gt; Loading stylesheet jar:&lt;a href=&quot;file:/usr/local/Cellar/ant/1.9.4/libexec/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs/optional/junit/xsl/junit-frames.xsl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/usr/local/Cellar/ant/1.9.4/libexec/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs/optional/junit/xsl/junit-frames.xsl&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junitreport&amp;#93;&lt;/span&gt; Transform time: 2046ms&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junitreport&amp;#93;&lt;/span&gt; Deleting: /var/folders/nf/trtmyt9534z03kq8p8zgbnxh0000gn/T/null1829125363&lt;/p&gt;

&lt;p&gt;BUILD FAILED&lt;br/&gt;
/Users/RajT/cassandra-source/cassandra-trunk/build.xml:1144: Some test bucket 0 test(s) failed.&lt;/p&gt;

&lt;p&gt;Total time: 5 seconds&lt;/p&gt;


&lt;p&gt;Thanks&lt;br/&gt;
-Raj&lt;/p&gt;


</comment>
                            <comment id="14224560" author="blerer" created="Tue, 25 Nov 2014 14:03:00 +0000"  >&lt;p&gt;If you update your repository everything should work fine now. My patch had an error in the build.xml. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mshuler&quot; class=&quot;user-hover&quot; rel=&quot;mshuler&quot;&gt;mshuler&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yukim&quot; class=&quot;user-hover&quot; rel=&quot;yukim&quot;&gt;yukim&lt;/a&gt; found it and fixed it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12678543" name="8231-notes.txt" size="26486" author="snazy" created="Fri, 31 Oct 2014 20:15:40 +0000"/>
                            <attachment id="12682961" name="CASSANDRA-8231-V2-trunk.txt" size="83095" author="blerer" created="Fri, 21 Nov 2014 21:34:59 +0000"/>
                            <attachment id="12682685" name="CASSANDRA-8231-V2.txt" size="83155" author="blerer" created="Thu, 20 Nov 2014 17:07:30 +0000"/>
                            <attachment id="12682374" name="CASSANDRA-8231.txt" size="59465" author="blerer" created="Wed, 19 Nov 2014 08:16:27 +0000"/>
                            <attachment id="12678545" name="Unsafes.java" size="16816" author="snazy" created="Fri, 31 Oct 2014 20:23:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21tfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>dbrosius@apache.org</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dbrosius@apache.org]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>