<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:50:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8462] Upgrading a 2.0 to 2.1 breaks CFMetaData on 2.0 nodes</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8462</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Added a 2.1.2 node to a cluster running 2.0.11. Didn&apos;t make any schema changes. When I tried to reboot one of the 2.0 nodes, it failed to boot with this exception. Besides an obvious fix, any workarounds for this?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalArgumentException: No enum constant org.apache.cassandra.config.CFMetaData.Caching.{&quot;keys&quot;:&quot;ALL&quot;, &quot;rows_per_partition&quot;:&quot;NONE&quot;}
        at java.lang.Enum.valueOf(Enum.java:236)
        at org.apache.cassandra.config.CFMetaData$Caching.valueOf(CFMetaData.java:286)
        at org.apache.cassandra.config.CFMetaData.fromSchemaNoColumnsNoTriggers(CFMetaData.java:1713)
        at org.apache.cassandra.config.CFMetaData.fromSchema(CFMetaData.java:1793)
        at org.apache.cassandra.config.KSMetaData.deserializeColumnFamilies(KSMetaData.java:307)
        at org.apache.cassandra.config.KSMetaData.fromSchema(KSMetaData.java:288)
        at org.apache.cassandra.db.DefsTables.loadFromKeyspace(DefsTables.java:131)
        at org.apache.cassandra.config.DatabaseDescriptor.loadSchemas(DatabaseDescriptor.java:529)
        at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:270)
        at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:496)
        at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:585)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12761134">CASSANDRA-8462</key>
            <summary>Upgrading a 2.0 to 2.1 breaks CFMetaData on 2.0 nodes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="rbranson">Rick Branson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Dec 2014 18:47:40 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:26 +0000</updated>
                            <resolved>Wed, 7 Jan 2015 19:54:30 +0000</resolved>
                                        <fixVersion>2.0.12</fixVersion>
                    <fixVersion>2.1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14244553" author="thobbs" created="Fri, 12 Dec 2014 18:23:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=philipthompson&quot; class=&quot;user-hover&quot; rel=&quot;philipthompson&quot;&gt;philipthompson&lt;/a&gt; I&apos;m guessing the dtests don&apos;t cover restarting nodes in a mixed-version cluster.  Would it be possible to add some test coverage for that?&lt;/p&gt;</comment>
                            <comment id="14244570" author="philipthompson" created="Fri, 12 Dec 2014 18:31:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt;, you are correct, we currently have no coverage there. I will add some.&lt;/p&gt;</comment>
                            <comment id="14246186" author="iamaleksey" created="Sun, 14 Dec 2014 23:08:44 +0000"  >&lt;p&gt;What would be the obvious fix?&lt;/p&gt;

&lt;p&gt;That row shouldn&apos;t have made it to a 2.0.11 node. No idea how it got there, yet - unless you&apos;ve restarted the upgraded 2.1 node as a 2.0 node. This is the first thing I&apos;d suspect, had I not known the reporter (but please double check, still - unless someone messed w OTC/ITC code again, we do not exchange schema between nodes of different majors).&lt;/p&gt;

&lt;p&gt;The workaround is obvious though. Just upgrade that node to 2.1.&lt;/p&gt;</comment>
                            <comment id="14247499" author="rbranson" created="Tue, 16 Dec 2014 00:36:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; this happened first time I restarted a 2.0 node after adding a 2.1 node to the cluster. It happened every time I restarted a 2.0 node, until I upgraded it to 2.1.&lt;/p&gt;</comment>
                            <comment id="14262735" author="iamaleksey" created="Fri, 2 Jan 2015 03:06:22 +0000"  >&lt;p&gt;Attaching a patch that adds an extra version check closer to the actual migration request.&lt;/p&gt;</comment>
                            <comment id="14268043" author="thobbs" created="Wed, 7 Jan 2015 19:16:13 +0000"  >&lt;p&gt;+1 with a nit: you&apos;re missing &quot;time&quot; in &quot;There is a chance that quite some &lt;span class=&quot;error&quot;&gt;&amp;#91;time&amp;#93;&lt;/span&gt; could have passed&quot;&lt;/p&gt;</comment>
                            <comment id="14268115" author="iamaleksey" created="Wed, 7 Jan 2015 19:54:30 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                            <comment id="14268117" author="benedict" created="Wed, 7 Jan 2015 19:54:52 +0000"  >&lt;p&gt;&lt;del&gt;I just pushed a change to 2.0, 2.1 and trunk, and this change seemed not to have been merged with 2.1. It looks like the changes are minor, and may not even apply to 2.1. I backed them out to what 2.1 was prior to my merge. If somebody could have a look and check what should have been applied to 2.1, it would be appreciated.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;Nevermind. We appear to have hit a lengthy race condition, and my upload was slow enough to be rejected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12689766" name="8462.txt" size="2531" author="aleksey" created="Fri, 2 Jan 2015 03:03:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23bvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12328841">2.1.2</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>philipthompson</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>