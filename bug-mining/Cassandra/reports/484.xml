<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:16:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1542] Data directories not being properly scrubbed</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1542</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;AbstractCassandraDaemon is trying to scrub data directories once the server has already been initialized (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1477&quot; title=&quot;drop/recreate column family race condition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1477&quot;&gt;&lt;del&gt;CASSANDRA-1477&lt;/del&gt;&lt;/a&gt;, r997490).&lt;/p&gt;

&lt;p&gt;To reproduce, delete a single component of an SSTable and restart.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12475000">CASSANDRA-1542</key>
            <summary>Data directories not being properly scrubbed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gdusbabek">Gary Dusbabek</assignee>
                                    <reporter username="stuhood">Stu Hood</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Sep 2010 02:57:37 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:16 +0000</updated>
                            <resolved>Tue, 28 Sep 2010 05:43:00 +0000</resolved>
                                        <fixVersion>0.7 beta 2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12915216" author="gdusbabek" created="Mon, 27 Sep 2010 06:50:50 +0000"  >&lt;p&gt;The only problem I saw is that we were calling Table.open() for each table as part of DD.loadSchemas().  This made it impossible to scrub the data directories &lt;b&gt;after&lt;/b&gt; we find out about the tables but &lt;b&gt;before&lt;/b&gt; they are initialized.  We were already calling Table.open() in AbstractCassandraDaemon, so I decided to remove the call from DD.&lt;/p&gt;

&lt;p&gt;That being said, stack traces in logs are still alarming for users.  Since the reason behind FNFE is well understood, I decided to modify ACD.setup() to catch it specifically and emit the error sans trace.  FWIW, CFS.scrubDataDirectories() does seem to be doing its job correctly.&lt;/p&gt;

&lt;p&gt;This patch addresses those two items.&lt;/p&gt;

&lt;p&gt;One question I have is if we should detect missing bloom filters and row indexes and proactively rebuild them.  I can&apos;t think of a case where this would happen in real life, so this would end up being a courtesy for people manually moving files around.  We probably shouldn&apos;t encourage this.&lt;/p&gt;</comment>
                            <comment id="12915342" author="jbellis" created="Mon, 27 Sep 2010 15:55:59 +0000"  >&lt;p&gt;I don&apos;t know that &quot;corrupt sstable&quot; is really that much less scary than a stack trace. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12915424" author="stuhood" created="Mon, 27 Sep 2010 18:45:23 +0000"  >&lt;p&gt;&amp;gt; One question I have is if we should detect missing bloom filters and row indexes and proactively rebuild them.&lt;br/&gt;
Might be a cool feature to add at some point: would probably be more useful for recovery of corrupted filters/indexes than for missing ones.&lt;/p&gt;

&lt;p&gt;+1 Looks good.&lt;/p&gt;</comment>
                            <comment id="12915624" author="gdusbabek" created="Tue, 28 Sep 2010 05:43:00 +0000"  >&lt;p&gt;Committed with a less intimidating error message. &lt;/p&gt;</comment>
                            <comment id="12915735" author="hudson" created="Tue, 28 Sep 2010 13:31:31 +0000"  >&lt;p&gt;Integrated in Cassandra #549 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra/549/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra/549/&lt;/a&gt;)&lt;br/&gt;
    do not intialize table instances when loading schema. complain less loudly when there is a missing sstable component. patch by gdusbabek, reviewed by stuhood. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1542&quot; title=&quot;Data directories not being properly scrubbed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1542&quot;&gt;&lt;del&gt;CASSANDRA-1542&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455799" name="ASF.LICENSE.NOT.GRANTED--v2-0001-do-not-intialize-table-instances-when-loading-schema.-.txt" size="3708" author="gdusbabek" created="Tue, 28 Sep 2010 05:39:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[gdusbabek]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20189</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g5vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92381</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stuhood</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stuhood]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>