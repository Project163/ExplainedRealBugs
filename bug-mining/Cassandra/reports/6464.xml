<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:30:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-19495] Hints not stored after node goes down for the second time</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-19495</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I have a scenario where a node goes down, hints are recorded on the second node and replayed, as expected. If the first node goes down for a second time and time span between the first time it stopped and the second time it stopped is more than the max_hint_window then the hint is not recorded, no hint file is created, and the mutation never arrives at the node after it comes up again.&lt;/p&gt;

&lt;p&gt;I have debugged this and it appears to due to the way hint window is persisted after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14309&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-14309&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The code here: &lt;a href=&quot;https://github.com/apache/cassandra/blame/cassandra-4.1/src/java/org/apache/cassandra/service/StorageProxy.java#L2402&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blame/cassandra-4.1/src/java/org/apache/cassandra/service/StorageProxy.java#L2402&lt;/a&gt; uses the time stored in the HintsBuffer.earliestHintByHost map.&#160; This map is based on the UUID of the host, but this does not seem to be cleared when the node is back up, and I think this is what is causing the problem.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This is in cassandra 4.1.5&lt;/p&gt;</description>
                <environment></environment>
        <key id="13573374">CASSANDRA-19495</key>
            <summary>Hints not stored after node goes down for the second time</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smiklosovic">Stefan Miklosovic</assignee>
                                    <reporter username="paulchandler">Paul Chandler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Mar 2024 17:30:55 +0000</created>
                <updated>Mon, 20 May 2024 11:31:35 +0000</updated>
                            <resolved>Fri, 5 Apr 2024 09:53:56 +0000</resolved>
                                        <fixVersion>4.1.5</fixVersion>
                    <fixVersion>5.0-rc1</fixVersion>
                    <fixVersion>5.1-alpha1</fixVersion>
                                    <component>Consistency/Hints</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6000">1h 40m</timespent>
                                <comments>
                            <comment id="17831033" author="brandon.williams" created="Tue, 26 Mar 2024 18:28:17 +0000"  >&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17831051" author="brandon.williams" created="Tue, 26 Mar 2024 19:13:14 +0000"  >&lt;p&gt;From the NEWS.txt entry:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;if a node is not down longer than max_hint_window_in_ms, there is an additional check to see if there is a hint to be delivered which is older than max_window_in_ms. If there is, a hint is not persisted.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is this happening in your case?&lt;/p&gt;
</comment>
                            <comment id="17831065" author="paulchandler" created="Tue, 26 Mar 2024 20:16:09 +0000"  >&lt;p&gt;No that is not the case in this instance.&lt;/p&gt;

&lt;p&gt;For example I set the max_hint_window = 10m for this test&lt;/p&gt;

&lt;p&gt;Here is the time line&lt;/p&gt;

&lt;p&gt;15:37 Node A goes down&lt;/p&gt;

&lt;p&gt;15:39 Insert data via cqlsh on Node B, hint file is created on Node B&lt;/p&gt;

&lt;p&gt;15:42 Node A comes back up, hint file on Node B is deleted and data can be found on Node A&lt;/p&gt;

&lt;p&gt;15:49 Node A goes down again&lt;/p&gt;

&lt;p&gt;15:50 Insert data via cqlsh on Node B, no hint file is created on Node B, I have debugged this, and this is because it is comparing 15:50 to 15:37, whereas as far as I can see it should be comparing it to 15:49&lt;/p&gt;

&lt;p&gt;This seems to be because the value in the map HintsBuffer.earliestHintByHost&#160; is not cleared when all the hints are processed at 15:42&lt;/p&gt;</comment>
                            <comment id="17831087" author="brandon.williams" created="Tue, 26 Mar 2024 21:23:31 +0000"  >&lt;p&gt;That value gets cleared when the hints for that host have been sent and the file is removed &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-4.1/src/java/org/apache/cassandra/hints/HintsWriteExecutor.java#L253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.  I&apos;ve made a dtest &lt;a href=&quot;https://github.com/driftx/cassandra-dtest/commit/10d14bbfc1498b690c93838c33246ccda6ed136b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; that checks that hints work past the window if they have all been delivered previously and that is passing for me, so there may be something else going on here.&lt;/p&gt;</comment>
                            <comment id="17831231" author="paulchandler" created="Wed, 27 Mar 2024 08:55:17 +0000"  >&lt;p&gt;I put a breakpoint on that line, and it was never called. I wasn&#8217;t sure when that was expected to be called, it looked like it was part of the original writing of the hint file rather than when the hint is processed and deleted. Is the problem that I am only doing a couple of inserts during the downtime?&lt;/p&gt;

&lt;p&gt;I will take another look at this now.&lt;/p&gt;</comment>
                            <comment id="17831256" author="paulchandler" created="Wed, 27 Mar 2024 09:48:34 +0000"  >&lt;p&gt;I am getting breaking out of the loop every time at &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-4.1/src/java/org/apache/cassandra/hints/HintsWriteExecutor.java#L230&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-4.1/src/java/org/apache/cassandra/hints/HintsWriteExecutor.java#L230&lt;/a&gt; so it never reaches the&#160;&lt;br/&gt;
clearEarliestHintForHostId on line 253&lt;/p&gt;</comment>
                            <comment id="17831292" author="smiklosovic" created="Wed, 27 Mar 2024 10:50:27 +0000"  >&lt;p&gt;I am not sure where the problem is yet but I go through that&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;private void flush(Iterator&amp;lt;ByteBuffer&amp;gt; iterator, HintsStore store, HintsBuffer buffer) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;method and check it with me closely to verify my logic here:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;while (true)
{
    if (iterator.hasNext())
        flushInternal(iterator, store);

    if (!iterator.hasNext())
        break; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, we are in a while loop, we check if the iterator has some elements in it and if it does, it will flush it to disk, we see that in flushInternal there is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;try (HintsWriter.Session session = writer.newSession(writeBuffer))
{
    while (iterator.hasNext())
    {
        session.append(iterator.next());
        if (session.position() &amp;gt;= maxHintsFileSize)
            break;
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So again, while we have some entries, we append, then we check if overflowed and if we did, we break.&lt;/p&gt;

&lt;p&gt;That will close the session and it will return to the original while(true) where it gets to the second if&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;if (!iterator.hasNext())
    break; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;here it breaks the loop when we wrote all buffers in flushInternal and we have nothing to flush anymore.&lt;/p&gt;

&lt;p&gt;OK but imagine that we are ever going to append by iterating over the iterator which contains just ONE ByteBuffer.&lt;/p&gt;

&lt;p&gt;So now the flow is:&#160;&lt;/p&gt;

&lt;p&gt;if iterator has next (which it does), go to flushInternal, there it goes into while (iterator.hasNext()) (which it does), we just ask again, append that to session and check if the position is bigger than maxHintsFileSize. Now if it is - if we violated the threshold, we break hence we return from flushInternal.&#160;&lt;/p&gt;

&lt;p&gt;But when it breaks, it comes to this again:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;if (!iterator.hasNext())
    break; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But this will break right? Because if our iterator consisted of one buffer only, then it flushed it in flushInternal, but here that iterator will not have any new buffers anymore, so it will break.&#160;&lt;/p&gt;

&lt;p&gt;The result here is that we successfully wrote a buffer into a hint file where we reached maxHintsFileSize, but we entered break, so we never called store.closeWriter() and never reached &quot;finally&quot;.&lt;/p&gt;

&lt;p&gt;In other words, if iterator contains only one buffer, then it will always succeed to flush it, but we will never close the store. If we keep writing just one buffer every single time, then the hint file will grow beyond any limit? I do not see anything yet to contradict this.&lt;/p&gt;</comment>
                            <comment id="17831307" author="paulchandler" created="Wed, 27 Mar 2024 11:41:16 +0000"  >&lt;p&gt;I am not sure this is quite right, but I have not yet understood what the iterator over ByteBuffer is, and when we would get more than one iteration.&#160;&lt;/p&gt;

&lt;p&gt;In my tests the method clearEarliestHintForHostId is called when the hint file reaches the max_hints_file_size and the file is closed and a new one started, so I guess at that point the iterator now has more than one byte buffer.&#160;&lt;/p&gt;</comment>
                            <comment id="17831308" author="smiklosovic" created="Wed, 27 Mar 2024 11:43:36 +0000"  >&lt;p&gt;But in your last comment you said that you are always getting out of that loop on line 230&lt;/p&gt;</comment>
                            <comment id="17831309" author="paulchandler" created="Wed, 27 Mar 2024 11:48:46 +0000"  >&lt;p&gt;I think I get it now, this code&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (HintsWriter.Session session = writer.newSession(writeBuffer))
{
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (iterator.hasNext())
    {
        session.append(iterator.next());
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (session.position() &amp;gt;= maxHintsFileSize)
            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
    }
}  &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will iterate over all the ByteBuffers, unless the file is full, if that happens it breaks and falls back out to this part:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
{
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (iterator.hasNext())
        flushInternal(iterator, store);

    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!iterator.hasNext())
        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;  &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This time the iterator still has some bytebuffers, so it does not break, but continues, closes the writer and clears the earliest hint.&#160;&lt;/p&gt;

&lt;p&gt;If the file is not full, all the byteBuffers are processed in the first code block and the second code block will break out of the loop.&#160;&lt;/p&gt;</comment>
                            <comment id="17831311" author="paulchandler" created="Wed, 27 Mar 2024 11:50:58 +0000"  >&lt;p&gt;&quot;But in your last comment you said that you are always getting out of that loop on line 230&quot; - Yes, but this was when I had small hint files, when I had a large hint file that was &quot;too big&quot; it got to the code we needed it to.&#160;&lt;/p&gt;</comment>
                            <comment id="17831315" author="smiklosovic" created="Wed, 27 Mar 2024 11:56:28 +0000"  >&lt;p&gt;Yes, if a file is small there is still some room to append to it so, it will be cleared upon store&apos;s close when we can not append anymore, hence if that file is small it will keep breaking the loop after it appended it all.&lt;/p&gt;

&lt;p&gt;If you understand what it is doing now, try to go over that with one buffer in the iterator only. It will always append but it will never close the store because the second &quot;if&quot; in flush will keep breaking because we just flushed one buffer in the iterator and there is no more of them.&#160;&lt;/p&gt;

&lt;p&gt;I am not sure if this is not a completely separate problem though, having nothing to do with your original one. Does the investigation we did here resolved it and explained that or there are still some unknowns?&#160;&lt;/p&gt;</comment>
                            <comment id="17831317" author="paulchandler" created="Wed, 27 Mar 2024 12:01:38 +0000"  >&lt;p&gt;No it does not solve the problem, but I think it shows the cause of it.&#160;&lt;/p&gt;

&lt;p&gt;If the hint file is small the earliest hint is never cleared, so next time the node goes down, it uses the earliest hint ( from the first time the node went down ) and if it is after the hint window, then no hints are written for the second outage of the node.&#160;&lt;/p&gt;</comment>
                            <comment id="17831318" author="brandon.williams" created="Wed, 27 Mar 2024 12:03:13 +0000"  >&lt;p&gt;If I run my added dtest in a loop it does eventually fail, so there is some kind of problem here.  At the least I think this ticket should culminate in some debug logging so we have more visibility into this area.&lt;/p&gt;</comment>
                            <comment id="17831433" author="smiklosovic" created="Wed, 27 Mar 2024 16:04:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulchandler&quot; class=&quot;user-hover&quot; rel=&quot;paulchandler&quot;&gt;paulchandler&lt;/a&gt; could you try this? &lt;a href=&quot;https://github.com/smiklosovic/cassandra/commit/a88b62889473d13119e6c3d912fd6635cd3f5c9e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/smiklosovic/cassandra/commit/a88b62889473d13119e6c3d912fd6635cd3f5c9e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I dug a little bit deeper here and the way it works is that there is HintsDispatchTrigger running every 10s (that&apos;s what javadoc says). Every 10 seconds it will iterate over all hint stores and if a respective node for which there is a corresponding hint store is alive (it went back online from being down), then the dispatching of hints is triggered.&#160;&lt;/p&gt;

&lt;p&gt;Then it will do this (1), as explained in the javadoc, it will dispatch all hint files which are queued to be sent over and it will close the current writer. Closing of the current writer means that it will call this (2) and there it will put the current descriptor as the the last one. Basically, when a node is up, it will send all full hints files and it will close the writer for a file which was not fully occupied yet and it will be sent over in the next dispatcher&apos;s round.&lt;/p&gt;

&lt;p&gt;Now if you notice, the logic telling whether we should save a hint or not is here (3). That goes to (4) and it looks into the oldest descriptor and its timestamp and it tries to find the minimum for it + all earliest hints in buffer pools. That goes here (5).&lt;/p&gt;

&lt;p&gt;However, we only ever remove that host uuid for earliest hints when we close the store. So if we do not close it because it is not full and node is up again, there will be old values from times before we firstly dispatched. &lt;/p&gt;

&lt;p&gt;The solution is to remove records for the earliest hints when we close the writer when we go to dispatch as that node is alive again - so we dispatch and we remove the earliest hint for it. Then once it goes offline again, it will be added into earliest hints again too. &lt;/p&gt;

&lt;p&gt;(1) &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hints/HintsDispatchTrigger.java#L66-L76&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hints/HintsDispatchTrigger.java#L66-L76&lt;/a&gt;&lt;br/&gt;
(2) &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hints/HintsStore.java#L311-L320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hints/HintsStore.java#L311-L320&lt;/a&gt;&lt;br/&gt;
(3) &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/service/StorageProxy.java#L2395-L2401&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/service/StorageProxy.java#L2395-L2401&lt;/a&gt;&lt;br/&gt;
(4) &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hints/HintsService.java#L452-L459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hints/HintsService.java#L452-L459&lt;/a&gt;&lt;br/&gt;
(5) &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hints/HintsBufferPool.java#L74-L83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hints/HintsBufferPool.java#L74-L83&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17831440" author="smiklosovic" created="Wed, 27 Mar 2024 16:21:02 +0000"  >&lt;p&gt;please take both commits, just cleaned up something a bit  &lt;a href=&quot;https://github.com/smiklosovic/cassandra/commits/CASSANDRA-19495-4.1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/smiklosovic/cassandra/commits/CASSANDRA-19495-4.1/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17831449" author="brandon.williams" created="Wed, 27 Mar 2024 16:33:39 +0000"  >&lt;p&gt;FWIW, my test still fails with those patches when looped, but I won&apos;t discount the possibility that I wrote a flaky test.&lt;/p&gt;</comment>
                            <comment id="17831452" author="paulchandler" created="Wed, 27 Mar 2024 16:35:38 +0000"  >&lt;p&gt;I will test it and let you know&#160;&lt;/p&gt;</comment>
                            <comment id="17831470" author="paulchandler" created="Wed, 27 Mar 2024 17:14:11 +0000"  >&lt;p&gt;First run through it looks like it has fixed it, tomorrow I will run it through the debugger and make sure I understand what is happening properly.&lt;/p&gt;

&lt;p&gt;I see the patch was off the trunk, so I ported it to 4.1, as that was the version I was testing.&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17831479" author="smiklosovic" created="Wed, 27 Mar 2024 17:34:11 +0000"  >&lt;p&gt;I sent you the branch for 4.1 - to be sure - this one &lt;a href=&quot;https://github.com/smiklosovic/cassandra/commits/CASSANDRA-19495-4.1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/smiklosovic/cassandra/commits/CASSANDRA-19495-4.1/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have also added in-jvm dtest: &lt;a href=&quot;https://github.com/smiklosovic/cassandra/commit/58489a069af8fd9cd28bf8f7e8e7b654570cf90f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/smiklosovic/cassandra/commit/58489a069af8fd9cd28bf8f7e8e7b654570cf90f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17831667" author="smiklosovic" created="Thu, 28 Mar 2024 08:40:31 +0000"  >&lt;p&gt;5.0 branch looks good at least for jvm repeats and dtests, I am going to run j17 pre-commit at least and if we are all good with the verification I will build it all during Easter.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19495&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java17_pre-commit_tests                         
java17_separate_tests                            
  &#10003; j17_build                                         4m 5s
  &#10003; j17_dtests                                      33m 50s
  &#10003; j17_jvm_dtests_repeat                            44m 3s
java11_pre-commit_tests                         
java11_separate_tests                            
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4091/workflows/d007ae15-0538-4f24-a520-ddc3b98677bc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17_pre-commit_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4091/workflows/083e5d3e-3cea-4980-92d8-1601491fa261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17_separate_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4091/workflows/d42a7ca7-9cd9-4d6d-a3ac-59c4eab7b848&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_pre-commit_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4091/workflows/4b54b873-5e6b-4a55-baa8-d5937810d206&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_separate_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17831729" author="paulchandler" created="Thu, 28 Mar 2024 11:13:13 +0000"  >&lt;p&gt;I have tested the 4.1 patch and it has fixed the issue, thank you. I also checked to ensure the hints are discarded correctly after max_hint_window and that works fine too,&lt;/p&gt;</comment>
                            <comment id="17831886" author="brandon.williams" created="Thu, 28 Mar 2024 16:29:50 +0000"  >&lt;p&gt;Left a couple comments on the PR but otherwise looks good.&lt;/p&gt;
</comment>
                            <comment id="17832179" author="brandon.williams" created="Fri, 29 Mar 2024 11:58:55 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19495-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1549/workflows/96ac2db8-d5d6-4bf8-98f9-823a133c4ad3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1549/workflows/e0e763fa-e847-45c0-82ed-34f394758cd9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17832846" author="smiklosovic" created="Mon, 1 Apr 2024 13:42:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19495 5.0&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java17_pre-commit_tests                         
  &#10003; j17_build                                        4m 15s
  &#10003; j17_cqlsh_dtests_py311                            6m 2s
  &#10003; j17_cqlsh_dtests_py311_vnode                     6m 36s
  &#10003; j17_cqlsh_dtests_py38                            5m 57s
  &#10003; j17_cqlsh_dtests_py38_vnode                       6m 5s
  &#10003; j17_cqlshlib_cython_tests                        7m 55s
  &#10003; j17_cqlshlib_tests                               6m 35s
  &#10003; j17_dtests                                      33m 31s
  &#10003; j17_dtests_latest                               32m 42s
  &#10003; j17_dtests_vnode                                34m 28s
  &#10003; j17_jvm_dtests                                   19m 6s
  &#10003; j17_jvm_dtests_latest_vnode                     15m 12s
  &#10003; j17_jvm_dtests_latest_vnode_repeat              28m 55s
  &#10003; j17_jvm_dtests_repeat                           28m 33s
  &#10003; j17_unit_tests                                  15m 52s
  &#10003; j17_utests_latest                               16m 15s
  &#10003; j17_utests_oa                                   16m 20s
java17_separate_tests                            
java11_pre-commit_tests                         
  &#10003; j11_build                                        6m 25s
  &#10003; j11_cqlsh_dtests_py311                           10m 1s
  &#10003; j11_cqlsh_dtests_py311_vnode                     7m 19s
  &#10003; j11_cqlsh_dtests_py38                            6m 33s
  &#10003; j11_cqlsh_dtests_py38_vnode                       8m 3s
  &#10003; j11_cqlshlib_cython_tests                       11m 22s
  &#10003; j11_cqlshlib_tests                               7m 56s
  &#10003; j11_dtests                                      33m 47s
  &#10003; j11_dtests_latest                               35m 46s
  &#10003; j11_dtests_vnode                                39m 29s
  &#10003; j11_jvm_dtests                                  21m 55s
  &#10003; j11_jvm_dtests_latest_vnode                     13m 42s
  &#10003; j11_jvm_dtests_latest_vnode_repeat              31m 53s
  &#10003; j11_jvm_dtests_repeat                           31m 53s
  &#10003; j11_simulator_dtests                              2m 8s
  &#10003; j11_unit_tests                                  15m 42s
  &#10003; j11_utests_latest                               17m 32s
  &#10003; j11_utests_oa                                   16m 47s
  &#10003; j11_utests_system_keyspace_directory            18m 50s
  &#10003; j17_cqlsh_dtests_py311                           6m 16s
  &#10003; j17_cqlsh_dtests_py311_vnode                     6m 30s
  &#10003; j17_cqlsh_dtests_py38                            6m 33s
  &#10003; j17_cqlsh_dtests_py38_vnode                      6m 21s
  &#10003; j17_cqlshlib_cython_tests                        7m 44s
  &#10003; j17_cqlshlib_tests                               6m 43s
  &#10003; j17_dtests                                      31m 36s
  &#10003; j17_dtests_latest                               33m 18s
  &#10003; j17_dtests_vnode                                 33m 4s
  &#10003; j17_jvm_dtests                                  18m 52s
  &#10003; j17_jvm_dtests_latest_vnode                     14m 44s
  &#10003; j17_jvm_dtests_latest_vnode_repeat              28m 34s
  &#10003; j17_jvm_dtests_repeat                           28m 15s
  &#10003; j17_utests_latest                                14m 8s
  &#10003; j17_utests_oa                                   14m 37s
  &#10005; j17_unit_tests                                  15m 35s
      org.apache.cassandra.net.ConnectionTest testTimeout
java11_separate_tests                            
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4097/workflows/93d0a79e-b3d2-42d9-aa30-0255a1dab960&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17_pre-commit_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4097/workflows/ec5296fd-7d3a-4bb1-8047-259db70e789a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17_separate_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4097/workflows/dbc1290f-6694-42aa-9e1f-f8f93bd2b041&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_pre-commit_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4097/workflows/4b774ce9-8e90-4fdd-a0d2-555a42685eed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_separate_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17832847" author="smiklosovic" created="Mon, 1 Apr 2024 13:43:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19495-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19495-4.1&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java11_pre-commit_tests                         
  &#10003; j11_build                                        1m 45s
  &#10003; j11_cqlsh_dtests_py3                             5m 31s
  &#10003; j11_cqlsh_dtests_py311                           6m 18s
  &#10003; j11_cqlsh_dtests_py311_vnode                     6m 14s
  &#10003; j11_cqlsh_dtests_py38                            5m 50s
  &#10003; j11_cqlsh_dtests_py38_vnode                      5m 58s
  &#10003; j11_cqlsh_dtests_py3_vnode                       5m 35s
  &#10003; j11_cqlshlib_cython_tests                        7m 34s
  &#10003; j11_cqlshlib_tests                               8m 35s
  &#10003; j11_dtests                                      33m 30s
  &#10003; j11_dtests_vnode                                36m 31s
  &#10003; j11_jvm_dtests                                  17m 43s
  &#10003; j11_jvm_dtests_repeat                           35m 54s
  &#10003; j11_jvm_dtests_vnode                            11m 57s
  &#10003; j11_jvm_dtests_vnode_repeat                     35m 40s
  &#10005; j11_unit_tests                                    8m 3s
      org.apache.cassandra.cql3.MemtableSizeTest testSize[skiplist]
java11_separate_tests                            
java8_pre-commit_tests                          
  &#10003; j8_build                                         7m 13s
  &#10003; j8_cqlsh_dtests_py3                              6m 10s
  &#10003; j8_cqlsh_dtests_py311                            7m 43s
  &#10003; j8_cqlsh_dtests_py311_vnode                      9m 56s
  &#10003; j8_cqlsh_dtests_py38                             8m 16s
  &#10003; j8_cqlsh_dtests_py38_vnode                       6m 38s
  &#10003; j8_cqlsh_dtests_py3_vnode                        8m 52s
  &#10003; j8_cqlshlib_cython_tests                        12m 26s
  &#10003; j8_cqlshlib_tests                               12m 25s
  &#10003; j8_dtests                                       34m 21s
  &#10003; j8_dtests_vnode                                 37m 57s
  &#10003; j8_jvm_dtests                                   18m 17s
  &#10003; j8_jvm_dtests_repeat                            38m 45s
  &#10003; j8_jvm_dtests_vnode                             12m 50s
  &#10003; j8_jvm_dtests_vnode_repeat                      37m 28s
  &#10003; j8_simulator_dtests                              5m 18s
  &#10003; j11_jvm_dtests_vnode_repeat                      35m 8s
  &#10003; j11_jvm_dtests_vnode                            11m 41s
  &#10003; j11_jvm_dtests_repeat                           35m 23s
  &#10003; j11_jvm_dtests                                  17m 38s
  &#10003; j11_dtests_vnode                                 36m 3s
  &#10003; j11_dtests                                       34m 1s
  &#10003; j11_cqlshlib_tests                               8m 22s
  &#10003; j11_cqlshlib_cython_tests                        6m 51s
  &#10003; j11_cqlsh_dtests_py3_vnode                       5m 55s
  &#10003; j11_cqlsh_dtests_py38_vnode                      6m 15s
  &#10003; j11_cqlsh_dtests_py38                            6m 12s
  &#10003; j11_cqlsh_dtests_py311_vnode                     5m 57s
  &#10003; j11_cqlsh_dtests_py311                           5m 48s
  &#10003; j11_cqlsh_dtests_py3                             5m 25s
  &#10005; j8_unit_tests                                    9m 32s
      org.apache.cassandra.cql3.MemtableSizeTest testSize[skiplist]
  &#10005; j8_utests_system_keyspace_directory             10m 16s
      org.apache.cassandra.cql3.MemtableSizeTest testSize[skiplist]
  &#10005; j11_unit_tests                                   8m 37s
      org.apache.cassandra.cql3.MemtableSizeTest testSize[skiplist]
java8_separate_tests                             
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4098/workflows/53289114-3af8-4a95-bbf2-03ec435d828d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_pre-commit_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4098/workflows/270b6da9-47a5-45a3-8cde-c00c175a2a7d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_separate_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4098/workflows/d0852ed4-be80-4d24-a560-e9e7f57d93af&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8_pre-commit_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4098/workflows/9a14c4ef-2d6e-4c57-aa8e-fb00093416ad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8_separate_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17832849" author="smiklosovic" created="Mon, 1 Apr 2024 13:54:23 +0000"  >&lt;p&gt;I see there are 3 instances of failing tests in multiplexer for trunk but I do not know what is the cause of it, does not happen on lower branches. &lt;/p&gt;

&lt;p&gt;It timeouts on &lt;/p&gt;

&lt;p&gt;&quot;at org.apache.cassandra.cql3.statements.ModificationStatement.executeWithoutCondition(ModificationStatement.java:529)&quot;&lt;/p&gt;

&lt;p&gt;ModificationStatement is either DeleteStatement or UpdateStatement, we are not deleting anything, only selecting and inserting so insertion it is (as it also throws WriteTimeoutException). I could probably just wrap the insertion execution in try-catch and catch WriteTimeoutException and just ignore it but I am not sure if that solves anything ... Some writes might obviously timeout as we populate the db &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1549/workflows/e0e763fa-e847-45c0-82ed-34f394758cd9/jobs/80339/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/driftx/cassandra/1549/workflows/e0e763fa-e847-45c0-82ed-34f394758cd9/jobs/80339/tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17832853" author="brandon.williams" created="Mon, 1 Apr 2024 13:59:29 +0000"  >&lt;p&gt;I think they were just environmental since they didn&apos;t fail on the other branches.&lt;/p&gt;</comment>
                            <comment id="17832854" author="smiklosovic" created="Mon, 1 Apr 2024 14:01:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aleksey&quot; class=&quot;user-hover&quot; rel=&quot;aleksey&quot;&gt;aleksey&lt;/a&gt; do you want to have a look?&lt;/p&gt;</comment>
                            <comment id="17832856" author="smiklosovic" created="Mon, 1 Apr 2024 14:13:45 +0000"  >&lt;p&gt;BTW this ticket ... while it does what it should, if one starts to dig deeper, there are some not-so-obvious consequences of how hints delivery / deletion is done. For example, if one calls HintsServiceMBean.deleteAllHints (or deleteAllHintsForEndpoint), it will indeed delete the hints, but only these which are already on disk and for which writer is closed. That means that it will not delete hints which are in buffers or for which the writer is not closed yet. I consider this to be a bug. If a user invokes &quot;delete all hints&quot;, it should indeed delete them &lt;em&gt;ALL&lt;/em&gt;, in buffers included.&lt;/p&gt;

&lt;p&gt;The behavior described above, when it comes to this ticket, might have a consequence that if buffers are not cleared on deleting all hints, then once it goes to check if we should hint, it will look into &quot;what is the oldest hint&quot; in order to decide if we violated the threshold or not, and there will be no descriptors, indeed, that is fine, but buffers will not be cleared so it will resolve the oldest hint in buffers. So by deletion of hints, it wont be 100% &quot;reset&quot;.  On the other hand, when a node comes up online, all hints will be delivered and earliest hint record will be removed from the underlying map. &lt;/p&gt;

&lt;p&gt;edit: deletion / cleanup of all hints is done in HintsService.excise(uuid), it does close the writer hence flushes the buffers etc ... I think this should be applied to normal deletion too.&lt;/p&gt;</comment>
                            <comment id="17832865" author="brandon.williams" created="Mon, 1 Apr 2024 14:52:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;I see there are 3 instances of failing tests in multiplexer for trunk&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I restarted them again &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1549/workflows/eb577e9a-0937-4735-a8c9-dd932c54ec6f/jobs/80742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, let&apos;s see what happens.&lt;/p&gt;

&lt;p&gt;edit: they all passed, I don&apos;t think there&apos;s an issue.&lt;/p&gt;</comment>
                            <comment id="17833470" author="smiklosovic" created="Wed, 3 Apr 2024 09:40:52 +0000"  >&lt;p&gt;I&apos;ll merge this on Friday if there is no feedback.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12984" cascade-level=""><![CDATA[Degradation]]></customfieldvalue>
                                <customfieldvalue key="12997" cascade-level="1"><![CDATA[Performance Bug/Regression]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1o84o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
        <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12352689">4.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/5fb562d7efbad7bf9c2297a62991d36da90589e9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/5fb562d7efbad7bf9c2297a62991d36da90589e9&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;ci&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>