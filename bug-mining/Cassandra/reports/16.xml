<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:10:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-120] mutation replies are not correctly deserialized by originator</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-120</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;these lines in WriteResponseResolver&lt;/p&gt;

&lt;p&gt;			Object[] body = response.getMessageBody();&lt;br/&gt;
			WriteResponse writeResponse = (WriteResponse) body&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;cause this exception&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastExceptionException: [B cannot be cast to org.apache.cassandra.db.WriteResponse&lt;br/&gt;
	at org.apache.cassandra.service.WriteResponseResolver.resolve(WriteResponseResolver.java:50)&lt;br/&gt;
	at org.apache.cassandra.service.WriteResponseResolver.resolve(WriteResponseResolver.java:31)&lt;br/&gt;
	at org.apache.cassandra.service.QuorumResponseHandler.get(QuorumResponseHandler.java:101)&lt;br/&gt;
	at org.apache.cassandra.service.StorageProxy.insertBlocking(StorageProxy.java:132)&lt;/p&gt;

&lt;p&gt;because of course only byte[] is sent over the wire&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424213">CASSANDRA-120</key>
            <summary>mutation replies are not correctly deserialized by originator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Apr 2009 20:23:08 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:38 +0000</updated>
                            <resolved>Mon, 4 May 2009 19:05:14 +0000</resolved>
                                        <fixVersion>0.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12704769" author="jbellis" created="Thu, 30 Apr 2009 19:59:59 +0000"  >&lt;p&gt;05&lt;br/&gt;
    change Message body to byte[].  this reveals where there are problems: everything thatis using any of the send messages already needs to be doing that or they&apos;re broken.  the good ones I just unwrap; the broken ones I fixed except for MoveMessage which doesn&apos;t even have a byte[] serializer yet, so I left that one broken.  writeResponseResolver is the specific case that caused the bug report.&lt;/p&gt;

&lt;p&gt;04&lt;br/&gt;
    r/m DataImporter; it&apos;s not useful outside of FB&lt;/p&gt;

&lt;p&gt;03&lt;br/&gt;
    refactor HttpConnection to use its own executor instead of abusing MessagingService.  This will let us refactor Message body to a byte[].&lt;/p&gt;

&lt;p&gt;02&lt;br/&gt;
    add constructor to DTPE for most commonly used values (single thread, no timeout, LinkedBlockingQueue)&lt;/p&gt;

&lt;p&gt;01&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-120&quot; title=&quot;mutation replies are not correctly deserialized by originator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-120&quot;&gt;&lt;del&gt;CASSANDRA-120&lt;/del&gt;&lt;/a&gt; demonstrate the problem by checking insert return values (see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-102&quot; title=&quot;System tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-102&quot;&gt;&lt;del&gt;CASSANDRA-102&lt;/del&gt;&lt;/a&gt; for how to run the system tests)&lt;/p&gt;</comment>
                            <comment id="12705676" author="nk11" created="Mon, 4 May 2009 18:31:14 +0000"  >&lt;p&gt;Patches seem ok.&lt;br/&gt;
Tested also for one node only and error did not reproduce.&lt;/p&gt;</comment>
                            <comment id="12705688" author="jbellis" created="Mon, 4 May 2009 19:05:14 +0000"  >&lt;p&gt;thanks for the review!  committed.&lt;/p&gt;</comment>
                            <comment id="12706029" author="hudson" created="Tue, 5 May 2009 13:43:26 +0000"  >&lt;p&gt;Integrated in Cassandra #59 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/59/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/59/&lt;/a&gt;)&lt;br/&gt;
    change Message body to byte[].  this reveals where there are problems: everything that is using any of the send messages already needs to be doing that or they&apos;re broken.  the good ones I just unwrap; the broken ones I fixed except for MoveMessage which doesn&apos;t even have a byte[] serializer yet, so I left that one broken.  writeResponseResolver is the specific case that caused the bug report.&lt;br/&gt;
patch by jbellis; reviewed by nk11 for &lt;br/&gt;
r/m DataImporter; it&apos;s not useful outside of FB&lt;br/&gt;
patch by jbellis; reviewed by nk11 for &lt;br/&gt;
refactor HttpConnection to use its own executor instead of abusing MessagingService.  This will let us refactor Message body to a byte[].&lt;br/&gt;
patch by jbellis; reviewed by nk11 for &lt;br/&gt;
add constructor to DTPE for most commonly used values (single thread, no timeout, LinkedBlockingQueue)&lt;br/&gt;
patch by jbellis; reviewed by nk11 for &lt;br/&gt;
demonstrate problem with _blocking methods by checking insert return values.&lt;br/&gt;
patch by jbellis; reviewed by nk11 for &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12421771">CASSANDRA-34</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12406946" name="ASF.LICENSE.NOT.GRANTED--0001-CASSANDRA-120-demonstrate-the-problem-by-checking-inse.txt" size="6096" author="jbellis" created="Thu, 30 Apr 2009 19:58:50 +0000"/>
                            <attachment id="12406947" name="ASF.LICENSE.NOT.GRANTED--0002-add-constructor-to-DTPE-for-most-commonly-used-values.txt" size="10696" author="jbellis" created="Thu, 30 Apr 2009 19:58:50 +0000"/>
                            <attachment id="12406948" name="ASF.LICENSE.NOT.GRANTED--0003-refactor-HttpConnection-to-use-its-own-executor-instea.txt" size="64714" author="jbellis" created="Thu, 30 Apr 2009 19:58:50 +0000"/>
                            <attachment id="12406949" name="ASF.LICENSE.NOT.GRANTED--0004-r-m-DataImporter-it-s-not-useful-outside-of-FB.txt" size="49228" author="jbellis" created="Thu, 30 Apr 2009 19:58:50 +0000"/>
                            <attachment id="12406950" name="ASF.LICENSE.NOT.GRANTED--0005-change-Message-body-to-byte-.-this-reveals-where-the.txt" size="54831" author="jbellis" created="Thu, 30 Apr 2009 19:58:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19555</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fwzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90944</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>