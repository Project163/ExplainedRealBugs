<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:48:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8058] local consistency level during boostrap (may cause a write timeout on each write request)</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8058</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Hi, &lt;/p&gt;

&lt;p&gt;During bootstrap, for &lt;tt&gt;LOCAL_QUORUM&lt;/tt&gt; and &lt;tt&gt;LOCAL_ONE&lt;/tt&gt; consistencies, the &lt;tt&gt;DatacenterWriteResponseHandler&lt;/tt&gt; were waiting for pending remote endpoints.&lt;/p&gt;

&lt;p&gt;I think that&apos;s a regression, because it seems that it has been correctly implemented in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-833&quot; title=&quot;fix consistencylevel during bootstrap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-833&quot;&gt;&lt;del&gt;CASSANDRA-833&lt;/del&gt;&lt;/a&gt;, but removed later.&lt;/p&gt;

&lt;p&gt;It was specifically annoying in the case of &lt;tt&gt;RF=2&lt;/tt&gt; and &lt;tt&gt;cl=LOCAL_QUORUM&lt;/tt&gt;, because during a bootstrap of a remote node, all requests ended in &lt;tt&gt;WriteTimeout&lt;/tt&gt;, because they were waiting for a response that would never happen.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12745925">CASSANDRA-8058</key>
            <summary>local consistency level during boostrap (may cause a write timeout on each write request)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="minimarcel">Nicolas DOUILLET</assignee>
                                    <reporter username="minimarcel">Nicolas DOUILLET</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Oct 2014 15:59:23 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:32 +0000</updated>
                            <resolved>Sat, 11 Oct 2014 18:52:39 +0000</resolved>
                                        <fixVersion>2.0.11</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14160100" author="minimarcel" created="Mon, 6 Oct 2014 08:37:17 +0000"  >&lt;p&gt;In the same topic, I think that something else is not consistent, on bootstrapping, concerning the Unavailability. &lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;org.apache.cassandra.db.ConsistencyLevel#assureSufficientLiveNodes&lt;/tt&gt; we&apos;re using the concatenation of the natural endpoints and the pending endpoints to determine whether there is enough alive nodes. &lt;br/&gt;
The number of required nodes, in that case, is only based on the table configuration and the consistency level.&lt;/p&gt;

&lt;p&gt;However, later, in order to validate a write request, the way we compute the number of required nodes is slightly different because we&apos;re adding the number of pending nodes.&lt;/p&gt;

&lt;p&gt;I think that, during a bootstrap, some requests may end with a timeout, while they could/would had been detected as unavailable before.&lt;/p&gt;</comment>
                            <comment id="14162758" author="iamaleksey" created="Tue, 7 Oct 2014 23:13:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=minimarcel&quot; class=&quot;user-hover&quot; rel=&quot;minimarcel&quot;&gt;minimarcel&lt;/a&gt; does the issue affect Cassandra 2.0+ versions? We are done with the 1.2 line, so if it does, please change the fixver to 2.0. Thanks.&lt;/p&gt;</comment>
                            <comment id="14163832" author="minimarcel" created="Wed, 8 Oct 2014 17:36:30 +0000"  >&lt;p&gt;That&apos;s what I was suspected, but when you&apos;re saying you&apos;re done with the 1.2 line, does it mean that we&apos;ll not have a chance to have an other version?&lt;/p&gt;

&lt;p&gt;Yes, it affects Cassandra 2.0 and 2.1 versions.&lt;br/&gt;
I&apos;ve worked on the patch for Cassandra 2.0 that I will upload, and the patch for the 2.1 should come soon.&lt;/p&gt;</comment>
                            <comment id="14163835" author="iamaleksey" created="Wed, 8 Oct 2014 17:38:25 +0000"  >&lt;p&gt;Right. Now that 2.1 is the current line, and 2.0 is &apos;oldstable&apos;, the fix for 1.2 is to upgrade to 2.0.&lt;/p&gt;</comment>
                            <comment id="14163836" author="minimarcel" created="Wed, 8 Oct 2014 17:38:25 +0000"  >&lt;p&gt;Patch for 2.0&lt;/p&gt;</comment>
                            <comment id="14164070" author="minimarcel" created="Wed, 8 Oct 2014 20:06:31 +0000"  >&lt;p&gt;And the patch for v2.1&lt;/p&gt;</comment>
                            <comment id="14168297" author="iamaleksey" created="Sat, 11 Oct 2014 18:52:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think that&apos;s a regression, because it seems that it has been correctly implemented in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-833&quot; title=&quot;fix consistencylevel during bootstrap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-833&quot;&gt;&lt;del&gt;CASSANDRA-833&lt;/del&gt;&lt;/a&gt;, but removed later.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s not a regression - merely an oversight while adding LOCAL_ONE and LOCAL_QUORUM - an override of totalBlockFor() wasn&apos;t added then.&lt;/p&gt;

&lt;p&gt;Either way, I&apos;ve committed the patch (&lt;a href=&quot;https://github.com/apache/cassandra/commit/7497399d0be67b302c852ad92c37e60124b0a1e4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/7497399d0be67b302c852ad92c37e60124b0a1e4&lt;/a&gt;) - chose to reuse isLive() and countLocalEndpoints() from ConsistencyLevel instead of copying them over, though.&lt;/p&gt;

&lt;p&gt;Thanks for raising the issue and for the patches, and welcome to the contributors group (:&lt;/p&gt;</comment>
                            <comment id="14174043" author="minimarcel" created="Thu, 16 Oct 2014 18:07:23 +0000"  >&lt;p&gt;Hey!&lt;/p&gt;

&lt;p&gt;Thanks, I&apos;m glad to contribute to this huge product!&lt;br/&gt;
Yes you&apos;re right, I mean, I did not dare change the visibility of those methods &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;About the first comment, concerning the &lt;tt&gt;assureSufficientLiveNodes&lt;/tt&gt;, should I create a new issue ?&lt;/p&gt;
</comment>
                            <comment id="14175028" author="iamaleksey" created="Fri, 17 Oct 2014 12:53:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;About the first comment, concerning the assureSufficientLiveNodes, should I create a new issue ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure. Make it a Minor one though.&lt;/p&gt;</comment>
                            <comment id="14344295" author="iamaleksey" created="Tue, 3 Mar 2015 01:52:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;About the first comment, concerning the assureSufficientLiveNodes, should I create a new issue ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Are you still going to create that new issue?&lt;/p&gt;</comment>
                            <comment id="14359583" author="aboudreault" created="Thu, 12 Mar 2015 23:05:20 +0000"  >&lt;p&gt;dtest in progress for this: &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/194&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/riptano/cassandra-dtest/pull/194&lt;/a&gt; . Will mark as qa-resolved when merged.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12775794">CASSANDRA-8819</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12672947" name="0001-during-boostrap-block-only-for-local-pending-endpoin.patch.txt" size="1864" author="minimarcel" created="Sat, 4 Oct 2014 19:02:41 +0000"/>
                            <attachment id="12673634" name="0001-during-boostrap-block-only-for-local-pending-endpoint-v2.patch" size="1943" author="minimarcel" created="Wed, 8 Oct 2014 17:38:25 +0000"/>
                            <attachment id="12673685" name="0001-during-boostrap-block-only-for-local-pending-endpoints-v2-1.patch" size="1902" author="minimarcel" created="Wed, 8 Oct 2014 20:06:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[minimarcel]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20svz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327158">1.2.18</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aboudreault</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>