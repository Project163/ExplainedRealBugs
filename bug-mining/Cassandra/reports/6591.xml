<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:31:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-19385] ALTER ROLE WITH LOGIN=FALSE and REVOKE ROLE do not disconnect existing users</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-19385</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Currently, if users want to block a role from connecting to Cassandra, ALTER ROLE WITH LOGIN=FALSE and REVOKE ROLE seem like the sensible options. But these commands do not disconnect existing connections authenticated with the given role, and these connections will stay alive until they&apos;re disconnected for another reason. Subsequent attempts to connect with that role will fail.&lt;/p&gt;

&lt;p&gt;There is currently no way to disconnect all connections for a given user either. nodetool disablebinary will disconnect all client connections for a given node, and client sessions can be shut down. But in the case of a credential leak or a misconfigured user, it can be desirable to prevent login for a given role and disconnect all existing connections for that role.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13568049">CASSANDRA-19385</key>
            <summary>ALTER ROLE WITH LOGIN=FALSE and REVOKE ROLE do not disconnect existing users</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aratnofsky">Abe Ratnofsky</assignee>
                                    <reporter username="aratnofsky">Abe Ratnofsky</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Feb 2024 17:24:58 +0000</created>
                <updated>Fri, 31 Jan 2025 11:06:45 +0000</updated>
                            <resolved>Tue, 14 Jan 2025 20:42:18 +0000</resolved>
                                        <fixVersion>5.1</fixVersion>
                                    <component>Messaging/Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="17909402" author="JIRAUSER285406" created="Thu, 2 Jan 2025 18:59:28 +0000"  >&lt;p&gt;+1 (nb)&lt;/p&gt;</comment>
                            <comment id="17912647" author="aratnofsky" created="Mon, 13 Jan 2025 19:34:00 +0000"  >&lt;p&gt;CI is green besides one known flake, results summary attached.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Flake is: compaction_test.TestCompaction, covered by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-20148&quot; title=&quot;Test failure: compaction_test.py::TestCompaction::test_compaction_throughput &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-20148&quot;&gt;&lt;del&gt;CASSANDRA-20148&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17912653" author="frankgh" created="Mon, 13 Jan 2025 20:10:47 +0000"  >&lt;p&gt;+1 Thanks for the patch &lt;/p&gt;</comment>
                            <comment id="17912690" author="jonmeredith" created="Tue, 14 Jan 2025 01:15:04 +0000"  >&lt;p&gt;+1 &amp;#8211; thanks Abe.&lt;/p&gt;</comment>
                            <comment id="17912692" author="aratnofsky" created="Tue, 14 Jan 2025 01:16:28 +0000"  >&lt;p&gt;Thanks Bernardo, Francisco, Jon - submitting one last CI run now.&lt;/p&gt;</comment>
                            <comment id="17912855" author="smiklosovic" created="Tue, 14 Jan 2025 12:13:53 +0000"  >&lt;p&gt;Great patch! I&apos;ve never thought about this ... &lt;/p&gt;</comment>
                            <comment id="17912988" author="frankgh" created="Tue, 14 Jan 2025 17:17:44 +0000"  >&lt;p&gt;We talked about having two potential follow ups to this PR:&lt;/p&gt;

&lt;p&gt;1. When you connect using mTLS and you drop the identity from the role, i.e. &lt;tt&gt;DROP IDENTITY &apos;&amp;lt;identity&amp;gt;&apos;&lt;/tt&gt;, we currently do not disconnect mTLS connections. While the role still has access to the database, connections to the database with the mTLS identity are disallowed, so we should drop these connections as well.&lt;br/&gt;
2. Having a &lt;tt&gt;nodetool&lt;/tt&gt; command to disconnect a user without waiting for the background thread for the disconnection.&lt;/p&gt;</comment>
                            <comment id="17913046" author="aratnofsky" created="Tue, 14 Jan 2025 19:46:00 +0000"  >&lt;p&gt;Uploaded my latest test results ci_summary_9.html, after a few other attempts with several flakes. Still can&apos;t get a green run, but none of the failures seem relevant to my patch.&lt;/p&gt;</comment>
                            <comment id="17913049" author="frankgh" created="Tue, 14 Jan 2025 19:48:31 +0000"  >&lt;p&gt;Test results look good for the most part. There are 8 failures unrelated to the patch&lt;/p&gt;</comment>
                            <comment id="17913058" author="aratnofsky" created="Tue, 14 Jan 2025 20:05:50 +0000"  >&lt;p&gt;Rebased, squashed, updated CHANGES, pushed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13073961" name="ci_summary.html" size="20486" author="aratnofsky" created="Mon, 13 Jan 2025 19:32:47 +0000"/>
                            <attachment id="13073995" name="ci_summary_9.html" size="68106" author="aratnofsky" created="Tue, 14 Jan 2025 19:43:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aratnofsky]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12985" cascade-level=""><![CDATA[Security]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12975"><![CDATA[Code Inspection]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1nbqo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[frankgh]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12349241">5.x</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/aa5b8e3d3fdcc55fdde68a205f376673f8ce1f88&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/aa5b8e3d3fdcc55fdde68a205f376673f8ce1f88&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Unit tests&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>