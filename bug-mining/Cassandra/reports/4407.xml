<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:04:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12249] dtest failure in upgrade_tests.paging_test.TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x.basic_paging_test</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12249</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;example failure:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.8_dtest_upgrade/1/testReport/upgrade_tests.paging_test/TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x/basic_paging_test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-3.8_dtest_upgrade/1/testReport/upgrade_tests.paging_test/TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x/basic_paging_test&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Failed on CassCI build cassandra-3.8_dtest_upgrade #1&lt;/p&gt;

&lt;p&gt;This is on a mixed version cluster, one node is 3.0.8 and the other is 3.8-tentative.&lt;/p&gt;

&lt;p&gt;Stack trace looks like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [MessagingService-Incoming-/127.0.0.1] 2016-07-20 04:51:02,836 CassandraDaemon.java:201 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[MessagingService-Incoming-/127.0.0.1,5,main]
java.lang.AssertionError: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.cassandra.db.ReadCommand$LegacyPagedRangeCommandSerializer.deserialize(ReadCommand.java:1042) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.ReadCommand$LegacyPagedRangeCommandSerializer.deserialize(ReadCommand.java:964) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.MessageIn.read(MessageIn.java:98) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessage(IncomingTcpConnection.java:201) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessages(IncomingTcpConnection.java:178) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.run(IncomingTcpConnection.java:92) ~[apache-cassandra-3.0.8.jar:3.0.8]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This trace is from the 3.0.8 node.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12991157">CASSANDRA-12249</key>
            <summary>dtest failure in upgrade_tests.paging_test.TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x.basic_paging_test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thobbs">Tom Hobbs</assignee>
                                    <reporter username="philipthompson">Philip Thompson</reporter>
                        <labels>
                            <label>dtest</label>
                    </labels>
                <created>Wed, 20 Jul 2016 15:47:12 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:05 +0000</updated>
                            <resolved>Wed, 10 Aug 2016 16:14:47 +0000</resolved>
                                        <fixVersion>3.0.9</fixVersion>
                    <fixVersion>3.8</fixVersion>
                                    <component>Legacy/Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15386095" author="philipthompson" created="Wed, 20 Jul 2016 16:04:06 +0000"  >&lt;p&gt;Over two dozen tests are failing with this same error, this is just one example&lt;/p&gt;</comment>
                            <comment id="15386193" author="mshuler" created="Wed, 20 Jul 2016 16:49:21 +0000"  >&lt;p&gt;I believe this is a dupe of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12236&quot; title=&quot;RTE from new CDC column breaks in flight queries.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12236&quot;&gt;&lt;del&gt;CASSANDRA-12236&lt;/del&gt;&lt;/a&gt;, or at least depends on it being fixed, from the full node2_debug.log error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INFO  [SharedPool-Worker-1] 2016-07-20 04:50:56,533 Gossiper.java:994 - InetAddress /127.0.0.1 is now UP
DEBUG [SharedPool-Worker-1] 2016-07-20 04:50:56,534 MigrationManager.java:101 - Submitting migration task for /127.0.0.1
ERROR [MessagingService-Incoming-/127.0.0.1] 2016-07-20 04:50:56,568 CassandraDaemon.java:201 - Exception in thread Thread[MessagingService-Incoming-/127.0.0.1,5,main]
java.lang.RuntimeException: Unknown column cdc during deserialization
	at org.apache.cassandra.db.Columns$Serializer.deserialize(Columns.java:432) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.SerializationHeader$Serializer.deserializeForMessaging(SerializationHeader.java:427) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer.deserializeHeader(UnfilteredRowIteratorSerializer.java:190) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize30(PartitionUpdate.java:657) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize(PartitionUpdate.java:645) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.Mutation$MutationSerializer.deserialize(Mutation.java:344) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.Mutation$MutationSerializer.deserialize(Mutation.java:353) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.service.MigrationManager$MigrationsSerializer.deserialize(MigrationManager.java:609) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.service.MigrationManager$MigrationsSerializer.deserialize(MigrationManager.java:592) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.MessageIn.read(MessageIn.java:98) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessage(IncomingTcpConnection.java:201) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessages(IncomingTcpConnection.java:178) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.run(IncomingTcpConnection.java:92) ~[apache-cassandra-3.0.8.jar:3.0.8]
ERROR [MessagingService-Incoming-/127.0.0.1] 2016-07-20 04:50:56,623 CassandraDaemon.java:201 - Exception in thread Thread[MessagingService-Incoming-/127.0.0.1,5,main]
java.lang.RuntimeException: Unknown column cdc during deserialization
	at org.apache.cassandra.db.Columns$Serializer.deserialize(Columns.java:432) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.SerializationHeader$Serializer.deserializeForMessaging(SerializationHeader.java:427) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer.deserializeHeader(UnfilteredRowIteratorSerializer.java:190) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize30(PartitionUpdate.java:657) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize(PartitionUpdate.java:645) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.Mutation$MutationSerializer.deserialize(Mutation.java:344) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.Mutation$MutationSerializer.deserialize(Mutation.java:353) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.service.MigrationManager$MigrationsSerializer.deserialize(MigrationManager.java:609) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.service.MigrationManager$MigrationsSerializer.deserialize(MigrationManager.java:592) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.MessageIn.read(MessageIn.java:98) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessage(IncomingTcpConnection.java:201) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessages(IncomingTcpConnection.java:178) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.run(IncomingTcpConnection.java:92) ~[apache-cassandra-3.0.8.jar:3.0.8]
DEBUG [GossipStage:1] 2016-07-20 04:50:57,474 MigrationManager.java:101 - Submitting migration task for /127.0.0.1
ERROR [MessagingService-Incoming-/127.0.0.1] 2016-07-20 04:50:57,499 CassandraDaemon.java:201 - Exception in thread Thread[MessagingService-Incoming-/127.0.0.1,5,main]
java.lang.RuntimeException: Unknown column cdc during deserialization
	at org.apache.cassandra.db.Columns$Serializer.deserialize(Columns.java:432) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.SerializationHeader$Serializer.deserializeForMessaging(SerializationHeader.java:427) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer.deserializeHeader(UnfilteredRowIteratorSerializer.java:190) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize30(PartitionUpdate.java:657) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize(PartitionUpdate.java:645) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.Mutation$MutationSerializer.deserialize(Mutation.java:344) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.Mutation$MutationSerializer.deserialize(Mutation.java:353) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.service.MigrationManager$MigrationsSerializer.deserialize(MigrationManager.java:609) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.service.MigrationManager$MigrationsSerializer.deserialize(MigrationManager.java:592) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.MessageIn.read(MessageIn.java:98) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessage(IncomingTcpConnection.java:201) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessages(IncomingTcpConnection.java:178) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.run(IncomingTcpConnection.java:92) ~[apache-cassandra-3.0.8.jar:3.0.8]
DEBUG [MemtablePostFlush:1] 2016-07-20 04:51:02,569 ColumnFamilyStore.java:898 - forceFlush requested but everything is clean in test
DEBUG [SharedPool-Worker-1] 2016-07-20 04:51:02,573 ColumnFamilyStore.java:2015 - Discarding sstable data for truncated CF + indexes
DEBUG [MemtablePostFlush:1] 2016-07-20 04:51:02,573 ColumnFamilyStore.java:898 - forceFlush requested but everything is clean in test
DEBUG [SharedPool-Worker-1] 2016-07-20 04:51:02,583 ColumnFamilyStore.java:845 - Enqueuing flush of local: 701 (0%) on-heap, 0 (0%) off-heap
DEBUG [MemtableFlushWriter:1] 2016-07-20 04:51:02,584 Memtable.java:353 - Writing Memtable-local@2136174792(0.122KiB serialized bytes, 8 ops, 0%/0% of on/off-heap limit)
DEBUG [MemtableFlushWriter:1] 2016-07-20 04:51:02,590 Memtable.java:386 - Completed flushing /tmp/dtest-0XJz5q/test/node2/data1/system/local-7ad54392bcdd35a684174e047860b377/mb-14-big-Data.db (0.086KiB) for commitlog position ReplayPosition(segmentId=1468990226959, position=82251)
DEBUG [MemtablePostFlush:1] 2016-07-20 04:51:02,631 ColumnFamilyStore.java:898 - forceFlush requested but everything is clean in test2
DEBUG [SharedPool-Worker-1] 2016-07-20 04:51:02,632 ColumnFamilyStore.java:2015 - Discarding sstable data for truncated CF + indexes
DEBUG [MemtablePostFlush:1] 2016-07-20 04:51:02,634 ColumnFamilyStore.java:898 - forceFlush requested but everything is clean in test2
DEBUG [SharedPool-Worker-1] 2016-07-20 04:51:02,636 ColumnFamilyStore.java:845 - Enqueuing flush of local: 477 (0%) on-heap, 0 (0%) off-heap
DEBUG [MemtableFlushWriter:2] 2016-07-20 04:51:02,637 Memtable.java:353 - Writing Memtable-local@1897345792(0.091KiB serialized bytes, 1 ops, 0%/0% of on/off-heap limit)
DEBUG [MemtableFlushWriter:2] 2016-07-20 04:51:02,643 Memtable.java:386 - Completed flushing /tmp/dtest-0XJz5q/test/node2/data0/system/local-7ad54392bcdd35a684174e047860b377/mb-15-big-Data.db (0.063KiB) for commitlog position ReplayPosition(segmentId=1468990226959, position=82572)
ERROR [MessagingService-Incoming-/127.0.0.1] 2016-07-20 04:51:02,836 CassandraDaemon.java:201 - Exception in thread Thread[MessagingService-Incoming-/127.0.0.1,5,main]
java.lang.AssertionError: null
	at org.apache.cassandra.db.ReadCommand$LegacyPagedRangeCommandSerializer.deserialize(ReadCommand.java:1042) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.ReadCommand$LegacyPagedRangeCommandSerializer.deserialize(ReadCommand.java:964) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.MessageIn.read(MessageIn.java:98) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessage(IncomingTcpConnection.java:201) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessages(IncomingTcpConnection.java:178) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.run(IncomingTcpConnection.java:92) ~[apache-cassandra-3.0.8.jar:3.0.8]
ERROR [MessagingService-Incoming-/127.0.0.1] 2016-07-20 04:51:32,857 CassandraDaemon.java:201 - Exception in thread Thread[MessagingService-Incoming-/127.0.0.1,5,main]
java.lang.AssertionError: null
	at org.apache.cassandra.db.ReadCommand$LegacyPagedRangeCommandSerializer.deserialize(ReadCommand.java:1042) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.db.ReadCommand$LegacyPagedRangeCommandSerializer.deserialize(ReadCommand.java:964) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.MessageIn.read(MessageIn.java:98) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessage(IncomingTcpConnection.java:201) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.receiveMessages(IncomingTcpConnection.java:178) ~[apache-cassandra-3.0.8.jar:3.0.8]
	at org.apache.cassandra.net.IncomingTcpConnection.run(IncomingTcpConnection.java:92) ~[apache-cassandra-3.0.8.jar:3.0.8]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15386288" author="jmckenzie" created="Wed, 20 Jul 2016 17:51:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;: I&apos;d sit tight on this one until we get &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12236&quot; title=&quot;RTE from new CDC column breaks in flight queries.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12236&quot;&gt;&lt;del&gt;CASSANDRA-12236&lt;/del&gt;&lt;/a&gt; squared away.&lt;/p&gt;

&lt;p&gt;(edit: on a side note - the reason I assigned this one to you was that you&apos;ve been in related code lately on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11393&quot; title=&quot;dtest failure in upgrade_tests.upgrade_through_versions_test.ProtoV3Upgrade_2_1_UpTo_3_0_HEAD.rolling_upgrade_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11393&quot;&gt;&lt;del&gt;CASSANDRA-11393&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="15389544" author="jmckenzie" created="Fri, 22 Jul 2016 14:00:41 +0000"  >&lt;p&gt;Looks like this was broken by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11393&quot; title=&quot;dtest failure in upgrade_tests.upgrade_through_versions_test.ProtoV3Upgrade_2_1_UpTo_3_0_HEAD.rolling_upgrade_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11393&quot;&gt;&lt;del&gt;CASSANDRA-11393&lt;/del&gt;&lt;/a&gt; when we removed:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        if (version &amp;gt;= MessagingService.VERSION_30)
            return new MessageOut&amp;lt;&amp;gt;(MessagingService.Verb.RANGE_SLICE, this, serializer);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;from &lt;tt&gt;ReadCommand$LegacyPagedRangeCommandSerializer.deserialize&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15412381" author="rhatch" created="Mon, 8 Aug 2016 20:16:07 +0000"  >&lt;p&gt;I can get this consistently with:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;nosetests -v upgrade_tests/paging_test.py:TestPagingDataNodes3RF3_Upgrade_current_3_x_To_indev_3_x.test_paging_using_secondary_indexes&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For that particular test, I can see that the first page of results appears to be returned, but the remaining pages aren&apos;t.&lt;/p&gt;</comment>
                            <comment id="15412433" author="rhatch" created="Mon, 8 Aug 2016 20:45:33 +0000"  >&lt;p&gt;This issue appears to be the root cause of a number of CI test failures on the upgrade suites.&lt;/p&gt;</comment>
                            <comment id="15412558" author="jmckenzie" created="Mon, 8 Aug 2016 22:05:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;: Any chance you can take a look at this soon? This is causing quite a few upgrade test failures.&lt;/p&gt;</comment>
                            <comment id="15414098" author="blerer" created="Tue, 9 Aug 2016 19:30:34 +0000"  >&lt;p&gt;The patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11393&quot; title=&quot;dtest failure in upgrade_tests.upgrade_through_versions_test.ProtoV3Upgrade_2_1_UpTo_3_0_HEAD.rolling_upgrade_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11393&quot;&gt;&lt;del&gt;CASSANDRA-11393&lt;/del&gt;&lt;/a&gt; changes the way the communication is done between 3.x servers. This patch was supposed to go into 3.0.9 and 3.9, allowing the 2 versions to communicate together, but it seems that it went to 3.0.8 tentative. I am not sure how this happened as I thought I commited it into 3.9 before going in holidays.&lt;br/&gt;
I am also not sure how to fix it. Ideally, we should revert the patch in 3.8. &lt;/p&gt;</comment>
                            <comment id="15414153" author="thobbs" created="Tue, 9 Aug 2016 20:10:24 +0000"  >&lt;p&gt;I discussed this problem some with Benjamin.  Here&apos;s a summary of what&apos;s happening:&lt;/p&gt;

&lt;p&gt;The 3.x used to never send a &lt;tt&gt;PAGED_RANGE&lt;/tt&gt; verb message.  So, for backwards-compatibility handling, we always assumed that &lt;tt&gt;PAGED_RANGE&lt;/tt&gt; messages came from 2.x nodes.  However, &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11393&quot; title=&quot;dtest failure in upgrade_tests.upgrade_through_versions_test.ProtoV3Upgrade_2_1_UpTo_3_0_HEAD.rolling_upgrade_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11393&quot;&gt;&lt;del&gt;CASSANDRA-11393&lt;/del&gt;&lt;/a&gt; caused 3.x to start using &lt;tt&gt;PAGED_RANGE&lt;/tt&gt; again.  So, when the 3.0.8 node gets a &lt;tt&gt;PAGED_RANGE&lt;/tt&gt; message from the 3.8 node, it thinks it&apos;s from a 2.x node.&lt;/p&gt;

&lt;p&gt;The ideal fix is to make 3.x stop using &lt;tt&gt;PAGED_RANGE&lt;/tt&gt; again.  Without having looked into the code too deeply around this, it seems like we might have to pick the verb for the message at a later point in order to make this work.&lt;/p&gt;</comment>
                            <comment id="15414363" author="thobbs" created="Tue, 9 Aug 2016 22:33:15 +0000"  >&lt;p&gt;The patch specially handles &lt;tt&gt;PAGED_RANGE&lt;/tt&gt; verbs to convert them to &lt;tt&gt;RANGE_SLICE&lt;/tt&gt; verbs before sending the message.&lt;/p&gt;

&lt;p&gt;Patches and pending CI runs:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;testall&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;dtest&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-12249-3.8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-12249-3.8&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-12249-3.8-testall&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-12249-3.8-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-12249-3.9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-12249-3.9&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-12249-3.9-testall&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-12249-3.9-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-12249-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-12249-trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-12249-trunk-testall&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-12249-trunk-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhatch&quot; class=&quot;user-hover&quot; rel=&quot;rhatch&quot;&gt;rhatch&lt;/a&gt; can I get an upgrade test suite run on the &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12249&quot; title=&quot;dtest failure in upgrade_tests.paging_test.TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x.basic_paging_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12249&quot;&gt;&lt;del&gt;CASSANDRA-12249&lt;/del&gt;&lt;/a&gt;-3.8 branch?  I&apos;ve run the test in the title many times locally without a failure, but I&apos;d like to see more complete results.&lt;/p&gt;</comment>
                            <comment id="15414390" author="rhatch" created="Tue, 9 Aug 2016 22:51:35 +0000"  >&lt;p&gt;No problem &amp;#8211; job is here: &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-upgrade_thobbs_12249-3.8-upgrade/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-upgrade_thobbs_12249-3.8-upgrade/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The job should queue up soon as build #1. Should take maybe 4-6 hours once started (will run on ec2 w/10 nodes to match the last run of the 3.8 upgrade job).&lt;/p&gt;

&lt;p&gt;If you&apos;re using the autojobs setup, feel free to push branches with &apos;upgrade&apos; somewhere in the name, and the autojobs system will build an upgrade job for you which you can run on-demand. If you do that, I&apos;d suggest ec2 for now since openstack has been a bit more noisy thus far wrt upgrades.&lt;/p&gt;</comment>
                            <comment id="15414505" author="rhatch" created="Wed, 10 Aug 2016 00:31:04 +0000"  >&lt;p&gt;There was a dtest hiccup (should now be patched up), so I kicked off another build: &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-upgrade_thobbs_12249-3.8-upgrade/2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-upgrade_thobbs_12249-3.8-upgrade/2/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15414891" author="blerer" created="Wed, 10 Aug 2016 08:16:05 +0000"  >&lt;p&gt;The patch looks good to me and the failling tests seems to be caused by some other problems (one problem is obviously the fact that the alias error message has been changed in the code but not in the tests).&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Thanks for taking over &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15415511" author="thobbs" created="Wed, 10 Aug 2016 16:14:48 +0000"  >&lt;p&gt;Thanks, committed as &lt;tt&gt;465def8e295b453dc22430dc4bb7039f6921151e&lt;/tt&gt; to 3.0 and merged up.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12995711">CASSANDRA-12412</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12990807">CASSANDRA-12236</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12819129" name="node1.log" size="75676" author="philipthompson" created="Wed, 20 Jul 2016 15:47:13 +0000"/>
                            <attachment id="12819127" name="node1_debug.log" size="395003" author="philipthompson" created="Wed, 20 Jul 2016 15:47:13 +0000"/>
                            <attachment id="12819128" name="node1_gc.log" size="25253" author="philipthompson" created="Wed, 20 Jul 2016 15:47:13 +0000"/>
                            <attachment id="12819132" name="node2.log" size="49863" author="philipthompson" created="Wed, 20 Jul 2016 15:47:13 +0000"/>
                            <attachment id="12819130" name="node2_debug.log" size="201999" author="philipthompson" created="Wed, 20 Jul 2016 15:47:13 +0000"/>
                            <attachment id="12819131" name="node2_gc.log" size="23119" author="philipthompson" created="Wed, 20 Jul 2016 15:47:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i319n3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>blerer</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>