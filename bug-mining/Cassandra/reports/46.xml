<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:10:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-184] intermittent OneCompactionTest failure</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-184</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError                                              &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.cassandra.io.SSTable.delete(SSTable.java:223)                   &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.cassandra.db.ColumnFamilyStore.doFileCompaction(ColumnFamilyStore.java:1454)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.cassandra.db.ColumnFamilyStore.doCompaction(ColumnFamilyStore.java:896)     &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.cassandra.db.OneCompactionTest.testCompaction(OneCompactionTest.java:47)    &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.cassandra.db.OneCompactionTest.testCompaction2(OneCompactionTest.java:60)   &lt;/p&gt;</description>
                <environment></environment>
        <key id="12425622">CASSANDRA-184</key>
            <summary>intermittent OneCompactionTest failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 May 2009 20:55:41 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:37 +0000</updated>
                            <resolved>Wed, 20 May 2009 14:40:44 +0000</resolved>
                                        <fixVersion>0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12710391" author="jbellis" created="Mon, 18 May 2009 15:47:14 +0000"  >&lt;p&gt;OneCompactionTest is failing occasionally because 500 keys per CFS is actually triggering anautomatic compaction (since test flush threshold is only 20) and we were doing a non-threadsafe doCompaction for convenience: the failure occurs when our manual compaction begins mid-run of an automatic one, and the automatic deletesthe original sstable file first.  Fix by (a) dropping the number of keys so that OneCompactionTest lives up to its name (more are tested in &quot;CompactionsTest&quot;) and (b) making the compactions call threadsafe by refactoring to allow a threshold parameter to MCM.submit.&lt;/p&gt;</comment>
                            <comment id="12710392" author="jbellis" created="Mon, 18 May 2009 15:48:36 +0000"  >&lt;p&gt;patch for trunk that applies on top of the one for 0.3.  additional cleanup.&lt;/p&gt;</comment>
                            <comment id="12710445" author="junrao" created="Mon, 18 May 2009 18:51:46 +0000"  >&lt;p&gt;The patch looks fine to me. &lt;/p&gt;

&lt;p&gt;The following comment in CFS.storeLocation() confuses me:&lt;br/&gt;
        /* it&apos;s ok if compaction gets submitted multiple times while one is already in process.&lt;br/&gt;
           worst that happens is, compactor will count the sstable files and decide there are&lt;br/&gt;
           not enough to bother with. */&lt;/p&gt;

&lt;p&gt;With this patch, there can&apos;t be mutiple ongoing compactions, right?&lt;/p&gt;</comment>
                            <comment id="12710455" author="jbellis" created="Mon, 18 May 2009 19:11:09 +0000"  >&lt;p&gt;only one compaction can be in progress at a time, but flushes and compactions can happen concurrently (different executors) so a thread flushing CF A can schedule A for a compaction (i.e. submit the op on the MCM) even if A is currently being compacted.  the comment is explaining that when the MCM gets to that redundant compact the impact will be minimal.&lt;/p&gt;</comment>
                            <comment id="12711169" author="jbellis" created="Wed, 20 May 2009 14:40:44 +0000"  >&lt;p&gt;guess we are good here.  committed.&lt;/p&gt;</comment>
                            <comment id="12711616" author="hudson" created="Thu, 21 May 2009 13:10:36 +0000"  >&lt;p&gt;Integrated in Cassandra #83 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/83/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/83/&lt;/a&gt;)&lt;br/&gt;
    more cleanup of compaction code.&lt;br/&gt;
patch by jbellis; reviewed by Jun Rao for &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408387" name="184-0.3.patch" size="9319" author="jbellis" created="Mon, 18 May 2009 15:47:14 +0000"/>
                            <attachment id="12408388" name="184-trunk.patch" size="10508" author="jbellis" created="Mon, 18 May 2009 15:48:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19587</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fxdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91006</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>