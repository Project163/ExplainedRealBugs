<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:47:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7756] NullPointerException in getTotalBufferSize</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7756</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;18:59:50.499 &lt;span class=&quot;error&quot;&gt;&amp;#91;SharedPool-Worker-1&amp;#93;&lt;/span&gt; WARN  o.apache.cassandra.io.util.FileUtils - Failed closing /xxx/cassandra/data/pr1407782307/trigramindexcounter-d2817030218611e4b65c619763d48c52/pr1407782307-trigramindexcounter-ka-1-Data.db - chunk length 65536, data length 8199819.&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
 at org.apache.cassandra.io.util.RandomAccessReader.getTotalBufferSize(RandomAccessReader.java:157) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.io.compress.CompressedRandomAccessReader.getTotalBufferSize(CompressedRandomAccessReader.java:159) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.service.FileCacheService.sizeInBytes(FileCacheService.java:186) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.service.FileCacheService.put(FileCacheService.java:150) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.io.util.PoolingSegmentedFile.recycle(PoolingSegmentedFile.java:50) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.io.util.RandomAccessReader.close(RandomAccessReader.java:230) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.io.util.FileUtils.closeQuietly(FileUtils.java:222) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.columniterator.SSTableNamesIterator.&amp;lt;init&amp;gt;(SSTableNamesIterator.java:69) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.filter.NamesQueryFilter.getSSTableColumnIterator(NamesQueryFilter.java:89) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.filter.QueryFilter.getSSTableColumnIterator(QueryFilter.java:62) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.CollationController.collectAllData(CollationController.java:261) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.CollationController.getTopLevelColumns(CollationController.java:59) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.ColumnFamilyStore.getTopLevelColumns(ColumnFamilyStore.java:1873) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.ColumnFamilyStore.getColumnFamily(ColumnFamilyStore.java:1681) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.Keyspace.getRow(Keyspace.java:345) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.SliceByNamesReadCommand.getRow(SliceByNamesReadCommand.java:55) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.CounterMutation.getCurrentValuesFromCFS(CounterMutation.java:274) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.CounterMutation.getCurrentValues(CounterMutation.java:241) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.CounterMutation.processModifications(CounterMutation.java:209) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.db.CounterMutation.apply(CounterMutation.java:136) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.service.StorageProxy$8.runMayThrow(StorageProxy.java:1116) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:2065) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_65&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.concurrent.AbstractTracingAwareExecutorService$FutureTask.run(AbstractTracingAwareExecutorService.java:163) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:103) &lt;span class=&quot;error&quot;&gt;&amp;#91;cassandra-all-2.1.0-rc5.jar:2.1.0-rc5&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_65&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, OpenJDK 1.7&lt;/p&gt;</environment>
        <key id="12733517">CASSANDRA-7756</key>
            <summary>NullPointerException in getTotalBufferSize</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tjake">T Jake Luciani</assignee>
                                    <reporter username="shalupov">Leonid Shalupov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Aug 2014 15:27:11 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:37 +0000</updated>
                            <resolved>Fri, 15 Aug 2014 17:33:22 +0000</resolved>
                                        <fixVersion>2.0.10</fixVersion>
                    <fixVersion>2.1 rc6</fixVersion>
                                    <component>Legacy/Local Write-Read Paths</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14094166" author="shalupov" created="Tue, 12 Aug 2014 15:27:48 +0000"  >&lt;p&gt;Reproduced in 2.1.0-rc5, so &lt;a href=&quot;https://github.com/apache/cassandra/commit/900f29c7f7e1d563c4b0c63eae0da8877766813f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/900f29c7f7e1d563c4b0c63eae0da8877766813f&lt;/a&gt; does not fix it&lt;/p&gt;</comment>
                            <comment id="14095986" author="tjake" created="Wed, 13 Aug 2014 19:31:25 +0000"  >&lt;p&gt;This is the same race condition as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7278&quot; title=&quot;NPE in StorageProxy.java:1920&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7278&quot;&gt;&lt;del&gt;CASSANDRA-7278&lt;/del&gt;&lt;/a&gt; but a different method.&lt;/p&gt;

&lt;p&gt;Attached patches for 2.0 and 2.1&lt;/p&gt;
</comment>
                            <comment id="14096103" author="jbellis" created="Wed, 13 Aug 2014 20:54:10 +0000"  >&lt;p&gt;I don&apos;t think the same fix is appropriate for sizeInBytes, since poll() is destructive.  &lt;/p&gt;</comment>
                            <comment id="14096421" author="tjake" created="Thu, 14 Aug 2014 01:46:52 +0000"  >&lt;p&gt;Ah good point. v2 patch simply returns 0 size for null buffer.  Also added a unit test.&lt;/p&gt;</comment>
                            <comment id="14098772" author="jbellis" created="Fri, 15 Aug 2014 17:16:05 +0000"  >&lt;p&gt;LGTM.  I&apos;d just add a mention of this ticket to both the test and the comment in RAR.&lt;/p&gt;</comment>
                            <comment id="14098793" author="tjake" created="Fri, 15 Aug 2014 17:33:22 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12715693">CASSANDRA-7278</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12716099">CASSANDRA-7286</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12661513" name="7756-2.0.txt" size="769" author="tjake" created="Wed, 13 Aug 2014 19:32:02 +0000"/>
                            <attachment id="12661512" name="7756-2.1.txt" size="971" author="tjake" created="Wed, 13 Aug 2014 19:32:02 +0000"/>
                            <attachment id="12662094" name="7756-v2.txt" size="3795" author="tjake" created="Fri, 15 Aug 2014 17:03:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[tjake]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411545</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ysvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327541">2.1 rc5</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>