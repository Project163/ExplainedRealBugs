<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:57:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10066] Bring cqlsh into PEP8 compliance</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10066</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;In order for us to begin running flake8 against cqlsh.py in CI, it would be helpful if it were already PEP8 complaint, with the exception of using 120 character lines.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12855904">CASSANDRA-10066</key>
            <summary>Bring cqlsh into PEP8 compliance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="philipthompson">Philip Thompson</assignee>
                                    <reporter username="philipthompson">Philip Thompson</reporter>
                        <labels>
                            <label>cqlsh</label>
                    </labels>
                <created>Thu, 13 Aug 2015 16:31:34 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:00 +0000</updated>
                            <resolved>Fri, 11 Sep 2015 14:49:34 +0000</resolved>
                                        <fixVersion>2.1.10</fixVersion>
                    <fixVersion>2.2.2</fixVersion>
                    <fixVersion>3.0.0 rc1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14723863" author="philipthompson" created="Mon, 31 Aug 2015 18:56:17 +0000"  >&lt;p&gt;2.1 patch at &lt;a href=&quot;https://github.com/ptnapoleon/cassandra/tree/10066-2.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ptnapoleon/cassandra/tree/10066-2.1&lt;/a&gt;&lt;br/&gt;
2.2+ patch at &lt;a href=&quot;https://github.com/ptnapoleon/cassandra/tree/10066-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ptnapoleon/cassandra/tree/10066-2.2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2.1 dtest results at &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/ptnapoleon/job/ptnapoleon-10066-2.1-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/ptnapoleon/job/ptnapoleon-10066-2.1-dtest/&lt;/a&gt;&lt;br/&gt;
2.2 dtest results at &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/ptnapoleon/job/ptnapoleon-10066-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/ptnapoleon/job/ptnapoleon-10066-2.2-dtest/&lt;/a&gt;&lt;br/&gt;
3.0 dtest results at &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/ptnapoleon/job/ptnapoleon-10066-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/ptnapoleon/job/ptnapoleon-10066-3.0-dtest/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14723868" author="philipthompson" created="Mon, 31 Aug 2015 18:58:50 +0000"  >&lt;p&gt;One important change I want to point out is at &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...ptnapoleon:10066-2.2#diff-1cce67f7d76864f07aaf4d986d6fc051R2303&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/compare/trunk...ptnapoleon:10066-2.2#diff-1cce67f7d76864f07aaf4d986d6fc051R2303&lt;/a&gt; . 2.1 is already using self.hostname, which appears to be the correct behavior.&lt;/p&gt;

&lt;p&gt;The new import ordering was determined using isort. &lt;a href=&quot;https://github.com/timothycrosley/isort&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/timothycrosley/isort&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14723963" author="philipthompson" created="Mon, 31 Aug 2015 20:09:58 +0000"  >&lt;p&gt;Dtest results show this patch is horrible. Will fix and re-submit&lt;/p&gt;</comment>
                            <comment id="14729934" author="philipthompson" created="Thu, 3 Sep 2015 22:38:29 +0000"  >&lt;p&gt;Okay, branches are updated.&lt;/p&gt;</comment>
                            <comment id="14734107" author="stefania" created="Tue, 8 Sep 2015 01:31:21 +0000"  >&lt;p&gt;dtests look good.&lt;/p&gt;

&lt;p&gt;Patch also looks good but I am not sure how to check with &lt;tt&gt;pep8&lt;/tt&gt; so I simply tried the following command on the 2.1 patch and I got errors other than line too long (E501):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;stefi@lila:~/git/cstar/cassandra/bin$ pep8 cqlsh | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;E501&quot;&lt;/span&gt;
cqlsh:109:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:110:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:111:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:112:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:113:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:114:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:122:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:123:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:125:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:127:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:128:1: E402 module level &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; not at top of file
cqlsh:1841:17: E731 &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not assign a lambda expression, use a def
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Are these errors expected or not?&lt;/p&gt;</comment>
                            <comment id="14735446" author="philipthompson" created="Tue, 8 Sep 2015 19:18:34 +0000"  >&lt;p&gt;Are you using Python3? I&apos;m using pep8 and flake8 from Python 2.7.10 and not seeing those complaints.&lt;/p&gt;</comment>
                            <comment id="14735966" author="stefania" created="Wed, 9 Sep 2015 01:38:22 +0000"  >&lt;p&gt;Python 2.7.6, pep8 installed via pip:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;stefi@lila:~/git/cstar/cassandra$ python --version
Python 2.7.6
stefi@lila:~/git/cstar/cassandra$ which python
/usr/bin/python
stefi@lila:~/git/cstar/cassandra$ ll /usr/bin/python
lrwxrwxrwx 1 root root 24 Sep  5 19:14 /usr/bin/python -&amp;gt; /etc/alternatives/python*
stefi@lila:~/git/cstar/cassandra$ ll /etc/alternatives/python 
lrwxrwxrwx 1 root root 18 Sep  5 19:45 /etc/alternatives/python -&amp;gt; /usr/bin/python2.7*

stefi@lila:~/git/cstar/cassandra$ pep8 --version
1.6.2
stefi@lila:~/git/cstar/cassandra$ which pep8
/usr/local/bin/pep8
stefi@lila:~/git/cstar/cassandra$ ll /usr/local/bin/pep8 
-rwxr-xr-x 1 root root 207 Sep  7 14:44 /usr/local/bin/pep8*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you are sure the version of pep8 that runs on the CI machine is fine then I&apos;d say the patch is +1.&lt;/p&gt;
</comment>
                            <comment id="14737172" author="philipthompson" created="Wed, 9 Sep 2015 16:48:45 +0000"  >&lt;p&gt;Okay, so my local version of pep8 was out of date. The only potentially valid change in the remaining output is E731 on line 1841. Do we want to change that lambda to a function? It doesn&apos;t buy us much, honestly. But to ignore it in CI currently would ignore future E731 complaints, which may be more serious.&lt;/p&gt;</comment>
                            <comment id="14737897" author="stefania" created="Thu, 10 Sep 2015 00:42:29 +0000"  >&lt;p&gt;Well I&apos;ve just read the &lt;a href=&quot;http://legacy.python.org/dev/peps/pep-0008/#programming-recommendations&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pep 8 recommendations&lt;/a&gt; (5th bullet point) and the justification they give is that is it better for tracebacks and string representations to have a function name. It&apos;s up to you really, you can ignore this line with a &lt;tt&gt;# noqa&lt;/tt&gt; like Tyler suggested in IRC, or change it to a def function, or even loop on the row values and call &lt;tt&gt;writer.writerow&lt;/tt&gt; and &lt;tt&gt;format_value&lt;/tt&gt; for each value directly.&lt;/p&gt;

&lt;p&gt;One more question, what about &lt;em&gt;pylib/cqlshlib&lt;/em&gt;, does this also need to go into PEP8 compliance? &lt;/p&gt;</comment>
                            <comment id="14739147" author="philipthompson" created="Thu, 10 Sep 2015 17:10:07 +0000"  >&lt;p&gt;I&apos;ll update the patch to fix pylib/cqlshlib as well&lt;/p&gt;</comment>
                            <comment id="14739188" author="philipthompson" created="Thu, 10 Sep 2015 17:25:09 +0000"  >&lt;p&gt;Okay, now all of cqlshlib and cqlsh.py are pep8 compliant except for E501, E402, and E731. I think these are fine to ignore. The reason I chose to ignore all E731 is that &lt;tt&gt;# noqa&lt;/tt&gt; does not ignore all error types, and our current uses of lambdas seem fine. Any egregiously bad ones will be caught on review, hopefully. &lt;/p&gt;

&lt;p&gt;The command we&apos;ll be running on CI is &lt;tt&gt;pep8 --ignore E501,E402,E731 pylib/cqlshlib/*.py bin/cqlsh.py&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I also removed some unused imports reported by flake8, and fixed two typos. I could make these fully flake8 compliant, instead of just pep8, but it would require numerous uses of &lt;tt&gt;# noqa&lt;/tt&gt; inside cql3handling.py and cqlhandling.py, where flake8 isn&apos;t understanding our annotations very well. Thoughts there? The only difference, afaict, is we won&apos;t be catching unused imports automatically.&lt;/p&gt;</comment>
                            <comment id="14740461" author="stefania" created="Fri, 11 Sep 2015 09:17:05 +0000"  >&lt;p&gt;That was really a lot of work!&lt;/p&gt;

&lt;p&gt;Definitely +1 now, great job!&lt;/p&gt;</comment>
                            <comment id="14740836" author="philipthompson" created="Fri, 11 Sep 2015 13:49:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;, the branches are rebased and squashed, as you requested on IRC.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ptnapoleon/cassandra/tree/10066-2.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ptnapoleon/cassandra/tree/10066-2.1&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/ptnapoleon/cassandra/tree/10066-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ptnapoleon/cassandra/tree/10066-2.2&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/ptnapoleon/cassandra/tree/10066-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ptnapoleon/cassandra/tree/10066-3.0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14740931" author="slebresne" created="Fri, 11 Sep 2015 14:49:34 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13118677">CASSANDRA-14021</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[philipthompson]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ivv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stefania</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>