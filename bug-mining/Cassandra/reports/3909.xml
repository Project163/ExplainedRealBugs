<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:58:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10557] Streaming can throw exception when trying to retry</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10557</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Streaming can throw below exception when trying to retry.&lt;br/&gt;
This seems to be happening when underlining cause is not catched properly.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR 18:45:56 [Stream #9f95fa90-7691-11e5-931f-5b735851f84a] Streaming error occurred
java.lang.IllegalArgumentException: Unknown type 0
        at org.apache.cassandra.streaming.messages.StreamMessage$Type.get(StreamMessage.java:97) ~[main/:na]
        at org.apache.cassandra.streaming.messages.StreamMessage.deserialize(StreamMessage.java:58) ~[main/:na]
        at org.apache.cassandra.streaming.ConnectionHandler$IncomingMessageHandler.run(ConnectionHandler.java:261) ~[main/:na]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745) [na:1.8.0_45]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12906341">CASSANDRA-10557</key>
            <summary>Streaming can throw exception when trying to retry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yukim">Yuki Morishita</assignee>
                                    <reporter username="yukim">Yuki Morishita</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Oct 2015 19:23:27 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:52 +0000</updated>
                            <resolved>Tue, 3 Nov 2015 16:08:39 +0000</resolved>
                                        <fixVersion>2.1.12</fixVersion>
                    <fixVersion>2.2.4</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Legacy/Streaming and Messaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14965701" author="yukim" created="Tue, 20 Oct 2015 20:36:20 +0000"  >&lt;p&gt;Here are patches:&lt;/p&gt;

&lt;p&gt;2.1: &lt;a href=&quot;https://github.com/yukim/cassandra/tree/10557-2.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/yukim/cassandra/tree/10557-2.1&lt;/a&gt;&lt;br/&gt;
2.2: &lt;a href=&quot;https://github.com/yukim/cassandra/tree/10557-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/yukim/cassandra/tree/10557-2.2&lt;/a&gt;&lt;br/&gt;
3.0: &lt;a href=&quot;https://github.com/yukim/cassandra/tree/10557-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/yukim/cassandra/tree/10557-3.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tests are running on cassci so I will report back.&lt;/p&gt;</comment>
                            <comment id="14968115" author="yukim" created="Wed, 21 Oct 2015 22:55:36 +0000"  >&lt;p&gt;Tests&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2.1 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/yukim/job/yukim-10557-2.1-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/yukim/job/yukim-10557-2.1-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 2.2 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/yukim/job/yukim-10557-2.2-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/yukim/job/yukim-10557-2.2-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 3.0 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/yukim/job/yukim-10557-3.0-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/yukim/job/yukim-10557-3.0-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="14969257" author="pauloricardomg" created="Thu, 22 Oct 2015 14:51:39 +0000"  >&lt;p&gt;Is this the same issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10448&quot; title=&quot;&amp;quot;Unknown type 0&amp;quot; Stream failure on Repair&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10448&quot;&gt;&lt;del&gt;CASSANDRA-10448&lt;/del&gt;&lt;/a&gt;? Were you able to reproduce?&lt;/p&gt;

&lt;p&gt;Patch looks good and should help, but I don&apos;t understand how it relates to the &lt;tt&gt;java.lang.IllegalArgumentException: Unknown type 0&lt;/tt&gt; issue, because as per &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10557&quot; title=&quot;Streaming can throw exception when trying to retry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10557&quot;&gt;&lt;del&gt;CASSANDRA-10557&lt;/del&gt;&lt;/a&gt; logs there was no retry and that exception was not thrown during &lt;tt&gt;SSTableWriter.abort()&lt;/tt&gt; call. Could you please clarify?&lt;/p&gt;</comment>
                            <comment id="14974680" author="yukim" created="Mon, 26 Oct 2015 18:02:03 +0000"  >&lt;p&gt;This may relate to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10448&quot; title=&quot;&amp;quot;Unknown type 0&amp;quot; Stream failure on Repair&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10448&quot;&gt;&lt;del&gt;CASSANDRA-10448&lt;/del&gt;&lt;/a&gt;, but I&apos;m not sure since the log we got was not complete.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;there was no retry and that exception was not thrown during SSTableWriter.abort() call. Could you please clarify?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Streaming can try to read next message from the middle of failed stream, thus we need to drain unread data.&lt;br/&gt;
And I think that&apos;s the source of this &quot;Unknown type 0&quot; error.&lt;br/&gt;
&lt;tt&gt;SSTableWriter.abort()&lt;/tt&gt; can throw RuntimeException which is not handled by anything and if that happens it will leave incomplete stream.&lt;/p&gt;
</comment>
                            <comment id="14979312" author="pauloricardomg" created="Wed, 28 Oct 2015 21:56:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;SSTableWriter.abort() can throw RuntimeException which is not handled by anything and if that happens it will leave incomplete stream.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fair enough, lgtm. Thanks!&lt;/p&gt;</comment>
                            <comment id="14987427" author="slebresne" created="Tue, 3 Nov 2015 15:09:07 +0000"  >&lt;p&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yukim&quot; class=&quot;user-hover&quot; rel=&quot;yukim&quot;&gt;yukim&lt;/a&gt; Do you plan on committing?&lt;/p&gt;</comment>
                            <comment id="14987524" author="yukim" created="Tue, 3 Nov 2015 16:08:39 +0000"  >&lt;p&gt;Just committed.&lt;br/&gt;
Sorry I missed Paulo&apos;s last comment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yukim]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n96f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>pauloricardomg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[pauloricardomg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>