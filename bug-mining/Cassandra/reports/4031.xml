<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:00:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10944] ERROR [CompactionExecutor] CassandraDaemon.java  Exception in thread</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10944</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Hey. Please help me with a problem. Recently I updated to 3.0.1 and this problem appeared in the logs.&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:2596&amp;#93;&lt;/span&gt; 2015-12-28 08:30:27,733 CassandraDaemon.java:195 - Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:2596,1,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.AssertionError: null&lt;br/&gt;
	at org.apache.cassandra.db.rows.BufferCell.&amp;lt;init&amp;gt;(BufferCell.java:49) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BufferCell.tombstone(BufferCell.java:88) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BufferCell.tombstone(BufferCell.java:83) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BufferCell.purge(BufferCell.java:175) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData.lambda$purge$100(ComplexColumnData.java:165) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData$$Lambda$53/1339741213.apply(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree$FiltrationTracker.apply(BTree.java:614) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:657) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:632) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData.transformAndFilter(ComplexColumnData.java:170) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData.purge(ComplexColumnData.java:165) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData.purge(ComplexColumnData.java:43) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BTreeRow.lambda$purge$95(BTreeRow.java:333) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BTreeRow$$Lambda$52/1236900032.apply(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree$FiltrationTracker.apply(BTree.java:614) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:657) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:632) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BTreeRow.transformAndFilter(BTreeRow.java:338) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BTreeRow.purge(BTreeRow.java:333) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToRow(PurgeFunction.java:88) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.transform.BaseRows.hasNext(BaseRows.java:116) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.transform.UnfilteredRows.isEmpty(UnfilteredRows.java:38) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToPartition(PurgeFunction.java:64) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToPartition(PurgeFunction.java:24) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.transform.BasePartitions.hasNext(BasePartitions.java:76) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionIterator.hasNext(CompactionIterator.java:226) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionTask.runMayThrow(CompactionTask.java:177) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:78) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(AbstractCompactionTask.java:60) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompactionCandidate.run(CompactionManager.java:253) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.1.jar:3.0.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12924450">CASSANDRA-10944</key>
            <summary>ERROR [CompactionExecutor] CassandraDaemon.java  Exception in thread</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="leicozit">Alexey Ivanchin</reporter>
                        <labels>
                            <label>error</label>
                    </labels>
                <created>Mon, 28 Dec 2015 05:54:33 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:46 +0000</updated>
                            <resolved>Thu, 10 Mar 2016 10:35:41 +0000</resolved>
                                        <fixVersion>3.0.3</fixVersion>
                    <fixVersion>3.3</fixVersion>
                                    <component>Legacy/Local Write-Read Paths</component>
                    <component>Local/Compaction</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15073552" author="leicozit" created="Tue, 29 Dec 2015 06:45:42 +0000"  >&lt;p&gt;This error is reproduced on all cluster nodes periodically in exactly half an hour&lt;/p&gt;</comment>
                            <comment id="15081027" author="slebresne" created="Mon, 4 Jan 2016 11:21:35 +0000"  >&lt;p&gt;The reason for the &lt;tt&gt;AssertionError&lt;/tt&gt; is trivial: when the &lt;tt&gt;BufferCell.purge&lt;/tt&gt; method was transforming an expired but not yet gcable cell into a tombstone (to save the space of the value), the cell path of the cell was mistakenly not passed, which is pretty much a typo.&lt;/p&gt;

&lt;p&gt;Reproducing the error was more challenging due to a unrelated (minor) bug: the &lt;tt&gt;BufferCell.purge&lt;/tt&gt; is expecting the current time (of the compaction) in argument, but we were passing the &lt;tt&gt;gcBefore&lt;/tt&gt; value. The consequence being that the optimization that triggers this error was actually only taken when &lt;tt&gt;gcBefore&lt;/tt&gt; was exactly equal to the cell local deletion time. I do include a test that does that however to demonstrate the fix, but I also include a fix of that that second bug so that the code does what it&apos;s supposed to do.&lt;/p&gt;

&lt;p&gt;I&apos;ll note for the users affected that while this error will make the compaction that encounter it fail, it can be otherwise largely ignored: the next time compaction will kick in, the &lt;tt&gt;gcBefore&lt;/tt&gt; value will be different and this won&apos;t happen again.&lt;/p&gt;

&lt;p&gt;Patches and tests below:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; patch &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; utests &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; dtests &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/pcmanus/cassandra/commits/10944-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10944-3.0&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-10944-3.0-testall/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest results&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-10944-3.0-dtest/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest results&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/pcmanus/cassandra/commits/10944-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10944-trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-10944-trunk-testall/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest results&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-10944-trunk-dtest/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest results&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;(I&apos;ve ran the tests on 3.0 before and they looked ok (not clear, but all failures seems to be on the 3.0 branch too) but I&apos;ve rebased and re-submitted them on both branch so they are upcoming)&lt;/p&gt;</comment>
                            <comment id="15082965" author="krummas" created="Tue, 5 Jan 2016 12:25:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15083107" author="slebresne" created="Tue, 5 Jan 2016 14:18:42 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                            <comment id="15122630" author="nimi" created="Fri, 29 Jan 2016 00:44:34 +0000"  >&lt;p&gt;I got this error as well running a snapshot that should have this patch applied. The snapshot I&apos;m running is @ e66dcc70c510eacfc2e906e1a6f4d9a2708653b3 (Build #49 &lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.3/49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-3.3/49&lt;/a&gt;) &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [CompactionExecutor:647] 2016-01-28 14:47:37,562 CassandraDaemon.java:195 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[CompactionExecutor:647,1,main]
java.lang.AssertionError: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.cassandra.db.rows.BufferCell.&amp;lt;init&amp;gt;(BufferCell.java:49) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.BufferCell.tombstone(BufferCell.java:88) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.BufferCell.tombstone(BufferCell.java:83) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.BufferCell.purge(BufferCell.java:175) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.ComplexColumnData.lambda$purge$107(ComplexColumnData.java:165) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.ComplexColumnData$$Lambda$78/211947336.apply(Unknown Source) ~[na:na]
	at org.apache.cassandra.utils.btree.BTree$FiltrationTracker.apply(BTree.java:650) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:693) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:668) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.ComplexColumnData.transformAndFilter(ComplexColumnData.java:170) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.ComplexColumnData.purge(ComplexColumnData.java:165) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.ComplexColumnData.purge(ComplexColumnData.java:43) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.BTreeRow.lambda$purge$102(BTreeRow.java:333) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.BTreeRow$$Lambda$77/1008858370.apply(Unknown Source) ~[na:na]
	at org.apache.cassandra.utils.btree.BTree$FiltrationTracker.apply(BTree.java:650) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:693) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:668) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.BTreeRow.transformAndFilter(BTreeRow.java:338) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.rows.BTreeRow.purge(BTreeRow.java:333) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToRow(PurgeFunction.java:88) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.transform.BaseRows.hasNext(BaseRows.java:116) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.transform.UnfilteredRows.isEmpty(UnfilteredRows.java:38) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToPartition(PurgeFunction.java:64) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToPartition(PurgeFunction.java:24) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.transform.BasePartitions.hasNext(BasePartitions.java:76) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.compaction.CompactionIterator.hasNext(CompactionIterator.java:226) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.compaction.CompactionTask.runMayThrow(CompactionTask.java:177) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:78) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(AbstractCompactionTask.java:60) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompactionCandidate.run(CompactionManager.java:255) ~[apache-cassandra-3.2.jar:3.2-SNAPSHOT]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_45]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_45]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_45]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_45]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745) [na:1.8.0_45]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15155721" author="nimi" created="Sat, 20 Feb 2016 18:22:40 +0000"  >&lt;p&gt;Still getting this with 3.3. The table that is failing to compact is system_traces.sessions. The exact SSTable is &lt;a href=&quot;https://s3-us-west-1.amazonaws.com/channelmeter-misc/ma-22-big-Data.db&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3-us-west-1.amazonaws.com/channelmeter-misc/ma-22-big-Data.db&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will try scrubbing this table.&lt;/p&gt;</comment>
                            <comment id="15188854" author="leicozit" created="Thu, 10 Mar 2016 07:44:06 +0000"  >&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:2458&amp;#93;&lt;/span&gt; 2016-03-10 12:41:15,127 CassandraDaemon.java:195 - Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:2458,1,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.AssertionError: null&lt;br/&gt;
	at org.apache.cassandra.db.rows.BufferCell.&amp;lt;init&amp;gt;(BufferCell.java:49) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BufferCell.tombstone(BufferCell.java:88) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BufferCell.tombstone(BufferCell.java:83) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BufferCell.purge(BufferCell.java:175) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData.lambda$purge$107(ComplexColumnData.java:165) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData$$Lambda$68/1224572667.apply(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree$FiltrationTracker.apply(BTree.java:650) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:693) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:668) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData.transformAndFilter(ComplexColumnData.java:170) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData.purge(ComplexColumnData.java:165) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.ComplexColumnData.purge(ComplexColumnData.java:43) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BTreeRow.lambda$purge$102(BTreeRow.java:333) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BTreeRow$$Lambda$67/1968133513.apply(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree$FiltrationTracker.apply(BTree.java:650) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:693) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.btree.BTree.transformAndFilter(BTree.java:668) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BTreeRow.transformAndFilter(BTreeRow.java:338) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.rows.BTreeRow.purge(BTreeRow.java:333) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToRow(PurgeFunction.java:88) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.transform.BaseRows.hasNext(BaseRows.java:116) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.transform.UnfilteredRows.isEmpty(UnfilteredRows.java:38) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToPartition(PurgeFunction.java:64) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.partitions.PurgeFunction.applyToPartition(PurgeFunction.java:24) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.transform.BasePartitions.hasNext(BasePartitions.java:76) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionIterator.hasNext(CompactionIterator.java:226) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionTask.runMayThrow(CompactionTask.java:177) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:78) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(AbstractCompactionTask.java:60) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompactionCandidate.run(CompactionManager.java:264) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.3.0.jar:3.3.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="15189058" author="slebresne" created="Thu, 10 Mar 2016 10:36:52 +0000"  >&lt;p&gt;Can you guy open a separate issue please? I don&apos;t doubt you still get this but there has been code committed here so it&apos;s a different (even if related) problem and we want to keep track of which code has been committed to which version. Thanks.&lt;/p&gt;</comment>
                            <comment id="15205894" author="leicozit" created="Tue, 22 Mar 2016 06:43:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11353&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-11353&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qbzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12334609">3.3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>marcuse</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12334152">3.0.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>