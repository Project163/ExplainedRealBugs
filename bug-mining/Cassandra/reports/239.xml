<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:12:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-631] possible NPE in StorageProxy?</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-631</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;insert() in StorageProxy contains a logging statement that refers to a possibly un-initialized variable&lt;br/&gt;
{{{&lt;br/&gt;
logger.debug(&quot;insert writing key &quot; + rm.key() + &quot; to &quot; + unhintedMessage.getMessageId() + &quot;@&quot; + hintedTarget + &quot; for &quot; + target);&lt;br/&gt;
}}}&lt;/p&gt;

&lt;p&gt;this could happen if getHintedEndpointMap(rm.key(), naturalEndpoints) returns only elements for which target.equals(hintedTarget) returns false, which seems possible to me. &lt;/p&gt;

&lt;p&gt;Looking at the code I get the feeling the reference should probably be to &apos;hintedMessage&apos;, instead of &quot;unhintedMessage&quot;, if not so an &lt;br/&gt;
assert statement could be appropriate&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12443176">CASSANDRA-631</key>
            <summary>possible NPE in StorageProxy?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="riffraff">gabriele renzi</assignee>
                                    <reporter username="riffraff">gabriele renzi</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Dec 2009 12:27:22 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:30 +0000</updated>
                            <resolved>Sat, 12 Dec 2009 14:50:46 +0000</resolved>
                                        <fixVersion>0.5</fixVersion>
                    <fixVersion>0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="600">10m</timeoriginalestimate>
                            <timeestimate seconds="600">10m</timeestimate>
                                        <comments>
                            <comment id="12789731" author="riffraff" created="Sat, 12 Dec 2009 12:41:26 +0000"  >&lt;p&gt;changes the hunhinted -&amp;gt;hinted as per summary. &lt;/p&gt;

&lt;p&gt;The -tiny patch only does that change .&lt;/p&gt;

&lt;p&gt;The -big patch also removes other compile warnings from the file (generics, synthetic accessors) and avoids using useless allocations (Collections.max(Arrays.AsList(new ary&lt;span class=&quot;error&quot;&gt;&amp;#91;a,b&amp;#93;&lt;/span&gt;)) seems unnecessary when there is only the need to compare two objects and commons-lang already provides a good enough method)&lt;/p&gt;</comment>
                            <comment id="12789733" author="riffraff" created="Sat, 12 Dec 2009 12:43:37 +0000"  >&lt;p&gt;forgot to say: with both patches I have a tet failure &lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Testcase: testImportSuperCf(org.apache.cassandra.tools.SSTableImportTest):	Caused an ERROR&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Invalid localDeleteTime read: -2099059532&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.io.IOException: Invalid localDeleteTime read: -2099059532&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.db.SuperColumnSerializer.deserialize(SuperColumn.java:368)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.db.SuperColumnSerializer.deserialize(SuperColumn.java:1)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.db.filter.SSTableNamesIterator.&amp;lt;init&amp;gt;(SSTableNamesIterator.java:103)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.db.filter.NamesQueryFilter.getSSTableColumnIterator(NamesQueryFilter.java:69)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.tools.SSTableImportTest.testImportSuperCf(SSTableImportTest.java:63)&lt;/p&gt;

&lt;p&gt;at r889834 I also see it without the patches though &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12789748" author="jbellis" created="Sat, 12 Dec 2009 14:50:17 +0000"  >&lt;p&gt;applied -tiny to 0.5 and trunk, good catch.&lt;/p&gt;

&lt;p&gt;-big removes private from a bunch of variables for no reason, so left that part out, but applied the generics fixes to trunk (although fixing generics only to add in an ObjectUtils call requiring a cast seems a little schizophrenic to me; saving a 2-element array allocation in get_range_slice is like picking up a teaspoon of sand from the seashore &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12789777" author="riffraff" created="Sat, 12 Dec 2009 18:30:27 +0000"  >&lt;p&gt;Sorry, I wrote it in the patch comment but I failed to express myself clearly: in my setup I have basically all warnings turned on, and for access of private fields from inner classes there are some performance-related ones (the need for compiler-generated accessor methods) which are not present in case of package visibility. &lt;/p&gt;

&lt;p&gt;It&apos;s a silly reason but I just use all possible warnings (+pmd, +findbugs) in my code, and this happen to be in the set, I&apos;ll just turn this off if it seems unnecessary. Shall I update the CodeStyle wiki page to point this out?&lt;/p&gt;

&lt;p&gt;Same for generics, mostly a warning removal thingy. &lt;br/&gt;
Regarding ObjectUtils, we save an array, a list and an iterator object instantiation, so it&apos;s 3 spoons! (that should be probably optimized away with escape analysis anyway &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks for applying the patch. &lt;/p&gt;</comment>
                            <comment id="12789783" author="jbellis" created="Sat, 12 Dec 2009 20:39:45 +0000"  >&lt;p&gt;Interesting, I didn&apos;t know about that.&lt;/p&gt;

&lt;p&gt;But if it&apos;s actually in a performance sensitive place, wouldn&apos;t the JIT inlining will take care of it?&lt;/p&gt;</comment>
                            <comment id="12789863" author="riffraff" created="Sun, 13 Dec 2009 09:47:43 +0000"  >&lt;p&gt;you can check it with JAD if you disable the inner class analisys, the code &lt;br/&gt;
{{{&lt;br/&gt;
public class C {&lt;br/&gt;
  private static int var = 10;&lt;br/&gt;
  public static class Inner {&lt;br/&gt;
    public int meth()&lt;/p&gt;
{
      return var;
    }
&lt;p&gt;  }&lt;br/&gt;
}&lt;br/&gt;
}}}&lt;/p&gt;

&lt;p&gt;gives back from the C.class &lt;br/&gt;
{{{&lt;br/&gt;
public class C&lt;br/&gt;
{&lt;/p&gt;

&lt;p&gt;    public C()&lt;br/&gt;
    {&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    static int access$000()&lt;/p&gt;
    {
        return var;
    }

&lt;p&gt;    private static int var = 10;&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;}}}&lt;/p&gt;

&lt;p&gt;and for C$Inner.class&lt;br/&gt;
{{{&lt;br/&gt;
public class C$Inner&lt;br/&gt;
{&lt;/p&gt;

&lt;p&gt;    public C$Inner()&lt;br/&gt;
    {&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    public int meth()&lt;/p&gt;
    {
        return C.access$000();
    }
&lt;p&gt;}&lt;br/&gt;
}}}&lt;/p&gt;

&lt;p&gt;I &lt;em&gt;believe&lt;/em&gt; this is because inner classes had to be fitted over an existing class format in java 1.1, but I&apos;m not sure. &lt;/p&gt;


&lt;p&gt;I agree that these method are most probably going to be optimized away, as I said I just changed the code because they are in the default warnings set  and I can simply change my warnings setup (and eventually update the CodeStyle wiki so the next person who comes across them will know it).&lt;/p&gt;</comment>
                            <comment id="12792160" author="hudson" created="Thu, 17 Dec 2009 22:03:03 +0000"  >&lt;p&gt;Integrated in Cassandra #291 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/291/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/291/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12427820" name="CASSANDRA-631-big.patch" size="3913" author="riffraff" created="Sat, 12 Dec 2009 12:41:26 +0000"/>
                            <attachment id="12427819" name="CASSANDRA-631-tiny.patch" size="945" author="riffraff" created="Sat, 12 Dec 2009 12:41:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[riffraff]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g04f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>