<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:09:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13622] Better config validation/documentation</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13622</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;There are a number of properties in the yaml that are &quot;in_mb&quot;, however resolve to bytes when calculated in &lt;tt&gt;DatabaseDescriptor.java&lt;/tt&gt;, but are stored in int&apos;s. This means that their maximum values are 2047, as any higher when converted to bytes overflows the int.&lt;/p&gt;

&lt;p&gt;Where possible/reasonable we should convert these to be long&apos;s, and stored as long&apos;s. If there is no reason for the value to ever be &amp;gt;2047 we should at least document that as the max value, or better yet make it error if set higher than that. Noting that although it&apos;s bad practice to increase a lot of them to such high values, there may be cases where it is necessary and in which case we should handle it appropriately rather than overflowing and surprising the user. That is, causing it to break but not in the way the user expected it to &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Following are functions that currently could be at risk of the above:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;DatabaseDescriptor.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;getThriftFramedTransportSize()
getMaxValueSize()
getCompactionLargePartitionWarningThreshold()
getCommitLogSegmentSize()
getNativeTransportMaxFrameSize()
# These are in KB so max value of 2096128
getBatchSizeWarnThreshold()
getColumnIndexSize()
getColumnIndexCacheSize()
getMaxMutationSize()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note we may not actually need to fix all of these, and there may be more. This was just from a rough scan over the code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13081030">CASSANDRA-13622</key>
            <summary>Better config validation/documentation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jasonstack">Zhao Yang</assignee>
                                    <reporter username="KurtG">Kurt Greaves</reporter>
                        <labels>
                            <label>lhf</label>
                    </labels>
                <created>Tue, 20 Jun 2017 07:31:25 +0000</created>
                <updated>Fri, 15 May 2020 08:01:46 +0000</updated>
                            <resolved>Tue, 12 Sep 2017 14:35:34 +0000</resolved>
                                        <fixVersion>3.0.15</fixVersion>
                    <fixVersion>3.11.1</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16087060" author="jasonstack" created="Fri, 14 Jul 2017 09:04:27 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/jasonstack/cassandra/commits/CASSANDRA-13622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://circleci.com/gh/jasonstack/cassandra/153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unit&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; dtest: except for 1 known error in bootstrap_test &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;handled NPE when empty entry in storage_directories and handled overflow when converting to int32 KB from MB&lt;/p&gt;</comment>
                            <comment id="16091251" author="kurtg" created="Tue, 18 Jul 2017 08:00:34 +0000"  >&lt;p&gt;Not sure how keen I am on bounding commitlog_segment_size to 2GB. Obviously that&apos;s a ridiculous size for a segment, but I have had to increase it to 1.2GB in the past to allow a write through. Granted it was a side effect from MV&apos;s (I think it was streaming related), however the ability to do so helped. Obviously that&apos;s not great justification but I think it would be better to give it a much higher limit (store it as a long) and simply advise users (in docs+yaml) that they really shouldn&apos;t need to set it above the default. &lt;/p&gt;

&lt;p&gt;Same goes for max_value_size. I don&apos;t see any compelling reason we should stop people experimenting with that if they want to, as it&apos;s really just a safety net that the user configures. &lt;/p&gt;</comment>
                            <comment id="16099415" author="jasonstack" created="Tue, 25 Jul 2017 02:50:11 +0000"  >&lt;p&gt;That&apos;s java ByteBuffer restriction on 2GB.. &lt;/p&gt;</comment>
                            <comment id="16099448" author="kurtg" created="Tue, 25 Jul 2017 03:44:04 +0000"  >&lt;p&gt;Ah yeah didn&apos;t think about that. Well, guess that&apos;s as good as it will get then.&lt;/p&gt;</comment>
                            <comment id="16117920" author="jasonstack" created="Tue, 8 Aug 2017 06:23:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=KurtG&quot; class=&quot;user-hover&quot; rel=&quot;KurtG&quot;&gt;KurtG&lt;/a&gt; could you review it?&lt;/p&gt;</comment>
                            <comment id="16125102" author="kurtg" created="Mon, 14 Aug 2017 00:25:59 +0000"  >&lt;p&gt;LGTM. Probably worth also applying the changes to 3.0/3.11. &lt;/p&gt;</comment>
                            <comment id="16126960" author="jasonstack" created="Tue, 15 Aug 2017 08:46:24 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/jasonstack/cassandra/commits/CASSANDRA-13622-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/jasonstack/cassandra/commits/CASSANDRA-13622-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/jasonstack/cassandra/commits/CASSANDRA-13622-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Thanks for reviewing&lt;/p&gt;</comment>
                            <comment id="16138526" author="jasonstack" created="Wed, 23 Aug 2017 15:47:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=KurtG&quot; class=&quot;user-hover&quot; rel=&quot;KurtG&quot;&gt;KurtG&lt;/a&gt; could you have a look at the final patch before commiting? thanks&lt;/p&gt;</comment>
                            <comment id="16139396" author="kurtg" created="Thu, 24 Aug 2017 00:44:56 +0000"  >&lt;p&gt;Sorry missed the email for your last comment. CircleCI appears to have failed on &lt;a href=&quot;https://circleci.com/gh/jasonstack/cassandra/424#tests/containers/0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;. Might be related as it is testing DatabaseDescriptor. On that note probably wouldn&apos;t hurt to have some simple tests for these cases.&lt;/p&gt;

&lt;p&gt;Also the merge into trunk has an extra line in &lt;tt&gt;CHANGES.txt&lt;/tt&gt; before the change. The &lt;tt&gt;3.0.15&lt;/tt&gt; should be removed.&lt;/p&gt;

&lt;p&gt;Might want to rebase as well (sorry for my slowness :/)&lt;/p&gt;

&lt;p&gt;Also not a committer so will prod one to commit/review once tests are written/are working.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="16139732" author="jasonstack" created="Thu, 24 Aug 2017 07:53:36 +0000"  >&lt;p&gt;Thanks, rebased and build passed.&lt;/p&gt;</comment>
                            <comment id="16163035" author="adelapena" created="Tue, 12 Sep 2017 14:34:14 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/8fc9275d3020fa0c80ed1852726be0a5a63e487c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;8fc9275d3020fa0c80ed1852726be0a5a63e487c&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16163058" author="jasonstack" created="Tue, 12 Sep 2017 14:49:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=KurtG&quot; class=&quot;user-hover&quot; rel=&quot;KurtG&quot;&gt;KurtG&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt; thank you &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13076244">CASSANDRA-13565</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jasonstack]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gh9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>KurtG</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[KurtG]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>