<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:30:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3996] Keys index skips results</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3996</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;While scanning results page if range index meets result already seen in previous result set it decreases columnsRead that causes next iteration to treat columsRead&amp;lt;rowsPerQuery as if last page was not full and scan is done.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12545088">CASSANDRA-3996</key>
            <summary>Keys index skips results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xedin">Pavel Yaskevich</assignee>
                                    <reporter username="darkdimius">Dmitry Petrashko</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Mar 2012 11:03:45 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:38 +0000</updated>
                            <resolved>Tue, 27 Mar 2012 22:25:37 +0000</resolved>
                                        <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13221854" author="darkdimius" created="Sun, 4 Mar 2012 11:20:38 +0000"  >&lt;p&gt;This patch also refactors keysSearcher for more generic way. It creates method nextIndexKey for generic index searchers that is suitable for indexes that return results from multiple indexCfs rows.&lt;/p&gt;

&lt;p&gt;Created in Wikimart.ru&lt;/p&gt;</comment>
                            <comment id="13227347" author="darkdimius" created="Mon, 12 Mar 2012 07:25:02 +0000"  >&lt;p&gt;git diff output&lt;/p&gt;</comment>
                            <comment id="13228316" author="xedin" created="Tue, 13 Mar 2012 11:15:22 +0000"  >&lt;p&gt;Committed with CodeStyle refactoring, thanks!&lt;/p&gt;</comment>
                            <comment id="13228419" author="jbellis" created="Tue, 13 Mar 2012 15:00:14 +0000"  >&lt;p&gt;So...  is this a real bug fix?  We should add a test case if so and commit to 1.1.0 if not 1.0.9.&lt;/p&gt;</comment>
                            <comment id="13228431" author="xedin" created="Tue, 13 Mar 2012 15:18:44 +0000"  >&lt;p&gt;yeah, this is a real thing. Dmitry, can you work on the test-case? I have already committed it to 1.1.1, should I revert?&lt;/p&gt;</comment>
                            <comment id="13228468" author="jbellis" created="Tue, 13 Mar 2012 15:58:04 +0000"  >&lt;p&gt;it may or may not be easier to merge forwards if we revert the current changes first.  hard to say with git. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13231027" author="slebresne" created="Fri, 16 Mar 2012 10:23:05 +0000"  >&lt;p&gt;imho it&apos;s easier to revert and recommit to the right versions if only to ensure changelog entries ends up where they should.&lt;/p&gt;</comment>
                            <comment id="13232676" author="jbellis" created="Mon, 19 Mar 2012 15:18:59 +0000"  >&lt;p&gt;Reverted from 1.1 and trunk&lt;/p&gt;</comment>
                            <comment id="13239774" author="xedin" created="Tue, 27 Mar 2012 18:06:44 +0000"  >&lt;p&gt;This bug was introduced by (3297a96e1849f41d9c61f024282ed52d642e0794 - Merge get_indexed_slices with get_range_slices) in 1.1.0 and does not affect 1.0.x versions, attached patch adds test along side with updated code.&lt;/p&gt;</comment>
                            <comment id="13239991" author="xedin" created="Tue, 27 Mar 2012 22:06:06 +0000"  >&lt;p&gt;v2 with actual change to the KeysSearcher.getIndexedIterator method (no refactoring) and test-case.&lt;/p&gt;</comment>
                            <comment id="13239995" author="jbellis" created="Tue, 27 Mar 2012 22:12:33 +0000"  >&lt;p&gt;+1 on v2&lt;/p&gt;

&lt;p&gt;I&apos;m not necessarily against doing the rest of this refactor in another ticket, since &amp;#8211; and I think this is the goal &amp;#8211; it sets us up to do a merge of results from multiple indexes), but I&apos;d like to see more comments describing the code organization for a relatively large change like that.  (From a quick look, it also looks like changing &quot;return endOfData&quot; to &quot;resetState&quot; is unnecessary &amp;#8211; I prefer the former since it makes it clear that once you get to this point in the code, the iterator is finished.)&lt;/p&gt;</comment>
                            <comment id="13240007" author="xedin" created="Tue, 27 Mar 2012 22:25:37 +0000"  >&lt;p&gt;Committed v2. Agree with Jonathan, such refactoring could be done in the separate task. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12520201" name="CASSANDRA-3996-v2.patch" size="3489" author="xedin" created="Tue, 27 Mar 2012 22:06:05 +0000"/>
                            <attachment id="12520163" name="CASSANDRA-3996.patch" size="22254" author="xedin" created="Tue, 27 Mar 2012 18:06:44 +0000"/>
                            <attachment id="12517990" name="KeysSearcher_fix_and_refactor-v2.patch" size="15234" author="darkdimius" created="Mon, 12 Mar 2012 07:25:02 +0000"/>
                            <attachment id="12516991" name="KeysSearcher_fix_and_refactor.patch" size="26259" author="darkdimius" created="Sun, 4 Mar 2012 11:20:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gqr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95764</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>