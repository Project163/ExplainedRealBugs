<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:47:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7477] JSON to SSTable import failing</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7477</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Issue affects C* version &amp;gt;= 2.1. Commit found by using git bisect. The previous commit to this one also fails, but due to other reasons (CCM server won&apos;t start). This commit is the one that give the same error as 2.1 HEAD:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;02d1e7497a9930120fac367ce82a3b22940acafb is the first bad commit
commit 02d1e7497a9930120fac367ce82a3b22940acafb
Author: Brandon Williams &amp;lt;brandonwilliams@apache.org&amp;gt;
Date:   Mon Apr 21 14:42:29 2014 -0500

    Default flush dir to data dir.
    Patch by brandonwilliams, reviewed by yukim for CASSANDRA-7064

:040000 040000 c50a123f305b73583ccbfa9c455efc4e4cee228f 507a90290dccb8a929afadf1f833d926049c46ad M	conf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ PRINT_DEBUG=true nosetests -x -s -v json_tools_test.py 
json_tools_test (json_tools_test.TestJson) ... cluster ccm directory: /tmp/dtest-8WVBq9
Starting cluster...
Version: 2.1.0
Getting CQLSH...
Inserting data...
Flushing and stopping cluster...
Exporting to JSON file...
-- test-users-ka-1-Data.db -----

Deleting cluster and creating new...
Inserting data...
Importing JSON file...
Counting keys to import, please wait... (NOTE: to skip this use -n &amp;lt;num_keys&amp;gt;)
Importing 2 keys...
java.lang.ClassCastException: org.apache.cassandra.db.composites.Composites$EmptyComposite cannot be cast to org.apache.cassandra.db.composites.CellName
	at org.apache.cassandra.db.composites.AbstractCellNameType.cellFromByteBuffer(AbstractCellNameType.java:168)
	at org.apache.cassandra.tools.SSTableImport$JsonColumn.&amp;lt;init&amp;gt;(SSTableImport.java:165)
	at org.apache.cassandra.tools.SSTableImport.addColumnsToCF(SSTableImport.java:242)
	at org.apache.cassandra.tools.SSTableImport.addToStandardCF(SSTableImport.java:225)
	at org.apache.cassandra.tools.SSTableImport.importSorted(SSTableImport.java:464)
	at org.apache.cassandra.tools.SSTableImport.importJson(SSTableImport.java:351)
	at org.apache.cassandra.tools.SSTableImport.main(SSTableImport.java:575)
ERROR: org.apache.cassandra.db.composites.Composites$EmptyComposite cannot be cast to org.apache.cassandra.db.composites.CellName
Verifying import...
data: [[u&apos;gandalf&apos;, 1955, u&apos;male&apos;, u&apos;p@$$&apos;, u&apos;WA&apos;]]
FAIL
removing ccm cluster test at: /tmp/dtest-8WVBq9
ERROR

======================================================================
ERROR: json_tools_test (json_tools_test.TestJson)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;/home/kishan/git/cstar/cassandra-dtest/dtest.py&quot;, line 214, in tearDown
    raise AssertionError(&apos;Unexpected error in %s node log: %s&apos; % (node.name, errors))
AssertionError: Unexpected error in node1 node log: [&apos;ERROR [SSTableBatchOpen:1] 2014-06-30 13:56:01,032 CassandraDaemon.java:166 - Exception in thread Thread[SSTableBatchOpen:1,5,main]\n&apos;]
-------------------- &amp;gt;&amp;gt; begin captured logging &amp;lt;&amp;lt; --------------------
dtest: DEBUG: cluster ccm directory: /tmp/dtest-8WVBq9
dtest: DEBUG: Starting cluster...
dtest: DEBUG: Version: 2.1.0
dtest: DEBUG: Getting CQLSH...
dtest: DEBUG: Inserting data...
dtest: DEBUG: Flushing and stopping cluster...
dtest: DEBUG: Exporting to JSON file...
dtest: DEBUG: Deleting cluster and creating new...
dtest: DEBUG: Inserting data...
dtest: DEBUG: Importing JSON file...
dtest: DEBUG: Verifying import...
dtest: DEBUG: data: [[u&apos;gandalf&apos;, 1955, u&apos;male&apos;, u&apos;p@$$&apos;, u&apos;WA&apos;]]
dtest: DEBUG: removing ccm cluster test at: /tmp/dtest-8WVBq9
--------------------- &amp;gt;&amp;gt; end captured logging &amp;lt;&amp;lt; ---------------------

======================================================================
FAIL: json_tools_test (json_tools_test.TestJson)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;/home/kishan/git/cstar/cassandra-dtest/json_tools_test.py&quot;, line 91, in json_tools_test
    [u&apos;gandalf&apos;, 1955, u&apos;male&apos;, u&apos;p@$$&apos;, u&apos;WA&apos;] ] )
AssertionError: Element counts were not equal:
First has 0, Second has 1:  [u&apos;frodo&apos;, 1985, u&apos;male&apos;, u&apos;pass@&apos;, u&apos;CA&apos;]
First has 0, Second has 1:  [u&apos;sam&apos;, 1980, u&apos;male&apos;, u&apos;@pass&apos;, u&apos;NY&apos;]
-------------------- &amp;gt;&amp;gt; begin captured logging &amp;lt;&amp;lt; --------------------
dtest: DEBUG: cluster ccm directory: /tmp/dtest-8WVBq9
dtest: DEBUG: Starting cluster...
dtest: DEBUG: Version: 2.1.0
dtest: DEBUG: Getting CQLSH...
dtest: DEBUG: Inserting data...
dtest: DEBUG: Flushing and stopping cluster...
dtest: DEBUG: Exporting to JSON file...
dtest: DEBUG: Deleting cluster and creating new...
dtest: DEBUG: Inserting data...
dtest: DEBUG: Importing JSON file...
dtest: DEBUG: Verifying import...
dtest: DEBUG: data: [[u&apos;gandalf&apos;, 1955, u&apos;male&apos;, u&apos;p@$$&apos;, u&apos;WA&apos;]]
--------------------- &amp;gt;&amp;gt; end captured logging &amp;lt;&amp;lt; ---------------------

----------------------------------------------------------------------
Ran 1 test in 28.636s

FAILED (errors=1, failures=1)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Linux Mint 17 64-bit | 16GiB | C* 2.1&lt;/p&gt;</environment>
        <key id="12724552">CASSANDRA-7477</key>
            <summary>JSON to SSTable import failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mishail">Mikhail Stepura</assignee>
                                    <reporter username="kishkaru">Kishan Karunaratne</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jun 2014 21:17:09 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:41 +0000</updated>
                            <resolved>Fri, 15 Aug 2014 20:27:28 +0000</resolved>
                                        <fixVersion>2.1.0</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14048277" author="brandon.williams" created="Mon, 30 Jun 2014 22:58:11 +0000"  >&lt;p&gt;Rather certain you have bad bisect here, since that commit can&apos;t possibly cause this.&lt;/p&gt;</comment>
                            <comment id="14049437" author="kishkaru" created="Wed, 2 Jul 2014 00:03:17 +0000"  >&lt;p&gt;I believe you are right. However, with other bugs masking this one, it&apos;s hard to narrow down the issue to a specific commit.&lt;/p&gt;</comment>
                            <comment id="14050531" author="jbellis" created="Wed, 2 Jul 2014 18:30:41 +0000"  >&lt;p&gt;Could you tackle this, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mishail&quot; class=&quot;user-hover&quot; rel=&quot;mishail&quot;&gt;mishail&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14050954" author="mishail" created="Thu, 3 Jul 2014 01:19:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; I will, but not earlier than next Tuesday, so if it&apos;s a high priority, then assign it to someone else.&lt;/p&gt;</comment>
                            <comment id="14061825" author="mishail" created="Tue, 15 Jul 2014 08:15:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kishkaru&quot; class=&quot;user-hover&quot; rel=&quot;kishkaru&quot;&gt;kishkaru&lt;/a&gt; is it possible to share &lt;tt&gt;json_tools_test.py&lt;/tt&gt;? Or is there any other way to reproduce the problem?&lt;/p&gt;</comment>
                            <comment id="14061844" author="mishail" created="Tue, 15 Jul 2014 08:45:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kishkaru&quot; class=&quot;user-hover&quot; rel=&quot;kishkaru&quot;&gt;kishkaru&lt;/a&gt; I&apos;ve found that at &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/tree/json_tools&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/riptano/cassandra-dtest/tree/json_tools&lt;/a&gt;. But it gives me a different error (I&apos;m using the latest &lt;tt&gt;ccm&lt;/tt&gt; from git, and latest changes from 2.1.0 branch&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mstepura-mac:cassandra-dtest mikhail$ PRINT_DEBUG=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; nosetests -x -s -v json_tools_test.py
json_tools_test (json_tools_test.TestJson) ... cluster ccm directory: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/xl/w12639217y3041zwnjstr3lc0000gn/T/dtest-yrqnIG
Starting cluster...
[node1 ERROR] objc[52456]: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/bin/java and /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/jre/lib/libinstrument.dylib. One of the two will be used. Which one is undefined.
Version: 2.1.0
Getting CQLSH...
Inserting data...
Flushing and stopping cluster...
objc[52474]: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/bin/java and /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/jre/lib/libinstrument.dylib. One of the two will be used. Which one is undefined.
Exporting to JSON file...
-- test-users-ka-1-Data.db -----
objc[52476]: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/bin/java and /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/jre/lib/libinstrument.dylib. One of the two will be used. Which one is undefined.

Deleting cluster and creating &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;...
Inserting data...
objc[52510]: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/bin/java and /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/jre/lib/libinstrument.dylib. One of the two will be used. Which one is undefined.
Importing JSON file...
objc[52512]: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/bin/java and /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/jre/lib/libinstrument.dylib. One of the two will be used. Which one is undefined.
WARN  08:35:00 JNA link failure, one or more &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; method will be unavailable.
Counting keys to &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;, please wait... (NOTE: to skip &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; use -n &amp;lt;num_keys&amp;gt;)
org.codehaus.jackson.JsonParseException: Unexpected character (&lt;span class=&quot;code-quote&quot;&gt;&apos;W&apos;&lt;/span&gt; (code 87)): expected a valid value (number, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, array, object, &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;&lt;/span&gt; or &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&apos;&lt;/span&gt;)
 at [Source: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/xl/w12639217y3041zwnjstr3lc0000gn/T/tmppUlYbe.schema.json; line: 1, column: 2]
	at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1432)
	at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:385)
	at org.codehaus.jackson.impl.JsonParserMinimalBase._reportUnexpectedChar(JsonParserMinimalBase.java:306)
	at org.codehaus.jackson.impl.Utf8StreamParser._handleUnexpectedValue(Utf8StreamParser.java:2084)
	at org.codehaus.jackson.impl.Utf8StreamParser._nextTokenNotInObject(Utf8StreamParser.java:600)
	at org.codehaus.jackson.impl.Utf8StreamParser.nextToken(Utf8StreamParser.java:486)
	at org.apache.cassandra.tools.SSTableImport.importSorted(SSTableImport.java:360)
	at org.apache.cassandra.tools.SSTableImport.importJson(SSTableImport.java:282)
	at org.apache.cassandra.tools.SSTableImport.main(SSTableImport.java:494)
ERROR: Unexpected character (&lt;span class=&quot;code-quote&quot;&gt;&apos;W&apos;&lt;/span&gt; (code 87)): expected a valid value (number, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, array, object, &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;&lt;/span&gt; or &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&apos;&lt;/span&gt;)
 at [Source: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/xl/w12639217y3041zwnjstr3lc0000gn/T/tmppUlYbe.schema.json; line: 1, column: 2]
Verifying &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;...
data: [[u&lt;span class=&quot;code-quote&quot;&gt;&apos;gandalf&apos;&lt;/span&gt;, 1955, u&lt;span class=&quot;code-quote&quot;&gt;&apos;male&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;p@$$&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;WA&apos;&lt;/span&gt;]]
FAIL
removing ccm cluster test at: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/xl/w12639217y3041zwnjstr3lc0000gn/T/dtest-yrqnIG

======================================================================
FAIL: json_tools_test (json_tools_test.TestJson)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/mikhail/Documents/workspace/cassandra-dtest/json_tools_test.py&quot;&lt;/span&gt;, line 91, in json_tools_test
    [u&lt;span class=&quot;code-quote&quot;&gt;&apos;gandalf&apos;&lt;/span&gt;, 1955, u&lt;span class=&quot;code-quote&quot;&gt;&apos;male&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;p@$$&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;WA&apos;&lt;/span&gt;] ] )
AssertionError: Element counts were not equal:
First has 0, Second has 1:  [u&lt;span class=&quot;code-quote&quot;&gt;&apos;frodo&apos;&lt;/span&gt;, 1985, u&lt;span class=&quot;code-quote&quot;&gt;&apos;male&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;pass@&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;CA&apos;&lt;/span&gt;]
First has 0, Second has 1:  [u&lt;span class=&quot;code-quote&quot;&gt;&apos;sam&apos;&lt;/span&gt;, 1980, u&lt;span class=&quot;code-quote&quot;&gt;&apos;male&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;@pass&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;NY&apos;&lt;/span&gt;]
-------------------- &amp;gt;&amp;gt; begin captured logging &amp;lt;&amp;lt; --------------------
dtest: DEBUG: cluster ccm directory: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/xl/w12639217y3041zwnjstr3lc0000gn/T/dtest-yrqnIG
dtest: DEBUG: Starting cluster...
dtest: DEBUG: Version: 2.1.0
dtest: DEBUG: Getting CQLSH...
dtest: DEBUG: Inserting data...
dtest: DEBUG: Flushing and stopping cluster...
dtest: DEBUG: Exporting to JSON file...
dtest: DEBUG: Deleting cluster and creating &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;...
dtest: DEBUG: Inserting data...
dtest: DEBUG: Importing JSON file...
dtest: DEBUG: Verifying &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt;...
dtest: DEBUG: data: [[u&lt;span class=&quot;code-quote&quot;&gt;&apos;gandalf&apos;&lt;/span&gt;, 1955, u&lt;span class=&quot;code-quote&quot;&gt;&apos;male&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;p@$$&apos;&lt;/span&gt;, u&lt;span class=&quot;code-quote&quot;&gt;&apos;WA&apos;&lt;/span&gt;]]
--------------------- &amp;gt;&amp;gt; end captured logging &amp;lt;&amp;lt; ---------------------

----------------------------------------------------------------------
Ran 1 test in 26.402s

FAILED (failures=1)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14062598" author="kishkaru" created="Tue, 15 Jul 2014 20:25:31 +0000"  >&lt;p&gt;Here is the updated status, tested on various HEAD:&lt;br/&gt;
*Test fails on 1.2 branch: &quot;Error: Could not find or load main class org.apache.cassandra.service.CassandraDaemon&quot;&lt;br/&gt;
*Test passes on 2.0 branch&lt;br/&gt;
*Test fails on 2.1 branch with the above original error. Also fails on 2.1.0-rc3&lt;br/&gt;
*Test fails on 3.0/trunk branch with an unknown error (assertion fails)&lt;/p&gt;

&lt;p&gt;I wasn&apos;t able to replicate the error you got on any of the branches.&lt;/p&gt;</comment>
                            <comment id="14062982" author="mishail" created="Wed, 16 Jul 2014 01:46:11 +0000"  >&lt;p&gt;Here is the JSON file generated by &lt;tt&gt;node1.run_sstable2json(f)&lt;/tt&gt; on my laptop. The 1st line is causing that error&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;WARN  01:39:39 JNA link failure, one or more &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; method will be unavailable.
[
{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;73616d&quot;&lt;/span&gt;,
 &lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;,&quot;&lt;/span&gt;&quot;,1405474773128000],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;birth_year&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;1980&quot;&lt;/span&gt;,1405474773128000],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;gender&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;male&quot;&lt;/span&gt;,1405474773128000],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;@pass&quot;&lt;/span&gt;,1405474773128000],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;NY&quot;&lt;/span&gt;,1405474773128000]]},
{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;66726f646f&quot;&lt;/span&gt;,
 &lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;,&quot;&lt;/span&gt;&quot;,1405474773116000],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;birth_year&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;1985&quot;&lt;/span&gt;,1405474773116000],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;gender&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;male&quot;&lt;/span&gt;,1405474773116000],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;pass@&quot;&lt;/span&gt;,1405474773116000],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;CA&quot;&lt;/span&gt;,1405474773116000]]}
]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14063776" author="kishkaru" created="Wed, 16 Jul 2014 17:40:39 +0000"  >&lt;p&gt;That first line is the user_name cell in the users table. If it is indeed empty, then the problem is with the JSON exporting library/methods.&lt;br/&gt;
Interestingly even with that empty user_name, on branch 2.0 the import works and the proper user_name is actually imported from the JSON.&lt;/p&gt;</comment>
                            <comment id="14064312" author="mishail" created="Wed, 16 Jul 2014 23:10:14 +0000"  >&lt;p&gt;The first line of exported JSON is &lt;tt&gt;WARN  01:39:39 JNA link failure, one or more native method will be unavailable.&lt;/tt&gt;&lt;br/&gt;
So import fails on my system. I&apos;ll try to find a workaround&lt;/p&gt;</comment>
                            <comment id="14097876" author="mishail" created="Thu, 14 Aug 2014 23:02:55 +0000"  >&lt;p&gt;SSTableImport fails to handle CQL row marker, i.e the case when &lt;tt&gt;AbstractCellNameType.cellFromByteBuffer&lt;/tt&gt; gets {{EmptyComposite }} as an input&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ClassCastException: org.apache.cassandra.db.composites.Composites$EmptyComposite cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to org.apache.cassandra.db.composites.CellName
	at org.apache.cassandra.db.composites.AbstractCellNameType.cellFromByteBuffer(AbstractCellNameType.java:187)
	at org.apache.cassandra.tools.SSTableImport$JsonColumn.&amp;lt;init&amp;gt;(SSTableImport.java:143)
	at org.apache.cassandra.tools.SSTableImport.addColumnsToCF(SSTableImport.java:208)
	at org.apache.cassandra.tools.SSTableImport.importSorted(SSTableImport.java:387)
	at org.apache.cassandra.tools.SSTableImport.importJson(SSTableImport.java:280)
	at org.apache.cassandra.tools.SSTableImport.main(SSTableImport.java:507)
ERROR: org.apache.cassandra.db.composites.Composites$EmptyComposite cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to org.apache.cassandra.db.composites.CellName
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14097924" author="mishail" created="Thu, 14 Aug 2014 23:49:47 +0000"  >&lt;p&gt;Attaching a patch to hanlde CQL row markers in SSTableImport.&lt;/p&gt;</comment>
                            <comment id="14098761" author="thobbs" created="Fri, 15 Aug 2014 17:01:57 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;It may be worth adding a check that we have a compound sparse table (i.e. check &lt;tt&gt;cfm.isCql3Table()&lt;/tt&gt;) so that the error is better if the json is malformed.&lt;/p&gt;</comment>
                            <comment id="14098937" author="mishail" created="Fri, 15 Aug 2014 18:55:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt; v2 adds a check for &lt;tt&gt;cfm.isCql3Table()&lt;/tt&gt; and couple of unit-tests&lt;/p&gt;</comment>
                            <comment id="14098946" author="thobbs" created="Fri, 15 Aug 2014 19:04:23 +0000"  >&lt;p&gt;Thanks for the tests!&lt;/p&gt;

&lt;p&gt;+1 on the v2 patch.&lt;/p&gt;</comment>
                            <comment id="14099067" author="mishail" created="Fri, 15 Aug 2014 20:27:28 +0000"  >&lt;p&gt;Committed, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12662124" name="CASSANDRA-2.1.0-7477-v2.patch" size="6647" author="mishail" created="Fri, 15 Aug 2014 18:55:16 +0000"/>
                            <attachment id="12661937" name="CASSANDRA-2.1.0-7477.patch" size="1672" author="mishail" created="Thu, 14 Aug 2014 23:49:47 +0000"/>
                            <attachment id="12653468" name="log2.log" size="2154" author="kishkaru" created="Tue, 1 Jul 2014 21:08:49 +0000"/>
                            <attachment id="12661921" name="schema.json" size="497" author="mishail" created="Thu, 14 Aug 2014 22:53:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mishail]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xbi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327541">2.1 rc5</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324159">2.1 rc3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>kishkaru</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>