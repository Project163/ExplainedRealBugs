<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:17:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16246] Unexpected warning &quot;Ignoring Unrecognized strategy option&quot; for NetworkTopologyStrategy when restarting</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16246</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;During restarting, bunch of warning messages like &quot;AbstractReplicationStrategy.java:364 - Ignoring Unrecognized strategy option &lt;/p&gt;
{datacenter2}
&lt;p&gt; passed to NetworkTopologyStrategy for keyspace distributed_test_keyspace&quot; are logged. &lt;br/&gt;
The warnings are not expected since the mentioned DC exist. &lt;br/&gt;
It seems to be caused by the improper order during startup, so that when opening keyspaces it is unaware of DCs. &lt;/p&gt;

&lt;p&gt;The warning can be reproduced using the test below. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testEmitsWarningsForNetworkTopologyStategyConfigOnRestart() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; nodesPerDc = 2;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (Cluster cluster = builder().withConfig(c -&amp;gt; c.with(GOSSIP, NETWORK))
                                    .withRacks(2, 1, nodesPerDc)
                                    .start()) {
        cluster.schemaChange(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE KEYSPACE &quot;&lt;/span&gt; + KEYSPACE +
                             &lt;span class=&quot;code-quote&quot;&gt;&quot; WITH replication = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NetworkTopologyStrategy&apos;&lt;/span&gt;, &quot;&lt;/span&gt; +
                             &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;datacenter1&apos;&lt;/span&gt; : &quot;&lt;/span&gt; + nodesPerDc + &lt;span class=&quot;code-quote&quot;&gt;&quot;, &lt;span class=&quot;code-quote&quot;&gt;&apos;datacenter2&apos;&lt;/span&gt; : &quot;&lt;/span&gt; + nodesPerDc + &lt;span class=&quot;code-quote&quot;&gt;&quot; };&quot;&lt;/span&gt;);
        cluster.get(2).nodetool(&lt;span class=&quot;code-quote&quot;&gt;&quot;flush&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Stop node 2 in datacenter 1&quot;&lt;/span&gt;);
        cluster.get(2).shutdown().get();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Start node 2 in datacenter 1&quot;&lt;/span&gt;);
        cluster.get(2).startup();
        List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; result = cluster.get(2).logs().grep(&lt;span class=&quot;code-quote&quot;&gt;&quot;Ignoring Unrecognized strategy option \\{datacenter2\\}&quot;&lt;/span&gt;).getResult();
        Assert.assertFalse(result.isEmpty());
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13339086">CASSANDRA-16246</key>
            <summary>Unexpected warning &quot;Ignoring Unrecognized strategy option&quot; for NetworkTopologyStrategy when restarting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yifanc">Yifan Cai</assignee>
                                    <reporter username="yifanc">Yifan Cai</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Nov 2020 21:08:36 +0000</created>
                <updated>Mon, 24 Jul 2023 06:49:15 +0000</updated>
                            <resolved>Fri, 13 Nov 2020 13:57:17 +0000</resolved>
                                        <fixVersion>4.0-beta4</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Observability/Logging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17227170" author="yifanc" created="Fri, 6 Nov 2020 05:14:43 +0000"  >&lt;p&gt;The cause is that when creating NetworkTopologyStategy of keyspaces during &lt;tt&gt;CassandraDaemon#setup&lt;/tt&gt;, the tokenMetadata does not have hostIds populated from the saved hostIds. &lt;tt&gt;Datacenters#getValidDatacenters&lt;/tt&gt; is unable to lookup the remote DCs and &lt;tt&gt;ConfigurationException&lt;/tt&gt; is thrown later. &lt;/p&gt;

&lt;p&gt;To fix the unexpected warning message, the &lt;tt&gt;StorageService#populateTokenMetadata&lt;/tt&gt; is updated to also load the &lt;tt&gt;hostId -&amp;gt; endpoint&lt;/tt&gt; map from the saved hostIds. &lt;/p&gt;

&lt;p&gt;PR: &lt;a href=&quot;https://github.com/apache/cassandra/pull/810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/810&lt;/a&gt;&lt;br/&gt;
CI: &lt;a href=&quot;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=C-16246-warn-networktopologystrategy-restart&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=C-16246-warn-networktopologystrategy-restart&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17230817" author="beobal" created="Thu, 12 Nov 2020 17:39:40 +0000"  >&lt;p&gt;This diagnosis and solution looks right to me. I just have a couple of suggestions to tidy up a bit, partly because the original reason for reloading the ring state after the shadow gossip round no longer applies since &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12653&quot; title=&quot;In-flight shadow round requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12653&quot;&gt;&lt;del&gt;CASSANDRA-12653&lt;/del&gt;&lt;/a&gt;. I&apos;ve pushed them to &lt;a href=&quot;https://github.com/beobal/cassandra/commits/beobal/16246-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this branch&lt;/a&gt; (&lt;a href=&quot;https://app.circleci.com/pipelines/github/beobal/cassandra?branch=beobal%2F16246-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17230973" author="yifanc" created="Thu, 12 Nov 2020 21:29:34 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt;! The simplification looks good. I have cherry-picked your commit and updated in the branch. &lt;/p&gt;</comment>
                            <comment id="17231471" author="beobal" created="Fri, 13 Nov 2020 13:55:40 +0000"  >&lt;p&gt;Thanks, LGTM&lt;/p&gt;</comment>
                            <comment id="17231475" author="beobal" created="Fri, 13 Nov 2020 13:57:17 +0000"  >&lt;p&gt;Committed to trunk in&#160;&lt;tt&gt;fde640fe52704836ec21fedd62cae21290e099ec&lt;/tt&gt;, thanks!&lt;/p&gt;</comment>
                            <comment id="17746090" author="manmagic3" created="Sun, 23 Jul 2023 15:26:56 +0000"  >&lt;p&gt;I am seeing these warnings in nodes of my DC1 for DC2 for Cassandra 4.0.10. What could be the reason. DC2 exists in our case. Nodes in DC2 are not showing such messages.&lt;/p&gt;

&lt;p&gt;2023-07-23 17:03:09,706 AbstractReplicationStrategy.java:337 - Ignoring Unrecognized strategy option {DC2} passed to NetworkTopologyStrategy for keyspace keyspace_name.&lt;/p&gt;

&lt;p&gt;Identified this issue when upgrading from 3.11.13 to Cassandra 4.0.10. Also saw similar logs when upgraded from Cassandra 3.11.13 to Cassandra 4.0.5.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yifanc]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="13163" cascade-level=""><![CDATA[Code]]></customfieldvalue>
                                <customfieldvalue key="13164" cascade-level="1"><![CDATA[Bug - Unclear Impact]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kbrs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333891">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/fde640fe52704836ec21fedd62cae21290e099ec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/fde640fe52704836ec21fedd62cae21290e099ec&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;ci, jvm dtest&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>