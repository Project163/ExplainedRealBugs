<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:04:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11866] nodetool repair does not obey the column family parameter when -st and -et are provided (subrange repair)</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11866</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Command 1: Repairs all the CFs in ADL_GLOBAL keyspace and ignores the parameter AssetModifyTimes_data used to restrict the CFs&lt;br/&gt;
Executing: /aladdin/local/apps/apache-cassandra-2.1.8a/bin/nodetool -h localhost -p 7199 -u user-pw ****** repair ADL_GLOBAL AssetModifyTimes_data -st 205279477618143669 -et 230991685737746901 -par&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:31:39,116&amp;#93;&lt;/span&gt; Starting repair command #9, repairing 1 ranges for keyspace ADL_GLOBAL (parallelism=PARALLEL, full=true)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:32:21,568&amp;#93;&lt;/span&gt; Repair session 3cae2530-1ed2-11e6-b490-d9df6932c7cf for range (205279477618143669,230991685737746901] finished&lt;/p&gt;

&lt;p&gt;Command 2: Repairs all the CFs in ADL_GLOBAL keyspace and ignores the parameter AssetModifyTimes_data used to restrict the CFs&lt;br/&gt;
Executing: /aladdin/local/apps/apache-cassandra-2.1.8a/bin/nodetool -h localhost -p 7199 -u controlRole -pw ****** repair -st 205279477618143669 -et 230991685737746901 -par &amp;#8211; ADL_GLOBAL AssetModifyTimes_data&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:36:34,473&amp;#93;&lt;/span&gt; Starting repair command #10, repairing 1 ranges for keyspace ADL_GLOBAL (parallelism=PARALLEL, full=true)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:37:15,365&amp;#93;&lt;/span&gt; Repair session ecb996d0-1ed2-11e6-b490-d9df6932c7cf for range (205279477618143669,230991685737746901] finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:37:15,365&amp;#93;&lt;/span&gt; Repair command #10 finished&lt;/p&gt;

&lt;p&gt;Command 3: Repairs only the CF ADL3Test1_data in keyspace ADL_GLOBAL&lt;br/&gt;
Executing: /aladdin/local/apps/apache-cassandra-2.1.8a/bin/nodetool -h localhost -p 7199 -u controlRole -pw ****** repair &amp;#8211; ADL_GLOBAL ADL3Test1_data&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:38:35,781&amp;#93;&lt;/span&gt; Starting repair command #11, repairing 1043 ranges for keyspace ADL_GLOBAL (parallelism=SEQUENTIAL, full=true)&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,682&amp;#93;&lt;/span&gt; Repair session 3c8af050-1ed3-11e6-b490-d9df6932c7cf for range (6241639152751626129,6241693909092643958] finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,683&amp;#93;&lt;/span&gt; Repair session 3caf1a20-1ed3-11e6-b490-d9df6932c7cf for range (-7096993048358106082,-7095000706885780850] finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,683&amp;#93;&lt;/span&gt; Repair session 3ccfc180-1ed3-11e6-b490-d9df6932c7cf for range (-7218939248114487080,-7218289345961492809] finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,683&amp;#93;&lt;/span&gt; Repair session 3cf21690-1ed3-11e6-b490-d9df6932c7cf for range (-5244794756638190874,-5190307341355030282] finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,683&amp;#93;&lt;/span&gt; Repair session 3d126fd0-1ed3-11e6-b490-d9df6932c7cf for range (3551629701277971766,3555521736534916502] finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,683&amp;#93;&lt;/span&gt; Repair session 3d32f020-1ed3-11e6-b490-d9df6932c7cf for range (-8139355591560661944,-8127928369093576603] finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,683&amp;#93;&lt;/span&gt; Repair session 3d537070-1ed3-11e6-b490-d9df6932c7cf for range (7098010153980465751,7100863011896759020] finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,683&amp;#93;&lt;/span&gt; Repair session 3d73f0c0-1ed3-11e6-b490-d9df6932c7cf for range (1004538726866173536,1008586133746764703] finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,683&amp;#93;&lt;/span&gt; Repair session 3d947110-1ed3-11e6-b490-d9df6932c7cf for range (5770817093573726645,5771418910784831587] finished&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-20 17:42:32,732&amp;#93;&lt;/span&gt; Repair command #11 finished&lt;/p&gt;</description>
                <environment>&lt;p&gt;Red Hat Enterprise Linux Server release 6.7 (Santiago) x86_64&lt;/p&gt;</environment>
        <key id="12971673">CASSANDRA-11866</key>
            <summary>nodetool repair does not obey the column family parameter when -st and -et are provided (subrange repair)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vinaykumarcse">Vinay Chella</assignee>
                                    <reporter username="shvenkat">Shiva Venkateswaran</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Fri, 20 May 2016 21:45:22 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:56 +0000</updated>
                            <resolved>Mon, 22 Aug 2016 22:06:50 +0000</resolved>
                                        <fixVersion>2.1.16</fixVersion>
                                    <component>Tool/nodetool</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="15296916" author="shvenkat" created="Mon, 23 May 2016 19:20:03 +0000"  >&lt;p&gt;cfnames needs to be passed as a parameter to forceRepairRangeAsync in org.apache.cassandra.tools  NodeTool.java:&lt;/p&gt;

&lt;p&gt;if (!startToken.isEmpty() || !endToken.isEmpty())&lt;br/&gt;
                        probe.forceRepairRangeAsync(System.out, keyspace, parallelismDegree, dataCenters,hosts, startToken, endToken, !incrementalRepair, cfnames);&lt;br/&gt;
                    else&lt;br/&gt;
                        probe.forceRepairAsync(System.out, keyspace, parallelismDegree, dataCenters, hosts, primaryRange, !incrementalRepair, cfnames);&lt;/p&gt;</comment>
                            <comment id="15296937" author="pauloricardomg" created="Mon, 23 May 2016 19:32:54 +0000"  >&lt;p&gt;are you going to provide a patch? See here how to create a patch: &lt;a href=&quot;http://wiki.apache.org/cassandra/HowToContribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/cassandra/HowToContribute&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15296938" author="pauloricardomg" created="Mon, 23 May 2016 19:33:19 +0000"  >&lt;p&gt;Please set to patch available only when you attach a patch file.&lt;/p&gt;</comment>
                            <comment id="15296943" author="shvenkat" created="Mon, 23 May 2016 19:36:37 +0000"  >&lt;p&gt;Thanks Paulo, I&apos;ll go over the details and attach it accordingly. In the meantime, i found out that it was an issue with NodeTool.java&lt;/p&gt;</comment>
                            <comment id="15334184" author="pauloricardomg" created="Thu, 16 Jun 2016 17:12:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mahdix&quot; class=&quot;user-hover&quot; rel=&quot;mahdix&quot;&gt;mahdix&lt;/a&gt; interested to take this? should be quite easy.&lt;/p&gt;</comment>
                            <comment id="15385364" author="kohlisankalp" created="Wed, 20 Jul 2016 05:26:50 +0000"  >&lt;p&gt;We should add a Dtest for this if possible. &lt;/p&gt;</comment>
                            <comment id="15386713" author="jmckenzie" created="Wed, 20 Jul 2016 22:08:55 +0000"  >&lt;p&gt;Canceling patch pending dtest.&lt;/p&gt;</comment>
                            <comment id="15394369" author="JIRAUSER308715" created="Tue, 26 Jul 2016 19:18:35 +0000"  >&lt;p&gt;This is a pretty trivial fix and nodetool is broken without it.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kohlisankalp&quot; class=&quot;user-hover&quot; rel=&quot;kohlisankalp&quot;&gt;kohlisankalp&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt; what do you want a dtest to look like?&lt;/p&gt;</comment>
                            <comment id="15394853" author="kohlisankalp" created="Wed, 27 Jul 2016 00:46:40 +0000"  >&lt;p&gt;Make sure we only repair the CFs provided. &lt;/p&gt;</comment>
                            <comment id="15425446" author="brian.wawok" created="Wed, 17 Aug 2016 21:47:29 +0000"  >&lt;p&gt;Add a dtest to show this flaw.  Not 100% confident that this is the ideal d-test, would like a code review to make sure it isn&apos;t too simple&lt;/p&gt;</comment>
                            <comment id="15428428" author="pauloricardomg" created="Fri, 19 Aug 2016 16:45:08 +0000"  >&lt;p&gt;Dtest looks good, thanks! One minor nit is that the test is hanging on 2.2+ due to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12279&quot; title=&quot;nodetool repair hangs on non-existant table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12279&quot;&gt;&lt;del&gt;CASSANDRA-12279&lt;/del&gt;&lt;/a&gt; since table &lt;tt&gt;standard2&lt;/tt&gt; does not exist. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brian.wawok&quot; class=&quot;user-hover&quot; rel=&quot;brian.wawok&quot;&gt;brian.wawok&lt;/a&gt; While that is not fixed could you just change it &lt;tt&gt;counter1&lt;/tt&gt; (which is created by stress) and open a pull request to &lt;a href=&quot;https://github.com/riptano/cassandra-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cassandra-dtest&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Meanwhile since the patch is very trivial and only affects 2.1 I will mark this as ready to commit. I prepared the patch for commit &lt;a href=&quot;https://github.com/pauloricardomg/cassandra/tree/2.1-11866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15428514" author="brian.wawok" created="Fri, 19 Aug 2016 17:41:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pauloricardomg&quot; class=&quot;user-hover&quot; rel=&quot;pauloricardomg&quot;&gt;pauloricardomg&lt;/a&gt; Pull request here: &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/1259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/riptano/cassandra-dtest/pull/1259&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15431692" author="yukim" created="Mon, 22 Aug 2016 22:06:51 +0000"  >&lt;p&gt;Committed to 2.1 as &lt;tt&gt;95b2d0241c114fdb37f9b3e30c981ce7aa39e177&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12824242" name="0001-CASSANDRA-11866-dtest.patch" size="4086" author="brian.wawok" created="Wed, 17 Aug 2016 21:47:29 +0000"/>
                            <attachment id="12819000" name="11866-2.1.txt" size="1419" author="vinaykumarcse" created="Wed, 20 Jul 2016 01:57:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[vinaykumarcse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yavz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332829">2.1.8</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>pauloricardomg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[pauloricardomg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332829">2.1.8</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brian.wawok</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>