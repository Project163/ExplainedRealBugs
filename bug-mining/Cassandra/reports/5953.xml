<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:24:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16349] SSTableLoader reports error when SSTable(s) do not have data for some nodes</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16349</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Running SSTableLoader in verbose mode will show error(s) if there are node(s) that do not own any data from the SSTable(s). This can happen in at least 2 cases:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;SSTableLoader is used to stream backups while keeping the same token ranges&lt;/li&gt;
	&lt;li&gt;SSTable(s) are created with&#160;CQLSSTableWriter to match token ranges (this can bring better performance by using ZeroCopy streaming)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Partial output of the SSTableLoader:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;ERROR 02:47:47,842 &lt;a href=&quot;#fa8e73b0-3da5-11eb-9c47-c5d27ae8fe47&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #fa8e73b0-3da5-11eb-9c47-c5d27ae8fe47&lt;/a&gt; Remote peer /127.0.0.4:7000 failed stream session.&lt;/p&gt;

&lt;p&gt;ERROR 02:47:47,842 &lt;a href=&quot;#fa8e73b0-3da5-11eb-9c47-c5d27ae8fe47&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #fa8e73b0-3da5-11eb-9c47-c5d27ae8fe47&lt;/a&gt; Remote peer /127.0.0.3:7000 failed stream session.&lt;/p&gt;

&lt;p&gt;progress: &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.4:7000&amp;#93;&lt;/span&gt;0:0/1 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.3:7000&amp;#93;&lt;/span&gt;0:0/1 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.2:7000&amp;#93;&lt;/span&gt;0:7/7 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.1:7000&amp;#93;&lt;/span&gt;0:7/7 100% total: 100% 0.000KiB/s (avg: 1.611KiB/s)&lt;/p&gt;

&lt;p&gt;progress: &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.4:7000&amp;#93;&lt;/span&gt;0:0/1 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.3:7000&amp;#93;&lt;/span&gt;0:0/1 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.2:7000&amp;#93;&lt;/span&gt;0:7/7 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.1:7000&amp;#93;&lt;/span&gt;0:7/7 100% total: 100% 0.000KiB/s (avg: 1.611KiB/s)&lt;/p&gt;

&lt;p&gt;progress: &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.4:7000&amp;#93;&lt;/span&gt;0:0/1 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.3:7000&amp;#93;&lt;/span&gt;0:0/1 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.2:7000&amp;#93;&lt;/span&gt;0:7/7 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.1:7000&amp;#93;&lt;/span&gt;0:7/7 100% total: 100% 0.000KiB/s (avg: 1.515KiB/s)&lt;/p&gt;

&lt;p&gt;progress: &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.4:7000&amp;#93;&lt;/span&gt;0:0/1 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.3:7000&amp;#93;&lt;/span&gt;0:0/1 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.2:7000&amp;#93;&lt;/span&gt;0:7/7 100% &lt;span class=&quot;error&quot;&gt;&amp;#91;/127.0.0.1:7000&amp;#93;&lt;/span&gt;0:7/7 100% total: 100% 0.000KiB/s (avg: 1.427KiB/s)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Stack trace:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;java.util.concurrent.ExecutionException: org.apache.cassandra.streaming.StreamException: Stream failed&lt;/p&gt;

&lt;p&gt;at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:552)&lt;/p&gt;

&lt;p&gt;at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:533)&lt;/p&gt;

&lt;p&gt;at org.apache.cassandra.tools.BulkLoader.load(BulkLoader.java:99)&lt;/p&gt;

&lt;p&gt;at org.apache.cassandra.tools.BulkLoader.main(BulkLoader.java:49)&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.cassandra.streaming.StreamException: Stream failed&lt;/p&gt;

&lt;p&gt;at org.apache.cassandra.streaming.management.StreamEventJMXNotifier.onFailure(StreamEventJMXNotifier.java:88)&lt;/p&gt;

&lt;p&gt;at com.google.common.util.concurrent.Futures$CallbackListener.run(Futures.java:1056)&lt;/p&gt;

&lt;p&gt;at com.google.common.util.concurrent.DirectExecutor.execute(DirectExecutor.java:30)&lt;/p&gt;

&lt;p&gt;at com.google.common.util.concurrent.AbstractFuture.executeListener(AbstractFuture.java:1138)&lt;/p&gt;

&lt;p&gt;at com.google.common.util.concurrent.AbstractFuture.complete(AbstractFuture.java:958)&lt;/p&gt;

&lt;p&gt;at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:748)&lt;/p&gt;

&lt;p&gt;at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:220)&lt;/p&gt;

&lt;p&gt;at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:196)&lt;/p&gt;

&lt;p&gt;at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:505)&lt;/p&gt;

&lt;p&gt;at org.apache.cassandra.streaming.StreamSession.complete(StreamSession.java:819)&lt;/p&gt;

&lt;p&gt;at org.apache.cassandra.streaming.StreamSession.messageReceived(StreamSession.java:595)&lt;/p&gt;

&lt;p&gt;at org.apache.cassandra.streaming.async.StreamingInboundHandler$StreamDeserializingTask.run(StreamingInboundHandler.java:189)&lt;/p&gt;

&lt;p&gt;at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)&lt;/p&gt;

&lt;p&gt;at java.base/java.lang.Thread.run(Thread.java:844)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;To reproduce create a cluster with ccm with more nodes than the RF, put some data into it copy a SSTable and stream it.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The error originates on the nodes, the following stack trace is shown in the logs:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;java.lang.IllegalStateException: Stream hasn&apos;t been read yet&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.google.common.base.Preconditions.checkState(Preconditions.java:507)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.cassandra.db.streaming.CassandraIncomingFile.getSize(CassandraIncomingFile.java:96)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.cassandra.streaming.StreamSession.receive(StreamSession.java:789)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.cassandra.streaming.StreamSession.messageReceived(StreamSession.java:587)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.cassandra.streaming.async.StreamingInboundHandler$StreamDeserializingTask.run(StreamingInboundHandler.java:189)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.base/java.lang.Thread.run(Thread.java:844)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;An error is thrown due to stream size being read before any data was received. The solution would be not to stream this at all; SSTableLoader.java already looks into each SSTable to determine what parts of it will map to each node token ranges.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13345838">CASSANDRA-16349</key>
            <summary>SSTableLoader reports error when SSTable(s) do not have data for some nodes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="serban">Serban Teodorescu</assignee>
                                    <reporter username="serban">Serban Teodorescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2020 12:07:06 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:59 +0000</updated>
                            <resolved>Fri, 25 Feb 2022 21:14:20 +0000</resolved>
                                        <fixVersion>4.0.4</fixVersion>
                    <fixVersion>4.1-alpha1</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                    <component>Tool/sstable</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17249021" author="serban" created="Mon, 14 Dec 2020 14:41:18 +0000"  >&lt;p&gt;PR available at&#160;&lt;a href=&quot;https://github.com/apache/cassandra/pull/851&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/851&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17249364" author="brandon.williams" created="Mon, 14 Dec 2020 22:34:54 +0000"  >&lt;p&gt;Could you add a test to cover this scenario?&lt;/p&gt;</comment>
                            <comment id="17249385" author="serban" created="Mon, 14 Dec 2020 23:13:29 +0000"  >&lt;p&gt;I&apos;m not sure. SSTableLoaderTest seems to use a single node, and this scenario would require at least 2 running nodes. I guess that would need a lot of refactoring.&#160;&lt;/p&gt;</comment>
                            <comment id="17249561" author="blerer" created="Tue, 15 Dec 2020 08:55:23 +0000"  >&lt;p&gt;You should be able to test that with a new in-jvm dtest. They are under &lt;tt&gt;test/distributed&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17382609" author="gerrrr" created="Sat, 17 Jul 2021 16:07:31 +0000"  >&lt;p&gt;&lt;b&gt;Short version of the review&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The bug is reproducible in 4.0+&lt;/li&gt;
	&lt;li&gt;The fix for SSTableLoader LGTM as a way to avoid useless streaming tasks&lt;/li&gt;
	&lt;li&gt;I added a python dtest for the issue&lt;/li&gt;
	&lt;li&gt;We should also fix the way streaming handles empty SSTables after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14115&quot; title=&quot;Refactor streaming&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14115&quot;&gt;&lt;del&gt;CASSANDRA-14115&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Code and CI&lt;/b&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/151&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/gerrrr/cassandra/tree/cassandra-4.0-16349-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0 (baseline)&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/188/workflows/27d68d7c-3ae8-4dcd-869b-d8bbd47157a4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/188/workflows/844e33c6-1327-439d-980f-0112cf958829&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...Gerrrr:16349-sstableloader-fix-4.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SSTableLoader fix&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/189/workflows/2a308aa6-6ff6-4294-842a-6e691831c59f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/189/workflows/c9729460-f035-49ab-873d-14f0cf6e2cc5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...Gerrrr:16349-streaming-fix-4.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Streaming fix&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/193/workflows/3d4d2069-0dd5-4b86-9510-d3d140ed49bf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/193/workflows/0738e555-aa9a-4367-9c77-96ff957147c5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...Gerrrr:16349-streaming-sstableloader-4.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Streaming fix + SSTableLoader fix&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/194/workflows/a07f3909-987c-4ccc-8625-9166f74a7000&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/194/workflows/524e0774-ddd3-4d0d-b2d7-6d55d673a773&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&lt;b&gt;Long version of the review&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;I was able to reproduce the bug following the steps in the issue description in &lt;tt&gt;cassandra-4.0&lt;/tt&gt; and &lt;tt&gt;trunk&lt;/tt&gt;. The issue does not reproduce in the earlier versions. Given no changes in the SSTableLoader between &lt;tt&gt;3.11&lt;/tt&gt; and &lt;tt&gt;trunk&lt;/tt&gt;, it got me curious if the fix should be on the streaming side instead.&lt;/p&gt;

&lt;p&gt;AFAIU the failing assertion (&lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/streaming/CassandraIncomingFile.java#L96&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;link&lt;/a&gt;) was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14115&quot; title=&quot;Refactor streaming&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14115&quot;&gt;&lt;del&gt;CASSANDRA-14115&lt;/del&gt;&lt;/a&gt; as a sanity check that the file&apos;s size is not accessed before it has been read. However, this assertion might be incorrect as the default state for the size is -1, and the intention is to verify that the value has been updated.&lt;/p&gt;

&lt;p&gt;As an experiment, I changed the assertion in &lt;tt&gt;getSize&lt;/tt&gt; and re-ran the test. Streaming tasks started to crash in &lt;a href=&quot;https://github.com/apache/cassandra/blob/9cc7a0025d8b0859d8e9c947f6fdffd8455dd141/src/java/org/apache/cassandra/streaming/StreamReceiveTask.java#L87&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;StreamReceiveTask#receive&lt;/a&gt; to due &lt;a href=&quot;https://github.com/apache/cassandra/blob/9cc7a0025d8b0859d8e9c947f6fdffd8455dd141/src/java/org/apache/cassandra/io/sstable/format/RangeAwareSSTableWriter.java#L168-L171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;no open SSTable writers&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In my opinion, this is a bug as C* could handle streaming empty SSTables in prior versions, so I created a patch that handles empty streams without throwing exceptions. Even though it works without Serban&apos;s SSTableLoader fix, we should include it to prevent SSTableLoader from doing unnecessary work.&lt;/p&gt;</comment>
                            <comment id="17402461" author="ascott" created="Sat, 21 Aug 2021 00:25:42 +0000"  >&lt;p&gt;We got the same error &quot;Stream failed&quot; and &quot;Stream hasn&apos;t been read yet&quot; on the node.&#160; We were doing sstableloader of snapshots from a DC with RF=3 and 6 nodes to a DC with RF=2 on 3 nodes (there&apos;s plenty of space).&#160; It looks like it occurs at the same place/time.&lt;/p&gt;

&lt;p&gt;I&#160; found the commit for the patch and applied it and still got the same error, so the error we have is caused by something else?&#160; Just adding that info here.&#160; Should I submit a bug?&#160; I can replicate it here on our site but do not know what all is involved in replicating it in general.&#160; We are on&#160; Cassandra 4.0.0&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17411254" author="gerrrr" created="Tue, 7 Sep 2021 13:52:44 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ascott&quot; class=&quot;user-hover&quot; rel=&quot;ascott&quot;&gt;ascott&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Can you please try to reproduce the error with the &lt;b&gt;Streaming fix&lt;/b&gt; patch I linked above? If you still can reproduce it, it&apos;d help if you can attach relevant stack traces from the failing nodes.&lt;/p&gt;</comment>
                            <comment id="17434226" author="gerrrr" created="Tue, 26 Oct 2021 09:32:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdeggleston&quot; class=&quot;user-hover&quot; rel=&quot;bdeggleston&quot;&gt;bdeggleston&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcuse&quot; class=&quot;user-hover&quot; rel=&quot;marcuse&quot;&gt;marcuse&lt;/a&gt; Do you have cycles to review? &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...Gerrrr:16349-streaming-sstableloader-4.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Streaming fix + SSTableLoader fix&lt;/a&gt; from the comment above is the patch I think we should merge.&lt;/p&gt;</comment>
                            <comment id="17434248" author="krummas" created="Tue, 26 Oct 2021 10:34:33 +0000"  >&lt;p&gt;nit; brace-on-newline: &lt;tt&gt;if (sstableSections.isEmpty()) {&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;lgtm, +1&lt;/p&gt;</comment>
                            <comment id="17434736" author="gerrrr" created="Wed, 27 Oct 2021 08:23:05 +0000"  >&lt;p&gt;Thank you for a quick review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcuse&quot; class=&quot;user-hover&quot; rel=&quot;marcuse&quot;&gt;marcuse&lt;/a&gt;! I fixed the nit. &lt;/p&gt;

&lt;p&gt;AFAIU, with one +1 from a committer, the correct status for this issue is &lt;tt&gt;NEEDS COMMITTER&lt;/tt&gt;; I will change it accordingly.&lt;/p&gt;</comment>
                            <comment id="17434858" author="edimitrova" created="Wed, 27 Oct 2021 13:30:43 +0000"  >&lt;p&gt;I just pushed &lt;a href=&quot;https://jenkins-cm4.apache.org/job/Cassandra-devbranch/1248/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Jenkins CI run&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I can review it tomorrow if &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdeggleston&quot; class=&quot;user-hover&quot; rel=&quot;bdeggleston&quot;&gt;bdeggleston&lt;/a&gt;&#160;or someone else doesn&apos;t get to it until then.&lt;/p&gt;</comment>
                            <comment id="17435675" author="edimitrova" created="Thu, 28 Oct 2021 21:56:46 +0000"  >&lt;p&gt;New &lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/1252/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Jenkins run&lt;/a&gt;&#160;as I pushed with wrong image yesterday, I am sorry about that.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17437659" author="edimitrova" created="Tue, 2 Nov 2021 23:20:09 +0000"  >&lt;p&gt;There is something very wrong with this CI run. 70 failures on 4.0 where we are currently at 18.&#160;&lt;/p&gt;

&lt;p&gt;I saw many of them failed with host unavailable, I suspect our CI might have been in bad shape...&lt;/p&gt;

&lt;p&gt;I will rebase and push again&lt;/p&gt;</comment>
                            <comment id="17437674" author="edimitrova" created="Wed, 3 Nov 2021 00:01:40 +0000"  >&lt;p&gt;Ok, this is actually trunk, not the 4.0 branch and it is not rebased since July.&lt;/p&gt;</comment>
                            <comment id="17437675" author="edimitrova" created="Wed, 3 Nov 2021 00:38:03 +0000"  >&lt;p&gt;I think we need to mark the dtests to be since 3.0. Even if 2.2 is out of support, we still have it in CI and there might be third parties who still support it.&lt;/p&gt;

&lt;p&gt;I can confirm that the test passes with 3.0 and 3.11 locally.&#160;&lt;/p&gt;

&lt;p&gt;As apparently a release happened somewhere around this work, I will backport the patch to 4.0 branch too. Still don&apos;t have time for proper review so I will post whatever I have time for and leave it to NEEDS COMMITTER status in case someone has cycles before me.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/pull/new/16349-streaming-sstableloader-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&#160;| &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra-dtest/pull/new/CASSANDRA-16349&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; | &lt;a href=&quot;https://jenkins-cm4.apache.org/job/Cassandra-devbranch/1260/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Jenkins CI &lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17438188" author="edimitrova" created="Wed, 3 Nov 2021 16:48:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/pull/new/16349-v4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt; | &lt;a href=&quot;https://jenkins-cm4.apache.org/job/Cassandra-devbranch/1261/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Jenkins CI run&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17438226" author="gerrrr" created="Wed, 3 Nov 2021 18:11:06 +0000"  >&lt;p&gt;Thank you for the review and running the tests &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;! Tomorrow I will mark the dtest to run only since 3.0, rebase the patch against latest trunk and backport it to 4.0.&lt;/p&gt;</comment>
                            <comment id="17438234" author="edimitrova" created="Wed, 3 Nov 2021 18:22:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; I already rebased and backported prior submitting the tests. Please check the links in my previous comments&lt;/p&gt;</comment>
                            <comment id="17438899" author="gerrrr" created="Thu, 4 Nov 2021 19:15:17 +0000"  >&lt;p&gt;I&apos;ve rebased the dtest and added &lt;tt&gt;@since(&quot;3.0&quot;)&lt;/tt&gt; to it.&lt;/p&gt;</comment>
                            <comment id="17469088" author="gerrrr" created="Wed, 5 Jan 2022 07:26:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; Do you have spare cycles to review this patch?&lt;/p&gt;</comment>
                            <comment id="17493789" author="jean005" created="Thu, 17 Feb 2022 09:00:25 +0000"  >&lt;p&gt;Hi, do we have any idea when this could be fixed? My project is really stuck as I cannot load all my data with Cassandra 4. Is there any workaround which could allow me to continue? Thanks.&lt;/p&gt;</comment>
                            <comment id="17494101" author="frankgh" created="Thu, 17 Feb 2022 17:27:20 +0000"  >&lt;p&gt;Looks good to me, +1&lt;/p&gt;</comment>
                            <comment id="17494218" author="gerrrr" created="Thu, 17 Feb 2022 20:42:14 +0000"  >&lt;p&gt;I&apos;ve rebased the patch and the dtest. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; can you please review?&lt;/p&gt;

&lt;p&gt;Links:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...Gerrrr:16349-streaming-sstableloader-4.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/151&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17494816" author="edimitrova" created="Fri, 18 Feb 2022 20:42:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&#160;is not available these days, I pinged in Slack &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt;&#160;to ask if he might have a bit of time to check it but we are in totally different time zones so I haven&apos;t received a response yet. I promise to follow up no this work next week&lt;/p&gt;</comment>
                            <comment id="17495142" author="jasonstack" created="Sun, 20 Feb 2022 12:09:18 +0000"  >&lt;p&gt;The patch looks good to me, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=serban&quot; class=&quot;user-hover&quot; rel=&quot;serban&quot;&gt;serban&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; thanks for the fix.&lt;/p&gt;

&lt;p&gt;Side note: `SSTableMultiWriter#getFilePointer` looks problematic.  In `RangeAwareMultiWriter`, it refers to current writer&apos;s file position. But in memtable logging, it&apos;s used as written data size.  For now, the logging is still correct because `RangeAwareMultiWriter` is  not used during flush.&lt;/p&gt;</comment>
                            <comment id="17495143" author="jasonstack" created="Sun, 20 Feb 2022 12:10:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; do we need a second reviewer?&lt;/p&gt;</comment>
                            <comment id="17495546" author="edimitrova" created="Mon, 21 Feb 2022 14:23:31 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;If &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcuse&quot; class=&quot;user-hover&quot; rel=&quot;marcuse&quot;&gt;marcuse&lt;/a&gt;&#160;hasn&apos;t changed his opinion as it&apos;s been a while I think we only need green CI.&lt;/p&gt;

&lt;p&gt;I can push CI later today for 4.0 and trunk while waiting for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcuse&quot; class=&quot;user-hover&quot; rel=&quot;marcuse&quot;&gt;marcuse&lt;/a&gt;&#160;&apos;s confirmation.&lt;/p&gt;

&lt;p&gt;(Trunk is failing at the moment because of some weekend commit, issues already addressed. I will push CI when they are solved so we can get this clean)&#160;&lt;/p&gt;</comment>
                            <comment id="17496208" author="edimitrova" created="Tue, 22 Feb 2022 16:39:03 +0000"  >&lt;p&gt;Jenkins CI runs submitted:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jenkins-cm4.apache.org/job/Cassandra-devbranch/1443/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;, &lt;a href=&quot;https://jenkins-cm4.apache.org/job/Cassandra-devbranch/1444/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17496810" author="edimitrova" created="Wed, 23 Feb 2022 14:23:40 +0000"  >&lt;p&gt;There are a bunch of errors, especially on trunk but mostly due to Jenkins running out of space from what I saw. Maintenance is happening at the moment to fix the issue. I will restart the runs when Jenkins is back on track.&lt;/p&gt;</comment>
                            <comment id="17497030" author="edimitrova" created="Wed, 23 Feb 2022 20:12:05 +0000"  >&lt;p&gt;Jenkins is back.&lt;/p&gt;

&lt;p&gt;New Jenkins CI runs submitted:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jenkins-cm4.apache.org/job/Cassandra-devbranch/1446/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;, &lt;a href=&quot;https://jenkins-cm4.apache.org/job/Cassandra-devbranch/1447/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17497703" author="edimitrova" created="Thu, 24 Feb 2022 20:09:22 +0000"  >&lt;p&gt;CI was aborted and I don&apos;t know by whom and why. I will do another check and if it doesn&apos;t go well again, I will fire Circle tonight&lt;/p&gt;</comment>
                            <comment id="17497706" author="edimitrova" created="Thu, 24 Feb 2022 20:10:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://jenkins-cm4.apache.org/job/Cassandra-devbranch/1452/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&#160;, &lt;a href=&quot;https://jenkins-cm4.apache.org/job/Cassandra-devbranch/1453/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17497796" author="edimitrova" created="Thu, 24 Feb 2022 23:04:42 +0000"  >&lt;p&gt;Jenkins Is struggling, I just submitted CircleCI runs here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-4.0...ekaterinadimitrova2:16349-4.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt; - &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/1402/workflows/74775282-9a69-48f7-ae57-0f473b7c47e1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/1402/workflows/5a72ba30-b91a-480a-88c6-583091cdbf07&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...ekaterinadimitrova2:16349-trunk?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; - &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/1403/workflows/ca03d0bb-1815-4eae-af11-5b1e73832931&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/1403/workflows/07019567-d242-46e1-8efc-70221ac6b81f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17498186" author="edimitrova" created="Fri, 25 Feb 2022 15:56:55 +0000"  >&lt;p&gt;All tests look fine to me except Java 11 dtests. I suspect infra issue as we have 22 tests failing with this issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
OSError: [Errno 98] Address already in use&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Restarted the J11 dtests &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/1403/workflows/07019567-d242-46e1-8efc-70221ac6b81f/jobs/9220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;with vnodes&lt;/a&gt;&#160;and &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/1403/workflows/07019567-d242-46e1-8efc-70221ac6b81f/jobs/9221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;no vnodes&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17498254" author="edimitrova" created="Fri, 25 Feb 2022 18:34:14 +0000"  >&lt;p&gt;Tests finished successfully. (only one failure that has associated open ticket already). &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcuse&quot; class=&quot;user-hover&quot; rel=&quot;marcuse&quot;&gt;marcuse&lt;/a&gt;&#160;confirmed his approval of the patch offline. Starting commit soon.&lt;/p&gt;</comment>
                            <comment id="17498308" author="edimitrova" created="Fri, 25 Feb 2022 21:13:21 +0000"  >&lt;p&gt;DTest committed:&lt;/p&gt;

&lt;p&gt;To &lt;a href=&quot;https://github.com/apache/cassandra-dtest.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra-dtest.git&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/ce91388e533f402f076f2484406d41bda8680316&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;8396b643..ce91388e&#160; trunk -&amp;gt; trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;4.0 and trunk committed:&lt;br/&gt;
To &lt;a href=&quot;https://github.com/apache/cassandra.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra.git&lt;/a&gt;&lt;br/&gt;
   22a4ae16e4..a8b67e3dd9  cassandra-4.0 -&amp;gt; cassandra-4.0&lt;br/&gt;
   12e2c159f8..e40f8163af  trunk -&amp;gt; trunk&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17498597" author="jasonstack" created="Sun, 27 Feb 2022 14:16:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; thank you!&lt;/p&gt;</comment>
                            <comment id="17499034" author="edimitrova" created="Mon, 28 Feb 2022 17:00:11 +0000"  >&lt;p&gt;The new DTest failed on trunk as I forgot to add post-&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15234&quot; title=&quot;Standardise config and JVM parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15234&quot;&gt;&lt;del&gt;CASSANDRA-15234&lt;/del&gt;&lt;/a&gt; warning exclusion to the test.&lt;br/&gt;
Warning is emitted in trunk/4.1 because of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15234&quot; title=&quot;Standardise config and JVM parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15234&quot;&gt;&lt;del&gt;CASSANDRA-15234&lt;/del&gt;&lt;/a&gt;. We exploit the backward compatibility&lt;br/&gt;
framework with DTests instead of changing config in all old tests.&lt;br/&gt;
Patch &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra-dtest/commit/5fee61656a495931a4a6bf984677981622b4e205&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I ran the test successfully with all branches locally.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcuse&quot; class=&quot;user-hover&quot; rel=&quot;marcuse&quot;&gt;marcuse&lt;/a&gt;&#160;, do you mind to review it, please?&lt;/p&gt;</comment>
                            <comment id="17499039" author="brandon.williams" created="Mon, 28 Feb 2022 17:13:15 +0000"  >&lt;p&gt;dtest looks good to me, +1.&lt;/p&gt;</comment>
                            <comment id="17499050" author="krummas" created="Mon, 28 Feb 2022 17:19:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17499175" author="edimitrova" created="Mon, 28 Feb 2022 20:22:05 +0000"  >&lt;p&gt;Committed, thanks!&lt;/p&gt;

&lt;p&gt;To &lt;a href=&quot;https://github.com/apache/cassandra-dtest.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra-dtest.git&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160; &#160;&lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/d95e6bd6ba6f028a9ca657e53f67ffb87d8f9470&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ce91388e..d95e6bd6&lt;/a&gt;&#160; trunk -&amp;gt; trunk&lt;/p&gt;</comment>
                            <comment id="17499318" author="maedhroz" created="Tue, 1 Mar 2022 04:14:16 +0000"  >&lt;p&gt;It looks like the new dtest fails on trunk, given it&apos;s not expecting the YAML option name change warning from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15234&quot; title=&quot;Standardise config and JVM parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15234&quot;&gt;&lt;del&gt;CASSANDRA-15234&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-trunk/976/testReport/dtest-novnode.sstable_generation_loading_test/TestSSTableGenerationAndLoading/test_sstableloader_empty_stream&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/job/Cassandra-trunk/976/testReport/dtest-novnode.sstable_generation_loading_test/TestSSTableGenerationAndLoading/test_sstableloader_empty_stream&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17499330" author="edimitrova" created="Tue, 1 Mar 2022 04:41:21 +0000"  >&lt;p&gt;I am on the phone now but it seems you point to the run from a few days ago which triggered Markus to ping me and I made the commit to fix it earlier today. The test shouldn&#8217;t be failing anymore.&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13417729">CASSANDRA-17211</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[Gerrrr]]></customfieldvalue>
        <customfieldvalue><![CDATA[serban]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12984" cascade-level=""><![CDATA[Degradation]]></customfieldvalue>
                                <customfieldvalue key="12998" cascade-level="1"><![CDATA[Other Exception]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lhdk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[Gerrrr]]></customfieldvalue>
        <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
        <customfieldvalue><![CDATA[jasonstack]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12350367">4.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/193d4ef3a79305d9f19e26012c0cd79ea79d54fd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/193d4ef3a79305d9f19e26012c0cd79ea79d54fd&lt;/a&gt; and  &lt;a href=&quot;https://github.com/apache/cassandra/commit/a8b67e3dd92e6ca1a66a1be9b2d86961224653f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/a8b67e3dd92e6ca1a66a1be9b2d86961224653f5&lt;/a&gt; DTest: &lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/ce91388e533f402f076f24844&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra-dtest/commit/ce91388e533f402f076f24844&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Not needed&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>