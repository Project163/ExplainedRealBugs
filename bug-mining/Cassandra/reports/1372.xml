<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:28:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3531] Fix crack-smoking in ConsistencyLevelTest</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3531</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;First, let&apos;s note that this test fails in current 1.0 branch. It was &quot;broken&quot; (emphasis on the quotes) by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3529&quot; title=&quot;ConcurrentModificationException in Table.all()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3529&quot;&gt;&lt;del&gt;CASSANDRA-3529&lt;/del&gt;&lt;/a&gt;. But it&apos;s not &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3529&quot; title=&quot;ConcurrentModificationException in Table.all()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3529&quot;&gt;&lt;del&gt;CASSANDRA-3529&lt;/del&gt;&lt;/a&gt; fault, it&apos;s only that the use of NonBlockingHashMap changed the order of the tables returned by Schema.instance.getNonSystemTables(). &lt;b&gt;And&lt;/b&gt;,  it turns out that ConsistencyLevelTest bails out as soon as it has found one keyspace with rf &amp;gt;= 2 due to a misplaced return. So it use to be that ConsistencyLevelTest was only ran for Keyspace5 (whose RF is 2) for which the test work. But for any RF &amp;gt; 2, the test fails.&lt;/p&gt;

&lt;p&gt;The reason of this failing is that the test creates a 3 node cluster for whom only 1 node is alive as far as the failure detector is concerned. So for RF=3 and CL=QUORUM, the writes are unavailable (the failure detector is queried), while for reads we &quot;pretend&quot; two nodes are alive so we end up with a case where isWriteUnavailable != isReadUnavailable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532705">CASSANDRA-3531</key>
            <summary>Fix crack-smoking in ConsistencyLevelTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Nov 2011 11:37:54 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:45 +0000</updated>
                            <resolved>Wed, 4 Jan 2012 03:17:19 +0000</resolved>
                                        <fixVersion>1.0.7</fixVersion>
                                    <component>Legacy/Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13157266" author="jbellis" created="Fri, 25 Nov 2011 17:47:24 +0000"  >&lt;p&gt;I did some minimal-necessary work to get CLT to pass in trunk, but it sounds like you have deeper changes in mind.&lt;/p&gt;</comment>
                            <comment id="13178746" author="slebresne" created="Tue, 3 Jan 2012 14:19:41 +0000"  >&lt;p&gt;The deeper change I have in mind consists roughly in removing that test. It&apos;s trying to tests the result of WriteHandler.assureSufficientLiveNodes() but that method depends on the result of the FailureDetector. The problem is that I don&apos;t think we really have a good way to create real multi-nodes cluster in the unit test. Maybe we can &quot;fake&quot; live nodes but I&apos;m not sure how and in the end it makes me wonder what the tests is really testing if we&apos;re starting to fake too much stuff. It seems to me that the distributed tests are probably a better place to do that kind of thing.&lt;/p&gt;

&lt;p&gt;In any case, It&apos;s really annoying to have unit tests failure, especially in the 1.0 branch. And as said in the description, that test never really worked anyway so any opposition to at least commenting it for now? &lt;/p&gt;</comment>
                            <comment id="13179249" author="jbellis" created="Wed, 4 Jan 2012 03:17:20 +0000"  >&lt;p&gt;You&apos;re right: while it&apos;s reasonable to unit-test assureSufficientLiveNodes, the right place to do that is just with IWriteResponseHandler objects instead of mocking up a ring.  This test also pre-dated NTS and the different IWRH for that, so it&apos;s pretty fragile.&lt;/p&gt;

&lt;p&gt;Went ahead and deleted it per your suggestion.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gl1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94841</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>