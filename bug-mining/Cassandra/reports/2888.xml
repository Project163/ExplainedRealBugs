<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:45:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7398] Missing flexibility to have file://&lt;server&gt;/&lt;etc&gt; vs. file:/// when loading config file cassandra.yaml</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7398</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The parameter in the VM options -Dcassandra.config= needs &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;&lt;br/&gt;
Allow the user to have optional &quot;file:///&quot; when loading the config file from the filesystem&lt;/p&gt;</description>
                <environment>&lt;p&gt; Cassandra 2.1.0-rc1-SNAPSHOT, Win 7&lt;/p&gt;</environment>
        <key id="12721216">CASSANDRA-7398</key>
            <summary>Missing flexibility to have file://&lt;server&gt;/&lt;etc&gt; vs. file:/// when loading config file cassandra.yaml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmckenzie">Josh McKenzie</assignee>
                                    <reporter username="totopo_loco">Marco Tulio Avila Cer&#243;n</reporter>
                        <labels>
                            <label>lhf</label>
                            <label>patch</label>
                    </labels>
                <created>Fri, 13 Jun 2014 23:43:25 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:06 +0000</updated>
                            <resolved>Thu, 7 Aug 2014 17:14:34 +0000</resolved>
                                        <fixVersion>2.1.1</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="14031496" author="totopo_loco" created="Sat, 14 Jun 2014 07:15:52 +0000"  >&lt;p&gt;Tries to recover from Exception when user does not specify &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt; in the file URL&lt;/p&gt;</comment>
                            <comment id="14031501" author="totopo_loco" created="Sat, 14 Jun 2014 07:27:01 +0000"  >&lt;p&gt;Tries to recover from Exception when user does not specify &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt; in the file URL&lt;/p&gt;</comment>
                            <comment id="14031537" author="lyubent" created="Sat, 14 Jun 2014 10:04:55 +0000"  >&lt;p&gt;I think it&apos;s a bad idea to special case input of file URLs for windows users, If someone is using windows, they should be aware that special prefixes are required when specifying a URL so it would probably be better to just catch the exception and re-throw a runtime exception explaining the problem. (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt; WDYT?)&lt;/p&gt;</comment>
                            <comment id="14031541" author="totopo_loco" created="Sat, 14 Jun 2014 10:23:05 +0000"  >&lt;p&gt;I agree that trying to recover from all possible exceptions will bloat the code, however an exception is thrown when something &quot;exceptional&quot; happens, (that is where it comes the name from). And a good system should try to recover from the exception situation, letting the user know that the input is wrong is another possibility, but in personal opinion I would try to recover and try one more time then throwing the exception, as in the patch proposed.&lt;/p&gt;</comment>
                            <comment id="14031566" author="lyubent" created="Sat, 14 Jun 2014 13:05:20 +0000"  >&lt;p&gt;Recovering in this case could mislead the user into thinking they supplied a valid url when that was not the case, and can lead to confusion if the url is processed elsewhere, but I agree that we should handle the failure by warning the user. &lt;/p&gt;

&lt;p&gt;Nits on the patch:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;remove the curly brackets from the single line if statement&lt;/li&gt;
	&lt;li&gt;Can we change the warning to something like &lt;tt&gt;logger.warn(message + &quot;. Re-attempting to use config file &quot; + configUrl);&lt;/tt&gt; and also explain why this is happening with a warn.&lt;/li&gt;
	&lt;li&gt;//Try one more time isn&apos;t very verbose, we should state why another attempt is being made.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14031568" author="lyubent" created="Sat, 14 Jun 2014 13:16:19 +0000"  >&lt;p&gt;A possible approach that avoids the exception and the second try / catch might be checking if the environment is windows using &lt;tt&gt;!FBUtilities.isUnix();&lt;/tt&gt; and then checking if the string supplied contains the _&lt;a href=&quot;file:///_&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///_&lt;/a&gt; prefix. If the prefix is not present warn the user that they are on windows and so they need to have it, modify the url and avoid having to carry out try-catches after an exception is thrown.  &lt;/p&gt;</comment>
                            <comment id="14031591" author="jmckenzie" created="Sat, 14 Jun 2014 15:06:35 +0000"  >&lt;p&gt;I&apos;m inclined to agree w/Lyuben - we have a precedent with our .yaml parsing to bomb the entire thing out with invalid input, and in cases where we have quirky platform-specific differences (URL being a recent case - see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7335&quot; title=&quot;GossipingPropertyFileSnitchTest fails on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7335&quot;&gt;&lt;del&gt;CASSANDRA-7335&lt;/del&gt;&lt;/a&gt;) I think the least surprising thing to do would be to bail out with a message to the user as to why rather than introducing a specific code-path to try and get Windows to behave.&lt;/p&gt;</comment>
                            <comment id="14031664" author="totopo_loco" created="Sat, 14 Jun 2014 19:10:42 +0000"  >&lt;p&gt;Hello, I have updated the patch file.&lt;br/&gt;
This version checks for not unix platform and checks the prefix path.&lt;br/&gt;
Throws an exception if fille:/// is not prefx of the path&lt;/p&gt;</comment>
                            <comment id="14033585" author="totopo_loco" created="Tue, 17 Jun 2014 09:12:03 +0000"  >&lt;p&gt;The user will see the following in the logs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;INFO  [main] 2014-06-17 11:06:35,063 Hostname: marcoavilac-win
ERROR [main] 2014-06-17 11:06:50,639 Fatal configuration error
org.apache.cassandra.exceptions.ConfigurationException: Not a UNIX environment detected and &lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;///&quot;&lt;/span&gt; not supplied in the start of path
&lt;/span&gt;	at org.apache.cassandra.config.YamlConfigurationLoader.getStorageConfigURL(YamlConfigurationLoader.java:62) ~[main/:na]
	at org.apache.cassandra.config.YamlConfigurationLoader.loadConfig(YamlConfigurationLoader.java:87) ~[main/:na]
	at org.apache.cassandra.config.DatabaseDescriptor.loadConfig(DatabaseDescriptor.java:153) ~[main/:na]
	at org.apache.cassandra.config.DatabaseDescriptor.&amp;lt;clinit&amp;gt;(DatabaseDescriptor.java:129) ~[main/:na]
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:109) [main/:na]
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:455) [main/:na]
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:544) [main/:na]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14033599" author="totopo_loco" created="Tue, 17 Jun 2014 09:24:30 +0000"  >&lt;p&gt;Version 3 of patch does not throw exception and modifies the url&lt;/p&gt;</comment>
                            <comment id="14033603" author="totopo_loco" created="Tue, 17 Jun 2014 09:29:06 +0000"  >&lt;p&gt;Added version 4, only difference to v3 is that logs before appending file prefix to the config file.&lt;/p&gt;</comment>
                            <comment id="14034850" author="lyubent" created="Wed, 18 Jun 2014 05:50:01 +0000"  >&lt;p&gt;+1, I&apos;m attaching v5 with a slight word formatting (I want to show that we&apos;re chaning the path to aswell) &lt;/p&gt;</comment>
                            <comment id="14037329" author="brandon.williams" created="Thu, 19 Jun 2014 13:33:00 +0000"  >&lt;p&gt;jbellis committed this.&lt;/p&gt;</comment>
                            <comment id="14037890" author="ala.alkhaldi" created="Thu, 19 Jun 2014 21:08:25 +0000"  >&lt;p&gt;A prefix with a single slash (i.e. &quot;file:/&quot;) or double slash (i.e. &quot;file://&quot; ) also works using windows CMD. However, applying this update will replace those prefixes by &quot;file:///&lt;a href=&quot;file:/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/&lt;/a&gt;&quot; and &quot;file:///&lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt;&quot; respectively which do not work.&lt;/p&gt;</comment>
                            <comment id="14037995" author="totopo_loco" created="Thu, 19 Jun 2014 22:12:20 +0000"  >&lt;p&gt;true needs to be checked if the string startsWith &lt;a href=&quot;file:/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/&lt;/a&gt;, I will write the junit test as well.&lt;/p&gt;</comment>
                            <comment id="14038660" author="totopo_loco" created="Fri, 20 Jun 2014 10:30:03 +0000"  >&lt;p&gt;Validates the path as described by Ala&apos;&lt;/p&gt;</comment>
                            <comment id="14038662" author="totopo_loco" created="Fri, 20 Jun 2014 10:30:23 +0000"  >&lt;p&gt;trunk-7398_v6.txt&lt;/p&gt;</comment>
                            <comment id="14038684" author="totopo_loco" created="Fri, 20 Jun 2014 11:15:21 +0000"  >&lt;p&gt;Handles case where the user will type something like &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt; (only that) or &lt;a href=&quot;file:///////something&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///////something&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14040531" author="slebresne" created="Mon, 23 Jun 2014 08:49:03 +0000"  >&lt;p&gt;Can somehow with windows knowledge have a look at the last patch here (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lyubent&quot; class=&quot;user-hover&quot; rel=&quot;lyubent&quot;&gt;lyubent&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt;)? This is one of the last things on the path to a rc2 release. &lt;/p&gt;</comment>
                            <comment id="14040578" author="snazy" created="Mon, 23 Jun 2014 09:47:16 +0000"  >&lt;p&gt;If it helps (and not already done), I can do this tomorrow evening (CEST).&lt;/p&gt;

&lt;p&gt;But the assumption to prefix &quot;everything&quot; with &lt;tt&gt;&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;&lt;/tt&gt; (three slashes before drive specification) is wrong.&lt;br/&gt;
&lt;a href=&quot;http://blogs.msdn.com/b/ie/archive/2006/12/06/file-uris-in-windows.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MSDN&lt;/a&gt; specifies the URI format:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&apos;file://&apos; &amp;lt;server&amp;gt; &apos;/&apos; &amp;lt;share&amp;gt; &apos;/&apos; &amp;lt;path&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &apos;server&apos; part is only empty for local files that are accessible via a drive-letter-mapping.&lt;/p&gt;

&lt;p&gt;One quick way out of the dilemma might be this os independent (pseudo) code:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;String configUrl = System.getProperty(&quot;cassandra.config&quot;);
URL url;
try
{
    // try to parse URI
    URI configURI = new URI(configUrl);
    url = configURI.toURL();
}
catch (UriSyntaxException...)
{
    // wrong URI format - try via file path
    URI configURI = new File(configUrl).toURI();
    url = configURI.toURL();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14040588" author="totopo_loco" created="Mon, 23 Jun 2014 10:00:13 +0000"  >&lt;p&gt;I have proposed to solve it via catching the Exception before (see my comment from 14/Jun/14 12:23.)&lt;/p&gt;

&lt;p&gt;I wouldn&apos;t like to parse the input from user, which could be prone to errors, I will add one more patch, but please decide on catching the exception or not.&lt;/p&gt;

&lt;p&gt;Regards&lt;/p&gt;</comment>
                            <comment id="14040592" author="snazy" created="Mon, 23 Jun 2014 10:06:47 +0000"  >&lt;p&gt;.bq I have proposed to solve it via catching the Exception before&lt;/p&gt;

&lt;p&gt;Sorry - havn&apos;t read the whole thread.&lt;/p&gt;</comment>
                            <comment id="14040680" author="totopo_loco" created="Mon, 23 Jun 2014 12:25:10 +0000"  >&lt;p&gt;Description of patch (v8):&lt;/p&gt;

&lt;p&gt;1) Re-factored methods to load config file by URI, by file or by resource&lt;br/&gt;
2) Handles the path problem in a OS independent way by catching URISyntaxException or MalformedURLException&lt;/p&gt;

&lt;p&gt;Junit tests:&lt;/p&gt;

&lt;p&gt;Tested the following cases:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;file:/C://etc/etc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/C://etc/etc&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;File does not exists&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;a href=&quot;file://C://etc/etc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://C://etc/etc&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Valid URI but file does not exist&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;a href=&quot;file:///C://etc/etc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///C://etc/etc&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Valid URI but file does not exist&amp;#93;&lt;/span&gt;&lt;br/&gt;
C://etc/etc &lt;span class=&quot;error&quot;&gt;&amp;#91;Invalid URI and file does not exist&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;not file defined&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;a href=&quot;file:///////////////fjdjfjsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///////////////fjdjfjsd&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Invalid URI&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Tested but commented in patch&lt;br/&gt;
C:\Users\marcoavilac\Documents\cassandra\cassandra\conf\cassandra.yaml &lt;span class=&quot;error&quot;&gt;&amp;#91;Invalid URI (will change backslashes to slashes) and file exists&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;file:///C:/Users/marcoavilac/Documents/cassandra/cassandra/conf/cassandra.yaml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///C:/Users/marcoavilac/Documents/cassandra/cassandra/conf/cassandra.yaml&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Valid URI and file exists&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14040710" author="lyubent" created="Mon, 23 Jun 2014 12:56:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=totopo_loco&quot; class=&quot;user-hover&quot; rel=&quot;totopo_loco&quot;&gt;totopo_loco&lt;/a&gt; Can you post a feature branch on git? v8 doesn&apos;t apply cleanly to trunk.&lt;/p&gt;</comment>
                            <comment id="14040769" author="totopo_loco" created="Mon, 23 Jun 2014 14:00:35 +0000"  >&lt;p&gt;Split by implementation&lt;/p&gt;</comment>
                            <comment id="14040770" author="totopo_loco" created="Mon, 23 Jun 2014 14:00:54 +0000"  >&lt;p&gt;Split by test&lt;/p&gt;</comment>
                            <comment id="14040794" author="totopo_loco" created="Mon, 23 Jun 2014 14:26:42 +0000"  >&lt;p&gt;I am using SourceTree, I commited with a request to pull, I hope this is the way&lt;/p&gt;</comment>
                            <comment id="14040822" author="totopo_loco" created="Mon, 23 Jun 2014 14:59:20 +0000"  >&lt;p&gt;I am not sure, could be I need to do as described here, please advise&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.atlassian.com/git/workflows#!pull-request&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.atlassian.com/git/workflows#!pull-request&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14040849" author="jbellis" created="Mon, 23 Jun 2014 15:29:51 +0000"  >&lt;p&gt;Reverted my initial commit so we don&apos;t block on this for rc2.&lt;/p&gt;</comment>
                            <comment id="14040857" author="totopo_loco" created="Mon, 23 Jun 2014 15:39:55 +0000"  >&lt;p&gt;I have seen Jonathan has reverted. Lyuben the patch should work now&lt;/p&gt;</comment>
                            <comment id="14041042" author="jmckenzie" created="Mon, 23 Jun 2014 17:54:57 +0000"  >&lt;p&gt;Just to distill and re-state what we&apos;re trying to accomplish here:  Java needs &quot;file:///&quot; in the cassandra.config param (on all platforms from my testing locally) and we don&apos;t want users to see the message &quot;Cannot locate &amp;lt;blah&amp;gt;&quot; if the problem is a missing prefix as that&apos;s misleading.  There&apos;s also talk of automatically prepending this for them.&lt;/p&gt;

&lt;p&gt;IMO we&apos;re adding an unnecessary amount of complexity to provide a small bit of flexibility in user configuration environments here; it would be far simpler to tweak our exception handling in YamlConfigurationLoader.getStorageConfigURL, string compare for &quot;file:///&quot; on the start of their provided cassandra.config param, print out a warning if it&apos;s missing, and fail to start the server.&lt;/p&gt;

&lt;p&gt;Along with that, the v8 patch looks to have hard-coded paths to your user account in the unit tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;hard-coded&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+    @Test
+    @Ignore
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testLoadConfigInValidInputBackSlashes()
+    {
+        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;cassandra.config&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;C:\\Users\\marcoavilac\\Documents\\cassandra\\cassandra\\conf\\cassandra.yaml&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14041405" author="totopo_loco" created="Mon, 23 Jun 2014 22:17:07 +0000"  >&lt;p&gt;Patches&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Version 7 provides the string comparison.&lt;/li&gt;
	&lt;li&gt;Version 8 provides the exception handling.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;That test case can be removed, it is tagged as Ignore anyway.&lt;/p&gt;

&lt;p&gt;IMO I would go for version 8 of patch.&lt;/p&gt;</comment>
                            <comment id="14042128" author="lyubent" created="Tue, 24 Jun 2014 13:56:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;A prefix with a single slash (i.e. &quot;file:/&quot;) or double slash (i.e. &quot;file://&quot; ) also works using windows CMD. However, applying this update will replace those prefixes by &quot;file:///&lt;a href=&quot;file:/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/&lt;/a&gt;&quot; and &quot;file:///&lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt;&quot; respectively which do not work.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is why I think instead of trying to correct the input by appending the prefix is a bad idea and instead we should throw an exception preventing server startup.  &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;the assumption to prefix &quot;everything&quot; with &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt; (three slashes before drive specification) is wrong.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Java needs &quot;file:///&quot; in the cassandra.config param&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We need to come to a consensus on what the prefix should be. /cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ala.alkhaldi&quot; class=&quot;user-hover&quot; rel=&quot;ala.alkhaldi&quot;&gt;ala.alkhaldi&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14042139" author="totopo_loco" created="Tue, 24 Jun 2014 14:07:24 +0000"  >&lt;p&gt;Has someone reviewed thoroughly the patches trunk-7398_v8_impl.txt and the junit tests in trunk-7398_v8_test.txt ? -&amp;gt; That is the implementation that Robert Stupp has suggested in his post, and what Joshua has stated in his &quot;IMO&quot;.&lt;/p&gt;

&lt;p&gt;Could someone apply the patch, run the Junit tests (add Unix type paths to the test cases) and report findings?&lt;/p&gt;

&lt;p&gt;Regards&lt;/p&gt;</comment>
                            <comment id="14042151" author="totopo_loco" created="Tue, 24 Jun 2014 14:09:47 +0000"  >&lt;p&gt;Hopefully the patch works because seems has been reverted the version where I created the patch&lt;/p&gt;

&lt;p&gt;Commit: 2420cb46bf3b5c07069a24f56af73d8a00d9673f &lt;span class=&quot;error&quot;&gt;&amp;#91;2420cb4&amp;#93;&lt;/span&gt;&lt;br/&gt;
Parents: a7ad9d2a5e&lt;br/&gt;
Author: Jonathan Ellis &amp;lt;jbellis@apache.org&amp;gt;&lt;br/&gt;
Date: Monday, June 23, 2014 17:29:25&lt;br/&gt;
Revert &quot;add &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt; on Windows to -Dcassandra.config value&quot;&lt;/p&gt;

&lt;p&gt;This reverts commit 498ee24b52a6876a008c3d3d3ef4870e4bd9842c.&lt;/p&gt;
</comment>
                            <comment id="14042177" author="jmckenzie" created="Tue, 24 Jun 2014 14:35:51 +0000"  >&lt;p&gt;If we need flexibility to have &lt;a href=&quot;file://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://&lt;/a&gt;&amp;lt;server&amp;gt;/&amp;lt;etc&amp;gt; vs. &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;, we should update the title and description of this ticket to reflect that - as Robert indicated, &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt; doesn&apos;t satisfy all use-cases.  Since this isn&apos;t a &lt;a href=&quot;http://en.wikipedia.org/wiki/File_URI_scheme&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;windows-specific&lt;/a&gt; issue, we should update the ticket to reflect that as well.&lt;/p&gt;

&lt;p&gt;I&apos;m still in the camp that we should just fail start-up and perhaps give a touch more information in the exception handling regarding our inability to find their config file rather than attempting to munge with the provided config to find the file.  The prefix should be functional with standard URI formatting - if it&apos;s not we should let the user know and exit.&lt;/p&gt;</comment>
                            <comment id="14042182" author="lyubent" created="Tue, 24 Jun 2014 14:38:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m still in the camp that we should just fail start-up&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Patch didn&apos;t apply for me so I created a &lt;a href=&quot;https://github.com/lyubent/cassandra/commit/59428742dbc661ff529cf6b0f1ced472073c4db9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;feature branch&lt;/a&gt;. I&apos;ll work on adding a test case using &lt;tt&gt;Files.createTempDir()&lt;/tt&gt; so paths aren&apos;t hardcoded.&lt;/p&gt;</comment>
                            <comment id="14042313" author="lyubent" created="Tue, 24 Jun 2014 16:16:40 +0000"  >&lt;p&gt;Added a test case to verify we can find the config file used during the unit tests. Pushed to &lt;a href=&quot;https://github.com/lyubent/cassandra/commit/ebcb2255019cf304f3416128ec0eb191e56ab0d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ebcb22&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14064165" author="jbellis" created="Wed, 16 Jul 2014 21:48:33 +0000"  >&lt;p&gt;Can you review, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14065678" author="jmckenzie" created="Thu, 17 Jul 2014 22:13:24 +0000"  >&lt;p&gt;Attaching a simple v9 that checks the provided cassandra.config value and gives a more informative error based on whether or not the user has provided a string that conforms to the URI spec.&lt;/p&gt;

&lt;p&gt;As I&apos;ve stated previously, I feel pretty strongly that this isn&apos;t a place where we need to add a lot of complexity (logic + unit tests) around trying to figure out what the user actually intended to provide.  Far simpler (and cleaner) to just educate them on the fact that they need to provide a URI as that param and exit.&lt;/p&gt;</comment>
                            <comment id="14087610" author="lyubent" created="Wed, 6 Aug 2014 12:43:19 +0000"  >&lt;p&gt;+1 on v9.&lt;/p&gt;

&lt;p&gt;I think trying to handle various URL formats like &lt;tt&gt;&lt;a href=&quot;file:/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/&lt;/a&gt;&lt;/tt&gt;, &lt;tt&gt;&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///&lt;/a&gt;&lt;/tt&gt; etc. is too error prone. Sticking with what we have and erroring out correctly seems like the right approach here. /cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=totopo_loco&quot; class=&quot;user-hover&quot; rel=&quot;totopo_loco&quot;&gt;totopo_loco&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14089470" author="jmckenzie" created="Thu, 7 Aug 2014 17:13:59 +0000"  >&lt;p&gt;committed v9.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12656370" name="7398_v9.txt" size="1569" author="joshuamckenzie" created="Thu, 17 Jul 2014 22:13:24 +0000"/>
                            <attachment id="12650456" name="CASSANDRA-7398_prefix_v2.patch" size="2125" author="totopo_loco" created="Sat, 14 Jun 2014 19:10:42 +0000"/>
                            <attachment id="12650765" name="CASSANDRA-7398_prefix_v3.patch" size="1869" author="totopo_loco" created="Tue, 17 Jun 2014 09:23:26 +0000"/>
                            <attachment id="12650766" name="CASSANDRA-7398_prefix_v4.patch" size="2113" author="totopo_loco" created="Tue, 17 Jun 2014 09:29:06 +0000"/>
                            <attachment id="12650970" name="trunk-7398_v5.txt" size="1677" author="lyubent" created="Wed, 18 Jun 2014 05:50:01 +0000"/>
                            <attachment id="12651647" name="trunk-7398_v6.txt" size="8621" author="totopo_loco" created="Fri, 20 Jun 2014 10:30:03 +0000"/>
                            <attachment id="12651652" name="trunk-7398_v7.txt" size="9072" author="totopo_loco" created="Fri, 20 Jun 2014 11:15:21 +0000"/>
                            <attachment id="12651966" name="trunk-7398_v8.txt" size="12166" author="totopo_loco" created="Mon, 23 Jun 2014 12:25:10 +0000"/>
                            <attachment id="12651973" name="trunk-7398_v8_impl.txt" size="6711" author="totopo_loco" created="Mon, 23 Jun 2014 14:00:35 +0000"/>
                            <attachment id="12651974" name="trunk-7398_v8_test.txt" size="5455" author="totopo_loco" created="Mon, 23 Jun 2014 14:00:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jmckenzie]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wrbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399521</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326658">2.1 rc1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>lyubent</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[lyubent]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>