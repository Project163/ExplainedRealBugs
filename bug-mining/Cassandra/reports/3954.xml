<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:59:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10741] Unable to create a function with argument of type Inet</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10741</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We are unable to create a function with an argument of type &lt;tt&gt;inet&lt;/tt&gt; using 3.0.&lt;/p&gt;

&lt;p&gt;This works in 2.2, but fails in 3.0&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE OR REPLACE FUNCTION test.f2 (p1 inet)
CALLED ON NULL INPUT RETURNS int LANGUAGE java AS &apos;return 2;&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From cqlsh:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;05:14 PM:~/projects/cassandra-3.0$ ./bin/cqlsh
Connected to Test Cluster at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 3.0.0-SNAPSHOT | CQL spec 3.3.1 | Native protocol v4]
Use HELP for help.
cqlsh&amp;gt; CREATE OR REPLACE FUNCTION test.f2 (p1 inet)
   ... CALLED ON NULL INPUT RETURNS int LANGUAGE java AS &apos;return 2;&apos;;
InvalidRequest: code=2200 [Invalid query] message=&quot;Could not compile function &apos;test.f2&apos; from Java source: org.apache.cassandra.exceptions.InvalidRequestException: Java source compilation failed:
GENERATED SOURCE ERROR: line 20 (in generated source): java.net.InetAddress cannot be resolved to a type
GENERATED SOURCE ERROR: line 25 (in generated source): java.net.InetAddress cannot be resolved to a type

 generated source:
package org.apache.cassandra.cql3.udf.gen.ptest2ef2_4746343_7;

import java.nio.ByteBuffer;
import java.util.List;

import org.apache.cassandra.cql3.functions.JavaUDF;

import com.datastax.driver.core.DataType;

public final class Ctest2ef2_12216880_8 extends JavaUDF
{
    public Ctest2ef2_12216880_8(DataType returnDataType, DataType[] argDataTypes)
    {
        super(returnDataType, argDataTypes);
    }

    protected ByteBuffer executeImpl(int protocolVersion, List&amp;lt;ByteBuffer&amp;gt; params)
    {
        Integer result = xtest2ef2_16165915_9(
            (java.net.InetAddress) super.compose(protocolVersion, 0, params.get(0))
        );
        return super.decompose(protocolVersion, result);
    }

    private Integer xtest2ef2_16165915_9(java.net.InetAddress p1)
    {
return 2;
    }
}
&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12914702">CASSANDRA-10741</key>
            <summary>Unable to create a function with argument of type Inet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="snazy">Robert Stupp</assignee>
                                    <reporter username="djatnieks">dan jatnieks</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Nov 2015 01:25:47 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:56 +0000</updated>
                            <resolved>Mon, 23 Nov 2015 15:54:52 +0000</resolved>
                                        <fixVersion>3.0.1</fixVersion>
                    <fixVersion>3.1</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15015382" author="snazy" created="Fri, 20 Nov 2015 07:46:04 +0000"  >&lt;p&gt;Confirm this behavior in 3.0 - 2.2 is not affected (but I would include a utest for 2.2 in the patch).&lt;/p&gt;</comment>
                            <comment id="15015443" author="snazy" created="Fri, 20 Nov 2015 08:53:53 +0000"  >&lt;p&gt;Use of &lt;tt&gt;INET&lt;/tt&gt; type was forbidden by UDF sandbox. Unfortunately &lt;tt&gt;java.net.InetAddress&lt;/tt&gt; pulls in &lt;tt&gt;java.net.NetworkInterface&lt;/tt&gt;. &quot;Dangerous&quot; uses of methods in both classes are forbidden by the Java-UDF byte code verifier. But it&apos;s not possible to forbid uses of all methods of these classes for script UDFs (if script UDFs are enabled).&lt;/p&gt;

&lt;p&gt;EDIT: Patch allows use of &lt;tt&gt;INET&lt;/tt&gt; - also added a bunch of new tests.&lt;/p&gt;

&lt;p&gt;Git branches:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;2.2: &lt;a href=&quot;https://github.com/snazy/cassandra/tree/10741-udf-inet-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/snazy/cassandra/tree/10741-udf-inet-2.2&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;3.0: &lt;a href=&quot;https://github.com/snazy/cassandra/tree/10741-udf-inet-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/snazy/cassandra/tree/10741-udf-inet-3.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;trunk: (just a merge) &lt;a href=&quot;https://github.com/snazy/cassandra/tree/10741-udf-inet-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/snazy/cassandra/tree/10741-udf-inet-trunk&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Cassci: &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/snazy/search/?q=snazy-10741-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/snazy/search/?q=snazy-10741-&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;testall triggered for 2.2, 3.0, trunk&lt;/li&gt;
	&lt;li&gt;dtest triggered for 3.0, trunk&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15018481" author="jmckenzie" created="Fri, 20 Nov 2015 18:36:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tjake&quot; class=&quot;user-hover&quot; rel=&quot;tjake&quot;&gt;tjake&lt;/a&gt; to review.&lt;/p&gt;</comment>
                            <comment id="15022250" author="tjake" created="Mon, 23 Nov 2015 15:19:08 +0000"  >&lt;p&gt;You removed this line which seems unrelated. Was that intentional?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/snazy/cassandra/commit/b5652194c0099dc300646c8c87aefb2b71d90b2e#diff-46167493f817c3a3c5ee98461be23c0bL112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/snazy/cassandra/commit/b5652194c0099dc300646c8c87aefb2b71d90b2e#diff-46167493f817c3a3c5ee98461be23c0bL112&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15022269" author="snazy" created="Mon, 23 Nov 2015 15:28:46 +0000"  >&lt;p&gt;Eh - oh - no. It wasn&apos;t intentional. Fixed that in a separate commit.&lt;/p&gt;</comment>
                            <comment id="15022277" author="tjake" created="Mon, 23 Nov 2015 15:32:20 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15022323" author="snazy" created="Mon, 23 Nov 2015 15:54:52 +0000"  >&lt;p&gt;Thanks!&lt;br/&gt;
Committed the unit test to 2.2 as d425fe496a3ebe921baee8a7ac7040e5bfb36db3.&lt;br/&gt;
Committed the &quot;real&quot; stuff to 3.0 as 174a0aa7d1f643cd27f15c8255627fdfdca1ae22 and merged to 3.1, trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[snazy]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ooh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333891">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tjake</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[tjake]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>