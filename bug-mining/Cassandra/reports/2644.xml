<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:43:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6782] setting TTL on some columns seems to expire whole row</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6782</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I create a table with 4 columns, set a ttl on 2 of the columns and when the TTL is up, the entire row disappears.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cqlsh:myks&amp;gt; CREATE TABLE paging_test (
        ...   id int,
        ...   mytext text,
        ...   anothervalue text,
        ...   somevalue text,
        ...   PRIMARY KEY (id, mytext)
        ... );
cqlsh:myks&amp;gt; insert into paging_test (id, mytext, anothervalue, somevalue) values (1, &apos;foo&apos;, &apos;some&apos;, &apos;another&apos;);
cqlsh:myks&amp;gt; select * from paging_test;

 id | mytext | anothervalue | somevalue
----+--------+--------------+-----------
  1 |    foo |         some |   another

(1 rows)

cqlsh:myks&amp;gt; update paging_test using ttl 10
        ...   set somevalue=&apos;one&apos;, anothervalue=&apos;two&apos;
        ...   where id = 1 and mytext = &apos;foo&apos;;
cqlsh:myks&amp;gt; select * from paging_test;

 id | mytext | anothervalue | somevalue
----+--------+--------------+-----------
  1 |    foo |          two |       one

(1 rows)

cqlsh:myks&amp;gt; -- wait for it....
cqlsh:myks&amp;gt; select * from paging_test;

(0 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;java version &quot;1.7.0_51&quot;&lt;br/&gt;
cassandra from trunk: 9c4824d6c476&lt;/p&gt;</environment>
        <key id="12697821">CASSANDRA-6782</key>
            <summary>setting TTL on some columns seems to expire whole row</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="rhatch">Russ Hatch</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Feb 2014 22:53:04 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:52 +0000</updated>
                            <resolved>Tue, 4 Mar 2014 10:53:42 +0000</resolved>
                                        <fixVersion>2.0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13915522" author="slebresne" created="Fri, 28 Feb 2014 07:28:16 +0000"  >&lt;p&gt;Well, I would point to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6668?focusedCommentId=13911416&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13911416&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;my comment on CASSANDRA-6668&lt;/a&gt; as this very much is the exact same thing here.&lt;/p&gt;

&lt;p&gt;But to repeat the gist of it, the current semantic of an UPDATE is that it actually also update every column in the WHERE clause, and so the update above actually set a TTL on all the columns of the row. I don&apos;t disagree that this current semantic is rather intuitive though, but this is not a new semantic to 2.1 so changing it, while technically trivial, is a potential issue for backward compatibility. Though maybe &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6668&quot; title=&quot;Inconsistent handling of row expiration using TTL in collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6668&quot;&gt;&lt;del&gt;CASSANDRA-6668&lt;/del&gt;&lt;/a&gt; and this ticket suggests that said current semantic is unintuitive enough that nobody could seriously have been relying on it and that we&apos;d better &quot;fix&quot; it. I sure would not hesitate to change it if there wasn&apos;t the risk of maybe breaking a few users.&lt;/p&gt;</comment>
                            <comment id="13916134" author="rhatch" created="Fri, 28 Feb 2014 18:24:59 +0000"  >&lt;p&gt;I&apos;m not certain how folks may be using this behavior, but I&apos;m inclined to think it&apos;s pretty surprising. I have seen one instance where someone mentioned that they are setting a TTL for an entire row and then issue updates after the fact to give shorter TTL&apos;s to specific data (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6654&quot; title=&quot;Droppable tombstones are not being removed from LCS table despite being above 20%&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6654&quot;&gt;&lt;del&gt;CASSANDRA-6654&lt;/del&gt;&lt;/a&gt;). They would be unwittingly expiring the data they use to isolate a single row at the same time when they intend to keep that data.&lt;/p&gt;</comment>
                            <comment id="13916212" author="jbellis" created="Fri, 28 Feb 2014 19:19:48 +0000"  >&lt;p&gt;I&apos;m curious why we did it this way since it&apos;s not what I&apos;d expect either.&lt;/p&gt;</comment>
                            <comment id="13916266" author="brandon.williams" created="Fri, 28 Feb 2014 19:51:29 +0000"  >&lt;p&gt;I have to agree, this syntax seems misleading.&lt;/p&gt;</comment>
                            <comment id="13916329" author="slebresne" created="Fri, 28 Feb 2014 20:26:40 +0000"  >&lt;p&gt;Ok, seems there is a relatively good agreement that this needs to change, so attaching trivial patch for that.&lt;/p&gt;</comment>
                            <comment id="13919173" author="iamaleksey" created="Tue, 4 Mar 2014 09:17:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13919238" author="slebresne" created="Tue, 4 Mar 2014 10:53:42 +0000"  >&lt;p&gt;Alright, committed, thanks&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13035319">CASSANDRA-13127</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12750371">CASSANDRA-8185</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12751333">CASSANDRA-8206</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12749247">CASSANDRA-8147</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12631823" name="6782.txt" size="2287" author="slebresne" created="Fri, 28 Feb 2014 20:26:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sucv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324159">2.1 rc3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>