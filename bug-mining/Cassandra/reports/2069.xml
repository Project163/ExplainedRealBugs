<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:37:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5289] DatabaseDescriptor.hasExistingNoSystemTables return true even with only system keyspace</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5289</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The hasExistingNoSystemTables method in DatabaseDescriptor checks for directory only. &lt;/p&gt;

&lt;p&gt;On a new start, system KS would be created. This method current return true because of it, resulting incorrect/confusing log:&lt;/p&gt;

&lt;p&gt; logger.info(&quot;Found table data in data directories. Consider using the CLI to define your schema.&quot;)     ;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12634066">CASSANDRA-5289</key>
            <summary>DatabaseDescriptor.hasExistingNoSystemTables return true even with only system keyspace</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cywjackson">Jackson Chung</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Feb 2013 05:43:32 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:17 +0000</updated>
                            <resolved>Thu, 7 Mar 2013 21:18:02 +0000</resolved>
                                                            <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13586812" author="cywjackson" created="Tue, 26 Feb 2013 05:47:06 +0000"  >&lt;p&gt;patch to add check the name not equal to Table.SYSTEM_KS&lt;/p&gt;

&lt;p&gt;patch based on 1.1 branch&lt;/p&gt;

&lt;p&gt;note for trunk, Table.SYSTEM_KS is changed to Table.SYSTEM_TABLE&lt;/p&gt;</comment>
                            <comment id="13592183" author="jasobrown" created="Mon, 4 Mar 2013 13:18:28 +0000"  >&lt;p&gt;Honestly, you could debate whether we need that check at all. In either case, all we do after calling hasExistingNoSystemTables() is tell the user to create some CFs - I think that should be obvious by now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I think we can just eliminate that method and the not overwhelmingly helpful logging, and have startup be nanoseonds more efficient.&lt;/p&gt;</comment>
                            <comment id="13595406" author="cywjackson" created="Thu, 7 Mar 2013 01:29:19 +0000"  >&lt;p&gt;I understand your point. &lt;/p&gt;

&lt;p&gt;We had a EC2 node outage last week, and subsequently the ops team rebuilt a node to replace it. &lt;/p&gt;

&lt;p&gt;However, I am not part of the ops team and so wasn&apos;t aware of such happened. But I was reviewing the logs for other issues, and reaching here was really confusing. (i saw node was started with new token indicating a new start, but then saw the log msg seems suggesting there were data).&lt;/p&gt;

&lt;p&gt;Hence I would prefer keep the log but fix the bug to make it clear, instead of seeking for that sub nanoseconds improvement. But I would agree taking the log out would make it less confusing and gain that sub nanoseconds improvement.&lt;/p&gt;

&lt;p&gt;Either way, your call &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13596383" author="jbellis" created="Thu, 7 Mar 2013 21:18:03 +0000"  >&lt;p&gt;I still see people copying their data files to a new cluster and wondering why Cassandra reports no table definitions.  So I&apos;d prefer to fix the message than remove it.&lt;/p&gt;

&lt;p&gt;Jackson&apos;s fix LGTM.  Committed, and in 1.2+ fixed the method name typo (should be Non-.)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12570933" name="5289.diff" size="667" author="cywjackson" created="Tue, 26 Feb 2013 05:47:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314559</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ia5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314903</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>