<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:17:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-628] java.net.SocketException: Invalid argument / java.net.NoRouteToHostException: Network is unreachable</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-628</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This manifests as either a SocketException that occurs when starting a cassandra node, or a NoRouteToHostException which occurs when connecting with a client.&lt;/p&gt;

&lt;p&gt;On Linux systems this is caused by IPV6_V6ONLY being set true. The docs (ipv6(7)) say that when set this causes sockets to be created IPv6 only, while the previous behavior also allowed sending and receiving packets using an  IPv4-mapped IPv6 address.&lt;/p&gt;

&lt;p&gt;The quick fix is to either launch applications using the -Djava.net.preferIPv4Stack=true property, or on Linux systems set net.ipv6.bindv6only=0 (see sysctl(8)).&lt;/p&gt;

&lt;p&gt;My limited understanding is that the previous behavior (IPV6_V6ONLY=0) was always considered a hack to be used until IPv6 was more mature/had gained traction and that a change in defaults was always inevitable, so in the long-term a Real Fix will be needed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6342561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6342561&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=560056&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=560056&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, FreeBSD, (possibly others)&lt;/p&gt;</environment>
        <key id="12443144">CASSANDRA-628</key>
            <summary>java.net.SocketException: Invalid argument / java.net.NoRouteToHostException: Network is unreachable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="urandom">Eric Evans</assignee>
                                    <reporter username="urandom">Eric Evans</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Dec 2009 20:55:14 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:30 +0000</updated>
                            <resolved>Fri, 29 Oct 2010 21:40:56 +0000</resolved>
                                        <fixVersion>0.7.0 rc 1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12870311" author="jbellis" created="Sat, 22 May 2010 17:08:36 +0000"  >&lt;p&gt;Should we apply the &quot;quick fix&quot; for now?&lt;/p&gt;</comment>
                            <comment id="12870312" author="jbellis" created="Sat, 22 May 2010 17:08:54 +0000"  >&lt;p&gt;that is, -Djava.net.preferIPv4Stack=true&lt;/p&gt;</comment>
                            <comment id="12870349" author="urandom" created="Sun, 23 May 2010 02:58:16 +0000"  >&lt;p&gt;We&apos;ve at least one user who uses IPv6, and as far as I know, I&apos;m the only one that has run into this particular problem; I think that setting -Djava.net.preferIPv4Stack=true would be optimizing for the wrong case. &lt;/p&gt;

&lt;p&gt;Also, this problem and the workarounds for it are pretty well known at this point, so it&apos;s possible that it isn&apos;t much of an issue because folks who run Java are already setting IPV6_V6ONLY=0. &lt;/p&gt;

&lt;p&gt;I mostly submitted this to document.&lt;/p&gt;</comment>
                            <comment id="12870397" author="jbellis" created="Sun, 23 May 2010 13:53:36 +0000"  >&lt;p&gt;Okay, resolving as not-a-problem then.&lt;/p&gt;</comment>
                            <comment id="12923741" author="benjaminblack" created="Fri, 22 Oct 2010 02:40:49 +0000"  >&lt;p&gt;Given the decreasing average skill level of users and the defaults on common distributions, this issue is becoming both more common and confusing more people.  Distributions are not going to be changing their defaults.  We should reconsider added the preferIPv4 setting to the default config, perhaps based on inspecting the setting of IPV6_V6ONLY.&lt;/p&gt;</comment>
                            <comment id="12923789" author="scode" created="Fri, 22 Oct 2010 07:16:32 +0000"  >&lt;p&gt;I agree. FWIW, this is an issue on FreeBSD too, so it&apos;s not limited to Linux (I&apos;m not sure whether there is an equivalent to the sysctl work-around).&lt;/p&gt;

&lt;p&gt;Googling for this issue I know lots of people seem to be running into this and asking about it on forums etc (not specifically to Cassandra). In the case of Cassandra, for many people it may be their first use of a production Java app. Assuming a non-programmer user, failing on this issue by default and having to figure out or ask about a stack trace is not a very good first-time experience.&lt;/p&gt;

&lt;p&gt;While ideologically one might go for the &quot;it&apos;s the user&apos;s responsibility to sort out his networking&quot; argument, until IPv6 is more widely used it really seems like a completely sensible default. The level of expected clue expected if you&apos;re running in an IPv6 environment is currently high enough that having to nudge this system property is not an issue (especially if there&apos;s a faq entry/note about its use somewhere).&lt;/p&gt;</comment>
                            <comment id="12926470" author="urandom" created="Fri, 29 Oct 2010 21:40:56 +0000"  >&lt;p&gt;committed.&lt;/p&gt;</comment>
                            <comment id="12926574" author="hudson" created="Sat, 30 Oct 2010 12:48:33 +0000"  >&lt;p&gt;Integrated in Cassandra #581 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra/581/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra/581/&lt;/a&gt;)&lt;br/&gt;
    document &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-628&quot; title=&quot;java.net.SocketException: Invalid argument / java.net.NoRouteToHostException: Network is unreachable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-628&quot;&gt;&lt;del&gt;CASSANDRA-628&lt;/del&gt;&lt;/a&gt; change (prefer IPv4)&lt;/p&gt;

&lt;p&gt;Patch by eevans&lt;br/&gt;
make -Djava.net.preferIPv4Stack=true default&lt;/p&gt;

&lt;p&gt;Patch by eevans for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-628&quot; title=&quot;java.net.SocketException: Invalid argument / java.net.NoRouteToHostException: Network is unreachable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-628&quot;&gt;&lt;del&gt;CASSANDRA-628&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19787</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g03r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91447</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>