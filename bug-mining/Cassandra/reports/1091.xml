<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:22:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3108] Make Range and Bounds objects client-safe</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3108</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;From Mck&apos;s comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1125&quot; title=&quot;Filter out ColumnFamily rows that aren&amp;#39;t part of the query (using a KeyRange)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1125&quot;&gt;&lt;del&gt;CASSANDRA-1125&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Something broke here in production once we went out with 0.8.2. It may have been some poor testing, i&apos;m not entirely sure and a little surprised.&lt;/p&gt;

&lt;p&gt;CFIF:135 breaks because inside dhtRange.intersects(jobRange) there&apos;s a call to new Range(token, token) which calls StorageService.getPartitioner() and StorageService is null as we&apos;re not inside the server.&lt;/p&gt;

&lt;p&gt;A quick fix is to change Range:148 from new Range(token, token) to new Range(token, token, partitioner) making the presumption that the partitioner for the new Range will be the same as this Range.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12520830">CASSANDRA-3108</key>
            <summary>Make Range and Bounds objects client-safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mck">Michael Semb Wever</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                            <label>hadoop</label>
                    </labels>
                <created>Tue, 30 Aug 2011 20:43:52 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:52 +0000</updated>
                            <resolved>Tue, 30 Aug 2011 21:16:06 +0000</resolved>
                                        <fixVersion>0.8.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13094093" author="jbellis" created="Tue, 30 Aug 2011 20:45:48 +0000"  >&lt;p&gt;patch to make all internal Range and Bounds construction use the 3-arg constructor.&lt;/p&gt;</comment>
                            <comment id="13094104" author="michaelsembwever" created="Tue, 30 Aug 2011 21:11:52 +0000"  >&lt;p&gt;Tested in production. &lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="13094107" author="jbellis" created="Tue, 30 Aug 2011 21:16:06 +0000"  >&lt;p&gt;committed, thanks!&lt;/p&gt;</comment>
                            <comment id="13094160" author="hudson" created="Tue, 30 Aug 2011 22:25:37 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #305 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra-0.8/305/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra-0.8/305/&lt;/a&gt;)&lt;br/&gt;
    make Range and Bounds objects client-safe&lt;br/&gt;
patch by Mck SembWever and jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3108&quot; title=&quot;Make Range and Bounds objects client-safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3108&quot;&gt;&lt;del&gt;CASSANDRA-3108&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;jbellis : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1163394&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1163394&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/dht/Bounds.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/dht/Range.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13097126" author="michaelsembwever" created="Mon, 5 Sep 2011 11:33:49 +0000"  >&lt;p&gt;Didn&apos;t see it until now but your patch Jonathan removes the limitation that ConfigHelper&apos;s InputKeyRange cannot wrap.&lt;br/&gt;
I&apos;ve entered &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3137&quot; title=&quot;Implement wrapping intersections for ConfigHelper&amp;#39;s InputKeyRange&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3137&quot;&gt;&lt;del&gt;CASSANDRA-3137&lt;/del&gt;&lt;/a&gt; to allow wrapping intersections in &lt;tt&gt;ColumnFamilyInputFormat&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13097271" author="jbellis" created="Mon, 5 Sep 2011 19:19:51 +0000"  >&lt;p&gt;That was unintentional &amp;#8211; how did I do that?&lt;/p&gt;</comment>
                            <comment id="13097282" author="michaelsembwever" created="Mon, 5 Sep 2011 19:40:37 +0000"  >&lt;p&gt;You drastically removed the usage of the &lt;tt&gt;Range(left, right)&lt;/tt&gt; constructor so that even the usage of &lt;tt&gt;intersectionBothWrapping(..)&lt;/tt&gt; and &lt;tt&gt;intersectionOneWrapping(..)&lt;/tt&gt; avoids any server-side calls.&lt;/p&gt;

&lt;p&gt;In CFIF there AFAIK doesn&apos;t seem any other limitation to wrapping ranges...&lt;/p&gt;</comment>
                            <comment id="13098369" author="jbellis" created="Tue, 6 Sep 2011 21:28:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;even the usage of intersectionBothWrapping(..) and intersectionOneWrapping(..) avoids any server-side calls&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right.  What I don&apos;t follow is how this changes behavior of allowing wrapping ranges?&lt;/p&gt;</comment>
                            <comment id="13098810" author="michaelsembwever" created="Wed, 7 Sep 2011 09:37:04 +0000"  >&lt;p&gt;No, in itself it doesn&apos;t implement wrapping ranges. But by making intersectionBothWrapping(..) and intersectionOneWrapping(..) client safe it makes it possible to implement.&lt;br/&gt;
I think the best explanation to your question Jonathan is to look at the patch available in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3137&quot; title=&quot;Implement wrapping intersections for ConfigHelper&amp;#39;s InputKeyRange&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3137&quot;&gt;&lt;del&gt;CASSANDRA-3137&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12492363" name="3108.txt" size="3789" author="jbellis" created="Tue, 30 Aug 2011 20:45:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mck]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gfw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94005</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>