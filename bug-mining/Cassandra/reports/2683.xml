<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:43:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6376] Pig tests are failing</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6376</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;On my box, all pig tests are failing with the following stack:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Testcase: org.apache.cassandra.pig.CqlTableDataTypeTest:	Caused an ERROR
    [junit] null
    [junit] java.lang.ExceptionInInitializerError
    [junit] 	at org.apache.cassandra.pig.PigTestBase.startHadoopCluster(PigTestBase.java:104)
    [junit] 	at org.apache.cassandra.pig.CqlTableDataTypeTest.setup(CqlTableDataTypeTest.java:198)
    [junit] Caused by: java.lang.NullPointerException
    [junit] 	at org.apache.hadoop.hdfs.MiniDFSCluster.startDataNodes(MiniDFSCluster.java:422)
    [junit] 	at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:280)
    [junit] 	at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:124)
    [junit] 	at org.apache.pig.test.MiniCluster.setupMiniDfsAndMrClusters(MiniCluster.java:50)
    [junit] 	at org.apache.pig.test.MiniGenericCluster.&amp;lt;init&amp;gt;(MiniGenericCluster.java:49)
    [junit] 	at org.apache.pig.test.MiniCluster.&amp;lt;init&amp;gt;(MiniCluster.java:31)
    [junit] 	at org.apache.pig.test.MiniGenericCluster.&amp;lt;clinit&amp;gt;(MiniGenericCluster.java:45)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;On &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6375&quot; title=&quot;Unit test failures on 1.2 branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6375&quot;&gt;&lt;del&gt;CASSANDRA-6375&lt;/del&gt;&lt;/a&gt;, Brandon reported that it was the case on his box too, so I don&apos;t think it&apos;s a local to my machine. Seems to be a relatively basic setup thing though, not an actual test failure.&lt;/p&gt;

&lt;p&gt;I&apos;ll also note that we have a specific target for pig tests and that this target uses a longer timeout than the one for the test target. If that&apos;s because pig tests typically don&apos;t finish within the test timeout, then it would be nice to exclude them from the normal test target (and maybe include them in the long-test target).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12680000">CASSANDRA-6376</key>
            <summary>Pig tests are failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alexliu68">Alex Liu</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Nov 2013 17:32:08 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:59 +0000</updated>
                            <resolved>Fri, 14 Mar 2014 19:55:06 +0000</resolved>
                                        <fixVersion>1.2.16</fixVersion>
                    <fixVersion>2.0.7</fixVersion>
                    <fixVersion>2.1 beta2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13828309" author="alexliu68" created="Wed, 20 Nov 2013 23:41:41 +0000"  >&lt;p&gt;Add &quot;exclude&quot; attribute to testmacro, default exclude pig test.&lt;/p&gt;</comment>
                            <comment id="13828594" author="slebresne" created="Thu, 21 Nov 2013 08:21:12 +0000"  >&lt;p&gt;I&apos;ll note that while I&apos;m +1 on this exclude patch, the pig test fails with that ExceptionInInitializerError above even if run alone through the pig-test target, which is the main problem I meant we should fix here.&lt;/p&gt;</comment>
                            <comment id="13829020" author="brandon.williams" created="Thu, 21 Nov 2013 15:21:05 +0000"  >&lt;p&gt;Hmm, pig-test passes for me just fine.&lt;/p&gt;</comment>
                            <comment id="13829027" author="slebresne" created="Thu, 21 Nov 2013 15:32:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;pig-test passes for me just fine.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Interesting. But you didn&apos;t saw the same stacktrace than in the description when running it with the main test target did you? If you did, that doesn&apos;t make a whole lot of sense because the pig-test target does nothing more than only running the pig tests with a different timeout.&lt;/p&gt;

&lt;p&gt;I wonder if it&apos;s not some dependency that needs to be installed that I don&apos;t have but you two guys have because you&apos;ve used pig and I never have. In any case, if it&apos;s just a weird local thing of my machine, then I suppose I don&apos;t really care, I&apos;ll just never run the pig-test. But can at least one more people check the pig-test target and say what he got?&lt;/p&gt;</comment>
                            <comment id="13829045" author="brandon.williams" created="Thu, 21 Nov 2013 15:50:11 +0000"  >&lt;p&gt;I think the root cause originally wasn&apos;t an NPE, if you look at the log output slightly above that, is a NCDF error in hadoop itself.  I think this is because Cassandra is built against a different hadoop version than hadoop.minicluster is, and that&apos;s why running the pig tests in isolation works.&lt;/p&gt;</comment>
                            <comment id="13933940" author="jbellis" created="Thu, 13 Mar 2014 19:40:52 +0000"  >&lt;p&gt;where does that leave us here?&lt;/p&gt;</comment>
                            <comment id="13933978" author="brandon.williams" created="Thu, 13 Mar 2014 20:09:41 +0000"  >&lt;p&gt;Now they seem to execute fine, but have an error:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Testcase: testCqlStorageCollectionColumnTable(org.apache.cassandra.pig.CqlTableTest):       FAILED
    [junit] expected:&amp;lt;3&amp;gt; but was:&amp;lt;2&amp;gt;
    [junit] junit.framework.AssertionFailedError: expected:&amp;lt;3&amp;gt; but was:&amp;lt;2&amp;gt;
    [junit]     at org.apache.cassandra.pig.CqlTableTest.testCqlStorageCollectionColumnTable(CqlTableTest.java:186)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13935305" author="alexliu68" created="Fri, 14 Mar 2014 17:38:33 +0000"  >&lt;p&gt;Fix the failed test case. v2 is attached.&lt;/p&gt;</comment>
                            <comment id="13935543" author="brandon.williams" created="Fri, 14 Mar 2014 19:55:06 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615034" name="6376-1.2-branch.txt" size="1178" author="alexliu68" created="Wed, 20 Nov 2013 23:43:14 +0000"/>
                            <attachment id="12634759" name="6376-v2.txt" size="1666" author="alexliu68" created="Fri, 14 Mar 2014 17:38:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[alexliu68]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359357</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1py7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359656</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12325022">1.2.11</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>