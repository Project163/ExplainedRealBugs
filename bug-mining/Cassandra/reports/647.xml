<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:18:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1979] CassandraServiceDataCleaner.prepare() fails with IOException.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1979</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;CassandraServiceDataCleaner.prepare() fails with an IOException if run in isolation.  It seems that initializing the DataDescriptor creates a new CommitLog file, and then the cleaner tries to delete this file and fails.&lt;/p&gt;

&lt;p&gt;16:06:07.204 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  o.a.c.config.DatabaseDescriptor - Loading settings from &lt;a href=&quot;file:/C:/workspace/sandbox/target/classes/cassandra.yaml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/C:/workspace/sandbox/target/classes/cassandra.yaml&lt;/a&gt;&lt;br/&gt;
16:06:07.282 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG o.a.c.config.DatabaseDescriptor - Syncing log with a period of 10000&lt;br/&gt;
16:06:07.282 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  o.a.c.config.DatabaseDescriptor - DiskAccessMode &apos;auto&apos; determined to be standard, indexAccessMode is standard&lt;br/&gt;
16:06:07.797 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG o.a.c.config.DatabaseDescriptor - setting auto_bootstrap to false&lt;br/&gt;
16:06:07.797 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  o.a.c.db.commitlog.CommitLogSegment - Creating new commitlog segment target/var/lib/cassandra/commitlog\CommitLog-1294934767797.log&lt;br/&gt;
16:06:07.813 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG o.apache.cassandra.io.util.FileUtils - Deleting CommitLog-1294934767797.log&lt;br/&gt;
Exception in thread &quot;main&quot; java.io.IOException: Failed to delete C:\workspace\sandbox\target\var\lib\cassandra\commitlog\CommitLog-1294934767797.log&lt;br/&gt;
	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:54)&lt;br/&gt;
	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:201)&lt;br/&gt;
	at org.apache.cassandra.contrib.utils.service.CassandraServiceDataCleaner.cleanDir(CassandraServiceDataCleaner.java:99)&lt;br/&gt;
	at org.apache.cassandra.contrib.utils.service.CassandraServiceDataCleaner.cleanupDataDirectories(CassandraServiceDataCleaner.java:53)&lt;br/&gt;
	at org.apache.cassandra.contrib.utils.service.CassandraServiceDataCleaner.prepare(CassandraServiceDataCleaner.java:44)&lt;br/&gt;
	at cng.sandbox.App.main(App.java:15)&lt;/p&gt;

&lt;p&gt;This also seems to leave a bunch of threads running in the background, so the process has to be manually killed.&lt;/p&gt;

&lt;p&gt;This was tested with the javautils in the 0.7.0 branch.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP&lt;/p&gt;</environment>
        <key id="12495504">CASSANDRA-1979</key>
            <summary>CassandraServiceDataCleaner.prepare() fails with IOException.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zznate">Nate McCall</assignee>
                                    <reporter username="cng1066">Chris Ng</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Jan 2011 16:09:48 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:09 +0000</updated>
                            <resolved>Mon, 17 Jan 2011 17:07:46 +0000</resolved>
                                        <fixVersion>0.7.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12981961" author="zznate" created="Fri, 14 Jan 2011 22:55:39 +0000"  >&lt;p&gt;This code path had not been tested in a while. Test case had the following issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;not using bytebuffer&lt;/li&gt;
	&lt;li&gt;storage-config param from 0.6&lt;/li&gt;
	&lt;li&gt;non-framed transport&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Patch brings everything up to date with current trunk.&lt;/p&gt;</comment>
                            <comment id="12981965" author="zznate" created="Fri, 14 Jan 2011 23:01:49 +0000"  >&lt;p&gt;I&apos;m not sure this belongs in contrib anymore as it will just get out of date again. I would prefer we remove it in favor of doing something smarter in refactoring out o.a.c.SchemaLoader and friends in the test/unit tree to a module of some sort and including that on the test classpath of the main build file. (In conjunction with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1848&quot; title=&quot;Separate thrift and avro classes from cassandra&amp;#39;s jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1848&quot;&gt;&lt;del&gt;CASSANDRA-1848&lt;/del&gt;&lt;/a&gt; perhaps?)&lt;/p&gt;</comment>
                            <comment id="12982156" author="jbellis" created="Sat, 15 Jan 2011 19:34:47 +0000"  >&lt;p&gt;patch doesn&apos;t apply to 0.7 for me w/ p0 or p1 option&lt;/p&gt;</comment>
                            <comment id="12982736" author="zznate" created="Mon, 17 Jan 2011 16:56:13 +0000"  >&lt;p&gt;Oops - diff&apos;ed from wrong level. New patched diff&apos;ed from top level.&lt;/p&gt;</comment>
                            <comment id="12982738" author="jbellis" created="Mon, 17 Jan 2011 17:07:46 +0000"  >&lt;p&gt;committed&lt;/p&gt;

&lt;p&gt;ultimately I think we should move this into Hector or a github project (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1805&quot; title=&quot;refactor and remove contrib/&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1805&quot;&gt;&lt;del&gt;CASSANDRA-1805&lt;/del&gt;&lt;/a&gt;) although it&apos;s possible we could make changes to core to make this easier.&lt;/p&gt;</comment>
                            <comment id="12982750" author="zznate" created="Mon, 17 Jan 2011 17:22:55 +0000"  >&lt;p&gt;Per my comments on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1805&quot; title=&quot;refactor and remove contrib/&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1805&quot;&gt;&lt;del&gt;CASSANDRA-1805&lt;/del&gt;&lt;/a&gt; I&apos;m fine appropriating this. We have an issue open to break out some other testing utils into a non-hector-core dependent &apos;test-utils&apos; module anyhoo. &lt;/p&gt;</comment>
                            <comment id="12982826" author="hudson" created="Mon, 17 Jan 2011 19:48:03 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #168 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.7/168/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.7/168/&lt;/a&gt;)&lt;br/&gt;
    fixes for contrib/javautils&lt;br/&gt;
patch by Nate McCall for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1979&quot; title=&quot;CassandraServiceDataCleaner.prepare() fails with IOException.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1979&quot;&gt;&lt;del&gt;CASSANDRA-1979&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12468574" name="1979.txt" size="8759" author="zznate" created="Mon, 17 Jan 2011 16:56:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[zznate]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20389</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g8kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92819</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>