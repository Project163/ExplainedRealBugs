<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:55:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9899] If compaction is disabled in schema, you can&apos;t enable a single node through nodetool</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9899</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;If you disable compaction in the schema through alter table, and then try to enable compaction on just one node with &quot;nodetool enableautocompaction&quot; it doesn&apos;t work.  WrappingCompactionStrategy needs to pass through the enable to the wrapped strategies.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12849006">CASSANDRA-9899</key>
            <summary>If compaction is disabled in schema, you can&apos;t enable a single node through nodetool</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="jeremiah">Jeremiah Jordan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jul 2015 21:03:30 +0000</created>
                <updated>Tue, 14 Oct 2025 12:13:59 +0000</updated>
                            <resolved>Wed, 29 Jul 2015 15:13:30 +0000</resolved>
                                        <fixVersion>2.1.9</fixVersion>
                    <fixVersion>2.2.1</fixVersion>
                    <fixVersion>3.0 alpha 1</fixVersion>
                                    <component>Local/Compaction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14642510" author="krummas" created="Mon, 27 Jul 2015 09:48:50 +0000"  >&lt;p&gt;Branch here: &lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/9899&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/9899&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Seems we have no dtests for this, so wrote a few: &lt;a href=&quot;https://github.com/krummas/cassandra-dtest/commits/marcuse/9899&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra-dtest/commits/marcuse/9899&lt;/a&gt; - which made me notice that it is not possible to enable compaction again with an ALTER, so fixed that as well.&lt;/p&gt;</comment>
                            <comment id="14642830" author="JIRAUSER308715" created="Mon, 27 Jul 2015 15:04:13 +0000"  >&lt;p&gt;We should probably be passing through the enable/disable in 2.1 at the least.  This change breaks the contract for custom compaction strategies if you just go remove the enable checks in the built in strategies.&lt;br/&gt;
For 2.2/3.0 we can change that contract and remove custom strategies even caring about enable/disable.  It should be moved out of being handled by AbstractCompactionStrategy in that case.&lt;/p&gt;</comment>
                            <comment id="14644303" author="krummas" created="Tue, 28 Jul 2015 12:29:58 +0000"  >&lt;p&gt;New version with that fixed (force) pushed to &lt;a href=&quot;https://github.com/krummas/cassandra-dtest/commits/marcuse/9899&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra-dtest/commits/marcuse/9899&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14644688" author="JIRAUSER308715" created="Tue, 28 Jul 2015 17:23:24 +0000"  >&lt;p&gt;Should we follow the same pattern used by minCompactionThreshold/maxCompactionThreshold for the JMX disabledWithJMX check?  If someone changes the options with alter to enable things globally, but they had previously called disable locally through JMX, should we enable on this node?&lt;/p&gt;

&lt;p&gt;Thinking through this more, I think the way it works in the patch should be the right thing.  If you have enabled: false.  Do nodetool enable, then nodetool disable, then set enabled: true in the schema, as an operator I would expect it to turn on.  But bringing it up anyway just to make sure you agree &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; WDYT?&lt;/p&gt;

&lt;p&gt;+1 to the patch&lt;/p&gt;</comment>
                            <comment id="14644696" author="brandon.williams" created="Tue, 28 Jul 2015 17:26:32 +0000"  >&lt;p&gt;I agree, +1&lt;/p&gt;</comment>
                            <comment id="14645509" author="krummas" created="Wed, 29 Jul 2015 06:02:55 +0000"  >&lt;p&gt;Right, so the disabledWithJMX check is to make sure we don&apos;t enable ourselves if someone has disabled with nodetool and then changes something else in the compaction options.&lt;/p&gt;

&lt;p&gt;If we were enabled in schema, someone disables with nodetool, we always stay disabled after any alter that changes compaction options. This means that if you have enabled: true in schema, do nodetool disable, you can&apos;t enable it again with a schema change setting enabled: true (as that is the value the schema already has). This can be fixed of course, do you think we should always be able to enable with a schema change?&lt;/p&gt;</comment>
                            <comment id="14646249" author="krummas" created="Wed, 29 Jul 2015 15:13:30 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hwyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332829">2.1.8</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jjordan</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jjordan]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>