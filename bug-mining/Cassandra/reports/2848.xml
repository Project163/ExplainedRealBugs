<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:45:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7288] Exception during compaction</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7288</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Sometimes Cassandra nodes (in a multi datacenter deployment) are throwing errors during compaction. (see attached stack trace)&lt;/p&gt;

&lt;p&gt;Let me know what additional information I could provide.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12716147">CASSANDRA-7288</key>
            <summary>Exception during compaction</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="anguenot">Julien Anguenot</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 May 2014 18:08:34 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:44 +0000</updated>
                            <resolved>Wed, 28 May 2014 05:47:28 +0000</resolved>
                                        <fixVersion>2.0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14009521" author="krummas" created="Tue, 27 May 2014 09:15:01 +0000"  >&lt;p&gt;We add all sstables to a user defined compaction without checking if the sstables are actually compacting.&lt;/p&gt;

&lt;p&gt;This means that if a compaction finishes after we add the descriptor to the user defined compaction, but before those sstables are marked compacting, we can end up compacting a file that is gone from the tracker and cause this assert&lt;/p&gt;</comment>
                            <comment id="14009626" author="anguenot" created="Tue, 27 May 2014 12:39:44 +0000"  >&lt;p&gt;Thank you for the patch Marcus.&lt;/p&gt;

&lt;p&gt;We have a development cluster with way less data than the production one where this compaction exception is never being thrown. What would be the best way / suggested way for us to test out this patch against one of the production node, where this exception is visible,  knowing we are running Cassandra 2.0.7 from deb packages on Ubuntu?&lt;/p&gt;</comment>
                            <comment id="14009632" author="krummas" created="Tue, 27 May 2014 12:47:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anguenot&quot; class=&quot;user-hover&quot; rel=&quot;anguenot&quot;&gt;anguenot&lt;/a&gt; It would probably be to check out the code from &lt;a href=&quot;https://github.com/apache/cassandra&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra&lt;/a&gt; , apply the patch and build locally&lt;/p&gt;

&lt;p&gt;But, I don&apos;t think the exception is a big problem here, the hints will get compacted later anyway.&lt;/p&gt;</comment>
                            <comment id="14009638" author="anguenot" created="Tue, 27 May 2014 12:58:46 +0000"  >&lt;p&gt;Yes, this does not appear to be an issue. Though, we are monitoring Cassandra logs using syslog forward and 3rd party monitoring tool and would rather diminish alerts caused by this exception across the production nodes sooner than later.&lt;/p&gt;

&lt;p&gt;Will this patch be included in 2.0.8? Do you want / need me to confirm this exception being gone with this patch to do so?&lt;/p&gt;</comment>
                            <comment id="14009671" author="jbellis" created="Tue, 27 May 2014 13:38:20 +0000"  >&lt;p&gt;+1 on the patch&lt;/p&gt;</comment>
                            <comment id="14010816" author="krummas" created="Wed, 28 May 2014 05:47:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anguenot&quot; class=&quot;user-hover&quot; rel=&quot;anguenot&quot;&gt;anguenot&lt;/a&gt; this will be included in 2.0.9, if you have the possibility to test it before that is released, it would be appreciated&lt;/p&gt;</comment>
                            <comment id="14010818" author="krummas" created="Wed, 28 May 2014 05:47:28 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="14011435" author="anguenot" created="Wed, 28 May 2014 18:35:42 +0000"  >&lt;p&gt;Thank you Marcus. Will take the time to test the patch sometimes next week against one node.  Will keep you posted.&lt;/p&gt;</comment>
                            <comment id="14055760" author="anguenot" created="Wed, 9 Jul 2014 02:02:43 +0000"  >&lt;p&gt;Issue definitely gone on my side w/ this patch. Thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12646868" name="0001-make-sure-we-don-t-try-to-compact-already-compacting.patch" size="1197" author="marcuse" created="Tue, 27 May 2014 09:15:01 +0000"/>
                            <attachment id="12646347" name="compaction_exception.txt" size="1751" author="anguenot" created="Thu, 22 May 2014 18:08:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vwfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326472">2.0.7</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>