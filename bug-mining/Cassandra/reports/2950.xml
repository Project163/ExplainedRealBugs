<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:46:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7509] conditional updates don&apos;t work from cqlsh</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7509</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;apache-cassandra-2.1.0-rc2/bin $ ./cqlsh
Connected to Test Cluster at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 2.1.0-rc2 | CQL spec 3.1.7 | Native protocol v3]
Use HELP for help.
cqlsh&amp;gt; use ks1;
cqlsh:ks1&amp;gt; create table users(
       ... userID uuid,
       ... fname text,
       ... lname text,
       ... email text,
       ... address text,
       ... zip int,
       ... state text,
       ... PRIMARY KEY ((userID, fname), state)
       ... );
cqlsh:ks1&amp;gt; insert into users (userID, fname, state, email) VALUES (cfd66ccc-d857-4e90-b1e5-df98a3d40cd6, &apos;laura&apos;, &apos;ca&apos;, &apos;lauras@gmail.com&apos;) if not exists;
code=2200 [Invalid query] message=&quot;Conditional updates are not supported by the protocol version in use. You need to upgrade to a driver using the native protocol v2.&quot;
cqlsh:ks1&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12725861">CASSANDRA-7509</key>
            <summary>conditional updates don&apos;t work from cqlsh</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thobbs">Tom Hobbs</assignee>
                                    <reporter username="jeremiah">Jeremiah Jordan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jul 2014 22:27:08 +0000</created>
                <updated>Tue, 14 Oct 2025 12:09:18 +0000</updated>
                            <resolved>Wed, 16 Jul 2014 16:58:42 +0000</resolved>
                                        <fixVersion>2.1 rc4</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14054828" author="mishail" created="Tue, 8 Jul 2014 11:04:26 +0000"  >&lt;p&gt;We have to switch cqlsh to python-driver 2.0.x (we use 1.1.2 at the moment) to fix that&lt;/p&gt;</comment>
                            <comment id="14054860" author="slebresne" created="Tue, 8 Jul 2014 11:53:47 +0000"  >&lt;p&gt;Yes, and I think we should. Shipping a cqlsh in 2.1 that don&apos;t work for conditional update is not really an option.&lt;/p&gt;</comment>
                            <comment id="14059056" author="jbellis" created="Fri, 11 Jul 2014 17:34:50 +0000"  >&lt;p&gt;Besides switching the driver, how much work is this?  Should I ask Brandon or Tyler to help?  Would like to fix for 2.1.0-final.&lt;/p&gt;</comment>
                            <comment id="14059543" author="mishail" created="Sat, 12 Jul 2014 00:26:20 +0000"  >&lt;p&gt;I still have a few failed cqlsh test cases I need to investigate, which shouldn&apos;t take too long. The problem is I have not much time for contributions for a next 2-3 weeks.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; What is ETA for 2.1.0-final? &lt;/p&gt;</comment>
                            <comment id="14059631" author="jbellis" created="Sat, 12 Jul 2014 04:10:04 +0000"  >&lt;p&gt;Goal is to start the vote next Friday.  Can you post your work in progress and I&apos;ll get it finished?&lt;/p&gt;</comment>
                            <comment id="14059776" author="mishail" created="Sat, 12 Jul 2014 12:49:51 +0000"  >&lt;p&gt;I&apos;m attaching the patch for 2.1.0. It contains bundled python-driver 2.0.2 + changes for &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://datastax-oss.atlassian.net/browse/PYTHON-90&lt;/a&gt;, as well as a new dependency.&lt;/p&gt;

&lt;p&gt;There are still few failing cqlsh tests, but those are not related to the new driver, we&apos;ll address them later.&lt;/p&gt;</comment>
                            <comment id="14062300" author="thobbs" created="Tue, 15 Jul 2014 16:50:06 +0000"  >&lt;p&gt;Version 2.0.2 of the python driver doesn&apos;t handle tuple types.  Last week I released version 2.1.0b1 of the driver, which adds native support for UDTs and tuples.  Upgrading to that would also allow us to remove the cqlsh patches for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7399&quot; title=&quot;cqlsh: describe table shows wrong data type for CompositeType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7399&quot;&gt;&lt;del&gt;CASSANDRA-7399&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7267&quot; title=&quot;Embedded sets in user defined data-types are not updating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7267&quot;&gt;&lt;del&gt;CASSANDRA-7267&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7261&quot; title=&quot;cqlsh support for new UDT format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7261&quot;&gt;&lt;del&gt;CASSANDRA-7261&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PYTHON-90&lt;/a&gt;, and would include the &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PYTHON-84&lt;/a&gt; fix for &lt;tt&gt;dclocal_read_repair_chance&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14062841" author="thobbs" created="Tue, 15 Jul 2014 23:14:18 +0000"  >&lt;p&gt;7509-v2.txt (and &lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-7509&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;) upgrades to the latest python driver and removes the cqlsh patches that I mentioned.&lt;/p&gt;</comment>
                            <comment id="14063345" author="iamaleksey" created="Wed, 16 Jul 2014 10:13:39 +0000"  >&lt;p&gt;Reviewed and tested, LGTM, +1&lt;/p&gt;

&lt;p&gt;Nit: we should add the license for six to lib/licenses. For python-driver too, actually (the license for futures has been there for a while).&lt;/p&gt;</comment>
                            <comment id="14063715" author="thobbs" created="Wed, 16 Jul 2014 16:58:42 +0000"  >&lt;p&gt;Thanks, committed with an updated python driver license (it was there, but for an older version) and added the license for the six library.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12655919" name="7509-v2.txt" size="314313" author="thobbs" created="Tue, 15 Jul 2014 23:14:18 +0000"/>
                            <attachment id="12655381" name="CASSANDRA-2.1.0-7509.patch" size="296915" author="mishail" created="Sat, 12 Jul 2014 12:49:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404019</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xj8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404060</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327111">2.1 rc2</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>