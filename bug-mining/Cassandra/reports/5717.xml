<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:20:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16575] &quot;compression&quot; configuration in unit tests is incorrect</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16575</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When running unit tests with &quot;compression&quot; configuration, we use non-default Snappy compressor.&lt;/p&gt;

&lt;p&gt;There is a misleading fragment of &lt;tt&gt;build.xml&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;compressed_yaml&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.test.dir}/cassandra.compressed.yaml&quot;&lt;/span&gt;/&amp;gt;
      &amp;lt;concat destfile=&lt;span class=&quot;code-quote&quot;&gt;&quot;${compressed_yaml}&quot;&lt;/span&gt;&amp;gt;
          &amp;lt;fileset file=&lt;span class=&quot;code-quote&quot;&gt;&quot;${test.conf}/cassandra.yaml&quot;&lt;/span&gt;/&amp;gt;
          &amp;lt;fileset file=&lt;span class=&quot;code-quote&quot;&gt;&quot;${test.conf}/commitlog_compression.yaml&quot;&lt;/span&gt;/&amp;gt;
      &amp;lt;/concat&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;cassandra.compressed.yaml&lt;/tt&gt; has been replaced in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14482&quot; title=&quot;ZSTD Compressor support in Cassandra&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14482&quot;&gt;&lt;del&gt;CASSANDRA-14482&lt;/del&gt;&lt;/a&gt; by two files &lt;tt&gt;commitlog_compression_LZ4.yaml&lt;/tt&gt; and &lt;tt&gt;commitlog_compression_Zstd.yaml&lt;/tt&gt; without changing build configuration.&lt;/p&gt;

&lt;p&gt;All in all we could fix that but I doubt it makes any sense since &lt;tt&gt;cdc&lt;/tt&gt; configuration already uses compressed commit log anyway so it feels redundant to test compression alone for each CI run. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="13370317">CASSANDRA-16575</key>
            <summary>&quot;compression&quot; configuration in unit tests is incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlewandowski">Jacek Lewandowski</assignee>
                                    <reporter username="jlewandowski">Jacek Lewandowski</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Apr 2021 08:31:25 +0000</created>
                <updated>Fri, 19 Nov 2021 06:56:42 +0000</updated>
                            <resolved>Wed, 28 Apr 2021 08:51:39 +0000</resolved>
                                        <fixVersion>4.0-rc2</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Test/unit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="17316992" author="michaelsembwever" created="Thu, 8 Apr 2021 08:53:16 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I vote for removing compression configuration and actually allow to manually specify yaml file to be used for testing as a test property, as well as allow to manually specify extra system properties to be passed to the test. That would make the build more flexible and remove a bit of redundant code.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I think we should (at least try to) track down the devs who added the &lt;tt&gt;test-compression&lt;/tt&gt; variant to CI to find out why it was important at the time. Some info on the &lt;tt&gt;test-cdc&lt;/tt&gt; was provided &lt;a href=&quot;https://lists.apache.org/thread.html/re6a7f30348fd81fccec1714cb3e78bc6ec1de5568eac997ee04e5c24%40%3Cdev.cassandra.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17317293" author="jlewandowski" created="Thu, 8 Apr 2021 15:58:36 +0000"  >&lt;p&gt;My plan is to allow configuring the build with properties or properties file, this way we can have predefined configurations stored as properties files in &lt;tt&gt;test/conf&lt;/tt&gt; and choose them to have the repeated runs, wdyt ?&lt;/p&gt;</comment>
                            <comment id="17317320" author="michaelsembwever" created="Thu, 8 Apr 2021 16:25:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;predefined configurations stored as properties files in test/conf&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;There&apos;s a lot of configuration combinations we are not testing. Our default CI pipeline needs to be minimised, but a configuration set could be used in less frequent CI runs (like once a week).&lt;/p&gt;</comment>
                            <comment id="17317806" author="jlewandowski" created="Fri, 9 Apr 2021 09:10:54 +0000"  >&lt;p&gt;I was wrong, the compression tests are aimed to test sstable compression which is explicitly disabled when running just &lt;tt&gt;unit&lt;/tt&gt; tests. SchemaLoader forces no compression for each table that is created through that utility in tests; Also when compression is enabled, it forces snappy compressor to be used for those tables. All other tables are created with the default LZ4. &lt;/p&gt;

&lt;p&gt;Therefore it seems like the compression configuration has nothing to do with commit log compression and the only thing we should consider to use the current default compressor LZ4 instead of Snappy and remove the misleading fragment of the build. &lt;/p&gt;

&lt;p&gt;I&apos;m still thinking that we should allow for passing test configuration without the need to modify the build.&lt;/p&gt;</comment>
                            <comment id="17317947" author="jlewandowski" created="Fri, 9 Apr 2021 12:24:41 +0000"  >&lt;p&gt;This is my proposal: &lt;a href=&quot;https://github.com/apache/cassandra/pull/957&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/957&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17330339" author="michaelsembwever" created="Fri, 23 Apr 2021 09:35:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/706/pipeline/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/706/badge/icon&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17330977" author="michaelsembwever" created="Fri, 23 Apr 2021 18:26:05 +0000"  >&lt;p&gt;and &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch-test-compression/422/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/job/Cassandra-devbranch-test-compression/422/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17334589" author="michaelsembwever" created="Wed, 28 Apr 2021 08:51:39 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/10a1d65eb09a93aee32948b46b4f1a0fbc2defe0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10a1d65eb09a93aee32948b46b4f1a0fbc2defe0&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12421927">CASSANDRA-47</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jlewandowski]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12990" cascade-level="1"><![CDATA[Test Failure]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311120" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>CASSANDRA-15536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0pnqo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mck]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348281">4.0-alpha1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/10a1d65eb09a93aee32948b46b4f1a0fbc2defe0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/10a1d65eb09a93aee32948b46b4f1a0fbc2defe0&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;CI&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>