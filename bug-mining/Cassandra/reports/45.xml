<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:10:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-180] Blocking insert may have fewer responses than replication factor</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-180</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Currently, block_insert always assumes the number of responses equals the replication factor. However, for a small cluster (e,g, 1 node) and/or when failure occurs, the number of responses could be fewer than the replication factor.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425493">CASSANDRA-180</key>
            <summary>Blocking insert may have fewer responses than replication factor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="junrao">Jun Rao</assignee>
                                    <reporter username="junrao">Jun Rao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 May 2009 18:42:07 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:37 +0000</updated>
                            <resolved>Fri, 15 May 2009 21:37:59 +0000</resolved>
                                                            <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12709521" author="junrao" created="Thu, 14 May 2009 18:45:13 +0000"  >&lt;p&gt;Attach a fix. The expected number of responses is set based on the number of live nodes identified.&lt;/p&gt;</comment>
                            <comment id="12709870" author="jbellis" created="Fri, 15 May 2009 15:17:43 +0000"  >&lt;p&gt;Reducing the responseCount is going to break things, since that&apos;s used for determining when a successful quorum has been reached.&lt;/p&gt;

&lt;p&gt;Say you have a 5 node cluster and a replication factor of 3.  But there is a network split and the node a client is talking to can only see itself.  With your patch it would start up a QRH with a RC of 1, get the ack, and report that the write was successful.  But we&apos;ve just sliently violated our promise of quorum consistency (at least 2 nodes).&lt;/p&gt;

&lt;p&gt;The existing code is optimal for when a write succeeeds &amp;#8211; as soon as a quorum is reached it returns, w/o waiting for any more responses that may or may not come.  The only problem is that it will wait for timeout when it is impossible for a write to reach quorum b/c there are not enough nodes.  I&apos;ve attached a patch that addresses that problem.  What do you think?&lt;/p&gt;

&lt;p&gt;(Note that we don&apos;t need to try to solve the problem of &quot;what if at the beginning of a write there are enough nodes to reach quorum, but partway through we get a nack from a node making it impossible&quot; b/c nodes only ack success, they don&apos;t nack failure.  And making them do so adds more complication than it is worth for such an uncommon case.)&lt;/p&gt;</comment>
                            <comment id="12709871" author="jbellis" created="Fri, 15 May 2009 15:20:06 +0000"  >&lt;p&gt;v3 checks for the right quorum count.&lt;/p&gt;</comment>
                            <comment id="12709884" author="sandeep_tata" created="Fri, 15 May 2009 15:31:49 +0000"  >&lt;p&gt;+1 for v3&lt;/p&gt;

&lt;p&gt;We can now get rid of &quot;// TODO: throw a thrift exception if we do not have N nodes&quot;&lt;/p&gt;</comment>
                            <comment id="12709976" author="junrao" created="Fri, 15 May 2009 21:20:25 +0000"  >&lt;p&gt;v3 looks good to me too.&lt;/p&gt;</comment>
                            <comment id="12709983" author="jbellis" created="Fri, 15 May 2009 21:37:59 +0000"  >&lt;p&gt;committed v3, and r/m&apos;d the TODO line.&lt;/p&gt;</comment>
                            <comment id="12710109" author="hudson" created="Sat, 16 May 2009 13:04:11 +0000"  >&lt;p&gt;Integrated in Cassandra #78 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/78/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/78/&lt;/a&gt;)&lt;br/&gt;
    check for enough endpoints before starting a quorum wait.&lt;br/&gt;
patch by jbellis; reviewed by Jun Rao and Sandeep Tata for &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408253" name="180-v2.patch" size="1462" author="jbellis" created="Fri, 15 May 2009 15:17:43 +0000"/>
                            <attachment id="12408254" name="180-v3.patch" size="1472" author="jbellis" created="Fri, 15 May 2009 15:20:06 +0000"/>
                            <attachment id="12408161" name="issue180.patchv1" size="1024" author="junrao" created="Thu, 14 May 2009 18:45:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[junrao]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19585</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fxcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91002</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>