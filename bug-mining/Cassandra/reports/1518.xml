<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:30:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4026] EC2 snitch incorrectly reports regions</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4026</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Currently the org.apache.cassandra.locator.Ec2Snitch reports &quot;us-west&quot; in both the oregon and the california data centers.  This is incorrect, since they are different regions.&lt;/p&gt;

&lt;p&gt;California =&amp;gt; us-west-1&lt;br/&gt;
Oregon     =&amp;gt; us-west-2&lt;/p&gt;

&lt;p&gt;wget &lt;a href=&quot;http://169.254.169.254/latest/meta-data/placement/availability-zone&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://169.254.169.254/latest/meta-data/placement/availability-zone&lt;/a&gt; returns the value &quot;us-west-2a&quot;&lt;/p&gt;


&lt;p&gt;After parsing this returns&lt;/p&gt;

&lt;p&gt;DC = us-west Rack = 2a&lt;/p&gt;


&lt;p&gt;What it should return&lt;/p&gt;

&lt;p&gt;DC = us-west-2 Rack = a&lt;/p&gt;


&lt;p&gt;This makes it possible to use multi region when both regions are in the west coast.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 10.10 64 bit Oracle Java 6&lt;/p&gt;</environment>
        <key id="12545730">CASSANDRA-4026</key>
            <summary>EC2 snitch incorrectly reports regions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vijay2win@yahoo.com">Vijay</assignee>
                                    <reporter username="tnine">Todd Nine</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Mar 2012 23:26:36 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:37 +0000</updated>
                            <resolved>Mon, 12 Mar 2012 19:01:33 +0000</resolved>
                                        <fixVersion>1.0.9</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13225693" author="vijay2win@yahoo.com" created="Fri, 9 Mar 2012 00:00:56 +0000"  >&lt;p&gt;I ran into this a while ago. But the problem is that we cannot change the settings on the current live clusters which uses Ec2MultiregionSnitch or Ec2Snitch without taking a downtime. (If we change EC2Snitch/Ec2Multiregion snitch, we also need to change the schema for the existing cluster).&lt;/p&gt;

&lt;p&gt;Option 1: Leave the existing snitch as it is and add a new snitch.&lt;br/&gt;
Option 2: Parse for us-west-1 as us-west and parse us-west-2 as us-west2, as us-west-2 is fairly new it wont affect a lot of us?&lt;/p&gt;

&lt;p&gt;Brandon, Thoughts?&lt;/p&gt;</comment>
                            <comment id="13225698" author="tnine" created="Fri, 9 Mar 2012 00:08:03 +0000"  >&lt;p&gt;Could we create a new snitch that corrects the problem and deprecate the existing snitches?  This way people can migrate if they choose to, or keep the old snitches if it does not affect them.&lt;/p&gt;</comment>
                            <comment id="13225710" author="vijay2win@yahoo.com" created="Fri, 9 Mar 2012 00:24:39 +0000"  >&lt;p&gt;I am ok with deprecating it, but the problem is unless the users have a way out of this we cannot remove it.&lt;/p&gt;</comment>
                            <comment id="13225711" author="brandon.williams" created="Fri, 9 Mar 2012 00:26:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;If we change EC2Snitch/Ec2Multiregion snitch, we also need to change the schema for the existing cluster&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not the schema per se, but the datacenter name.  This is doable though if you&apos;re willing to repair afterwards.  Another option is to switch an entire DC&apos;s snitch at a time.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Option 1: Leave the existing snitch as it is and add a new snitch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ugh, that will cause tremendous confusing for new users.  It would however be nice to get rid of this wart at some point.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Option 2: Parse for us-west-1 as us-west and parse us-west-2 as us-west2, as us-west-2 is fairly new it wont affect a lot of us?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There aren&apos;t a lot good options here, I&apos;m not sure how I feel about this one since it&apos;s definitely a hack, but only appending the number to the DC if &amp;gt; 1 might be the least painful for existing users.&lt;/p&gt;</comment>
                            <comment id="13225812" author="vijay2win@yahoo.com" created="Fri, 9 Mar 2012 03:51:28 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;&amp;gt; This is doable though if you&apos;re willing to repair afterwards.&lt;br/&gt;
The problem is that StorageProxy will start to write the data to the nodes which are not suppose to have the data (During upgrade, and restart takes a while)... hence after recovery they will not be able to be recovered via repair (Lets say Node A, B, C, D if B and C are upgraded A will start to write the data to D for thinking it as this datacenters replica).&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;&amp;gt; it&apos;s definitely a hack, but only appending the number to the DC if &amp;gt; 1 might be the least painful for existing users.&lt;br/&gt;
Agree, and attached patch does this.&lt;/p&gt;

&lt;p&gt;BTW: The attached patch can break after we AWS has 24 AZ&apos;s which is highly unlikely but i will create a ticket requesting for API for Regions instead of AZ.&lt;/p&gt;</comment>
                            <comment id="13227733" author="brandon.williams" created="Mon, 12 Mar 2012 18:16:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;hence after recovery they will not be able to be recovered via repair&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;One replica will always be in the right spot so you can repair.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;BTW: The attached patch can break after we AWS has 24 AZ&apos;s which is highly unlikely but i will create a ticket requesting for API for Regions instead of AZ.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That would be great.  Unfortunately when we have that, we&apos;ll still have to munge the name (and rack names) to be backwards compatible &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;This ticket makes me sad, but +1.&lt;/p&gt;</comment>
                            <comment id="13227783" author="vijay2win@yahoo.com" created="Mon, 12 Mar 2012 19:01:33 +0000"  >&lt;p&gt;Committed to trunk and 1.0, Thanks!&lt;/p&gt;</comment>
                            <comment id="14111368" author="ramsperger" created="Tue, 26 Aug 2014 21:27:55 +0000"  >&lt;p&gt;Not to reopen ancient tickets, but code was added in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5897&quot; title=&quot;GossipingPropertyFileSnitch does not auto-reload local rack/dc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5897&quot;&gt;&lt;del&gt;CASSANDRA-5897&lt;/del&gt;&lt;/a&gt; to pull in SnitchProperties. Would it not be desirable to address this by looking at an additional property and choosing between legacy naming and a full, consistent with other EC2 APIs, naming scheme?&lt;/p&gt;

&lt;p&gt;Something similar to this commit &lt;a href=&quot;https://github.com/ramsperger/cassandra/commit/bf1ee0251e5cf46b8af28282e22c4fbf29d85f33?w=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ramsperger/cassandra/commit/bf1ee0251e5cf46b8af28282e22c4fbf29d85f33?w=1&lt;/a&gt;?&lt;/p&gt;
</comment>
                            <comment id="14111411" author="brandon.williams" created="Tue, 26 Aug 2014 21:58:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ramsperger&quot; class=&quot;user-hover&quot; rel=&quot;ramsperger&quot;&gt;ramsperger&lt;/a&gt; go ahead an open a new ticket for that.&lt;/p&gt;</comment>
                            <comment id="14112379" author="ramsperger" created="Wed, 27 Aug 2014 16:05:19 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;, opened as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7839&quot; title=&quot;Support standard EC2 naming conventions in Ec2Snitch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7839&quot;&gt;&lt;del&gt;CASSANDRA-7839&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12737138">CASSANDRA-7839</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12517674" name="0001-CASSANDRA-4026.patch" size="3039" author="vijay2win@yahoo.com" created="Fri, 9 Mar 2012 03:51:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[vijay2win@yahoo.com]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gr3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95820</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>