<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:21:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16852] testsome fails in the CircleCI multiplexer because the class JStackJUnitTask can&apos;t be found</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16852</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt; explained on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16827?focusedCommentId=17398060&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17398060&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;CASSANDRA-16827&lt;/a&gt;, the problem might be in the flag &lt;em&gt;-Dno-build-test=true&lt;/em&gt; that the multiplexer uses to not run &lt;em&gt;build-test&lt;/em&gt; in every iteration, relying on that this has already been  done by the build task. This is a performance optimisation that can be especially effective in fast tests.&lt;br/&gt;
It would be ideal to have the initial multiplexer behavior restored, but we can always run &lt;em&gt;ant build-test&lt;/em&gt; at the beginning of every multiplexer runner while still not running it on every iteration. This seems enough to keep the multiplexer working but it requires some extra builds and therefore higher costs.&lt;/p&gt;

&lt;p&gt;The goal of this ticket is to find the root of this failure and fix the multiplexer either by restoring its initial flow or adding &lt;em&gt;ant build-test&lt;/em&gt; at the beginning of every multiplexer runner, if there is no more effective solution. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13394971">CASSANDRA-16852</key>
            <summary>testsome fails in the CircleCI multiplexer because the class JStackJUnitTask can&apos;t be found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adelapena">Andres de la Pe&#241;a</assignee>
                                    <reporter username="edimitrova">Ekaterina Dimitrova</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Aug 2021 21:49:19 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:57 +0000</updated>
                            <resolved>Mon, 16 Aug 2021 17:03:29 +0000</resolved>
                                        <fixVersion>3.0.26</fixVersion>
                    <fixVersion>3.11.12</fixVersion>
                                    <component>CI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17398340" author="edimitrova" created="Thu, 12 Aug 2021 22:51:54 +0000"  >&lt;p&gt;For the record, there was a suggestion that this issue might be caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16827&quot; title=&quot;&amp;quot;java: package org.apache.tools.ant does not exist&amp;quot; error &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16827&quot;&gt;&lt;del&gt;CASSANDRA-16827&lt;/del&gt;&lt;/a&gt; but testing shows that it existed before that. &lt;/p&gt;</comment>
                            <comment id="17398359" author="edimitrova" created="Fri, 13 Aug 2021 00:41:14 +0000"  >&lt;p&gt;Aaaand....ticket stolen &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I can do a review when you are done as I was already checking some stuff around too &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="17398363" author="adelapena" created="Fri, 13 Aug 2021 00:46:38 +0000"  >&lt;p&gt;I see that since&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16557&quot; title=&quot;(3.0,3.11) Migrate dependency handling from maven-ant-tasks to resolver-ant-tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16557&quot;&gt;&lt;del&gt;CASSANDRA-16557&lt;/del&gt;&lt;/a&gt; &lt;tt&gt;build-test&lt;/tt&gt; is not a dependency of &lt;tt&gt;ant jar&lt;/tt&gt;&#160;in neither 3.0 or 3.11, while it&apos;s still a dependency on 4.0 and trunk, where the multiplexer works smoothly.&lt;/p&gt;

&lt;p&gt;The multiplexer relies on the CircleCI &lt;tt&gt;build&lt;/tt&gt; job building the tests with a call to&#160;&lt;tt&gt;ant clean jar&lt;/tt&gt;, so the runners can skip the &lt;tt&gt;build-test&lt;/tt&gt; target. I haven&apos;t checked yet why &lt;tt&gt;build-test&lt;/tt&gt; was removed from the &lt;tt&gt;jar&lt;/tt&gt; dependencies, but my initial guess is that we can either restore it or run &lt;tt&gt;ant build-test&lt;/tt&gt; in the CircleCI workflow. The later can be done either in the &lt;tt&gt;build&lt;/tt&gt; job or in the &lt;tt&gt;run_repeated_utest&lt;/tt&gt; job.&lt;/p&gt;</comment>
                            <comment id="17398364" author="adelapena" created="Fri, 13 Aug 2021 00:49:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;Aaaand....ticket stolen  I can do a review when you are done as I was already checking some stuff around too &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Oh, I wrote my last comment without reading yours. &lt;/p&gt;</comment>
                            <comment id="17398366" author="adelapena" created="Fri, 13 Aug 2021 00:58:52 +0000"  >&lt;p&gt;I think the problem can be reproduced locally by running something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant realclean jar
ant  testsome -Dtest.name=org.apache.cassandra.cql3.ViewTest -Dtest.methods=testNonExistingOnes -Dno-build-test=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That reproduces the action of the &lt;tt&gt;build&lt;/tt&gt; and &lt;tt&gt;run_repeated_utest&lt;/tt&gt;&#160;CircleCI jobs, and it only works if &lt;tt&gt;build-test&lt;/tt&gt; is a dependency of &lt;tt&gt;jar&lt;/tt&gt;, as it is in 4.0 and trunk but not in 3.0 and 3.11 since, I think, &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16557&quot; title=&quot;(3.0,3.11) Migrate dependency handling from maven-ant-tasks to resolver-ant-tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16557&quot;&gt;&lt;del&gt;CASSANDRA-16557&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17398664" author="adelapena" created="Fri, 13 Aug 2021 13:31:25 +0000"  >&lt;p&gt;It seems we can&apos;t easily add &lt;tt&gt;build-test&lt;/tt&gt; to &lt;tt&gt;jar&lt;/tt&gt;, since it would produce a circular dependency. Instead, I have simply added &lt;tt&gt;build-test&lt;/tt&gt; as a target of the Ant command in the &lt;tt&gt;build&lt;/tt&gt; CircleCI job:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;PR&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1138&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/776/workflows/466c5fec-2fcf-4282-bd51-4320bda6a680&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1139&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/775/workflows/f1e4e4ae-8819-42eb-8027-4b4d23f2a780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;That seems enough to get the multiplexer back into shape. Note that the failure in &lt;tt&gt;j8_repeated_utest&lt;/tt&gt; for 3.0 is a timeout not related to our build problem.&lt;/p&gt;

&lt;p&gt;By the way, independently to this fix we might at some point consider using &lt;tt&gt;-Dno-build-test=true&lt;/tt&gt; with other test jobs to save some resources, even if it doesn&apos;t have as much impact as in the multiplexer.&lt;/p&gt;</comment>
                            <comment id="17398954" author="edimitrova" created="Fri, 13 Aug 2021 22:19:48 +0000"  >&lt;p&gt;LGTM,  thank you!&lt;/p&gt;</comment>
                            <comment id="17398956" author="edimitrova" created="Fri, 13 Aug 2021 22:21:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;By the way, independently to this fix we might at some point consider using -Dno-build-test=true with other test jobs to save some resources, even if it doesn&apos;t have as much impact as in the multiplexer.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;SGTM, let&apos;s open another ticket, thanks&lt;/p&gt;</comment>
                            <comment id="17399840" author="adelapena" created="Mon, 16 Aug 2021 17:02:32 +0000"  >&lt;p&gt;Thanks for the review, committed to 3.0 as &lt;a href=&quot;https://github.com/apache/cassandra/commit/07706662104fd7d471379a5ba1155c7e4fb71618&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;07706662104fd7d471379a5ba1155c7e4fb71618&lt;/a&gt; and merged to &lt;a href=&quot;https://github.com/apache/cassandra/commit/1482ead465a651f6ed7d694f081a128613d2dfd0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                                                <inwardlinks description="Discovered while testing">
                                        <issuelink>
            <issuekey id="13394374">CASSANDRA-16836</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12984" cascade-level=""><![CDATA[Degradation]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0tuyw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[e.dimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12349653">3.0.25</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/07706662104fd7d471379a5ba1155c7e4fb71618&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/07706662104fd7d471379a5ba1155c7e4fb71618&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;We can test this by getting a successful utest multiplexer run&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>