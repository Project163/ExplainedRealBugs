<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:42:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6530] Fix logback configuration in scripts and debian packaging for trunk/2.1</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6530</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description></description>
                <environment></environment>
        <key id="12686456">CASSANDRA-6530</key>
            <summary>Fix logback configuration in scripts and debian packaging for trunk/2.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mshuler">Michael Shuler</assignee>
                                    <reporter username="mshuler">Michael Shuler</reporter>
                        <labels>
                            <label>qa-resolved</label>
                    </labels>
                <created>Thu, 26 Dec 2013 19:15:32 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:57 +0000</updated>
                            <resolved>Fri, 10 Jan 2014 15:34:01 +0000</resolved>
                                        <fixVersion>2.1 beta1</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13857026" author="mshuler" created="Thu, 26 Dec 2013 19:34:19 +0000"  >&lt;p&gt;There is a log4j config in test/conf/ and a few places that is used - additions to patch to come.&lt;/p&gt;</comment>
                            <comment id="13857038" author="mshuler" created="Thu, 26 Dec 2013 19:55:23 +0000"  >&lt;p&gt;Replaced my initial patch with one that includes removal of the test/conf/ log4j configuration and an update of conf/README.txt&lt;/p&gt;</comment>
                            <comment id="13857084" author="mshuler" created="Thu, 26 Dec 2013 21:22:23 +0000"  >&lt;p&gt;log4 has -server and -tools configurations. -tools only adds WARN,stderr info to the output of the various tools and it appears that a complete logback change will likely need a new logback-tools.xml to add the same.&lt;/p&gt;

&lt;p&gt;Scratch my patch for the moment, since it produces some ugly tool output.&lt;/p&gt;</comment>
                            <comment id="13857572" author="mshuler" created="Fri, 27 Dec 2013 17:17:53 +0000"  >&lt;p&gt;logback_configurations_final.patch looks good!&lt;br/&gt;
Fixes debian package build for trunk and running through some of the bin/* scripts works fine for me.  I&apos;m not exactly sure how to generate some stderr output to see if logback spits those out properly from tools like nodetool or cqlsh, so that might need some testing.&lt;/p&gt;</comment>
                            <comment id="13858994" author="brandon.williams" created="Mon, 30 Dec 2013 19:02:48 +0000"  >&lt;p&gt;Looks like we need to suppress the HSHA disconnect warnings like we did in log4j:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;WARN  19:01:51 Got an IOException in internalRead!
java.io.IOException: Connection reset by peer
        at sun.nio.ch.FileDispatcherImpl.read0(Native Method) ~[na:1.7.0_17]
        at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39) ~[na:1.7.0_17]
        at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:225) ~[na:1.7.0_17]
        at sun.nio.ch.IOUtil.read(IOUtil.java:198) ~[na:1.7.0_17]
        at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:359) ~[na:1.7.0_17]
        at org.apache.thrift.transport.TNonblockingSocket.read(TNonblockingSocket.java:141) ~[libthrift-0.9.1.jar:0.9.1]
        at com.thinkaurelius.thrift.util.mem.Buffer.readFrom(Buffer.java:96) ~[thrift-server-0.3.2.jar:na]
        at com.thinkaurelius.thrift.Message.internalRead(Message.java:338) [thrift-server-0.3.2.jar:na]
        at com.thinkaurelius.thrift.Message.read(Message.java:141) [thrift-server-0.3.2.jar:na]
        at com.thinkaurelius.thrift.TDisruptorServer$SelectorThread.handleRead(TDisruptorServer.java:521) [thrift-server-0.3.2.jar:na]
        at com.thinkaurelius.thrift.TDisruptorServer$SelectorThread.processKey(TDisruptorServer.java:500) [thrift-server-0.3.2.jar:na]
        at com.thinkaurelius.thrift.TDisruptorServer$AbstractSelectorThread.select(TDisruptorServer.java:375) [thrift-server-0.3.2.jar:na]
        at com.thinkaurelius.thrift.TDisruptorServer$AbstractSelectorThread.run(TDisruptorServer.java:339) [thrift-server-0.3.2.jar:na]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13859896" author="mshuler" created="Wed, 1 Jan 2014 15:48:27 +0000"  >&lt;p&gt;conf/log4j-server.properties :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# Adding &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to avoid thrift logging disconnect errors.
log4j.logger.org.apache.thrift.server.TNonblockingServer=ERROR
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13860932" author="mshuler" created="Thu, 2 Jan 2014 23:25:26 +0000"  >&lt;p&gt;This appears to already be set up in the logback config:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(c169)mshuler@hana:~/git/cassandra$ grep thrift conf/logback.xml 
  &amp;lt;logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.thrift.server.TNonblockingServer&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;ERROR&quot;&lt;/span&gt;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Setting rpc_server_type: hsha and running stress and killing it a dozen times or so did not give the error output as above.&lt;/p&gt;</comment>
                            <comment id="13861631" author="brandon.williams" created="Fri, 3 Jan 2014 16:17:52 +0000"  >&lt;p&gt;This line is bumping org.apache.thrift.server up to ERROR, but my error never goes through that, it comes from org.apache.thrift.transport.  Changing that line in logback does suppress the warnings for me.&lt;/p&gt;</comment>
                            <comment id="13865583" author="brandon.williams" created="Wed, 8 Jan 2014 16:09:55 +0000"  >&lt;p&gt;I was wrong, this doesn&apos;t suppress the warnings, they just don&apos;t repro 100% of the time.  It seems that logback is ignoring us here, but as far as I can tell we have it configured correctly.&lt;/p&gt;</comment>
                            <comment id="13866957" author="brandon.williams" created="Thu, 9 Jan 2014 19:40:38 +0000"  >&lt;p&gt;Looks like logback is picky about how you specify what to ignore, it won&apos;t &apos;drill down&apos; past the top level, and not even down to the exact class.  If I use &apos;com.thinkaurelius.thrift&apos; that suppresses all the warnings, but &apos;com.thinkaurelius.thrift.TDisruptorServer&apos; does not.  We don&apos;t use anything else in c.t.t so I think using that is fine.&lt;/p&gt;</comment>
                            <comment id="13867910" author="brandon.williams" created="Fri, 10 Jan 2014 15:34:01 +0000"  >&lt;p&gt;Committed, with the change I detailed above.&lt;/p&gt;</comment>
                            <comment id="13867918" author="mshuler" created="Fri, 10 Jan 2014 15:39:21 +0000"  >&lt;p&gt;logback_configurations_final2.patch rebased and s/o.a.t.s.TNonblockingServer/c.t.t/ - that works for me as well (could swear I tried that  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620621" name="logback_configurations_final.patch" size="17460" author="mshuler" created="Fri, 27 Dec 2013 16:56:40 +0000"/>
                            <attachment id="12622398" name="logback_configurations_final2.patch" size="17870" author="mshuler" created="Fri, 10 Jan 2014 15:39:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mshuler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 45 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qzmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365747</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>