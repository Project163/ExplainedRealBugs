<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:03:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11961] Nonfatal NPE in CompactionMetrics</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11961</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Just saw the following NPE on trunk. Means, that &lt;tt&gt;metaData&lt;/tt&gt; from &lt;tt&gt;CFMetaData metaData = compaction.getCompactionInfo().getCFMetaData();&lt;/tt&gt; is &lt;tt&gt;null&lt;/tt&gt;. A simple &lt;tt&gt;if (metaData == null) continue;&lt;/tt&gt; should fix this.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.cassandra.metrics.CompactionMetrics$2.getValue(CompactionMetrics.java:103) ~[main/:na]
	at org.apache.cassandra.metrics.CompactionMetrics$2.getValue(CompactionMetrics.java:78) ~[main/:na]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12975841">CASSANDRA-11961</key>
            <summary>Nonfatal NPE in CompactionMetrics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="achals">Achal Shah</assignee>
                                    <reporter username="snazy">Robert Stupp</reporter>
                        <labels>
                            <label>lhf</label>
                    </labels>
                <created>Sun, 5 Jun 2016 21:21:37 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:56 +0000</updated>
                            <resolved>Fri, 17 Jun 2016 18:20:40 +0000</resolved>
                                        <fixVersion>3.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="15322020" author="achals" created="Thu, 9 Jun 2016 06:40:47 +0000"  >&lt;p&gt;Hi, this is my first patch to Cassandra; apologies if I&apos;ve messed up in any way. Please let me know if there are any improvements I can make!&lt;/p&gt;

&lt;p&gt;I&apos;ve pushed a branch with my changes to github: &lt;a href=&quot;https://github.com/achals/cassandra/tree/11961-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/achals/cassandra/tree/11961-trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I looked for tests but there didn&apos;t seem to be any for this class.&lt;/p&gt;</comment>
                            <comment id="15322096" author="mahdix" created="Thu, 9 Jun 2016 07:45:54 +0000"  >&lt;p&gt;Seems good to me. Please assign yourself to the issue.&lt;/p&gt;</comment>
                            <comment id="15322681" author="achals" created="Thu, 9 Jun 2016 15:15:16 +0000"  >&lt;p&gt;I actually don&apos;t seem to have permissions to assign tasks in Jira. Could you assign it to me/grant me permission to do so?&lt;/p&gt;</comment>
                            <comment id="15323150" author="jmckenzie" created="Thu, 9 Jun 2016 19:17:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt;: you ok taking review on this?&lt;/p&gt;</comment>
                            <comment id="15330005" author="achals" created="Tue, 14 Jun 2016 17:45:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt; anything I can help with for the review?&lt;/p&gt;</comment>
                            <comment id="15331484" author="snazy" created="Wed, 15 Jun 2016 10:09:50 +0000"  >&lt;p&gt;No, will review (and probably commit) in the next days. (I&apos;m off this week)&lt;/p&gt;</comment>
                            <comment id="15332040" author="achals" created="Wed, 15 Jun 2016 16:34:25 +0000"  >&lt;p&gt;Sounds good, thanks!&lt;/p&gt;</comment>
                            <comment id="15336620" author="snazy" created="Fri, 17 Jun 2016 18:20:40 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Committed as 4754cddfb980226326994b60383ef83baed06714 to trunk&lt;/p&gt;

&lt;p&gt;Test results:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...snazy:11961-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/snazy/job/snazy-11961-trunk-testall/lastSuccessfulBuild/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/snazy/job/snazy-11961-trunk-dtest/lastSuccessfulBuild/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</comment>
                            <comment id="15355128" author="spodxx@gmail.com" created="Wed, 29 Jun 2016 12:23:51 +0000"  >&lt;p&gt;Missing &lt;tt&gt;CFMetaData&lt;/tt&gt; from &lt;tt&gt;CompactionInfo&lt;/tt&gt; can cause other issues as well, e.g. by calling &lt;tt&gt;getId()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;We got the following exception when calling &lt;tt&gt;nodetool compactionstats&lt;/tt&gt; on a 2.2 node under heavy load:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
&#8194;&#8194;at org.apache.cassandra.db.compaction.CompactionInfo.getId(CompactionInfo.java:68)
&#8194;&#8194;at org.apache.cassandra.db.compaction.CompactionInfo.asMap(CompactionInfo.java:126)
&#8194;&#8194;at org.apache.cassandra.db.compaction.CompactionManager.getCompactions(CompactionManager.java:1548)
&#8194;&#8194;at sun.reflect.GeneratedMethodAccessor57.invoke(Unknown Source)
&#8194;&#8194;at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#8194;&#8194;at java.lang.reflect.Method.invoke(Method.java:498)
&#8194;&#8194;at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:71)
&#8194;&#8194;at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
&#8194;&#8194;at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#8194;&#8194;at java.lang.reflect.Method.invoke(Method.java:498)
&#8194;&#8194;at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:275)
&#8194;&#8194;at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:112)
&#8194;&#8194;at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:46)
&#8194;&#8194;at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
&#8194;&#8194;at com.sun.jmx.mbeanserver.PerInterface.getAttribute(PerInterface.java:83)
&#8194;&#8194;at com.sun.jmx.mbeanserver.MBeanSupport.getAttribute(MBeanSupport.java:206)
&#8194;&#8194;at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:647)
&#8194;&#8194;at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:678)
&#8194;&#8194;at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1445)
&#8194;&#8194;at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)
&#8194;&#8194;at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)
&#8194;&#8194;at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)
&#8194;&#8194;at javax.management.remote.rmi.RMIConnectionImpl.getAttribute(RMIConnectionImpl.java:639)
&#8194;&#8194;at sun.reflect.GeneratedMethodAccessor17.invoke(Unknown Source)
&#8194;&#8194;at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#8194;&#8194;at java.lang.reflect.Method.invoke(Method.java:498)
&#8194;&#8194;at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:323)
&#8194;&#8194;at sun.rmi.transport.Transport$1.run(Transport.java:200)
&#8194;&#8194;at sun.rmi.transport.Transport$1.run(Transport.java:197)
&#8194;&#8194;at java.security.AccessController.doPrivileged(Native Method)
&#8194;&#8194;at sun.rmi.transport.Transport.serviceCall(Transport.java:196)
&#8194;&#8194;at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)
&#8194;&#8194;at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)
&#8194;&#8194;at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)
&#8194;&#8194;at java.security.AccessController.doPrivileged(Native Method)
&#8194;&#8194;at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)
&#8194;&#8194;at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
&#8194;&#8194;at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
&#8194;&#8194;at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15864334" author="s_delima" created="Mon, 13 Feb 2017 20:06:07 +0000"  >&lt;p&gt;Why is it possible for &lt;tt&gt;CFMetaData&lt;/tt&gt; to be null there?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12997329">CASSANDRA-12462</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[achals]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z07j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>snazy</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[snazy]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>