<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:16:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1406] Dropping column families doesn&apos;t clean up secondary indexes</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1406</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description></description>
                <environment></environment>
        <key id="12471923">CASSANDRA-1406</key>
            <summary>Dropping column families doesn&apos;t clean up secondary indexes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="gdusbabek">Gary Dusbabek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Aug 2010 16:58:34 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:18 +0000</updated>
                            <resolved>Fri, 27 Aug 2010 20:20:55 +0000</resolved>
                                        <fixVersion>0.7 beta 2</fixVersion>
                                    <component>Feature/2i Index</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12902949" author="jbellis" created="Thu, 26 Aug 2010 17:41:05 +0000"  >&lt;p&gt;patch replaces CF graveyard with CFS.removeAllSSTables (which is recursive to handle 2ary index files)&lt;/p&gt;</comment>
                            <comment id="12902971" author="gdusbabek" created="Thu, 26 Aug 2010 18:39:22 +0000"  >&lt;p&gt;putting the deletion in Table.dropCF() is risky wrt KS and CF renames.  It won&apos;t hurt anything right now because the delete tries to remove the old files.  If that side-effect ever went away we&apos;d be deleting valid files.  As it stands with this patch we&apos;d be trying to do cleanup of sstables that have had their files moved out from underneath them, which probably isn&apos;t the best thing to try.&lt;/p&gt;

&lt;p&gt;Is this a good ticket to lump in that RenameKeyspace and RenameColumnFamily don&apos;t address secondary indices, or should that be a new one?&lt;/p&gt;</comment>
                            <comment id="12903049" author="jbellis" created="Thu, 26 Aug 2010 21:01:09 +0000"  >&lt;p&gt;otoh, requiring the caller who calls dropCf to also call other methods to finish the job is poor encapsulation, and implementing rename as drop + add is itself an implementation detail.  neither approach is completely satisfactory imo.&lt;/p&gt;

&lt;p&gt;02 adds support for 2ary indexes in the rename methods.&lt;/p&gt;</comment>
                            <comment id="12903057" author="jbellis" created="Thu, 26 Aug 2010 21:07:59 +0000"  >&lt;p&gt;(tweaked DefsTest to not require renaming to leave an empty directory behind for the old name)&lt;/p&gt;</comment>
                            <comment id="12903509" author="gdusbabek" created="Fri, 27 Aug 2010 18:22:47 +0000"  >&lt;p&gt;dropCf was intended to unload a CFS from a table instance as indicated in its comment.  0003 cleans the interface up so that renaming acts on files like drop does.&lt;/p&gt;</comment>
                            <comment id="12903510" author="gdusbabek" created="Fri, 27 Aug 2010 18:23:35 +0000"  >&lt;p&gt;+1, but I&apos;d like 0003 to be included.&lt;/p&gt;</comment>
                            <comment id="12903588" author="jbellis" created="Fri, 27 Aug 2010 20:20:55 +0000"  >&lt;p&gt;committed w/ 03&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12453257" name="0003-extract-unload-out-of-drop.patch" size="4237" author="gdusbabek" created="Fri, 27 Aug 2010 18:22:47 +0000"/>
                            <attachment id="12453167" name="ASF.LICENSE.NOT.GRANTED--0001-replace-CF-graveyard-with-CFS.removeAllSSTables-which-.txt" size="11871" author="jbellis" created="Thu, 26 Aug 2010 21:07:29 +0000"/>
                            <attachment id="12453168" name="ASF.LICENSE.NOT.GRANTED--0002-include-secondary-indexes-in-CF-and-KS-renaming.txt" size="7348" author="jbellis" created="Thu, 26 Aug 2010 21:07:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20121</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g4v3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92218</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>gdusbabek</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[gdusbabek]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>