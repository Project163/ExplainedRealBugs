<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:40:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6026] NPE when running sstablesplit on valid sstable</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6026</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;#create cluster&lt;br/&gt;
ccm create --cassandra-version git:cassandra-1.2 test&lt;br/&gt;
ccm populate -n 1&lt;br/&gt;
ccm start&lt;/p&gt;

&lt;p&gt;#run stress&lt;br/&gt;
ccm node1 stress -n 10000000 -o insert&lt;br/&gt;
ccm node1 compact&lt;/p&gt;

&lt;p&gt;cd ~/.ccm/test/node1/data&lt;br/&gt;
../bin/sstablesplit -n 100 ./Keyspace1/Standard1/Keyspace1-Standard1-ic-16-Data.db&lt;/p&gt;

&lt;p&gt;#Expected&lt;br/&gt;
single large sstable should be split into multiple sstables with max size 100 MB&lt;/p&gt;

&lt;p&gt;#Actual&lt;br/&gt;
ERROR 10:14:06,992 Error in ThreadPoolExecutor&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableDeletingTask.run(SSTableDeletingTask.java:70)&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:724)&lt;/p&gt;


&lt;p&gt;Notes: It seems like the split occurs and can be recompacted.&lt;br/&gt;
Last known commit where split was working on 1.2 branch: 47b2cd6620894bf0c4c4584036eab49a2e14a50e&lt;br/&gt;
Have not bisected further.&lt;/p&gt;

&lt;p&gt;sstablesplit is also broken on 2.0 branch; however, it fails differently.  Filing separate bug on that.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Environment: java version &quot;1.7.0_40&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_40-b43)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 24.0-b56, mixed mode)&lt;/p&gt;

&lt;p&gt;(Sun jvm on mac)&lt;/p&gt;</environment>
        <key id="12668515">CASSANDRA-6026</key>
            <summary>NPE when running sstablesplit on valid sstable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="dmeyer">Daniel Meyer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Sep 2013 17:45:20 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:05 +0000</updated>
                            <resolved>Tue, 17 Sep 2013 07:12:51 +0000</resolved>
                                        <fixVersion>1.2.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13766730" author="dmeyer" created="Fri, 13 Sep 2013 17:59:44 +0000"  >&lt;p&gt;This issue is probably related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6027&quot; title=&quot;&amp;#39;null&amp;#39; error when running sstablesplit on valid sstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6027&quot;&gt;&lt;del&gt;CASSANDRA-6027&lt;/del&gt;&lt;/a&gt;; however, the actual behavior is different so two bugs filed.&lt;/p&gt;</comment>
                            <comment id="13766809" author="dmeyer" created="Fri, 13 Sep 2013 18:57:36 +0000"  >&lt;p&gt;Will try to find the exact commit that introduced this error.  should have it this afternoon...&lt;/p&gt;</comment>
                            <comment id="13767042" author="dmeyer" created="Fri, 13 Sep 2013 22:07:48 +0000"  >&lt;p&gt;f663a996c799bd93963a50b418ed5fcde2e48a40 is the first bad commit&lt;br/&gt;
commit f663a996c799bd93963a50b418ed5fcde2e48a40&lt;br/&gt;
Author: Aleksey Yeschenko &amp;lt;aleksey@apache.org&amp;gt;&lt;br/&gt;
Date:   Thu Sep 12 20:35:31 2013 +0300&lt;/p&gt;

&lt;p&gt;    Add SSTableDeletingNotification to DataTracker&lt;/p&gt;

&lt;p&gt;    patch by Piotr Ko&#322;aczkowski; reviewed by Aleksey Yeschenko for&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6010&quot; title=&quot;Notify before deleting SSTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6010&quot;&gt;&lt;del&gt;CASSANDRA-6010&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;:100644 100644 1c0958922018c8f05258ea6049617d5609466800 51be09daa65bd271ee9942dc97ee1547205049d4 M	CHANGES.txt&lt;br/&gt;
:040000 040000 a2dec4c205cfe751271801de219082d9551f2e9b 167f3f08984fa34dd35a1cbaf6ef13bde2f9d228 M	src&lt;/p&gt;</comment>
                            <comment id="13768159" author="slebresne" created="Mon, 16 Sep 2013 08:31:20 +0000"  >&lt;p&gt;So, this is because &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6010&quot; title=&quot;Notify before deleting SSTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6010&quot;&gt;&lt;del&gt;CASSANDRA-6010&lt;/del&gt;&lt;/a&gt; forgot to protect against the fact where the tracker was not set in SSTableDeletingTask (which is the case here). Trivial patch attached.&lt;/p&gt;

&lt;p&gt;However &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6010&quot; title=&quot;Notify before deleting SSTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6010&quot;&gt;&lt;del&gt;CASSANDRA-6010&lt;/del&gt;&lt;/a&gt; is marked as fixed in 1.2.10, so either the fix version is wrong there or this ticket lies about having reproduced in 1.2.9 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13768576" author="brandon.williams" created="Mon, 16 Sep 2013 18:21:44 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13768633" author="dmeyer" created="Mon, 16 Sep 2013 19:07:54 +0000"  >&lt;p&gt;+1 patch verified.&lt;/p&gt;</comment>
                            <comment id="13769279" author="slebresne" created="Tue, 17 Sep 2013 07:12:51 +0000"  >&lt;p&gt;Committed, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12603303" name="6026.txt" size="1030" author="slebresne" created="Mon, 16 Sep 2013 08:31:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>348449</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1o30f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>348746</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324948">1.2.10</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>dmeyer</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>