<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:35:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4628] CQL/JDBC: date vs. timestamp issues</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4628</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Cassandra&apos;s datatypes only have one Date/Time type named timestamp containing both date and time. Calling the validator org.apache.cassandra.db.marshal.DateType might be OK in general but can be confusing in the jdbc context where there is a distinction between date, time and timestamp. In terms of jdbc there should be more datatypes for dates and times or the jdbc driver should take one of the following options:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stick to timestamp&lt;/li&gt;
	&lt;li&gt;check if the date has a time part and distinguish by the data between date and timestamp automatically&lt;/li&gt;
	&lt;li&gt;use distinct datatypes according to the jdbc spec, the types would need to be in cassandra then too&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now back to my actual problem:&lt;br/&gt;
org.apache.cassandra.cql.jdbc.JdbcDate returns Types.DATE in getType(). Even if having inserted a complete date with time (making it a timestamp) the ResultSetMetaData.getColumnType() implementation still returns Types.DATE (source of this is in JdbcDate). If some other java code (where i don&apos;t have access to) uses the metadata to get the type and then getDate() to get the value the time is cut off the value and only the date is returned.&lt;/p&gt;

&lt;p&gt;But the ResultSet.getObject() implementation returns a complete java.util.Date including the time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12606538">CASSANDRA-4628</key>
            <summary>CQL/JDBC: date vs. timestamp issues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mkrumpholz">Michael Krumpholz</assignee>
                                    <reporter username="mkrumpholz">Michael Krumpholz</reporter>
                        <labels>
                            <label>cql</label>
                            <label>jdbc</label>
                    </labels>
                <created>Fri, 7 Sep 2012 07:25:06 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:28 +0000</updated>
                            <resolved>Fri, 7 Sep 2012 15:23:53 +0000</resolved>
                                        <fixVersion>1.2.0 beta 1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13450508" author="slebresne" created="Fri, 7 Sep 2012 10:26:33 +0000"  >&lt;p&gt;I&apos;m a fairly strong believer that adding the Jdbc* classes was a mistake in the first place. See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4495&quot; title=&quot;Don&amp;#39;t tie client side use of AbstractType to JDBC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4495&quot;&gt;&lt;del&gt;CASSANDRA-4495&lt;/del&gt;&lt;/a&gt; for a bit more argumentation.&lt;/p&gt;

&lt;p&gt;So I must admit that I&apos;m not sure I understand what it is you suggest exactly concerning Cassandra itself in this ticket, so I don&apos;t want to close this right way, but I have the feeling that whatever needs to be done probably concerns the jdbc driver, not Cassandra.&lt;/p&gt;

&lt;p&gt;As a side note, I wouldn&apos;t disagree that Cassandra/CQL handling of dates is a tad limited and it might probably be worth beefing it up at some point, but that&apos;s largely a different issue.&lt;/p&gt;</comment>
                            <comment id="13450532" author="mkrumpholz" created="Fri, 7 Sep 2012 11:22:03 +0000"  >&lt;p&gt;The JdbcDate class is not part of the jdbc driver package which is a separate project at google (as you mentioned in my other issue). But the getType there returns the JDBC datatype (from java.sql.Types) that is returned in the metadata according to the jdbc spec. The problem is that Types.DATE is the wrong type. It should be Types.TIMESTAMP because the data can be more that just a date, it can be a timestamp. Using ResultSet.getDate() because of the returned type cuts off the time part of the timestamp. JDBC has the date time distinction, cassandra not. in short words, but i assume you are aware of this: date != timestamp, timestamp = date + time&lt;/p&gt;</comment>
                            <comment id="13450654" author="jbellis" created="Fri, 7 Sep 2012 14:19:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;the getType there returns the JDBC datatype &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;that is an issue with the jdbc driver then, not Cassandra&lt;/p&gt;</comment>
                            <comment id="13450699" author="slebresne" created="Fri, 7 Sep 2012 15:15:13 +0000"  >&lt;p&gt;I guess it is true that JdbcDate could have been made to return java.sql.Types.TIMESTAMP rather than DATE for its getJdbcType method. &lt;/p&gt;</comment>
                            <comment id="13450703" author="jbellis" created="Fri, 7 Sep 2012 15:18:17 +0000"  >&lt;p&gt;Oops, I guess that is our code.&lt;/p&gt;</comment>
                            <comment id="13450709" author="mkrumpholz" created="Fri, 7 Sep 2012 15:23:30 +0000"  >&lt;blockquote&gt;
&lt;p&gt;that is an issue with the jdbc driver then, not Cassandra&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That would be the case only if that class (JdbcDate) would NOT be part of cassandra (apache-cassandra-clientutil-x.x.x.jar) but located in the jdbc lib/jar in the project at google. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Oops, I guess that is our code.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Right! For now it&apos;s within cassandra code and included as dependency in cassandra-jdbc. If this type class and the meaning of if should change with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4495&quot; title=&quot;Don&amp;#39;t tie client side use of AbstractType to JDBC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4495&quot;&gt;&lt;del&gt;CASSANDRA-4495&lt;/del&gt;&lt;/a&gt; then the code should be moved to the jdbc project or a update there should be done. I don&apos;t know how much the casandra dev team is involved with the cassandra-jdbc project...&lt;/p&gt;</comment>
                            <comment id="13450711" author="jbellis" created="Fri, 7 Sep 2012 15:23:53 +0000"  >&lt;p&gt;fixed in e1201dff2c9c89ce2ff9a197ac5d99d9288c06e2&lt;/p&gt;</comment>
                            <comment id="13450712" author="jbellis" created="Fri, 7 Sep 2012 15:25:06 +0000"  >&lt;p&gt;(I think the confusion arose because it represents a Java Date object, which does include time.  So we had a DateType around, and when we added CQL just named the corresponding class JdbcDate following the convention for the other classes.)&lt;/p&gt;</comment>
                            <comment id="13450719" author="mkrumpholz" created="Fri, 7 Sep 2012 15:27:16 +0000"  >&lt;p&gt;yeah, as i wrote in the issue description, in the schema_columns table it is a DateType class, data type in the create statement is timestamp as it is and should be in the jdbc context.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mkrumpholz]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256298</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gxun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96914</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>