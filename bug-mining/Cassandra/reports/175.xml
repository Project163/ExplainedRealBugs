<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:11:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-478] NPE during read repair</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-478</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;From Teodor Sigaev:&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RESPONSE-STAGE:1&amp;#93;&lt;/span&gt; 2009-10-08 17:05:25,864 DebuggableThreadPoolExecutor.java (line 110) Error in ThreadPoolExecutor&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
       at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.handleDigestResponses(ConsistencyManager.java:68)&lt;br/&gt;
       at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.response(ConsistencyManager.java:55)&lt;br/&gt;
       at org.apache.cassandra.net.ResponseVerbHandler.doVerb(ResponseVerbHandler.java:35)&lt;br/&gt;
       at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:39)&lt;br/&gt;
       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)&lt;br/&gt;
       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)&lt;br/&gt;
       at java.lang.Thread.run(Thread.java:636)&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RESPONSE-STAGE:1&amp;#93;&lt;/span&gt; 2009-10-08 17:05:25,916 CassandraDaemon.java (line 71) Fatal exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;RESPONSE-STAGE:1,5,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
       at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.handleDigestResponses(ConsistencyManager.java:68)&lt;br/&gt;
       at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.response(ConsistencyManager.java:55)&lt;br/&gt;
       at org.apache.cassandra.net.ResponseVerbHandler.doVerb(ResponseVerbHandler.java:35)&lt;br/&gt;
       at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:39)&lt;br/&gt;
       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)&lt;br/&gt;
       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12437607">CASSANDRA-478</key>
            <summary>NPE during read repair</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Oct 2009 15:44:35 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:33 +0000</updated>
                            <resolved>Mon, 12 Oct 2009 19:57:57 +0000</resolved>
                                        <fixVersion>0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12763533" author="jbellis" created="Thu, 8 Oct 2009 15:45:28 +0000"  >&lt;p&gt;Patch to log the Row that encounters this error&lt;/p&gt;</comment>
                            <comment id="12764754" author="teodor" created="Mon, 12 Oct 2009 17:26:41 +0000"  >&lt;p&gt;Got it again:&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RESPONSE-STAGE:2&amp;#93;&lt;/span&gt; 2009-10-12 21:17:44,256 DebuggableThreadPoolExecutor.java (line 110) Error in ThreadPoolExecutor&lt;br/&gt;
java.lang.RuntimeException: Error handling responses for Row(00000000000176799500 &lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.handleDigestResponses(ConsistencyManager.java:82)&lt;br/&gt;
        at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.response(ConsistencyManager.java:55)&lt;br/&gt;
        at org.apache.cassandra.net.ResponseVerbHandler.doVerb(ResponseVerbHandler.java:35)&lt;br/&gt;
        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:39)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:636)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.handleDigestResponses(ConsistencyManager.java:70)&lt;br/&gt;
        ... 6 more&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RESPONSE-STAGE:2&amp;#93;&lt;/span&gt; 2009-10-12 21:17:44,256 CassandraDaemon.java (line 71) Fatal exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;RESPONSE-STAGE:2,5,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.RuntimeException: Error handling responses for Row(00000000000176799500 &lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.handleDigestResponses(ConsistencyManager.java:82)&lt;br/&gt;
        at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.response(ConsistencyManager.java:55)&lt;br/&gt;
        at org.apache.cassandra.net.ResponseVerbHandler.doVerb(ResponseVerbHandler.java:35)&lt;br/&gt;
        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:39)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:636)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.cassandra.service.ConsistencyManager$DigestResponseHandler.handleDigestResponses(ConsistencyManager.java:70)&lt;br/&gt;
        ... 6 more&lt;/p&gt;</comment>
                            <comment id="12764766" author="jbellis" created="Mon, 12 Oct 2009 17:51:54 +0000"  >&lt;p&gt;is it reproducible when you re-run the query on that key? (00000000000176799500)&lt;/p&gt;</comment>
                            <comment id="12764772" author="teodor" created="Mon, 12 Oct 2009 18:10:14 +0000"  >&lt;p&gt;No, it works &lt;/p&gt;</comment>
                            <comment id="12764774" author="jbellis" created="Mon, 12 Oct 2009 18:12:25 +0000"  >&lt;p&gt;asserts to find where the null Message body is coming from&lt;/p&gt;</comment>
                            <comment id="12764777" author="teodor" created="Mon, 12 Oct 2009 18:16:38 +0000"  >&lt;p&gt;Ok, will apply&lt;/p&gt;</comment>
                            <comment id="12764785" author="jbellis" created="Mon, 12 Oct 2009 18:55:14 +0000"  >&lt;p&gt;aha, it&apos;s a race condition &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;here&apos;s a fix.&lt;/p&gt;</comment>
                            <comment id="12764787" author="jbellis" created="Mon, 12 Oct 2009 18:58:20 +0000"  >&lt;p&gt;(there&apos;s no way for a null Message to be passed to response() &amp;#8211; see ResponseVerbHandler for details.  but it could see a null in the List if there is another thread modifying it concurrently.)&lt;/p&gt;</comment>
                            <comment id="12764788" author="urandom" created="Mon, 12 Oct 2009 19:02:29 +0000"  >&lt;p&gt;Nice. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; +1&lt;/p&gt;</comment>
                            <comment id="12764806" author="jbellis" created="Mon, 12 Oct 2009 19:57:57 +0000"  >&lt;p&gt;committed to 0.4 and trunk&lt;/p&gt;</comment>
                            <comment id="12765054" author="hudson" created="Tue, 13 Oct 2009 12:35:15 +0000"  >&lt;p&gt;Integrated in Cassandra #226 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/226/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/226/&lt;/a&gt;)&lt;br/&gt;
    move callback synchronization into ResponseVerbHandler where it&apos;s less likely to be a maintenance problem&lt;br/&gt;
patch by jbellis for &lt;br/&gt;
r/m unused attachContext.&lt;br/&gt;
patch by jbellis for &lt;br/&gt;
cleanup Message; add asserts&lt;br/&gt;
patch by jbellis for &lt;br/&gt;
logging &amp;amp; cleanup in ConsistencyManager&lt;br/&gt;
patch by jbellis for &lt;/p&gt;</comment>
                            <comment id="12765453" author="teodor" created="Wed, 14 Oct 2009 07:55:18 +0000"  >&lt;p&gt;Thank you a lot!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12421888" name="478-asserts.patch" size="2565" author="jbellis" created="Mon, 12 Oct 2009 18:12:25 +0000"/>
                            <attachment id="12421893" name="478-fix.patch" size="622" author="jbellis" created="Mon, 12 Oct 2009 18:55:14 +0000"/>
                            <attachment id="12421630" name="478-logging.patch" size="1933" author="jbellis" created="Thu, 8 Oct 2009 15:45:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19711</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fz6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91297</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>