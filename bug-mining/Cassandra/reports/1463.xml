<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:29:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3740] While using BulkOutputFormat  unneccessarily look for the cassandra.yaml file.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3740</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I am trying to use BulkOutputFormat to stream the data from map of Hadoop job. I have set the cassandra related configuration using ConfigHelper ,Also have looked into Cassandra code seems Cassandra has taken care that it should not look for the cassandra.yaml file.&lt;br/&gt;
But still when I run the job i get the following error:&lt;/p&gt;

&lt;p&gt;{&lt;br/&gt;
12/01/13 11:30:04 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.&lt;br/&gt;
12/01/13 11:30:04 INFO input.FileInputFormat: Total input paths to process : 1&lt;br/&gt;
12/01/13 11:30:04 INFO mapred.JobClient: Running job: job_201201130910_0015&lt;br/&gt;
12/01/13 11:30:05 INFO mapred.JobClient:  map 0% reduce 0%&lt;br/&gt;
12/01/13 11:30:23 INFO mapred.JobClient: Task Id : attempt_201201130910_0015_m_000000_0, Status : FAILED&lt;br/&gt;
java.lang.Throwable: Child Error&lt;br/&gt;
        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)&lt;br/&gt;
Caused by: java.io.IOException: Task process exit with nonzero status of 1.&lt;br/&gt;
        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)&lt;/p&gt;

&lt;p&gt;attempt_201201130910_0015_m_000000_0: Cannot locate cassandra.yaml&lt;br/&gt;
attempt_201201130910_0015_m_000000_0: Fatal configuration error; unable to start server.&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Also let me know how can i make this cassandra.yaml file available to Hadoop mapreduce job?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12538311">CASSANDRA-3740</key>
            <summary>While using BulkOutputFormat  unneccessarily look for the cassandra.yaml file.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="samarthg1986">Samarth Gahire</reporter>
                        <labels>
                            <label>cassandra</label>
                            <label>hadoop</label>
                            <label>mapreduce</label>
                    </labels>
                <created>Fri, 13 Jan 2012 12:14:06 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:42 +0000</updated>
                            <resolved>Tue, 14 Feb 2012 13:41:40 +0000</resolved>
                                        <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13185772" author="brandon.williams" created="Fri, 13 Jan 2012 19:22:53 +0000"  >&lt;p&gt;Are you trying this on trunk?  Because specifically patch 0002 on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3045&quot; title=&quot;Update ColumnFamilyOutputFormat to use new bulkload API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3045&quot;&gt;&lt;del&gt;CASSANDRA-3045&lt;/del&gt;&lt;/a&gt; addresses this problem.&lt;/p&gt;</comment>
                            <comment id="13186086" author="samarthg1986" created="Sat, 14 Jan 2012 04:33:17 +0000"  >&lt;p&gt;I am using &quot;apache-cassandra-2011-12-27_22-01-50-bin.tar.gz&quot; build from jenkins . Let me know if I am using the correct binaries . &lt;/p&gt;</comment>
                            <comment id="13186140" author="samarthg1986" created="Sat, 14 Jan 2012 09:02:55 +0000"  >&lt;p&gt;I have checked into the code and I can see following issues:&lt;br/&gt;
 1) &quot;org.apache.cassandra.config.Config&quot; do not initialize the all the properties and which results into the null pointer exception in a static block of class &quot;DatabaseDescriptor&quot; for example &quot;conf.commitlog_sync&quot;&lt;/p&gt;

&lt;p&gt; 2) I cant see any method in ConfigHelper to specify that I am using &quot;Supercolumn&quot; and clustername(dont know if cluster name is really needed)&lt;/p&gt;

&lt;p&gt; 3) Also there is no method to specify comparator and subcomparator in ConfigHelper and it seems like comparators have been hard coded to &quot;BytesType&quot;&lt;/p&gt;</comment>
                            <comment id="13186185" author="samarthg1986" created="Sat, 14 Jan 2012 12:25:55 +0000"  >&lt;p&gt;One More issue:&lt;/p&gt;

&lt;p&gt;I can set the &quot;Partitioner&quot; into jobconf using &quot;ConfigHelper&quot; ,but it is no where used to set into the &quot;DatabaseDescriptor&quot; and not even initialized into the &quot;DatabaseDescriptor.initDefaultsOnly()&quot;.&lt;br/&gt;
But &quot;AbstractSSTableSimpleWriter&quot; uses partioner (at line number 94) which will result into the null pointer.&lt;/p&gt;</comment>
                            <comment id="13188320" author="samarthg1986" created="Wed, 18 Jan 2012 07:32:08 +0000"  >&lt;p&gt;Apart From these issues I do not think that we are considering the TTL case in BulkOutputFormat.&lt;br/&gt;
Have looked into the code and can only see the &quot;addColumn()&quot; method and the &quot;addExpiringColumn()&quot; is not used anywhere.&lt;/p&gt;</comment>
                            <comment id="13189205" author="brandon.williams" created="Thu, 19 Jan 2012 17:08:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;1) &quot;org.apache.cassandra.config.Config&quot; do not initialize the all the properties and which results into the null pointer exception in a static block of class &quot;DatabaseDescriptor&quot; for example &quot;conf.commitlog_sync&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Patches to address that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;2) I cant see any method in ConfigHelper to specify that I am using &quot;Supercolumn&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&quot;mapreduce.output.bulkoutputformat.issuper&quot; controls that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;3) Also there is no method to specify comparator and subcomparator in ConfigHelper and it seems like comparators have been hard coded to &quot;BytesType&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;BytesType will sort correctly, the comparators are in the schema on the remote nodes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Apart From these issues I do not think that we are considering the TTL case in BulkOutputFormat.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3754&quot; title=&quot;Add TTL support to BulkOutputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3754&quot;&gt;&lt;del&gt;CASSANDRA-3754&lt;/del&gt;&lt;/a&gt; will handle this.&lt;/p&gt;</comment>
                            <comment id="13197745" author="samarthg1986" created="Wed, 1 Feb 2012 11:03:52 +0000"  >&lt;p&gt;I Tested the patches all the patches except the yaml one works fine.&lt;br/&gt;
I have checked the Yaml patch and my job still look for the cassandra.yaml file and fails.&lt;/p&gt;</comment>
                            <comment id="13198095" author="brandon.williams" created="Wed, 1 Feb 2012 19:56:51 +0000"  >&lt;p&gt;I added a way to get around the yaml, then forgot to make BOF use it.  Updated patches should work.&lt;/p&gt;</comment>
                            <comment id="13198577" author="samarthg1986" created="Thu, 2 Feb 2012 07:39:10 +0000"  >&lt;p&gt;Cool! Its Working Perfect with the updated patches.&lt;br/&gt;
Can you please explain &lt;br/&gt;
1) what is the significance of &quot;INPUT_INITIAL_THRIFT_ADDRESS&quot; for BulkOutPutFormat.&lt;br/&gt;
2) What am I suppose to provide there?(If it is needed)&lt;br/&gt;
3) Is there any need to provide Listen address of the Hadoop Nodes for BulkOutputFormat if yes How to provide the same?&lt;/p&gt;

&lt;p&gt;Actually we are experiencing the problem while loading the data where it fails to connect if the host the M/R job is running on is dualstack, i.e. has both IPv4 and IPv6. &lt;br/&gt;
Also it works when cassandra.yaml is provided ,may be it is reading listen address or something from cassandra.yaml.&lt;/p&gt;</comment>
                            <comment id="13198793" author="brandon.williams" created="Thu, 2 Feb 2012 13:41:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;what is the significance of &quot;INPUT_INITIAL_THRIFT_ADDRESS&quot; for BulkOutPutFormat.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For an output format, this won&apos;t be used, it&apos;s only for input formats.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is there any need to provide Listen address of the Hadoop Nodes for BulkOutputFormat if yes How to provide the same?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure what you mean, hadoop nodes themselves won&apos;t have a listen address, and BOF will discover the cassandra nodes&apos; listen address via thrift.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Actually we are experiencing the problem while loading the data where it fails to connect if the host the M/R job is running on is dualstack, i.e. has both IPv4 and IPv6. Also it works when cassandra.yaml is provided ,may be it is reading listen address or something from cassandra.yaml.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmm, I can&apos;t think of any reason that would work with the yaml, can you give more details of the setup?&lt;/p&gt;</comment>
                            <comment id="13198796" author="forsberg" created="Thu, 2 Feb 2012 13:46:56 +0000"  >&lt;p&gt;&amp;gt;Actually we are experiencing the problem while loading the data where it fails to connect if the host the M/R job is running on is dualstack, i.e. has both IPv4 &amp;gt;and IPv6. &lt;br/&gt;
&amp;gt;Also it works when cassandra.yaml is provided ,may be it is reading listen address or something from cassandra.yaml.&lt;/p&gt;

&lt;p&gt;Described this problem in more detail in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3839&quot; title=&quot;BulkOutputFormat binds to wrong client address when client is Dual-stack and server is IPv6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3839&quot;&gt;&lt;del&gt;CASSANDRA-3839&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13198823" author="brandon.williams" created="Thu, 2 Feb 2012 14:26:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;Described this problem in more detail in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3839&quot; title=&quot;BulkOutputFormat binds to wrong client address when client is Dual-stack and server is IPv6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3839&quot;&gt;&lt;del&gt;CASSANDRA-3839&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I see, let&apos;s address this there.&lt;/p&gt;</comment>
                            <comment id="13199105" author="brandon.williams" created="Thu, 2 Feb 2012 19:06:04 +0000"  >&lt;p&gt;Two more patches to address &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3839&quot; title=&quot;BulkOutputFormat binds to wrong client address when client is Dual-stack and server is IPv6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3839&quot;&gt;&lt;del&gt;CASSANDRA-3839&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13199399" author="brandon.williams" created="Fri, 3 Feb 2012 00:20:19 +0000"  >&lt;p&gt;Rebased.&lt;/p&gt;</comment>
                            <comment id="13199713" author="brandon.williams" created="Fri, 3 Feb 2012 14:11:00 +0000"  >&lt;p&gt;Fix incorrect variable scope causing NPE.&lt;/p&gt;</comment>
                            <comment id="13206969" author="brandon.williams" created="Mon, 13 Feb 2012 16:35:53 +0000"  >&lt;p&gt;Samarth/Erik,&lt;/p&gt;

&lt;p&gt;How does this patch look?&lt;/p&gt;</comment>
                            <comment id="13206986" author="samarthg1986" created="Mon, 13 Feb 2012 17:11:52 +0000"  >&lt;p&gt;First 4 patches working fine.&lt;br/&gt;
About the patch related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3839&quot; title=&quot;BulkOutputFormat binds to wrong client address when client is Dual-stack and server is IPv6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3839&quot;&gt;&lt;del&gt;CASSANDRA-3839&lt;/del&gt;&lt;/a&gt; Erik can explain properly.&lt;/p&gt;</comment>
                            <comment id="13207469" author="lenn0x" created="Tue, 14 Feb 2012 02:55:00 +0000"  >&lt;p&gt;Brandon,&lt;/p&gt;

&lt;p&gt;I just filed &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3906&quot; title=&quot;BulkRecordWriter throws NPE for counter columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3906&quot;&gt;&lt;del&gt;CASSANDRA-3906&lt;/del&gt;&lt;/a&gt;, this fixes counter column NPE. Also we tested out these patches and based on patch: 0004-update-BOF-for-new-dir-layout.txt&lt;/p&gt;

&lt;p&gt;That has a scoping issue, where you set File output, so scope becomes local.&lt;/p&gt;</comment>
                            <comment id="13207472" author="brandon.williams" created="Tue, 14 Feb 2012 02:59:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;That has a scoping issue, where you set File output, so scope becomes local.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Are you sure you tried the latest patch on this ticket?&lt;/p&gt;

&lt;p&gt;Edit: nevermind, I squashed 004 into 003 and never deleted it.&lt;/p&gt;</comment>
                            <comment id="13207521" author="lenn0x" created="Tue, 14 Feb 2012 05:24:06 +0000"  >&lt;p&gt;Brandon, other than that, I +1 this patch. If you don&apos;t mind reviewing my other patches &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I am about to post another for making compression work with bulk writer too, and it depends on this going in.&lt;/p&gt;</comment>
                            <comment id="13207701" author="brandon.williams" created="Tue, 14 Feb 2012 13:41:40 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="13207714" author="forsberg" created="Tue, 14 Feb 2012 13:55:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;Samarth/Erik, How does this patch look?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Overall, it&apos;s looking good. I haven&apos;t tested the latest version of this patch on a large data set yet, hoping to find time to do that tomorrow.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12542482">CASSANDRA-3907</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12538787">CASSANDRA-3752</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12540923">CASSANDRA-3839</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12540923">CASSANDRA-3839</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12513076" name="0001-Make-DD-the-canonical-partitioner-source.txt" size="6322" author="brandon.williams" created="Fri, 3 Feb 2012 00:20:19 +0000"/>
                            <attachment id="12513077" name="0002-Prevent-loading-from-yaml.txt" size="10669" author="brandon.williams" created="Fri, 3 Feb 2012 00:20:19 +0000"/>
                            <attachment id="12513129" name="0003-use-output-partitioner.txt" size="9760" author="brandon.williams" created="Fri, 3 Feb 2012 14:11:00 +0000"/>
                            <attachment id="12513080" name="0005-BWR-uses-any-if.txt" size="1078" author="brandon.williams" created="Fri, 3 Feb 2012 00:20:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gnnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95263</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>lenn0x</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[lenn0x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>