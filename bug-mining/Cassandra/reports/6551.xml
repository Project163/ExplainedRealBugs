<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:30:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-19999] debian bash completion for nodetool/cqlsh is not working</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-19999</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I tried to enable nodetool/cqlsh completion and got an error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
nodetool-completion:18: command not found: have &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Source for this line&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &#160; 16 &#160; &#160;#
&#160; &#160; 17 &#160; &#160;#
&#160;&amp;gt;&amp;gt; 18 &#160; &#160;have nodetool &amp;amp;&amp;amp; have cqlsh &amp;amp;&amp;amp;
&#160; &#160; 19 &#160; &#160;{
&#160; &#160; 20
&#160; &#160; 21 &#160; &#160; &#160; &#160;show_keyspaces()
&#160; &#160; 22 &#160; &#160; &#160; &#160;{
&#160; &#160; 23 &#160; &#160; &#160; &#160; &#160; &#160;local ks=$(get_keyspaces)
&#160; &#160; 24 &#160; &#160; &#160; &#160; &#160; &#160;COMPREPLY=( $(compgen -W &lt;span class=&quot;code-quote&quot;&gt;&quot;$ks&quot;&lt;/span&gt; -- &lt;span class=&quot;code-quote&quot;&gt;&quot;$1&quot;&lt;/span&gt;) )
&#160; &#160; 25 &#160; &#160; &#160; &#160;} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I don&apos;t know from which debian package the `have` is, but I think it&apos;s better to use bash builtin function `type`&#160;&lt;/p&gt;

&lt;p&gt;Fix for 4.0: &lt;a href=&quot;https://github.com/apache/cassandra/pull/3613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/3613&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13595208">CASSANDRA-19999</key>
            <summary>debian bash completion for nodetool/cqlsh is not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="0x62ash">Aleksandr Batyrshin</assignee>
                                    <reporter username="0x62ash">Aleksandr Batyrshin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Oct 2024 23:57:54 +0000</created>
                <updated>Sat, 19 Oct 2024 11:52:03 +0000</updated>
                            <resolved>Tue, 15 Oct 2024 08:37:59 +0000</resolved>
                                        <fixVersion>4.0.15</fixVersion>
                    <fixVersion>4.1.8</fixVersion>
                    <fixVersion>5.0.3</fixVersion>
                    <fixVersion>5.1</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17888950" author="michaelsembwever" created="Sun, 13 Oct 2024 02:01:46 +0000"  >&lt;p&gt;&lt;tt&gt;have&lt;/tt&gt; should be an available bash_completion function.&lt;br/&gt;
ref: &lt;a href=&quot;https://stackoverflow.com/questions/12874920/have-keyword-for-bash-completion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/12874920/have-keyword-for-bash-completion&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;How did you try to enable it? &lt;br/&gt;
(Are we installing it wrong?)&lt;/p&gt;</comment>
                            <comment id="17888993" author="0x62ash" created="Sun, 13 Oct 2024 12:51:51 +0000"  >&lt;p&gt;I&apos;ve tried several ways:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
source /etc/profile.d/bash_completion.sh 
source /usr/share/bash-completion/bash_completion
source /usr/share/bash-completion/completions/nodetool&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looks like `have` is deprecated and disabled for dynamically loaded completion.&lt;br/&gt;
At the end of execution /usr/share/bash-completion/bash_completion:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  2165 &#160; &#160;unset -f have
&#160; 2166 &#160; &#160;unset have &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Updated PR from `type` to `_have`&lt;/p&gt;</comment>
                            <comment id="17889004" author="michaelsembwever" created="Sun, 13 Oct 2024 16:10:39 +0000"  >&lt;p&gt;Nice! Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=0x62ash&quot; class=&quot;user-hover&quot; rel=&quot;0x62ash&quot;&gt;0x62ash&lt;/a&gt;.  Did you find any docs or news on this ?  We need to know how this impacts other and past dists&#8230;&lt;/p&gt;</comment>
                            <comment id="17889035" author="0x62ash" created="Sun, 13 Oct 2024 19:01:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;&#160;&lt;br/&gt;
It was very, very long time ago )&lt;/p&gt;

&lt;p&gt;`have()` declared deprecated at version 1.90 (13y ago) and introduced `_have()` - &lt;a href=&quot;https://github.com/scop/bash-completion/commit/20c05b43b6e44be8ae3c5025a77eca62a48c5a62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/scop/bash-completion/commit/20c05b43b6e44be8ae3c5025a77eca62a48c5a62&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;`_have()` was removed and introduced `_comp_have_command()` at version 2.12.0 (2y ago) - &lt;a href=&quot;https://github.com/scop/bash-completion/commit/6381fd1f529fa751ecbba6fadd18f8006a8bad14#diff-a4757074ff650000804fd3eaabe9b0a9e02e33040ca5b8afd4c0275fc5f3e136R122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/scop/bash-completion/commit/6381fd1f529fa751ecbba6fadd18f8006a8bad14#diff-a4757074ff650000804fd3eaabe9b0a9e02e33040ca5b8afd4c0275fc5f3e136R122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Let&apos;s look at bash-completion versions for actual debian distro &#8211; &lt;a href=&quot;https://packages.debian.org/search?keywords=bash-completion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://packages.debian.org/search?keywords=bash-completion&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Package bash-completion&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://packages.debian.org/buster/bash-completion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;buster (oldoldstable)&lt;/a&gt;&#160;(shells): programmable completion for the bash shell&lt;br/&gt;
1:2.8-6: all&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://packages.debian.org/bullseye/bash-completion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;bullseye (oldstable)&lt;/a&gt;&#160;(shells): programmable completion for the bash shell&lt;br/&gt;
1:2.11-2: all&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://packages.debian.org/bookworm/bash-completion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;bookworm (stable)&lt;/a&gt;&#160;(shells): programmable completion for the bash shell&lt;br/&gt;
1:2.11-6: all&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://packages.debian.org/trixie/bash-completion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trixie (testing)&lt;/a&gt;&#160;(shells): programmable completion for the bash shell&lt;br/&gt;
1:2.14.0-1: all&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://packages.debian.org/sid/bash-completion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sid (unstable)&lt;/a&gt;&#160;(shells): programmable completion for the bash shell&lt;br/&gt;
1:2.14.0-1: all&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So fix with `_have()` should work on all production environment until trixie released.&lt;/p&gt;</comment>
                            <comment id="17889115" author="michaelsembwever" created="Mon, 14 Oct 2024 07:38:15 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=0x62ash&quot; class=&quot;user-hover&quot; rel=&quot;0x62ash&quot;&gt;0x62ash&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;I did a little testing of it using my 5.0 based branch &lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-5.0...thelastpickle:cassandra:mck/0x62ash/19999/5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;thelastpickle:mck/0x62ash/19999/5.0&lt;/a&gt;, which contains a few small fixes to get the debian packaging building and to be able to debug the packaging process.&lt;/p&gt;

&lt;p&gt;Then with&#8230;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant jar

.build/docker/build-debian.sh

docker run -it -v `pwd`:/cassandra openjdk:11-jdk-slim-buster  /bin/bash

apt -qq update
apt -qq install -y python3 procps openjdk-11-jre-headless bash-completion

cd cassandra/build
dpkg -i *.deb

# at &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; point I don&apos;t have any nodetool bash completion
ls /etc/bash_completion.d/

# but, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; i install the completion file manually, it works
cp debian/nodetool-completion /etc/bash_completion.d/
. /etc/bash_completion

# now it works
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m not getting a system with any nodetool completion. Seems the dh_bash-completion step is not working (i.e. not copying debian/nodetool-completion into /etc/bash_completion.d/ )&lt;/p&gt;</comment>
                            <comment id="17889191" author="0x62ash" created="Mon, 14 Oct 2024 11:51:48 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I suppose that dh_bash-completion installed nodetool completion to /usr/share/bash-completion/completions&lt;/p&gt;

&lt;p&gt;Buster comes with bash-completion 2.8-6.&lt;br/&gt;
According to doc all completions should be installed under /usr/share/bash-completion/completions - &lt;a href=&quot;https://salsa.debian.org/debian/bash-completion/-/blob/debian/2.8-6/debian/README.Debian?ref_type=tags&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://salsa.debian.org/debian/bash-completion/-/blob/debian/2.8-6/debian/README.Debian?ref_type=tags&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You could check installed from deb files by&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
dpkg -L cassandra &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17889537" author="michaelsembwever" created="Tue, 15 Oct 2024 08:01:16 +0000"  >&lt;p&gt;Yes, thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;So the file is correctly installed in  /usr/share/bash-completion/completions&lt;br/&gt;
and all that is needed to use it is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;source /etc/profile.d/bash_completion.sh&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This all works as expected.   (&quot;/etc/bash_completion.d/&quot; was a red-herring.)&lt;/p&gt;</comment>
                            <comment id="17889550" author="michaelsembwever" created="Tue, 15 Oct 2024 08:38:27 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/6a1d13ade2622ce0cd904e533797084fedd818b5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/6a1d13ade2622ce0cd904e533797084fedd818b5&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17889834" author="0x62ash" created="Tue, 15 Oct 2024 20:34:27 +0000"  >&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12681866">CASSANDRA-6421</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[0x62ash]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ry7c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mck]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348835">NA</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/6a1d13ade2622ce0cd904e533797084fedd818b5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/6a1d13ade2622ce0cd904e533797084fedd818b5&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;ci&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>