<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:02:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11475] MV code refactor</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11475</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;While working on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5546&quot; title=&quot;Gc_grace should start at the creation of the column, not when it expires&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5546&quot;&gt;CASSANDRA-5546&lt;/a&gt; I run into a problem with TTLs on MVs, which looking more closely is a bug of the MV code. But one thing leading to another I reviewed a good portion of the MV code and found the following correction problems:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;If a base row is TTLed then even if an update remove that TTL the view entry remained TTLed and expires, leading to an inconsistency.&lt;/li&gt;
	&lt;li&gt;Due to calling the wrong ctor for &lt;tt&gt;LivenessInfo&lt;/tt&gt;, when a TTL was set on the base table, the view entry was living twice as long as the TTL. Again leading to a temporary inconsistency.&lt;/li&gt;
	&lt;li&gt;When reading existing data to compute view updates, all deletion informations are completely ignored (the code uses a &lt;tt&gt;PartitionIterator&lt;/tt&gt; instead of an &lt;tt&gt;UnfilteredPartitionIterator&lt;/tt&gt;). This is a serious issue since it means some deletions could be totally ignored as far as views are concerned especially when messages are delivered to a replica out of order. I&apos;ll note that while the 2 previous points are relatively easy to fix, I didn&apos;t find an easy and clean way to fix this one on the current code.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Further, I think the MV code in general has inefficiencies/code complexities that should be avoidable:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;TemporalRow.Set&lt;/tt&gt; is buffering both everything read and a pretty much complete copy of the updates. That&apos;s a potentially high memory requirement. We shouldn&apos;t have to copy the updates and we shouldn&apos;t buffer all reads but rather work incrementally.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;TemporalRow&lt;/tt&gt;/&lt;tt&gt;TemporalRow.Set&lt;/tt&gt;/&lt;tt&gt;TemporalCell&lt;/tt&gt; classes are somewhat re-inventing the wheel. They are really just storing both an update we&apos;re doing and the corresponding existing data, but we already have &lt;tt&gt;Row&lt;/tt&gt;/&lt;tt&gt;Partition&lt;/tt&gt;/&lt;tt&gt;Cell&lt;/tt&gt; for that. In practice, those &lt;tt&gt;Temporal*&lt;/tt&gt; class generates a lot of allocations that we could avoid.&lt;/li&gt;
	&lt;li&gt;The code from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10060&quot; title=&quot;Reuse TemporalRow when updating multiple MaterializedViews&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10060&quot;&gt;&lt;del&gt;CASSANDRA-10060&lt;/del&gt;&lt;/a&gt; to avoid multiple reads of the base table with multiple views doesn&apos;t work when the update has partition/range tombstones because the code uses &lt;tt&gt;TemporalRow.Set.setTombstonedExisting()&lt;/tt&gt; to trigger reuse, but the &lt;tt&gt;TemporalRow.Set.withNewViewPrimaryKey()&lt;/tt&gt; method is used between view and it does not preseve the &lt;tt&gt;hasTombstonedExisting&lt;/tt&gt; flag.  But that oversight, which is trivial to fix, is kind of a good thing since if you fix it, you&apos;re left with a correction problem.&lt;br/&gt;
  The read done when there is a partition deletion depends on the view itself (if there is clustering filters in particular) and so reusing that read for other views is wrong. Which makes that whole reuse code really dodgy imo: the read for existing data is in &lt;tt&gt;View.java&lt;/tt&gt;, suggesting that it depends on the view (which again, it does at least for partition deletion), but it shouldn&apos;t if we&apos;re going to reuse the result across multiple views.&lt;/li&gt;
	&lt;li&gt;Even ignoring the previous point, we still potentially read the base table twice if the update mix both row updates and partition/range deletions, potentially re-reading the same values.&lt;/li&gt;
	&lt;li&gt;It&apos;s probably more minor but the reading code is using &lt;tt&gt;QueryPager&lt;/tt&gt;, which is probably an artifact of the initial version of the code being pre-8099, but it&apos;s not necessary anymore (the reads are local and locally we&apos;re completely iterator based), adding, especially when we do page. I&apos;ll note that despite using paging, the current code still buffers everything in &lt;tt&gt;TemporalRow.Set&lt;/tt&gt; anyway .&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Overall, I suspect trying to fix the problems above (particularly the fact that existing deletion infos are ignored) is only going to add complexity with the current code and we&apos;d still have to fix the inefficiencies. So I propose a refactor of that code which does 2 main things:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;it removes all of &lt;tt&gt;TemporalRow&lt;/tt&gt; and related classes. Instead, it directly uses the existing &lt;tt&gt;Row&lt;/tt&gt; (with all its deletion infos) and the update being applied to it and compute the updates for the view from that. I submit that this is more clear/simple, but this also avoid copying every cell of both the existing and update data as a &lt;tt&gt;TemporalCell&lt;/tt&gt;. We can also reuse codes like &lt;tt&gt;Rows.merge&lt;/tt&gt; and &lt;tt&gt;Rows.diff&lt;/tt&gt; to make the handling of deletions relatively painless.&lt;/li&gt;
	&lt;li&gt;instead of dealing with each view one at a time, re-iterating over all updates each time, it iterates over each individual updates once and deal with each view for that update. This makes it more clear that the reads has to care about every view involved, but more importantly allow to deal with the read data incrementally, never buffering it all.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12955247">CASSANDRA-11475</key>
            <summary>MV code refactor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Apr 2016 09:15:59 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:37 +0000</updated>
                            <resolved>Fri, 6 May 2016 11:50:43 +0000</resolved>
                                        <fixVersion>3.0.7</fixVersion>
                    <fixVersion>3.7</fixVersion>
                                    <component>Feature/Materialized Views</component>
                    <component>Legacy/Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15221425" author="slebresne" created="Fri, 1 Apr 2016 09:22:16 +0000"  >&lt;p&gt;The patch for that refactor is below. It passes all tests, including new unit tests introduced in the first commit to demonstrate the 3 consistency issues described above. I also did a quick run of mvbench for comparison on that branch was about 25% faster than trunk on my local box (single local node, though the code change are only about the local part of MV). It&apos;s definitively not a very scientific benchmark though.&lt;/p&gt;

&lt;p&gt;I&apos;ll note that the patch is currently against 3.0 as the primary purpose here is to fix actual bugs and even though it goes a bit beyond just fixing those bugs with the minimum amount of changes possible, I suspect it&apos;s easier to commit this to both 3.0 and trunk. I&apos;ll need to rebase against trunk so I&apos;ll do that a bit later.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;a href=&quot;https://github.com/pcmanus/cassandra/commits/11475-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt; &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-11475-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt; &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-11475-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15262307" author="carlyeks" created="Thu, 28 Apr 2016 15:13:44 +0000"  >&lt;p&gt;Overall, this patch simplifies the code and cleans up and fixes a lot of the places that were rushed due to the time constraints we had, so I&apos;m really happy to see this refactor.&lt;/p&gt;

&lt;p&gt;I&apos;m still going over all of the details (I don&apos;t see anything obviously wrong), but I have a few overall structure comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;We are still going to be holding all of the updates that we generate in memory; this refactor does make the memory footprint lower, but still includes a potential for using up a lot of memory.&lt;/li&gt;
	&lt;li&gt;I think your todo is right about promoting &lt;tt&gt;TableViews&lt;/tt&gt;; I&apos;m not sure if we can completely get rid of &lt;tt&gt;ViewManager&lt;/tt&gt;, since we need something at the &lt;tt&gt;Keyspace&lt;/tt&gt; level, but maybe that stuff can be integrated into Keyspace again&lt;/li&gt;
	&lt;li&gt;I find the &lt;tt&gt;UpdateBuilder&lt;/tt&gt; pattern not to work well here. &lt;tt&gt;ViewUpdateBuilder&lt;/tt&gt; should be building &lt;tt&gt;ViewUpdate}}s, instead of {{Collection&amp;lt;PartitionUpdate&amp;gt;&lt;/tt&gt;, and using the &lt;tt&gt;build&lt;/tt&gt; method at the end seems weird. I see that the mutable state is useful, but doesn&apos;t feel like this really fits the builder pattern; to me, it seems like we&apos;d be better off with not exposing the rows, but I know that this is part of the refactor to remove the way we were reading from disk.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;MultiViewUpdateBuilder&lt;/tt&gt; doesn&apos;t really seem necessary; it seems like it should be part of &lt;tt&gt;ViewManager&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One small thing I noticed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In &lt;tt&gt;TableViews&lt;/tt&gt;, &lt;tt&gt;removeByName&lt;/tt&gt; is empty&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15264106" author="slebresne" created="Fri, 29 Apr 2016 14:15:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;We are still going to be holding all of the updates that we generate in memory; this refactor does make the memory footprint lower, but still includes a potential for using up a lot of memory.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You&apos;re completely right and I don&apos;t any obvious way to avoid this since we rely on all updates to be on the same batchlog mutation. I guess my point was that since we can already have a high footprint, all the more reason to lower it as much as we can.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think your todo is right about promoting TableViews; I&apos;m not sure if we can completely get rid of ViewManager, since we need something at the Keyspace level, but maybe that stuff can be integrated into Keyspace again&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I started moving &lt;tt&gt;TableViews&lt;/tt&gt; to its own class with all the methods that deal with a single base table but I stopped there. I do think we can and should get rid of ViewManager: the 2 only things is does now is dealing with view by names (for addition/removal) and holding the locks. This can probably move to Keyspace but regarding lock I&apos;m actually wondering if it shouldn&apos;t be move to the table level. Is there a reason I&apos;m forgetting why it should be at the keyspace level?  It will require a bit of refactor of Keyspace.apply() though to be clean, which is why I&apos;ve stopped here and I&apos;d rather left that as a follow up (this is only tangentially relevant to the rest of the patch).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I find the UpdateBuilder pattern not to work well here. ViewUpdateBuilder should be building ViewUpdate}}s, instead of {{Collection&amp;lt;PartitionUpdate&amp;gt;, and using the build method at the end seems weird.  &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is that a naming problem? I don&apos;t give that much importance to &quot;patterns&quot; so having it not build a &lt;tt&gt;ViewUpdate&lt;/tt&gt; doesn&apos;t bother me (it still &quot;builds&quot; updates to views). But if you think that&apos;s a bit confusing, I don&apos;t mind renaming to &lt;tt&gt;ViewMutationGenerator&lt;/tt&gt; or something.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;to me, it seems like we&apos;d be better off with not exposing the rows&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure to follow what you mean by that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;MultiViewUpdateBuilder doesn&apos;t really seem necessary; it seems like it should be part of ViewManager&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I guess the idea was that it could have seen reuse some day and didn&apos;t felt like a weird concept per-se, but you&apos;re right that the verbosity is not that justified right now so got rid of it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In &lt;tt&gt;TableViews&lt;/tt&gt;, &lt;tt&gt;removeByName&lt;/tt&gt; is empty&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Indeed. Fixed.&lt;/p&gt;</comment>
                            <comment id="15264206" author="carlyeks" created="Fri, 29 Apr 2016 15:37:59 +0000"  >&lt;blockquote&gt;
&lt;p&gt;You&apos;re completely right and I don&apos;t any obvious way to avoid this since we rely on all updates to be on the same batchlog mutation. I guess my point was that since we can already have a high footprint, all the more reason to lower it as much as we can.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed; definitely a huge improvement to reduce our footprint by 2/3. We should open a ticket to track this; maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; has some idea how we might be able to do this with some batchlog manipulations like writing multiple entries but only setting them as writable when all of the entries are written.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Is that a naming problem? I don&apos;t give that much importance to &quot;patterns&quot; so having it not build a ViewUpdate doesn&apos;t bother me (it still &quot;builds&quot; updates to views). But if you think that&apos;s a bit confusing, I don&apos;t mind renaming to ViewMutationGenerator or something.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think that the &lt;tt&gt;Builder}}s seem like things you would be using if you were interacting with C* from a unit test, or otherwise programmatically building these; not necessarily internal usages. I think {{ViewMutationGenerator&lt;/tt&gt; is more explanatory; &lt;tt&gt;generateViewMutations&lt;/tt&gt; and &lt;tt&gt;build&lt;/tt&gt; don&apos;t really describe to me how the API is supposed to be used. I would have expected &lt;tt&gt;generateViewMutations&lt;/tt&gt; to return the &lt;tt&gt;PartitionUpdate}}s; I guess {{addRow&lt;/tt&gt; and &lt;tt&gt;generateMutations&lt;/tt&gt; would be more descriptive to me.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I&apos;m not sure to follow what you mean by that.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, I was just saying that it would make more sense to be passing in 2 {{Partition}}s, one for the old and one for the merged, but it was impractical. It ends up being a moot point since it is about the API change that was necessary to prevent holding the partitions in memory.&lt;/p&gt;</comment>
                            <comment id="15266630" author="slebresne" created="Mon, 2 May 2016 13:45:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think &lt;tt&gt;ViewMutationGenerator&lt;/tt&gt; is more explanatory; generateViewMutations and build don&apos;t really describe to me how the API is supposed to be used. I would have expected &lt;tt&gt;generateViewMutations&lt;/tt&gt; to return the &lt;tt&gt;PartitionUpdate&lt;/tt&gt; s; I guess &lt;tt&gt;addRow&lt;/tt&gt; and &lt;tt&gt;generateMutations&lt;/tt&gt; would be more descriptive to me.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sgtm, made that change.&lt;/p&gt;</comment>
                            <comment id="15269297" author="carlyeks" created="Tue, 3 May 2016 18:27:07 +0000"  >&lt;p&gt;These changes look good; I kicked off CI again, so assuming cassci is happy, I&apos;m +1.&lt;/p&gt;</comment>
                            <comment id="15273942" author="slebresne" created="Fri, 6 May 2016 11:50:43 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;

&lt;p&gt;(For info, the first run of CI wasn&apos;t happy because I wrote the &lt;tt&gt;removeByName&lt;/tt&gt; method using the iterator &lt;tt&gt;remove()&lt;/tt&gt; method but &lt;tt&gt;COWArrayList&lt;/tt&gt; doesn&apos;t support that. Anyway, that was trivial to fix and after that CI was happy. I also had to rebase on trunk and I re-ran CI to make sure it was happy there too, which it was. Hence the slight delay committing)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12940648">CASSANDRA-11198</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13035319">CASSANDRA-13127</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12981333">CASSANDRA-12044</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13061470">CASSANDRA-13409</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2via7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>carlyeks</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[carlyeks]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>