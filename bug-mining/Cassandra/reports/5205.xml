<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:13:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14948] Backport dropped column checks to 3.0 and 3.11</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14948</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This is a follow on from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14913&quot; title=&quot;Forbid re-adding static columns as regular and vice versa&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14913&quot;&gt;&lt;del&gt;CASSANDRA-14913&lt;/del&gt;&lt;/a&gt; and&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14843&quot; title=&quot;Drop/add column name with different Kind can result in corruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14843&quot;&gt;&lt;del&gt;CASSANDRA-14843&lt;/del&gt;&lt;/a&gt; that introduced some fixes to prevent and mitigate data corruption caused by dropping a column then re-adding it with the same name but an incompatible type (e.g. simple int to a complex map&amp;lt;&amp;gt;)&#160;or different kind (regular/static).&#160;&lt;/p&gt;

&lt;p&gt;This patch backports the checks that now exist in trunk. This does&#160;include adding a column to the dropped_columns table to keep track of static columns like trunk, not sure it we are able to make that change in 3.11.x. &lt;/p&gt;

&lt;p&gt;Also not sure what our stance on backporting just the isValueCompatibleWith check to 3.0 is. I&apos;d be for it since it prevents recreating a simple column as a map (or vice-versa) which will basically always lead to corruption.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C* 3.11.x&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/vincewhite/cassandra/commit/3986b53b8acaf1d3691f9b35fd098a40667c520f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Patch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13207412">CASSANDRA-14948</key>
            <summary>Backport dropped column checks to 3.0 and 3.11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="VincentWhite">Vincent White</assignee>
                                    <reporter username="VincentWhite">Vincent White</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jan 2019 07:27:41 +0000</created>
                <updated>Tue, 16 Jul 2019 18:00:45 +0000</updated>
                            <resolved>Tue, 16 Jul 2019 17:55:43 +0000</resolved>
                                        <fixVersion>3.0.19</fixVersion>
                    <fixVersion>3.11.5</fixVersion>
                                    <component>Cluster/Schema</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16886254" author="iamaleksey" created="Tue, 16 Jul 2019 16:13:54 +0000"  >&lt;p&gt;Hi Vincent.&lt;/p&gt;

&lt;p&gt;I rebased the patch and made 3.0 and 3.11 versions, then made some edits. In particular, I decided to make 3.0 checks stricter than the checks that I put in 4.0: if &lt;tt&gt;kind&lt;/tt&gt; is unknown, don&apos;t assume it&apos;s &lt;tt&gt;regular&lt;/tt&gt;, but instead flat out reject any attempt to recreate, as it&apos;s an inherent risk. Also added some tests.&lt;/p&gt;

&lt;p&gt;3.0: &lt;a href=&quot;https://github.com/iamaleksey/cassandra/tree/14948-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;code&lt;/a&gt;, &lt;a href=&quot;https://circleci.com/workflow-run/f3ee4263-5c51-4f83-a80a-e0993689f57f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt;&lt;br/&gt;
3.11: &lt;a href=&quot;https://github.com/iamaleksey/cassandra/tree/14948-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;code&lt;/a&gt;, &lt;a href=&quot;https://circleci.com/workflow-run/6aa72012-0d18-4e6d-a943-1d7510ca8a8d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The change to type validation had already been made in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15204&quot; title=&quot;Toughen up column drop/recreate validations in 3.0/3.11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15204&quot;&gt;&lt;del&gt;CASSANDRA-15204&lt;/del&gt;&lt;/a&gt; independently, so this change only covers &lt;tt&gt;kind&lt;/tt&gt; validation.&lt;/p&gt;</comment>
                            <comment id="16886350" author="iamaleksey" created="Tue, 16 Jul 2019 17:55:43 +0000"  >&lt;p&gt;Committed to 3.0 as&#160;and &lt;a href=&quot;https://github.com/apache/cassandra/commit/fc862e207b04ed92f15b2129ae7738186ebc6d69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fc862e207b04ed92f15b2129ae7738186ebc6d69&lt;/a&gt; and merged up.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13193916">CASSANDRA-14843</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13200641">CASSANDRA-14913</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
        <customfieldvalue><![CDATA[VincentWhite]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00h1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12342779">3.11.3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333891">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/fc862e207b04ed92f15b2129ae7738186ebc6d69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fc862e207b04ed92f15b2129ae7738186ebc6d69&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>