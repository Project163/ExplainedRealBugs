<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:27:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18540] negotiatedProtocolMustBeAcceptedProtocolTest tests fail with &quot;TLSv1.1 failed to negotiate&quot; on JDK17</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18540</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Note: This depends on having a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18180&quot; title=&quot;bulkLoaderSuccessfullyStreamsOverSsl fails with ClassCastException on JDK17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18180&quot;&gt;&lt;del&gt;CASSANDRA-18180&lt;/del&gt;&lt;/a&gt;, otherwise most/all tests in &lt;tt&gt;NativeTransportEncryptionOptionsTest&lt;/tt&gt; and &lt;tt&gt;InternodeEncryptionOptionsTest&lt;/tt&gt; are failing due to that issue.&lt;/p&gt;

&lt;p&gt;Using the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18180&quot; title=&quot;bulkLoaderSuccessfullyStreamsOverSsl fails with ClassCastException on JDK17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18180&quot;&gt;&lt;del&gt;CASSANDRA-18180&lt;/del&gt;&lt;/a&gt;, the &lt;tt&gt;negotiatedProtocolMustBeAcceptedProtocolTest&lt;/tt&gt; test in both &lt;tt&gt;NativeTransportEncryptionOptionsTest&lt;/tt&gt; and &lt;tt&gt;InternodeEncryptionOptionsTest&lt;/tt&gt; fails with &quot;TLSv1.1 failed to negotiate&quot; on JDK17.&lt;/p&gt;

&lt;p&gt;From what I can see, the &lt;tt&gt;negotiatedProtocolMustBeAcceptedProtocolTest&lt;/tt&gt; is failing because in JDK11 and JDK17 the &quot;TLSv1.1&quot; protocol is disabled.&lt;/p&gt;

&lt;p&gt;Since TLSv1.1 is disabled in JDK11 and 17, one possibility is to change the test to use TLSv1.2 instead of TLSv1.1. That should work directly with JDK11 and 17, since TLSv1.2 is one of the defaults, and it won&apos;t be an issue for JDK8 as that will be dropped.&lt;/p&gt;

&lt;p&gt;Also, I think the point of the &lt;tt&gt;negotiatedProtocolMustBeAcceptedProtocolTest&lt;/tt&gt;&#160;is to test that the&#160;&lt;tt&gt;accepted_protocols&lt;/tt&gt; option is working correctly rather than the choice of&#160;&lt;em&gt;which&lt;/em&gt;&#160;protocol is used. Meaning, I don&#8217;t think the intent was to test TLSv1.1 specifically, rather that the mechanism of accepted protocols works and choosing TLSv1.1 was at the time convenient - but I could be wrong.&lt;/p&gt;

&lt;p&gt;It also seems to me like bit of a coincidence that these tests are currently working on JDK11, at least on CI. Indeed, running locally with JDK11, these fail for me:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ pwd
/Users/dan.jatnieks/apache/cassandra-4.0

$ java -version
openjdk version &quot;11.0.11&quot; 2021-04-20
OpenJDK Runtime Environment AdoptOpenJDK-11.0.11+9 (build 11.0.11+9)
OpenJDK 64-Bit Server VM AdoptOpenJDK-11.0.11+9 (build 11.0.11+9, mixed mode)

$ ant test-jvm-dtest-some -Dtest.name=org.apache.cassandra.distributed.test.NativeTransportEncryptionOptionsTest -Duse.jdk11=true

...

[junit-timeout] Testcase: negotiatedProtocolMustBeAcceptedProtocolTest(org.apache.cassandra.distributed.test.NativeTransportEncryptionOptionsTest):	FAILED
[junit-timeout] Should be possible to establish a TLSv1.1 connection expected:&amp;lt;NEGOTIATED&amp;gt; but was:&amp;lt;FAILED_TO_NEGOTIATE&amp;gt;
[junit-timeout] junit.framework.AssertionFailedError: Should be possible to establish a TLSv1.1 connection expected:&amp;lt;NEGOTIATED&amp;gt; but was:&amp;lt;FAILED_TO_NEGOTIATE&amp;gt;
[junit-timeout] 	at org.apache.cassandra.distributed.test.NativeTransportEncryptionOptionsTest.negotiatedProtocolMustBeAcceptedProtocolTest(NativeTransportEncryptionOptionsTest.java:160)
[junit-timeout] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[junit-timeout] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
[junit-timeout] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I believe these work on CI because of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16848&quot; title=&quot;Latest docker testing image (20210809) does not default support TLSv1 and TLSv1.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16848&quot;&gt;&lt;del&gt;CASSANDRA-16848&lt;/del&gt;&lt;/a&gt; - in that ticket, after 2021-Apr JDK8 dropped TLSv1.1 which led to a fix in &lt;a href=&quot;https://github.com/apache/cassandra-builds/commit/d1a3a0c59b3c5c17697d6a6656cd5d4f3a1cdbe9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cassandra-build&lt;/a&gt; docker code to make sure TLSv1.1 is accepted. &lt;/p&gt;

&lt;p&gt;I say coincidence because this change also makes it work for JDK11 and JDK17, and I&apos;ve been able to verify that making a change locally to the JDK &lt;tt&gt;java.security&lt;/tt&gt; file. I&#8217;m not sure that at the time of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16848&quot; title=&quot;Latest docker testing image (20210809) does not default support TLSv1 and TLSv1.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16848&quot;&gt;&lt;del&gt;CASSANDRA-16848&lt;/del&gt;&lt;/a&gt; it was intended for any JDK versions.&lt;/p&gt;

&lt;p&gt;The point of mentioning this is that if &lt;tt&gt;negotiatedProtocolMustBeAcceptedProtocolTest&lt;/tt&gt; is changed to use TLSv1.2, and support for JDK8 is dropped, then the changes made in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16848&quot; title=&quot;Latest docker testing image (20210809) does not default support TLSv1 and TLSv1.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16848&quot;&gt;&lt;del&gt;CASSANDRA-16848&lt;/del&gt;&lt;/a&gt; could also be reverted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13536924">CASSANDRA-18540</key>
            <summary>negotiatedProtocolMustBeAcceptedProtocolTest tests fail with &quot;TLSv1.1 failed to negotiate&quot; on JDK17</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djatnieks">dan jatnieks</assignee>
                                    <reporter username="djatnieks">dan jatnieks</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 May 2023 00:16:52 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:50 +0000</updated>
                            <resolved>Wed, 14 Jun 2023 18:23:07 +0000</resolved>
                                        <fixVersion>4.0.11</fixVersion>
                    <fixVersion>4.1.3</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>CI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17724461" author="edimitrova" created="Sat, 20 May 2023 01:35:53 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;&#160; (you&apos;ve been looking into &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16848&quot; title=&quot;Latest docker testing image (20210809) does not default support TLSv1 and TLSv1.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16848&quot;&gt;&lt;del&gt;CASSANDRA-16848&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17724981" author="brandon.williams" created="Mon, 22 May 2023 14:41:15 +0000"  >&lt;p&gt;Seems like we should switch to TLS1.2, I know people are disabling 1.1 in their configs as it is.&lt;/p&gt;</comment>
                            <comment id="17725836" author="brandon.williams" created="Wed, 24 May 2023 14:34:22 +0000"  >&lt;p&gt;This is pretty straightforward.  I went ahead and pushed CI with 18180 applied:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18540-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1025/workflows/78efb893-70ee-4f14-bf74-161cc0c4afec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1025/workflows/359e06fe-6d4a-4a15-980b-45628f80a51c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17728176" author="edimitrova" created="Thu, 1 Jun 2023 00:55:01 +0000"  >&lt;p&gt;The &lt;a href=&quot;https://senthilnayagan.medium.com/tlsv1-and-tlsv1-1-protocols-disabled-by-default-in-javas-latest-patch-released-on-april-20-2021-52c309f6b16d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;article&lt;/a&gt; posted in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16848&quot; title=&quot;Latest docker testing image (20210809) does not default support TLSv1 and TLSv1.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16848&quot;&gt;&lt;del&gt;CASSANDRA-16848&lt;/del&gt;&lt;/a&gt; points to disabling it in 8, 11, and 17 but not removing it because there might still be legacy applications that require it.&lt;/p&gt;

&lt;p&gt;I support the below statement from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16848&quot; title=&quot;Latest docker testing image (20210809) does not default support TLSv1 and TLSv1.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16848&quot;&gt;&lt;del&gt;CASSANDRA-16848&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Bq.&#160; Given that users can still use TLSv1 and TLSv1.1 (older JDKs or adjusting the java. security file), I would think it makes sense to keep the tests for now.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I suggest instead adding a comment and quoting the article in the test, so if someone tries to run it locally and it fails, they can quickly figure out what happened.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17730687" author="djatnieks" created="Thu, 8 Jun 2023 19:48:13 +0000"  >&lt;p&gt;Okay, I have made new patches that adds a comment to the test methods:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    /**
     * Tests that the negotiated protocol is the highest common protocol between the client and server.
     * &amp;lt;p&amp;gt; 
     * Note: This test uses TLSV1.1, which is disabled by default in JDK 8 and higher. If the test fails with 
     * FAILED_TO_NEGOTIATE, it may be necessary to check the java.security file in your JDK installation and remove 
     * TLSv1.1 from the jdk.tls.disabledAlgorithms.
     * @see &amp;lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18540&quot;&amp;gt;CASSANDRA-18540&amp;lt;/a&amp;gt;
     * @see &amp;lt;a href=&quot;https://senthilnayagan.medium.com/tlsv1-and-tlsv1-1-protocols-disabled-by-default-in-javas-latest-patch-released-on-april-20-2021-52c309f6b16d&quot;&amp;gt;
     *     TLSv1 and TLSv1.1 Protocols are Disabled in Java!&amp;lt;/a&amp;gt;
     */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;name&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;commit&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;a href=&quot;https://github.com/djatnieks/cassandra/tree/CASSANDRA-18540-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/djatnieks/cassandra/commit/441346d4be05da5819c19c2086c522b5a1b2fe30&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk commit&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/djatnieks/cassandra/tree/CASSANDRA-18540-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0 branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/djatnieks/cassandra/commit/65406161ae56c570fd47a42e61921b841ab6f62d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0 commit&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/djatnieks/cassandra/tree/CASSANDRA-18540-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1 branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/937683e5d5bf374131e06fad8447d70fd99cec7f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1 commit&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17731034" author="edimitrova" created="Fri, 9 Jun 2023 16:59:33 +0000"  >&lt;p&gt;The patch LGTM, +1. Thanks&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;, any objections from you?&lt;/p&gt;</comment>
                            <comment id="17731038" author="brandon.williams" created="Fri, 9 Jun 2023 17:14:55 +0000"  >&lt;p&gt;So we are not going to switch to TLS 1.2 and instead leave a comment why 1.1 is broken? Don&apos;t we want 1.2 covered also?&lt;/p&gt;</comment>
                            <comment id="17731040" author="edimitrova" created="Fri, 9 Jun 2023 17:23:11 +0000"  >&lt;p&gt;Good catch! You are right! I thought we tested one after another both protocols, but now I double-checked, and it needs to be corrected. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Don&apos;t we want 1.2 covered also?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Of course, we do! Let&apos;s add another test variation where we try with TLSv1.2 or amend the current one by accepting both protocols. WDYT? Question for both of you&lt;/p&gt;</comment>
                            <comment id="17731095" author="brandon.williams" created="Fri, 9 Jun 2023 20:44:25 +0000"  >&lt;p&gt;I&apos;m not sure what devil is in the details there, so I will leave it up to the implementer to decide.&lt;/p&gt;</comment>
                            <comment id="17732183" author="djatnieks" created="Tue, 13 Jun 2023 17:16:05 +0000"  >&lt;p&gt;Makes sense to me - I&apos;ve pushed a new commit to each branch below that adds the check for TLSv1.2 to the existing tests. The tests now accept both TLSv1.1 and TLSv1.2.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;name&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;commit&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;a href=&quot;https://github.com/djatnieks/cassandra/tree/CASSANDRA-18540-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/djatnieks/cassandra/commit/93feaa06d2e7fb974ff4e8094b2cdf0d3a9db2b6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk commit&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/djatnieks/cassandra/tree/CASSANDRA-18540-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0 branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/djatnieks/cassandra/commit/8bdfb503f6042c8af8560aac9bbca837eb9670a5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0 commit&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/djatnieks/cassandra/tree/CASSANDRA-18540-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1 branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/ebe4bcfc0feefa6727b7d5f0015fb6ff7215b179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1 commit&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;This patch should work with jdk8 and jdk11 on 4.0, 4.1 and trunk. &lt;/p&gt;

&lt;p&gt;And once &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18180&quot; title=&quot;bulkLoaderSuccessfullyStreamsOverSsl fails with ClassCastException on JDK17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18180&quot;&gt;&lt;del&gt;CASSANDRA-18180&lt;/del&gt;&lt;/a&gt; is complete it should also work with jdk17 - so I think this ticket does not need to be blocked by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18180&quot; title=&quot;bulkLoaderSuccessfullyStreamsOverSsl fails with ClassCastException on JDK17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18180&quot;&gt;&lt;del&gt;CASSANDRA-18180&lt;/del&gt;&lt;/a&gt;. wdyt &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17732271" author="edimitrova" created="Tue, 13 Jun 2023 22:09:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;wdyt &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That looks great, thank you so much &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djatnieks&quot; class=&quot;user-hover&quot; rel=&quot;djatnieks&quot;&gt;djatnieks&lt;/a&gt; ! I also tested locally all branches as I do not think we need to run full CI for these changes. The changes made are limited to the tests. I tested trunk with JDK8 and JDK 11 and with JDK11 and JDK17 with the patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18180&quot; title=&quot;bulkLoaderSuccessfullyStreamsOverSsl fails with ClassCastException on JDK17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18180&quot;&gt;&lt;del&gt;CASSANDRA-18180&lt;/del&gt;&lt;/a&gt;. Everything looks good. I also adjusted the java.security file as per the note during testing.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;, do you mind to review, please?&lt;/p&gt;</comment>
                            <comment id="17732282" author="brandon.williams" created="Tue, 13 Jun 2023 23:14:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;I do not think we need to run full CI for these changes. The changes made are limited to the tests.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, but didn&apos;t think a &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1061/workflows/648e3ed0-32f3-43ff-930e-c05b1bfa9f9e/jobs/29939&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;multiplexer&lt;/a&gt; check on trunk would hurt just to be sure we haven&apos;t introduced any flakiness.  Looks good to me, +1.&lt;/p&gt;</comment>
                            <comment id="17732575" author="edimitrova" created="Wed, 14 Jun 2023 15:13:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;but didn&apos;t think a &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1061/workflows/648e3ed0-32f3-43ff-930e-c05b1bfa9f9e/jobs/29939&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;multiplexer&lt;/a&gt; check on trunk would hurt just to be sure we haven&apos;t introduced any flakiness.&#160;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I was thinking it was pretty deterministic, but you are correct that the world of Cassandra never stops to surprise us. Good call, thanks!&lt;/p&gt;

&lt;p&gt;Starting commit soon&lt;/p&gt;</comment>
                            <comment id="17732681" author="edimitrova" created="Wed, 14 Jun 2023 18:22:39 +0000"  >&lt;p&gt;To &lt;a href=&quot;https://github.com/apache/cassandra&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &lt;a href=&quot;https://github.com/apache/cassandra/commit/c37bcbf7e9d2b3c8ec4e93aa661d358c9f382edf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2fcdaa5b76..c37bcbf7e9&#160; cassandra-4.0 -&amp;gt; cassandra-4.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &lt;a href=&quot;https://github.com/apache/cassandra/commit/622397e7e5a2ab8a0bd902b0155a5379e2bbfab4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1f6b37d189..622397e7e5&#160; cassandra-4.1 -&amp;gt; cassandra-4.1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &lt;a href=&quot;https://github.com/apache/cassandra/commit/a55d4183f507fab7b254a827af0ee6cc821c5674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4f5cb2a6fa..a55d4183f5&#160; trunk -&amp;gt; trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you both!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13520116">CASSANDRA-18180</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[djatnieks]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12990" cascade-level="1"><![CDATA[Test Failure]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12970"><![CDATA[Unit Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311120" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>CASSANDRA-16895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1i0lk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
        <customfieldvalue><![CDATA[e.dimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/c37bcbf7e9d2b3c8ec4e93aa661d358c9f382edf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/c37bcbf7e9d2b3c8ec4e93aa661d358c9f382edf&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Patch: &lt;a href=&quot;https://github.com/djatnieks/cassandra/tree/CASSANDRA-18540-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/djatnieks/cassandra/tree/CASSANDRA-18540-trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;PR: &lt;a href=&quot;https://github.com/apache/cassandra/pull/2359&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2359&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CI: TBD because has dependency on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18180&quot; title=&quot;bulkLoaderSuccessfullyStreamsOverSsl fails with ClassCastException on JDK17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18180&quot;&gt;&lt;del&gt;CASSANDRA-18180&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>