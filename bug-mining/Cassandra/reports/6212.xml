<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:26:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18153] Memtable being flushed without hostId in version &quot;me&quot; and newer during CommitLogReplay</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18153</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;On ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16619&quot; title=&quot;Loss of commit log data possible after sstable ingest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16619&quot;&gt;&lt;del&gt;CASSANDRA-16619&lt;/del&gt;&lt;/a&gt; some files were changed to allow Cassandra to store HostID in the new &quot;me&quot; SSTable version.&lt;/p&gt;

&lt;p&gt;But SSTables flushed during CommitLogReplay miss this HostID info.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In the next Cassandra startup, if these SSTables were still present, system.log will show:&lt;/p&gt;


&lt;p&gt;&lt;tt&gt;WARN Origin of 3 sstables is unknown or doesn&apos;t match the local node; commitLogIntervals for them were ignored&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;WARN }}{{{}Origin of 3 sstables is unknown or doesn&apos;t match the local node; commitLogIntervals for them were ignored&lt;/tt&gt;{&lt;tt&gt;}&lt;/tt&gt;&lt;tt&gt;&#160;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And debug.log will show a list of SSTables, witch can include &quot;md&quot; and &quot;me&quot; version (before upgradesstables):&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Ignored commitLogIntervals from the following sstables: &lt;span class=&quot;error&quot;&gt;&amp;#91;/var/lib/cassandra/data/system/compaction_history-b4dbb7b4dc493fb5b3bfce6e434832ca/me-3-big-Data.db, /var/lib/cassandra/data/system/compaction_history-b4dbb7b4dc493fb5b3bfce6e434832ca/md-1-big-Data.db, /var/lib/cassandra/data/system/compaction_history-b4dbb7b4dc493fb5b3bfce6e434832ca/md-2-big-Data.db&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16619&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-16619&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13517919">CASSANDRA-18153</key>
            <summary>Memtable being flushed without hostId in version &quot;me&quot; and newer during CommitLogReplay</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abonacin">Adriano Bonacin</assignee>
                                    <reporter username="abonacin">Adriano Bonacin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jan 2023 19:43:10 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:53 +0000</updated>
                            <resolved>Fri, 31 Mar 2023 15:44:04 +0000</resolved>
                                        <fixVersion>3.0.29</fixVersion>
                    <fixVersion>3.11.15</fixVersion>
                    <fixVersion>4.0.9</fixVersion>
                    <fixVersion>4.1.2</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>Local/SSTable</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="13200">3h 40m</timespent>
                                <comments>
                            <comment id="17676307" author="edimitrova" created="Thu, 12 Jan 2023 19:45:26 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17676316" author="JIRAUSER294901" created="Thu, 12 Jan 2023 19:59:12 +0000"  >&lt;p&gt;Storage service is not yet initiated during CommitLogReplay and MetadataCollection calls StorageService.instance.getLocalHostUUID.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/io/sstable/metadata/MetadataCollector.java#L127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/io/sstable/metadata/MetadataCollector.java#L127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;public MetadataCollector(ClusteringComparator comparator)&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; {&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; this(comparator, StorageService.instance.getLocalHostUUID());&lt;/tt&gt;&lt;br/&gt;
{{&#160; &#160; }}}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;StorageService.instance.getLocalHostUUID() will return null and all Memtables will be flushed without this information.&lt;/p&gt;

&lt;p&gt;Next time cassandra starts and these SStables are present, this test will fail because originatingHostId is null:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/commitlog/CommitLogReplayer.java#L337&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/commitlog/CommitLogReplayer.java#L337&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; &#160; &#160; &#160; &#160; UUID originatingHostId = reader.getSSTableMetadata().originatingHostId;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; &#160; &#160; if (originatingHostId != null &amp;amp;&amp;amp; originatingHostId.equals(localhostId))&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; builder.addAll(reader.getSSTableMetadata().commitLogIntervals);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; &#160; &#160; else&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; skippedSSTables.add(reader.getFilename());&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I thought of implementing it using same strategy as CommitLog.java&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/commitlog/CommitLog.java#L211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/commitlog/CommitLog.java#L211&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; &#160; &#160; Optional.ofNullable(StorageService.instance.getLocalHostUUID()).orElseGet(SystemKeyspace::getLocalHostId);&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17677397" author="JIRAUSER294901" created="Mon, 16 Jan 2023 13:49:46 +0000"  >&lt;p&gt;In fact there are some SYSTEM.LOCAL&apos;s memtables flushed before Storage service got initialized.&#160;&lt;/p&gt;

&lt;p&gt;These SSTables also have missing Host UUID information.&lt;/p&gt;</comment>
                            <comment id="17679891" author="smiklosovic" created="Mon, 23 Jan 2023 16:52:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2096/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2096/files&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17679892" author="smiklosovic" created="Mon, 23 Jan 2023 16:54:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abonacin&quot; class=&quot;user-hover&quot; rel=&quot;abonacin&quot;&gt;abonacin&lt;/a&gt;, to comment on your last comment: &lt;em&gt;In fact there are some SYSTEM.LOCAL&apos;s memtables flushed before Storage service got initialized.  These SSTables also have missing Host UUID information.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Do you think this is something which could be included in this patch? Or does your patch solves this already?&lt;/p&gt;</comment>
                            <comment id="17679897" author="JIRAUSER294901" created="Mon, 23 Jan 2023 17:03:06 +0000"  >&lt;p&gt;Hi. It&apos;s just another scenario where we have this issue but this patch will address both.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Always we have a memtable being flushed before StorageService initialization, SSTable are created without HostUUID.&lt;/p&gt;

&lt;p&gt;SSTables are flushed during CommigLogReplay (Keyspaces with mutations on CommitLog). But specifically for system.local, we also have flushes before &#160;StorageService initialization.&lt;/p&gt;

&lt;p&gt;This Patch will correct HostUUID returned by MetadataCollector before StorageService initialization.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17680329" author="jlewandowski" created="Tue, 24 Jan 2023 19:23:40 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abonacin&quot; class=&quot;user-hover&quot; rel=&quot;abonacin&quot;&gt;abonacin&lt;/a&gt;, thank you for working on this bug.&lt;/p&gt;

&lt;p&gt;I&apos;m wondering if is there any case where just calling &lt;tt&gt;SystemKeyspace.getLocalHostId&lt;/tt&gt; would be incorrect? All in all, could you add an assertion on that the ultimately obtained host id is not null?&lt;/p&gt;

&lt;p&gt;Another thing is that complaining about missing host id for local strategy sstables is somehow dumb :/&lt;/p&gt;</comment>
                            <comment id="17680348" author="smiklosovic" created="Tue, 24 Jan 2023 20:29:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abonacin&quot; class=&quot;user-hover&quot; rel=&quot;abonacin&quot;&gt;abonacin&lt;/a&gt; I have added a reproducer here.&lt;/p&gt;

&lt;p&gt;When I run the test, it will print this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/tmp/dtests4687378434417513292/node1/data0/system/local-7ad54392bcdd35a684174e047860b377/nb-2-big -&amp;gt; 00000000-0000-4000-8000-000000000001
/tmp/dtests4687378434417513292/node1/data0/system/local-7ad54392bcdd35a684174e047860b377/nb-1-big -&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
local host id -&amp;gt; 00000000-0000-4000-8000-000000000001
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So you see that for the first SSTable of system.local, it will still print null, only the second table is correctly set on originating id so your fix is actually not fixing it?&lt;/p&gt;

&lt;p&gt;If we do this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; MetadataCollector(ClusteringComparator comparator)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(comparator, Optional.ofNullable(StorageService.instance.getLocalHostUUID()).orElseGet(SystemKeyspace::getLocalHostId));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;if StorageService.instance.getLocalHostUUID() is null, it will call SystemKeyspace::getLocalHostId, but the problem is that the implementation of that method reads data on disk:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Read the host ID from the system keyspace.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; UUID getLocalHostId()
    {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; req = &lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT host_id FROM system.%s WHERE key=&lt;span class=&quot;code-quote&quot;&gt;&apos;%s&apos;&lt;/span&gt;&quot;&lt;/span&gt;;
        UntypedResultSet result = executeInternal(format(req, LOCAL, LOCAL));

        &lt;span class=&quot;code-comment&quot;&gt;// Look up the Host UUID (&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; it &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; found)
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (result != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !result.isEmpty() &amp;amp;&amp;amp; result.one().has(&lt;span class=&quot;code-quote&quot;&gt;&quot;host_id&quot;&lt;/span&gt;))
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result.one().getUUID(&lt;span class=&quot;code-quote&quot;&gt;&quot;host_id&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But here it returns null and the reason for that is that when the very first SSTable for system.local is going to be written, there is no SSTable in system.local yet, so it has nowhere to read that id from.&lt;/p&gt;

&lt;p&gt;The solution to this would be to cache host id so if &quot;getLocalHostId&quot; returns null, we would set it via &quot;setLocalHostId&quot; or similar (I am just shooting the ideas here ... might be done differently).&lt;/p&gt;

&lt;p&gt;I was trying to use &quot;SystemKeyspace.getOrInitializeLocalHostId&quot; but the test was stuck as I think it was in the loop because it was reading non-existing / empty table yet and then it tried to persist generated uuid ....&lt;/p&gt;

&lt;p&gt;(1) &lt;a href=&quot;https://github.com/instaclustr/cassandra/commit/1b17b5191e303b76d9d2888c08934e2520c46291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/instaclustr/cassandra/commit/1b17b5191e303b76d9d2888c08934e2520c46291&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17680524" author="smiklosovic" created="Wed, 25 Jan 2023 10:04:40 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abonacin&quot; class=&quot;user-hover&quot; rel=&quot;abonacin&quot;&gt;abonacin&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think I fixed what I wrote yesterday here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2113/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2113/files&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Now test always returns this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/tmp/dtests8231883753452384466/node1/data0/system/local-7ad54392bcdd35a684174e047860b377/nb-2-big -&amp;gt; 00000000-0000-4000-8000-000000000001
/tmp/dtests8231883753452384466/node1/data0/system/local-7ad54392bcdd35a684174e047860b377/nb-1-big -&amp;gt; 00000000-0000-4000-8000-000000000001
local host id -&amp;gt; 00000000-0000-4000-8000-000000000001
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What do you think?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt; I think that there is slight advantage of using it like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abonacin&quot; class=&quot;user-hover&quot; rel=&quot;abonacin&quot;&gt;abonacin&lt;/a&gt; suggested because if we did SystemKeyspace.getLocalHostId only, we would need to go to disk / execute query every single time instead of just reading it from memory, basically.&lt;/p&gt;</comment>
                            <comment id="17681812" author="smiklosovic" created="Sun, 29 Jan 2023 23:22:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; what do you think about my patch which builds on what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abonacin&quot; class=&quot;user-hover&quot; rel=&quot;abonacin&quot;&gt;abonacin&lt;/a&gt; did? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt; I would appreciate your second look too.&lt;/p&gt;

&lt;p&gt;edit: this ticket is about table format &quot;me&quot;. I read this in BigFormat class:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// me (3.0.25, 3.11.11): added hostId of the node from which the sstable originated&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So this should be probably done in 3.0.x included up?&lt;/p&gt;</comment>
                            <comment id="17682270" author="JIRAUSER294901" created="Mon, 30 Jan 2023 20:45:24 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Sorry for delayed reply.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I got your point. It&apos;s true, since we don&apos;t have defined HostUUID we will produce first SSTable without this info.&lt;/p&gt;

&lt;p&gt;I just found this issue, tested a very limited scope and I&apos;m trying to help with a quick fix.&lt;/p&gt;

&lt;p&gt;Thanks for your detailed explanation.&#160;&lt;/p&gt;</comment>
                            <comment id="17682273" author="brandon.williams" created="Mon, 30 Jan 2023 20:53:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;So this should be probably done in 3.0.x included up?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, since &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16619&quot; title=&quot;Loss of commit log data possible after sstable ingest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16619&quot;&gt;&lt;del&gt;CASSANDRA-16619&lt;/del&gt;&lt;/a&gt; affects them.&lt;/p&gt;</comment>
                            <comment id="17682411" author="jlewandowski" created="Tue, 31 Jan 2023 07:15:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt; I&apos;m worried that in the newest patch there is a chance we will end up with different host ids in sstables and system keyspace. Maybe there is a way to enforce certain order of operations?&lt;/p&gt;</comment>
                            <comment id="17682562" author="smiklosovic" created="Tue, 31 Jan 2023 13:06:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt; thanks for the feedback. I modified the PR to reflect your worries. I am not saying it is bulletproof but the main idea behind the latest changes is that I tried to do it in such a way that if somebody reads these values they can not be written and vice versa - achieved by ReentrantReadWriteLock (there will be probably still some bugs in there we can work out but as POC to review it is good enough, probably).&lt;/p&gt;</comment>
                            <comment id="17682719" author="smiklosovic" created="Tue, 31 Jan 2023 19:37:22 +0000"  >&lt;p&gt;It is failing a lot of tests in Circle. No reason to review it until I fix that.&lt;/p&gt;</comment>
                            <comment id="17687271" author="JIRAUSER294901" created="Fri, 10 Feb 2023 20:31:06 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Is it failing because of your new changes?&lt;/p&gt;

&lt;p&gt;If yes, can you consider proceed just with my update since it&apos;s a just a single line change which can benefit some live cluster?&lt;/p&gt;

&lt;p&gt;Can you share how to check Circle, please? I want to help but I&apos;m new in this world.&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;</comment>
                            <comment id="17700151" author="jlewandowski" created="Tue, 14 Mar 2023 13:01:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abonacin&quot; class=&quot;user-hover&quot; rel=&quot;abonacin&quot;&gt;abonacin&lt;/a&gt; can you provide a full reproduce example?&lt;/p&gt;</comment>
                            <comment id="17700237" author="jlewandowski" created="Tue, 14 Mar 2023 14:52:40 +0000"  >&lt;p&gt;I don&apos;t know exactly how to reproduce this, but assuming this is a possible scenario, I want to propose a mix of something brought by all of us. In particular:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;in all the places where we try to get host id, we try first from token metadata and then from system.local&lt;/li&gt;
	&lt;li&gt;if we start a fresh instance (that is, there is no commit log files to replay), we conditionally create a host id in the system.local table and flush that table; we do that along with storing other local node metadata, before touching schema or the commit log&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With that, we are guaranteed that host id is stored in sstable and not as a mutation in the commit log before we actually start to replay anything.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2215&lt;/a&gt; (3.11)&lt;/p&gt;</comment>
                            <comment id="17700392" author="JIRAUSER294901" created="Tue, 14 Mar 2023 21:47:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt;&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
I have two nodes:&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@ip-20-0-1-182 ~&amp;#93;&lt;/span&gt;# nodetool status&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Datacenter: datacenter1&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;=======================&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Status=Up/Down&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;|/ State=Normal/Leaving/Joining/Moving&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;-- &#160;Address &#160; &#160; Load &#160; &#160; &#160; Tokens &#160; &#160; &#160; Owns (effective) &#160;Host ID &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Rack&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;UN &#160;20.0.1.182 &#160;66.2 KiB &#160; 2 &#160; &#160; &#160; &#160; &#160; &#160;100.0% &#160; &#160; &#160; &#160; &#160; &#160;1b0c03de-e885-4028-99c9-24122146f07d &#160;rack1&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;UN &#160;20.0.1.239 &#160;66.2 KiB &#160; 2 &#160; &#160; &#160; &#160; &#160; &#160;100.0% &#160; &#160; &#160; &#160; &#160; &#160;c54cf0ab-cf6e-46ce-9ebe-86b254fe5606 &#160;rack1&lt;/tt&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
Creating a keyspace + table and writing something (wait to commitlog be flushed to disk if commitlog_sync is periodic):&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@ip-20-0-1-182 ~&amp;#93;&lt;/span&gt;# cqlsh $HOSTNAME&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Connected to AnsibleLab at ip-20-0-1-182.ec2.internal:9042.&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;cqlsh 5.0.1 | Cassandra 3.11.13 | CQL spec 3.4.4 | Native protocol v4&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Use HELP for help.&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;cqlsh&amp;gt; CREATE KEYSPACE abonacin WITH replication = {&apos;class&apos;: &apos;NetworkTopologyStrategy&apos;, &apos;datacenter1&apos;: 2};&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;cqlsh&amp;gt; CREATE TABLE abonacin.emp (&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;... emp_id int PRIMARY KEY,&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;... emp_city text,&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;... emp_name text,&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;... emp_phone varint,&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;... emp_sal varint,&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;... emp_hiredate date&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;... );&lt;/tt&gt;&lt;/p&gt;


&lt;p&gt;&lt;tt&gt;cqlsh&amp;gt; insert into abonacin.emp (emp_id, emp_city, emp_name, emp_phone, emp_sal, emp_hiredate) values (1584, &apos;KVXKAAOHYH&apos;, &apos;KLEMTXEDBDIF&apos;, 60457532, 1000, &apos;2022-08-25&apos;);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;cqlsh&amp;gt; select * from abonacin.emp;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160;emp_id | emp_city &#160; | emp_hiredate | emp_name &#160; &#160; | emp_phone | emp_sal&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;-------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;----------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;---------&lt;del&gt;+&lt;/del&gt;--------&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160;1584 | KVXKAAOHYH | &#160; 2022-08-25 | KLEMTXEDBDIF | &#160;60457532 | &#160; &#160;1000&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Now I&apos;ll kill -9 java process on the other node and restart cassandra service:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@ip-20-0-1-239 ~&amp;#93;&lt;/span&gt;# tail -f /var/log/cassandra/debug.log | grep &quot;Ignored commitLogIntervals from the following sstables&quot; | grep abonacin &amp;amp;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@ip-20-0-1-239 ~&amp;#93;&lt;/span&gt;# ps -ef | grep -v grep | grep java | awk &apos;{print $2}&apos; | xargs kill -9&lt;/tt&gt;&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@ip-20-0-1-239 ~&amp;#93;&lt;/span&gt;# systemctl restart cassandra&lt;/tt&gt;&lt;/p&gt;


&lt;p&gt;&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
And I see this:&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@ip-20-0-1-239 ~&amp;#93;&lt;/span&gt;# DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2023-03-14 21:25:46,486 CommitLogReplayer.java:254 - Ignored commitLogIntervals from the following sstables: &lt;span class=&quot;error&quot;&gt;&amp;#91;/var/lib/cassandra/data/abonacin/emp-ee4bec70c2ac11ed85b715ea429a0971/me-1-big-Data.db&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
What I found is that Storage Service is not yet available during CommigLogReplay (not sure if it is always starts after commitlog replay or it&apos;s just a coincidence). The following &lt;ins&gt;StorageService.instance.getLocalHostUUID()&lt;/ins&gt; returns &lt;em&gt;null&lt;/em&gt;.&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;tt&gt;private static UUID getLocalHostId()&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; {&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; return StorageService.instance.getLocalHostUUID();&lt;/tt&gt;&lt;br/&gt;
{{&#160; &#160; }}}&lt;br/&gt;
&#160;&lt;br/&gt;
I also find that{{&#160;&lt;ins&gt;Optional.ofNullable(StorageService.instance.getLocalHostUUID()).orElseGet(SystemKeyspace::getLocalHostId)&lt;/ins&gt;}} returns the correct host uuid. This why I chose this approach instead of yours.&lt;br/&gt;
&#160;&lt;br/&gt;
It&apos;s also worth to mention that it&apos;s the first time I tried to suggest a PR and I don&apos;t have enough familiarity with all the context involved. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17700408" author="jlewandowski" created="Tue, 14 Mar 2023 22:30:16 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abonacin&quot; class=&quot;user-hover&quot; rel=&quot;abonacin&quot;&gt;abonacin&lt;/a&gt; for the explanation. The PR mentioned about includes your fix, I&apos;ve just pushed that down to &lt;tt&gt;StorageService&lt;/tt&gt;. &lt;br/&gt;
Another thing is to ensure that &lt;tt&gt;SystemKeyspace.getLocalHostId&lt;/tt&gt; will never return null - that&apos;s the other part of the PR.&lt;/p&gt;</comment>
                            <comment id="17700709" author="jlewandowski" created="Wed, 15 Mar 2023 14:30:01 +0000"  >&lt;p&gt;I think it can be reviewed at this point.&lt;/p&gt;</comment>
                            <comment id="17700743" author="beobal" created="Wed, 15 Mar 2023 15:35:15 +0000"  >&lt;p&gt;I wanted to mention that in CEP-21 we&apos;re proposing to move the responsibility for assigning host identifiers from the local node itself to a cluster wide service. For compatibility, we have been representing these as UUIDs so that they can be used everywhere a host id is currently but this was intended as a temporary measure to make development more straightforward. Actually, these node ids are simple ints based on a global counter and one part of the remaining work on CEP-21 is to migrate to these fully.&lt;/p&gt;

&lt;p&gt;Of course, for upgrades we will need to retain a mapping between old and new ids to process hints and this is also marked as a todo.&lt;/p&gt;

&lt;p&gt;Nothing in the &lt;tt&gt;cep-21-tcm&lt;/tt&gt; branch solves the problem described in this ticket, but something along the lines of what Jacek suggested sounds reasonable and feasible. I just wanted to mention this here in case you had chance to factor it the thinking about this ticket.&lt;/p&gt;

&lt;p&gt;Here&apos;s where we set the host id (including the updating from the old to new id in an upgrade, currently unfriendly to hints): &lt;a href=&quot;https://github.com/apache/cassandra/blob/cep-21-tcm/src/java/org/apache/cassandra/tcm/transformations/Register.java#L123&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cep-21-tcm/src/java/org/apache/cassandra/tcm/transformations/Register.java#L123&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17700759" author="smiklosovic" created="Wed, 15 Mar 2023 15:56:07 +0000"  >&lt;p&gt;Thanks for the explanation, Sam. I think it will be better if we wait for this work in trunk so we do not need to fix that after it. (or you when integrating cep 21).&lt;/p&gt;

&lt;p&gt;But we still need to fix it for older branches, don&apos;t we? So what about fixing this in everything but trunk and we do it in trunk &quot;the proper way&quot;?&#160;&lt;/p&gt;

&lt;p&gt;Reading it more closely: &quot;Nothing in the &lt;tt&gt;cep-21-tcm&lt;/tt&gt; branch solves the problem described in this ticket&quot; ... yeah well ... what do you think, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt; ? Still good for trunk, after all?&lt;/p&gt;</comment>
                            <comment id="17700773" author="beobal" created="Wed, 15 Mar 2023 16:35:20 +0000"  >&lt;p&gt;In &lt;tt&gt;cep-21-tcm&lt;/tt&gt; we will 100% have a similar problem and what Jacek proposed sounds sensible, so I&apos;m not suggesting to &lt;em&gt;not&lt;/em&gt; fix this in trunk. In the CEP branch, we will just have to look in slightly different places for pre-existing ids (TokenMetadata is completely gone, for instance). For brand new instances, how we deal with &quot;conditionally create a host id...before touching schema or the commit log&quot; is more of a question and something we need to consider.   &lt;/p&gt;</comment>
                            <comment id="17700807" author="jlewandowski" created="Wed, 15 Mar 2023 18:17:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt; can I consider it as your review +1 on that?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt; - are you ok with the fix?&lt;/p&gt;</comment>
                            <comment id="17700813" author="beobal" created="Wed, 15 Mar 2023 18:28:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt;&#160;, I&apos;m afraid I haven&apos;t looked at the actual PR yet, I was going only from your comments here. I&apos;ll do my best to check it out tomorrow, but don&apos;t block on that.&lt;/p&gt;</comment>
                            <comment id="17700856" author="jlewandowski" created="Wed, 15 Mar 2023 20:34:52 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt;, frankly the PR has only few locs &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17701089" author="beobal" created="Thu, 16 Mar 2023 11:00:31 +0000"  >&lt;p&gt;I think it would be generally useful to add a dtest that verifies the sstable metadata once the node is fully started in the 2 cases: &#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a new node joins&lt;/li&gt;
	&lt;li&gt;an existing node restarts &amp;amp; replays log segments?&lt;br/&gt;
This would also help a lot when we come to address this in the CEP-21 branch, so we can check whatever we do there is equivalent.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also, it&apos;s an issue from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16619&quot; title=&quot;Loss of commit log data possible after sstable ingest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16619&quot;&gt;&lt;del&gt;CASSANDRA-16619&lt;/del&gt;&lt;/a&gt; really, but I was surprised that the originating host id isn&apos;t shown in &lt;tt&gt;sstablemetadata&lt;/tt&gt; output, so the only way to check this is by using the debugger (or by triggering the bug). We should add it there, if not for older branches then at least in trunk as the output is already changed by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18134&quot; title=&quot;Improve handling of min/max clustering in sstable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18134&quot;&gt;&lt;del&gt;CASSANDRA-18134&lt;/del&gt;&lt;/a&gt;. &#160;&lt;/p&gt;</comment>
                            <comment id="17701551" author="jlewandowski" created="Fri, 17 Mar 2023 07:42:42 +0000"  >&lt;p&gt;Thank you for feedback. I&apos;ll try to add a dtest and address the missing host id in metadata output.&lt;/p&gt;</comment>
                            <comment id="17701598" author="jlewandowski" created="Fri, 17 Mar 2023 09:32:17 +0000"  >&lt;p&gt;Unfortunately it will have to be a Python DTest, JVM dtests have its startup code very different to what is really used when you start Cassandra.&lt;/p&gt;</comment>
                            <comment id="17701613" author="beobal" created="Fri, 17 Mar 2023 09:50:50 +0000"  >&lt;p&gt;Yeah, that&apos;s true although we have made some progress toward bringing the JVM dtest startup in line with the real code in the &lt;tt&gt;cep-21-tcm&lt;/tt&gt; branch. A python test would work well in the first instance though and we can look to port it later. Thanks! &lt;/p&gt;</comment>
                            <comment id="17701725" author="jlewandowski" created="Fri, 17 Mar 2023 13:09:23 +0000"  >&lt;p&gt;Please have a look at these tests: &lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra-dtest/pull/216&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17701771" author="smiklosovic" created="Fri, 17 Mar 2023 14:00:23 +0000"  >&lt;p&gt;dtest looks good to me.&lt;/p&gt;</comment>
                            <comment id="17701794" author="beobal" created="Fri, 17 Mar 2023 14:19:08 +0000"  >&lt;p&gt;lgtm too&lt;/p&gt;</comment>
                            <comment id="17701986" author="jlewandowski" created="Fri, 17 Mar 2023 20:20:59 +0000"  >&lt;p&gt;Tests show something interesting - &lt;tt&gt;CQLSSTableWriter&lt;/tt&gt; - it is a client application so it should not try to read data from sstables, in particular, from &lt;tt&gt;system.local&lt;/tt&gt;. It stored &lt;tt&gt;null&lt;/tt&gt; as a host ID and I will leave it as it is - that is, in order to fix the test, &lt;tt&gt;getLocalHostId&lt;/tt&gt; will not go to &lt;tt&gt;system.local&lt;/tt&gt; if the system is running in client mode.&lt;/p&gt;
</comment>
                            <comment id="17701997" author="jlewandowski" created="Fri, 17 Mar 2023 20:48:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/628/workflows/93a1362e-f205-4d60-a46f-64fb375b695e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/628/workflows/93a1362e-f205-4d60-a46f-64fb375b695e&lt;/a&gt; (3.0)&lt;/p&gt;</comment>
                            <comment id="17702463" author="jlewandowski" created="Mon, 20 Mar 2023 06:51:56 +0000"  >&lt;p&gt;3.0 - &lt;a href=&quot;https://github.com/apache/cassandra/pull/2234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;, &lt;br/&gt;
&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2363/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;3.11 - &lt;a href=&quot;https://github.com/apache/cassandra/pull/2215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;, &lt;br/&gt;
&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2364/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;4.0 - &lt;a href=&quot;https://github.com/apache/cassandra/pull/2231&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;, &lt;br/&gt;
&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2373/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, &lt;br/&gt;
fixed just two unit tests, so rerunning the unit tests only: &lt;br/&gt;
&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch-test/1775/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;regular&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;,&lt;br/&gt;
&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch-test-cdc/1755/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cdc&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, &lt;br/&gt;
&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch-test-compression/1761/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;compression&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
since some other unrelated unit test failed for CDC, I did repeatable runs in &lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/644/workflows/42afa702-4500-46f3-96d6-b2e14f5e1b75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;4.1 - &lt;a href=&quot;https://github.com/apache/cassandra/pull/2232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;,&lt;br/&gt;
&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2378/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
there are failures in one jvm-dtest, the test was fixed and rerun in CircleCI, &lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/648/workflows/0ff558cc-e975-4646-90ee-762d3799994c/jobs/6437&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1&lt;/a&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/648/workflows/0ff558cc-e975-4646-90ee-762d3799994c/jobs/6438&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/648/workflows/1aa7cde3-7845-4672-9a46-f177797e9f59/jobs/6441&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/648/workflows/1aa7cde3-7845-4672-9a46-f177797e9f59/jobs/6440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;5.0 - &lt;a href=&quot;https://github.com/apache/cassandra/pull/2233&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;,&lt;br/&gt;
&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2384/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;p&gt;dtest - &lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17703999" author="beobal" created="Thu, 23 Mar 2023 09:11:14 +0000"  >&lt;p&gt;Just FYI but it seems to me that &lt;tt&gt;SSTableIdGenerationTest&lt;/tt&gt; depends in some degree on this broken behaviour. It seems to rely on the local host id being unavailable when the node restarts (at least in that test), which causes the mutations in the commitlog that have already been flushed to be replayed as the null local host id doesn&apos;t match the actual one in&lt;br/&gt;
the sstable metadata.&lt;/p&gt;</comment>
                            <comment id="17704003" author="jlewandowski" created="Thu, 23 Mar 2023 09:26:36 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt; - the test takes that into account rather than rely on that. I was initially confused that I needed to expect one more sstable that I thought. Now the number of expected sstables match the number of flushes which is good I think.&lt;/p&gt;</comment>
                            <comment id="17704076" author="beobal" created="Thu, 23 Mar 2023 11:10:05 +0000"  >&lt;p&gt;Yep, it had me scratching my head a bit when working on the TCM branch because there the host ID is available when the replay happens, so the test stared failing.&lt;/p&gt;</comment>
                            <comment id="17705273" author="smiklosovic" created="Mon, 27 Mar 2023 09:56:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17705406" author="jlewandowski" created="Mon, 27 Mar 2023 15:32:59 +0000"  >&lt;p&gt;the latest rerun of jvm dtests:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/663/workflows/1c1c11a0-e202-4824-8a1b-995bb0d32a6a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/663/workflows/1c1c11a0-e202-4824-8a1b-995bb0d32a6a&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/664/workflows/0aced992-fb32-468c-85fb-183a8f5e240e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/664/workflows/0aced992-fb32-468c-85fb-183a8f5e240e&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/660/workflows/5daa9ea1-5c62-40bf-a3e9-80d8420c6f4c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/660/workflows/5daa9ea1-5c62-40bf-a3e9-80d8420c6f4c&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/660/workflows/56cf5ddc-5bfe-4c4d-809c-0eed7b88a13b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/660/workflows/56cf5ddc-5bfe-4c4d-809c-0eed7b88a13b&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/659/workflows/6f4cb147-11b1-40b7-a5b2-4f4ef3666ce3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/659/workflows/6f4cb147-11b1-40b7-a5b2-4f4ef3666ce3&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/659/workflows/aeb7abc6-b97d-4faf-9c43-d80419d23c08&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/659/workflows/aeb7abc6-b97d-4faf-9c43-d80419d23c08&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/661/workflows/8dce1230-b9ab-4b10-a87e-dec6548c1ce7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/661/workflows/8dce1230-b9ab-4b10-a87e-dec6548c1ce7&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;the only failing tests are those recognized as flakies&lt;/p&gt;</comment>
                            <comment id="17705418" author="jlewandowski" created="Mon, 27 Mar 2023 15:51:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt; I&apos;m basically ready to merge it, if you have any objections please let me know. I know it is going to be largely overwritten by TCM, but we have to have something for now. &lt;/p&gt;</comment>
                            <comment id="17705926" author="beobal" created="Tue, 28 Mar 2023 10:14:06 +0000"  >&lt;p&gt;Nope, no objections from me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17707622" author="michaelsembwever" created="Sun, 2 Apr 2023 08:30:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt;, the commit in trunk to CHANGES.txt is incorrect.&lt;/p&gt;

&lt;p&gt;In trunk there are no &quot;Merge from&#8230;&quot; sections. The change should go under the 4.1.2 section (and nothing under 5.0). When the first 5.0 release happens it is presumed (and understood) that all 4.1.x changes found in that same CHANGES.txt file are included.&lt;/p&gt;

&lt;p&gt;ref: &lt;a href=&quot;https://github.com/apache/cassandra/commit/e07b8dfe8dc142356223e71e438c77ffe97140c1#diff-59130575b4fb2932c957db2922977d7d89afb0b2085357db1a14615a2fcad776R127-R131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/e07b8dfe8dc142356223e71e438c77ffe97140c1#diff-59130575b4fb2932c957db2922977d7d89afb0b2085357db1a14615a2fcad776R127-R131&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;There was a recent discussion in slack to clarify this common misunderstanding (and tribal knowledge).&lt;br/&gt;
ref: &lt;a href=&quot;https://the-asf.slack.com/archives/CK23JSY2K/p1679496071133719&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://the-asf.slack.com/archives/CK23JSY2K/p1679496071133719&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ninja fix has been committed: &lt;a href=&quot;https://github.com/apache/cassandra/commit/4effa4efbe456d2f5335ef4b6db39804eab21042&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/4effa4efbe456d2f5335ef4b6db39804eab21042&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also, why are there two &quot;Merge branch &apos;cassandra-4.0&apos; into cassandra-4.1&quot; commits (14936d0bd3716ed251e799a264f5ab16d51b893b&lt;a href=&quot;https://github.com/apache/cassandra/commit/14936d0bd3716ed251e799a264f5ab16d51b893b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/14936d0bd3716ed251e799a264f5ab16d51b893b&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/cassandra/commit/f8dd1931eeacb290af9e246376468f3704891cc4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;f8dd1931eeacb290af9e246376468f3704891cc4&lt;/a&gt;)?&lt;/p&gt;</comment>
                            <comment id="17901957" author="0x62ash" created="Fri, 29 Nov 2024 16:23:03 +0000"  >&lt;p&gt;I got many these messages when restarting Cassandra (4.1.7) right after bootstrapping.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;WARN &#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2024-11-29 19:09:31,834 CommitLogReplayer.java:350 - Origin of 4 sstables is unknown or doesn&apos;t match the local node; commitLogIntervals for them were ignored&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Does this relate to this issue?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310361">
                    <name>Blocked</name>
                                            <outwardlinks description="Blocked">
                                        <issuelink>
            <issuekey id="13437994">CASSANDRA-17525</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13519883">CASSANDRA-18169</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[abonacin]]></customfieldvalue>
        <customfieldvalue><![CDATA[jlewandowski]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12986" cascade-level="1"><![CDATA[Recoverable Corruption / Loss]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ervc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
        <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12349653">3.0.25</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/f96659c5306e62666e21c371c2ded646dd51672b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/f96659c5306e62666e21c371c2ded646dd51672b&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;unit / ci&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>