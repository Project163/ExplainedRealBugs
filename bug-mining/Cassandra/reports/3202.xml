<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:49:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8115] Windows install scripts fail to set logdir and datadir</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8115</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7136&quot; title=&quot;Change default paths to CASSANDRA_HOME instead of /var&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7136&quot;&gt;&lt;del&gt;CASSANDRA-7136&lt;/del&gt;&lt;/a&gt;, the install scripts to run Cassandra as a service fail on both the legacy and the powershell paths.  Looks like they need to have&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;++JvmOptions=-Dcassandra.logdir=%CASSANDRA_HOME%\logs ^
++JvmOptions=-Dcassandra.storagedir=%CASSANDRA_HOME%\data
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;added to function correctly.&lt;/p&gt;

&lt;p&gt;We should take this opportunity to make sure the source of the java options is uniform for both running and installation to prevent mismatches like this in the future.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12748069">CASSANDRA-8115</key>
            <summary>Windows install scripts fail to set logdir and datadir</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmckenzie">Josh McKenzie</assignee>
                                    <reporter username="jmckenzie">Josh McKenzie</reporter>
                        <labels>
                            <label>Windows</label>
                    </labels>
                <created>Tue, 14 Oct 2014 16:14:16 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:07 +0000</updated>
                            <resolved>Fri, 24 Oct 2014 16:07:06 +0000</resolved>
                                        <fixVersion>2.1.2</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14171431" author="jmckenzie" created="Tue, 14 Oct 2014 19:58:46 +0000"  >&lt;p&gt;Passing in multiple semicolon delimited options to ++JvmOptions in procrunsrv is supposed to work as documented &lt;a href=&quot;http://commons.apache.org/proper/commons-daemon/procrun.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, however that is failing and is causing the errors that led to the creation of this ticket.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a v1 that tokenizes JAVA_OPTS and CASSANDRA_PARAMS and appends a ++JvmOptions=&amp;lt;param&amp;gt; for each entry. Tested installation and running the service and it works on both legacy and powershell paths, run from either the command prompt or powershell itself, from within a directory that had a space in the name.&lt;/p&gt;

&lt;p&gt;I also moved the logdir and storagedir declarations into the -env file and cleaned up the quoting in the .bat file for the log and storage dir.&lt;/p&gt;</comment>
                            <comment id="14172557" author="philipthompson" created="Wed, 15 Oct 2014 16:37:07 +0000"  >&lt;p&gt;+1. Working fine under cmd and powershell with restricted and unrestricted execution policies. If I have any complaints it is that no warning is given when a user runs &apos;cassandra.bat install&apos; when &apos;cassandra.bat -install&apos; should be used.&lt;/p&gt;</comment>
                            <comment id="14172611" author="jmckenzie" created="Wed, 15 Oct 2014 17:07:38 +0000"  >&lt;p&gt;That annoys me as well.  I&apos;ll see if I can find a solution for that and if it&apos;s trivial enough, commit it w/this.&lt;/p&gt;</comment>
                            <comment id="14175396" author="jmckenzie" created="Fri, 17 Oct 2014 19:05:33 +0000"  >&lt;p&gt;Attached v2 that disallows unknown arguments.  The limitations of checked params in PowerShell meant I had to roll my own using $args which was a little more involved so I&apos;d prefer one more quick testing/review of it if it&apos;s not too much trouble &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=philipthompson&quot; class=&quot;user-hover&quot; rel=&quot;philipthompson&quot;&gt;philipthompson&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14179153" author="philipthompson" created="Tue, 21 Oct 2014 21:33:11 +0000"  >&lt;p&gt;+1. Incorrect arguments are being rejected, and service installation/removal is working perfectly.&lt;/p&gt;</comment>
                            <comment id="14180194" author="jmckenzie" created="Wed, 22 Oct 2014 17:15:27 +0000"  >&lt;p&gt;Thanks Philip.  Committed.&lt;/p&gt;</comment>
                            <comment id="14181837" author="philipthompson" created="Thu, 23 Oct 2014 19:54:06 +0000"  >&lt;p&gt;The v2 patch to reject invalid arguments also rejects also JVM opts and is causing all of dtests to fail.&lt;/p&gt;</comment>
                            <comment id="14181862" author="jmckenzie" created="Thu, 23 Oct 2014 20:06:34 +0000"  >&lt;p&gt;Attaching fix that skips validation for args starting with -D or -X and also adds -X parsing / appending to JVM_OPTS on run.&lt;/p&gt;</comment>
                            <comment id="14181896" author="philipthompson" created="Thu, 23 Oct 2014 20:24:38 +0000"  >&lt;p&gt;I&apos;m able to pass in the JVM_OPTS, and run dtests with the fix. However, I&apos;m not required to quote all arguments when running cassandra.bat through powershell, but not through command prompt.&lt;/p&gt;</comment>
                            <comment id="14182058" author="jmckenzie" created="Thu, 23 Oct 2014 22:00:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;However, I&apos;m not required to quote all arguments when running cassandra.bat through powershell, but not through command prompt.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m going to assume you meant that powershell requires quotation marks and command-prompt doesn&apos;t.  It looks like PowerShell is finicky about arguments with a &apos;.&apos; in them.  If you pass something bogus (say, cassandrajoin_ring instead of cassandra.join_ring) with the -s flag you can see that it passes it correctly.&lt;/p&gt;

&lt;p&gt;Looks like PowerShell tokenizing arguments on period is &lt;a href=&quot;http://superuser.com/questions/731638/command-line-parameters-in-powershell&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a thing&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;With that being said, you +1 on the _fix patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=philipthompson&quot; class=&quot;user-hover&quot; rel=&quot;philipthompson&quot;&gt;philipthompson&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14182060" author="philipthompson" created="Thu, 23 Oct 2014 22:01:33 +0000"  >&lt;p&gt;Yes, +1. Sorry for missing this problem when I reviewed v2.&lt;/p&gt;</comment>
                            <comment id="14182990" author="jmckenzie" created="Fri, 24 Oct 2014 16:07:06 +0000"  >&lt;p&gt;eh, if you have to apologize for missing it I have to apologize for introducing it in the first place.  It happens.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Fix committed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12748955">CASSANDRA-8136</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12676696" name="8115_fix.txt" size="1060" author="joshuamckenzie" created="Thu, 23 Oct 2014 20:06:34 +0000"/>
                            <attachment id="12674836" name="8115_v1.txt" size="6950" author="joshuamckenzie" created="Tue, 14 Oct 2014 19:58:46 +0000"/>
                            <attachment id="12675548" name="8115_v2.txt" size="9146" author="joshuamckenzie" created="Fri, 17 Oct 2014 19:05:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jmckenzie]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i215sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>philipthompson</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[philipthompson]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>