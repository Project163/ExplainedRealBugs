<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:05:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12813] NPE in auth for bootstrapping node</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12813</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [SharedPool-Worker-1] 2016-10-19 21:40:25,991 Message.java:617 - Unexpected exception during request; channel = [id: 0x15eb017f, /&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; IP omitted&amp;gt;:40869 =&amp;gt; /10.0.0.254:9042]
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.cassandra.auth.PasswordAuthenticator.doAuthenticate(PasswordAuthenticator.java:144) ~[apache-cassandra-3.0.9.jar:3.0.9]
	at org.apache.cassandra.auth.PasswordAuthenticator.authenticate(PasswordAuthenticator.java:86) ~[apache-cassandra-3.0.9.jar:3.0.9]
	at org.apache.cassandra.auth.PasswordAuthenticator.access$100(PasswordAuthenticator.java:54) ~[apache-cassandra-3.0.9.jar:3.0.9]
	at org.apache.cassandra.auth.PasswordAuthenticator$PlainTextSaslAuthenticator.getAuthenticatedUser(PasswordAuthenticator.java:182) ~[apache-cassandra-3.0.9.jar:3.0.9]
	at org.apache.cassandra.transport.messages.AuthResponse.execute(AuthResponse.java:78) ~[apache-cassandra-3.0.9.jar:3.0.9]
	at org.apache.cassandra.transport.Message$Dispatcher.channelRead0(Message.java:513) [apache-cassandra-3.0.9.jar:3.0.9]
	at org.apache.cassandra.transport.Message$Dispatcher.channelRead0(Message.java:407) [apache-cassandra-3.0.9.jar:3.0.9]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) [netty-all-4.0.23.Final.jar:4.0.23.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:333) [netty-all-4.0.23.Final.jar:4.0.23.Final]
	at io.netty.channel.AbstractChannelHandlerContext.access$700(AbstractChannelHandlerContext.java:32) [netty-all-4.0.23.Final.jar:4.0.23.Final]
	at io.netty.channel.AbstractChannelHandlerContext$8.run(AbstractChannelHandlerContext.java:324) [netty-all-4.0.23.Final.jar:4.0.23.Final]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_101]
	at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) [apache-cassandra-3.0.9.jar:3.0.9]
	at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:105) [apache-cassandra-3.0.9.jar:3.0.9]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745) [na:1.8.0_101]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have a node that has been joining for around 24 hours.  My application is configured with the IP address of the joining node in the list of nodes to connect to (ruby driver), and I have been getting around 200 events of this NPE per hour.  I removed the IP of the joining node from the list of nodes for my app to connect to and the errors stopped.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13013677">CASSANDRA-12813</key>
            <summary>NPE in auth for bootstrapping node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ifesdjeen">Alex Petrov</assignee>
                                    <reporter username="charlesmims">Charles Mims</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2016 22:00:07 +0000</created>
                <updated>Tue, 14 Oct 2025 12:13:59 +0000</updated>
                            <resolved>Sat, 12 Nov 2016 23:04:43 +0000</resolved>
                                        <fixVersion>2.2.9</fixVersion>
                    <fixVersion>3.0.10</fixVersion>
                    <fixVersion>3.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="15595241" author="ifesdjeen" created="Fri, 21 Oct 2016 14:28:00 +0000"  >&lt;p&gt;It was quite simple to reproduce the issue: start fresh node first, then start the node upgraded from 2.1 (with legacy credentials table), wait for tables to settle and try to authenticate. &lt;/p&gt;

&lt;p&gt;Since we can not know when exactly the credentials table can be initialised, we can simply add a check for if the select statement is still null and initialise it then.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 &lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 &lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-3.X&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.X &lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.X-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.X-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Please note that 3.x/trunk patch is a slightly different (had to merge names and method positions).&lt;/p&gt;</comment>
                            <comment id="15595254" author="JIRAUSER308715" created="Fri, 21 Oct 2016 14:33:06 +0000"  >&lt;p&gt;Doesn&apos;t this start in 2.2?&lt;/p&gt;</comment>
                            <comment id="15595442" author="ifesdjeen" created="Fri, 21 Oct 2016 15:34:24 +0000"  >&lt;p&gt;You&apos;re right, this started in &lt;tt&gt;2.2&lt;/tt&gt;. I&apos;ve verified that same fix works starting from &lt;tt&gt;2.2&lt;/tt&gt; and updated patches / &lt;tt&gt;CHANGES.txt&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15609333" author="beobal" created="Wed, 26 Oct 2016 18:55:57 +0000"  >&lt;p&gt;The patch LGTM, but it occurs to me that &lt;tt&gt;CassandraAuthorizer&lt;/tt&gt; is just as susceptible to this as &lt;tt&gt;PasswordAuthenticator&lt;/tt&gt;. As it stands, the probabililty of hitting the issue during authz is going to be minuscule because most of the time we&apos;d hit it during authn, but this patch could change that.&lt;/p&gt;

&lt;p&gt;Would you mind extending the patch to cover &lt;tt&gt;CassandraAuthorizer&lt;/tt&gt; too please &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt;? &lt;/p&gt;</comment>
                            <comment id="15612144" author="ifesdjeen" created="Thu, 27 Oct 2016 15:04:45 +0000"  >&lt;p&gt;Thanks for noticing this. I&apos;ve submitted a new patch and triggered CI. &lt;tt&gt;2.2&lt;/tt&gt; one is not rebased to make review easier. &lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 &lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 &lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-3.X&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.X &lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.X-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.X-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;CI results look clear.&lt;/p&gt;</comment>
                            <comment id="15615698" author="beobal" created="Fri, 28 Oct 2016 15:20:37 +0000"  >&lt;p&gt;Perfect, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt;. Committed to 2.2 in &lt;tt&gt;312e21bda7c50f05fc5f8868740b513022385951&lt;/tt&gt; and merged to 3.0/3.X/trunk&lt;/p&gt;</comment>
                            <comment id="15653959" author="ifesdjeen" created="Thu, 10 Nov 2016 12:43:44 +0000"  >&lt;p&gt;Looks like the same issue is with &lt;tt&gt;CassandraRoleManager&lt;/tt&gt;, so we will need a follow up patch. Maybe we can even include it in 3.10 if it gets re-rolled..&lt;/p&gt;</comment>
                            <comment id="15656538" author="ifesdjeen" created="Fri, 11 Nov 2016 08:48:09 +0000"  >&lt;p&gt;I&apos;ve created a follow-up patch (as 3.10 is not released yet, will move to the new issue if we do not re-roll it):&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-2.2-v2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-2.2-v2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-2.2-v2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-3.0-v2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.0-v2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.0-v2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-3.x-v2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.X&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.x-v2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-3.x-v2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12813-trunk-v2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-trunk-v2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-12813-trunk-v2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;I&apos;ve added a &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/1381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest patch&lt;/a&gt; as well. Without the patch the last connection attempt with credentials will result into&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;NoHostAvailable: (&lt;span class=&quot;code-quote&quot;&gt;&apos;Unable to connect to any servers&apos;&lt;/span&gt;, {&lt;span class=&quot;code-quote&quot;&gt;&apos;127.0.0.1&apos;&lt;/span&gt;: AuthenticationFailed(&lt;span class=&quot;code-quote&quot;&gt;&apos;Failed to authenticate to 127.0.0.1: Error from server: code=0000 [Server error] message=&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.RuntimeException: com.google.common.util.concurrent.UncheckedExecutionException: java.lang.NullPointerException&quot;&lt;/span&gt;&apos;&lt;/span&gt;,)})
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;CI is currently pending.&lt;/p&gt;</comment>
                            <comment id="15656850" author="beobal" created="Fri, 11 Nov 2016 11:37:09 +0000"  >&lt;p&gt;+1 LGTM, thanks! Committed to 2.2 in &lt;tt&gt;5e4198ffdad57aebd7c4b3a8cc01a7ce88eac99c&lt;/tt&gt; and merged to 3.0/3.X/trunk&lt;/p&gt;</comment>
                            <comment id="15657403" author="JIRAUSER308715" created="Fri, 11 Nov 2016 16:00:34 +0000"  >&lt;p&gt;The new patch still isn&apos;t quite right.  Its missing a &quot;legacySelectUserStatement = &quot; in one of the places that &quot;prepareLegacySelectUserStatement&quot; is called.&lt;/p&gt;</comment>
                            <comment id="15657412" author="beobal" created="Fri, 11 Nov 2016 16:02:52 +0000"  >&lt;p&gt;My bad, I should&apos;ve caught that. I&apos;ll double check the new dtest and ninja a fix.&lt;/p&gt;</comment>
                            <comment id="15657425" author="ifesdjeen" created="Fri, 11 Nov 2016 16:10:11 +0000"  >&lt;p&gt;This is embarrassing, but this time it&apos;s still incorrect because of the missing assignment statement in the second case.&lt;/p&gt;</comment>
                            <comment id="15657633" author="beobal" created="Fri, 11 Nov 2016 17:49:20 +0000"  >&lt;p&gt;Ninja&apos;d the fix to &lt;tt&gt;CassandraRoleManager&lt;/tt&gt; in &lt;tt&gt;ebf350740581cf0811fa78e10ae70e9640fa1476&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15660436" author="ifesdjeen" created="Sat, 12 Nov 2016 23:04:32 +0000"  >&lt;p&gt;Fixed dtests to catch the problem &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/1382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16150908" author="andres.march@gmail.com" created="Fri, 1 Sep 2017 17:40:52 +0000"  >&lt;p&gt;any workaround?  I got this on a 3.9 cluster with a new node bootstrapping.  No upgrades from another version.&lt;/p&gt;</comment>
                            <comment id="16262739" author="jkondapalli" created="Wed, 22 Nov 2017 14:54:03 +0000"  >&lt;p&gt;Any update on this? we see similar issues with 3.9 no version upgrade&lt;/p&gt;</comment>
                            <comment id="16263149" author="jjirsa" created="Wed, 22 Nov 2017 18:56:57 +0000"  >&lt;p&gt;The fix is committed to 3.10, so you won&#8217;t get it in 3.9 - you&#8217;ll need to upgrade to 3.10 or, more likely, 3.11.1&lt;/p&gt;</comment>
                            <comment id="16372381" author="varsham" created="Thu, 22 Feb 2018 03:53:51 +0000"  >&lt;p&gt;Is there a known workaround to get past this issue? I have a node to bootstrap into my cluster but cannot immediately undertake a version upgrade of cassandra. My node bootstrap does not succeed due to this error.&lt;/p&gt;</comment>
                            <comment id="16385068" author="via.vokal" created="Sun, 4 Mar 2018 11:52:34 +0000"  >&lt;p&gt;The following is received in a 3.0.10 release as well and currently blocking us from replacing any node on this ring:&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;SharedPool-Worker-1&amp;#93;&lt;/span&gt; 2018-02-21 19:04:20,463 Message.java:617 - Unexpected exception during request; channel = &lt;span class=&quot;error&quot;&gt;&amp;#91;id: 0x9d4faf0e, /10.21.3.198:40956 =&amp;gt; /10.21.2.33:9042&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
at org.apache.cassandra.auth.PasswordAuthenticator.doAuthenticate(PasswordAuthenticator.java:160) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.10.jar:3.0.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.cassandra.auth.PasswordAuthenticator.authenticate(PasswordAuthenticator.java:82) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.10.jar:3.0.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.cassandra.auth.PasswordAuthenticator.access$100(PasswordAuthenticator.java:54) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.10.jar:3.0.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.cassandra.auth.PasswordAuthenticator$PlainTextSaslAuthenticator.getAuthenticatedUser(PasswordAuthenticator.java:198) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.10.jar:3.0.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.cassandra.transport.messages.AuthResponse.execute(AuthResponse.java:78) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.10.jar:3.0.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.cassandra.transport.Message$Dispatcher.channelRead0(Message.java:513) &lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.10.jar:3.0.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.cassandra.transport.Message$Dispatcher.channelRead0(Message.java:407) &lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.10.jar:3.0.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) &lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:333) &lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
at io.netty.channel.AbstractChannelHandlerContext.access$700(AbstractChannelHandlerContext.java:32) &lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
at io.netty.channel.AbstractChannelHandlerContext$8.run(AbstractChannelHandlerContext.java:324) &lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_121&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) &lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.10.jar:3.0.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:105) &lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.0.10.jar:3.0.10&amp;#93;&lt;/span&gt;&lt;br/&gt;
at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_121&amp;#93;&lt;/span&gt;&lt;br/&gt;
```&lt;/p&gt;

&lt;p&gt;Wanted to verify with you as it&apos;s said here that it&apos;s supposed to be fixed on 3.0.10,&lt;br/&gt;
what can be done in order to overcome this behavior?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Avi K.&lt;/p&gt;</comment>
                            <comment id="16385478" author="jjirsa" created="Mon, 5 Mar 2018 01:53:21 +0000"  >&lt;p&gt;It&apos;s expected to be fixed in 3.0.10. If it&apos;s still happening, it may be a similar or related bug. It would be especially useful to know if this still happens in 3.0.16 - there are a lot of fixes between 3.0.10 and 3.0.16, and you SHOULD upgrade anyway, but I realize that&apos;s not always possible.&#160;&lt;/p&gt;</comment>
                            <comment id="16385770" author="via.vokal" created="Mon, 5 Mar 2018 08:24:00 +0000"  >&lt;p&gt;Thank you Jeff.&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12955006">CASSANDRA-11469</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ifesdjeen]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i354cv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12337349">3.0.9</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>samt</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>