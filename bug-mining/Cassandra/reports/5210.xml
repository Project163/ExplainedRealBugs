<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:13:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-15225] FileUtils.close() does not handle non-IOException</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-15225</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This can lead to &lt;tt&gt;close&lt;/tt&gt; not being invoked on remaining items&lt;/p&gt;</description>
                <environment></environment>
        <key id="13245171">CASSANDRA-15225</key>
            <summary>FileUtils.close() does not handle non-IOException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Override">Liudmila Kornilova</assignee>
                                    <reporter username="benedict">Benedict Elliott Smith</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 16 Jul 2019 10:01:16 +0000</created>
                <updated>Fri, 15 May 2020 08:01:35 +0000</updated>
                            <resolved>Wed, 7 Aug 2019 12:11:35 +0000</resolved>
                                        <fixVersion>2.2.15</fixVersion>
                    <fixVersion>3.0.19</fixVersion>
                    <fixVersion>3.11.5</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Local/SSTable</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16888298" author="n.v.harikrishna" created="Thu, 18 Jul 2019 20:15:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Override&quot; class=&quot;user-hover&quot; rel=&quot;Override&quot;&gt;Override&lt;/a&gt;&#160;Instead of delivering last exception as IOException, can we use &lt;tt&gt;Throwable.addSuppressed()&lt;/tt&gt; ?&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16888607" author="override" created="Fri, 19 Jul 2019 07:31:18 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=n.v.harikrishna&quot; class=&quot;user-hover&quot; rel=&quot;n.v.harikrishna&quot;&gt;n.v.harikrishna&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Done&lt;/p&gt;

&lt;p&gt;All IOExceptions except first one are also added to suppressed&#160;(see &lt;a href=&quot;https://github.com/apache/cassandra/pull/332/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;updated commit&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="16897432" author="n.v.harikrishna" created="Wed, 31 Jul 2019 18:32:51 +0000"  >&lt;p&gt;1) Insteasd of modifying&#160;already thrown exception, better to create new exception and call &lt;em&gt;newException&lt;/em&gt;.addSuppressed. When the caller calls &lt;em&gt;newException&lt;/em&gt;.getSuppressed, accurate&#160;list exceptions are returned.&lt;/p&gt;

&lt;p&gt;2) Log statement has only one &apos;{}&apos;. I don&apos;t think it will print exception. I prefer caller to handle the logging part.&lt;/p&gt;</comment>
                            <comment id="16897920" author="benedict" created="Thu, 1 Aug 2019 09:35:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;2) Log statement has only one &apos;{}&apos;. I don&apos;t think it will print exception. I prefer caller to handle the logging part.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This (the way &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Override&quot; class=&quot;user-hover&quot; rel=&quot;Override&quot;&gt;Override&lt;/a&gt; has it)&#160;is the correct way to print exceptions; otherwise only their &lt;tt&gt;toString()&lt;/tt&gt; method is invoked.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;1) Insteasd of modifying&#160;already thrown exception, better to create new exception and call &lt;em&gt;newException&lt;/em&gt;.addSuppressed. When the caller calls &lt;em&gt;newException&lt;/em&gt;.getSuppressed, accurate&#160;list exceptions are returned.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t think it is correct to add all&#160;exceptions with &lt;tt&gt;addSuppressed&lt;/tt&gt;. &#160;&lt;/p&gt;

&lt;p&gt;It &lt;em&gt;is&lt;/em&gt;&#160;the case that often&#160;a new exception is created in any place exceptions are caught, so that&#160;the re-throwing method is captured in the trace, however you would always want&#160;a &lt;tt&gt;cause&lt;/tt&gt; in preference to adding a member of &lt;tt&gt;getSuppressed&lt;/tt&gt;. &#160;&lt;/p&gt;

&lt;p&gt;However, I don&apos;t think this anyway&#160;always adds value. &#160;If I were personally writing it, I would likely have done it the way &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Override&quot; class=&quot;user-hover&quot; rel=&quot;Override&quot;&gt;Override&lt;/a&gt; has done. &#160;There&apos;s an alternative, which is to create a new exception whose &lt;tt&gt;cause&lt;/tt&gt;&#160;is the first caught exception, and to &lt;tt&gt;addSuppressed&lt;/tt&gt;&#160;any remaining exceptions to this&#160;new exception. &#160;But I&#160;think it&apos;s preferable to rethrow the original exception here, to avoid polluting the printed stack trace, and minimise the risk that &quot;helpful&quot; tools truncate some of this trace&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Override&quot; class=&quot;user-hover&quot; rel=&quot;Override&quot;&gt;Override&lt;/a&gt;: LGTM, I will merge it alongside your other patch and some others I will be reviewing hopefully today or tomorrow - unless you want to make any changes in light of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=n.v.harikrishna&quot; class=&quot;user-hover&quot; rel=&quot;n.v.harikrishna&quot;&gt;n.v.harikrishna&lt;/a&gt;&apos;s feedback?&lt;/p&gt;</comment>
                            <comment id="16899886" author="override" created="Mon, 5 Aug 2019 08:24:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;2) Log statement has only one &apos;{}&apos;. I don&apos;t think it will print exception. I prefer caller to handle the logging part.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I checked this.&#160;An exception is extracted here ch.qos.logback.classic.spi.LoggingEvent:49 and it is printed&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;unless you want to make any changes in light of&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=n.v.harikrishna&quot; class=&quot;user-hover&quot; rel=&quot;n.v.harikrishna&quot;&gt;n.v.harikrishna&lt;/a&gt;&apos;s feedback?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I decided to change the code such that new exception is created. &lt;br/&gt;
 I see 2 advantages of&#160;this&#160;version:&lt;br/&gt;
 1. &lt;tt&gt;Throwable&lt;/tt&gt; will not be lost if it appears before &lt;tt&gt;IOException&lt;/tt&gt; or&#160;&lt;tt&gt;IOException&lt;/tt&gt; does not appear at all.&#160;&lt;tt&gt;Throwable&lt;/tt&gt; will be rethrown as&#160;IOException with cause.&lt;br/&gt;
 2. Catch clauses become identical and they can be&#160;collapsed to one &lt;tt&gt;Throwable&lt;/tt&gt; clause&lt;/p&gt;

&lt;p&gt;I pushed a separate commit so you can see the difference. I can squash commits if you wish&lt;/p&gt;</comment>
                            <comment id="16901269" author="benedict" created="Tue, 6 Aug 2019 16:54:39 +0000"  >&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Override&quot; class=&quot;user-hover&quot; rel=&quot;Override&quot;&gt;Override&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;There&apos;s a third option, namely accumulating the throwable in a &lt;tt&gt;Throwable&lt;/tt&gt; variable, and maintaining the single catch clause.  We have a utility method, &lt;tt&gt;Throwables.maybeFail&lt;/tt&gt; that takes a checked exception class, and rethrows the exception as its checked-type if possible, or as an unchecked type if possible, and otherwise wraps it in a &lt;tt&gt;RuntimeException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Does that sound reasonable to you?&lt;/p&gt;
</comment>
                            <comment id="16901962" author="override" created="Wed, 7 Aug 2019 10:36:50 +0000"  >&lt;p&gt;Thank you for reviewing the code, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It sounds like a better approach because some&#160;&lt;tt&gt;Throwables&lt;/tt&gt;&#160;should not be re-thrown as checked (e.g. &lt;tt&gt;Error&lt;/tt&gt; is a &quot;serious problems that a reasonable application should not try to catch&quot;). Also no additional wrappers&lt;/p&gt;

&lt;p&gt;I pushed third commit&lt;/p&gt;</comment>
                            <comment id="16901969" author="benedict" created="Wed, 7 Aug 2019 10:46:02 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Override&quot; class=&quot;user-hover&quot; rel=&quot;Override&quot;&gt;Override&lt;/a&gt;.  One tiny nit: &lt;tt&gt;maybeFail&lt;/tt&gt; doesn&apos;t require the null check, you can simply invoke it, and if the parameter is &lt;tt&gt;null&lt;/tt&gt; nothing will happen.&lt;/p&gt;

&lt;p&gt;If you want to prepare the final patch for commit, by squashing, adding a CHANGES.txt entry, and adding a commit message of the form described on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15246&quot; title=&quot;Add more information around commit message format expected for a patch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15246&quot;&gt;&lt;del&gt;CASSANDRA-15246&lt;/del&gt;&lt;/a&gt;, I&apos;ll commit it to trunk.&lt;/p&gt;

&lt;p&gt;Welcome to the contributor community!&lt;/p&gt;</comment>
                            <comment id="16901983" author="override" created="Wed, 7 Aug 2019 11:11:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt;, done!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[Override]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12984" cascade-level=""><![CDATA[Degradation]]></customfieldvalue>
                                <customfieldvalue key="12995" cascade-level="1"><![CDATA[Resource Management]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12975"><![CDATA[Code Inspection]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04pm8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[benedict]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12316349">1.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/f21106fcd0e5d870cf9d85b2d396eab9fe4515cd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;f21106fcd0e5d870cf9d85b2d396eab9fe4515cd&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;unnecessary&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>