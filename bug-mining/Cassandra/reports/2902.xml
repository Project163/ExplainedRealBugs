<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:45:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7317] Repair range validation is too strict</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7317</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;From what I can tell the calculation (using the -pr option) and validation of tokens for repairing ranges is broken. Or at least should be improved. Using an example with ccm:&lt;/p&gt;

&lt;p&gt;Nodetool ring:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Datacenter: dc1
==========
Address    Rack        Status State   Load            Owns                Token
                                                                          -10
127.0.0.1  r1          Up     Normal  188.96 KB       50.00%              -9223372036854775808
127.0.0.2  r1          Up     Normal  194.77 KB       50.00%              -10

Datacenter: dc2
==========
Address    Rack        Status State   Load            Owns                Token
                                                                          0
127.0.0.4  r1          Up     Normal  160.58 KB       0.00%               -9223372036854775798
127.0.0.3  r1          Up     Normal  139.46 KB       0.00%               0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Schema:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE KEYSPACE system_traces WITH replication = {
  &apos;class&apos;: &apos;NetworkTopologyStrategy&apos;,
  &apos;dc2&apos;: &apos;2&apos;,
  &apos;dc1&apos;: &apos;2&apos;
};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Repair -pr:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[Nicks-MacBook-Pro:21:35:58 cassandra-2.0] cassandra$ bin/nodetool -p 7100 repair -pr system_traces
[2014-05-28 21:36:01,977] Starting repair command #12, repairing 1 ranges for keyspace system_traces
[2014-05-28 21:36:02,207] Repair session f984d290-e6d9-11e3-9edc-5f8011daec21 for range (0,-9223372036854775808] finished
[2014-05-28 21:36:02,207] Repair command #12 finished
[Nicks-MacBook-Pro:21:36:02 cassandra-2.0] cassandra$ bin/nodetool -p 7200 repair -pr system_traces
[2014-05-28 21:36:14,086] Starting repair command #1, repairing 1 ranges for keyspace system_traces
[2014-05-28 21:36:14,406] Repair session 00bd45b0-e6da-11e3-98fc-5f8011daec21 for range (-9223372036854775798,-10] finished
[2014-05-28 21:36:14,406] Repair command #1 finished
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that repairing both nodes in dc1, leaves very small ranges unrepaired. For example (-10,0]. Repairing the &apos;primary range&apos; in dc2 will repair those small ranges. Maybe that is the behavior we want but it seems counterintuitive.&lt;/p&gt;

&lt;p&gt;The behavior when manually trying to repair the full range of 127.0.0.01 definitely needs improvement though.&lt;/p&gt;

&lt;p&gt;Repair command:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[Nicks-MacBook-Pro:21:50:44 cassandra-2.0] cassandra$ bin/nodetool -p 7100 repair -st -10 -et -9223372036854775808 system_traces
[2014-05-28 21:50:55,803] Starting repair command #17, repairing 1 ranges for keyspace system_traces
[2014-05-28 21:50:55,804] Starting repair command #17, repairing 1 ranges for keyspace system_traces
[2014-05-28 21:50:55,804] Repair command #17 finished
[Nicks-MacBook-Pro:21:50:56 cassandra-2.0] cassandra$ echo $?
1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;system.log:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR [Thread-96] 2014-05-28 21:40:05,921 StorageService.java (line 2621) Repair session failed:
java.lang.IllegalArgumentException: Requested range intersects a local range but is not fully contained in one; this would lead to imprecise repair
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;The actual output of the repair command doesn&apos;t really indicate that there was an issue. Although the command does return with a non zero exit status.&lt;/li&gt;
	&lt;li&gt;The error here is invisible if you are using the synchronous jmx repair api. It will appear as though the repair completed successfully.&lt;/li&gt;
	&lt;li&gt;Personally, I believe that should be a valid repair command. For the system_traces keyspace, 127.0.0.1 is responsible for this range (and I would argue the &apos;primary range&apos; of the node).&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12717200">CASSANDRA-7317</key>
            <summary>Repair range validation is too strict</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yukim">Yuki Morishita</assignee>
                                    <reporter username="nickmbailey">Nick Bailey</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 May 2014 02:58:26 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:44 +0000</updated>
                            <resolved>Thu, 19 Jun 2014 16:35:17 +0000</resolved>
                                        <fixVersion>2.0.9</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>13</watches>
                                                                                                                <comments>
                            <comment id="14012930" author="mishail" created="Thu, 29 May 2014 21:21:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;The actual output of the repair command doesn&apos;t really indicate that there was an issue. Although the command does return with a non zero exit status.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The catch for IllegalArgumentException doesn&apos;t extract an error message from the exception, and just reuses the previous value of the message, that&apos;s why you see two identical lines in the output&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-2.0/src/java/org/apache/cassandra/service/StorageService.java#L2621&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-2.0/src/java/org/apache/cassandra/service/StorageService.java#L2621&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[2014-05-28 21:50:55,803] Starting repair command #17, repairing 1 ranges &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; keyspace system_traces
[2014-05-28 21:50:55,804] Starting repair command #17, repairing 1 ranges &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; keyspace system_traces
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That can be easily fixed adding something like &lt;tt&gt;message = String.format(&quot;Ivalid repair command #%d: %s &quot;, cmd, e.getMessage());&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I can&apos;t comment on your concern about a validity of a command, though.&lt;/p&gt;</comment>
                            <comment id="14012954" author="mishail" created="Thu, 29 May 2014 21:38:59 +0000"  >&lt;p&gt;BTW, it looks like you misplaced start and end tokens, &lt;tt&gt;-st -10 -et -9223372036854775808&lt;/tt&gt;. Shouldn&apos;t a start token be less that the end one? &lt;/p&gt;</comment>
                            <comment id="14012961" author="nickmbailey" created="Thu, 29 May 2014 21:41:27 +0000"  >&lt;p&gt;Well there are only two nodes, so this is the wraparound case. If we were repairing node 2 it would be (-9223372036854775808, -10].&lt;/p&gt;</comment>
                            <comment id="14013025" author="mishail" created="Thu, 29 May 2014 22:29:09 +0000"  >&lt;p&gt;I might be wrong, but here is how I see the primary ranges for each node.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12647468/12647468_Untitled+Diagram%281%29.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;So when you run &lt;tt&gt;repair -pr&lt;/tt&gt; on dc1 nodes, only green and red ranges are repaired. &lt;/p&gt;

&lt;p&gt;And when you asking node1 to repair the range (-10, 9223372036854775808], you&apos;re trying to repair both blue range and green range. And node1&apos;s primary range is the green one, and it rejects the repair&lt;/p&gt;</comment>
                            <comment id="14013260" author="nickmbailey" created="Fri, 30 May 2014 03:37:22 +0000"  >&lt;p&gt;Perhaps it is a difference in mental models, but let me try to explain my reasoning. In general, I think datacenter&apos;s should be considered as separate rings. Replication is configured separately for each datacenter, tokens are balanced separately in each datacenter (for non vnodes), and consistency levels can be specified with specific datacenter requirements.&lt;/p&gt;

&lt;p&gt;To somewhat further illustrate my point, Cassandra agrees with me when you modify the schema of the system_traces keyspace to only exist in dc 1:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[Nicks-MacBook-Pro:22:26:41 cassandra-2.0] cassandra$ bin/nodetool -p 7100 repair -pr system_traces
[2014-05-29 22:26:46,958] Starting repair command #3, repairing 2 ranges for keyspace system_traces
[2014-05-29 22:26:47,148] Repair session 3ae1cce0-e7aa-11e3-aaee-5f8011daec21 for range (0,-9223372036854775808] finished
[2014-05-29 22:26:47,149] Repair session 3afc80d0-e7aa-11e3-aaee-5f8011daec21 for range (-10,0] finished
[2014-05-29 22:26:47,149] Repair command #3 finished
[Nicks-MacBook-Pro:22:26:47 cassandra-2.0] cassandra$ bin/nodetool -p 7300 repair -pr system_traces
[2014-05-29 22:26:54,907] Nothing to repair for keyspace &apos;system_traces&apos;
[Nicks-MacBook-Pro:22:34:55 cassandra-2.0] cassandra$ bin/nodetool -p 7100 repair -st -9223372036854775808 -et 10 system_traces
[2014-05-29 22:35:02,604] Starting repair command #6, repairing 1 ranges for keyspace system_traces
[2014-05-29 22:35:02,604] Starting repair command #6, repairing 1 ranges for keyspace system_traces
[2014-05-29 22:35:02,604] Repair command #6 finished
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Repairing the &apos;primary range&apos; of node1 actually repairs two ranges (although those two ranges are really just one). Repairing the primary range of node3 does nothing. And asking C* to repair the entire range that it just repaired as two separate ranges still fails.&lt;/p&gt;</comment>
                            <comment id="14013262" author="nickmbailey" created="Fri, 30 May 2014 03:41:43 +0000"  >&lt;p&gt;Even if we were to decide that this is the correct behavior, it gets hard to reason about as you increase tokens, or datacenters. If we expand the above example to three datacenters and the keyspace exists in dc1 and dc2 but not dc3, which ranges is dc1 the primary for and which ranges is dc2 the primary for. Somebody will have to be responsible for the ranges dc3 &apos;owns&apos;.&lt;/p&gt;</comment>
                            <comment id="14016258" author="nickmbailey" created="Tue, 3 Jun 2014 06:16:04 +0000"  >&lt;p&gt;Another thing that was brought up on the mailing list (at least incidentally), is that the current implementation basically makes the &apos;-local&apos; flag and the &apos;-pr&apos; flag incompatible.&lt;/p&gt;</comment>
                            <comment id="14017327" author="mishail" created="Wed, 4 Jun 2014 02:43:24 +0000"  >&lt;p&gt;Current behavior, when &lt;tt&gt;-pr&lt;/tt&gt; is specified, is to treat a multi-DC setup as a single ring. Because &lt;tt&gt;TokenMetadata.getPredecessor(Token)&lt;/tt&gt; doesn&apos;t take into account a DC for a token, and just search for a predecessor across all tokens from all DCs.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if that&apos;s expected or not&lt;/p&gt;
</comment>
                            <comment id="14017659" author="nickmbailey" created="Wed, 4 Jun 2014 12:42:05 +0000"  >&lt;p&gt;Well we at least have some sort of special logic for the case where a keyspace doesn&apos;t exist in both datacenters, since -pr in that case repaired 2 ranges. I do think the right solution is to make TokenMetadata KS/DC aware at least for these cases.&lt;/p&gt;</comment>
                            <comment id="14017839" author="jbellis" created="Wed, 4 Jun 2014 16:41:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m not sure if that&apos;s expected or not&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure sounds like a bug to me.&lt;/p&gt;</comment>
                            <comment id="14018073" author="yukim" created="Wed, 4 Jun 2014 19:49:42 +0000"  >&lt;p&gt;Isn&apos;t -pr supposed to use when repairing &lt;b&gt;all&lt;/b&gt; nodes in the cluster? I think current behavior works for this purpose.&lt;/p&gt;

&lt;p&gt;TokenMetadata has been representing &quot;a ring&quot; and we only have one per cluster. Multi-DC support is built on top of it.&lt;br/&gt;
So currently, from coding perspective, multi-DC set up looks like the image that Mikhail put previously (in spite of mental model some people have).&lt;br/&gt;
It needs some effort and consideration to make TokenMetadata to be KS/DC aware.&lt;/p&gt;

&lt;p&gt;One thing that I noticed during some experiment is that repair should accept -st and -et considering multi-DC replication. (accept -st -10 -et -9223372036854775808 when primary ranges are (-10,0],(0,-9223372036854775808]). Right now it just check each ranges against given -st/-et range so this ends up IAE.&lt;/p&gt;</comment>
                            <comment id="14018294" author="nickmbailey" created="Wed, 4 Jun 2014 22:37:00 +0000"  >&lt;p&gt;If -pr is meant to be used that way, I don&apos;t think it is communicated very well. If that is the case we should be clearer in the documentation and I think we would still need to fix combining -pr and -local. Repairing just the local dc and using the -pr flag should be a supported use case. Personally it seems to me like the best way to fix that is to make the definition of -pr, dc aware, but perhaps not.&lt;/p&gt;

&lt;p&gt;My bigger issue is the validation of the range when specifying a range, so I agree that should be fixed. &lt;/p&gt;</comment>
                            <comment id="14029789" author="yukim" created="Thu, 12 Jun 2014 20:53:43 +0000"  >&lt;p&gt;Attaching patch for the following changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Reject repair when both &quot;-pr&quot; and one of &quot;-dc&quot;/&quot;-hosts&quot;/&quot;-local&quot; are specified.&lt;/li&gt;
	&lt;li&gt;Split given &quot;-st&quot;/&quot;-et&quot; range to ranges that match what we have in TokenMetadata if necessary. So in the example in this issue, when -st -10 -et -9223372036854775808 is given and replication is done to only dc1, Cassandra splits given range to (-10, 0] and (0, -9223372036854775808] and performs repair on those ranges.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14030148" author="jbellis" created="Fri, 13 Jun 2014 01:37:20 +0000"  >&lt;p&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; to review)&lt;/p&gt;</comment>
                            <comment id="14035647" author="krummas" created="Wed, 18 Jun 2014 12:45:41 +0000"  >&lt;p&gt;Comment:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;looks like you missed passing repairingRange to forceKeyspaceRepairRange(..) in one place (row 2610)&lt;br/&gt;
Nit:&lt;/li&gt;
	&lt;li&gt;could we break out the range splitting in a separate method, we are doing exactly the same thing in two places?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;other than that, +1&lt;/p&gt;</comment>
                            <comment id="14037486" author="yukim" created="Thu, 19 Jun 2014 16:35:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;looks like you missed passing repairingRange to forceKeyspaceRepairRange(..) in one place (row 2610)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks for pointing this out &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I extracted duplicate to private method as suggested and committed.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="14162539" author="rcoli" created="Tue, 7 Oct 2014 21:12:42 +0000"  >&lt;blockquote&gt;
&lt;p&gt;If -pr is meant to be used that way, I don&apos;t think it is communicated very well. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As a meta-aside, the way that I explain to new users what -pr is for is by saying :&lt;/p&gt;

&lt;p&gt;&quot;If you are repairing ALL nodes in your cluster, use -pr. If you are not repairing ALL nodes, do not use -pr.&quot;&lt;/p&gt;

&lt;p&gt;I agree that the docs could make this idea clearer, of course with the new -local wrinkle reflected.&lt;/p&gt;</comment>
                            <comment id="14534858" author="kenfailbus" created="Fri, 8 May 2015 16:46:53 +0000"  >&lt;p&gt;Folks,&lt;/p&gt;

&lt;p&gt;I am seeing this error again in 2.0.9 release. I have vnodes in my cluster enabled. We run our repairs with -local option without -pr on our cluster.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2015-05-08 15:01:56,021 [AntiEntropyStage:1] INFO Validator [repair #254edb00-f593-11e4-9397-51babce9f892] Sending completed merkle tree to /10.22.168.35 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; CF1/Sequence
2015-05-08 15:01:58,518 [AntiEntropyStage:1] INFO Validator [repair #e3ca16e0-f592-11e4-bce3-6f1b5fa480b1] Sending completed merkle tree to /10.22.168.105 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/permissions
2015-05-08 15:01:58,791 [AntiEntropyStage:1] INFO Validator [repair #e3ca16e0-f592-11e4-bce3-6f1b5fa480b1] Sending completed merkle tree to /10.22.168.105 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/credentials
2015-05-08 15:01:58,980 [AntiEntropyStage:1] INFO Validator [repair #e3ca16e0-f592-11e4-bce3-6f1b5fa480b1] Sending completed merkle tree to /10.22.168.105 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/users
2015-05-08 15:02:00,640 [AntiEntropyStage:1] INFO Validator [repair #e0d31e00-f592-11e4-993e-c9cc22925782] Sending completed merkle tree to /10.22.168.97 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/credentials
2015-05-08 15:02:01,345 [AntiEntropyStage:1] INFO Validator [repair #e0d31e00-f592-11e4-993e-c9cc22925782] Sending completed merkle tree to /10.22.168.97 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/users
2015-05-08 15:02:01,577 [AntiEntropyStage:1] INFO Validator [repair #e0d31e00-f592-11e4-993e-c9cc22925782] Sending completed merkle tree to /10.22.168.97 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/permissions
2015-05-08 15:02:01,753 [AntiEntropyStage:1] INFO Validator [repair #27dba060-f593-11e4-873b-9d346bbba08e] Sending completed merkle tree to /10.22.168.87 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; CF1/Sequence
2015-05-08 15:02:02,622 [AntiEntropyStage:1] INFO Validator [repair #dba213a0-f592-11e4-b745-192986bd7af2] Sending completed merkle tree to /10.22.168.117 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/credentials
2015-05-08 15:02:02,873 [AntiEntropyStage:1] INFO Validator [repair #dba213a0-f592-11e4-b745-192986bd7af2] Sending completed merkle tree to /10.22.168.117 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/users
2015-05-08 15:02:03,508 [AntiEntropyStage:1] INFO Validator [repair #dba213a0-f592-11e4-b745-192986bd7af2] Sending completed merkle tree to /10.22.168.117 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/permissions
2015-05-08 15:02:03,988 [AntiEntropyStage:1] INFO Validator [repair #d0a2ad70-f592-11e4-a5a2-b73fe73dbe79] Sending completed merkle tree to /10.22.168.109 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/credentials
2015-05-08 15:02:04,759 [AntiEntropyStage:1] INFO Validator [repair #d0a2ad70-f592-11e4-a5a2-b73fe73dbe79] Sending completed merkle tree to /10.22.168.109 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/users
2015-05-08 15:02:05,066 [AntiEntropyStage:1] INFO Validator [repair #d0a2ad70-f592-11e4-a5a2-b73fe73dbe79] Sending completed merkle tree to /10.22.168.109 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth/permissions
2015-05-08 15:02:05,200 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-227856] ERROR StorageService Repair session failed:
java.lang.IllegalArgumentException: Requested range intersects a local range but is not fully contained in one; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; would lead to imprecise repair
        at org.apache.cassandra.service.ActiveRepairService.getNeighbors(ActiveRepairService.java:161)
        at org.apache.cassandra.repair.RepairSession.&amp;lt;init&amp;gt;(RepairSession.java:130)
        at org.apache.cassandra.repair.RepairSession.&amp;lt;init&amp;gt;(RepairSession.java:119)
        at org.apache.cassandra.service.ActiveRepairService.submitRepairSession(ActiveRepairService.java:97)
        at org.apache.cassandra.service.StorageService.forceKeyspaceRepair(StorageService.java:2628)
        at org.apache.cassandra.service.StorageService$4.runMayThrow(StorageService.java:2564)
        at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12640546">CASSANDRA-5424</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12650667">CASSANDRA-5608</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12717844">CASSANDRA-7336</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12650141" name="7317-2.0.txt" size="11221" author="yukim" created="Thu, 12 Jun 2014 20:53:43 +0000"/>
                            <attachment id="12647468" name="Untitled Diagram(1).png" size="32380" author="mishail" created="Thu, 29 May 2014 22:29:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yukim]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w2sn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395533</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>marcuse</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>