<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:16:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1545] NullPointerException on startup after upgrade</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1545</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Running a cluster on trunk of 0.7.0beta-2 and updated to tip of trunk. On startup of node got the following NullPointerException. Was using r997774 and switched to r1000247&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2010-09-22 12:30:14,110 AbstractCassandraDaemon.java (line 216) Exception encountered during startup.&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
    at org.apache.cassandra.config.CFMetaData.inflate(CFMetaData.java:373)&lt;br/&gt;
    at org.apache.cassandra.config.KSMetaData.inflate(KSMetaData.java:118)&lt;br/&gt;
    at org.apache.cassandra.db.DefsTable.loadFromStorage(DefsTable.java:106)&lt;br/&gt;
    at org.apache.cassandra.config.DatabaseDescriptor.loadSchemas(DatabaseDescriptor.java:441)&lt;br/&gt;
    at org.apache.cassandra.service.AbstractCassandraDaemon.setup(AbstractCassandraDaemon.java:109)&lt;br/&gt;
    at org.apache.cassandra.thrift.CassandraDaemon.setup(CassandraDaemon.java:54)&lt;br/&gt;
    at org.apache.cassandra.service.AbstractCassandraDaemon.activate(AbstractCassandraDaemon.java:199)&lt;br/&gt;
    at org.apache.cassandra.thrift.CassandraDaemon.main(CassandraDaemon.java:133)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12475072">CASSANDRA-1545</key>
            <summary>NullPointerException on startup after upgrade</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jhermes">Jon Hermes</assignee>
                                    <reporter username="bterm">JCF</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Sep 2010 19:33:11 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:16 +0000</updated>
                            <resolved>Mon, 27 Sep 2010 22:38:16 +0000</resolved>
                                        <fixVersion>0.7 beta 2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12914612" author="jhermes" created="Fri, 24 Sep 2010 19:34:58 +0000"  >&lt;p&gt;Current working theory: looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1437&quot; title=&quot;Improve default handling/validation for config.Metadata objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1437&quot;&gt;&lt;del&gt;CASSANDRA-1437&lt;/del&gt;&lt;/a&gt; rears it head, as it did in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-891&quot; title=&quot;Add ValidateWith to CF definitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-891&quot;&gt;&lt;del&gt;CASSANDRA-891&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12914686" author="jbellis" created="Fri, 24 Sep 2010 22:34:19 +0000"  >&lt;p&gt;At worst blowing away your schema definitions in the system keyspace and recreating them should fix.&lt;/p&gt;</comment>
                            <comment id="12914722" author="jhermes" created="Sat, 25 Sep 2010 00:35:39 +0000"  >&lt;p&gt;Yeah, I&apos;m not sure what&apos;s causing the NPE after looking at the config and doing some debug testing.&lt;br/&gt;
If this is seen from beta1-&amp;gt; or from 0.6.5-&amp;gt;, then it would be a major bug, but from an arbitrary trunk to current trunk is not so important.&lt;/p&gt;</comment>
                            <comment id="12914724" author="jbellis" created="Sat, 25 Sep 2010 00:40:14 +0000"  >&lt;p&gt;right, we&apos;ve broken stuff at various revisions, and i don&apos;t think we can necessarily fix that retroactively.  as long as beta1 -&amp;gt; beta2 works i think we&apos;re fine.&lt;/p&gt;</comment>
                            <comment id="12915487" author="jhermes" created="Mon, 27 Sep 2010 21:21:38 +0000"  >&lt;p&gt;Going from beta1 to trunk has several problems.&lt;br/&gt;
The first of which is that we stored the old classnames for o.a.c.locator and are now reading them out and failing to find the matching classes.&lt;br/&gt;
We have special case logic in DD to fix this, so it&apos;s being pushed into CFMetaData.inflate().&lt;/p&gt;

&lt;p&gt;Now I can repro this bug from beta1 -&amp;gt;.&lt;/p&gt;</comment>
                            <comment id="12915501" author="jhermes" created="Mon, 27 Sep 2010 21:55:39 +0000"  >&lt;p&gt;Was trying to jam a null into an int and not an Integer.&lt;br/&gt;
That was subtle.&lt;/p&gt;</comment>
                            <comment id="12915502" author="jhermes" created="Mon, 27 Sep 2010 21:56:36 +0000"  >&lt;p&gt;After both patches, on-disk from beta1 is read safely by beta2.&lt;/p&gt;</comment>
                            <comment id="12915515" author="stuhood" created="Mon, 27 Sep 2010 22:20:31 +0000"  >&lt;p&gt;+1&lt;br/&gt;
Works for me with the definitions in our default cassandra.yaml.&lt;/p&gt;</comment>
                            <comment id="12915524" author="jbellis" created="Mon, 27 Sep 2010 22:38:16 +0000"  >&lt;p&gt;pulled the replace ops into KSMD.convertOldStrategyName and committed&lt;/p&gt;</comment>
                            <comment id="12915525" author="bterm" created="Mon, 27 Sep 2010 22:38:39 +0000"  >&lt;p&gt;+1 &lt;br/&gt;
looks good&lt;/p&gt;</comment>
                            <comment id="12915740" author="hudson" created="Tue, 28 Sep 2010 13:31:33 +0000"  >&lt;p&gt;Integrated in Cassandra #549 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra/549/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra/549/&lt;/a&gt;)&lt;br/&gt;
    fix reading beta1 schema from beta2.  patch by jhermes; reviewed by Stu Hood and jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1545&quot; title=&quot;NullPointerException on startup after upgrade&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1545&quot;&gt;&lt;del&gt;CASSANDRA-1545&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455758" name="namechanges.txt" size="2226" author="jhermes" created="Mon, 27 Sep 2010 21:21:38 +0000"/>
                            <attachment id="12455763" name="nullprimitive.txt" size="1336" author="jhermes" created="Mon, 27 Sep 2010 21:55:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jhermes]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20192</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g5vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stuhood</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stuhood]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>