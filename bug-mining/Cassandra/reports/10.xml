<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:10:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-78] Interrupted recovery requires manual intervention to fix</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-78</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Originally reported by Alexander Staubo: &quot;If you kill the server while it is going through its initial &quot;row recovery&quot; phase, you risk ending up with a database that&apos;s corrupt and will fail with &quot;negative seek&quot; exceptions and similar.&quot;&lt;/p&gt;

&lt;p&gt;Prashant replied:&lt;/p&gt;

&lt;p&gt;&quot;The commit logs are only deleted after a successful recovery. You should still have teh commit log if u killed the server while recovering ? When u restart the server it should generate a new file , for compactions we name intermediate files with a .tmp and only on successful dump do we place them as usable files , this same logic is required at recovery and there is a fix coming up which will do it .&lt;/p&gt;

&lt;p&gt;&quot;So with the state that u have today there will  be no data loss ass commit logs still exist but its a round about process to recover it since now u haave to delete the intermediate file and then do teh recovery again.&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422699">CASSANDRA-78</key>
            <summary>Interrupted recovery requires manual intervention to fix</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Apr 2009 15:02:23 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:39 +0000</updated>
                            <resolved>Tue, 5 May 2009 19:59:09 +0000</resolved>
                                        <fixVersion>0.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12705088" author="jbellis" created="Fri, 1 May 2009 18:47:39 +0000"  >&lt;p&gt;Prashant&apos;s memory seems to be wrong here &amp;#8211; the only place getTempFileName is in the anticompaction (bootstrap) code.  Everything else uses getNextFileName directly.&lt;/p&gt;</comment>
                            <comment id="12705097" author="jbellis" created="Fri, 1 May 2009 19:50:25 +0000"  >&lt;p&gt;while writing these patches I checked and closeRename does fsync (via FileChannel.force).  Have not audited commitlog similarly.&lt;/p&gt;

&lt;p&gt;Additionally, the bootstrap code uses the potentially unsafe CFS.getFileName instead of getTempFileName.  Not sure if there&apos;s actually a problem there.  (Just a note to self to come back to this after 0.3)&lt;/p&gt;</comment>
                            <comment id="12705634" author="urandom" created="Mon, 4 May 2009 15:52:33 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12706027" author="hudson" created="Tue, 5 May 2009 13:43:26 +0000"  >&lt;p&gt;Integrated in Cassandra #59 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/59/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/59/&lt;/a&gt;)&lt;br/&gt;
    use getTempFileName / closeRename to avoid problems w/ half-written sstables.&lt;br/&gt;
patch by jbellis; reviewed by Eric Evans for &lt;br/&gt;
clean up anticompaction code a little.&lt;br/&gt;
patch by jbellis; reveiewed by Eric Evans for &lt;/p&gt;</comment>
                            <comment id="12706176" author="jbellis" created="Tue, 5 May 2009 19:59:09 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12407032" name="0001-clean-up-anticompaction-code-a-little.patch" size="5284" author="jbellis" created="Fri, 1 May 2009 19:18:16 +0000"/>
                            <attachment id="12407033" name="0002-use-getTempFileName-closeRename-to-avoid-problems.patch" size="2498" author="jbellis" created="Fri, 1 May 2009 19:18:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fwqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90902</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>