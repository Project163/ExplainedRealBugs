<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:16:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-15783] test_optimized_primary_range_repair - transient_replication_test.TestTransientReplication</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-15783</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Dtest failure.&lt;br/&gt;
Example:&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/118/workflows/9e57522d-52fa-4d44-88d8-5cec0e87f517/jobs/585/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/118/workflows/9e57522d-52fa-4d44-88d8-5cec0e87f517/jobs/585/tests&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13302641">CASSANDRA-15783</key>
            <summary>test_optimized_primary_range_repair - transient_replication_test.TestTransientReplication</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="edimitrova">Ekaterina Dimitrova</assignee>
                                    <reporter username="edimitrova">Ekaterina Dimitrova</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 May 2020 13:46:48 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:58 +0000</updated>
                            <resolved>Tue, 26 May 2020 08:29:56 +0000</resolved>
                                        <fixVersion>4.0-beta1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Test/dtest/python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17100335" author="edimitrova" created="Tue, 5 May 2020 23:55:14 +0000"  >&lt;p&gt;This test started failing after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15657&quot; title=&quot;Improve zero-copy-streaming containment check by using file sections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15657&quot;&gt;&lt;del&gt;CASSANDRA-15657&lt;/del&gt;&lt;/a&gt;. Will investigate it further tomorrow.&lt;/p&gt;</comment>
                            <comment id="17100360" author="djoshi3" created="Wed, 6 May 2020 00:38:07 +0000"  >&lt;p&gt;I don&apos;t see the stack trace. Can you please update the ticket with more information on the failure?&lt;/p&gt;</comment>
                            <comment id="17100449" author="jasonstack" created="Wed, 6 May 2020 04:16:02 +0000"  >&lt;p&gt;Error trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
=================================== FAILURES ===================================
_________ TestTransientReplication.test_optimized_primary_range_repair _________

self = &amp;lt;transient_replication_test.TestTransientReplication object at 0x7ffbe11a9978&amp;gt;

    @pytest.mark.no_vnodes
    def test_optimized_primary_range_repair(self):
        &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;&quot; optimized primary range incremental repair from full replica should remove data on node3 &quot;&lt;/span&gt;&quot;&quot;
        self._test_speculative_write_repair_cycle(primary_range=True,
                                                  optimized_repair=True,
                                                  repair_coordinator=self.node1,
&amp;gt;                                                 expect_node3_data=False)

transient_replication_test.py:463: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
transient_replication_test.py:435: in _test_speculative_write_repair_cycle
    self.assert_has_sstables(self.node2, compact=True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &amp;lt;transient_replication_test.TestTransientReplication object at 0x7ffbe11a9978&amp;gt;
node = &amp;lt;ccmlib.node.Node object at 0x7ffadec56ac8&amp;gt;, flush = False
compact = True

    def assert_has_sstables(self, node, flush=False, compact=False):
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; flush:
            node.flush()
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; compact:
            node.nodetool(&lt;span class=&quot;code-quote&quot;&gt;&apos; &apos;&lt;/span&gt;.join([&lt;span class=&quot;code-quote&quot;&gt;&apos;compact&apos;&lt;/span&gt;, self.keyspace, self.table]))
    
        sstables = node.get_sstables(self.keyspace, self.table)
&amp;gt;       &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; sstables
E       &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; []
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;copying my comment from 15657:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This patch allows ZCS for size-tiered compaction which is used by the test and the test log showed that the file is indeed received via ZCS...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO  [CompactionExecutor:2] 2020-05-06 12:28:10,848 PendingRepairManager.java:446 - Obsoleting &lt;span class=&quot;code-keyword&quot;&gt;transient&lt;/span&gt; repaired ssatbles
DEBUG [CompactionExecutor:2] 2020-05-06 12:28:10,852 PendingRepairManager.java:144 - Removing compaction strategy &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; pending repair fc89be70-8f51-11ea-8232-f78d8bc3c1f4 on  ks.tblINFO  [NonPeriodicTasks:1] 2020-05-06 12:28:10,855 SSTable.java:111 - Deleting sstable: /&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/w0/m4svxry56h56g_42mx0rwbcr0000gn/T/dtest-9fybyxp7/test/node2/data0/ks/tbl-f26130408f5111ea8232f78d8bc3c1f4/na-1-big &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Transient replica&#160;&lt;tt&gt;PendingRepairManager&lt;/tt&gt; is removing the received file and it&apos;s doing it earlier on ZCS sstable than non-ZCS sstable because ZCS sstable carries &quot;repairedAt&quot; metadata.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djoshi&quot; class=&quot;user-hover&quot; rel=&quot;djoshi&quot;&gt;djoshi&lt;/a&gt; not sure if it&apos;s an expected behavior from transient replica...&lt;/p&gt;

&lt;p&gt;Let me know if there is anything I can help..&lt;/p&gt;</comment>
                            <comment id="17101222" author="edimitrova" created="Wed, 6 May 2020 22:03:13 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt;&lt;br/&gt;
Same as you, I am also not sure about the behavior. It sounds to me as we need to rework actually the test now and that behavior is expected but I am not 100% sure?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djoshi&quot; class=&quot;user-hover&quot; rel=&quot;djoshi&quot;&gt;djoshi&lt;/a&gt; do you have any vision?&lt;br/&gt;
Or maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; has some advice here?&lt;/p&gt;</comment>
                            <comment id="17101240" author="djoshi3" created="Wed, 6 May 2020 22:43:15 +0000"  >&lt;p&gt;I think we need to update to the latest Python driver that supports creating transient replicas. Here&apos;s what I get when I run the test locally:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
15:39:54,773 cassandra.metadata WARNING Failed creating NetworkTopologyStrategy with options {&lt;span class=&quot;code-quote-red&quot;&gt;&apos;datacenter1&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote-red&quot;&gt;&apos;3/1&apos;&lt;/span&gt;}: invalid literal &lt;span class=&quot;code-object&quot;&gt;for&lt;/span&gt; int() with base 10: &lt;span class=&quot;code-quote-red&quot;&gt;&apos;3/1&apos;&lt;/span&gt;
15:39:54,778 cassandra.metadata WARNING Failed creating NetworkTopologyStrategy with options {&lt;span class=&quot;code-quote-red&quot;&gt;&apos;datacenter1&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote-red&quot;&gt;&apos;3/1&apos;&lt;/span&gt;}: invalid literal &lt;span class=&quot;code-object&quot;&gt;for&lt;/span&gt; int() with base 10: &lt;span class=&quot;code-quote-red&quot;&gt;&apos;3/1&apos;&lt;/span&gt;
15:39:54,962 cassandra.metadata WARNING Failed creating NetworkTopologyStrategy with options {&lt;span class=&quot;code-quote-red&quot;&gt;&apos;datacenter1&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote-red&quot;&gt;&apos;3/1&apos;&lt;/span&gt;}: invalid literal &lt;span class=&quot;code-object&quot;&gt;for&lt;/span&gt; int() with base 10: &lt;span class=&quot;code-quote-red&quot;&gt;&apos;3/1&apos;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17101286" author="djoshi3" created="Thu, 7 May 2020 00:42:18 +0000"  >&lt;p&gt;I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15792&quot; title=&quot;test_speculative_data_request - read_repair_test.TestSpeculativeReadRepair&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15792&quot;&gt;&lt;del&gt;CASSANDRA-15792&lt;/del&gt;&lt;/a&gt; for fixing the driver related issue. It fixes these warnings. However, the test still breaks. I noticed that the sstable is missing on 2 out of the 3 replicas. I haven&apos;t had a lot of time to investigate this, if anybody has the time to dig into it, please do so.&lt;/p&gt;</comment>
                            <comment id="17101773" author="edimitrova" created="Thu, 7 May 2020 15:21:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djoshi&quot; class=&quot;user-hover&quot; rel=&quot;djoshi&quot;&gt;djoshi&lt;/a&gt;&lt;br/&gt;
I am trying to poke around now and check whether this is a correct behavior now or not. Want to be sure about that.&lt;/p&gt;</comment>
                            <comment id="17101864" author="bdeggleston" created="Thu, 7 May 2020 16:39:42 +0000"  >&lt;p&gt;This looks like a legit regression. If this is definitely caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15657&quot; title=&quot;Improve zero-copy-streaming containment check by using file sections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15657&quot;&gt;&lt;del&gt;CASSANDRA-15657&lt;/del&gt;&lt;/a&gt;, then it&apos;s probably broken streaming and sstables are not being streamed to node 2 when then should be.&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt;&#160;are you seeing the sstable getting dropped on node 2 or 3?&lt;/p&gt;</comment>
                            <comment id="17101887" author="jasonstack" created="Thu, 7 May 2020 17:01:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdeggleston&quot; class=&quot;user-hover&quot; rel=&quot;bdeggleston&quot;&gt;bdeggleston&lt;/a&gt; the streamed sstable is dropped by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15783?focusedCommentId=17100449&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17100449&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;transient replica&lt;/a&gt; on node2 after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15657&quot; title=&quot;Improve zero-copy-streaming containment check by using file sections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15657&quot;&gt;&lt;del&gt;CASSANDRA-15657&lt;/del&gt;&lt;/a&gt;.. I didn&apos;t check node3..&lt;/p&gt;

&lt;p&gt;I don&apos;t think it&apos;s caused by 15657 which just makes ZCS more efficient and allows ZCS for tables with non-leveled-compaction strategy.&lt;/p&gt;

&lt;p&gt;The test failure can be reproduced with leveled-compaction strategy without 15657 (ZCS will be used). I might be able to look at it next 1~2 week..&lt;/p&gt;</comment>
                            <comment id="17101897" author="djoshi3" created="Thu, 7 May 2020 17:18:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15793&quot; title=&quot;Update Python driver for cqlsh to 3.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15793&quot;&gt;&lt;del&gt;CASSANDRA-15793&lt;/del&gt;&lt;/a&gt;&#160;is resolved. So we shouldn&apos;t get the Transient Replication related warnings. We should also update this dtest to test with both LCS and STCS to ensure we cover both strategies going forward.&lt;/p&gt;

&lt;p&gt;FTR from the logs it seems that the SSTables are streamed to Node 2 but are immediately deleted.&lt;/p&gt;</comment>
                            <comment id="17101916" author="edimitrova" created="Thu, 7 May 2020 17:54:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djoshi&quot; class=&quot;user-hover&quot; rel=&quot;djoshi&quot;&gt;djoshi&lt;/a&gt; thanks, that was my point. If that is fine we have to add testing for the second strategy in that case and leave the current test as a correct behavior.&lt;/p&gt;

&lt;p&gt;I can look at it on Monday if no one else get to it until then. (I&apos;ll be off tomorrow)&lt;/p&gt;</comment>
                            <comment id="17101925" author="edimitrova" created="Thu, 7 May 2020 18:02:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt; The only reason I pointed to that ticket is to make our lives easier during the debugging of this test and to understand faster and better what is going on:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;is it a bug?&lt;/li&gt;
	&lt;li&gt;is it a need of additional change?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks for your involvement, that helped!&lt;/p&gt;</comment>
                            <comment id="17103943" author="jasonstack" created="Sun, 10 May 2020 20:39:48 +0000"  >&lt;p&gt;&lt;font color=&quot;#172b4d&quot;&gt;In fact, it&apos;s not &quot;repairedAt&quot; causing the issue, it&apos;s the &quot;isTransient&quot; attribute. For non-ZCS, it&apos;s always &quot;false&quot; for streamed sstable writer, but for ZCS, &quot;isTransient&quot; is copied from source sstable.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;Based on my understanding on TR, &quot;isTransient&quot; flag should be marked on local node during repair anti-compaction instead of copying via streaming.&lt;/p&gt;

&lt;p&gt;In case of the dtest with optimized repair, node3 finished anti-compaction and changed its sstable to &quot;isTransient=true&quot; because of incremental repair. And then node3 streams the sstable to node2.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/587&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt; : mark &quot;isTransient=false&quot; for ZCS sstables and fixed some typos in transient replica document.&lt;br/&gt;
 &lt;a href=&quot;https://circleci.com/workflow-run/1796a195-1c1b-4108-831c-2060a0b53499&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17103948" author="djoshi3" created="Sun, 10 May 2020 21:05:47 +0000"  >&lt;p&gt;Good find. Could you also update the Python dtests so they&#8217;ll check with both STCS and LCS.&lt;/p&gt;</comment>
                            <comment id="17104181" author="jasonstack" created="Mon, 11 May 2020 08:03:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;Could you also update the Python dtests so they&#8217;ll check with both STCS and LCS.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The difference is not about compaction strategy, but the streaming method..&lt;/p&gt;

&lt;p&gt;I has moved transient replica repair dtests into &lt;tt&gt;&quot;TestTransientReplicationRepairStreamEntireSSTable&quot;&lt;/tt&gt; and created another class &lt;tt&gt;&quot;TestTransientReplicationRepairLegacyStreaming&quot;&lt;/tt&gt; with &quot;stream_entire_sstables=false&quot;.. WDYT?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/587/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;: mark &quot;isTransient=false&quot; for entire-streaming sstables and fixed some typos in transient replica document.&lt;br/&gt;
 &lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;: add legacy streaming for transient replica repair tests.&lt;br/&gt;
 &lt;a href=&quot;https://circleci.com/workflow-run/d9a14206-5acd-4a66-a0f2-5d8c37c0db8d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17104191" author="djoshi3" created="Mon, 11 May 2020 08:13:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;The difference is not about compaction strategy, but the streaming method..&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I understand the issue is related to the streaming method. However, here, the issue went unnoticed because the test only exercised STCS and not LCS. If the test would&apos;ve exercised both strategies then the issue would&apos;ve surfaced earlier when we added ZCS to LCS.&lt;/p&gt;</comment>
                            <comment id="17104704" author="jasonstack" created="Mon, 11 May 2020 17:40:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;However, here, the issue went unnoticed because the test only exercised STCS and not LCS. If the test would&apos;ve exercised both strategies then the issue would&apos;ve surfaced earlier when we added ZCS to LCS.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Before &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15657&quot; title=&quot;Improve zero-copy-streaming containment check by using file sections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15657&quot;&gt;&lt;del&gt;CASSANDRA-15657&lt;/del&gt;&lt;/a&gt;, yes. if we have a LCS test, the issue should have been caught.. But after 15657, both STCS and LCS are streaming entire sstable, they work exactly the same way.. Anyway, I have added one LCS test..&lt;/p&gt;</comment>
                            <comment id="17104705" author="jasonstack" created="Mon, 11 May 2020 17:41:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;&#160;thanks for the report!&lt;/p&gt;</comment>
                            <comment id="17104773" author="edimitrova" created="Mon, 11 May 2020 19:16:25 +0000"  >&lt;p&gt;Thanks for the fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djoshi&quot; class=&quot;user-hover&quot; rel=&quot;djoshi&quot;&gt;djoshi&lt;/a&gt;, I am not a committer, if you approve the current patch can you, please, commit it?&lt;/p&gt;</comment>
                            <comment id="17104862" author="djoshi3" created="Mon, 11 May 2020 19:49:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; I&apos;ll take a look. I&apos;d prefer &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdeggleston&quot; class=&quot;user-hover&quot; rel=&quot;bdeggleston&quot;&gt;bdeggleston&lt;/a&gt; also gets in a review before we commit this change.&lt;/p&gt;</comment>
                            <comment id="17104885" author="edimitrova" created="Mon, 11 May 2020 20:29:00 +0000"  >&lt;p&gt;Thank you both &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djoshi&quot; class=&quot;user-hover&quot; rel=&quot;djoshi&quot;&gt;djoshi&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdeggleston&quot; class=&quot;user-hover&quot; rel=&quot;bdeggleston&quot;&gt;bdeggleston&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17111646" author="bdeggleston" created="Wed, 20 May 2020 00:31:25 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17112260" author="edimitrova" created="Wed, 20 May 2020 14:18:26 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdeggleston&quot; class=&quot;user-hover&quot; rel=&quot;bdeggleston&quot;&gt;bdeggleston&lt;/a&gt;&lt;br/&gt;
Can you or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djoshi&quot; class=&quot;user-hover&quot; rel=&quot;djoshi&quot;&gt;djoshi&lt;/a&gt; commit it, please? I am not a committer. Thanks in advance!&lt;/p&gt;</comment>
                            <comment id="17116533" author="michaelsembwever" created="Tue, 26 May 2020 08:29:56 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/598a92180e2ad95b48419605d270c53497739f35&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;598a92180e2ad95b48419605d270c53497739f35 &lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/d7aacd3fa9b7d4c4fef80f5550a2576303e29890&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;d7aacd3fa9b7d4c4fef80f5550a2576303e29890 &lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;(added CHANGES.txt line for this ticket and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15657&quot; title=&quot;Improve zero-copy-streaming containment check by using file sections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15657&quot;&gt;&lt;del&gt;CASSANDRA-15657&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17116681" author="edimitrova" created="Tue, 26 May 2020 12:11:13 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13293322">CASSANDRA-15657</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13303235">CASSANDRA-15793</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[edimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12986" cascade-level="1"><![CDATA[Recoverable Corruption / Loss]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ecqw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bdeggleston]]></customfieldvalue>
        <customfieldvalue><![CDATA[djoshi]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348285">4.0-beta1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/598a92180e2ad95b48419605d270c53497739f35&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/598a92180e2ad95b48419605d270c53497739f35&lt;/a&gt; &lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/d7aacd3fa9b7d4c4fef80f5550a2576303e29890&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra-dtest/commit/d7aacd3fa9b7d4c4fef80f5550a2576303e29890&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;added dtests.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/587&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Patch&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Dtest&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://circleci.com/workflow-run/e10d1061-4480-4ac3-9468-add94a9b3108&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Circle&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>