<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:33:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4221] Error while deleting a columnfamily that is being compacted.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4221</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The following dtest command produces an error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;export CASSANDRA_VERSION=git:cassandra-1.1; nosetests --nocapture --nologcapture concurrent_schema_changes_test.py:TestConcurrentSchemaChanges.load_test&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is the error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error occured during compaction
java.util.concurrent.ExecutionException: java.io.IOError: java.io.FileNotFoundException: /tmp/dtest-6ECMgy/test/node1/data/Keyspace1/Standard1/Keyspace1-Standard1-hc-47-Data.db (No such file or directory)
	at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
	at java.util.concurrent.FutureTask.get(FutureTask.java:111)
	at org.apache.cassandra.db.compaction.CompactionManager.performMaximal(CompactionManager.java:239)
	at org.apache.cassandra.db.ColumnFamilyStore.forceMajorCompaction(ColumnFamilyStore.java:1580)
	at org.apache.cassandra.service.StorageService.forceTableCompaction(StorageService.java:1770)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:111)
	at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:45)
	at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:226)
	at com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
	at com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:251)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:857)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:795)
	at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1450)
	at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:90)
	at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1285)
	at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1383)
	at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:807)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
	at sun.rmi.transport.Transport$1.run(Transport.java:177)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:679)
Caused by: java.io.IOError: java.io.FileNotFoundException: /tmp/dtest-6ECMgy/test/node1/data/Keyspace1/Standard1/Keyspace1-Standard1-hc-47-Data.db (No such file or directory)
	at org.apache.cassandra.io.sstable.SSTableScanner.&amp;lt;init&amp;gt;(SSTableScanner.java:61)
	at org.apache.cassandra.io.sstable.SSTableReader.getDirectScanner(SSTableReader.java:839)
	at org.apache.cassandra.io.sstable.SSTableReader.getDirectScanner(SSTableReader.java:851)
	at org.apache.cassandra.db.compaction.AbstractCompactionStrategy.getScanners(AbstractCompactionStrategy.java:142)
	at org.apache.cassandra.db.compaction.AbstractCompactionStrategy.getScanners(AbstractCompactionStrategy.java:148)
	at org.apache.cassandra.db.compaction.CompactionTask.execute(CompactionTask.java:121)
	at org.apache.cassandra.db.compaction.CompactionManager$6.runMayThrow(CompactionManager.java:264)
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)
	... 3 more
Caused by: java.io.FileNotFoundException: /tmp/dtest-6ECMgy/test/node1/data/Keyspace1/Standard1/Keyspace1-Standard1-hc-47-Data.db (No such file or directory)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.&amp;lt;init&amp;gt;(RandomAccessFile.java:233)
	at org.apache.cassandra.io.util.RandomAccessReader.&amp;lt;init&amp;gt;(RandomAccessReader.java:67)
	at org.apache.cassandra.io.util.RandomAccessReader.open(RandomAccessReader.java:102)
	at org.apache.cassandra.io.util.RandomAccessReader.open(RandomAccessReader.java:87)
	at org.apache.cassandra.io.sstable.SSTableReader.openDataReader(SSTableReader.java:985)
	at org.apache.cassandra.io.sstable.SSTableScanner.&amp;lt;init&amp;gt;(SSTableScanner.java:56)
	... 13 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For reference, here is the dtest function that causes the failure. The error happens on the line near the bottom that drops the columnfamily:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    def load_test(self):                                                        
        &quot;&quot;&quot;                                                                     
        apply schema changes &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; the cluster is under load.                   
        &quot;&quot;&quot;                                                                     
        debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;load_test()&quot;&lt;/span&gt;)                                                    
                                                                                
        cluster = self.cluster                                                  
        cluster.populate(1).start()                                             
        node1 = cluster.nodelist()[0]                                           
        wait(2)                                                                 
        cursor = self.cql_connection(node1).cursor()                            
                                                                                
        def stress(args=[]):                                                    
            debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Stressing&quot;&lt;/span&gt;)                                                  
            node1.stress(args)                                                  
            debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Done Stressing&quot;&lt;/span&gt;)                                             
                                                                                
        def compact():                                                          
            debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Compacting...&quot;&lt;/span&gt;)                                              
            node1.nodetool(&lt;span class=&quot;code-quote&quot;&gt;&apos;compact&apos;&lt;/span&gt;)                                           
            debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Done Compacting.&quot;&lt;/span&gt;)                                           
                                                                                
        # put some data into the cluster                                        
        stress([&lt;span class=&quot;code-quote&quot;&gt;&apos;--num-keys=1000000&apos;&lt;/span&gt;])                                          
                                                                                
        # now start compacting...                   
        tcompact = &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(target=compact)                                       
        tcompact.start()                                                        
        wait(1)                                                                 
                                                                                
        # now the cluster is under a lot of load. Make some schema changes.     
        cursor.execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;USE Keyspace1&quot;&lt;/span&gt;)                                         
        wait(1)                                                                 
        cursor.execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;DROP COLUMNFAMILY Standard1&quot;&lt;/span&gt;)                           
                                                                                
        wait(3)                                                                 
                                                                                
        cursor.execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE COLUMNFAMILY Standard1 (KEY text PRIMARY KEY)&quot;&lt;/span&gt;)  
                                                                                
        tcompact.join()                                                         
 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Again, the error happens on cassandra-1.1, but not on cassandra-1.0.&lt;/p&gt;</description>
                <environment>&lt;p&gt;ccm, dtest, cassandra-1.1. The error does not happen in cassandra-1.0.&lt;/p&gt;</environment>
        <key id="12553932">CASSANDRA-4221</key>
            <summary>Error while deleting a columnfamily that is being compacted.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xedin">Pavel Yaskevich</assignee>
                                    <reporter username="tpatterson">Tyler Patterson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 May 2012 13:23:48 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:34 +0000</updated>
                            <resolved>Mon, 28 May 2012 18:26:32 +0000</resolved>
                                        <fixVersion>1.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13271649" author="xedin" created="Wed, 9 May 2012 18:13:35 +0000"  >&lt;p&gt;This one seems to be caused by the same problem as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4230&quot; title=&quot;Deleting a CF always produces an error and that CF remains in an unknown state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4230&quot;&gt;&lt;del&gt;CASSANDRA-4230&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13271653" author="jbellis" created="Wed, 9 May 2012 18:16:17 +0000"  >&lt;p&gt;Maybe, but I&apos;m skeptical &amp;#8211; 4230 is complaining about a file existing when it shouldn&apos;t, while this one says a file doesn&apos;t exist that should &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13271705" author="xedin" created="Wed, 9 May 2012 19:00:49 +0000"  >&lt;p&gt;Patch adds a try to stop all running compactions on given Keyspace or ColumnFamily before running a drop command. I have tried the test you have in the description and it ran without failures.&lt;/p&gt;</comment>
                            <comment id="13271710" author="jbellis" created="Wed, 9 May 2012 19:12:10 +0000"  >&lt;p&gt;That takes us back to the Bad Old Days pre-&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3116&quot; title=&quot;Compactions can (seriously) delay schema migrations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3116&quot;&gt;&lt;del&gt;CASSANDRA-3116&lt;/del&gt;&lt;/a&gt;, though.  We should be able to fix w/o resorting to A Big Lock.&lt;/p&gt;</comment>
                            <comment id="13271724" author="xedin" created="Wed, 9 May 2012 19:34:10 +0000"  >&lt;p&gt;For the KS or CF drop this seems necessary to try to wait until all running compactions finish otherwise it would end up in errors like one in the description, also other operations - create, update - are not affected by this.&lt;/p&gt;</comment>
                            <comment id="13271905" author="jbellis" created="Wed, 9 May 2012 22:54:23 +0000"  >&lt;p&gt;The idea from 3116 was:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Drop will only delete sstables not actively being compacted&lt;/li&gt;
	&lt;li&gt;post-compaction, we check if the CF was dropped, and if so we delete the sstables then&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13271922" author="xedin" created="Wed, 9 May 2012 23:06:52 +0000"  >&lt;p&gt;I don&apos;t know which one is better tho because if compaction fails for some reason which that scenario, wouldn&apos;t that mean that all SSTables that were left behind are staying until somebody manually deletes them (or restart would drop them)? We would have to add complexity to the schema merge just to handle that case as well as on the local side...&lt;/p&gt;</comment>
                            <comment id="13271927" author="xedin" created="Wed, 9 May 2012 23:10:18 +0000"  >&lt;p&gt;The other way would be to &apos;mark a CF for delete&apos; and return to the user right way (making CF invisible to users), sending the drop request to the others where they would apply the same thing (try to stop all compactions running, wait until they are done) and drop.&lt;/p&gt;</comment>
                            <comment id="13272038" author="jbellis" created="Thu, 10 May 2012 02:32:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;wouldn&apos;t that mean that all SSTables that were left behind are staying until somebody manually deletes them (or restart would drop them)? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We already clean up partially-written sstables after compaction failure, I don&apos;t see why we couldn&apos;t use similar logic here.&lt;/p&gt;</comment>
                            <comment id="13272451" author="xedin" created="Thu, 10 May 2012 16:14:35 +0000"  >&lt;p&gt;The problem I see that that is we need to do a snapshot before start dropping or deleting any CF files so it&apos;s probably better to make that drop option &apos;deferred&apos; until running compactions are stopped so we have a persistent view of the files we would have to operate upon.&lt;/p&gt;</comment>
                            <comment id="13272457" author="jbellis" created="Thu, 10 May 2012 16:19:46 +0000"  >&lt;p&gt;DataTracker already makes sstable changes atomic, though.  At any time you can snapshot with that and get a consistent view.&lt;/p&gt;</comment>
                            <comment id="13276866" author="jbellis" created="Wed, 16 May 2012 16:40:01 +0000"  >&lt;p&gt;Tyler, can you still reproduce after the recent schema fixes on the 1.1 branch?&lt;/p&gt;</comment>
                            <comment id="13277537" author="tpatterson" created="Thu, 17 May 2012 04:15:07 +0000"  >&lt;p&gt;Yes, the error just happened again for me. I did a fresh pull on branch branch cassandra-1.1.&lt;/p&gt;</comment>
                            <comment id="13277706" author="xedin" created="Thu, 17 May 2012 10:27:08 +0000"  >&lt;p&gt;Interesting, I can&apos;t reproduce it myself. Can you please run it with logging patch attached (and enabled DEBUG logging) and attach debug log from your C* node to this task, so I can check that is happening inside of DataTracker in your case?... &lt;/p&gt;</comment>
                            <comment id="13278028" author="tpatterson" created="Thu, 17 May 2012 17:59:49 +0000"  >&lt;p&gt;This was after applying both patches to the cassandra-1.1 branch, and setting logging to DEBUG.&lt;/p&gt;</comment>
                            <comment id="13278043" author="tpatterson" created="Thu, 17 May 2012 18:13:28 +0000"  >&lt;p&gt;Somehow that server.log did not have the debug info. Looking into it now.&lt;/p&gt;</comment>
                            <comment id="13278206" author="tpatterson" created="Thu, 17 May 2012 20:12:09 +0000"  >&lt;p&gt;Debug is enabled now; It looks like CCM overwrites the log level. Only the logging patch was applied in this run. &lt;/p&gt;</comment>
                            <comment id="13278219" author="xedin" created="Thu, 17 May 2012 20:23:44 +0000"  >&lt;p&gt;I see debug information I added right now, but there is no IOError in that log described in this task...&lt;/p&gt;</comment>
                            <comment id="13278946" author="tpatterson" created="Fri, 18 May 2012 16:49:08 +0000"  >&lt;p&gt;So after some experimentation, the problem is only happening when the log level is set to INFO, but it doesn&apos;t happen at DEBUG. Gotta love these ones! I modified the logging patch to do logging.info() rather then logging.debug(), and the problem still happens, so at least you can see those debug messages. I hope this is enough to go on.&lt;/p&gt;</comment>
                            <comment id="13279130" author="xedin" created="Fri, 18 May 2012 19:58:05 +0000"  >&lt;p&gt;Hah, now I know what is causing it - it&apos;s not a drop problem, the situation is triggered when you re-create ColumnFamily right after drop &lt;ins&gt;(before all SSTables were actually deleted by background task)&lt;/ins&gt; so it reads up all SSTables in the directory back to system and tries to compact them simultaneously with them being deleted in the background. That is why we warn people to &lt;b&gt;avoid&lt;/b&gt; making any modifications to the active CFs otherwise it could lead to the strange situations like this one.&lt;/p&gt;</comment>
                            <comment id="13279580" author="jbellis" created="Sat, 19 May 2012 16:31:53 +0000"  >&lt;p&gt;Would this be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3794&quot; title=&quot;Avoid ID conflicts from concurrent schema changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3794&quot;&gt;&lt;del&gt;CASSANDRA-3794&lt;/del&gt;&lt;/a&gt; then, since old and new CF will have different IDs?&lt;/p&gt;</comment>
                            <comment id="13279618" author="xedin" created="Sat, 19 May 2012 21:45:30 +0000"  >&lt;p&gt;Not really because it generates UUID from ksName + cfName to be able make it the same across all machines independent of their state.&lt;/p&gt;</comment>
                            <comment id="13279622" author="jbellis" created="Sat, 19 May 2012 22:19:51 +0000"  >&lt;p&gt;Should we just add a call to abort in-progress compactions at drop time (which will help cleanup happen faster) and call that &quot;as close as we&apos;re going to get?&quot;&lt;/p&gt;</comment>
                            <comment id="13279624" author="xedin" created="Sat, 19 May 2012 22:28:30 +0000"  >&lt;p&gt;This is what I did in my patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13281955" author="jbellis" created="Wed, 23 May 2012 21:53:22 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stopCompactionFor should take CFS parameters instead of String&lt;/li&gt;
	&lt;li&gt;I don&apos;t see any reason to not wait indefinitely here; in fact, if we make sure to wait until compaction finishes, the odds are much better that when we tell the client &quot;all done&quot; he won&apos;t be able to send a &quot;create&quot; quickly enough to hit the bug&lt;/li&gt;
	&lt;li&gt;Need to call stopCompactionFor on every replica, not just CompactionServer &amp;#8211; move this to DefsTable.dropColumnFamily?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13281982" author="xedin" created="Wed, 23 May 2012 22:21:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;stopCompactionFor should take CFS parameters instead of String&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t really follow here, if you want it to have list of CFMetaData instead of String? String is better suited because CompactionInfo.getColumnFamily() returns a String (CF name).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I don&apos;t see any reason to not wait indefinitely here; in fact, if we make sure to wait until compaction finishes, the odds are much better that when we tell the client &quot;all done&quot; he won&apos;t be able to send a &quot;create&quot; quickly enough to hit the bug&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We don&apos;t really try to wait indefinitely here, just for 30 seconds (worst case), if compactions don&apos;t finish until then we just move on with delete. do you want it to wait until all compactions  to finish?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Need to call stopCompactionFor on every replica, not just CompactionServer &#8211; move this to DefsTable.dropColumnFamily?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, I&apos;m going to move that into dropColumnFamily call so it gets called on the replicas too.&lt;/p&gt;</comment>
                            <comment id="13281986" author="jbellis" created="Wed, 23 May 2012 22:24:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;String is better suited because CompactionInfo.getColumnFamily() returns a String &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Feel free to fix that. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;if compactions don&apos;t finish until then we just move on with delete&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It throws IOException.&lt;/p&gt;

&lt;p&gt;Remember that we check for ability to abort compaction every row; if we&apos;re compacting a wide row, it could easily take over 30s w/ throttling.&lt;/p&gt;</comment>
                            <comment id="13282007" author="xedin" created="Wed, 23 May 2012 22:47:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;It throws IOException. Remember that we check for ability to abort compaction every row; if we&apos;re compacting a wide row, it could easily take over 30s w/ throttling.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oh yes, sorry. I think we can just remove that exception and move on with drop, or do you want it to until all compactions finish?&lt;/p&gt;
</comment>
                            <comment id="13284436" author="jbellis" created="Mon, 28 May 2012 15:33:02 +0000"  >&lt;p&gt;v3 attached.  removes CompactionInfo fields that are redundant w/ the introduction of CFM, and removes the wait from the stop method (it doesn&apos;t help clean up the sstables involved any faster, so there is no point in slowing down the drop for it).&lt;/p&gt;</comment>
                            <comment id="13284504" author="xedin" created="Mon, 28 May 2012 18:26:32 +0000"  >&lt;p&gt;Committed with nit in CompactionInfo.getColumnFamily() to return cfName instead of ksName as in v3.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12529964" name="4221-v3.txt" size="11345" author="jbellis" created="Mon, 28 May 2012 15:33:02 +0000"/>
                            <attachment id="12527820" name="CASSANDRA-4221-logging.patch" size="4186" author="xedin" created="Thu, 17 May 2012 10:27:07 +0000"/>
                            <attachment id="12529726" name="CASSANDRA-4221-v2.patch" size="5861" author="xedin" created="Fri, 25 May 2012 15:02:13 +0000"/>
                            <attachment id="12526198" name="CASSANDRA-4221.patch" size="5206" author="xedin" created="Wed, 9 May 2012 19:35:41 +0000"/>
                            <attachment id="12528099" name="system.log" size="70194" author="tpatterson" created="Fri, 18 May 2012 16:49:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gtef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96193</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>