<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:03:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11393] dtest failure in upgrade_tests.upgrade_through_versions_test.ProtoV3Upgrade_2_1_UpTo_3_0_HEAD.rolling_upgrade_test</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11393</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We are seeing a failure in the upgrade tests that go from 2.1 to 3.0&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;node2: ERROR [SharedPool-Worker-2] 2016-03-10 20:05:17,865 Message.java:611 - Unexpected exception during request; channel = [id: 0xeb79b477, /127.0.0.1:39613 =&amp;gt; /127.0.0.2:9042]
java.lang.AssertionError: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.cassandra.db.ReadCommand$LegacyReadCommandSerializer.serializedSize(ReadCommand.java:1208) ~[main/:na]
	at org.apache.cassandra.db.ReadCommand$LegacyReadCommandSerializer.serializedSize(ReadCommand.java:1155) ~[main/:na]
	at org.apache.cassandra.net.MessageOut.payloadSize(MessageOut.java:166) ~[main/:na]
	at org.apache.cassandra.net.OutboundTcpConnectionPool.getConnection(OutboundTcpConnectionPool.java:72) ~[main/:na]
	at org.apache.cassandra.net.MessagingService.getConnection(MessagingService.java:609) ~[main/:na]
	at org.apache.cassandra.net.MessagingService.sendOneWay(MessagingService.java:758) ~[main/:na]
	at org.apache.cassandra.net.MessagingService.sendRR(MessagingService.java:701) ~[main/:na]
	at org.apache.cassandra.net.MessagingService.sendRRWithFailure(MessagingService.java:684) ~[main/:na]
	at org.apache.cassandra.service.AbstractReadExecutor.makeRequests(AbstractReadExecutor.java:110) ~[main/:na]
	at org.apache.cassandra.service.AbstractReadExecutor.makeDataRequests(AbstractReadExecutor.java:85) ~[main/:na]
	at org.apache.cassandra.service.AbstractReadExecutor$AlwaysSpeculatingReadExecutor.executeAsync(AbstractReadExecutor.java:330) ~[main/:na]
	at org.apache.cassandra.service.StorageProxy$SinglePartitionReadLifecycle.doInitialQueries(StorageProxy.java:1699) ~[main/:na]
	at org.apache.cassandra.service.StorageProxy.fetchRows(StorageProxy.java:1654) ~[main/:na]
	at org.apache.cassandra.service.StorageProxy.readRegular(StorageProxy.java:1601) ~[main/:na]
	at org.apache.cassandra.service.StorageProxy.read(StorageProxy.java:1520) ~[main/:na]
	at org.apache.cassandra.db.SinglePartitionReadCommand.execute(SinglePartitionReadCommand.java:302) ~[main/:na]
	at org.apache.cassandra.service.pager.AbstractQueryPager.fetchPage(AbstractQueryPager.java:67) ~[main/:na]
	at org.apache.cassandra.service.pager.SinglePartitionPager.fetchPage(SinglePartitionPager.java:34) ~[main/:na]
	at org.apache.cassandra.cql3.statements.SelectStatement$Pager$NormalPager.fetchPage(SelectStatement.java:297) ~[main/:na]
	at org.apache.cassandra.cql3.statements.SelectStatement.execute(SelectStatement.java:333) ~[main/:na]
	at org.apache.cassandra.cql3.statements.SelectStatement.execute(SelectStatement.java:209) ~[main/:na]
	at org.apache.cassandra.cql3.statements.SelectStatement.execute(SelectStatement.java:76) ~[main/:na]
	at org.apache.cassandra.cql3.QueryProcessor.processStatement(QueryProcessor.java:206) ~[main/:na]
	at org.apache.cassandra.cql3.QueryProcessor.processPrepared(QueryProcessor.java:472) ~[main/:na]
	at org.apache.cassandra.cql3.QueryProcessor.processPrepared(QueryProcessor.java:449) ~[main/:na]
	at org.apache.cassandra.transport.messages.ExecuteMessage.execute(ExecuteMessage.java:130) ~[main/:na]
	at org.apache.cassandra.transport.Message$Dispatcher.channelRead0(Message.java:507) [main/:na]
	at org.apache.cassandra.transport.Message$Dispatcher.channelRead0(Message.java:401) [main/:na]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) [netty-all-4.0.23.Final.jar:4.0.23.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:333) [netty-all-4.0.23.Final.jar:4.0.23.Final]
	at io.netty.channel.AbstractChannelHandlerContext.access$700(AbstractChannelHandlerContext.java:32) [netty-all-4.0.23.Final.jar:4.0.23.Final]
	at io.netty.channel.AbstractChannelHandlerContext$8.run(AbstractChannelHandlerContext.java:324) [netty-all-4.0.23.Final.jar:4.0.23.Final]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_51]
	at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) [main/:na]
	at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:105) [main/:na]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745) [na:1.8.0_51]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;example failure:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/job/upgrade_tests-all/24/testReport/upgrade_tests.upgrade_through_versions_test/ProtoV3Upgrade_2_1_UpTo_3_0_HEAD/rolling_upgrade_test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/upgrade_tests-all/24/testReport/upgrade_tests.upgrade_through_versions_test/ProtoV3Upgrade_2_1_UpTo_3_0_HEAD/rolling_upgrade_test&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Failed on CassCI build upgrade_tests-all #24&lt;/p&gt;

&lt;p&gt;The stack trace and context match that of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10122&quot; title=&quot;AssertionError after upgrade to 3.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10122&quot;&gt;&lt;del&gt;CASSANDRA-10122&lt;/del&gt;&lt;/a&gt;. It looks like it may be the same issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952115">CASSANDRA-11393</key>
            <summary>dtest failure in upgrade_tests.upgrade_through_versions_test.ProtoV3Upgrade_2_1_UpTo_3_0_HEAD.rolling_upgrade_test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blerer">Benjamin Lerer</assignee>
                                    <reporter username="philipthompson">Philip Thompson</reporter>
                        <labels>
                            <label>dtest</label>
                    </labels>
                <created>Mon, 21 Mar 2016 18:04:48 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:38 +0000</updated>
                            <resolved>Thu, 14 Jul 2016 09:56:39 +0000</resolved>
                                        <fixVersion>3.0.9</fixVersion>
                    <fixVersion>3.8</fixVersion>
                                    <component>Legacy/Coordination</component>
                    <component>Legacy/Streaming and Messaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15220159" author="philipthompson" created="Thu, 31 Mar 2016 16:35:36 +0000"  >&lt;p&gt;I am now also seeing this in another upgrade test, upgrade_internal_auth_test.py:TestAuthUpgrade.upgrade_to_30_test&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.0_dtest/633/testReport/upgrade_internal_auth_test/TestAuthUpgrade/upgrade_to_30_test/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-3.0_dtest/633/testReport/upgrade_internal_auth_test/TestAuthUpgrade/upgrade_to_30_test/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15223980" author="blerer" created="Mon, 4 Apr 2016 11:51:38 +0000"  >&lt;p&gt;The failure in &lt;tt&gt;upgrade_internal_auth_test.py:TestAuthUpgrade.upgrade_to_30_test&lt;/tt&gt; does not seems to be the same as the original one.&lt;br/&gt;
I could not reproduce the problem but the stacktrace lead me to the following code in &lt;tt&gt;MessagingService&lt;/tt&gt; in cassandra 3.0:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getVersion(InetAddress endpoint)
    {
        &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; v = versions.get(endpoint);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (v == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        {
            &lt;span class=&quot;code-comment&quot;&gt;// we don&lt;span class=&quot;code-quote&quot;&gt;&apos;t know the version. assume current. we&apos;&lt;/span&gt;ll know soon enough &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; that was incorrect.
&lt;/span&gt;            logger.trace(&lt;span class=&quot;code-quote&quot;&gt;&quot;Assuming current protocol version &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; {}&quot;&lt;/span&gt;, endpoint);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MessagingService.current_version;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.min(v, MessagingService.current_version);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The problem seems to be that when the message is build in &lt;tt&gt;AbstractReadExecutor&lt;/tt&gt;, &lt;tt&gt;MessagingService&lt;/tt&gt; does not know yet the current version of the endPoint. Due to that it fallbacks to &lt;tt&gt;MessagingService.current_version&lt;/tt&gt; and the &lt;tt&gt;MessageOut&lt;/tt&gt; is created with &lt;tt&gt;ReadCommand.Serializer&lt;/tt&gt; instead of &lt;tt&gt;ReadCommand.LegacyReadCommandSerializer&lt;/tt&gt;. When the &lt;tt&gt;MessageOut.payloadSize&lt;/tt&gt; is called the proper version of the endpoint has been determined and we run into the assertion. &lt;/p&gt;

&lt;p&gt;I think we could avoid that problem by excluding the endPoint in &lt;tt&gt;StorageService.getLiveNaturalEndpoints&lt;/tt&gt; if we are not able to determine its version.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt; what do you think?&lt;/p&gt;</comment>
                            <comment id="15223988" author="blerer" created="Mon, 4 Apr 2016 12:02:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;The failure in upgrade_internal_auth_test.py:TestAuthUpgrade.upgrade_to_30_test does not seems to be the same as the original one.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;My initial statement is probably wrong. It is possible that the problem is caused by a similar issue.&lt;br/&gt;
If the node that the coordinator (3.0) is trying to query was initially on version 2.1 but has been upgraded to 3.0. &lt;/p&gt;

&lt;p&gt;In this case excluding the endPoint will not work as we have a version but the version is just the old one.&lt;/p&gt;
</comment>
                            <comment id="15223991" author="slebresne" created="Mon, 4 Apr 2016 12:05:34 +0000"  >&lt;p&gt;That sounds a lot like &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11128&quot; title=&quot;Unexpected exception during request; AssertionError: null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11128&quot;&gt;&lt;del&gt;CASSANDRA-11128&lt;/del&gt;&lt;/a&gt;. Are we sure that the initial test was done against a patch that incorporated the fix for that ticket? Especially if &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; can&apos;t reproduce, this might just be a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11128&quot; title=&quot;Unexpected exception during request; AssertionError: null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11128&quot;&gt;&lt;del&gt;CASSANDRA-11128&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15226128" author="blerer" created="Tue, 5 Apr 2016 12:01:35 +0000"  >&lt;p&gt;It seems that the problem is that the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11128&quot; title=&quot;Unexpected exception during request; AssertionError: null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11128&quot;&gt;&lt;del&gt;CASSANDRA-11128&lt;/del&gt;&lt;/a&gt; has not been merged into 3.0.&lt;/p&gt;</comment>
                            <comment id="15226247" author="blerer" created="Tue, 5 Apr 2016 13:30:32 +0000"  >&lt;p&gt;I am claused the issue thinking that the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11128&quot; title=&quot;Unexpected exception during request; AssertionError: null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11128&quot;&gt;&lt;del&gt;CASSANDRA-11128&lt;/del&gt;&lt;/a&gt; had not been committed in 3.0. As the patch has effectively been committed it means that we still have a problem. &lt;/p&gt;</comment>
                            <comment id="15226377" author="blerer" created="Tue, 5 Apr 2016 14:39:13 +0000"  >&lt;p&gt;I believe based on the different stack traces that we have in reality 2 different scenarios:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;In the case where the assertion is thrown by the &lt;tt&gt;LegacyReadCommandSerializer&lt;/tt&gt; the problem is caused by the fact that the coordinator though at the time where the message was created that the replica was on version 2.1 and that it discover before serializing the message that the replica has been upgraded to version 3.0.&lt;/li&gt;
	&lt;li&gt;In the case where the assertion is thrown by the &lt;tt&gt;ReadCommandSerializer&lt;/tt&gt; the problem is caused by the fact that the coordinator though at the time where the message was created that the replica was on version 3.0 and that it discover before serializing the message that the replica is in fact a 2.1 node. My guess is that this case could happen if the coordinator has just restarted and that the message creation is performed just after the endPoint has been added and before the version is set (MessageService returns the current version if it has no version associated to the end point).&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15249024" author="rhatch" created="Wed, 20 Apr 2016 00:25:32 +0000"  >&lt;p&gt;Not sure what the state of things are here, but just adding in case this helpts, this still appears to be happening on 3.0, as this issue was seen on recent 2.1 upgrading to 3.0 tests.&lt;/p&gt;</comment>
                            <comment id="15290650" author="blerer" created="Thu, 19 May 2016 07:57:39 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;utests&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;dtests&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11393-3.0-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11393-3.0-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11393-3.7-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.7&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11393-3.7-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.7&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;The idea of the patch is to wait until the message is being send to decide which serializer must be used. &lt;br/&gt;
It is possible that at the time where the connection is retrieved from the &lt;tt&gt;OutboundTcpConnectionPool&lt;/tt&gt; the version has not been retrieved yet and the payload size is computed wrongly. If it is the case the wrong connection might be choosen but it should not cause the request to fail and the payload size will be recomputed properly later on.&lt;/p&gt;

&lt;p&gt;One side effect of the patch is that the &lt;tt&gt;PAGED_RANGE&lt;/tt&gt; verb will be used instead of the &lt;tt&gt;RANGE_SLICE&lt;/tt&gt; one if the replica is a &lt;tt&gt;3.x&lt;/tt&gt; one and the query is a partition range query. &lt;/p&gt;</comment>
                            <comment id="15348521" author="rhatch" created="Fri, 24 Jun 2016 16:24:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; If you&apos;d like, I can build a custom dtest branch to test these changes on the upgrade suite. I just need to know what version combinations you want tested and can take it from there. For point to point upgrades (A-&amp;gt;B) we get the most tests, but they can also be the form of multiple upgrades (A-&amp;gt;B-&amp;gt;....N), but that type of test is much more limited in scope. Both varieties is fine too, they aren&apos;t mutually exclusive.&lt;/p&gt;</comment>
                            <comment id="15350332" author="stefania" created="Mon, 27 Jun 2016 01:52:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhatch&quot; class=&quot;user-hover&quot; rel=&quot;rhatch&quot;&gt;rhatch&lt;/a&gt;, if you encounter any &quot;LEAK DETECTED&quot; errors in your tests, we have &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11767&quot; title=&quot;dtest failure in upgrade_tests.upgrade_through_versions_test.ProtoV3Upgrade_AllVersions_EndsAt_Trunk_HEAD.rolling_upgrade_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11767&quot;&gt;&lt;del&gt;CASSANDRA-11767&lt;/del&gt;&lt;/a&gt; open for them. Would it be possible to run the tests with &lt;tt&gt;-Dcassandra.debugrefcount=true&lt;/tt&gt;, so we avoid repeating the tests twice? &lt;/p&gt;</comment>
                            <comment id="15350495" author="blerer" created="Mon, 27 Jun 2016 07:08:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhatch&quot; class=&quot;user-hover&quot; rel=&quot;rhatch&quot;&gt;rhatch&lt;/a&gt; The problem is a race condition during upgrade from 2.X to 3.X. Upgrades within 2.X or 3.X will not suffer from that problem. &lt;/p&gt;</comment>
                            <comment id="15351420" author="rhatch" created="Mon, 27 Jun 2016 17:16:43 +0000"  >&lt;p&gt;I&apos;m not familiar with that setting, is it something we should have set by default on the regular upgrade jobs?&lt;/p&gt;</comment>
                            <comment id="15351449" author="rhatch" created="Mon, 27 Jun 2016 17:32:44 +0000"  >&lt;p&gt;OK, I&apos;ll put together a dtest branch to test:&lt;/p&gt;

&lt;p&gt;2.1.latest -&amp;gt; your 3.0 branch&lt;br/&gt;
2.2.latest -&amp;gt; your 3.0 branch&lt;br/&gt;
2.1.latest -&amp;gt; your 3.7 branch&lt;br/&gt;
2.2.latest -&amp;gt; your 3.7 branch&lt;/p&gt;

&lt;p&gt;Any other useful cases?&lt;/p&gt;</comment>
                            <comment id="15352106" author="rhatch" created="Tue, 28 Jun 2016 00:14:54 +0000"  >&lt;p&gt;dtest branch here: &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/compare/ca11393?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/riptano/cassandra-dtest/compare/ca11393?expand=1&lt;/a&gt;&lt;br/&gt;
upgrade job queued here: &lt;a href=&quot;http://cassci.datastax.com/view/Upgrades/job/upgrade_tests-all-custom_branch_runs/35/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Upgrades/job/upgrade_tests-all-custom_branch_runs/35/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;don&apos;t panic if the job above fails, I&apos;ve been having some intermittent problems with that job failing lately, can re-run if needed.&lt;/p&gt;</comment>
                            <comment id="15352183" author="stefania" created="Tue, 28 Jun 2016 01:39:13 +0000"  >&lt;p&gt;If we set it by default, it might slow things things a bit, you need to perhaps measure the time difference in running the tests before deciding. This setting will show us the call stack of LEAKED resources, therefore allowing us to fix the LEAK errors reported by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11767&quot; title=&quot;dtest failure in upgrade_tests.upgrade_through_versions_test.ProtoV3Upgrade_AllVersions_EndsAt_Trunk_HEAD.rolling_upgrade_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11767&quot;&gt;&lt;del&gt;CASSANDRA-11767&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15357622" author="thobbs" created="Thu, 30 Jun 2016 18:34:20 +0000"  >&lt;p&gt;Looks like there were a lot of failures.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; can you tell what&apos;s going on there?&lt;/p&gt;</comment>
                            <comment id="15357666" author="blerer" created="Thu, 30 Jun 2016 19:07:35 +0000"  >&lt;p&gt;The ticket has been in patch available for more than a month and I did not rebase it since then. So it might be the problem. I will do a rebase tommorrow and rerun the tests to see if it improve the situation.&lt;/p&gt;</comment>
                            <comment id="15363052" author="blerer" created="Tue, 5 Jul 2016 19:18:01 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;utests&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;dtests&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11393-3.0-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11393-3.0-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11393-3.9-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.9&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11393-3.9-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;I have rebased the branches.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhatch&quot; class=&quot;user-hover&quot; rel=&quot;rhatch&quot;&gt;rhatch&lt;/a&gt; could you modify the tests to use my 3.9 branch?&lt;/p&gt;</comment>
                            <comment id="15373953" author="rhatch" created="Tue, 12 Jul 2016 23:33:28 +0000"  >&lt;p&gt;Sorry I missed this earlier. I updated the dtest branch to point to your 3.0/3.9 branches, and I&apos;ve got another test run kicked off over here: &lt;a href=&quot;http://cassci.datastax.com/view/Upgrades/job/upgrade_tests-all-custom_branch_runs/43/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Upgrades/job/upgrade_tests-all-custom_branch_runs/43/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15375621" author="thobbs" created="Wed, 13 Jul 2016 19:49:32 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15376700" author="blerer" created="Thu, 14 Jul 2016 09:56:40 +0000"  >&lt;p&gt;Thanks for the review.&lt;br/&gt;
Committed into 3.0 at fbd287ad2ed09190dd9c6e152b82215e81020847 and merged into 3.9 and trunk &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12937226">CASSANDRA-11128</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12969234">CASSANDRA-11767</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12804892" name="11393-3.0.txt" size="17064" author="blerer" created="Thu, 19 May 2016 07:57:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uyyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>