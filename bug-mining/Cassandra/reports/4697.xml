<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:07:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13333] Cassandra does not start on Windows due to &apos;JNA link failure&apos;</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13333</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Cassandra 3.0 HEAD does not start on Windows. The only error in the logs is: &lt;br/&gt;
&lt;tt&gt;ERROR 16:30:10 JNA failing to initialize properly.&lt;/tt&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13056345">CASSANDRA-13333</key>
            <summary>Cassandra does not start on Windows due to &apos;JNA link failure&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blerer">Benjamin Lerer</assignee>
                                    <reporter username="blerer">Benjamin Lerer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Mar 2017 16:31:05 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:59 +0000</updated>
                            <resolved>Tue, 28 Mar 2017 15:19:29 +0000</resolved>
                                                            <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15927018" author="jasobrown" created="Wed, 15 Mar 2017 21:30:35 +0000"  >&lt;p&gt;caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13233&quot; title=&quot;Improve testing on macOS by eliminating sigar logging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13233&quot;&gt;&lt;del&gt;CASSANDRA-13233&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkjellman&quot; class=&quot;user-hover&quot; rel=&quot;mkjellman&quot;&gt;mkjellman&lt;/a&gt;, you don&apos;t happen have a Windows machine to investigate this, perchance? (pretty sure you do not)&lt;/p&gt;</comment>
                            <comment id="15927120" author="blerer" created="Wed, 15 Mar 2017 22:43:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkjellman&quot; class=&quot;user-hover&quot; rel=&quot;mkjellman&quot;&gt;mkjellman&lt;/a&gt; if you want I can investigate it. It seems that I am one of the only Windows dev around here.  &lt;/p&gt;</comment>
                            <comment id="15927129" author="jasobrown" created="Wed, 15 Mar 2017 22:50:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; Sorry to give you more work, but the help is much appreciated!&lt;/p&gt;</comment>
                            <comment id="15928895" author="mkjellman" created="Thu, 16 Mar 2017 20:59:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; I don&apos;t have a Windows machine to test this unfortunately... but, I do know what&apos;s going on, although I&apos;m not sure about the correct fix.&lt;/p&gt;

&lt;p&gt;The following code from &lt;tt&gt;StartupChecks&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; StartupCheck checkJnaInitialization = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StartupCheck()
    {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void execute() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; StartupException
        {
            &lt;span class=&quot;code-comment&quot;&gt;// Fail-fast &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; JNA is not available or failing to initialize properly
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!CLibrary.jnaAvailable())
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StartupException(StartupException.ERR_WRONG_MACHINE_STATE, &lt;span class=&quot;code-quote&quot;&gt;&quot;JNA failing to initialize properly. &quot;&lt;/span&gt;);
        }
    };
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is due to the fact that when I implemented the Windows &lt;tt&gt;CLibraryWrapper&lt;/tt&gt; implementation &lt;tt&gt;CLibraryWindows&lt;/tt&gt;, I had it return false for jnaAvailable(). Given that we only use JNA right now to access libc calls I wasn&apos;t aware that any of those would be implemented in JNA to do something in Windows.&lt;/p&gt;

&lt;p&gt;If that&apos;s not correct, I&apos;ll throw a very quick patch together to load JNA in the Windows implementation, but I&apos;ll still need some help to know what wrapped methods actually work on Windows.&lt;/p&gt;

&lt;p&gt;Should the startup check just be exempted for Windows?&lt;/p&gt;</comment>
                            <comment id="15929645" author="blerer" created="Fri, 17 Mar 2017 09:26:42 +0000"  >&lt;p&gt;I went to look into how the things were working before the &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13233&quot; title=&quot;Improve testing on macOS by eliminating sigar logging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13233&quot;&gt;&lt;del&gt;CASSANDRA-13233&lt;/del&gt;&lt;/a&gt; changes.&lt;br/&gt;
The code does a difference between JNA not being there and the fact that it could not link a library. In the first case &lt;tt&gt;jnaAvailable()&lt;/tt&gt; must return &lt;tt&gt;false&lt;/tt&gt; but in the second case it should return &lt;tt&gt;true&lt;/tt&gt; (and an error message should have been logged). The new implementation always return &lt;tt&gt;false&lt;/tt&gt; even if the library is actually there.&lt;br/&gt;
So, to keep the existing behaviour, we would need to check if JNA is here and throw the appropriate errors. The easier way would probably to also have the following code in &lt;tt&gt;CLibraryWindows&lt;/tt&gt; but it feels a bit weird:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
        {
            Native.register(&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NoClassDefFoundError e)
        {
            logger.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;JNA not found. Native methods will be disabled.&quot;&lt;/span&gt;);
            jnaAvailable = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (UnsatisfiedLinkError e)
        {
            logger.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;JNA link failure, one or more &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; method will be unavailable.&quot;&lt;/span&gt;);
            logger.trace(&lt;span class=&quot;code-quote&quot;&gt;&quot;JNA link failure details: {}&quot;&lt;/span&gt;, e.getMessage());
        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NoSuchMethodError e)
        {
            logger.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Obsolete version of JNA present; unable to register C library. Upgrade to JNA 3.2.7 or later&quot;&lt;/span&gt;);
            jnaAvailable = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Any suggestions?&lt;/p&gt;</comment>
                            <comment id="15929959" author="blerer" created="Fri, 17 Mar 2017 13:21:21 +0000"  >&lt;p&gt;I did a bit of digging. JNA is actually used on &lt;tt&gt;Windows&lt;/tt&gt; by &lt;tt&gt;org.apache.cassandra.utils.WindowsTimer&lt;/tt&gt;. So it makes sense to block startup if JNA is not there. &lt;/p&gt;
</comment>
                            <comment id="15929978" author="jmckenzie" created="Fri, 17 Mar 2017 13:33:55 +0000"  >&lt;p&gt;It&apos;s not worth disabling startup due to an inability to access winmm.dll. I used that to access the multimedia timer to change the kernel&apos;s timer coalescing which is strictly a performance improvement and shouldn&apos;t block startup of a node.&lt;/p&gt;</comment>
                            <comment id="15930006" author="blerer" created="Fri, 17 Mar 2017 14:00:54 +0000"  >&lt;p&gt;Then does it really make sense to keep the &lt;tt&gt;jnaAvailable()&lt;/tt&gt; method? Right now, that check does not really bring much because if the library cannot be linked the server will start anyway.&lt;br/&gt;
Is a warning in the log not enough? I really wonder if anybody is really using the NativeMBean to check that jna and mlock are available.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkjellman&quot; class=&quot;user-hover&quot; rel=&quot;mkjellman&quot;&gt;mkjellman&lt;/a&gt; what is your opinion on that?&lt;/p&gt;</comment>
                            <comment id="15930023" author="blerer" created="Fri, 17 Mar 2017 14:17:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dbrosius&quot; class=&quot;user-hover&quot; rel=&quot;dbrosius&quot;&gt;dbrosius&lt;/a&gt; you are the one that exposed the information through JMX. Is it something that you really need?&lt;/p&gt;</comment>
                            <comment id="15930034" author="blerer" created="Fri, 17 Mar 2017 14:24:25 +0000"  >&lt;p&gt;Sorry, I missed the comment pointing at &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5508&quot; title=&quot;Expose whether jna is enabled and memory is locked via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5508&quot;&gt;&lt;del&gt;CASSANDRA-5508&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;
</comment>
                            <comment id="15930052" author="blerer" created="Fri, 17 Mar 2017 14:38:06 +0000"  >&lt;p&gt;Another approach would be to convert  &lt;tt&gt;jnaAvailable()&lt;/tt&gt; into &lt;tt&gt;isAvailable()&lt;/tt&gt;. This method will return &lt;tt&gt;true&lt;/tt&gt; if the library has been successfully linked and &lt;tt&gt;false&lt;/tt&gt; otherwise. The startup check will then check, if the operating system is not Windows, that the library has been successfully linked and prevent the system to start if it has not.&lt;/p&gt;</comment>
                            <comment id="15930068" author="jeromatron" created="Fri, 17 Mar 2017 14:49:02 +0000"  >&lt;p&gt;I think it&apos;s reasonable to not hold up startup if we can still issue a warning and still keep the state whether it was able to use JNA to lock memory.&lt;/p&gt;</comment>
                            <comment id="15930281" author="dbrosius" created="Fri, 17 Mar 2017 16:46:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; i added it for someone else, so no i don&apos;t personally need it&lt;/p&gt;</comment>
                            <comment id="15930330" author="blerer" created="Fri, 17 Mar 2017 17:19:08 +0000"  >&lt;p&gt;I have pushed an initial version of the patch &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blerer:13333-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;br/&gt;
The patch replace the &lt;tt&gt;jnaAvailable()&lt;/tt&gt; method by the &lt;tt&gt;isAvailable()&lt;/tt&gt; method which will return &lt;tt&gt;true&lt;/tt&gt; only if the library has been sucessfully linked.&lt;br/&gt;
In the case of Windows &lt;tt&gt;isAvailable()&lt;/tt&gt; will always return &lt;tt&gt;false&lt;/tt&gt;.&lt;br/&gt;
The patch remove the startup check so the server will start even if JNA is not found (in which case a warning would have already been logged).&lt;br/&gt;
The &lt;tt&gt;NativeAccessMBean::isAvailable&lt;/tt&gt; method will now only return &lt;tt&gt;true&lt;/tt&gt; if the native library has been successfully linked.  &lt;/p&gt;

&lt;p&gt;If nobody disagree with the approach, I will push it on CI next week. &lt;/p&gt;</comment>
                            <comment id="15934880" author="blerer" created="Tue, 21 Mar 2017 16:52:41 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blerer:13333-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blerer:13333-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-3.11-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-3.11-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blerer:13333-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkjellman&quot; class=&quot;user-hover&quot; rel=&quot;mkjellman&quot;&gt;mkjellman&lt;/a&gt; could one of you review the patches. Only 3.0 and 3.11 differ a bit. &lt;/p&gt;</comment>
                            <comment id="15935346" author="mkjellman" created="Tue, 21 Mar 2017 21:13:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Just chatted quickly with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjirsa&quot; class=&quot;user-hover&quot; rel=&quot;jjirsa&quot;&gt;jjirsa&lt;/a&gt; and I think hiding the fact we&apos;re using JNA under the hood and going with &lt;tt&gt;isAvailable()&lt;/tt&gt; vs. &lt;tt&gt;jnaAvailable()}] is a good change, however, I think that changes the scope a bit. In the case of {{CLibraryWindows&lt;/tt&gt; I used the existing Sigar based logic to get the current PID of the running JVM as I wasn&apos;t sure if the *nix APIs would work in Windows land. Thinking about it, this means &lt;tt&gt;isAvailable()&lt;/tt&gt; is a bit more nuanced. For instance, in the current &lt;tt&gt;CLibraryWindows&lt;/tt&gt; case, yes, the &lt;tt&gt;callGetpid()&lt;/tt&gt; method is &quot;available&quot; but all the other methods that we happen to have right now use JNA, which isn&apos;t &quot;available&quot; in the Windows case.&lt;/li&gt;
	&lt;li&gt;Do you happen to know if the native &lt;tt&gt;getpid()&lt;/tt&gt; JNA will work on Windows? If so we can switch that from Sigar -&amp;gt; JNA for Windows too just like we&apos;re already doing for the Linux/Darwin case. If so, it makes sense to attempt to load JNA and libc in the WIndows case too?&lt;/li&gt;
	&lt;li&gt;I don&apos;t think we should remove the checkJnaInitialization &lt;tt&gt;StartupCheck&lt;/tt&gt; at minimum in the Linux and Darwin cases. Given that we ship JNA in the release, either we can&apos;t link against the library it due to an issue or someone removed it. Given the performance implications I think we should leave the hard fail in place &amp;#8211; but skip it if the current OS type is  Windows.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15937079" author="blerer" created="Wed, 22 Mar 2017 20:36:20 +0000"  >&lt;p&gt;I force pushed a new patch.&lt;br/&gt;
The new patch use the &lt;tt&gt;Kernel32&lt;/tt&gt; library to support natively the &lt;tt&gt;callGetPid&lt;/tt&gt; method and keep the startup check. As the Windows library is not the &lt;tt&gt;c&lt;/tt&gt; one, the patch also rename &lt;tt&gt;CLibrary&lt;/tt&gt; to &lt;tt&gt;NativeLibrary&lt;/tt&gt; as the name was misleading.  &lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blerer:13333-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blerer:13333-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-3.11-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-3.11-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blerer:13333-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-13333-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</comment>
                            <comment id="15937127" author="mkjellman" created="Wed, 22 Mar 2017 21:07:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; this looks great! Renaming &lt;tt&gt;CLibrary&lt;/tt&gt; --&amp;gt; &lt;tt&gt;NativeLibrary&lt;/tt&gt; helps make the intent much clearer. &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Should the loading of &lt;tt&gt;Native.register(&quot;winmm&quot;)&lt;/tt&gt; in &lt;tt&gt;WindowsTimer&lt;/tt&gt; also be moved into NativeLibraryWindows?&lt;/li&gt;
	&lt;li&gt;Looks like the trunk patch didn&apos;t get pushed up or potentially just a copy paste error? Currently it&apos;s just pointing at blerer/trunk.&lt;/li&gt;
	&lt;li&gt;Thanks for putting the MSDN API URL in the method javadoc. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;In &lt;tt&gt;NativeLibraryWindows&lt;/tt&gt; I think the following logger statements could be simplified:&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (UnsatisfiedLinkError e)
{
    logger.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;JNA link failure, one or more &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; method will be unavailable.&quot;&lt;/span&gt;);
    logger.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;JNA link failure details: {}&quot;&lt;/span&gt;, e.getMessage());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can be simplified to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;logger.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to link against JNA. Native methods will be unavailable.&quot;&lt;/span&gt;, e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15937981" author="blerer" created="Thu, 23 Mar 2017 09:25:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkjellman&quot; class=&quot;user-hover&quot; rel=&quot;mkjellman&quot;&gt;mkjellman&lt;/a&gt; Thanks for the reviews.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;1. Should the loading of &lt;tt&gt;Native.register(&quot;winmm&quot;)&lt;/tt&gt; in &lt;tt&gt;WindowsTimer&lt;/tt&gt; also be moved into NativeLibraryWindows?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;tt&gt;WindowsTimer&lt;/tt&gt; is really specific to Windows and according to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13333?focusedCommentId=15929978&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15929978&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;comment&lt;/a&gt; we should not prevent startup due to an inability to access the &lt;tt&gt;winmm.dll&lt;/tt&gt; library. So, I would be in favor of keeping it separeted for now.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;2. Looks like the trunk patch didn&apos;t get pushed up or potentially just a copy paste error? Currently it&apos;s just pointing at blerer/trunk.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sorry for that. It is a copy paste mistake. I fixed it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;3.  Thanks for putting the MSDN API URL in the method javadoc.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I am pretty sure that otherwise, I will have to end up googling it in a month or two &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;4. In NativeLibraryWindows I think the following logger statements could be simplified:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I have pushed a new commit to fix it in all the branches. &lt;/p&gt;</comment>
                            <comment id="15941644" author="chandram" created="Sat, 25 Mar 2017 08:23:39 +0000"  >&lt;p&gt;Hey , &lt;/p&gt;

&lt;p&gt;Is this change committed just wondering when this change will be available in the remote. &lt;/p&gt;

&lt;p&gt;I tried a few moments back after i took the latest changes , and it fails to start - ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2017-03-25 13:35:21,001 CassandraDaemon.java:663 - JNA failing to initialize properly.&lt;/p&gt;

&lt;p&gt;Thanks in adv. &lt;/p&gt;</comment>
                            <comment id="15941721" author="blerer" created="Sat, 25 Mar 2017 13:18:40 +0000"  >&lt;p&gt;The ticket status is still &lt;tt&gt;Patch Available&lt;/tt&gt; which means that the patch has not been accepted yet.&lt;/p&gt;</comment>
                            <comment id="15944106" author="mkjellman" created="Mon, 27 Mar 2017 21:52:29 +0000"  >&lt;p&gt;+1 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; LGTM!&lt;/p&gt;</comment>
                            <comment id="15945370" author="blerer" created="Tue, 28 Mar 2017 15:19:13 +0000"  >&lt;p&gt;Thanks for the review.&lt;br/&gt;
Committed into 3.0 at 9b8692c6a4c75b7df29a58b5d3d1d1ee5cb0c3a4 and merged into 3.11 and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cba7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mkjellman</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mkjellman]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>