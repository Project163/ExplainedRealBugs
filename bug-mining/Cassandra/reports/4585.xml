<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:05:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12829] DELETE query with an empty IN clause can delete more than expected</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12829</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When deleting from a table with a certain structure and using an &lt;b&gt;in&lt;/b&gt; clause with an empty list, the &lt;b&gt;in&lt;/b&gt; clause with an empty list can be ignored, resulting in deleting more than is expected.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Setup:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; create table test (a text, b text, id uuid, primary key ((a, b), id));
cqlsh&amp;gt; insert into test (a, b, id) values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;, 00000000-0000-0000-0000-000000000000);
cqlsh&amp;gt; insert into test (a, b, id) values (&lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;, 00000000-0000-0000-0000-000000000000);
cqlsh&amp;gt; insert into test (a, b, id) values (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;, 00000000-0000-0000-0000-000000000000);
cqlsh&amp;gt; select * from test;

 a | b | id
---+---+--------------------------------------
 a | c | 00000000-0000-0000-0000-000000000000
 b | c | 00000000-0000-0000-0000-000000000000
 a | b | 00000000-0000-0000-0000-000000000000

(3 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Expected:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; delete from test where a = &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt; and b in (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;) and id in ();
cqlsh&amp;gt; select * from test;

 a | b | id
---+---+--------------------------------------
 a | c | 00000000-0000-0000-0000-000000000000
 b | c | 00000000-0000-0000-0000-000000000000
 a | b | 00000000-0000-0000-0000-000000000000

(3 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Actual:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; delete from test where a = &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt; and b in (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;) and id in ();
cqlsh&amp;gt; select * from test;

 a | b | id
---+---+--------------------------------------
 b | c | 00000000-0000-0000-0000-000000000000

(1 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Instead of deleting nothing, as the final empty &lt;b&gt;in&lt;/b&gt; clause would imply, it instead deletes everything that matches the first two clauses, acting as if the following query had been issued instead:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; delete from test where a = &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt; and b in (&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This seems to be related to the presence of a tuple clustering key, as I could not reproduce it without one.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Arch Linux x64, kernel 4.7.6, Cassandra 3.9 downloaded from the website&lt;/p&gt;</environment>
        <key id="13014411">CASSANDRA-12829</key>
            <summary>DELETE query with an empty IN clause can delete more than expected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ifesdjeen">Alex Petrov</assignee>
                                    <reporter username="jasontbradshaw">Jason T. Bradshaw</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Oct 2016 21:29:37 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:16 +0000</updated>
                            <resolved>Tue, 31 Jan 2017 13:55:07 +0000</resolved>
                                        <fixVersion>3.0.11</fixVersion>
                    <fixVersion>3.10</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15596448" author="jasontbradshaw" created="Fri, 21 Oct 2016 21:36:58 +0000"  >&lt;p&gt;Additionally, this will still happen even when the second part of the &lt;b&gt;where&lt;/b&gt; clause uses &lt;b&gt;=&lt;/b&gt; instead of &lt;b&gt;in&lt;/b&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; delete from test where a = &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt; and b = &lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt; and id in ();
cqlsh&amp;gt; select * from test;

 a | b | id
---+---+--------------------------------------
 b | c | 00000000-0000-0000-0000-000000000000
 a | b | 00000000-0000-0000-0000-000000000000

(2 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15602967" author="ifesdjeen" created="Mon, 24 Oct 2016 19:33:30 +0000"  >&lt;p&gt;&lt;tt&gt;DELETE&lt;/tt&gt; in this case removes the whole partition, since there&apos;s just one clustering column and clustering list is empty.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;UPDATE&lt;/tt&gt; queries would also fail in this case with an exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.AssertionError: Invalid clustering &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the table: org.apache.cassandra.db.Clustering$2@633128cf

	at org.apache.cassandra.db.Clustering$Serializer.serialize(Clustering.java:130)
	at org.apache.cassandra.db.rows.UnfilteredSerializer.serialize(UnfilteredSerializer.java:183)
	at org.apache.cassandra.db.rows.UnfilteredSerializer.serialize(UnfilteredSerializer.java:132)
	at org.apache.cassandra.db.rows.UnfilteredSerializer.serialize(UnfilteredSerializer.java:120)
	at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer.serialize(UnfilteredRowIteratorSerializer.java:137)
	at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer.serialize(UnfilteredRowIteratorSerializer.java:92)
	at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.serialize(PartitionUpdate.java:790)
	at org.apache.cassandra.db.Mutation$MutationSerializer.serialize(Mutation.java:393)
	at org.apache.cassandra.db.commitlog.CommitLog.add(CommitLog.java:249)
	at org.apache.cassandra.db.Keyspace.apply(Keyspace.java:522)
	at org.apache.cassandra.db.Keyspace.apply(Keyspace.java:425)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve prepared a patch (CI pending) that handles empty clustering correctly. This logic is slightly different from &lt;tt&gt;SELECT&lt;/tt&gt; though.&lt;/p&gt;</comment>
                            <comment id="15605257" author="ifesdjeen" created="Tue, 25 Oct 2016 13:00:42 +0000"  >&lt;p&gt;Patch for the 3.x branches follows.&lt;/p&gt;

&lt;p&gt;Problem was occurring only when there was one clustering column. If we&apos;re using empty clustering (taken from restriction) in case of DELETE, we create a &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/cql3/statements/DeleteStatement.java#L59-L63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;partition level deletion&lt;/a&gt;. However, in this case what we had to do was going through each clustering and add a tombstone for each row. &lt;/p&gt;

&lt;p&gt;In order to correctly handle this case, we now rely on &lt;tt&gt;hasClusteringColumnsRestriction&lt;/tt&gt;. This way we know we have to take the clusterings from restrictions and apply updates/deletes. In case there&apos;re no clustering restrictions (partition-level deletes, updates of static rows, updating collections on tables with no clusterings etc), we use &lt;tt&gt;Clustering.EMPTY&lt;/tt&gt; similar to how it was in this code before (&lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/MultiCBuilder.java#L262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt; part of call).&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12829-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12829-3.x&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.x&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-3.x-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-3.x-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12829-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</comment>
                            <comment id="15695706" author="blerer" created="Fri, 25 Nov 2016 12:06:58 +0000"  >&lt;p&gt;Thanks for the patch and sorry for the delay.&lt;/p&gt;

&lt;p&gt;Your approach is working but if the query has an &lt;tt&gt;IN&lt;/tt&gt; restriction on the primary key the &lt;tt&gt;clusterings&lt;/tt&gt; and the &lt;tt&gt;UpdateParameters&lt;/tt&gt; will be computed multiple times.&lt;br/&gt;
Replacing &lt;tt&gt;clusterings.isEmpty()&lt;/tt&gt; by &lt;tt&gt;!restrictions.hasClusteringColumnsRestriction()&lt;/tt&gt; would have apparently been enough to fix the problem. Did you have a reason for doing more changes? (I just want to be sure that I did not miss anything).&lt;/p&gt;

&lt;p&gt;While playing with the tests I noticed that conditional deletions with empty &lt;tt&gt;IN&lt;/tt&gt; restrictions on the clustering key were also broken.&lt;br/&gt;
The problem can be reproduced with the following test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testEmptyInWithConditions() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Throwable
    {
        createTable(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TABLE %s (a &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, b &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, c &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, d &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, s &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;, PRIMARY KEY ((a,b), c))&quot;&lt;/span&gt;);
        execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO %s (a,b,c,d,s) VALUES (?,?,?,?,?)&quot;&lt;/span&gt;,1,1,1,1,1);
        execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO %s (a,b,c,d,s) VALUES (?,?,?,?,?)&quot;&lt;/span&gt;,1,1,2,2,1);
        execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO %s (a,b,c,d,s) VALUES (?,?,?,?,?)&quot;&lt;/span&gt;,1,1,3,3,1);
        
        execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;DELETE FROM %s WHERE a = 1 AND b = 1 AND c IN () IF d = 1;&quot;&lt;/span&gt;);
        assertRows(execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT * FROM %s&quot;&lt;/span&gt;),
                   row(1,1,1,1,1),
                   row(1,1,2,1,2),
                   row(1,1,3,1,3));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the test side, I think that the tests should be moved to &lt;tt&gt;UpdateTest&lt;/tt&gt; and &lt;tt&gt;DeleteTest&lt;/tt&gt; as they clearly belongs there. It might also be good to add some tests with empty &lt;tt&gt;IN&lt;/tt&gt; conditions on the partition keys as well as some tests with mutliple clustering columns.&lt;/p&gt;</comment>
                            <comment id="15708858" author="ifesdjeen" created="Wed, 30 Nov 2016 15:20:19 +0000"  >&lt;p&gt;Thanks for noticing this. Turns out that my code did same thing, just was much more complex to parse. Your suggestion is very good. &lt;/p&gt;

&lt;p&gt;As regards &lt;tt&gt;IN&lt;/tt&gt; restriction, it&apos;s all quite simple to fix. However, I see a bit inconsistency. &lt;tt&gt;IN&lt;/tt&gt; with just one value is simplified to &lt;tt&gt;EQ&lt;/tt&gt; relation. &lt;tt&gt;IN&lt;/tt&gt; with more than 1 value or 0 values will remain &lt;tt&gt;IN&lt;/tt&gt;. And because &lt;tt&gt;IN&lt;/tt&gt; restrictions are not supported with conditional deletions, currently we&apos;ll disallow &lt;tt&gt;0&lt;/tt&gt; and &lt;tt&gt;&amp;gt; 1&lt;/tt&gt; values, while &lt;tt&gt;1&lt;/tt&gt; value will work just as &lt;tt&gt;EQ&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;Do you think such behaviour would be acceptable? Are empty IN restrictions actually useful or will just cause edge-cases and unclear behaviour?&lt;/p&gt;</comment>
                            <comment id="15708928" author="blerer" created="Wed, 30 Nov 2016 15:51:57 +0000"  >&lt;blockquote&gt;
&lt;p&gt;As regards &lt;tt&gt;IN&lt;/tt&gt; restriction, it&apos;s all quite simple to fix. However, I see a bit inconsistency. &lt;tt&gt;IN&lt;/tt&gt; with just one value is simplified to &lt;tt&gt;EQ&lt;/tt&gt; relation. &lt;tt&gt;IN&lt;/tt&gt; with more than 1 value or 0 values will remain &lt;tt&gt;IN&lt;/tt&gt;. And because &lt;tt&gt;IN&lt;/tt&gt; restrictions are not supported with conditional deletions, currently we&apos;ll disallow 0 and &amp;gt; 1 values, while 1 value will work just as &lt;tt&gt;EQ&lt;/tt&gt;. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;IN&lt;/tt&gt; restrictions with only one value are nearly always treated like &lt;tt&gt;EQ&lt;/tt&gt; at the CQL level. So, I think that it is fine.&lt;/p&gt;</comment>
                            <comment id="15708951" author="ifesdjeen" created="Wed, 30 Nov 2016 15:59:41 +0000"  >&lt;p&gt;Yup, they&apos;re optimised away in &lt;tt&gt;SingleColumnRelation#newINRestriction&lt;/tt&gt;. Great then. Thanks!&lt;/p&gt;</comment>
                            <comment id="15722593" author="ifesdjeen" created="Mon, 5 Dec 2016 15:53:12 +0000"  >&lt;p&gt;I&apos;ve simplified the code as you suggested and fixed the inconsistency with &lt;tt&gt;IN&lt;/tt&gt;, it was related to the&lt;br/&gt;
fact we were only checking for &lt;tt&gt;&amp;gt; 1&lt;/tt&gt; clustering. I&apos;ve found same problem with batch statements and for&lt;br/&gt;
partition keys and fixed it there, too. Tests are refactored as well.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12829-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12829-3.x&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.x&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-3.x-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-3.x-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/12829-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/job/ifesdjeen-12829-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15751847" author="blerer" created="Thu, 15 Dec 2016 16:52:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15751913" author="blerer" created="Thu, 15 Dec 2016 17:16:48 +0000"  >&lt;p&gt;Thanks for the patch.&lt;/p&gt;

&lt;p&gt;Committed into 3.0 at 9fc1ffb631a5a44bc11b55061288758e39a9d20a and merged into, 3.11, 3.X and trunk&lt;/p&gt;</comment>
                            <comment id="15846699" author="blerer" created="Tue, 31 Jan 2017 11:30:46 +0000"  >&lt;p&gt;Together with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; we realized that the bug fix was wrong. Empty &lt;tt&gt;IN&lt;/tt&gt; restrictions in &lt;tt&gt;UPDATE&lt;/tt&gt; or &lt;tt&gt;DELETE&lt;/tt&gt; should simply be rejected as under the hood they result in invalid mutations or tombstones. Those invalid mutation can then create some problems cluster wide (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13152&quot; title=&quot;UPDATE on counter columns with empty list as argument in IN disables cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13152&quot;&gt;&lt;del&gt;CASSANDRA-13152&lt;/del&gt;&lt;/a&gt;) .&lt;/p&gt;</comment>
                            <comment id="15846855" author="blerer" created="Tue, 31 Jan 2017 13:54:50 +0000"  >&lt;p&gt;After a carefull look at the problem, it seems that we can solve the problem without rejecting queries with empty &lt;tt&gt;IN&lt;/tt&gt; restrictions.&lt;br/&gt;
I will fix that problem as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13152&quot; title=&quot;UPDATE on counter columns with empty list as argument in IN disables cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13152&quot;&gt;&lt;del&gt;CASSANDRA-13152&lt;/del&gt;&lt;/a&gt;. Re-closing that ticket.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ifesdjeen]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i358vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>blerer</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12337344">3.9</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>