<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:08:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13723] fix exception logging that should be consumed by placeholder to &apos;getMessage()&apos; for new slf4j version</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13723</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The wrong tracing log will fail &lt;tt&gt;materialized_views_test.py:TestMaterializedViews.view_tombstone_test&lt;/tt&gt; and impact clients.&lt;/p&gt;

&lt;p&gt;Current log: &lt;tt&gt;Digest mismatch: {} on 127.0.0.1&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Expected log: &lt;tt&gt;Digest mismatch: org.apache.cassandra.service.DigestMismatchException: Mismatch for key DecoratedKey....... on 127.0.0.1&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13089462">CASSANDRA-13723</key>
            <summary>fix exception logging that should be consumed by placeholder to &apos;getMessage()&apos; for new slf4j version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jasonstack">Zhao Yang</assignee>
                                    <reporter username="jasonstack">Zhao Yang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Jul 2017 10:09:50 +0000</created>
                <updated>Fri, 15 May 2020 07:59:44 +0000</updated>
                            <resolved>Thu, 10 Aug 2017 06:22:11 +0000</resolved>
                                        <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16098309" author="jasonstack" created="Mon, 24 Jul 2017 12:47:00 +0000"  >&lt;p&gt;It only affects trunk by  &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12996&quot; title=&quot;update slf4j dependency to 1.7.21&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12996&quot;&gt;&lt;del&gt;CASSANDRA-12996&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;All tests passed except for bootstrap_test(known) in dtest.&lt;/p&gt;
</comment>
                            <comment id="16098392" author="jasobrown" created="Mon, 24 Jul 2017 13:17:48 +0000"  >&lt;p&gt;Should we wait until the dust settles on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12996&quot; title=&quot;update slf4j dependency to 1.7.21&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12996&quot;&gt;&lt;del&gt;CASSANDRA-12996&lt;/del&gt;&lt;/a&gt; before making this change? It seems unfortunate to need to call &lt;tt&gt;#toString()&lt;/tt&gt; on an object before passing it to &lt;tt&gt;Tracing&lt;/tt&gt;/&lt;tt&gt;MessageFormatter&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Otherwise patch is trivial and fine with me&lt;/p&gt;</comment>
                            <comment id="16098470" author="jasonstack" created="Mon, 24 Jul 2017 14:12:35 +0000"  >&lt;p&gt;thanks for reviewing. let&apos;s wait for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12996&quot; title=&quot;update slf4j dependency to 1.7.21&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12996&quot;&gt;&lt;del&gt;CASSANDRA-12996&lt;/del&gt;&lt;/a&gt; to settle.&lt;/p&gt;</comment>
                            <comment id="16099696" author="spodxx@gmail.com" created="Tue, 25 Jul 2017 08:20:01 +0000"  >&lt;p&gt;I&apos;ve created ticket  &lt;a href=&quot;https://jira.qos.ch/browse/SLF4J-416&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SLF4J-416&lt;/a&gt; for this on the SLF4J tracker and it looks like this is a known issue, with an open &lt;a href=&quot;https://github.com/qos-ch/slf4j/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt; created half a year ago.&lt;/p&gt;

&lt;p&gt;Is it really just this one log message that is affected?&lt;/p&gt;</comment>
                            <comment id="16099734" author="jasonstack" created="Tue, 25 Jul 2017 08:58:09 +0000"  >&lt;p&gt;the affected range is unknown.. need to go through the codebase. the digest log is luckily being caught by dtest&lt;/p&gt;</comment>
                            <comment id="16099768" author="spodxx@gmail.com" created="Tue, 25 Jul 2017 09:29:22 +0000"  >&lt;p&gt;There seem to be a couple of statements that would have to be fixed, see&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;grep -r logger src/java |grep &apos;{}&apos; |grep &apos;, [e|t])&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running &lt;tt&gt;FileUtilsTest.testFolderSize&lt;/tt&gt; will show the new behaviour:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR [main] 2017-07-25 11:22:14,389 FileUtils.java:490 - Error while getting build/test/cassandra/data/testFolderSize/i_dont_exist folder size. {}
java.nio.file.NoSuchFileException: build/test/cassandra/data/testFolderSize/i_dont_exist
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86) ~[na:1.8.0_112]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[na:1.8.0_112]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[na:1.8.0_112]
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The logger will not substitute the placeholder and print the hold stack trace instead. &lt;/p&gt;</comment>
                            <comment id="16101240" author="jasonstack" created="Wed, 26 Jul 2017 06:51:11 +0000"  >&lt;p&gt;thanks, I will update the patch this week&lt;/p&gt;</comment>
                            <comment id="16102917" author="jasonstack" created="Thu, 27 Jul 2017 08:20:48 +0000"  >&lt;p&gt;if switch to &lt;tt&gt;e.toString()&lt;/tt&gt; everywhere, C*  may generate many unnecessary String objects(gc) even if logger level is NONE.&lt;/p&gt;

&lt;p&gt;By checking:  &lt;tt&gt;if(logger.isXXXEnable())&lt;/tt&gt; would help, but it&apos;s troublesome.&lt;/p&gt;

&lt;p&gt;how about using &lt;tt&gt;e.getMessage()&lt;/tt&gt; instead of &lt;tt&gt;e.toString()&lt;/tt&gt;?  this will affect driver&apos;s trace and server log.&lt;/p&gt;</comment>
                            <comment id="16102987" author="spodxx@gmail.com" created="Thu, 27 Jul 2017 09:22:14 +0000"  >&lt;p&gt;I think we&apos;d just have to change any log messages that intent to print the exception as represented by a log format parameter, e.g. &lt;tt&gt;logger.debug(&quot;Error! {}&quot;, e)&lt;/tt&gt;. In this case we can simply replace the exception with &lt;tt&gt;e.getMessage()&lt;/tt&gt;. But we don&apos;t have to change log messages that would print the stacktrace,&lt;br/&gt;
 e.g. &lt;tt&gt;logger.debug(&quot;Error!&quot;, e)&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16116476" author="jasonstack" created="Mon, 7 Aug 2017 11:48:59 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/jasonstack/cassandra/commits/CASSANDRA-13723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://circleci.com/gh/jasonstack/cassandra/368&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unit&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; irrelevant&lt;br/&gt;
bootstrap_test.TestBootstap.consistent_range_movement_false_with_rf1_should_succeed_test&lt;br/&gt;
ttl_test.TestDistributedTTL.ttl_is_respected_on_repair_test&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/commits/CASSANDRA-13723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; \ &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; \ &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;changed &lt;tt&gt;logger.debug(&quot;Error! {}&quot;, e)&lt;/tt&gt; (exception consumed by placeholder)  to &lt;tt&gt;logger.debug(&quot;Error! {}&quot;, e.getMessage())&lt;/tt&gt; for new slf4j version&lt;br/&gt;
changed dtest to grep new digest mismatch log in tracing: &lt;tt&gt;Digest mismatch: Mismatch for key DecoratedKey.....&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16121003" author="jasonstack" created="Thu, 10 Aug 2017 03:41:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spodxx%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;spodxx@gmail.com&quot;&gt;spodxx@gmail.com&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt; could you please review it? thanks&lt;/p&gt;</comment>
                            <comment id="16121130" author="spodxx@gmail.com" created="Thu, 10 Aug 2017 06:22:11 +0000"  >&lt;p&gt;Merged as ba87ab4e954ad2&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="16121385" author="jasonstack" created="Thu, 10 Aug 2017 10:05:34 +0000"  >&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13025583">CASSANDRA-12996</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12878600" name="CASSANDRA-13723.patch" size="994" author="jasonstack" created="Mon, 24 Jul 2017 10:19:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jasonstack]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hx4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>spod</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[spod]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>