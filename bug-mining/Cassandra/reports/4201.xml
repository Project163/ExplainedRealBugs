<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:02:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11467] Paging loses rows in certain conditions</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11467</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The bug occurs under the following conditions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;RandomPartitioner&lt;/li&gt;
	&lt;li&gt;a compact storage CF&lt;/li&gt;
	&lt;li&gt;querying across rows&lt;/li&gt;
	&lt;li&gt;a tombstone in the first column of a row on the pagesize boundary&lt;/li&gt;
	&lt;li&gt;you need to be querying at least 2*pagesize + 1 records&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Attached is a go program using gocql which reproduces the bug fairly minimally.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12954777">CASSANDRA-11467</key>
            <summary>Paging loses rows in certain conditions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blerer">Benjamin Lerer</assignee>
                                    <reporter username="imcmahon">Ian McMahon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2016 21:39:10 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:37 +0000</updated>
                            <resolved>Sat, 2 Apr 2016 16:29:58 +0000</resolved>
                                        <fixVersion>2.1.14</fixVersion>
                    <fixVersion>2.2.6</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="15219049" author="rhatch" created="Wed, 30 Mar 2016 23:21:12 +0000"  >&lt;p&gt;This could possibly be &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11195&quot; title=&quot;paging may returns incomplete results on small page size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11195&quot;&gt;&lt;del&gt;CASSANDRA-11195&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15221452" author="blerer" created="Fri, 1 Apr 2016 09:31:31 +0000"  >&lt;p&gt;The problem is impacting tables with compact storage and no clustering keys (the partitioner does not impact the behaviour). &lt;br/&gt;
When a range query is performed, if the page is not the first one, an extra row is requested to the storage engine and removed by the &lt;tt&gt;AbstractQueryPager&lt;/tt&gt;. &lt;br/&gt;
In the case where the first columns is not live the extra row is not fully removed by &lt;tt&gt;AbstractQueryPager&lt;/tt&gt;. The row will be ignored when the result set is built but will be taken into account by &lt;tt&gt;AbstractQueryPager&lt;/tt&gt; as the last row returned. By consequence, the row will not be returned in the next page.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhatch&quot; class=&quot;user-hover&quot; rel=&quot;rhatch&quot;&gt;rhatch&lt;/a&gt; The problem does not seems related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11195&quot; title=&quot;paging may returns incomplete results on small page size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11195&quot;&gt;&lt;del&gt;CASSANDRA-11195&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15221590" author="blerer" created="Fri, 1 Apr 2016 11:52:14 +0000"  >&lt;p&gt;The problem seems to affect only compact tables without clustering columns prior to 3.0. &lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11467-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-11467-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15221594" author="blerer" created="Fri, 1 Apr 2016 11:55:11 +0000"  >&lt;p&gt;The DTest PR is &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt; could you review?&lt;/p&gt;</comment>
                            <comment id="15221958" author="thobbs" created="Fri, 1 Apr 2016 16:49:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;If 2.1 is affected, I think we should commit this there as well.  This isn&apos;t a very common query path to hit, but it&apos;s a fairly serious bug to have missing query results.&lt;/p&gt;</comment>
                            <comment id="15222933" author="blerer" created="Sat, 2 Apr 2016 16:29:58 +0000"  >&lt;p&gt;Committed into 2.1 at ea9b42e7d7bf9003dd6ed911035d3a85a2d99bac and merged into 2.2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12796519" name="11467-2.2.txt" size="1129" author="blerer" created="Fri, 1 Apr 2016 11:52:14 +0000"/>
                            <attachment id="12796169" name="pagination_test.go" size="1373" author="imcmahon" created="Wed, 30 Mar 2016 21:39:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vfdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12328860">2.0.12</customfieldvalue>
    <customfieldvalue id="12334273">2.1.13</customfieldvalue>
    <customfieldvalue id="12334272">2.2.5</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>