<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:18:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1718] cassandra should chdir / when daemonizing</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1718</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Common practice when daemonizing is to cd / to avoid pinning a filesystem.  For example, if the oper happens to start Cassandra (by itself, or with a manual jsvc invocation, or with the initscript) in /mnt/usb-storage, and there is something mounted there, then the oper will not be able to unmount the usb device that was mounted at that location, since the cassandra process has it open as its cwd.&lt;/p&gt;

&lt;p&gt;evidence that this isn&apos;t being done already:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;~% sudo lsof -p 9775 | awk &apos;$4==&quot;cwd&quot;&apos;
jsvc    9775 cassandra  cwd    DIR                8,1     4096 147675 /home/paul/packages/cassandra/trunk
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(That instance was invoked using the Debian initscript.)&lt;/p&gt;

&lt;p&gt;Obviously chdir(&quot;/&quot;) isn&apos;t necessary when not daemonizing, although it shouldn&apos;t hurt either.&lt;/p&gt;

&lt;p&gt;If there are concerns about Cassandra having an ongoing ability to open filenames relative to its original working directory, then it should be sufficient just to do a &quot;cd /&quot; in the initscript before starting Cassandra.  That case, at least, is particularly important.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian squeeze, Cassandra 0.7.0-beta3 and trunk (r1032649)&lt;/p&gt;</environment>
        <key id="12479400">CASSANDRA-1718</key>
            <summary>cassandra should chdir / when daemonizing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="urandom">Eric Evans</assignee>
                                    <reporter username="thepaul">paul cannon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Nov 2010 19:40:28 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:13 +0000</updated>
                            <resolved>Thu, 20 Jan 2011 16:11:30 +0000</resolved>
                                        <fixVersion>0.7.1</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12929693" author="jbellis" created="Mon, 8 Nov 2010 19:47:14 +0000"  >&lt;p&gt;tagging fix-for 0.7.1 because I don&apos;t want to risk any more breakage for 0.7.0&lt;/p&gt;</comment>
                            <comment id="12968843" author="urandom" created="Tue, 7 Dec 2010 17:49:13 +0000"  >&lt;p&gt;Huh. I thought jsvc was doing this (and I want to say that it &lt;em&gt;was&lt;/em&gt; at some point). It really seems like it ought to be.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If there are concerns about Cassandra having an ongoing ability to open filenames relative to its original working directory, then it should be sufficient just to do a &quot;cd /&quot; in the initscript before starting Cassandra. That case, at least, is particularly important.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We should consider it a bug if anything here relies on relative paths (and I don&apos;t think it does).&lt;/p&gt;</comment>
                            <comment id="12980302" author="jbellis" created="Tue, 11 Jan 2011 20:00:52 +0000"  >&lt;p&gt;Note: this means hprof and err files will be created in /, since they are dumped in CWD.&lt;/p&gt;</comment>
                            <comment id="12980768" author="thepaul" created="Wed, 12 Jan 2011 15:58:04 +0000"  >&lt;p&gt;Maybe best would be to chdir() to cassandra&apos;s data directory, then. It should be ok to pin that. But definitely we want it to be predictable, not &quot;whatever directory the admin was in the last time she started it up&quot;.&lt;/p&gt;</comment>
                            <comment id="12980780" author="jbellis" created="Wed, 12 Jan 2011 16:27:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe best would be to chdir() to cassandra&apos;s data directory&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I like that idea.&lt;/p&gt;</comment>
                            <comment id="12980788" author="urandom" created="Wed, 12 Jan 2011 16:34:54 +0000"  >&lt;p&gt;Is there some way to tell the JVM to put its  detritus elsewhere?  Barring that, /var/lib/cassandra is an improvement over, &quot;wherever&quot;.&lt;/p&gt;</comment>
                            <comment id="12980794" author="thepaul" created="Wed, 12 Jan 2011 16:42:36 +0000"  >&lt;p&gt;+1 this patch&lt;/p&gt;</comment>
                            <comment id="12980795" author="jbellis" created="Wed, 12 Jan 2011 16:43:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is there some way to tell the JVM to put its detritus elsewhere?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html&lt;/a&gt; lists -XX:HeapDumpPath but nothing for a JVM crash log that I see.&lt;/p&gt;</comment>
                            <comment id="12981615" author="thepaul" created="Fri, 14 Jan 2011 02:52:29 +0000"  >&lt;p&gt;-XX:ErrorFile ?&lt;/p&gt;</comment>
                            <comment id="12981617" author="jbellis" created="Fri, 14 Jan 2011 03:10:14 +0000"  >&lt;p&gt;Bingo.&lt;/p&gt;</comment>
                            <comment id="12984255" author="urandom" created="Thu, 20 Jan 2011 16:11:30 +0000"  >&lt;p&gt;Did.&lt;/p&gt;</comment>
                            <comment id="12984273" author="hudson" created="Thu, 20 Jan 2011 16:44:06 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #182 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.7/182/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.7/182/&lt;/a&gt;)&lt;br/&gt;
    chdir / on startup&lt;/p&gt;

&lt;p&gt;Patch by eevans for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1718&quot; title=&quot;cassandra should chdir / when daemonizing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1718&quot;&gt;&lt;del&gt;CASSANDRA-1718&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12468136" name="ASF.LICENSE.NOT.GRANTED--v1-0001-CASSANDRA-1718-switch-to-home-directory-on-startup.txt" size="690" author="urandom" created="Wed, 12 Jan 2011 16:32:02 +0000"/>
                            <attachment id="12468399" name="ASF.LICENSE.NOT.GRANTED--v2-0001-CASSANDRA-1718-chdir-on-startup.txt" size="1076" author="urandom" created="Fri, 14 Jan 2011 20:21:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20270</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g6yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92558</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>