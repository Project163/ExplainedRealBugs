<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:05:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12905] Retry acquire MV lock on failure instead of throwing WTE on streaming</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12905</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I performed two upgrades to the current cluster (currently 15 nodes, 1 DC, private VLAN),&lt;br/&gt;
first it was 2.2.5.1 and repair worked flawlessly,&lt;br/&gt;
second upgrade was to 3.0.9 (with upgradesstables) and also repair worked well,&lt;br/&gt;
then i upgraded 2 weeks ago to 3.9 - and the repair problems started.&lt;/p&gt;

&lt;p&gt;there are several errors types from the system.log (different nodes) :&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Sync failed between /xxx.xxx.xxx.xxx and /xxx.xxx.xxx.xxx&lt;/li&gt;
	&lt;li&gt;Streaming error occurred on session with peer xxx.xxx.xxx.xxx Operation timed out - received only 0 responses&lt;/li&gt;
	&lt;li&gt;Remote peer xxx.xxx.xxx.xxx failed stream session&lt;/li&gt;
	&lt;li&gt;Session completed with the following error&lt;br/&gt;
org.apache.cassandra.streaming.StreamException: Stream failed&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;

&lt;p&gt;i use 3.9 default configuration with the cluster settings adjustments (3 seeds, GossipingPropertyFileSnitch).&lt;br/&gt;
streaming_socket_timeout_in_ms is the default (86400000).&lt;/p&gt;

&lt;p&gt;i&apos;m afraid from consistency problems while i&apos;m not performing repair.&lt;/p&gt;

&lt;p&gt;Any ideas?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Nir.&lt;/p&gt;</description>
                <environment>&lt;p&gt;centos 6.7 x86_64&lt;/p&gt;</environment>
        <key id="13020295">CASSANDRA-12905</key>
            <summary>Retry acquire MV lock on failure instead of throwing WTE on streaming</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brstgt">Benjamin Roth</assignee>
                                    <reporter username="zilkanir">Nir Zilka</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Nov 2016 18:53:38 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:15 +0000</updated>
                            <resolved>Thu, 15 Dec 2016 19:30:30 +0000</resolved>
                                        <fixVersion>3.0.11</fixVersion>
                    <fixVersion>3.10</fixVersion>
                                    <component>Feature/Materialized Views</component>
                    <component>Legacy/Streaming and Messaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="15683210" author="pauloricardomg" created="Mon, 21 Nov 2016 11:03:26 +0000"  >&lt;p&gt;Could you post full stack traces of the streaming errors you have noticed? In particular you should post errors of the source and destination nodes of the same stream session.&lt;/p&gt;</comment>
                            <comment id="15692941" author="zilkanir" created="Thu, 24 Nov 2016 10:43:50 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I decommissioned 4 nodes from when i opened the ticket, so total of 11 nodes currently running.&lt;br/&gt;
nodes list is: 10.101.123.44 , 10.101.123.46 , 10.101.123.62 , 10.101.123.36-39 , 10.101.123.50, 10.101.123.53-55&lt;br/&gt;
I started yesterday evening (23th) repair and catched untill now the following errors:&lt;/p&gt;

&lt;p&gt;this is from the machine i ran the &quot;nodetool repair&quot; (10.101.123.55), 11 errors:&lt;/p&gt;

&lt;p&gt;---- 1 ----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:23&amp;#93;&lt;/span&gt; 2016-11-24 00:14:18,271 RepairSession.java:290 - &lt;a href=&quot;#02b2bb40-b1ba-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #02b2bb40-b1ba-11e6-a5e3-61594f2eacfb&lt;/a&gt; Session completed with the following error&lt;br/&gt;
org.apache.cassandra.exceptions.RepairException: &lt;a href=&quot;#02b2bb40-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(5374555084199702397,5375907191203787693], (5375907191203787693,5394663393980481083&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #02b2bb40-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(5374555084199702397,5375907191203787693], (5375907191203787693,5394663393980481083&lt;/a&gt;, (-4608172686811846999,-4606297045741692934], (343174083518476177,369373536835281005], (-789474545083012335,-787318207609633720], (-810527869609466298,-789474545083012335], (7618946177842619265,7622080038542632561], (8643901858335832297,8668152326416369637], (332360446019658863,336878679529361124], (-8627477550934015644,-8626441922324893605], (-2577622939633507215,-2575565821746779005], (336878679529361124,343174083518476177], (-3519645500583421982,-3517776702806344635], (-2583420055923926426,-2577622939633507215], (3383191969840261164,3387991562336214241], (5394663393980481083,5411354651959353112], (3387991562336214241,3390236953123836921], (-705797240279985098,-700707451972711675], (-5709906583533929520,-5707271395346631992], (1178486765398617360,1178624428305220059], (-3520515159422145033,-3519645500583421982]]] Sync failed between /10.101.123.54 and /10.101.123.50&lt;br/&gt;
        at org.apache.cassandra.repair.RemoteSyncTask.syncComplete(RemoteSyncTask.java:67) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.repair.RepairSession.syncComplete(RepairSession.java:211) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.service.ActiveRepairService.handleMessage(ActiveRepairService.java:462) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.repair.RepairMessageVerbHandler.doVerb(RepairMessageVerbHandler.java:165) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:64) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:23&amp;#93;&lt;/span&gt; 2016-11-24 00:14:18,272 RepairRunnable.java:261 - Repair session 02b2bb40-b1ba-11e6-a5e3-61594f2eacfb for range &lt;span class=&quot;error&quot;&gt;&amp;#91;(5374555084199702397,5375907191203787693&amp;#93;&lt;/span&gt;, (5375907191203787693,5394663393980481083], (-4608172686811846999,-4606297045741692934], (343174083518476177,369373536835281005], (-789474545083012335,-787318207609633720], (-810527869609466298,-789474545083012335], (7618946177842619265,7622080038542632561], (8643901858335832297,8668152326416369637], (332360446019658863,336878679529361124], (-8627477550934015644,-8626441922324893605], (-2577622939633507215,-2575565821746779005], (336878679529361124,343174083518476177], (-3519645500583421982,-3517776702806344635], (-2583420055923926426,-2577622939633507215], (3383191969840261164,3387991562336214241], (5394663393980481083,5411354651959353112], (3387991562336214241,3390236953123836921], (-705797240279985098,-700707451972711675], (-5709906583533929520,-5707271395346631992], (1178486765398617360,1178624428305220059], (-3520515159422145033,-3519645500583421982]] failed with error &lt;a href=&quot;#02b2bb40-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(5374555084199702397,5375907191203787693], (5375907191203787693,5394663393980481083&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #02b2bb40-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(5374555084199702397,5375907191203787693], (5375907191203787693,5394663393980481083&lt;/a&gt;, (-4608172686811846999,-4606297045741692934], (343174083518476177,369373536835281005], (-789474545083012335,-787318207609633720], (-810527869609466298,-789474545083012335], (7618946177842619265,7622080038542632561], (8643901858335832297,8668152326416369637], (332360446019658863,336878679529361124], (-8627477550934015644,-8626441922324893605], (-2577622939633507215,-2575565821746779005], (336878679529361124,343174083518476177], (-3519645500583421982,-3517776702806344635], (-2583420055923926426,-2577622939633507215], (3383191969840261164,3387991562336214241], (5394663393980481083,5411354651959353112], (3387991562336214241,3390236953123836921], (-705797240279985098,-700707451972711675], (-5709906583533929520,-5707271395346631992], (1178486765398617360,1178624428305220059], (-3520515159422145033,-3519645500583421982]]] Sync failed between /10.101.123.54 and /10.101.123.50&lt;br/&gt;
org.apache.cassandra.exceptions.RepairException: &lt;a href=&quot;#02b2bb40-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(5374555084199702397,5375907191203787693], (5375907191203787693,5394663393980481083&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #02b2bb40-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(5374555084199702397,5375907191203787693], (5375907191203787693,5394663393980481083&lt;/a&gt;, (-4608172686811846999,-4606297045741692934], (343174083518476177,369373536835281005], (-789474545083012335,-787318207609633720], (-810527869609466298,-789474545083012335], (7618946177842619265,7622080038542632561], (8643901858335832297,8668152326416369637], (332360446019658863,336878679529361124], (-8627477550934015644,-8626441922324893605], (-2577622939633507215,-2575565821746779005], (336878679529361124,343174083518476177], (-3519645500583421982,-3517776702806344635], (-2583420055923926426,-2577622939633507215], (3383191969840261164,3387991562336214241], (5394663393980481083,5411354651959353112], (3387991562336214241,3390236953123836921], (-705797240279985098,-700707451972711675], (-5709906583533929520,-5707271395346631992], (1178486765398617360,1178624428305220059], (-3520515159422145033,-3519645500583421982]]] Sync failed between /10.101.123.54 and /10.101.123.50&lt;br/&gt;
        at org.apache.cassandra.repair.RemoteSyncTask.syncComplete(RemoteSyncTask.java:67) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.repair.RepairSession.syncComplete(RepairSession.java:211) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.service.ActiveRepairService.handleMessage(ActiveRepairService.java:462) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.repair.RepairMessageVerbHandler.doVerb(RepairMessageVerbHandler.java:165) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:64) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;----- 2 -----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:26&amp;#93;&lt;/span&gt; 2016-11-24 03:41:30,346 RepairSession.java:290 - &lt;a href=&quot;#02ed5341-b1ba-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #02ed5341-b1ba-11e6-a5e3-61594f2eacfb&lt;/a&gt; Session completed with the following error&lt;br/&gt;
org.apache.cassandra.exceptions.RepairException: &lt;a href=&quot;#02ed5341-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(-1335941665601891325,-1321221006770475620], (-7656219523738612247,-7655796196565388324&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #02ed5341-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(-1335941665601891325,-1321221006770475620], (-7656219523738612247,-7655796196565388324&lt;/a&gt;, (7609334541554158623,7611123200966944805], (4459027606150691982,4474972746587738233], (6002584461649025600,6007853196169892926], (3573722541167411217,3580784726724553369], (-5464989069710829887,-5459049126444114128], (-5459049126444114128,-5449173436278793738], (-1642684260736153313,-1631913262033950119], (-4419311717241338507,-4408863717427302952], (-4005546528790223229,-4000695816476140849], (714787271143415911,718355352027453636], (-7655796196565388324,-7646812566394513626], (-1631913262033950119,-1626800922236335484]]] Sync failed between /10.101.123.37 and /10.101.123.54&lt;br/&gt;
        at org.apache.cassandra.repair.RemoteSyncTask.syncComplete(RemoteSyncTask.java:67) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.repair.RepairSession.syncComplete(RepairSession.java:211) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.service.ActiveRepairService.handleMessage(ActiveRepairService.java:462) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.repair.RepairMessageVerbHandler.doVerb(RepairMessageVerbHandler.java:165) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:64) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:26&amp;#93;&lt;/span&gt; 2016-11-24 03:41:30,347 RepairRunnable.java:261 - Repair session 02ed5341-b1ba-11e6-a5e3-61594f2eacfb for range &lt;span class=&quot;error&quot;&gt;&amp;#91;(-1335941665601891325,-1321221006770475620&amp;#93;&lt;/span&gt;, (-7656219523738612247,-7655796196565388324], (7609334541554158623,7611123200966944805], (4459027606150691982,4474972746587738233], (6002584461649025600,6007853196169892926], (3573722541167411217,3580784726724553369], (-5464989069710829887,-5459049126444114128], (-5459049126444114128,-5449173436278793738], (-1642684260736153313,-1631913262033950119], (-4419311717241338507,-4408863717427302952], (-4005546528790223229,-4000695816476140849], (714787271143415911,718355352027453636], (-7655796196565388324,-7646812566394513626], (-1631913262033950119,-1626800922236335484]] failed with error &lt;a href=&quot;#02ed5341-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(-1335941665601891325,-1321221006770475620], (-7656219523738612247,-7655796196565388324&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #02ed5341-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(-1335941665601891325,-1321221006770475620], (-7656219523738612247,-7655796196565388324&lt;/a&gt;, (7609334541554158623,7611123200966944805], (4459027606150691982,4474972746587738233], (6002584461649025600,6007853196169892926], (3573722541167411217,3580784726724553369], (-5464989069710829887,-5459049126444114128], (-5459049126444114128,-5449173436278793738], (-1642684260736153313,-1631913262033950119], (-4419311717241338507,-4408863717427302952], (-4005546528790223229,-4000695816476140849], (714787271143415911,718355352027453636], (-7655796196565388324,-7646812566394513626], (-1631913262033950119,-1626800922236335484]]] Sync failed between /10.101.123.37 and /10.101.123.54&lt;br/&gt;
org.apache.cassandra.exceptions.RepairException: &lt;a href=&quot;#02ed5341-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(-1335941665601891325,-1321221006770475620], (-7656219523738612247,-7655796196565388324&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #02ed5341-b1ba-11e6-a5e3-61594f2eacfb on radius/radius_log_user, [(-1335941665601891325,-1321221006770475620], (-7656219523738612247,-7655796196565388324&lt;/a&gt;, (7609334541554158623,7611123200966944805], (4459027606150691982,4474972746587738233], (6002584461649025600,6007853196169892926], (3573722541167411217,3580784726724553369], (-5464989069710829887,-5459049126444114128], (-5459049126444114128,-5449173436278793738], (-1642684260736153313,-1631913262033950119], (-4419311717241338507,-4408863717427302952], (-4005546528790223229,-4000695816476140849], (714787271143415911,718355352027453636], (-7655796196565388324,-7646812566394513626], (-1631913262033950119,-1626800922236335484]]] Sync failed between /10.101.123.37 and /10.101.123.54&lt;br/&gt;
        at org.apache.cassandra.repair.RemoteSyncTask.syncComplete(RemoteSyncTask.java:67) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.repair.RepairSession.syncComplete(RepairSession.java:211) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.service.ActiveRepairService.handleMessage(ActiveRepairService.java:462) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.repair.RepairMessageVerbHandler.doVerb(RepairMessageVerbHandler.java:165) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:64) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;----- 3 -----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:37&amp;#93;&lt;/span&gt; 2016-11-24 03:51:05,643 StreamSession.java:533 - &lt;a href=&quot;#93a1a410-b1e5-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a1a410-b1e5-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.37&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.37:7000&amp;#93;&lt;/span&gt; 2016-11-24 03:51:05,952 StreamSession.java:533 - &lt;a href=&quot;#93a1a410-b1e5-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a1a410-b1e5-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.37&lt;br/&gt;
java.net.SocketException: End-of-stream reached&lt;br/&gt;
        at org.apache.cassandra.streaming.messages.StreamMessage.deserialize(StreamMessage.java:69) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.ConnectionHandler$IncomingMessageHandler.run(ConnectionHandler.java:292) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;----- 4 -----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.54:7000&amp;#93;&lt;/span&gt; 2016-11-24 03:57:34,878 StreamSession.java:641 - &lt;a href=&quot;#93a574a2-b1e5-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a574a2-b1e5-11e6-a5e3-61594f2eacfb&lt;/a&gt; Remote peer 10.101.123.54 failed stream session.&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:38&amp;#93;&lt;/span&gt; 2016-11-24 03:57:53,161 StreamSession.java:533 - &lt;a href=&quot;#93a574a2-b1e5-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a574a2-b1e5-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.54&lt;/p&gt;

&lt;p&gt;----- 5 -----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.53:7000&amp;#93;&lt;/span&gt; 2016-11-24 05:34:55,782 StreamSession.java:641 - &lt;a href=&quot;#1233c743-b1e1-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1233c743-b1e1-11e6-a5e3-61594f2eacfb&lt;/a&gt; Remote peer 10.101.123.53 failed stream session.&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:27&amp;#93;&lt;/span&gt; 2016-11-24 05:34:55,786 RepairSession.java:290 - &lt;a href=&quot;#02ded451-b1ba-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #02ded451-b1ba-11e6-a5e3-61594f2eacfb&lt;/a&gt; Session completed with the following error&lt;br/&gt;
org.apache.cassandra.streaming.StreamException: Stream failed&lt;br/&gt;
        at org.apache.cassandra.streaming.management.StreamEventJMXNotifier.onFailure(StreamEventJMXNotifier.java:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.Futures$6.run(Futures.java:1310) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:216) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:192) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:439) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.sessionFailed(StreamSession.java:642) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.messageReceived(StreamSession.java:494) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.ConnectionHandler$IncomingMessageHandler.run(ConnectionHandler.java:298) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:27&amp;#93;&lt;/span&gt; 2016-11-24 05:34:55,787 RepairRunnable.java:261 - Repair session 02ded451-b1ba-11e6-a5e3-61594f2eacfb for range &lt;span class=&quot;error&quot;&gt;&amp;#91;(4336322345184841912,4366163876979388475&amp;#93;&lt;/span&gt;, (-7933579975044282977,-7914796416580058518], (1839892671254449208,1841457557372605571], (1936854791639141672,1938001536070334116], (1164510091499688902,1178486765398617360], (-8158056158024454734,-8152122708824144179], (-1849807793309054700,-1843766048765777468], (-6348948024326794761,-6335446313814509922], (8533993130815635284,8557700176962818555], (-2638878446128576989,-2630418219576054523], (8564018824386122995,8570162500655087152], (8570162500655087152,8580710178918673615], (8557700176962818555,8564018824386122995], (8140631388675412405,8147625422662430664], (4213947160008781931,4214821777286722249], (-8152122708824144179,-8152031883182314791], (8582180673436608178,8586996658256378648], (4366163876979388475,4369191621839595605], (8481593436612459797,8494752028882049497], (2990658207661239276,2997421858321140810], (4207239196271256582,4213947160008781931], (6071207062879792046,6078438592707528242], (-7906539059355975104,-7901946461742072348], (-8403286291733434230,-8396456143995118801], (8046054504348116945,8048439946921860060], (-1785584523196265270,-1774397730504967785], (-5740174840775988273,-5709906583533929520], (-8166983564376894748,-8158056158024454734], (8580710178918673615,8582180673436608178], (-7914796416580058518,-7906539059355975104], (-6349776557775176357,-6348948024326794761], (-2575565821746779005,-2565520330427629056], (8295018274402639934,8299841907912314103]] failed with error Stream failed&lt;br/&gt;
org.apache.cassandra.streaming.StreamException: Stream failed&lt;br/&gt;
        at org.apache.cassandra.streaming.management.StreamEventJMXNotifier.onFailure(StreamEventJMXNotifier.java:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.Futures$6.run(Futures.java:1310) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:216) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:192) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:439) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.sessionFailed(StreamSession.java:642) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.messageReceived(StreamSession.java:494) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.ConnectionHandler$IncomingMessageHandler.run(ConnectionHandler.java:298) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;----- 6 -----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:36&amp;#93;&lt;/span&gt; 2016-11-24 05:45:04,687 StreamSession.java:533 - &lt;a href=&quot;#1233c743-b1e1-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1233c743-b1e1-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.53&lt;br/&gt;
java.lang.RuntimeException: Outgoing stream handler has been closed&lt;br/&gt;
        at org.apache.cassandra.streaming.ConnectionHandler.sendMessage(ConnectionHandler.java:145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.maybeCompleted(StreamSession.java:706) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.taskCompleted(StreamSession.java:662) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamReceiveTask$OnCompletionRunnable.run(StreamReceiveTask.java:246) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;----- 7 -----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:81&amp;#93;&lt;/span&gt; 2016-11-24 08:53:45,489 StreamSession.java:533 - &lt;a href=&quot;#8708c770-b20c-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #8708c770-b20c-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.37&lt;br/&gt;
org.apache.cassandra.exceptions.WriteTimeoutException: Operation timed out - received only 0 responses.&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.apply(Keyspace.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.lambda$apply$74(Keyspace.java:466) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:109) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:22&amp;#93;&lt;/span&gt; 2016-11-24 08:53:45,493 RepairSession.java:290 - &lt;a href=&quot;#03204a20-b1ba-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #03204a20-b1ba-11e6-a5e3-61594f2eacfb&lt;/a&gt; Session completed with the following error&lt;br/&gt;
org.apache.cassandra.streaming.StreamException: Stream failed&lt;br/&gt;
        at org.apache.cassandra.streaming.management.StreamEventJMXNotifier.onFailure(StreamEventJMXNotifier.java:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.Futures$6.run(Futures.java:1310) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:216) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:192) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:439) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.onError(StreamSession.java:542) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamReceiveTask$OnCompletionRunnable.run(StreamReceiveTask.java:251) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:22&amp;#93;&lt;/span&gt; 2016-11-24 08:53:45,494 RepairRunnable.java:261 - Repair session 03204a20-b1ba-11e6-a5e3-61594f2eacfb for range &lt;span class=&quot;error&quot;&gt;&amp;#91;(7904416027548030517,7904644339187931494&amp;#93;&lt;/span&gt;, (1992268616217213531,2011387685575474580], (609927302916152607,627634447892460792], (-7646812566394513626,-7644383923352462018], (-4008413746138462176,-4005546528790223229], (6817850835888923053,6818203283758294007], (6534614382736965520,6538035742767863193], (8508956293872390588,8512374867520547024], (-1922781003874961453,-1922011619066347023], (-1272836872170180568,-1271613201248661065], (1976999083225979197,1992268616217213531], (-2405793572890717179,-2402070345340440541], (6533344633441688698,6534614382736965520], (2765121196827852596,2787683730312124458], (6538035742767863193,6548726064957823711], (-7644383923352462018,-7642224985092838839], (3171894574675724789,3172900306782399653], (2197711694648372887,2206781329223605896], (6818203283758294007,6818927700000354155], (4297703982421974284,4305423041633973359], (6530186721828199637,6533344633441688698], (-8756481129378507914,-8750331462660878734], (-7642224985092838839,-7639477375842151880]] failed with error Stream failed&lt;br/&gt;
org.apache.cassandra.streaming.StreamException: Stream failed&lt;br/&gt;
        at org.apache.cassandra.streaming.management.StreamEventJMXNotifier.onFailure(StreamEventJMXNotifier.java:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.Futures$6.run(Futures.java:1310) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:216) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:192) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:439) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.onError(StreamSession.java:542) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamReceiveTask$OnCompletionRunnable.run(StreamReceiveTask.java:251) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.37:7000&amp;#93;&lt;/span&gt; 2016-11-24 08:53:46,317 StreamSession.java:533 - &lt;a href=&quot;#8708c770-b20c-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #8708c770-b20c-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.37&lt;br/&gt;
java.net.SocketException: End-of-stream reached&lt;br/&gt;
        at org.apache.cassandra.streaming.messages.StreamMessage.deserialize(StreamMessage.java:69) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.ConnectionHandler$IncomingMessageHandler.run(ConnectionHandler.java:292) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;------ 8 ------&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:41&amp;#93;&lt;/span&gt; 2016-11-24 09:17:14,677 StreamSession.java:533 - &lt;a href=&quot;#1262c680-b1e1-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1262c680-b1e1-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.54&lt;br/&gt;
org.apache.cassandra.exceptions.WriteTimeoutException: Operation timed out - received only 0 responses.&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.apply(Keyspace.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.lambda$apply$74(Keyspace.java:466) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:109) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.54:7000&amp;#93;&lt;/span&gt; 2016-11-24 09:17:15,017 StreamSession.java:533 - &lt;a href=&quot;#1262c680-b1e1-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1262c680-b1e1-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.54&lt;br/&gt;
java.net.SocketException: End-of-stream reached&lt;br/&gt;
        at org.apache.cassandra.streaming.messages.StreamMessage.deserialize(StreamMessage.java:69) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.ConnectionHandler$IncomingMessageHandler.run(ConnectionHandler.java:292) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;----- 9 -----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:72&amp;#93;&lt;/span&gt; 2016-11-24 09:47:02,248 StreamSession.java:533 - &lt;a href=&quot;#b0813591-b204-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b0813591-b204-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.54&lt;br/&gt;
org.apache.cassandra.exceptions.WriteTimeoutException: Operation timed out - received only 0 responses.&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.apply(Keyspace.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.lambda$apply$74(Keyspace.java:466) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:109) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:72&amp;#93;&lt;/span&gt; 2016-11-24 09:47:02,249 StreamResultFuture.java:188 - &lt;a href=&quot;#b0813591-b204-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b0813591-b204-11e6-a5e3-61594f2eacfb&lt;/a&gt; Session with /10.101.123.54 is complete&lt;br/&gt;
WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:72&amp;#93;&lt;/span&gt; 2016-11-24 09:47:02,249 StreamResultFuture.java:215 - &lt;a href=&quot;#b0813591-b204-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b0813591-b204-11e6-a5e3-61594f2eacfb&lt;/a&gt; Stream failed&lt;br/&gt;
WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:25&amp;#93;&lt;/span&gt; 2016-11-24 09:47:02,265 RepairJob.java:153 - &lt;a href=&quot;#031881f1-b1ba-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #031881f1-b1ba-11e6-a5e3-61594f2eacfb&lt;/a&gt; radius_log_user sync failed&lt;br/&gt;
WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;MutationStage-1&amp;#93;&lt;/span&gt; 2016-11-24 09:47:02,266 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;MutationStage-1,5,main&amp;#93;&lt;/span&gt;: {}&lt;br/&gt;
java.lang.NullPointerException: null&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:25&amp;#93;&lt;/span&gt; 2016-11-24 09:47:02,275 RepairSession.java:290 - &lt;a href=&quot;#031881f1-b1ba-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #031881f1-b1ba-11e6-a5e3-61594f2eacfb&lt;/a&gt; Session completed with the following error&lt;br/&gt;
org.apache.cassandra.streaming.StreamException: Stream failed&lt;br/&gt;
        at org.apache.cassandra.streaming.management.StreamEventJMXNotifier.onFailure(StreamEventJMXNotifier.java:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.Futures$6.run(Futures.java:1310) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:216) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:192) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:439) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.onError(StreamSession.java:542) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamReceiveTask$OnCompletionRunnable.run(StreamReceiveTask.java:251) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:25&amp;#93;&lt;/span&gt; 2016-11-24 09:47:02,276 RepairRunnable.java:261 - Repair session 031881f1-b1ba-11e6-a5e3-61594f2eacfb for range &lt;span class=&quot;error&quot;&gt;&amp;#91;(-1774397730504967785,-1762758309398474120&amp;#93;&lt;/span&gt;, (8147625422662430664,8150788098883189595], (2403112104956782810,2404720327411004342], (6078438592707528242,6082354808100608599], (-1370323679961738923,-1365059347020395178], (7993733835100003655,8015005513539374688], (-1857508277235383784,-1849807793309054700], (-1370928608225827748,-1370323679961738923], (8150788098883189595,8164821449219626475], (8679953928760920469,8689453066878026377], (-3426998630338216696,-3420776174229205444], (3571513977484531056,3573722541167411217], (2395920478339673197,2403112104956782810], (7741141583060715116,7743151848268597969], (5294878291570266517,5298658264359247830], (3533995683509843155,3536422023436685141], (3529213866575892196,3533995683509843155], (8015005513539374688,8019140942924181546]] failed with error Stream failed&lt;br/&gt;
org.apache.cassandra.streaming.StreamException: Stream failed&lt;br/&gt;
        at org.apache.cassandra.streaming.management.StreamEventJMXNotifier.onFailure(StreamEventJMXNotifier.java:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.Futures$6.run(Futures.java:1310) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:216) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:192) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:439) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.onError(StreamSession.java:542) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamReceiveTask$OnCompletionRunnable.run(StreamReceiveTask.java:251) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;----- 10 -----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:84&amp;#93;&lt;/span&gt; 2016-11-24 10:01:35,962 StreamSession.java:533 - &lt;a href=&quot;#14bf2f71-b215-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #14bf2f71-b215-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.50&lt;br/&gt;
org.apache.cassandra.exceptions.WriteTimeoutException: Operation timed out - received only 0 responses.&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.apply(Keyspace.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.lambda$apply$74(Keyspace.java:466) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:109) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:26&amp;#93;&lt;/span&gt; 2016-11-24 10:01:35,966 RepairSession.java:290 - &lt;a href=&quot;#032e05c0-b1ba-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #032e05c0-b1ba-11e6-a5e3-61594f2eacfb&lt;/a&gt; Session completed with the following error&lt;br/&gt;
org.apache.cassandra.streaming.StreamException: Stream failed&lt;br/&gt;
        at org.apache.cassandra.streaming.management.StreamEventJMXNotifier.onFailure(StreamEventJMXNotifier.java:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.Futures$6.run(Futures.java:1310) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:216) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:192) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:439) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.onError(StreamSession.java:542) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamReceiveTask$OnCompletionRunnable.run(StreamReceiveTask.java:251) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairJobTask:26&amp;#93;&lt;/span&gt; 2016-11-24 10:01:35,966 RepairRunnable.java:261 - Repair session 032e05c0-b1ba-11e6-a5e3-61594f2eacfb for range &lt;span class=&quot;error&quot;&gt;&amp;#91;(4787371764889471292,4791275868383167575&amp;#93;&lt;/span&gt;, (7660338039579725082,7682519547658080680], (-7888038863789003009,-7883335201927605979], (7551090506670172891,7557064621539106213], (4203593558336671108,4204711535586868916], (7682529946942857131,7700547538244194596], (7545341063171693903,7547704657293476474], (7547704657293476474,7551090506670172891], (6833522370653895113,6851489965988389441], (1281248143248933867,1283892626126598347], (7682519547658080680,7682529946942857131], (7712069670755918582,7713757639857850164], (-2751798030355460938,-2750674055801082756], (1275546448184112943,1281248143248933867], (2787683730312124458,2789980706087291658], (7700547538244194596,7712069670755918582], (4731219540005886245,4735221596252133393], (-2753266270806071514,-2751798030355460938], (-4340445172605159261,-4330574594611691677]] failed with error Stream failed&lt;br/&gt;
org.apache.cassandra.streaming.StreamException: Stream failed&lt;br/&gt;
        at org.apache.cassandra.streaming.management.StreamEventJMXNotifier.onFailure(StreamEventJMXNotifier.java:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.Futures$6.run(Futures.java:1310) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;guava-18.0.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:216) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:192) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:439) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamSession.onError(StreamSession.java:542) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.StreamReceiveTask$OnCompletionRunnable.run(StreamReceiveTask.java:251) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.50:7000&amp;#93;&lt;/span&gt; 2016-11-24 10:01:36,713 StreamSession.java:533 - &lt;a href=&quot;#14bf2f71-b215-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #14bf2f71-b215-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.50&lt;br/&gt;
java.net.SocketException: End-of-stream reached&lt;br/&gt;
        at org.apache.cassandra.streaming.messages.StreamMessage.deserialize(StreamMessage.java:69) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.streaming.ConnectionHandler$IncomingMessageHandler.run(ConnectionHandler.java:292) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;----- 11 -----&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:82&amp;#93;&lt;/span&gt; 2016-11-24 11:20:34,030 StreamSession.java:533 - &lt;a href=&quot;#873a10a2-b20c-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #873a10a2-b20c-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.44&lt;br/&gt;
org.apache.cassandra.exceptions.WriteTimeoutException: Operation timed out - received only 0 responses.&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.apply(Keyspace.java:457) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.Keyspace.lambda$apply$74(Keyspace.java:466) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_111&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:109) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-3.9.0.jar:3.9.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;--------------------------------&lt;/p&gt;

&lt;p&gt;errors from node 10.101.123.44 :&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.55:33364&amp;#93;&lt;/span&gt; 2016-11-24 11:20:34,031 StreamSession.java:641 - &lt;a href=&quot;#873a10a2-b20c-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #873a10a2-b20c-11e6-a5e3-61594f2eacfb&lt;/a&gt; Remote peer 10.101.123.55 failed stream session.&lt;/p&gt;


&lt;p&gt;--------------------------------&lt;/p&gt;

&lt;p&gt;errors from node 10.101.123.46 :&lt;/p&gt;

&lt;p&gt;system.log.2016-11-23_1838:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:183&amp;#93;&lt;/span&gt; 2016-11-23 18:36:33,983 StreamSession.java:533 - &lt;a href=&quot;#b9289f40-b186-11e6-8990-19a24d4ea05e&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b9289f40-b186-11e6-8990-19a24d4ea05e&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.53&lt;br/&gt;
system.log.2016-11-23_1848:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.53:7000&amp;#93;&lt;/span&gt; 2016-11-23 18:43:59,827 StreamSession.java:533 - &lt;a href=&quot;#b9289f40-b186-11e6-8990-19a24d4ea05e&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b9289f40-b186-11e6-8990-19a24d4ea05e&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.53&lt;/p&gt;

&lt;p&gt;---------------------------------&lt;/p&gt;

&lt;p&gt;errors from node 10.101.123.36 :&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:126&amp;#93;&lt;/span&gt; 2016-11-23 20:33:23,594 StreamSession.java:533 - &lt;a href=&quot;#b8914140-b186-11e6-81f0-a9fa8defd0bb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b8914140-b186-11e6-81f0-a9fa8defd0bb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.37&lt;/p&gt;

&lt;p&gt;---------------------------------&lt;/p&gt;

&lt;p&gt;errors from node 10.101.123.37 :&lt;/p&gt;

&lt;p&gt;system.log.2016-11-24_0945:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.36:43970&amp;#93;&lt;/span&gt; 2016-11-23 20:33:23,595 StreamSession.java:641 - &lt;a href=&quot;#b8914140-b186-11e6-81f0-a9fa8defd0bb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b8914140-b186-11e6-81f0-a9fa8defd0bb&lt;/a&gt; Remote peer 10.101.123.36 failed stream session.&lt;br/&gt;
system.log.2016-11-24_0945:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:13&amp;#93;&lt;/span&gt; 2016-11-24 03:41:27,162 Keyspace.java:516 - Unknown exception caught while attempting to update MaterializedView! radius.radius_log_user&lt;br/&gt;
system.log.2016-11-24_0945:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:13&amp;#93;&lt;/span&gt; 2016-11-24 03:41:27,169 StreamSession.java:533 - &lt;a href=&quot;#93a1a410-b1e5-11e6-b34a-11869245b6ff&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a1a410-b1e5-11e6-b34a-11869245b6ff&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.54&lt;br/&gt;
system.log.2016-11-24_0945:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-OUT-/10.101.123.54:7000&amp;#93;&lt;/span&gt; 2016-11-24 03:41:30,343 StreamSession.java:533 - &lt;a href=&quot;#93a1a410-b1e5-11e6-b34a-11869245b6ff&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a1a410-b1e5-11e6-b34a-11869245b6ff&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.54&lt;br/&gt;
system.log.2016-11-24_0945:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.55:46259&amp;#93;&lt;/span&gt; 2016-11-24 03:51:05,653 StreamSession.java:641 - &lt;a href=&quot;#93a1a410-b1e5-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a1a410-b1e5-11e6-a5e3-61594f2eacfb&lt;/a&gt; Remote peer 10.101.123.55 failed stream session.&lt;br/&gt;
system.log.2016-11-24_0945:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:12&amp;#93;&lt;/span&gt; 2016-11-24 03:51:18,183 Keyspace.java:516 - Unknown exception caught while attempting to update MaterializedView! radius.radius_log_user&lt;br/&gt;
system.log.2016-11-24_0945:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:12&amp;#93;&lt;/span&gt; 2016-11-24 03:51:18,191 StreamSession.java:533 - &lt;a href=&quot;#93a1a410-b1e5-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a1a410-b1e5-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.55&lt;br/&gt;
system.log.2016-11-24_0945:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.55:53963&amp;#93;&lt;/span&gt; 2016-11-24 08:53:45,490 StreamSession.java:641 - &lt;a href=&quot;#8708c770-b20c-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #8708c770-b20c-11e6-a5e3-61594f2eacfb&lt;/a&gt; Remote peer 10.101.123.55 failed stream session.&lt;br/&gt;
system.log.2016-11-24_0945:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:19&amp;#93;&lt;/span&gt; 2016-11-24 09:45:19,554 StreamSession.java:533 - &lt;a href=&quot;#8708c770-b20c-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #8708c770-b20c-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.55&lt;/p&gt;

&lt;p&gt;---------------------------------&lt;/p&gt;

&lt;p&gt;errors from node 10.101.123.50 :&lt;/p&gt;

&lt;p&gt;system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.55:51504&amp;#93;&lt;/span&gt; 2016-11-24 10:01:35,962 StreamSession.java:641 - &lt;a href=&quot;#14bf2f71-b215-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #14bf2f71-b215-11e6-a5e3-61594f2eacfb&lt;/a&gt; Remote peer 10.101.123.55 failed stream session.&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:29&amp;#93;&lt;/span&gt; 2016-11-24 10:17:21,273 StreamSession.java:533 - &lt;a href=&quot;#14bf2f71-b215-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #14bf2f71-b215-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.55&lt;br/&gt;
system.log.2016-11-24_0943:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.54:40081&amp;#93;&lt;/span&gt; 2016-11-24 00:14:17,660 StreamSession.java:641 - &lt;a href=&quot;#dadda440-b1be-11e6-91dc-6d83e11e0103&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #dadda440-b1be-11e6-91dc-6d83e11e0103&lt;/a&gt; Remote peer 10.101.123.54 failed stream session.&lt;br/&gt;
system.log.2016-11-24_0943:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:5&amp;#93;&lt;/span&gt; 2016-11-24 01:43:07,057 StreamSession.java:533 - &lt;a href=&quot;#dadda440-b1be-11e6-91dc-6d83e11e0103&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #dadda440-b1be-11e6-91dc-6d83e11e0103&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.54&lt;/p&gt;

&lt;p&gt;---------------------------------&lt;/p&gt;

&lt;p&gt;errors from node 10.101.123.53 :&lt;/p&gt;

&lt;p&gt;system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:11&amp;#93;&lt;/span&gt; 2016-11-24 05:34:55,782 StreamSession.java:533 - &lt;a href=&quot;#1233c743-b1e1-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1233c743-b1e1-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.55&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.55:51141&amp;#93;&lt;/span&gt; 2016-11-24 05:34:56,268 StreamSession.java:533 - &lt;a href=&quot;#1233c743-b1e1-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1233c743-b1e1-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.55&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.54:7000&amp;#93;&lt;/span&gt; 2016-11-24 06:47:39,392 StreamSession.java:641 - &lt;a href=&quot;#1265acb0-b1e1-11e6-8dc2-79786d1a296a&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1265acb0-b1e1-11e6-8dc2-79786d1a296a&lt;/a&gt; Remote peer 10.101.123.54 failed stream session.&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:12&amp;#93;&lt;/span&gt; 2016-11-24 07:29:10,812 StreamSession.java:533 - &lt;a href=&quot;#1265acb0-b1e1-11e6-8dc2-79786d1a296a&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1265acb0-b1e1-11e6-8dc2-79786d1a296a&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.54&lt;br/&gt;
system.log.2016-11-23_1933:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.46:53169&amp;#93;&lt;/span&gt; 2016-11-23 18:36:33,983 StreamSession.java:641 - &lt;a href=&quot;#b9289f40-b186-11e6-8990-19a24d4ea05e&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b9289f40-b186-11e6-8990-19a24d4ea05e&lt;/a&gt; Remote peer 10.101.123.46 failed stream session.&lt;/p&gt;

&lt;p&gt;---------------------------------&lt;/p&gt;

&lt;p&gt;errors from node 10.101.123.54 :&lt;/p&gt;

&lt;p&gt;system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:7&amp;#93;&lt;/span&gt; 2016-11-24 00:14:17,661 StreamSession.java:533 - &lt;a href=&quot;#dadda440-b1be-11e6-91dc-6d83e11e0103&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #dadda440-b1be-11e6-91dc-6d83e11e0103&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.50&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.50:7000&amp;#93;&lt;/span&gt; 2016-11-24 00:14:18,508 StreamSession.java:533 - &lt;a href=&quot;#dadda440-b1be-11e6-91dc-6d83e11e0103&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #dadda440-b1be-11e6-91dc-6d83e11e0103&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.50&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.37:42462&amp;#93;&lt;/span&gt; 2016-11-24 03:41:42,022 StreamSession.java:641 - &lt;a href=&quot;#93a1a410-b1e5-11e6-b34a-11869245b6ff&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a1a410-b1e5-11e6-b34a-11869245b6ff&lt;/a&gt; Remote peer 10.101.123.37 failed stream session.&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:18&amp;#93;&lt;/span&gt; 2016-11-24 03:57:34,863 Keyspace.java:516 - Unknown exception caught while attempting to update MaterializedView! radius.radius_log_user&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:18&amp;#93;&lt;/span&gt; 2016-11-24 03:57:34,871 StreamSession.java:533 - &lt;a href=&quot;#93a574a2-b1e5-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a574a2-b1e5-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.55&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.55:42230&amp;#93;&lt;/span&gt; 2016-11-24 03:57:35,179 StreamSession.java:533 - &lt;a href=&quot;#93a574a2-b1e5-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #93a574a2-b1e5-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.55&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:19&amp;#93;&lt;/span&gt; 2016-11-24 06:47:39,391 StreamSession.java:533 - &lt;a href=&quot;#1265acb0-b1e1-11e6-8dc2-79786d1a296a&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1265acb0-b1e1-11e6-8dc2-79786d1a296a&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.53&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.53:50120&amp;#93;&lt;/span&gt; 2016-11-24 06:47:40,371 StreamSession.java:533 - &lt;a href=&quot;#1265acb0-b1e1-11e6-8dc2-79786d1a296a&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1265acb0-b1e1-11e6-8dc2-79786d1a296a&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.53&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.55:51183&amp;#93;&lt;/span&gt; 2016-11-24 09:17:14,678 StreamSession.java:641 - &lt;a href=&quot;#1262c680-b1e1-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1262c680-b1e1-11e6-a5e3-61594f2eacfb&lt;/a&gt; Remote peer 10.101.123.55 failed stream session.&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;StreamReceiveTask:20&amp;#93;&lt;/span&gt; 2016-11-24 09:32:22,594 StreamSession.java:533 - &lt;a href=&quot;#1262c680-b1e1-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #1262c680-b1e1-11e6-a5e3-61594f2eacfb&lt;/a&gt; Streaming error occurred on session with peer 10.101.123.55&lt;br/&gt;
system.log:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.55:54255&amp;#93;&lt;/span&gt; 2016-11-24 09:47:02,249 StreamSession.java:641 - &lt;a href=&quot;#b0813591-b204-11e6-a5e3-61594f2eacfb&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b0813591-b204-11e6-a5e3-61594f2eacfb&lt;/a&gt; Remote peer 10.101.123.55 failed stream session.&lt;br/&gt;
system.log.2016-11-23_1754:ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;STREAM-IN-/10.101.123.46:55942&amp;#93;&lt;/span&gt; 2016-11-23 17:52:43,889 StreamSession.java:641 - &lt;a href=&quot;#b9289f40-b186-11e6-8990-19a24d4ea05e&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #b9289f40-b186-11e6-8990-19a24d4ea05e&lt;/a&gt; Remote peer 10.101.123.46 failed stream session.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;br/&gt;
Nir.&lt;/p&gt;</comment>
                            <comment id="15693312" author="pauloricardomg" created="Thu, 24 Nov 2016 13:37:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zilkanir&quot; class=&quot;user-hover&quot; rel=&quot;zilkanir&quot;&gt;zilkanir&lt;/a&gt; is there any chance you are repairing a table with materialized views?&lt;/p&gt;</comment>
                            <comment id="15693338" author="zilkanir" created="Thu, 24 Nov 2016 13:53:57 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Yes. There&apos;s one table with one MV (&apos;nodetool repair&apos; repairs everything).&lt;/p&gt;

&lt;p&gt;After i moved to 3.9 , i implemented one MV.&lt;/p&gt;

&lt;p&gt;It&apos;s a problem?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Nir.&lt;/p&gt;</comment>
                            <comment id="15693376" author="pauloricardomg" created="Thu, 24 Nov 2016 14:11:08 +0000"  >&lt;p&gt;Hmm, it seems that when the node fails to grab the MV lock for a repair mutation it throws a WriteTimeoutException, failing the repair session so this is indeed a bug. In order to fix, we should retry acquiring the lock instead of failing the stream session for mutations originating from repair.&lt;/p&gt;

&lt;p&gt;As a workaround, I suggest you to break up repair by tables and disable incremental repair for tables with MVs since these are broken due to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12888&quot; title=&quot;Incremental repairs broken for MVs and CDC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12888&quot;&gt;CASSANDRA-12888&lt;/a&gt;, what should reduce the contention and decrease ocurrences of WriteTimeOut during repair streaming.&lt;/p&gt;</comment>
                            <comment id="15693543" author="zilkanir" created="Thu, 24 Nov 2016 15:31:14 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;It could cause problem with decommission nodes too?&lt;/p&gt;

&lt;p&gt;Because all my tries to decommission nodes hanged (with stream errors),&lt;/p&gt;

&lt;p&gt;&quot;solved it&quot; by: stopped the hanged decommision proccess (UL) --&amp;gt; restart cassandra (node UN)  --&amp;gt; stop cassandra (DN) --&amp;gt; run removenode from other host.&lt;/p&gt;

&lt;p&gt;seems like it general streaming problem in the cluster.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Nir.&lt;/p&gt;</comment>
                            <comment id="15696532" author="brstgt" created="Fri, 25 Nov 2016 19:30:14 +0000"  >&lt;p&gt;I would propose to simply rename the param &quot;isClReplay&quot; in Keyspace.apply() to &quot;mayThrowWTE&quot; or &quot;mayTimeout&quot; or sth similar with default true. IMHO &quot;isClReplay&quot; is bad style as the flag should indicate a semantic, not a caller source.&lt;/p&gt;

&lt;p&gt;Keyspace.applyFromCommitLog just has to set writeCommitLog=false + mayTimeout = false&lt;br/&gt;
Introduce Keyspace.applyFromStream and set writeCommitLog=true + mayTimeout = false&lt;/p&gt;

&lt;p&gt;In StreamReceiveTask, the Keyspace could be opened once per SSTableReader, then the Keyspace wouldn&apos;t have to be opened again for every mutation. Like this:&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
                        for (SSTableReader reader : readers)&lt;br/&gt;
                        {&lt;br/&gt;
                            Keyspace ks = Keyspace.open(reader.getKeyspaceName());&lt;br/&gt;
                            try (ISSTableScanner scanner = reader.getScanner())&lt;br/&gt;
...&lt;br/&gt;
                                        if (hasCDC)&lt;br/&gt;
                                            ks.applyFromStream(m);&lt;br/&gt;
                                        else&lt;br/&gt;
                                            ks.applyFromStreamUnsafe(m);&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;</comment>
                            <comment id="15696700" author="brstgt" created="Fri, 25 Nov 2016 21:14:27 +0000"  >&lt;p&gt;Made a commit for that:&lt;br/&gt;
&lt;a href=&quot;https://github.com/Jaumo/cassandra/commit/83ba9240b551e80625b6800d39b9fe157610a912&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Jaumo/cassandra/commit/83ba9240b551e80625b6800d39b9fe157610a912&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also refactored the one million different overloadings of Keyspace.apply/Mutation.apply a little bit for a simpler and more semantic usage&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pauloricardomg&quot; class=&quot;user-hover&quot; rel=&quot;pauloricardomg&quot;&gt;pauloricardomg&lt;/a&gt; Would love to get some review.&lt;/p&gt;</comment>
                            <comment id="15697527" author="brstgt" created="Sat, 26 Nov 2016 08:14:39 +0000"  >&lt;p&gt;What also came into my mind: What about hints delivery? Isn&apos;t this the same case? I observed WTEs many many times in the write path of hint delivery. This mostly happens if a node was down or overloaded and all other nodes start delivering hints.&lt;br/&gt;
In the past I had to manage that situation manually by pausing hints on many nodes and only allow 1-2 nodes to deliver hints.&lt;br/&gt;
For my understanding every hint delivery has its own thread so a WTE does not really make sense here either.&lt;/p&gt;</comment>
                            <comment id="15699703" author="zilkanir" created="Sun, 27 Nov 2016 13:40:04 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;As you recommended, I ran in the last day 2 repairs on tables without MV&apos;s and it worked well and finished with good times without any errors.&lt;/p&gt;

&lt;p&gt;So it seems that just the MV&apos;s causing the streaming problems in the cluster.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Nir.&lt;/p&gt;</comment>
                            <comment id="15701415" author="brstgt" created="Mon, 28 Nov 2016 09:19:53 +0000"  >&lt;p&gt;Maybe its not correct to say &quot;a hint delivery has its own thread&quot; but it is not as multiplexed as usual write request and the usual WTE in the write path has a different semantic meaning.&lt;/p&gt;

&lt;p&gt;For my understanding&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a WTE should more or less indicate if a write request was able to meet the desired consistency in a limited time frame.&lt;/li&gt;
	&lt;li&gt;and it is a constraint that many clients do not completely block the coordinator for an unlimited time if there is &quot;something wrong&quot; in the write path, right?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But in case of hint delivery this is different:&lt;br/&gt;
1. There is not an arbitrary number of clients. Max clients == #nodes - 1&lt;br/&gt;
2. There is only 1 connection for node x &amp;gt; node y&lt;br/&gt;
3. If there is a timeout between node x &amp;gt; node y the hint will be retried and retried and retried anyway which probably will put even more pressure on the target node than just to retry lock aquisition until it can be acquired. I observered that many times.&lt;br/&gt;
4. In worst case (also observerd), if a lot of WTE occur during hint delivery, not hints will be delivered successfully at all and hints will pile up more and more until the pressure is relieved manually by pausing hint delivery on all nodes but 1 or 2.&lt;/p&gt;

&lt;p&gt;Some feedback on this?&lt;/p&gt;</comment>
                            <comment id="15703224" author="brstgt" created="Mon, 28 Nov 2016 21:42:30 +0000"  >&lt;p&gt;Can someone please comment on that:&lt;/p&gt;

&lt;p&gt;Is it possible that its &quot;not so cool&quot; to send mutations of CFs with views to the regular write path during bootstrap?&lt;br/&gt;
All the MV sstables are also part of the bootstrapping and range movement process, right? So why not just stream the SSTables down to files like without MV?&lt;/p&gt;

&lt;p&gt;Why I ask? I am currently bootstrapping a new node with a load of approx 250GB. The bootstrap started about 12h ago and it still did not finish.&lt;br/&gt;
Netstat tells me that all streams have been transferred, but the node has a load of about 90 and all the CPU is eaten by a bunch of StreamReceiverTasks applying MV updates.&lt;/p&gt;

&lt;p&gt;Btw.: I applied the commit I&apos;ve posted some comments ago and there is no more WTE going on any more.&lt;/p&gt;

&lt;p&gt;I sometimes got the impression that really nobody out there seriously uses MVs.&lt;/p&gt;</comment>
                            <comment id="15703269" author="zilkanir" created="Mon, 28 Nov 2016 22:00:24 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;So currently i have no option to repair/maintain consisntency, on table with MV ?&lt;/p&gt;

&lt;p&gt;Just use the max read consisntency level on client side?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Nir.&lt;/p&gt;</comment>
                            <comment id="15703285" author="brstgt" created="Mon, 28 Nov 2016 22:05:41 +0000"  >&lt;p&gt;It isnt maybe that nice but will do as a workaround:&lt;/p&gt;

&lt;p&gt;Raise your write timeout.&lt;/p&gt;

&lt;p&gt;I Hope that there will someone reply soon. My Patch Works quite well for my&lt;br/&gt;
setup and I&apos;d love to share that.&lt;/p&gt;

</comment>
                            <comment id="15703321" author="zznate" created="Mon, 28 Nov 2016 22:20:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;Btw.: I applied the commit I&apos;ve posted some comments ago and there is no more WTE going on any more.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brstgt&quot; class=&quot;user-hover&quot; rel=&quot;brstgt&quot;&gt;brstgt&lt;/a&gt; Huge thanks for digging into this and keeping the issue updated. Just to be clear, you are running this patch in production currently? If so, what is the version of the cluster again and do you have any additional information about impact (if any)? &lt;/p&gt;</comment>
                            <comment id="15703341" author="brstgt" created="Mon, 28 Nov 2016 22:30:29 +0000"  >&lt;p&gt;Version: 3.10, trunk from 2016-11-08&lt;/p&gt;

&lt;p&gt;Yes, production but only on the node I am about to bootstrap - where this issue occured.&lt;br/&gt;
Side effects: None so far, but node is still bootstrapping. IMHO the changes are quite overseeable.&lt;/p&gt;

&lt;p&gt;But as stated, I now run into other problems:&lt;br/&gt;
1. Bootstrap is still f**** slow due to streaming write path (see comment above)&lt;br/&gt;
2. Hints throw tons of WTE when not paused during bootstrap (see comment above) - I guess the root cause for WTEs in hint delivery is (1.) but still worth thinking about&lt;/p&gt;</comment>
                            <comment id="15704474" author="brstgt" created="Tue, 29 Nov 2016 07:15:30 +0000"  >&lt;p&gt;Just to show that there is still a HUGE bottleneck. I started the bootstrap at about 8:30 (nearly 24h back from now)&lt;/p&gt;

&lt;p&gt;System load over time:&lt;br/&gt;
&lt;a href=&quot;https://cl.ly/1U1f1U0L1o3T&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cl.ly/1U1f1U0L1o3T&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CS load over time:&lt;br/&gt;
&lt;a href=&quot;https://cl.ly/1z2U2a3p1r1m&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cl.ly/1z2U2a3p1r1m&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The node is completely stuck in applying MV updates. Most of the time (when looking at thread traces in jconsole), the StreamReaders are busy reading from sstables.&lt;br/&gt;
I am eager to dig deeper on that but I&apos;d really appreciate some assistance from some guy(s) who is really firm with the MV stuff. It takes me hours and days to get all the information needed to understand the system and get to a conclusion, to test it and so on. It would be very helpful to have someone who could guide me a little bit through thy &quot;why&quot; and &quot;where&quot;.&lt;br/&gt;
E.g. I&apos;d like to try out some changes in MV based streaming but I have know if there are tests that already allow to prove my thesis or do I have to write some new tests.&lt;/p&gt;</comment>
                            <comment id="15704715" author="brstgt" created="Tue, 29 Nov 2016 08:53:35 +0000"  >&lt;p&gt;Problem 3.&lt;br/&gt;
All MV updates that happen during bootstrap are sent to batchlog (see StorageProxy.mutateMV). This puts so much pressure on the BatchlogManager and causes zillions of compactions of system.batches during bootstraps. The fact that the batchlog implementation is an antipattern (dont use CS as a queue) does not improve the situation. BL has to deal with more and more tombstones the larger the log gets. I observed batchlogs with 60GBs.&lt;/p&gt;

&lt;p&gt;Not sending tables with MVs through regular write path on bootstrap would solve problem (1.) and (3.). (2.) still persists but can easily handled by disabling timeout for mutations from hints.&lt;/p&gt;

&lt;p&gt;I would even go so far to say that sending streams through the regular write path for MVs is never a good idea. This would also alleviate other problems like incremental repairs for MVs (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12888&quot; title=&quot;Incremental repairs broken for MVs and CDC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12888&quot;&gt;CASSANDRA-12888&lt;/a&gt;). But that is maybe a different story - but IMHO still worth a discussion.&lt;/p&gt;</comment>
                            <comment id="15714642" author="brstgt" created="Fri, 2 Dec 2016 09:48:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/Jaumo/cassandra/tree/12905-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Jaumo/cassandra/tree/12905-3.0&lt;/a&gt; (see c4d1d841e60b8567415f31710ce069101d245cef)&lt;br/&gt;
+ &lt;br/&gt;
&lt;a href=&quot;https://github.com/Jaumo/cassandra/tree/12905-3.X&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Jaumo/cassandra/tree/12905-3.X&lt;/a&gt;&lt;br/&gt;
(see c4d1d841e60b8567415f31710ce069101d245cef) &lt;/p&gt;

&lt;p&gt;The following commit was intended for 12888 but depends on 12905 changes&lt;/p&gt;</comment>
                            <comment id="15714690" author="brstgt" created="Fri, 2 Dec 2016 10:10:48 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12888&quot; title=&quot;Incremental repairs broken for MVs and CDC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12888&quot;&gt;CASSANDRA-12888&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12888?focusedCommentId=15714685&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15714685&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-12888?focusedCommentId=15714685&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15714685&lt;/a&gt; for more explanations.&lt;/p&gt;</comment>
                            <comment id="15735349" author="pauloricardomg" created="Fri, 9 Dec 2016 13:44:17 +0000"  >&lt;p&gt;Thanks for your great investigative work and proposed patch. Please find a bellow a summary of the problems identified to make sure we&apos;re on the same page:&lt;br/&gt;
1 - Streaming of MVs may never complete due to lock contention throwing WTE during MV mutation  application (bug).&lt;br/&gt;
2 - MV hint delivery may throw WTE on MV lock contention, even if the node is not overloaded (bug)&lt;br/&gt;
3 - Streaming of MVs is slow due to MV mutation application (performance limitation)&lt;/p&gt;

&lt;p&gt;Your original patch fixes 1 and 2 by retrying to acquire MV lock on contention instead of throwing WTE for mutations originating from streaming or hints.&lt;/p&gt;

&lt;p&gt;While 3 is not actually a bug but a potential performance limitation, it seems from your results that the cost of performing bootstrap (and large stream sessions in general) of large base tables may become prohibitive due to a large amount of mutations going through the write path.&lt;/p&gt;

&lt;p&gt;While your proposed approach of performing sstable-based streaming for base and MVs may be valid in the consistent range movement case like bootstrap or decommission, it is not correct in all scenarios for repair or inconsistent range movements like replace and removenode, because it may generate permanent inconsistencies in the views which are only fixable by dropping and re-creating the view. We may address this by allowing operators to disable mutation-based streaming for MVs and streaming if they know what they are doing and can deal with the inconsistencies that may arise with their own ways (for instance, by ensuring writes are append-only or dealing with it in the application layer), but in the general case I&apos;m afraid we will have to live with this until we find a better way to deal with it globally, with things like &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9779&quot; title=&quot;Append-only optimization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9779&quot;&gt;CASSANDRA-9779&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9308&quot; title=&quot;Decouple streaming from secondary index rebuild&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9308&quot;&gt;CASSANDRA-9308&lt;/a&gt;, providing a custom tool to repair inconsistencies in views, or even redesigning MV consistency ensuring mechanisms.&lt;/p&gt;

&lt;p&gt;With this said, since this is blocking release I propose we fix 1 and 2 on this ticket with your original patch, and open a new ticket to discuss ways to mitigate and/or fix 3, without the pressure of having to block release on this and taking the risk of delivering a half-baked solution.&lt;/p&gt;

&lt;p&gt;Overall your original patch (without the sstable-based streaming fix) and approach looks good, I have the following comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;invert the variable from &lt;tt&gt;dontTimeOut&lt;/tt&gt; to &lt;tt&gt;droppable&lt;/tt&gt; to facilitate understanding, since this is the term used for requests that can throw &lt;tt&gt;WriteTimeoutException&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;I think we can make hint mutation requests &lt;tt&gt;deferrable&lt;/tt&gt; and &lt;tt&gt;non-droppable&lt;/tt&gt; to avoid blocking the thread on failure to acquire the lock - for this we need to do hint replying asynchronously on &lt;tt&gt;HintVerbHandler&lt;/tt&gt; (similar to what is done on &lt;tt&gt;MutationVerbHandler&lt;/tt&gt;). The right thing to do would be to make hints droppable similar to remote mutations, but this would require us to send the hint timestamp down to &lt;tt&gt;keyspace.mutateMV&lt;/tt&gt;, so if you find a non-disruptive way to do this than even better, otherwise we can leave it as &lt;tt&gt;deferrable&lt;/tt&gt; and &lt;tt&gt;non-droppable&lt;/tt&gt; for the time being.&lt;/li&gt;
	&lt;li&gt;Instead of making &lt;tt&gt;applyBlocking&lt;/tt&gt; throw &lt;tt&gt;ExecutionException&lt;/tt&gt;, I think we can handle this on &lt;tt&gt;applyBlocking&lt;/tt&gt; itself instead of handling on consumers with &lt;tt&gt;Throwables.propagate(e.getCause())&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Since those are mostly cosmetic changes I will kick-off an initial round of tests with your initial patch to make sure everything is working as expected:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-3.0...pauloricardomg:3.0-12905&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/paulomotta/job/pauloricardomg-3.0-12905-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/paulomotta/job/pauloricardomg-3.0-12905-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Please let me if you need help or will not have time to address those and I will take care of the changes myself if you agree with those. Thanks again!&lt;/p&gt;</comment>
                            <comment id="15735402" author="brstgt" created="Fri, 9 Dec 2016 14:02:21 +0000"  >&lt;p&gt;Hi Paulo,&lt;/p&gt;

&lt;p&gt;Indeed, my time is currently VERY limited, my wife came back home from hospital with our new born child. So currently I am not able to think about all that with the concentration it requires and deserves. So I suggest, you apply cosmetic changes on your own - after all you have much more experience with the code base, so I&apos;d leave these decisions up to you anyway. I personally would not know how to interpret the name &quot;droppable&quot; but if you say there is a pattern that is also used somewhere else, why not.&lt;br/&gt;
According to your feedback I absolutely support your decision to overwork and or overthink this issue and address it later for not to block the release.&lt;/p&gt;

&lt;p&gt;My plan was to get back to all that issues next week when (hopefully) my CPU is a little bit more idle again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Probably I will then ask for help / a second brain.&lt;/p&gt;

&lt;p&gt;Thanks so far!&lt;/p&gt;</comment>
                            <comment id="15746889" author="pauloricardomg" created="Wed, 14 Dec 2016 01:38:18 +0000"  >&lt;p&gt;Updated 3.0 and 3.X patches with following changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Rename/Invert &lt;tt&gt;dontTimeout&lt;/tt&gt; flag from &lt;tt&gt;keyspace.apply&lt;/tt&gt; to &lt;tt&gt;isDroppable&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Make hint delivery async (deferred) so it does not block on mutation stage on failure to acquire MV lock&lt;/li&gt;
	&lt;li&gt;Rename all &lt;tt&gt;Keyspace.apply&lt;/tt&gt; methods that return &lt;tt&gt;CompletableFuture&lt;/tt&gt; to &lt;tt&gt;applyFuture&lt;/tt&gt; so it is consistent with &lt;tt&gt;Mutation.applyFuture&lt;/tt&gt; and more clear to avoid people calling it and expect to be blocking, and also renamed previously &lt;tt&gt;Keyspace.applyBlocking&lt;/tt&gt; to &lt;tt&gt;Keyspace.apply&lt;/tt&gt; since this retains the original nomenclature before &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10779&quot; title=&quot;Mutations do not block for completion under view lock contention&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10779&quot;&gt;&lt;del&gt;CASSANDRA-10779&lt;/del&gt;&lt;/a&gt; when it does not return a &lt;tt&gt;CompletableFuture&lt;/tt&gt;, to avoid confusing users (given there is an &lt;tt&gt;applyFuture&lt;/tt&gt; method).&lt;/li&gt;
	&lt;li&gt;On 3.x patch, write mutations to commit log when cdc is enabled.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brstgt&quot; class=&quot;user-hover&quot; rel=&quot;brstgt&quot;&gt;brstgt&lt;/a&gt; can you please double check and validate these changes?&lt;/p&gt;

&lt;p&gt;Updated patch and resubmitted CI results below:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.X&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-3.0...pauloricardomg:3.0-12905&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-3.X...pauloricardomg:3.X-12905&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/paulomotta/job/pauloricardomg-3.0-12905-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/paulomotta/job/pauloricardomg-3.X-12905-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/paulomotta/job/pauloricardomg-3.0-12905-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/paulomotta/job/pauloricardomg-3.X-12905-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15747566" author="brstgt" created="Wed, 14 Dec 2016 07:37:02 +0000"  >&lt;p&gt;I like your naming changes, they make sense. But by making hint delivery async, you made it droppable again. I guess this is not intentional? You also do not reply on an exception. I am not familiar with request/response handling but I guess an exception (like WTE) will just drop the hint and let the hint-sender wait for a reply infinitely or until it times out?&lt;br/&gt;
The hint sender should be able to recover from an exception like re-transmitting the hints, right? I am not sure if this is the case here.&lt;/p&gt;</comment>
                            <comment id="15749378" author="pauloricardomg" created="Wed, 14 Dec 2016 20:26:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;But by making hint delivery async, you made it droppable again. I guess this is not intentional? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, should have made it a bit clearer since this was a change from the original idea. Basically, the hint sender will consider the request failed after &lt;tt&gt;write_request_timeout_in_ms&lt;/tt&gt; and retry, so it does not make sense for the receiver to retry applying hints for longer than that since this can cause the node to become overloaded.&lt;/p&gt;

&lt;p&gt;I believe that making hints deferrable will free up some resources and reduce contetion, what should reduce the number of WTEs. Furthermore things like &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10981&quot; title=&quot;Consider striping view locks by key and cfid&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10981&quot;&gt;&lt;del&gt;CASSANDRA-10981&lt;/del&gt;&lt;/a&gt; should also help in this case. The issue with MV hints timing out can be further improved by reducing the &lt;tt&gt;hinted_handoff_throttle_in_kb&lt;/tt&gt;. If this is not sufficient, we can make a new ticket to try to improve this or use a lower throttle for MV tables.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;You also do not reply on an exception. I am not familiar with request/response handling but I guess an exception (like WTE) will just drop the hint and let the hint-sender wait for a reply infinitely or until it times out?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I just kept the old behavior of responding only in case of success, in this case if there is a failure the sender will retry after timeout anyway.&lt;/p&gt;

&lt;p&gt;Test result look good so far.  I added a regression dtest to make sure we test against this in the future (&lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/1408&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pull request&lt;/a&gt;), and submitted a final CI round. If everything looks good I will squash and commit.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15750958" author="brstgt" created="Thu, 15 Dec 2016 09:59:33 +0000"  >&lt;p&gt;+1 for the dtest!&lt;/p&gt;

&lt;p&gt;Thanks for explaining that hint-thing.&lt;/p&gt;

&lt;p&gt;For my understanding of hint retransmission:&lt;br/&gt;
If we have a hint file that is being processed and a WTE occurs in the middle, will the whole file be retransmitted or can it be resumed at the last successful position? &lt;/p&gt;

&lt;p&gt;I guess this is not the case from my personal observations. I had situations with &amp;gt; 1GB hint queues per sender node which were not going to shrink due to WTEs. It seemed like the same hints have been retransmitted over and over again from scratch instead of trying to resume. What helped in this situation was to pause hint delivery on all nodes but 1-2. I&apos;m pretty sure the problem was WTEs due to lock contentions. To be honest, I did not try lowering hinted_handoff_throttle_in_kb or at least I don&apos;t remember.&lt;/p&gt;</comment>
                            <comment id="15752266" author="pauloricardomg" created="Thu, 15 Dec 2016 19:30:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;If we have a hint file that is being processed and a WTE occurs in the middle, will the whole file be retransmitted or can it be resumed at the last successful position?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It will resume at the latest successful page, not from the start of the hint file.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I guess this is not the case from my personal observations. I had situations with &amp;gt; 1GB hint queues per sender node which were not going to shrink due to WTEs. It seemed like the same hints have been retransmitted over and over again from scratch instead of trying to resume. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Perhaps the hard-coded hint page size of 512KB is too coarse grained for cluster with MVs, what causes too much data to be re-transmitted on retry generating even more contention. We should perhaps make this configurable.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What helped in this situation was to pause hint delivery on all nodes but 1-2. I&apos;m pretty sure the problem was WTEs due to lock contentions. To be honest, I did not try lowering hinted_handoff_throttle_in_kb or at least I don&apos;t remember.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, lowering &lt;tt&gt;hinted_handoff_throttle_in_kb&lt;/tt&gt; should help for clusters with MVs, and perhaps tunable hint page sizes too. You could maybe experiment with different values to see if you reach a more stable state.&lt;/p&gt;

&lt;p&gt;I committed the current work to 3.0 and up as 3faa0d925791be085b92949a0a0ec20f7e6ae368 and 48abc0369799acca0521150e2c88d4032e01c3b5 so we can unblock 3.10 release. Feel free to open follow-up tickets to further improve MV hints and streaming with the points we discussed here.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15764330" author="pauloricardomg" created="Tue, 20 Dec 2016 14:29:31 +0000"  >&lt;p&gt;This patch removed the public method &lt;tt&gt;Keyspace.apply(mutation, writeCommitlog, updateIndexes, isClReplay, isDeferrable)&lt;/tt&gt; which may be used externally, so I re-added this method on 3.0 with the deprecated flag in addition to the equivalent &lt;tt&gt;applyFuture(Mutation mutation, boolean writeCommitLog, boolean updateIndexes, boolean isDroppable, boolean isDeferrable&lt;/tt&gt; using the new nomenclature which should be used instead. On 3.10+ I kept only the new version of the method. I committed these changes as &lt;tt&gt;13e939624d21eaf6e16d60b28636125e817ab286&lt;/tt&gt; and merged up.&lt;/p&gt;</comment>
                            <comment id="15796949" author="pauloricardomg" created="Wed, 4 Jan 2017 02:37:36 +0000"  >&lt;p&gt;Both the reinstated compatibility method from the previous commit (&lt;tt&gt;Keyspace.apply(mutation, writeCommitlog, updateIndexes, isClReplay, isDeferrable, future)&lt;/tt&gt;) as well as the new &lt;tt&gt;Keyspace.applyFuture&lt;/tt&gt; did not return a &lt;tt&gt;CompletableFuture&lt;/tt&gt; unless the &lt;tt&gt;isDeferrable&lt;/tt&gt; flag was set, but the previous behavior was to return a &lt;tt&gt;CompletableFuture&lt;/tt&gt; regardless of &lt;tt&gt;isDeferrable&lt;/tt&gt; value, so to retain the previous semantics I amended this patch with commit &lt;tt&gt;37e124e81da28b6459c6e150fcd831a6cdab0537&lt;/tt&gt; to always return a &lt;tt&gt;CompletableFuture&lt;/tt&gt; on the above mentioned methods (CI looked good and Tyler reviewed trivial patch, thanks!)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13019557">CASSANDRA-12888</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13006891">CASSANDRA-12689</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12916618">CASSANDRA-10779</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13048374">CASSANDRA-13299</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13029159">CASSANDRA-13056</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brstgt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3696f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>pauloricardomg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[pauloricardomg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>