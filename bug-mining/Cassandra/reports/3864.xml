<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:58:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10231] Null status entries on nodes that crash during decommission of a different node</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10231</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This issue is reproducible through a Jepsen test of materialized views that crashes and decommissions nodes throughout the test.&lt;/p&gt;

&lt;p&gt;In a 5 node cluster, if a node crashes at a certain point (unknown) during the decommission of a different node, it may start with a null entry for the decommissioned node like so:&lt;br/&gt;
DN 10.0.0.5 ? 256 ? null rack1&lt;/p&gt;

&lt;p&gt;This entry does not get updated/cleared by gossip. This entry is removed upon a restart of the affected node.&lt;/p&gt;

&lt;p&gt;This issue is further detailed in ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10068&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;10068&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12860713">CASSANDRA-10231</key>
            <summary>Null status entries on nodes that crash during decommission of a different node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jkni">Joel Knighton</assignee>
                                    <reporter username="jkni">Joel Knighton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Aug 2015 15:28:02 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:58 +0000</updated>
                            <resolved>Mon, 12 Oct 2015 06:29:45 +0000</resolved>
                                        <fixVersion>3.0.0 rc2</fixVersion>
                                    <component>Feature/Materialized Views</component>
                    <component>Legacy/Distributed Metadata</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14734586" author="stefania" created="Tue, 8 Sep 2015 10:32:48 +0000"  >&lt;p&gt;This is not going to be easy to reproduce with a dtest, not without injecting some failure into the code. So far I was able to see this interesting transition by issuing repeated nodetool status commands during a decommission - but I was very lucky as I only saw it once out of several times:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Datacenter: datacenter1
=======================
Status=Up/Down
|/ State=Normal/Leaving/Joining/Moving  
--  Address    Load       Tokens       Owns    Host ID                               Rack
UL  127.0.0.1  57.39 KB   256          ?       1b91a92c-58b7-470f-82eb-f1e05fc50636  rack1
UN  127.0.0.2  90.56 KB   256          ?       4287fd68-e53d-4b9e-a48b-af374f9e69b3  rack1
UN  127.0.0.3  52.56 KB   256          ?       35a94edb-b38a-4bf3-8318-e14bb8a59eef  rack1

Note: Non-system keyspaces don&apos;t have the same replication settings, effective ownership information is meaningless

Datacenter: datacenter1
=======================
Status=Up/Down
|/ State=Normal/Leaving/Joining/Moving  
--  Address    Load       Tokens       Owns    Host ID                               Rack
UL  127.0.0.1  57.39 KB   256          ?       &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;                                  rack1
UN  127.0.0.2  90.56 KB   256          ?       4287fd68-e53d-4b9e-a48b-af374f9e69b3  rack1
UN  127.0.0.3  52.56 KB   256          ?       35a94edb-b38a-4bf3-8318-e14bb8a59eef  rack1

Note: Non-system keyspaces don&apos;t have the same replication settings, effective ownership information is meaningless

Datacenter: datacenter1
=======================
Status=Up/Down
|/ State=Normal/Leaving/Joining/Moving  
--  Address    Load       Tokens       Owns    Host ID                               Rack
UN  127.0.0.2  90.56 KB   256          ?       4287fd68-e53d-4b9e-a48b-af374f9e69b3  rack1
UN  127.0.0.3  52.56 KB   256          ?       35a94edb-b38a-4bf3-8318-e14bb8a59eef  rack1

Note: Non-system keyspaces don&apos;t have the same replication settings, effective ownership information is meaningless
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because of this observed transition, we know that at some point during the decomission the host id must be null. That means it must be updated as null in &lt;tt&gt;system.peers&lt;/tt&gt;. My assumption was that if the node crashes when the host id is null in &lt;tt&gt;system.peers&lt;/tt&gt; but before the entry is removed entirely, this behavior might be observed. So I patched the C* code not to save host id in system peers, and when I did I got this, which is close but not identical:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Final status from node 2
Datacenter: datacenter1
=======================
Status=Up/Down
|/ State=Normal/Leaving/Joining/Moving  
--  Address    Load       Tokens       Owns    Host ID                               Rack
UL  127.0.0.1  63.71 KB   256          ?       &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;                                  rack1
UN  127.0.0.2  102.39 KB  256          ?       c897de6b-9ec8-4fe2-9835-60bf812c0b22  rack1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I also saw this exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [GossipStage:1] 2015-09-08 18:10:22,590 CassandraDaemon.java:191 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[GossipStage:1,5,main]
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:936) ~[na:1.8.0_60]
        at org.apache.cassandra.hints.HintsCatalog.get(HintsCatalog.java:85) ~[main/:na]
        at org.apache.cassandra.hints.HintsService.excise(HintsService.java:267) ~[main/:na]
        at org.apache.cassandra.service.StorageService.excise(StorageService.java:2129) ~[main/:na]
        at org.apache.cassandra.service.StorageService.excise(StorageService.java:2141) ~[main/:na]
        at org.apache.cassandra.service.StorageService.handleStateLeft(StorageService.java:2046) ~[main/:na]
        at org.apache.cassandra.service.StorageService.onChange(StorageService.java:1660) ~[main/:na]
        at org.apache.cassandra.gms.Gossiper.doOnChangeNotifications(Gossiper.java:1191) ~[main/:na]
        at org.apache.cassandra.gms.Gossiper.applyNewStates(Gossiper.java:1173) ~[main/:na]
        at org.apache.cassandra.gms.Gossiper.applyStateLocally(Gossiper.java:1130) ~[main/:na]
        at org.apache.cassandra.gms.GossipDigestAck2VerbHandler.doVerb(GossipDigestAck2VerbHandler.java:49) ~[main/:na]
        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:66) ~[main/:na]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_60]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_60]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745) ~[na:1.8.0_60]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is the &lt;a href=&quot;https://github.com/stef1927/cassandra-dtest/commits/10231&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;wip dtest&lt;/a&gt; but it only works by changing the C* source code as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;stefi@lila:~/git/cstar/cassandra$ git diff
diff --git a/src/java/org/apache/cassandra/service/StorageService.java b/src/java/org/apache/cassandra/service/StorageService.java
index 2d9bbec..b84bcf5 100644
--- a/src/java/org/apache/cassandra/service/StorageService.java
+++ b/src/java/org/apache/cassandra/service/StorageService.java
@@ -1701,7 +1701,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;StorageService &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; NotificationBroadcasterSupport &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; IE
                         MigrationManager.instance.scheduleSchemaPull(endpoint, epState);
                         &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
                     &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; HOST_ID:
-                        SystemKeyspace.updatePeerInfo(endpoint, &lt;span class=&quot;code-quote&quot;&gt;&quot;host_id&quot;&lt;/span&gt;, UUID.fromString(value.value));
+                        &lt;span class=&quot;code-comment&quot;&gt;//SystemKeyspace.updatePeerInfo(endpoint, &lt;span class=&quot;code-quote&quot;&gt;&quot;host_id&quot;&lt;/span&gt;, UUID.fromString(value.value));
&lt;/span&gt;                         &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
                     &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; RPC_READY:
                         notifyRpcChange(endpoint, epState.isRpcReady());
@@ -1741,7 +1741,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;StorageService &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; NotificationBroadcasterSupport &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; IE
                     SystemKeyspace.updatePeerInfo(endpoint, &lt;span class=&quot;code-quote&quot;&gt;&quot;schema_version&quot;&lt;/span&gt;, UUID.fromString(entry.getValue().value));
                     &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
                 &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; HOST_ID:
-                    SystemKeyspace.updatePeerInfo(endpoint, &lt;span class=&quot;code-quote&quot;&gt;&quot;host_id&quot;&lt;/span&gt;, UUID.fromString(entry.getValue().value));
+                    &lt;span class=&quot;code-comment&quot;&gt;//SystemKeyspace.updatePeerInfo(endpoint, &lt;span class=&quot;code-quote&quot;&gt;&quot;host_id&quot;&lt;/span&gt;, UUID.fromString(entry.getValue().value));
&lt;/span&gt;                     &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
             }
         }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This code in &lt;tt&gt;SS.initServer()&lt;/tt&gt; is suspect:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.parseBoolean(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;cassandra.load_ring_state&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;)))
        {
            logger.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Loading persisted ring state&quot;&lt;/span&gt;);
            Multimap&amp;lt;InetAddress, Token&amp;gt; loadedTokens = SystemKeyspace.loadTokens();
            Map&amp;lt;InetAddress, UUID&amp;gt; loadedHostIds = SystemKeyspace.loadHostIds();
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (InetAddress ep : loadedTokens.keySet())
            {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ep.equals(FBUtilities.getBroadcastAddress()))
                {
                    &lt;span class=&quot;code-comment&quot;&gt;// entry has been mistakenly added, delete it
&lt;/span&gt;                    SystemKeyspace.removeEndpoint(ep);
                }
                &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (loadedHostIds.containsKey(ep))
                        tokenMetadata.updateHostId(loadedHostIds.get(ep), ep);
                    Gossiper.instance.addSavedEndpoint(ep);
                }
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The EP is added even when there is no host id so this might explain the problem but I still need to investigate further.&lt;/p&gt;</comment>
                            <comment id="14743361" author="stefania" created="Mon, 14 Sep 2015 10:50:56 +0000"  >&lt;p&gt;I finally found a &lt;a href=&quot;https://github.com/stef1927/cassandra-dtest/commits/10231&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; that can reproduce this pretty reliably. The trick was to crash and restart a node several times until the DN entry with null host id appears, at which point if we no longer restart the node the entry gets stuck.&lt;/p&gt;</comment>
                            <comment id="14877334" author="stefania" created="Sat, 19 Sep 2015 22:15:43 +0000"  >&lt;p&gt;I&apos;ve attached &lt;a href=&quot;https://github.com/stef1927/cassandra/commits/10231-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a patch&lt;/a&gt; for 3.0 that fixes the dtest, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt; would you mind trying the patch with your Jepsen test? It will also log a message for all GOSSIP entries so the log files may get a bit bigger but we will have helpful information should the patch not work.&lt;/p&gt;

&lt;p&gt;The patch basically fixes this exception, which causes any other GOSSIP properties applied by &lt;tt&gt;onChange&lt;/tt&gt; and following STATUS to be skipped:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [GossipStage:2] 2015-09-19 14:14:31,007 CassandraDaemon.java:195 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[GossipStage:2,5,main]
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:936) ~[na:1.8.0_60]
        at org.apache.cassandra.hints.HintsCatalog.get(HintsCatalog.java:85) ~[main/:na]
        at org.apache.cassandra.hints.HintsService.excise(HintsService.java:263) ~[main/:na]
        at org.apache.cassandra.service.StorageService.excise(StorageService.java:2166) ~[main/:na]
        at org.apache.cassandra.service.StorageService.excise(StorageService.java:2178) ~[main/:na]
        at org.apache.cassandra.service.StorageService.handleStateLeft(StorageService.java:2083) ~[main/:na]
        at org.apache.cassandra.service.StorageService.onChange(StorageService.java:1672) ~[main/:na]
        at org.apache.cassandra.gms.Gossiper.doOnChangeNotifications(Gossiper.java:1220) ~[main/:na]
        at org.apache.cassandra.gms.Gossiper.applyNewStates(Gossiper.java:1202) ~[main/:na]
        at org.apache.cassandra.gms.Gossiper.applyStateLocally(Gossiper.java:1159) ~[main/:na]
        at org.apache.cassandra.gms.GossipDigestAck2VerbHandler.doVerb(GossipDigestAck2VerbHandler.java:49) ~[main/:na]
        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:66) ~[main/:na]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_60]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_60]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745) ~[na:1.8.0_60]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;According to the additional GOSSIP trace message that I&apos;ve added, host id was one such property.&lt;/p&gt;</comment>
                            <comment id="14933782" author="jkni" created="Mon, 28 Sep 2015 18:52:23 +0000"  >&lt;p&gt;I&apos;m continuing to follow-up, but it doesn&apos;t look like this patch fixes the issue.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to reproduce this with a dtest again.&lt;/p&gt;</comment>
                            <comment id="14934321" author="stefania" created="Mon, 28 Sep 2015 23:20:35 +0000"  >&lt;p&gt;If you&apos;ve reproduced it with your Jepsen test could you attach the logs please?&lt;/p&gt;</comment>
                            <comment id="14934358" author="stefania" created="Mon, 28 Sep 2015 23:46:58 +0000"  >&lt;p&gt;Also, a similar exception affects 2.1+ as well, albeit the patch would be slightly different, see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10298&quot; title=&quot;Replaced dead node stayed in gossip forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10298&quot;&gt;&lt;del&gt;CASSANDRA-10298&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14934733" author="jkni" created="Tue, 29 Sep 2015 06:44:14 +0000"  >&lt;p&gt;I&apos;ve attached the logs for n1, n2, n3, n4, and n5. n1 is at 10.0.0.2, n2 is at 10.0.0.3, and so on.&lt;/p&gt;

&lt;p&gt;The decommission node is n2. The node with the null status entry is n5. This status entry looks like &lt;/p&gt;

&lt;p&gt;Datacenter: datacenter1&lt;br/&gt;
=======================&lt;br/&gt;
Status=Up/Down&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;/ State=Normal/Leaving/Joining/Moving&lt;br/&gt;
&amp;#8211;  Address   Load       Tokens       Owns    Host ID                               Rack&lt;br/&gt;
UN  10.0.0.2  480.16 KB  256          ?       7a7681f5-0a22-4ba2-89c4-17c84658a18f  rack1&lt;br/&gt;
?N  10.0.0.3  ?          256          ?       null                                  rack1&lt;br/&gt;
UN  10.0.0.4  495.24 KB  256          ?       ef529827-e178-49f8-ad3a-458198df5060  rack1&lt;br/&gt;
UN  10.0.0.5  374.78 KB  256          ?       ee63423d-1204-496e-b53d-d318472717ab  rack1&lt;br/&gt;
UN  10.0.0.6  456.69 KB  256          ?       d88d166b-ed03-4b48-a12e-ea849f680920  rack1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;As I mentioned last week, I&apos;m tracking down an MV issue that causes a failure in the tests before they would reach this point on 3.0. In order to accommodate this, I applied your patch to commit e5c14285404b1ba98d385c5e5ed069229a2f6004, which is the commit in which I originally produced the issue.&lt;/p&gt;

&lt;p&gt;Sorry for the delay.&lt;/p&gt;</comment>
                            <comment id="14934741" author="jkni" created="Tue, 29 Sep 2015 06:57:12 +0000"  >&lt;p&gt;Looking at your dtest again, I&apos;ve just noticed it looks for a node with a &quot;DN&quot; null entry. It&apos;s worth noting that this code path seems to be hitting a &quot;?N&quot; null entry, which may be a different issue.&lt;/p&gt;</comment>
                            <comment id="14934749" author="stefania" created="Tue, 29 Sep 2015 07:02:00 +0000"  >&lt;p&gt;Yes it&apos;s a different entry, in the ticket description we had &quot;DN&quot;, now it&apos;s &quot;?N&quot;. Let met take a look at the logs and see if there is anything obvious.&lt;/p&gt;</comment>
                            <comment id="14934942" author="stefania" created="Tue, 29 Sep 2015 09:59:58 +0000"  >&lt;p&gt;I noticed two major differences between the dtest logs and the logs attached:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;after n5 restarts it logs no GOSSIP information in &lt;tt&gt;applyStateLocally&lt;/tt&gt;, hence the GOSSIP information for the decommissioned node is totally missing.&lt;/li&gt;
	&lt;li&gt;the tokens for the decommissioned node are still there even though they were deleted before crashing. This could be explained by the crash if the commit log is not replayed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Ultimately it shouldn&apos;t matter if the tokens are still there after restarting, if we received a GOSSIP message with status LEFT we should have been able to clear them. We would need a full TRACE log to be able to work out why the GOSSIP entries are missing: either other nodes are not gossiping about the decommissioned node (unlikely since the expiry time is 3 days) or for some reason node 5 ignores the GOSSIP entry for the decommissioned node.&lt;/p&gt;

&lt;p&gt;I tried running my dtest on the same commit but I could not reproduce this. However there is one big difference, in that the dtest does not involve any hinting or streaming of data. So I probably need to install Jepsen.&lt;/p&gt;

&lt;p&gt;I would suggest fixing the MV issue that is preventing us from running on the latest 3.0, or at a minimum running on a commit where hinting works fine and the batch log can be replayed. Also, we will probably need to run with DEBUG=true, if not TRACE=true.&lt;/p&gt;

&lt;p&gt;Is there anything I can do to help track down the MV issue?&lt;/p&gt;</comment>
                            <comment id="14936038" author="jkni" created="Tue, 29 Sep 2015 22:36:06 +0000"  >&lt;p&gt;The latest MV issue is at &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10413&quot; title=&quot;Replaying materialized view updates from commitlog after node decommission crashes Cassandra&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10413&quot;&gt;&lt;del&gt;CASSANDRA-10413&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;I have a patch I&apos;m building now that should solve it; at the very least, I can have a workaround that lets us skip the bad parts and get gossip logging. I&apos;ll upload TRACE level stuff after I get to that later tonight.&lt;/p&gt;</comment>
                            <comment id="14936383" author="jkni" created="Wed, 30 Sep 2015 05:19:57 +0000"  >&lt;p&gt;I&apos;ll spend more time on this tomorrow (in CDT), but I have a branch that applies your 10231 patch on top of my 10413 patch (available at &lt;a href=&quot;https://github.com/jkni/cassandra/tree/10231-on-10413&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10231-on-10413&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;My 10413 branch is based on latest 3.0 With a build from the 10231-on-10413 branch, I&apos;m no longer able to reproduce the issue.&lt;/p&gt;

&lt;p&gt;Again, I&apos;ll try repro-ing more tomorrow, but I haven&apos;t been able to produce any null status entries, which were fairly common before the patch.&lt;/p&gt;</comment>
                            <comment id="14936410" author="stefania" created="Wed, 30 Sep 2015 06:07:19 +0000"  >&lt;p&gt;Thank you for the update, let&apos;s keep our fingers crossed, and thank you for all your hard work!&lt;/p&gt;</comment>
                            <comment id="14939224" author="stefania" created="Thu, 1 Oct 2015 03:31:49 +0000"  >&lt;p&gt;I&apos;ve removed the additional GOSSIP entry log message from the proper branch but I&apos;ve left the old branch with such entry in the &lt;a href=&quot;https://github.com/stef1927/cassandra/commits/10231-3.0-debug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10231-3.0-debug&lt;/a&gt; branch. &lt;/p&gt;

&lt;p&gt;I&apos;ve tried reproducing the issue for 2.1 or 2.2 but couldn&apos;t, it seems &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10298&quot; title=&quot;Replaced dead node stayed in gossip forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10298&quot;&gt;&lt;del&gt;CASSANDRA-10298&lt;/del&gt;&lt;/a&gt; is a slightly different issue after all (GOSSIP major update with status LEFT but missing tokens and host id). Are you able to confirm with Jepsen if 2.1 and 2.2 are affected or not?&lt;/p&gt;

&lt;p&gt;I should also add the CI links for 3.0:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-10231-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-10231-3.0-testall/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-10231-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-10231-3.0-dtest/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14939281" author="jkni" created="Thu, 1 Oct 2015 03:53:45 +0000"  >&lt;p&gt;I can try to reproduce on 2.1 or 2.2 with Jepsen, but there would be a delay to write the test. The current test that (used to) reproduce uses materialized views, so it is 3.0 and up only.&lt;/p&gt;</comment>
                            <comment id="14939288" author="stefania" created="Thu, 1 Oct 2015 03:59:55 +0000"  >&lt;p&gt;Of course, I totally forgot this was originally a MV test. It&apos;s not worth it, I can run the dtest a few more times, plus I will also try and write a new dtest for 10298.&lt;/p&gt;

&lt;p&gt;Let&apos;s keep the focus on 3.0 for this ticket.&lt;/p&gt;</comment>
                            <comment id="14940258" author="jkni" created="Thu, 1 Oct 2015 19:11:39 +0000"  >&lt;p&gt;I&apos;ve had quite a few more test runs without repro-ing; from my perspective, this looks fixed.&lt;/p&gt;</comment>
                            <comment id="14940625" author="stefania" created="Fri, 2 Oct 2015 00:15:46 +0000"  >&lt;p&gt;Thank you for confirming this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt;, moving to patch available.&lt;/p&gt;</comment>
                            <comment id="14949611" author="jkni" created="Thu, 8 Oct 2015 23:40:49 +0000"  >&lt;p&gt;Just to clarify since scope changed: some of the symptoms of the initial Jepsen tests may have been addressed by related gossip tickets, but failures are no longer reproducible.&lt;/p&gt;

&lt;p&gt;The 3.0 patch, which does not try to remove hints if the &lt;tt&gt;hostId&lt;/tt&gt; of the &lt;tt&gt;LEFT&lt;/tt&gt; endpoint is null, looks good for me on code quality.&lt;/p&gt;

&lt;p&gt;I&apos;m generally +1 on the dtest. I&apos;ve pushed a version with some nitpicking (spelling, unused code removed) &lt;a href=&quot;https://github.com/jkni/cassandra-dtest/tree/10231-nits&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. I&apos;m definitely in favor of such a &lt;/p&gt;

&lt;p&gt;That said, I&apos;d like to propose an idea for the root cause which should be fixed. With this root cause fixed, the 3.0 patch should no longer be necessary.&lt;/p&gt;

&lt;p&gt;I believe this issue was introduced in 3.0, which would explain why you could not reproduce on 2.1 or 2.2.&lt;/p&gt;

&lt;p&gt;To accomodate &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6696&quot; title=&quot;Partition sstables by token range&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6696&quot;&gt;&lt;del&gt;CASSANDRA-6696&lt;/del&gt;&lt;/a&gt;, in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9317&quot; title=&quot;Populate TokenMetadata earlier during startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9317&quot;&gt;&lt;del&gt;CASSANDRA-9317&lt;/del&gt;&lt;/a&gt;, we started populating TokenMetadata before commitlog replay. If we revert &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9317&quot; title=&quot;Populate TokenMetadata earlier during startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9317&quot;&gt;&lt;del&gt;CASSANDRA-9317&lt;/del&gt;&lt;/a&gt;, the dtest no longer reproduces the issue.&lt;/p&gt;

&lt;p&gt;If the changes to the &lt;tt&gt;PEERS&lt;/tt&gt; table in the SystemKeyspace upon removing an endpoint are not flushed to disk and are instead in the commitlog, when we populate TokenMetadata, we will populate these tokens for the decommissioned node. This can be seen in the logs of node2 in the dtest.&lt;/p&gt;

&lt;p&gt;Since the node has left, it is quarantined, so gossip updates will not be applied, so these tokens will not be removed from TokenMetadata. This is the cause of the stale status entries.&lt;/p&gt;

&lt;p&gt;To ensure these changes are flushed to disk when a node is &lt;tt&gt;LEFT&lt;/tt&gt;, we can &lt;tt&gt;forceBlockingFlush&lt;/tt&gt; of &lt;tt&gt;PEERS&lt;/tt&gt; in &lt;tt&gt;SystemKeyspace.removeEndpoint&lt;/tt&gt;. With this change, the dtest passes. I&apos;ve pushed a branch with this fix &lt;a href=&quot;https://github.com/jkni/cassandra/tree/10231-alternate&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thoughts &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Stefania&quot; class=&quot;user-hover&quot; rel=&quot;stefania&quot;&gt;Stefania&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14949812" author="stefania" created="Fri, 9 Oct 2015 03:02:41 +0000"  >&lt;p&gt;I&apos;ve should have read this before commenting on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10089&quot; title=&quot;NullPointerException in Gossip handleStateNormal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10089&quot;&gt;&lt;del&gt;CASSANDRA-10089&lt;/del&gt;&lt;/a&gt;, I left a note there to move the discussion here.&lt;/p&gt;

&lt;p&gt;I think you&apos;re correct: we&apos;ll end up with stale entries if we populate the token metadata before recovering the commit log and some entries were previously deleted but not yet flushed. So if we must populate the token metadata before commit log replay (cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; regarding &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6696&quot; title=&quot;Partition sstables by token range&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6696&quot;&gt;&lt;del&gt;CASSANDRA-6696&lt;/del&gt;&lt;/a&gt;), then we have no other choice but to force a blocking flush when we delete entries in system &lt;tt&gt;PEERS&lt;/tt&gt;. At this point I would suggest to be consistent and force a blocking flush in &lt;tt&gt;updateTokens&lt;/tt&gt; as well. Note that this is already done in &lt;tt&gt;updatePreferredIP&lt;/tt&gt; so we are not introducing something totally new. &lt;/p&gt;

&lt;p&gt;In an ideal word, I&apos;d say we should not rely on the content of any tables (system or not) before recovering the commit log but if this is not possible I guess we have to be pragmatic.&lt;/p&gt;

&lt;p&gt;Really well done on deducing this by the way!&lt;/p&gt;</comment>
                            <comment id="14949816" author="jkni" created="Fri, 9 Oct 2015 03:07:56 +0000"  >&lt;p&gt;I agree on having a consistent behavior between &lt;tt&gt;updateTokens&lt;/tt&gt;, &lt;tt&gt;updatePreferredIP&lt;/tt&gt;, and &lt;tt&gt;removeEndpoint&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;m working on concretely documenting the current behavior with log entries as I want to fully ensure I understand the sequence of actions causing the problem. I&apos;ll update the ticket when I have this complete.&lt;/p&gt;</comment>
                            <comment id="14949870" author="stefania" created="Fri, 9 Oct 2015 04:15:55 +0000"  >&lt;p&gt;It seems our roles have swapped so I am withdrawing my patch and updating assignee and reviewer.&lt;/p&gt;</comment>
                            <comment id="14950016" author="krummas" created="Fri, 9 Oct 2015 07:20:21 +0000"  >&lt;p&gt;If the easiest way forward is to revert &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9317&quot; title=&quot;Populate TokenMetadata earlier during startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9317&quot;&gt;&lt;del&gt;CASSANDRA-9317&lt;/del&gt;&lt;/a&gt;, it is ok with me - I can probably persist the disk boundary tokens in a system table to avoid the issue&lt;/p&gt;</comment>
                            <comment id="14950028" author="jkni" created="Fri, 9 Oct 2015 07:33:52 +0000"  >&lt;p&gt;Role swap works for me.&lt;/p&gt;

&lt;p&gt;I don&apos;t think reverting &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9317&quot; title=&quot;Populate TokenMetadata earlier during startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9317&quot;&gt;&lt;del&gt;CASSANDRA-9317&lt;/del&gt;&lt;/a&gt; is necessary.&lt;/p&gt;</comment>
                            <comment id="14950035" author="stefania" created="Fri, 9 Oct 2015 07:46:21 +0000"  >&lt;p&gt;I agree, if we need to store boundary tokens in a system table, it might as well be &lt;tt&gt;PEERS&lt;/tt&gt;. Let&apos;s go for the force blocking flush approach?&lt;/p&gt;</comment>
                            <comment id="14951117" author="jkni" created="Fri, 9 Oct 2015 20:11:41 +0000"  >&lt;p&gt;I think the force blocking flush approach behavior is the least invasive and most likely to ensure correctness.&lt;/p&gt;

&lt;p&gt;With log entries, I&apos;ve confirmed that my suspected behavior occurs.  Before commitlog replay, we &lt;tt&gt;populateTokenMetadata&lt;/tt&gt; for node1, node2, and node3.  After commitlog replay, when we &lt;tt&gt;populateTokenMetadata&lt;/tt&gt;, we only consider node2 and node3.  node1 stays present in the &lt;tt&gt;tokenMetadata&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I pushed a branch &lt;a href=&quot;https://github.com/jkni/cassandra/commits/10231-alternate&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10231-alternate&lt;/a&gt; with a &lt;tt&gt;forceBlockingFlush&lt;/tt&gt; only in &lt;tt&gt;removeEndpoint&lt;/tt&gt;. I&apos;ll create a follow-up ticket to further discuss the use of &lt;tt&gt;forceBlockingFlush&lt;/tt&gt; for other &lt;tt&gt;PEERS&lt;/tt&gt;-related methods in SystemKeyspace.&lt;/p&gt;

&lt;p&gt;With this change, the attached dtest passes.&lt;/p&gt;

&lt;p&gt;In CI, there are no unit test failures out of the ordinary.&lt;/p&gt;

&lt;p&gt;In CI, there is only one dtest failure outside of historically flappy tests/tests with known problems.&lt;br/&gt;
This failure is in &lt;tt&gt;commitlog_test.TestCommitLog.stop_failure_policy_test&lt;/tt&gt; and is reproducible locally. In the original patch, upon commitlog failure, when gossip was shutdown, we would notify &lt;tt&gt;onChange&lt;/tt&gt; which in &lt;tt&gt;handleStateNormal&lt;/tt&gt; would &lt;tt&gt;updateTokens&lt;/tt&gt; for the local node, which would call &lt;tt&gt;removeEndpoint&lt;/tt&gt;, causing the thread to hang in &lt;tt&gt;forceBlockingFlush&lt;/tt&gt; (due to the aforementioned commitlog failure).&lt;/p&gt;

&lt;p&gt;Looking at git history, it seems this &lt;tt&gt;removeEndpoint&lt;/tt&gt; is precautionary and there is currently no gossip transition that results in the local node being present in &lt;tt&gt;PEERS&lt;/tt&gt;. As a result, I&apos;ve removed this call from &lt;tt&gt;updateTokens&lt;/tt&gt;, so the above commitlog test passes. This commit has been pushed to the branch &lt;a href=&quot;https://github.com/jkni/cassandra/commits/10231-alternate&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10231-alternate&lt;/a&gt;.  The attached dtest still passes, as expected.&lt;/p&gt;

&lt;p&gt;I&apos;m waiting for CI to finish for this change; in the meantime, any feedback or review would be great.&lt;/p&gt;</comment>
                            <comment id="14952551" author="stefania" created="Mon, 12 Oct 2015 02:35:37 +0000"  >&lt;p&gt;I agree with your analysis, only 3 methods insert into &lt;tt&gt;PEERS&lt;/tt&gt;, of these &lt;tt&gt;updatePeerInfo&lt;/tt&gt; and &lt;tt&gt;updateTokens&lt;/tt&gt; do not insert anything if the endpoint is the local broadcast address whilst the remaining method, &lt;tt&gt;updatePreferredIP&lt;/tt&gt;, is only called from &lt;tt&gt;OutboundTcpConnectionPool&lt;/tt&gt; for remote endpoints. None of the getters expect to find the local ep in &lt;tt&gt;PEERS&lt;/tt&gt;, the code in &lt;tt&gt;SS.initServer()&lt;/tt&gt; seems to confirm this further with the comment at line 614 and by removing the local ep should it be found (IMO this should have been an assertion but let&apos;s leave it).&lt;/p&gt;

&lt;p&gt;I&apos;ve also checked the latest round of CI and it seems inline with the unpatched branch. &lt;/p&gt;

&lt;p&gt;The patch is therefore +1.&lt;/p&gt;

&lt;p&gt;Only one tiny nit: I think people &lt;em&gt;generally&lt;/em&gt; prefer to drop the parenthesis for &lt;tt&gt;if&lt;/tt&gt; one liners but it&apos;s not really in the coding standards so it&apos;s your choice.&lt;/p&gt;

&lt;p&gt;If you are also happy, you can flag this ticket as &quot;READY TO COMMIT&quot; and find a committer on IRC.&lt;/p&gt;</comment>
                            <comment id="14952575" author="jkni" created="Mon, 12 Oct 2015 03:30:26 +0000"  >&lt;p&gt;Thanks, Stefania.&lt;/p&gt;

&lt;p&gt;I&apos;ve pushed a branch with your one nit fixed; I missed that.&lt;/p&gt;

&lt;p&gt;Patch available as the latest commit on branch &lt;a href=&quot;https://github.com/jkni/cassandra/commits/10231-3.0-notest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10231-3.0-notest&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14952587" author="stefania" created="Mon, 12 Oct 2015 03:46:34 +0000"  >&lt;p&gt;I think we can commit this.&lt;/p&gt;</comment>
                            <comment id="14955380" author="jkni" created="Tue, 13 Oct 2015 18:07:28 +0000"  >&lt;p&gt;Test coverage based on the dtest linked above was merged as PR 601 on the cassandra-dtest repo &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12914567">CASSANDRA-10737</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12764191" name="n1.log" size="600133" author="jkni" created="Tue, 29 Sep 2015 06:44:38 +0000"/>
                            <attachment id="12764192" name="n2.log" size="196204" author="jkni" created="Tue, 29 Sep 2015 06:44:38 +0000"/>
                            <attachment id="12764193" name="n3.log" size="632856" author="jkni" created="Tue, 29 Sep 2015 06:44:38 +0000"/>
                            <attachment id="12764194" name="n4.log" size="466578" author="jkni" created="Tue, 29 Sep 2015 06:44:38 +0000"/>
                            <attachment id="12764195" name="n5.log" size="858004" author="jkni" created="Tue, 29 Sep 2015 06:44:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jkni]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jlpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332361">3.0 alpha 1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stefania</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jkni</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>