<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:27:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3553] value validator in the cli does not pick up</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3553</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;the summary is probably confusing, so here is an example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[default@testks] describe testcf;
    ColumnFamily: testcf
      Key Validation Class: org.apache.cassandra.db.marshal.UTF8Type
      Default column value validator: org.apache.cassandra.db.marshal.LongType
      Columns sorted by: org.apache.cassandra.db.marshal.LongType
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;notice both column and column value are under LongType&lt;/p&gt;

&lt;p&gt;in the cli (without assume):&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;default@testks&amp;#93;&lt;/span&gt; set testcf&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;foo&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1293843587&amp;#93;&lt;/span&gt;=30; &lt;br/&gt;
null&lt;br/&gt;
InvalidRequestException(why:(Expected 8 or 0 byte long (2)) &lt;span class=&quot;error&quot;&gt;&amp;#91;testks&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;testcf&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1293843587&amp;#93;&lt;/span&gt; failed validation)&lt;br/&gt;
        at org.apache.cassandra.thrift.Cassandra$insert_result.read(Cassandra.java:15198)&lt;br/&gt;
        at org.apache.cassandra.thrift.Cassandra$Client.recv_insert(Cassandra.java:858)&lt;br/&gt;
        at org.apache.cassandra.thrift.Cassandra$Client.insert(Cassandra.java:830)&lt;br/&gt;
        at org.apache.cassandra.cli.CliClient.executeSet(CliClient.java:902)&lt;br/&gt;
        at org.apache.cassandra.cli.CliClient.executeCLIStatement(CliClient.java:216)&lt;br/&gt;
        at org.apache.cassandra.cli.CliMain.processStatementInteractive(CliMain.java:220)&lt;br/&gt;
        at org.apache.cassandra.cli.CliMain.main(CliMain.java:346)&lt;/p&gt;

&lt;p&gt;so the above so the value cannot be validated, so now lets try to change the column name also:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;default@testks&amp;#93;&lt;/span&gt; set testcf&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;foo&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;30&amp;#93;&lt;/span&gt;=30;               &lt;br/&gt;
null&lt;br/&gt;
InvalidRequestException(why:(Expected 8 or 0 byte long (2)) &lt;span class=&quot;error&quot;&gt;&amp;#91;testks&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;testcf&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;30&amp;#93;&lt;/span&gt; failed validation)&lt;br/&gt;
        at org.apache.cassandra.thrift.Cassandra$insert_result.read(Cassandra.java:15198)&lt;br/&gt;
        at org.apache.cassandra.thrift.Cassandra$Client.recv_insert(Cassandra.java:858)&lt;br/&gt;
        at org.apache.cassandra.thrift.Cassandra$Client.insert(Cassandra.java:830)&lt;br/&gt;
        at org.apache.cassandra.cli.CliClient.executeSet(CliClient.java:902)&lt;br/&gt;
        at org.apache.cassandra.cli.CliClient.executeCLIStatement(CliClient.java:216)&lt;br/&gt;
        at org.apache.cassandra.cli.CliMain.processStatementInteractive(CliMain.java:220)&lt;br/&gt;
        at org.apache.cassandra.cli.CliMain.main(CliMain.java:346)&lt;/p&gt;

&lt;p&gt;now lets set value with 8 characters:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;default@testks&amp;#93;&lt;/span&gt; set testcf&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;foo&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;30&amp;#93;&lt;/span&gt;=12345678;  &lt;br/&gt;
Value inserted.&lt;/p&gt;

&lt;p&gt;so that shows column is fine, only the value part is not fine. put it in assume or long() works:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;default@testks&amp;#93;&lt;/span&gt; assume testcf validator as long;&lt;br/&gt;
Assumption for column family &apos;testcf&apos; added successfully.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;default@testks&amp;#93;&lt;/span&gt; set testcf&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;foo&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;30&amp;#93;&lt;/span&gt;=30;       &lt;br/&gt;
Value inserted.&lt;/p&gt;


&lt;p&gt;or (restart to a new session to un-assume):&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;default@testks&amp;#93;&lt;/span&gt; set testcf&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;foo&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;30&amp;#93;&lt;/span&gt;=long(30);         &lt;br/&gt;
Value inserted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533553">CASSANDRA-3553</key>
            <summary>value validator in the cli does not pick up</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xedin">Pavel Yaskevich</assignee>
                                    <reporter username="cywjackson">Jackson Chung</reporter>
                        <labels>
                            <label>cli</label>
                    </labels>
                <created>Fri, 2 Dec 2011 00:49:28 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:45 +0000</updated>
                            <resolved>Fri, 2 Dec 2011 14:39:48 +0000</resolved>
                                        <fixVersion>1.0.6</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13161563" author="xedin" created="Fri, 2 Dec 2011 12:04:09 +0000"  >&lt;p&gt;it wasn&apos;t peaking correct default validation class, just converting everything to bytes...&lt;/p&gt;</comment>
                            <comment id="13161650" author="jbellis" created="Fri, 2 Dec 2011 14:13:34 +0000"  >&lt;p&gt;For consistency with the rest of the CLI we should use defaultValidator.fromString(columnValue) even for BytesType.  (Which means we should probably make this change only in 1.0, since 0.8 users may be relying on the old, broken behavior.)&lt;/p&gt;</comment>
                            <comment id="13161657" author="xedin" created="Fri, 2 Dec 2011 14:26:28 +0000"  >&lt;p&gt;I agree, here is patch with 1.0 specific changes.&lt;/p&gt;</comment>
                            <comment id="13161663" author="jbellis" created="Fri, 2 Dec 2011 14:31:11 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13161668" author="xedin" created="Fri, 2 Dec 2011 14:39:48 +0000"  >&lt;p&gt;Committed to 1.0 branch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505895" name="CASSANDRA-3553-1-0-specific-changes.patch" size="3911" author="xedin" created="Fri, 2 Dec 2011 14:26:28 +0000"/>
                            <attachment id="12505876" name="CASSANDRA-3553.patch" size="1283" author="xedin" created="Fri, 2 Dec 2011 12:04:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219281</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0glbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94885</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>