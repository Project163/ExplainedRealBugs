<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:12:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-606] Compaction can&apos;t find files</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-606</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We have been seeing issues with compaction running very often. We ran into this case when I found out in one of our CFs we were inserting a high volume of columns. Our threshold for memtable size flushes is 64MB but the MemtableObjectCountInMillions is 0.1 (we know this is low and will increase). On average we are writing so much data that compaction kicks off reguarly. And when we start trying to lookup data, we get lots of errors during compaction and get_slice (since sometimes files don&apos;t get cleaned up). In every event that this has occurred, a -Filter file was left behind. Never Data or Index.&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;COMPACTION-POOL:1&amp;#93;&lt;/span&gt; 2009-12-05 15:04:47,412 DebuggableThreadPoolExecutor.java (line 120) Error in executor futuretask&lt;br/&gt;
java.util.concurrent.ExecutionException: java.io.FileNotFoundException: /mnt/var/cassandra/data/Digg/UserActivity-1243-Data.db (No such file or directory)&lt;br/&gt;
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)&lt;br/&gt;
        at java.util.concurrent.FutureTask.get(FutureTask.java:83)&lt;br/&gt;
        at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.afterExecute(DebuggableThreadPoolExecutor.java:112)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:888)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
Caused by: java.io.FileNotFoundException: /mnt/var/cassandra/data/Digg/UserActivity-1243-Data.db (No such file or directory)&lt;br/&gt;
        at java.io.RandomAccessFile.open(Native Method)&lt;br/&gt;
        at java.io.RandomAccessFile.&amp;lt;init&amp;gt;(RandomAccessFile.java:212)&lt;br/&gt;
        at java.io.RandomAccessFile.&amp;lt;init&amp;gt;(RandomAccessFile.java:98)&lt;br/&gt;
        at org.apache.cassandra.io.BufferedRandomAccessFile.&amp;lt;init&amp;gt;(BufferedRandomAccessFile.java:142)&lt;br/&gt;
        at org.apache.cassandra.io.SSTableScanner.&amp;lt;init&amp;gt;(SSTableScanner.java:47)&lt;br/&gt;
        at org.apache.cassandra.io.SSTableReader.getScanner(SSTableReader.java:386)&lt;br/&gt;
        at org.apache.cassandra.io.CompactionIterator.getCollatingIterator(CompactionIterator.java:65)&lt;br/&gt;
        at org.apache.cassandra.io.CompactionIterator.&amp;lt;init&amp;gt;(CompactionIterator.java:48)&lt;br/&gt;
        at org.apache.cassandra.db.ColumnFamilyStore.doFileCompaction(ColumnFamilyStore.java:902)&lt;br/&gt;
        at org.apache.cassandra.db.ColumnFamilyStore.doFileCompaction(ColumnFamilyStore.java:861)&lt;br/&gt;
        at org.apache.cassandra.db.ColumnFamilyStore.doCompaction(ColumnFamilyStore.java:663)&lt;br/&gt;
        at org.apache.cassandra.db.CompactionManager$1.call(CompactionManager.java:180)&lt;br/&gt;
        at org.apache.cassandra.db.CompactionManager$1.call(CompactionManager.java:177)&lt;br/&gt;
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
        ... 2 more&lt;br/&gt;
 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2009-12-05 15:08:54,384 SSTable.java (line 156) Deleted /mnt/var/cassandra/data/Digg/UserActivity-1130-Data.db&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12442556">CASSANDRA-606</key>
            <summary>Compaction can&apos;t find files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lenn0x">Chris Goffinet</assignee>
                                    <reporter username="lenn0x">Chris Goffinet</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 Dec 2009 23:34:50 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:31 +0000</updated>
                            <resolved>Sun, 6 Dec 2009 01:46:57 +0000</resolved>
                                        <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12786546" author="lenn0x" created="Sun, 6 Dec 2009 00:20:49 +0000"  >&lt;p&gt;Looks like ColumnFamilyStore.onStart() is not restricting itself to it&apos;s own CF files only. After CF A onstart finishes CF B onstart could remove orphans.&lt;/p&gt;</comment>
                            <comment id="12786554" author="jbellis" created="Sun, 6 Dec 2009 01:31:13 +0000"  >&lt;p&gt;the filename.contains(columnFamily_)) and cfName.equals(columnFamily_) checks are redundant too w/ this&lt;/p&gt;</comment>
                            <comment id="12786556" author="jbellis" created="Sun, 6 Dec 2009 01:44:46 +0000"  >&lt;p&gt;+1 v2&lt;/p&gt;</comment>
                            <comment id="12786611" author="hudson" created="Sun, 6 Dec 2009 12:35:08 +0000"  >&lt;p&gt;Integrated in Cassandra #279 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/279/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/279/&lt;/a&gt;)&lt;br/&gt;
    ColumnFamily.onStart() was not checking files related to only it&apos;s column family. It was possible to remove files from other CFs thinking they were orphans. Skip files not apart of the CF. patch by goffinet; reviewed by jbellis for &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12427082" name="0001-ColumnFamily.onStart-was-not-checking-files-related-.patch" size="1818" author="lenn0x" created="Sun, 6 Dec 2009 01:29:35 +0000"/>
                            <attachment id="12427083" name="0001-v2-ColumnFamily.onStart-was-not-checking-files-related-.patch" size="2344" author="lenn0x" created="Sun, 6 Dec 2009 01:39:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[lenn0x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19777</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fzyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91425</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>