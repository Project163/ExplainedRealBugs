<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:12:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14928] MigrationManager attempts to pull schema from different major version nodes</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14928</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;MigrationManager will do the version check against nodes it hasn&apos;t connected to yet so it doesn&apos;t know their messaging service version. We should also check the version in gossip as an additional layer of protection.&lt;/p&gt;

&lt;p&gt;This causes many of the upgrade tests to fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13203519">CASSANDRA-14928</key>
            <summary>MigrationManager attempts to pull schema from different major version nodes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aweisberg">Ariel Weisberg</assignee>
                                    <reporter username="aweisberg">Ariel Weisberg</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 10 Dec 2018 19:49:51 +0000</created>
                <updated>Sun, 1 Aug 2021 12:51:48 +0000</updated>
                            <resolved>Thu, 13 Dec 2018 18:33:55 +0000</resolved>
                                        <fixVersion>2.2.14</fixVersion>
                    <fixVersion>3.0.18</fixVersion>
                    <fixVersion>3.11.7</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Distributed Metadata</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16715633" author="aweisberg" created="Mon, 10 Dec 2018 21:57:32 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CircleCI&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-2.2...aweisberg:14928-2.2?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://circleci.com/gh/aweisberg/cassandra/tree/14928-2%2E2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-3.0...aweisberg:14928-3.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://circleci.com/gh/aweisberg/cassandra/tree/14928-3%2E0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-3.11...aweisberg:14928-3.11?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://circleci.com/gh/aweisberg/cassandra/tree/14928-3%2E11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...aweisberg:14928-trunk?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://circleci.com/gh/aweisberg/cassandra/tree/14928-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</comment>
                            <comment id="16718123" author="djoshi3" created="Tue, 11 Dec 2018 22:46:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aweisberg&quot; class=&quot;user-hover&quot; rel=&quot;aweisberg&quot;&gt;aweisberg&lt;/a&gt; the changes look good. I wonder if it would be better to add a helper &lt;tt&gt;FBUtilities::getReleaseVersionMajor()&lt;/tt&gt;. Also note that the &lt;tt&gt;FBUtilities::getReleaseVersionString()&lt;/tt&gt; may return a string &quot;Unknown&quot; in which case you&apos;ll experience an exception. Ideally, we&apos;d like to assert that the version is not &quot;unknown&quot;.&lt;/p&gt;</comment>
                            <comment id="16718224" author="githubbot" created="Tue, 11 Dec 2018 23:54:13 +0000"  >&lt;p&gt;Github user aweisberg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/41#discussion_r240837053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra-dtest/pull/41#discussion_r240837053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: upgrade_tests/upgrade_manifest.py &amp;#8212;&lt;br/&gt;
    @@ -70,22 +89,19 @@ def clone_with_local_env_version(self):&lt;br/&gt;
             return self&lt;/p&gt;


&lt;p&gt;    -indev_2_0_x = None  # None if release not likely&lt;br/&gt;
    -current_2_0_x = VersionMeta(name=&apos;current_2_0_x&apos;, family=&apos;2.0.x&apos;, variant=&apos;current&apos;, version=&apos;2.0.17&apos;, min_proto_v=1, max_proto_v=2, java_versions=(7,))&lt;br/&gt;
    -&lt;br/&gt;
     indev_2_1_x = VersionMeta(name=&apos;indev_2_1_x&apos;, family=&apos;2.1.x&apos;, variant=&apos;indev&apos;, version=&apos;github:apache/cassandra-2.1&apos;, min_proto_v=1, max_proto_v=3, java_versions=(7, 8))&lt;br/&gt;
    -current_2_1_x = VersionMeta(name=&apos;current_2_1_x&apos;, family=&apos;2.1.x&apos;, variant=&apos;current&apos;, version=&apos;2.1.17&apos;, min_proto_v=1, max_proto_v=3, java_versions=(7, 8))&lt;br/&gt;
    +current_2_1_x = VersionMeta(name=&apos;current_2_1_x&apos;, family=&apos;2.1.x&apos;, variant=&apos;current&apos;, version=&apos;2.1.20&apos;, min_proto_v=1, max_proto_v=3, java_versions=(7, 8))&lt;/p&gt;

&lt;p&gt;     indev_2_2_x = VersionMeta(name=&apos;indev_2_2_x&apos;, family=&apos;2.2.x&apos;, variant=&apos;indev&apos;, version=&apos;github:apache/cassandra-2.2&apos;, min_proto_v=1, max_proto_v=4, java_versions=(7, 8))&lt;br/&gt;
    -current_2_2_x = VersionMeta(name=&apos;current_2_2_x&apos;, family=&apos;2.2.x&apos;, variant=&apos;current&apos;, version=&apos;2.2.9&apos;, min_proto_v=1, max_proto_v=4, java_versions=(7, 8))&lt;br/&gt;
    +current_2_2_x = VersionMeta(name=&apos;current_2_2_x&apos;, family=&apos;2.2.x&apos;, variant=&apos;current&apos;, version=&apos;2.2.13&apos;, min_proto_v=1, max_proto_v=4, java_versions=(7, 8))&lt;/p&gt;

&lt;p&gt;    -indev_3_0_x = VersionMeta(name=&apos;indev_3_0_x&apos;, family=&apos;3.0.x&apos;, variant=&apos;indev&apos;, version=&apos;github:apache/cassandra-3.0&apos;, min_proto_v=3, max_proto_v=4, java_versions=(8,))&lt;br/&gt;
    -current_3_0_x = VersionMeta(name=&apos;current_3_0_x&apos;, family=&apos;3.0.x&apos;, variant=&apos;current&apos;, version=&apos;3.0.12&apos;, min_proto_v=3, max_proto_v=4, java_versions=(8,))&lt;br/&gt;
    +indev_3_0_x = VersionMeta(name=&apos;indev_3_0_x&apos;, family=&apos;3.0.x&apos;, variant=&apos;indev&apos;, version=&apos;github:aweisberg/cassandra-3.0&apos;, min_proto_v=3, max_proto_v=4, java_versions=(8,))&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Like I said in the JIRA I will update the branches on commit once &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14928&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-14928&lt;/a&gt; is merged.&lt;/p&gt;</comment>
                            <comment id="16719483" author="djoshi3" created="Wed, 12 Dec 2018 21:54:26 +0000"  >&lt;p&gt;LGTM +1&lt;/p&gt;</comment>
                            <comment id="16720470" author="aweisberg" created="Thu, 13 Dec 2018 18:33:55 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/505a03c77764351e1b649e8c7d73d0421e7bcc13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;505a03c77764351e1b649e8c7d73d0421e7bcc13&lt;/a&gt;. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aweisberg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01d3s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[djoshi]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>