<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:00:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11034] consistent_reads_after_move_test is failing on trunk</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11034</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The novnode dtest &lt;tt&gt;consistent_bootstrap_test.TestBootstrapConsistency.consistent_reads_after_move_test&lt;/tt&gt; is failing on trunk. See an example failure &lt;a href=&quot;http://cassci.datastax.com/job/trunk_novnode_dtest/274/testReport/consistent_bootstrap_test/TestBootstrapConsistency/consistent_reads_after_move_test/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;On trunk I am getting an OOM of one of my C* nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;node3&amp;#93;&lt;/span&gt;, which is what causes the nodetool move to fail. Logs are attached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12932522">CASSANDRA-11034</key>
            <summary>consistent_reads_after_move_test is failing on trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="philipthompson">Philip Thompson</reporter>
                        <labels>
                            <label>dtest</label>
                    </labels>
                <created>Tue, 19 Jan 2016 20:52:18 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:44 +0000</updated>
                            <resolved>Fri, 29 Jan 2016 21:06:29 +0000</resolved>
                                        <fixVersion>3.3</fixVersion>
                                    <component>Legacy/Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15115020" author="slebresne" created="Mon, 25 Jan 2016 10:38:34 +0000"  >&lt;p&gt;Assigning to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; because from the CI history, this look like it is likely a regression from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6696&quot; title=&quot;Partition sstables by token range&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6696&quot;&gt;&lt;del&gt;CASSANDRA-6696&lt;/del&gt;&lt;/a&gt;. That is, it starts failing &lt;a href=&quot;http://cassci.datastax.com/job/trunk_novnode_dtest/259/changes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;there&lt;/a&gt;, which has a few other minor changes, but the server side OOM happens in &lt;tt&gt;Splitter&lt;/tt&gt; which was, I believe, introduced by this patch (see trace &lt;a href=&quot;http://cassci.datastax.com/job/trunk_novnode_dtest/259/testReport/consistent_bootstrap_test/TestBootstrapConsistency/consistent_reads_after_move_test_2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15121906" author="krummas" created="Thu, 28 Jan 2016 17:07:39 +0000"  >&lt;p&gt;&lt;del&gt;This is actually caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10887&quot; title=&quot;Pending range calculator gives wrong pending ranges for moves&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10887&quot;&gt;&lt;del&gt;CASSANDRA-10887&lt;/del&gt;&lt;/a&gt; we don&apos;t see the same pending ranges during the move as we did before, trying to figure out why&lt;/del&gt; edit: nope, my error all along&lt;/p&gt;</comment>
                            <comment id="15123246" author="krummas" created="Fri, 29 Jan 2016 09:29:38 +0000"  >&lt;p&gt;we move the token so that the RF=1 keyspace gets a 2 token range, meaning we can&apos;t split it in 3 parts and we go into an infinite loop in splitter&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/11034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/11034&lt;/a&gt;&lt;br/&gt;
tests:&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-11034-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-11034-testall/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-11034-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-11034-dtest/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;setting to blocker for 3.3 to make sure we get it in&lt;/p&gt;</comment>
                            <comment id="15124125" author="carlyeks" created="Fri, 29 Jan 2016 20:09:54 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15124210" author="krummas" created="Fri, 29 Jan 2016 21:06:29 +0000"  >&lt;p&gt;committed, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12783178" name="node1.log" size="81428" author="philipthompson" created="Tue, 19 Jan 2016 20:52:18 +0000"/>
                            <attachment id="12783177" name="node1_debug.log" size="331690" author="philipthompson" created="Tue, 19 Jan 2016 20:52:18 +0000"/>
                            <attachment id="12783180" name="node2.log" size="51618" author="philipthompson" created="Tue, 19 Jan 2016 20:52:18 +0000"/>
                            <attachment id="12783179" name="node2_debug.log" size="186850" author="philipthompson" created="Tue, 19 Jan 2016 20:52:18 +0000"/>
                            <attachment id="12783182" name="node3.log" size="65534" author="philipthompson" created="Tue, 19 Jan 2016 20:52:18 +0000"/>
                            <attachment id="12783181" name="node3_debug.log" size="205386" author="philipthompson" created="Tue, 19 Jan 2016 20:52:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rpd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>carlyeks</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[carlyeks]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>