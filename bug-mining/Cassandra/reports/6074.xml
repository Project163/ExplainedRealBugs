<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:25:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-17729] Raise test timeouts</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-17729</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We have seen for some time now junits timeout frequently on jenkins. This is probably down to it being a very loaded env. On circle we don&apos;t observe that behavior probably bc it&apos;s not so loaded.&lt;/p&gt;

&lt;p&gt;The question is whether it is time to raise timeouts as they might be hiding legit failures. As en experiment I raised timeouts in a branch and ran jenkins against it. What I see is that the last 4.1 run had 14 failures out of which 12 were timeouts. Increasing timeouts reveals what looks to be 9 legit failures where 2 are timeouts that probably need to be investigated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13470034">CASSANDRA-17729</key>
            <summary>Raise test timeouts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bereng">Berenguer Blasi</assignee>
                                    <reporter username="bereng">Berenguer Blasi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jul 2022 04:34:54 +0000</created>
                <updated>Tue, 12 Sep 2023 13:02:30 +0000</updated>
                            <resolved>Thu, 14 Jul 2022 09:45:14 +0000</resolved>
                                        <fixVersion>4.1-beta1</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>Test/unit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17562364" author="bereng" created="Tue, 5 Jul 2022 04:39:27 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Jenkins&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Circle&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/bereng/cassandra/tree/raisedtimeouts-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1 branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch/1822/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI jenkins&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/bereng/cassandra/694/workflows/c08784ea-a9c8-49d5-abd9-0339f2338280&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI circle&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17562736" author="jmckenzie" created="Tue, 5 Jul 2022 16:06:59 +0000"  >&lt;p&gt;4.1 branch link doesn&apos;t appear to be valid&lt;/p&gt;</comment>
                            <comment id="17562954" author="bereng" created="Wed, 6 Jul 2022 05:39:23 +0000"  >&lt;p&gt;^Ah well yes apologies. It works better if you actually link sthg to it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmckenzie&quot; class=&quot;user-hover&quot; rel=&quot;jmckenzie&quot;&gt;jmckenzie&lt;/a&gt; mentioned on the ML:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Another option would be to increase the resources dedicated to each agent container and run less in parallel. Or, best yet, do both (up timeouts and lower parallelization / up resources).&lt;/p&gt;

&lt;p&gt;As far as I can tell the failures on Jenkins aren&apos;t value-add compared to what we&apos;re seeing on circleci and are just generating busywork.&lt;/p&gt;

&lt;p&gt;There&apos;s a reasonable discussion to be had about &quot;what&apos;s the smallest footprint of hardware we consider C* supported on&quot; and targeting ASF CI to validate that. I believe the noisy env + low resources on ASF CI currently are lower than whatever floor we&apos;d reasonably agree on.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree more resources would be great. And we&apos;re now on a degraded situation while some workers are offline getting their &apos;full HDD&apos; issues fixed. Also setting some HW baseline seems like a good point.&lt;/p&gt;

&lt;p&gt;On the other hand I can&apos;t stop finding legit bugs on jenkins runs. Being a contended env, as opposed to circle, many bugs that circle would never show come up in jenkins. The problem is being able to find those within all the noise in jenkins. That&apos;s why it is so important to get to green and &lt;em&gt;keep it&lt;/em&gt; like that. Otherwise the noise hides the legit failures.&lt;/p&gt;</comment>
                            <comment id="17563145" author="michaelsembwever" created="Wed, 6 Jul 2022 10:43:01 +0000"  >&lt;p&gt;Agree with the notion that Jenkins (lower resources/more contention) is better at exposing flakies, but that there&apos;s a trade-off between encouraging flakies and creating difficult-to-deal-with noise.&lt;/p&gt;

&lt;p&gt;While I&apos;m for raising the discussion about what is the base hardware requirement (once HDD issues are resolved and all agents are active again), I don&apos;t see this as an argument not to continuously improve tests to be more robust. So +1 to the patch.&lt;/p&gt;</comment>
                            <comment id="17563298" author="jmckenzie" created="Wed, 6 Jul 2022 15:26:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;I can&apos;t stop finding legit bugs on jenkins runs&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You&apos;re seeing bugs showing up in Jenkins that don&apos;t show in circle that users could expect to see in a reasonably provisioned C* cluster?&lt;/p&gt;</comment>
                            <comment id="17563574" author="bereng" created="Thu, 7 Jul 2022 04:50:34 +0000"  >&lt;p&gt;Through all the reviews and tests fixes I have done all this time there are plenty that will only repro on circle or only on jenkins, yes. And I think that is shared pov if you ask at least in my team.  It is common for me to be involved in tickets that only repro on jenkins. In fact the jenkins run in this ticket is showing a few that don&apos;t show on the matching circle run.&lt;/p&gt;

&lt;p&gt;How this would relate to a &apos;properly&apos; provisioned cluster, which we would have to define, I can&apos;t tell. I see your point right, bc there are some snakes in the grass, but If they are only doing noise is sthg to discuss as in any dist environment you will have timeouts and resource contraints. But at the moment jenkins is our official CI so any bugs there need ironing iiuc.&lt;/p&gt;

&lt;p&gt;i.e &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17232&quot; title=&quot;org.apache.cassandra.db.commitlog.GroupCommitLogTest tests failing on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17232&quot;&gt;&lt;del&gt;CASSANDRA-17232&lt;/del&gt;&lt;/a&gt; is sthg that comes up in jenkins a lot. On circle we only get it looping the test a1000 times and with difficulty.&lt;/p&gt;</comment>
                            <comment id="17563838" author="jmckenzie" created="Thu, 7 Jul 2022 15:38:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;at the moment jenkins is our official CI so any bugs there need ironing &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In my mind there&apos;s a distinction between a &quot;test bug&quot; and a &quot;product bug&quot;. I don&apos;t deny we have many of the former, but we may not agree on the relative value of spending time fixing things that only show up in highly contended, lowly provisioned test runtime environments.&lt;/p&gt;

&lt;p&gt;Let&apos;s continue this discussion on the dev ML thread?&lt;/p&gt;</comment>
                            <comment id="17566707" author="bereng" created="Thu, 14 Jul 2022 08:25:25 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;PR&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.1 &lt;a href=&quot;https://github.com/apache/cassandra/pull/1730&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/1730&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Ci &lt;a href=&quot;https://app.circleci.com/pipelines/github/bereng/cassandra/718/workflows/3f3a4b86-3110-4a95-be1b-5c2eb92cc507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; CI &lt;a href=&quot;https://app.circleci.com/pipelines/github/bereng/cassandra/718/workflows/128a413f-59d5-4b00-acc1-c3a11a453433&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Trunk &lt;a href=&quot;https://github.com/apache/cassandra/pull/1731&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/1731&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CI &lt;a href=&quot;https://app.circleci.com/pipelines/github/bereng/cassandra/719/workflows/8408ab3a-333c-4c10-bd67-34542ee2984a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; CI &lt;a href=&quot;https://app.circleci.com/pipelines/github/bereng/cassandra/719/workflows/66ba9760-cb63-4596-8e48-47d65e39f639&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Unrelated errors imo&lt;/p&gt;</comment>
                            <comment id="17566734" author="bereng" created="Thu, 14 Jul 2022 09:45:34 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt; and the rest for the help here!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bereng]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12984" cascade-level=""><![CDATA[Degradation]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12970"><![CDATA[Unit Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16lmw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bereng]]></customfieldvalue>
        <customfieldvalue><![CDATA[mck]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12351787">4.1-alpha1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/14fc06a3ce007b0cbf3bc88c3d8c247da65fc036&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/14fc06a3ce007b0cbf3bc88c3d8c247da65fc036&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;In the ticket&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>