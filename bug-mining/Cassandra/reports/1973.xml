<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:36:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5013] disallow bloom filter false positive chance of 0</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5013</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>{pre}&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:16&amp;#93;&lt;/span&gt; 2012-11-30 08:44:32,546 SSTableWriter.java (line 414) Bloom filter FP chance of zero isn&apos;t supposed to happen{pre}

&lt;p&gt;when attempting to set it to zero, C* should either disallow the change or should just interpret 0 as &quot;make it the default&quot; and not continually log the above error message&lt;/p&gt;</description>
                <environment></environment>
        <key id="12618512">CASSANDRA-5013</key>
            <summary>disallow bloom filter false positive chance of 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="mdennis">Matthew F. Dennis</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Dec 2012 21:43:24 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:22 +0000</updated>
                            <resolved>Mon, 7 Jan 2013 18:11:20 +0000</resolved>
                                        <fixVersion>1.2.1</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13526405" author="brandon.williams" created="Fri, 7 Dec 2012 14:12:15 +0000"  >&lt;p&gt;Since we&apos;re already converting zero to the default, it makes sense to maintain that behavior and simply remove the error.  Patch to do so.&lt;/p&gt;</comment>
                            <comment id="13526523" author="jbellis" created="Fri, 7 Dec 2012 16:44:56 +0000"  >&lt;p&gt;Where are we converting zero to default?  ISTM that setting to zero is likely to either mean&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;user is asking for no false positives at all, which is impossible.  should give an error instead of changing to default.&lt;/li&gt;
	&lt;li&gt;user is asking for no bloom filter at all, in which changing to default is also not what we want to do.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13526531" author="brandon.williams" created="Fri, 7 Dec 2012 16:47:34 +0000"  >&lt;p&gt;If we detect zero we set fpChance to null, which then results in 15 target buckets.  I agree with both your points but for a point release in stable changing the behavior doesn&apos;t seem appropriate.&lt;/p&gt;</comment>
                            <comment id="13526553" author="jbellis" created="Fri, 7 Dec 2012 17:14:07 +0000"  >&lt;p&gt;then let&apos;s fix it in 1.2 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13526706" author="brandon.williams" created="Fri, 7 Dec 2012 19:42:51 +0000"  >&lt;p&gt;Sure, but let&apos;s apply this patch for 1.1.8 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13526714" author="jbellis" created="Fri, 7 Dec 2012 19:47:09 +0000"  >&lt;p&gt;I&apos;m not sure at all this is going to work as designed.  The comments there say &quot;this isn&apos;t supposed to happen&quot; which makes me think that there is some code somewhere else that tries to get rid of zeros.&lt;/p&gt;

&lt;p&gt;That complexity is gone in 1.2 (since we gave up on grandfathering in the pre-1.0? code that calls the 15 bucket path) so I&apos;d rather stick with changes there than risk regressions.&lt;/p&gt;</comment>
                            <comment id="13534244" author="jbellis" created="Mon, 17 Dec 2012 20:00:40 +0000"  >&lt;p&gt;attached as v2&lt;/p&gt;</comment>
                            <comment id="13534247" author="andras.szerdahelyi@ignitionone.com" created="Mon, 17 Dec 2012 20:04:11 +0000"  >&lt;p&gt;Thank you for your e-mail. I&apos;m out of the office on vacation until Tuesday, the 8th of January 2013 with very little access to e-mail.&lt;br/&gt;
For technical questions or concerns, please write to tech-team@netmining.com.&lt;/p&gt;

&lt;p&gt;happy holidays!&lt;br/&gt;
Andras Szerdahelyi&lt;/p&gt;</comment>
                            <comment id="13534308" author="andras" created="Mon, 17 Dec 2012 21:11:54 +0000"  >&lt;p&gt;well, that wasn&apos;t entirely intentional, but happy holidays nevertheless! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="13543865" author="brandon.williams" created="Fri, 4 Jan 2013 12:59:47 +0000"  >&lt;p&gt;You need to check that bloomFilterFpChance isn&apos;t null before seeing if it&apos;s zero at the end to avoid NPE, but otherwise +1.&lt;/p&gt;</comment>
                            <comment id="13544050" author="jbellis" created="Fri, 4 Jan 2013 17:35:05 +0000"  >&lt;p&gt;Not sure what you mean, isn&apos;t that what I&apos;m doing here?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;.       &lt;span class=&quot;code-comment&quot;&gt;// we disallow bFFPC==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; starting in 1.2.1 but tolerated it before that
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (bloomFilterFpChance == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || bloomFilterFpChance == 0)
               ? compactionStrategyClass == LeveledCompactionStrategy.class ? 0.1 : 0.01
               : bloomFilterFpChance;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13544056" author="brandon.williams" created="Fri, 4 Jan 2013 17:39:02 +0000"  >&lt;p&gt;The problem is that if the compaction class is not LCS, it&apos;s still null, and then further down:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; if (bloomFilterFpChance == 0)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Throws an NPE.&lt;/p&gt;</comment>
                            <comment id="13546110" author="jbellis" created="Mon, 7 Jan 2013 18:11:20 +0000"  >&lt;p&gt;fixed + committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12561343" name="5013-v2.txt" size="2246" author="jbellis" created="Mon, 17 Dec 2012 20:00:42 +0000"/>
                            <attachment id="12559863" name="5013.txt" size="1000" author="brandon.williams" created="Fri, 7 Dec 2012 14:16:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>293330</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0swrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>166786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>