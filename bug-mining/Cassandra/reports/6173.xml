<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:26:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18088] cqlsh - module &apos;re&apos; has no attribute &apos;sre_parse&apos; - with Python 3.11</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18088</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;User reported an error with cqlsh (Cassandra 4.0.7) on Stack Overflow: &lt;a href=&quot;https://stackoverflow.com/questions/74673247/cannot-able-to-run-cqlsh-due-to-python-attribute-error?noredirect=1#comment131807816_74673247&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/74673247/cannot-able-to-run-cqlsh-due-to-python-attribute-error&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Found out that the user was using Python 3.11, and I was able to reproduce it with that.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;% python3.11 bin/cqlsh.py&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Traceback (most recent call last):&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; File &quot;/Users/aaronploetz/local/apache-cassandra-4.0.7/bin/cqlsh.py&quot;, line 159, in &amp;lt;module&amp;gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; from cqlshlib import cql3handling, cqlhandling, pylexotron, sslhandling, cqlshhandling&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; File &quot;/Users/aaronploetz/local/apache-cassandra-4.0.7/bin/../pylib/cqlshlib/cql3handling.py&quot;, line 19, in &amp;lt;module&amp;gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; from cqlshlib.cqlhandling import CqlParsingRuleSet, Hint&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; File &quot;/Users/aaronploetz/local/apache-cassandra-4.0.7/bin/../pylib/cqlshlib/cqlhandling.py&quot;, line 23, in &amp;lt;module&amp;gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; from cqlshlib import pylexotron, util&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; File &quot;/Users/aaronploetz/local/apache-cassandra-4.0.7/bin/../pylib/cqlshlib/pylexotron.py&quot;, line 342, in &amp;lt;module&amp;gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; class ParsingRuleSet:&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; File &quot;/Users/aaronploetz/local/apache-cassandra-4.0.7/bin/../pylib/cqlshlib/pylexotron.py&quot;, line 343, in ParsingRuleSet&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; RuleSpecScanner = SaferScanner([&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; ^^^^^^^^^^^^^^&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; File &quot;/Users/aaronploetz/local/apache-cassandra-4.0.7/bin/../pylib/cqlshlib/saferscanner.py&quot;, line 91, in &lt;em&gt;{&lt;/em&gt;}init{&lt;em&gt;}&lt;/em&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; s = re.sre_parse.State()&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; &#160; &#160; ^^^^^^^^^^^^&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;AttributeError: module &apos;re&apos; has no attribute &apos;sre_parse&apos;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Appears to be something specific (again) with Python&apos;s synchronizing regex engine (SRE).&#160; Works fine with Python 3.10, so there may have been a(nother) breaking change in that the re module with 3.11.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13509774">CASSANDRA-18088</key>
            <summary>cqlsh - module &apos;re&apos; has no attribute &apos;sre_parse&apos; - with Python 3.11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="aploetz">Aaron Ploetz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Dec 2022 17:43:09 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:35 +0000</updated>
                            <resolved>Fri, 20 Jan 2023 21:31:12 +0000</resolved>
                                        <fixVersion>4.0.8</fixVersion>
                    <fixVersion>4.1.1</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>CQL/Interpreter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="17643065" author="brandon.williams" created="Sun, 4 Dec 2022 19:06:46 +0000"  >&lt;p&gt;Looks like sre was &lt;a href=&quot;https://github.com/python/cpython/pull/32177/commits/ef52a1326dba8f9becadca052cb0db49b440f10a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;moved around&lt;/a&gt; so we need to do something like &lt;a href=&quot;https://github.com/driftx/cassandra/commit/c2c72025c6f5e09dfbee14e1d1b34a6d745a496c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17644009" author="brandon.williams" created="Tue, 6 Dec 2022 19:06:57 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Circle&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/716/workflows/ec1d8bd6-8e8d-4433-a7be-19a0973d3c77&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/716/workflows/6f420576-cdb8-4dcd-8ba9-76b92093db52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/715/workflows/301a8e1b-0f3c-430a-9d51-eb421e99faf4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/715/workflows/0c5afcb7-5a44-4e3b-a3b9-80284f44b6ad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/717/workflows/2139e59d-72cc-4983-b76a-ba4ed131f631&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/717/workflows/b5b7f158-1dab-4d00-9454-223b8800e76f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17644239" author="bereng" created="Wed, 7 Dec 2022 09:27:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; both this and 18094 make sense to me. But do we have a CI run where we see the tests being ran under the new image and 3.11 venv? If my eyes aren&apos;t fooling me I don&apos;t see it. We would need new jenkins and circle jobs. We have &apos;_3&apos; and &apos;_38&apos; jobs, we&apos;d need new &apos;_311&apos; jobs? Am I misunderstanding sthg?&lt;/p&gt;</comment>
                            <comment id="17644284" author="brandon.williams" created="Wed, 7 Dec 2022 11:17:31 +0000"  >&lt;p&gt;I don&apos;t think you are missing anything, but maybe I am.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We have &apos;_3&apos; and &apos;_38&apos; jobs, we&apos;d need new &apos;_311&apos; jobs&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This sounds like a reasonable thing, but where are these &apos;_3&apos; and &apos;_38&apos; jobs?&lt;/p&gt;</comment>
                            <comment id="17644344" author="bereng" created="Wed, 7 Dec 2022 13:53:45 +0000"  >&lt;p&gt;On circle we have &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/716/workflows/ec1d8bd6-8e8d-4433-a7be-19a0973d3c77/jobs/8209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt; i.e. and then again the variant for &apos;_38&apos; &lt;/p&gt;</comment>
                            <comment id="17644366" author="brandon.williams" created="Wed, 7 Dec 2022 14:34:39 +0000"  >&lt;p&gt;I&apos;m unable to locate any kind of jenkins equivalent, are you aware of any?  I will add the _py311 circle configs to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18094&quot; title=&quot;Add python 3.11 to CI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18094&quot;&gt;&lt;del&gt;CASSANDRA-18094&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17644415" author="brandon.williams" created="Wed, 7 Dec 2022 16:20:24 +0000"  >&lt;p&gt;There is not yet equivalency in Jenkins: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18101&quot; title=&quot;Jenkins: cqlsh tests should be run with all Python versions they are run in CircleCI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18101&quot;&gt;CASSANDRA-18101&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17645186" author="bereng" created="Fri, 9 Dec 2022 08:55:03 +0000"  >&lt;p&gt;Yeah you&apos;re right, jenkins is missing them as well.&lt;/p&gt;</comment>
                            <comment id="17647522" author="brandon.williams" created="Wed, 14 Dec 2022 15:02:20 +0000"  >&lt;p&gt;Here I am killing two birds with one stone: CI under python 3.11 for the sre module changes from this ticket, and testing of the docker image with python 3.11 that we will push for all of CI, if this goes well.&lt;/p&gt;

&lt;p&gt;This incorporates all the circle changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18094&quot; title=&quot;Add python 3.11 to CI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18094&quot;&gt;&lt;del&gt;CASSANDRA-18094&lt;/del&gt;&lt;/a&gt; and uses the docker image from my repo.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/733/workflows/42d4c66b-a105-42b8-9a4e-b3649d239b25&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/733/workflows/a2b6f194-d410-4947-a9a5-14e44ef770d4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/735/workflows/4afba4f7-80b9-4028-b2db-3a90f7d8a685&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/735/workflows/c48ca2be-883b-4e80-be64-34c6ceab0790&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/734/workflows/0d5aa254-a6f0-4d63-a76e-d6323bddf024&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/734/workflows/30186daf-5b3a-4cde-8f9f-94f2d35c0360&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;and here&apos;s a smoke test in jenkins of the docker image:&lt;br/&gt;
&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/2104/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/2104/badge/icon&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="17647564" author="brandon.williams" created="Wed, 14 Dec 2022 15:55:06 +0000"  >&lt;p&gt;There&apos;s some kind of problem with the 3.11 env I&apos;ll have to sort out, but at least we know the image didn&apos;t break anything existing.&lt;/p&gt;</comment>
                            <comment id="17647580" author="bereng" created="Wed, 14 Dec 2022 16:18:33 +0000"  >&lt;p&gt;Weird seems like the new image didn&apos;t make it through... In any case I think we chose the right CI strategy for both these tickets&lt;/p&gt;</comment>
                            <comment id="17648181" author="brandon.williams" created="Thu, 15 Dec 2022 17:52:23 +0000"  >&lt;p&gt;In the image with dependencies I didn&apos;t update the source, so it was still built from the apache repo.  I&apos;ve corrected that and uploaded the new image.&lt;/p&gt;

&lt;p&gt;There&apos;s another problem, though.  Circle runs &apos;cqlsh_dtests&apos; with the dtest runner and the &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/.circleci/config-2_1.yml#L2160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;regex flag with &apos;cql&apos;&lt;/a&gt; passed to it, which effectively means that cqlsh and the dtest repo must move in lockstep with regard to the python version.  If 3.11 support is added to cqlsh, because of this, it has to be added to the dtests as well.&lt;/p&gt;

&lt;p&gt;I looked into updating the dtests and that is going to be significant work worthy of its own ticket (to begin with, pytest has to be updated.)  I think we should not block having cqlsh work based upon what will work with the dtests, and instead make circle work more like Jenkins does to run the cqlsh tests.&lt;/p&gt;</comment>
                            <comment id="17648191" author="brandon.williams" created="Thu, 15 Dec 2022 18:14:38 +0000"  >&lt;p&gt;There is too much functionality being tested in the dtests&apos; cqlsh_tests to easily divorce them and cqlsh from the same python versions supported.  I&apos;ve created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18121&quot; title=&quot;Dtests need python 3.11 support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18121&quot;&gt;&lt;del&gt;CASSANDRA-18121&lt;/del&gt;&lt;/a&gt; for the dtests and will go back to looking into them.&lt;/p&gt;</comment>
                            <comment id="17648353" author="bereng" created="Fri, 16 Dec 2022 06:14:26 +0000"  >&lt;p&gt;Are you saying you A. are going to make dtests repo 3.11 &apos;friendly&apos; or B. that we will add new dtests runs for 3.11? I guess you mean B yes?&lt;/p&gt;</comment>
                            <comment id="17648588" author="brandon.williams" created="Fri, 16 Dec 2022 11:50:46 +0000"  >&lt;p&gt;Unfortunately, no, we need A: make the dtests work under 3.11.&lt;/p&gt;</comment>
                            <comment id="17648745" author="brandon.williams" created="Fri, 16 Dec 2022 17:34:57 +0000"  >&lt;p&gt;And yet another wrinkle: the cqlshlib tests use nose, and nose is more or less dead and doesn&apos;t support 3.11 either, so that has to be migrated to pytest.&lt;/p&gt;</comment>
                            <comment id="17648774" author="smiklosovic" created="Fri, 16 Dec 2022 19:44:45 +0000"  >&lt;p&gt;btw there is also &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17861&quot; title=&quot;Update Python test framework from nose to pytest in CCM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17861&quot;&gt;&lt;del&gt;CASSANDRA-17861&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17648788" author="brandon.williams" created="Fri, 16 Dec 2022 20:44:27 +0000"  >&lt;p&gt;Thanks.  CCM appears to be the one part of our python ecosystem this ticket doesn&apos;t need to reach into.  So far.&lt;/p&gt;

</comment>
                            <comment id="17678203" author="brandon.williams" created="Wed, 18 Jan 2023 11:57:33 +0000"  >&lt;p&gt;Here goes another attempt.  This incorporates all the circle changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18094&quot; title=&quot;Add python 3.11 to CI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18094&quot;&gt;&lt;del&gt;CASSANDRA-18094&lt;/del&gt;&lt;/a&gt;, has extra fixes on top of that, uses the docker image from my repo, and runs against &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18121&quot; title=&quot;Dtests need python 3.11 support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18121&quot;&gt;&lt;del&gt;CASSANDRA-18121&lt;/del&gt;&lt;/a&gt; dtests.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/784/workflows/2f68ddcb-32df-4079-80a9-562afffc4204&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/784/workflows/91a6b93b-91d1-4917-845d-635c2b6b1585&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/785/workflows/f0beb2f8-690a-49de-a138-8c06049f5954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/785/workflows/aa585189-d952-4548-8c7e-a241f9dc62b7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/786/workflows/81f67a32-d0c8-40a6-b529-09f662e0931f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/786/workflows/d4868597-594f-4c7d-bfc0-1ac97b228750&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17678328" author="brandon.williams" created="Wed, 18 Jan 2023 16:59:24 +0000"  >&lt;p&gt;These trunk failures are surprising, but reproduce so I&apos;m investigating.&lt;/p&gt;

&lt;p&gt;edit: things look better after rebasing the dtests, I&apos;ve edited the CI links above.&lt;/p&gt;</comment>
                            <comment id="17678504" author="bereng" created="Thu, 19 Jan 2023 06:40:27 +0000"  >&lt;p&gt;All looks good to me. I am only worried about all those feature branches being well behind, like 70 commits or so, hence I would recommend a rebase throughout everything so we don&apos;t merge and immediately fail sthg. It shouldn&apos;t as we&apos;re only touching a reasonably isolated part of the code but I&apos;d still be on the safe side. +1 when everything passes after the rebase.&lt;/p&gt;

&lt;p&gt;I noticed the 4.0 PR fixes some tests that are not touched on 4.1 and trunk. Everything passes but is that correct?&lt;/p&gt;</comment>
                            <comment id="17678678" author="brandon.williams" created="Thu, 19 Jan 2023 12:52:40 +0000"  >&lt;p&gt;I&apos;ll rebase these and put up a new matrix.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I noticed the 4.0 PR fixes some tests that are not touched on 4.1 and trunk&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You are probably talking about &lt;a href=&quot;https://github.com/driftx/cassandra/commit/a131c48d32bf9c033dc4e5b46a2f9ae2b32d5311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this commit&lt;/a&gt; which exists because &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17293&quot; title=&quot;Update python test framework from nose to pytest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17293&quot;&gt;&lt;del&gt;CASSANDRA-17293&lt;/del&gt;&lt;/a&gt; didn&apos;t go into 4.0, and now it needs it.&lt;/p&gt;</comment>
                            <comment id="17678688" author="bereng" created="Thu, 19 Jan 2023 13:17:39 +0000"  >&lt;p&gt;Sorry I misled you. I actually meant in 4.0 cassconnect.py, tes_sslhandling, pytest.ini and requirements.txt are touched where they aren&apos;t on 4.1 and trunk?&lt;/p&gt;</comment>
                            <comment id="17678694" author="brandon.williams" created="Thu, 19 Jan 2023 13:26:15 +0000"  >&lt;p&gt;Can you point at the commit so I know we are on the same page?&lt;/p&gt;</comment>
                            <comment id="17678731" author="bereng" created="Thu, 19 Jan 2023 14:15:34 +0000"  >&lt;p&gt;You can see it here for &lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-4.0...driftx:cassandra:CASSANDRA-18088-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt; and here for &lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-4.1...driftx:cassandra:CASSANDRA-18088-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt; i.e.&lt;/p&gt;</comment>
                            <comment id="17678755" author="brandon.williams" created="Thu, 19 Jan 2023 15:14:21 +0000"  >&lt;p&gt;I&apos;m unable find to any commits that touch those files that aren&apos;t the one I referenced above.&lt;/p&gt;</comment>
                            <comment id="17678836" author="brandon.williams" created="Thu, 19 Jan 2023 18:10:59 +0000"  >&lt;p&gt;Rebased:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/790/workflows/3ef175b4-e9e4-4f76-a7c0-3f644167e136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/790/workflows/a2632a1d-34af-48c8-86bb-00b1260c4758&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/792/workflows/eb5953ed-394a-4859-9711-a997b4e4b1bb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/792/workflows/53c70963-1df2-4e77-bfb9-23c1275fc246&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18088-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/791/workflows/4f1a4808-ec76-4b87-88d7-21db6a0217a0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/791/workflows/daf3256a-b9ad-4db0-bf52-42b4c3567b0a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17678994" author="bereng" created="Fri, 20 Jan 2023 05:43:07 +0000"  >&lt;p&gt;Thx for the explanation, makes sense now. +1 across circle, docker, pytests,... release the Kraken!&lt;/p&gt;</comment>
                            <comment id="17679121" author="brandon.williams" created="Fri, 20 Jan 2023 11:57:06 +0000"  >&lt;p&gt;Thanks for the review!  We need to begin committing this by first updating the docker images.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edimitrova&quot; class=&quot;user-hover&quot; rel=&quot;edimitrova&quot;&gt;edimitrova&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;, I believe you have access to do this, can you assist?&lt;/p&gt;</comment>
                            <comment id="17679168" author="edimitrova" created="Fri, 20 Jan 2023 14:23:33 +0000"  >&lt;p&gt;Sure, but I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;&#160;is already on it based on ASF Slack chat I saw. Still, let me know if you need me for anything. Happy to help&lt;/p&gt;</comment>
                            <comment id="17679238" author="michaelsembwever" created="Fri, 20 Jan 2023 17:30:02 +0000"  >&lt;p&gt;Docker images are getting published&#8230;&lt;/p&gt;</comment>
                            <comment id="17679327" author="brandon.williams" created="Fri, 20 Jan 2023 21:31:12 +0000"  >&lt;p&gt;Committed, thanks everyone!&lt;/p&gt;</comment>
                            <comment id="17703393" author="bschoeni" created="Tue, 21 Mar 2023 22:43:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160; I noticed the 4.1.x and trunk commits here appear to have re-introduced &apos;six&apos; and obsolete python 2.7 conditional checks.&#160; I.e., SaferScanner = Py36SaferScanner if six.PY3 else Py2SaferScanner &#8211; but there is no Py2SaferScanner anymore.&lt;/p&gt;</comment>
                            <comment id="17703394" author="brandon.williams" created="Tue, 21 Mar 2023 22:49:42 +0000"  >&lt;p&gt;You are right &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bschoeni&quot; class=&quot;user-hover&quot; rel=&quot;bschoeni&quot;&gt;bschoeni&lt;/a&gt;, can you open a new ticket to remove those?&lt;/p&gt;</comment>
                            <comment id="17703407" author="bschoeni" created="Tue, 21 Mar 2023 23:16:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; sure, see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18354&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-18354&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17703473" author="jeffwidman" created="Wed, 22 Mar 2023 04:07:14 +0000"  >&lt;p&gt;Good call &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bschoeni&quot; class=&quot;user-hover&quot; rel=&quot;bschoeni&quot;&gt;bschoeni&lt;/a&gt; I came here to report this exact issue! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="13514083">CASSANDRA-18121</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13509896">CASSANDRA-18094</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13058386" name="saferscanner.py" size="4503" author="godwin" created="Sat, 20 May 2023 18:25:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="13163" cascade-level=""><![CDATA[Code]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ddww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bereng]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348835">NA</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/0b5248d8c3ef743a8dda42f7be5dadb70e373b51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/0b5248d8c3ef743a8dda42f7be5dadb70e373b51&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;run CI&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>