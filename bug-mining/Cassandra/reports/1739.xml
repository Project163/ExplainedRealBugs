<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:34:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4494] nodetool can&apos;t work at all !</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4494</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;1. download cassandra 1.1.3 , then start with &quot;&lt;/p&gt;
{cassandra}
&lt;p&gt;/bin/cassandra -pf &amp;amp;&quot;&lt;br/&gt;
2. cd to bin , call nodetool as &quot;./nodetool -h localhost ring&quot;&lt;br/&gt;
3. console returned : failed to connect to &apos;localhost:7199&apos; : connection refused&lt;/p&gt;


&lt;p&gt;BUT ,&lt;/p&gt;

&lt;p&gt;at the same centos , all was ok before (1.1.2) .&lt;/p&gt;


&lt;p&gt;PS: &lt;/p&gt;

&lt;p&gt;cassandra-cli/cqlsh works well (1.1.3)&lt;/p&gt;


&lt;p&gt;--------------&lt;/p&gt;

&lt;p&gt;update:&lt;/p&gt;

&lt;p&gt;even if add the following in cassandra-env.sh , connection refused as well :&lt;br/&gt;
JVM_OPTS=&quot;$JVM_OPTS -Djava.rmi.server.hostname=10.10.30.11&lt;/p&gt;</description>
                <environment>&lt;p&gt;centos 64bit&lt;/p&gt;</environment>
        <key id="12601526">CASSANDRA-4494</key>
            <summary>nodetool can&apos;t work at all !</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thepaul">paul cannon</assignee>
                                    <reporter username="sun74533">sunjian</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Aug 2012 03:28:31 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:30 +0000</updated>
                            <resolved>Mon, 13 Aug 2012 14:29:05 +0000</resolved>
                                        <fixVersion>1.1.4</fixVersion>
                                    <component>Tool/nodetool</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13429071" author="jdilloyd" created="Mon, 6 Aug 2012 10:50:08 +0000"  >&lt;p&gt;Confirmed.&lt;/p&gt;

&lt;p&gt;1.1.2 nodetool works perfectly&lt;br/&gt;
1.1.3 nodetool throws back &apos;connection refused&apos; error&lt;/p&gt;

&lt;p&gt;setting the JVM_OPTS hostname in cassandra-env.sh has no effect.&lt;/p&gt;

&lt;p&gt;connection via &apos;localhost&apos;, server hostname, or server IP address all return the same result.&lt;/p&gt;

&lt;p&gt;connection to remote 1.1.3 host from 1.1.3 host fails.&lt;br/&gt;
Connection to remote 1.1.2 host from 1.1.3 host works fine.&lt;br/&gt;
Connection from 1.1.2 host to remote 1.1.3 host fails.&lt;/p&gt;

&lt;p&gt;restarting the node has no effect.&lt;br/&gt;
replacing nodetool with file from previous version (1.1.2) has no effect.&lt;/p&gt;



&lt;p&gt;CentOS release 5.8 (Final) x86_64&lt;/p&gt;</comment>
                            <comment id="13429137" author="sun74533" created="Mon, 6 Aug 2012 13:26:24 +0000"  >&lt;p&gt;there should be some official tips to tell us is it a bug or not ? if a bug , it should be fixed immediately , or show some resolutions officially . &lt;/p&gt;</comment>
                            <comment id="13429155" author="slebresne" created="Mon, 6 Aug 2012 14:12:14 +0000"  >&lt;p&gt;I don&apos;t have a centos to test, but I do get the same on macosx (but not on ubuntu for instance). More precisely, the error is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;./bin/../conf/cassandra-env.sh: line 180: syntax error near unexpected token `[&apos;
./bin/../conf/cassandra-env.sh: line 180: `startswith () [ &quot;${1#$2}&quot; != &quot;$1&quot; ]&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The reason this breaks JMX is just that the JMX port is not set at that point of the script and the script likely exit on the error. It seems there is some shell incompatibility again.&lt;/p&gt;

&lt;p&gt;While we fix that, a workaround could be to edit the cassandra-env.sh to comment the incriminated line.&lt;/p&gt;</comment>
                            <comment id="13430388" author="pvelas" created="Tue, 7 Aug 2012 16:06:42 +0000"  >&lt;p&gt;Version 1.1.3 don&apos;t listen on port 7199 .&lt;br/&gt;
Previous version 1.1.2 is OK. &lt;/p&gt;</comment>
                            <comment id="13430505" author="jbellis" created="Tue, 7 Aug 2012 18:28:27 +0000"  >&lt;p&gt;&quot;bash bin/nodetool&quot; should work.&lt;/p&gt;</comment>
                            <comment id="13430523" author="jdilloyd" created="Tue, 7 Aug 2012 18:53:36 +0000"  >&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Correction: that doesn&apos;t work either.&lt;/p&gt;</comment>
                            <comment id="13430534" author="pvelas" created="Tue, 7 Aug 2012 19:03:43 +0000"  >&lt;p&gt;When I try to use cassandra-env.sh from 1.1.2 version and restarted cassandra process then I can use nodetool without problems.&lt;br/&gt;
I can now see service sucessfully binded to port 7199.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[root@cass1 conf]# netstat -tunap | grep 7199
tcp        0      0 0.0.0.0:7199                0.0.0.0:*                   LISTEN      10904/java 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13430667" author="thepaul" created="Tue, 7 Aug 2012 22:04:22 +0000"  >&lt;p&gt;Guess POSIX sh doesn&apos;t allow omission of curly braces around a function body of a single command. Dash fails at being a plain posix sh again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13430849" author="sun74533" created="Wed, 8 Aug 2012 03:48:34 +0000"  >&lt;p&gt;edit the cassandra-env.sh on line 180 :&lt;/p&gt;

&lt;p&gt;original : startswith ()  [ &quot;${1#$2}&quot; != &quot;$1&quot; ] &lt;/p&gt;

&lt;p&gt;change to : startswith () { [ &quot;${1#$2}&quot; != &quot;$1&quot; ] ; }&lt;/p&gt;

&lt;p&gt;then restart cassandra , every thing goes OK !&lt;/p&gt;</comment>
                            <comment id="13433171" author="urandom" created="Mon, 13 Aug 2012 14:29:05 +0000"  >&lt;p&gt;Sorry, I committed an (identical )fix to trunk for this on Friday when Jira was down.  That&apos;s been applied to 1.1.  Closing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12539721" name="4494-sh-error.patch.txt" size="409" author="thepaul" created="Tue, 7 Aug 2012 22:04:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thepaul]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256198</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gwfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96686</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>