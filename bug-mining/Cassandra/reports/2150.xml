<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:38:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5472] Timeuuid with CLUSTERING ORDER DESC cannot be used with the dateOf CQL3 function</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5472</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I originally raised this issue in the mailing lists:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.mail-archive.com/user@cassandra.apache.org/msg29185.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/user@cassandra.apache.org/msg29185.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is what I tried:&lt;/p&gt;

&lt;p&gt;cqlsh:location&amp;gt; create table test_y (message_id timeuuid, name text,&lt;br/&gt;
PRIMARY KEY (name,message_id));&lt;br/&gt;
cqlsh:location&amp;gt; insert into test_y (message_id,name) VALUES (now(),&apos;foo&apos;);&lt;br/&gt;
cqlsh:location&amp;gt; insert into test_y (message_id,name) VALUES (now(),&apos;foo&apos;);&lt;br/&gt;
cqlsh:location&amp;gt; insert into test_y (message_id,name) VALUES (now(),&apos;foo&apos;);&lt;br/&gt;
cqlsh:location&amp;gt; insert into test_y (message_id,name) VALUES (now(),&apos;foo&apos;);&lt;br/&gt;
cqlsh:location&amp;gt; select dateOf(message_id) from test_y;&lt;/p&gt;

&lt;p&gt; dateOf(message_id)&lt;br/&gt;
--------------------------&lt;br/&gt;
 2013-04-13 00:33:42-0400&lt;br/&gt;
 2013-04-13 00:33:43-0400&lt;br/&gt;
 2013-04-13 00:33:43-0400&lt;br/&gt;
 2013-04-13 00:33:44-0400&lt;/p&gt;

&lt;p&gt;cqlsh:location&amp;gt; create table test_x (message_id timeuuid, name text,&lt;br/&gt;
PRIMARY KEY (name,message_id)) WITH CLUSTERING ORDER BY (message_id DESC);&lt;br/&gt;
cqlsh:location&amp;gt; insert into test_x (message_id,name) VALUES (now(),&apos;foo&apos;);&lt;br/&gt;
cqlsh:location&amp;gt; insert into test_x (message_id,name) VALUES (now(),&apos;foo&apos;);&lt;br/&gt;
cqlsh:location&amp;gt; insert into test_x (message_id,name) VALUES (now(),&apos;foo&apos;);&lt;br/&gt;
cqlsh:location&amp;gt; insert into test_x (message_id,name) VALUES (now(),&apos;foo&apos;);&lt;br/&gt;
cqlsh:location&amp;gt; insert into test_x (message_id,name) VALUES (now(),&apos;foo&apos;);&lt;br/&gt;
cqlsh:location&amp;gt; select dateOf(message_id) from test_x;&lt;br/&gt;
Bad Request: Type error:&lt;br/&gt;
org.apache.cassandra.cql3.statements.Selection$SimpleSelector@1e7318 cannot&lt;br/&gt;
be passed as argument 0 of function dateof of type timeuuid&lt;/p&gt;

&lt;p&gt;It should be possible to use dateOf on message_id in table test_x&lt;/p&gt;</description>
                <environment></environment>
        <key id="12642541">CASSANDRA-5472</key>
            <summary>Timeuuid with CLUSTERING ORDER DESC cannot be used with the dateOf CQL3 function</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="gcollins">Gareth Collins</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Apr 2013 14:04:51 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:14 +0000</updated>
                            <resolved>Mon, 29 Apr 2013 07:32:37 +0000</resolved>
                                        <fixVersion>1.2.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13640269" author="slebresne" created="Wed, 24 Apr 2013 09:15:35 +0000"  >&lt;p&gt;Attaching patch to fix. The main problem is that the selector was still using the AbstractType to check for type equality, so the ReversedType was messing things up. Fixed to use the CQL3 type instead as in other places. Other that that, the patch also adds toString() methods so that the error looks readable. &lt;/p&gt;</comment>
                            <comment id="13644147" author="iamaleksey" created="Sun, 28 Apr 2013 21:45:31 +0000"  >&lt;p&gt;Makes sense and lgtm. +1&lt;/p&gt;</comment>
                            <comment id="13644323" author="slebresne" created="Mon, 29 Apr 2013 07:32:37 +0000"  >&lt;p&gt;Committed, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12580263" name="5472.txt" size="4016" author="slebresne" created="Wed, 24 Apr 2013 09:15:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jpy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>323300</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>