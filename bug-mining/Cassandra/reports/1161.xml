<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:23:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3206] increase file descriptor limit in deb, rpm packages</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3206</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We can use a lot of file descriptors (one per socket, 5? per sstable).  People hit this regularly on the user list and it will get worse with Leveled compaction, which limits sstable size to a relatively low size (currently 5MB).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12523066">CASSANDRA-3206</key>
            <summary>increase file descriptor limit in deb, rpm packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thepaul">paul cannon</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Sep 2011 16:04:51 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:51 +0000</updated>
                            <resolved>Fri, 23 Sep 2011 21:23:54 +0000</resolved>
                                        <fixVersion>0.8.7</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13104609" author="jbellis" created="Wed, 14 Sep 2011 16:06:53 +0000"  >&lt;p&gt;I&apos;d suggest sizing this based on the number of sstables we need to support a &quot;sane&quot; amount of storage.  1TB?  2?&lt;/p&gt;</comment>
                            <comment id="13104632" author="jbellis" created="Wed, 14 Sep 2011 16:32:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;5? per sstable&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is incorrect &amp;#8211; when using mmap&apos;d I/O, we don&apos;t consume FD-per-sstable (we use one temporarily when setting up the mmap, then release it).  And even in buffered I/O mode we use one FD per sstable being read, per reading thread.  (Which will be much less than one FD per sstable in most cases, although range scans under LevelDB do not yet do a very good job of cutting back the number of SSTables consulted.)&lt;/p&gt;

&lt;p&gt;So it sounds like we mostly need to make sure we have it high enough that we tolerate high numbers of unpooled connections (common in PHP environments, I&apos;m told).&lt;/p&gt;</comment>
                            <comment id="13104648" author="jbellis" created="Wed, 14 Sep 2011 16:42:56 +0000"  >&lt;p&gt;Jeremy pointed out that we can also use a large number of FDs during compaction: either major compaction for tiered strategy, or a L0 compaction under Leveled, can open an effectively arbitrary number of sstables if compaction is behind.&lt;/p&gt;</comment>
                            <comment id="13104649" author="jbellis" created="Wed, 14 Sep 2011 16:43:53 +0000"  >&lt;p&gt;So...  64K?&lt;/p&gt;</comment>
                            <comment id="13104892" author="scode" created="Wed, 14 Sep 2011 21:19:01 +0000"  >&lt;p&gt;My two cents: Just go wild. I really don&apos;t see the need to be conservative. On any modern system that you run Cassandra on, the resources consumed by file descriptors is going to be irrelevant and I don&apos;t see when you&apos;d ever actually want Cassandra to hit the limit, unless it&apos;s &lt;b&gt;completely&lt;/b&gt; run-away and buggy in which case the limit need not be low. Better a very high number so people don&apos;t run into it, than try to shave off.&lt;/p&gt;

&lt;p&gt;64k seems reasonable, I&apos;d be fine with 250k &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13104966" author="jbellis" created="Wed, 14 Sep 2011 22:49:22 +0000"  >&lt;p&gt;SGTM.&lt;/p&gt;</comment>
                            <comment id="13105082" author="thepaul" created="Thu, 15 Sep 2011 02:59:48 +0000"  >&lt;p&gt;I concur. I&apos;ll go with 100k unless someone has a good argument for having it be higher.&lt;/p&gt;</comment>
                            <comment id="13113779" author="brandon.williams" created="Fri, 23 Sep 2011 21:23:54 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="13113816" author="hudson" created="Fri, 23 Sep 2011 22:47:32 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #339 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra-0.8/339/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra-0.8/339/&lt;/a&gt;)&lt;br/&gt;
    Increase FD limit to 100k in packaging.&lt;br/&gt;
Patch by Paul Cannon, reviewed by brandonwilliams for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3206&quot; title=&quot;increase file descriptor limit in deb, rpm packages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3206&quot;&gt;&lt;del&gt;CASSANDRA-3206&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;brandonwilliams : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1175027&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1175027&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/debian/cassandra.conf&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/debian/init&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/redhat/cassandra.conf&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496328" name="3206.patch.txt" size="1967" author="thepaul" created="Fri, 23 Sep 2011 21:13:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thepaul]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4021</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gh3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94199</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>