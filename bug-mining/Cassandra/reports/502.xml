<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:17:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1428] Rejecting keyspace creation when RF &gt; N is incorrect</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1428</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The behavior introduced in this patch &lt;a href=&quot;http://www.mail-archive.com/commits@cassandra.apache.org/msg05913.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/commits@cassandra.apache.org/msg05913.html&lt;/a&gt; is incorrect.&lt;/p&gt;

&lt;p&gt;Disallowing keyspace creation when RF &amp;gt; N is semantically incorrect and makes both scaling a cluster up and down more difficult than it should be.  This is compounded by the current lack of any API methods to change the replication factor.  Most dynamo style systems allow RF to be set &amp;gt; N for smaller clusters.  The cluster will behave as if RF = N until enough nodes are added such that RF &amp;lt; N.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12472428">CASSANDRA-1428</key>
            <summary>Rejecting keyspace creation when RF &gt; N is incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="moonpolysoft">Cliff Moon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Aug 2010 23:29:06 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:18 +0000</updated>
                            <resolved>Wed, 6 Oct 2010 19:36:13 +0000</resolved>
                                        <fixVersion>0.7 beta 3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12902430" author="gdusbabek" created="Wed, 25 Aug 2010 13:08:28 +0000"  >&lt;p&gt;&amp;gt;Most dynamo style systems allow RF to be set &amp;gt; N for smaller clusters.&lt;br/&gt;
Implementing this would add substantial complexity to the replication and bootstrap code.  It&apos;s a trade-off not currently worth the flexibility imo.&lt;/p&gt;

&lt;p&gt;I am in favor of allowing the creation of keyspaces with RF &amp;gt; N though (letting high CL reads/writes fail).  This worked fine until r959726 changed RackUnawareStrategy (now SimpleStrategy) to throw IllegalStateException when N &amp;lt; RF.  I argued (unsuccessfully) that the throw should happen elsewhere, or at least it shouldn&apos;t care when there was no data to bootstrap.&lt;/p&gt;

&lt;p&gt;fwiw, modifying the replication factor (and other CF and KS properties) is on its way.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1285&quot; title=&quot;Have a way to increase the replication factor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1285&quot;&gt;&lt;del&gt;CASSANDRA-1285&lt;/del&gt;&lt;/a&gt;.  It will be ready when 0.7 ships.&lt;/p&gt;</comment>
                            <comment id="12913038" author="jbellis" created="Tue, 21 Sep 2010 15:41:48 +0000"  >&lt;p&gt;Wait, how is &quot;allowing the creation of keyspaces with RF &amp;gt; N&quot; that you are in favor of different from &quot;allow&lt;span class=&quot;error&quot;&gt;&amp;#91;ing&amp;#93;&lt;/span&gt; RF to be set &amp;gt; N&quot; that you are not?&lt;/p&gt;</comment>
                            <comment id="12913039" author="jbellis" created="Tue, 21 Sep 2010 15:42:46 +0000"  >&lt;p&gt;incidently, in r999469 I changed this from using live node count as N to using total known cluster members as N.&lt;/p&gt;</comment>
                            <comment id="12913053" author="gdusbabek" created="Tue, 21 Sep 2010 16:04:32 +0000"  >&lt;p&gt;I interpreted &quot;RF to be set &amp;gt; N for smaller clusters&quot; as meaning, &quot;let high-CL writes succeed even though we don&apos;t have enough nodes to support the RF when N is small.&quot;  I don&apos;t think we should allow that.&lt;/p&gt;

&lt;p&gt;From an syspop pov, I think we should allow the creation of keyspaces where RF &amp;gt; N.  There is no harm in this for new keyspaces where there is nothing to stream.&lt;/p&gt;</comment>
                            <comment id="12913061" author="jbellis" created="Tue, 21 Sep 2010 16:28:05 +0000"  >&lt;p&gt;I see, you want to allow creating the KS, but not writing to it.  (Is this what you want too, Cliff?)&lt;/p&gt;

&lt;p&gt;My reasoning for wanting to prevent creation was, if we&apos;re not going to allow writing to it, better to fail early rather than surprise people later on.  But I am okay with taking that check out if the cure is worse than the disease.&lt;/p&gt;

&lt;p&gt;I definitely think the semantics of actually trying to allow writes in a RF &amp;gt; N situation are unclear and would rather avoid that.&lt;/p&gt;</comment>
                            <comment id="12913069" author="moonpolysoft" created="Tue, 21 Sep 2010 16:36:27 +0000"  >&lt;p&gt;This ticket was specifically in reference to creation of a keyspace with RF &amp;gt; N.  Since all of the schema stuff now is the responsibility of an api client instead of a config, it would require clients to make different schemas say if they were in a testing environment with fewer machines than production.&lt;/p&gt;
</comment>
                            <comment id="12916348" author="jbellis" created="Thu, 30 Sep 2010 02:24:58 +0000"  >&lt;p&gt;So we all agree that creation is fine, so let&apos;s allow that.  (Less sure that Cliff agrees that we should reject writes that can&apos;t satisfy the RF, but I won&apos;t argue that point unless there&apos;s actually something to disagree about. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12917960" author="gdusbabek" created="Tue, 5 Oct 2010 12:56:34 +0000"  >&lt;p&gt;How about a system test that verifies that a keyspace with RF &amp;gt; N can be created?  With this patch SS.loadSchemaFromYAML() doesn&apos;t work when RF &amp;gt; N.&lt;/p&gt;</comment>
                            <comment id="12918638" author="jbellis" created="Wed, 6 Oct 2010 19:36:13 +0000"  >&lt;p&gt;added test and fixed loadSchemaFromYAML which was doing a separate check.&lt;/p&gt;</comment>
                            <comment id="12920197" author="hudson" created="Tue, 12 Oct 2010 14:03:55 +0000"  >&lt;p&gt;Integrated in Cassandra #563 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra/563/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra/563/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12470543">CASSANDRA-1343</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12456378" name="1428.txt" size="7303" author="jbellis" created="Tue, 5 Oct 2010 11:15:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g4zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>gdusbabek</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[gdusbabek]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>