<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:46:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7305] CQL3, Static columns not returning rows if values are not set</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7305</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Just a quick note on static columns, if you create some cql rows using clustered columns and don&apos;t provide a value for a static column, then selecting the row key with the (null) static column won&apos;t return any rows.&lt;/p&gt;

&lt;p&gt;create table statictest( a int, b text static, c text, PRIMARY KEY (a, c));&lt;br/&gt;
insert into statictest (a, c) values (1, &apos;test&apos;);&lt;br/&gt;
select a,b from statictest;&lt;/p&gt;

&lt;p&gt;(0 rows)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12716770">CASSANDRA-7305</key>
            <summary>CQL3, Static columns not returning rows if values are not set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="patcho2005">Patrick Callaghan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 May 2014 10:33:18 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:44 +0000</updated>
                            <resolved>Wed, 25 Jun 2014 14:07:23 +0000</resolved>
                                        <fixVersion>2.0.9</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14009853" author="slebresne" created="Tue, 27 May 2014 16:19:34 +0000"  >&lt;p&gt;I agree that this is not a very consistent result. It stems from the fact that for static columns we said that when only the partition key and static columns where selected, the user probably didn&apos;t meant to query the full partition, and so we only query the static part of the partition, hence the result above.&lt;/p&gt;

&lt;p&gt;In hindsight, I would agree that this is a mistake. We should make such query scan the whole partition the same way a selection of just the partition key still scan the full partition (and return as many results as there is rows).  And we should extend DISTINCT so user can still query the static part efficiently.&lt;/p&gt;

&lt;p&gt;This is going to potentially break current users of static columns however (but they are new enough that it&apos;s probably fair game to fix early mistake rather than carry them down indefinitely).&lt;/p&gt;</comment>
                            <comment id="14009864" author="iamaleksey" created="Tue, 27 May 2014 16:30:15 +0000"  >&lt;p&gt;I think it&apos;s trickier than that. A similar query (one static, one regular column) SELECT b, c FROM statictest; - actually does return the correct result.&lt;/p&gt;</comment>
                            <comment id="14010885" author="slebresne" created="Wed, 28 May 2014 07:38:47 +0000"  >&lt;p&gt;I&apos;m confused, what is made trickier by the fact that queries with regular columns work as expected?&lt;/p&gt;</comment>
                            <comment id="14010956" author="iamaleksey" created="Wed, 28 May 2014 09:36:13 +0000"  >&lt;p&gt;Never mind, sorry. Didn&apos;t notice &apos;a&apos; being the partition key, somehow.&lt;/p&gt;</comment>
                            <comment id="14037526" author="slebresne" created="Thu, 19 Jun 2014 16:59:53 +0000"  >&lt;p&gt;Attaching patch that implements what I discuss above: we don&apos;t special case queries that only select static columns anymore (as that&apos;s arguably inconsistent and unexpected), but we allow static columns with &lt;tt&gt;DISTINCT&lt;/tt&gt; (and in that case only the very beginning of the partition is queried).&lt;/p&gt;

&lt;p&gt;There is also some dtests for this &lt;a href=&quot;https://github.com/pcmanus/cassandra-dtest/commit/d56f319dea7dedd791faecd1dcc2c64840f30e9c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14042493" author="thobbs" created="Tue, 24 Jun 2014 18:37:20 +0000"  >&lt;p&gt;A few minor comments:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A space is missing in this error message: &lt;tt&gt;&quot;SELECT DISTINCT queries must only request partition key columns and/or static columns(not %s)&quot;&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;The &lt;tt&gt;select_distinct_test&lt;/tt&gt; dtest method checks error messages that this patch changes, so it now fails&lt;/li&gt;
	&lt;li&gt;Make sure to update NEWS.txt describing the behavioral changes for existing static columns users&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Other than that, +1&lt;/p&gt;</comment>
                            <comment id="14043485" author="slebresne" created="Wed, 25 Jun 2014 14:07:23 +0000"  >&lt;p&gt;Committed (with comments above fixed). Thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12715662">CASSANDRA-7277</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12723790">CASSANDRA-7449</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651446" name="7305.txt" size="8149" author="slebresne" created="Thu, 19 Jun 2014 16:59:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394978</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w07r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395113</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>