<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:52:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8992] CommitLogTest hangs intermittently</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8992</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;CommitLogTest hangs about 20% of the time in trunk. I haven&apos;t seen this happen in 2.1, yet, but will have to loop over it to be sure.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;21:26:15     [junit] Testsuite: org.apache.cassandra.db.CommitLogTest
21:46:15 Build timed out (after 20 minutes). Marking the build as aborted.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I was able to repro locally, looping over the test and have attached the system.log from that repro.&lt;/p&gt;</description>
                <environment>&lt;p&gt;trunk HEAD (commit 1279009)&lt;/p&gt;</environment>
        <key id="12783121">CASSANDRA-8992</key>
            <summary>CommitLogTest hangs intermittently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blambov">Branimir Lambov</assignee>
                                    <reporter username="mshuler">Michael Shuler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Mar 2015 05:01:27 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:17 +0000</updated>
                            <resolved>Fri, 3 Apr 2015 21:59:38 +0000</resolved>
                                        <fixVersion>2.2.0 beta 1</fixVersion>
                                    <component>Legacy/Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14368536" author="mshuler" created="Thu, 19 Mar 2015 05:24:15 +0000"  >&lt;p&gt;2.1 HEAD looks OK, so I&apos;ll try to bisect, but since it hangs instead of fails, it could be tedious.&lt;/p&gt;</comment>
                            <comment id="14368551" author="mshuler" created="Thu, 19 Mar 2015 05:47:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7713&quot; title=&quot;CommitLogTest failure causes cascading unit test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7713&quot;&gt;&lt;del&gt;CASSANDRA-7713&lt;/del&gt;&lt;/a&gt; may make bisecting very difficult..&lt;/p&gt;</comment>
                            <comment id="14368564" author="mshuler" created="Thu, 19 Mar 2015 06:01:19 +0000"  >&lt;p&gt;I tried starting at commit dd84a29, which was the trunk merge of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7713&quot; title=&quot;CommitLogTest failure causes cascading unit test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7713&quot;&gt;&lt;del&gt;CASSANDRA-7713&lt;/del&gt;&lt;/a&gt;, and looping over that commit, the test hung in the same manner on pass #8 and the end of the system.log looks about the same as the attached one.  I think we have a test problem.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;((dd84a29...))mshuler@hana:~/git/cassandra$ tail -f build/test/logs/system.log 
INFO  [main] 2015-03-19 00:54:38,428 Enqueuing flush of local: 200 (0%) on-heap, 0 (0%) off-heap
DEBUG [main] 2015-03-19 00:54:38,429 scheduling flush in 3600000 ms
INFO  [StorageServiceShutdownHook] 2015-03-19 00:55:33,468 Announcing shutdown
INFO  [StorageServiceShutdownHook] 2015-03-19 00:55:35,469 Waiting for messaging service to quiesce
DEBUG [StorageServiceShutdownHook] 2015-03-19 00:55:35,470 Closing accept() thread
DEBUG [ACCEPT-/127.0.0.1] 2015-03-19 00:55:35,470 Asynchronous close seen by server thread
INFO  [ACCEPT-/127.0.0.1] 2015-03-19 00:55:35,471 MessagingService has terminated the accept() thread
DEBUG [BatchlogTasks:1] 2015-03-19 00:55:36,650 Started replayAllFailedBatches
DEBUG [ScheduledTasks:1] 2015-03-19 00:55:37,639 Disseminating load info ...
DEBUG [ScheduledTasks:1] 2015-03-19 00:56:37,640 Disseminating load info ...
DEBUG [ScheduledTasks:1] 2015-03-19 00:57:37,640 Disseminating load info ...
DEBUG [ScheduledTasks:1] 2015-03-19 00:58:37,641 Disseminating load info ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14386911" author="blambov" created="Mon, 30 Mar 2015 16:06:46 +0000"  >&lt;p&gt;Patch up for review &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blambov:8992-commitlogtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The storage service shutdown hook will hang indefinitely if flushes cannot complete for whatever reason. Test timeout does not help as it the hook (at least on Linux) is being run post-timeout.&lt;/p&gt;

&lt;p&gt;I found two different reasons for this happening in CommitLogTest:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;compaction needing commit log while it is being reset unsafely&lt;/li&gt;
	&lt;li&gt;commit failure policy tests followed by later truncate test&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The patch fixes the two problems above, the test appears to have stopped hanging locally for me. I&apos;m not sure if it is a good idea to introduce a timeout on the flushes in the shutdown hook, so I left that unchanged.&lt;/p&gt;</comment>
                            <comment id="14387001" author="jbellis" created="Mon, 30 Mar 2015 17:10:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt; to review&lt;/p&gt;</comment>
                            <comment id="14395144" author="benedict" created="Fri, 3 Apr 2015 21:59:38 +0000"  >&lt;p&gt;LGTM; committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12705510" name="system.log" size="2590914" author="mshuler" created="Thu, 19 Mar 2015 05:01:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blambov]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26yk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>benedict</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[benedict]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>