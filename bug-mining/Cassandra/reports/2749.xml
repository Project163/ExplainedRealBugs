<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:44:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7052] Query on compact storage with limit returns extra rows</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7052</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I tested this on Cassandra 2.0.6 and 2.0.3 and got the same result on both:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; create KEYSPACE &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt; WITH replication = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt;: 1};
cqlsh&amp;gt; USE &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;;
cqlsh:test&amp;gt; CREATE COLUMNFAMILY &lt;span class=&quot;code-quote&quot;&gt;&quot;VerifyPagedColumnQueryStartAndEnd&quot;&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;keyId&quot;&lt;/span&gt; text, &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt; text, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt; text, PRIMARY KEY (&lt;span class=&quot;code-quote&quot;&gt;&quot;keyId&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt;)) WITH COMPACT STORAGE;
cqlsh:test&amp;gt; INSERT INTO &lt;span class=&quot;code-quote&quot;&gt;&quot;VerifyPagedColumnQueryStartAndEnd&quot;&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;keyId&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;) VALUES ( &lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt; )  ;
cqlsh:test&amp;gt; INSERT INTO &lt;span class=&quot;code-quote&quot;&gt;&quot;VerifyPagedColumnQueryStartAndEnd&quot;&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;keyId&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;) VALUES ( &lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt; )  ;
cqlsh:test&amp;gt; INSERT INTO &lt;span class=&quot;code-quote&quot;&gt;&quot;VerifyPagedColumnQueryStartAndEnd&quot;&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;keyId&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;) VALUES ( &lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt; )  ;
cqlsh:test&amp;gt; INSERT INTO &lt;span class=&quot;code-quote&quot;&gt;&quot;VerifyPagedColumnQueryStartAndEnd&quot;&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;keyId&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;) VALUES ( &lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;d&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt; )  ;
cqlsh:test&amp;gt; INSERT INTO &lt;span class=&quot;code-quote&quot;&gt;&quot;VerifyPagedColumnQueryStartAndEnd&quot;&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;keyId&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;) VALUES ( &lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;e&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt; )  ;
cqlsh:test&amp;gt; SELECT * FROM &lt;span class=&quot;code-quote&quot;&gt;&quot;VerifyPagedColumnQueryStartAndEnd&quot;&lt;/span&gt; WHERE &lt;span class=&quot;code-quote&quot;&gt;&quot;keyId&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt; AND &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt; &amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;&apos; AND &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt; &amp;lt;= &apos;&lt;/span&gt;e&apos; LIMIT 2;

 keyId | columnName | value
-------+------------+-------
   key |          a |     1
   key |          b |     1
   key |          c |     1

(3 rows)

cqlsh:test&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12709145">CASSANDRA-7052</key>
            <summary>Query on compact storage with limit returns extra rows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="freemanstu">Stuart Freeman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Apr 2014 20:39:53 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:48 +0000</updated>
                            <resolved>Mon, 21 Apr 2014 10:07:38 +0000</resolved>
                                        <fixVersion>2.0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13973993" author="mrvisser" created="Fri, 18 Apr 2014 11:36:21 +0000"  >&lt;p&gt;This doesn&apos;t appear to be an issue on a 1.2.11-SNAPSHOT version of Cassandra I have installed currently:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh:test&amp;gt; SELECT * FROM &lt;span class=&quot;code-quote&quot;&gt;&quot;VerifyPagedColumnQueryStartAndEnd&quot;&lt;/span&gt; WHERE &lt;span class=&quot;code-quote&quot;&gt;&quot;keyId&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt; AND &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt; &amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;&apos; AND &lt;span class=&quot;code-quote&quot;&gt;&quot;columnName&quot;&lt;/span&gt; &amp;lt;= &apos;&lt;/span&gt;e&apos; LIMIT 2;

 keyId | columnName | value
-------+------------+-------
   key |          a |     1
   key |          b |     1

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13974044" author="slebresne" created="Fri, 18 Apr 2014 13:11:57 +0000"  >&lt;p&gt;We do (sometimes) asks for one more result than the user LIMIT with compact tables to handle exclusive bounds (since without a CompositeType underneath, all we support is inclusive bounds internally) and we&apos;re properly adjusting post-query on 2.0. Attaching fix (and pushed the repro test above to dtests).&lt;/p&gt;</comment>
                            <comment id="13974199" author="thobbs" created="Fri, 18 Apr 2014 16:15:25 +0000"  >&lt;p&gt;The patch looks good.  Can you add test cases for range and secondary index queries?  Judging by the patch, those also seem to be affected.&lt;/p&gt;</comment>
                            <comment id="13975508" author="slebresne" created="Mon, 21 Apr 2014 10:07:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can you add test cases for range and secondary index queries?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;2ndary index are not affected since the only kind of table concerned are &quot;wide&quot; compact tables and those can&apos;t have index. &quot;Range&quot; queries are in fact broken, but that has always be the case and will probably require much more work than this to fix. I&apos;ve created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7059&quot; title=&quot;Range query with strict bound on clustering column can return less results than required for compact tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7059&quot;&gt;&lt;del&gt;CASSANDRA-7059&lt;/del&gt;&lt;/a&gt; for that.&lt;/p&gt;

&lt;p&gt;So regarding this issue, I committed the attached patch since it fixes the regression from 1.2. I did slightly updated the dtest to include &apos;IN&apos; queries though.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12640813" name="7052.txt" size="6708" author="slebresne" created="Fri, 18 Apr 2014 13:11:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387468</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uqwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387730</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>