<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:41:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4925] Failure Detector should log or ignore sudden time change to the past</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4925</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;If a machine goes back in time all of a sudden because of a problem, Gossip will insert a negative interArrivalTime. &lt;br/&gt;
This will decrease the mean value and can cause this machine to mark other nodes as down and then mark them up as time passed. &lt;br/&gt;
But we should log such occurrences.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12615031">CASSANDRA-4925</key>
            <summary>Failure Detector should log or ignore sudden time change to the past</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kohlisankalp">Sankalp Kohli</assignee>
                                    <reporter username="kohlisankalp">Sankalp Kohli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Nov 2012 22:17:07 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:23 +0000</updated>
                            <resolved>Fri, 18 Oct 2013 22:30:50 +0000</resolved>
                                        <fixVersion>2.0.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13611997" author="jbellis" created="Sun, 24 Mar 2013 05:46:30 +0000"  >&lt;p&gt;Can we replace this with nanoTime measurements?  (nanoTime is guaranteed to be monotonically increasing, given appropriate OS support.)&lt;/p&gt;</comment>
                            <comment id="13773886" author="kohlisankalp" created="Sat, 21 Sep 2013 20:11:22 +0000"  >&lt;p&gt;Yes changing to nanotime will be a good improvement. &lt;/p&gt;</comment>
                            <comment id="13773915" author="kohlisankalp" created="Sat, 21 Sep 2013 22:08:45 +0000"  >&lt;p&gt;@Jonathan&lt;br/&gt;
Also why is BoundedStatsDeque has all values in double. Why it can&apos;t be Long? &lt;/p&gt;</comment>
                            <comment id="13788866" author="kohlisankalp" created="Tue, 8 Oct 2013 02:59:46 +0000"  >&lt;p&gt;Changed Double to Long in BoundedStatsDeque. Changed the unit test for it to take long instead of double.&lt;br/&gt;
Converted FD to use nano time. Also modified the test to use nano time. In this test I am comparing the values between passing millis and nano and checking whether the phi is the same for both. &lt;/p&gt;</comment>
                            <comment id="13788869" author="jbellis" created="Tue, 8 Oct 2013 03:07:35 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;What about this? Looks like we&apos;re mixing millis + nanos.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tLast != 0L)
        {
            interArrivalTime = (value - tLast);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
        {
            interArrivalTime = Gossiper.intervalInMillis / 2;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13788870" author="brandon.williams" created="Tue, 8 Oct 2013 03:09:14 +0000"  >&lt;p&gt;Am I missing where we actually log that a negative value was received?  I&apos;d be fine with a WARN since this should only happen rarely unless your clock is seriously crazy, but either way it&apos;s something you definitely want to know.&lt;/p&gt;</comment>
                            <comment id="13789412" author="kohlisankalp" created="Tue, 8 Oct 2013 17:21:46 +0000"  >&lt;p&gt;Fixed the Gossip interval and updated the patch&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;  If I am not wrong, we are now using nano which is a counter and difference of a counter(higher - lower) will always be positive even with overflow.&lt;/p&gt;</comment>
                            <comment id="13790340" author="jbellis" created="Wed, 9 Oct 2013 13:28:37 +0000"  >&lt;p&gt;Is this the right patch?  I still see &lt;tt&gt;Gossiper.intervalInMillis&lt;/tt&gt; being used.&lt;/p&gt;</comment>
                            <comment id="13790631" author="kohlisankalp" created="Wed, 9 Oct 2013 17:18:46 +0000"  >&lt;p&gt;Yes now I am doing (Gossiper.intervalInMillis * MILLI_TO_NANO) &lt;/p&gt;</comment>
                            <comment id="13790649" author="jbellis" created="Wed, 9 Oct 2013 17:44:10 +0000"  >&lt;p&gt;Ah, my jira client was confused by re-using the same patch name.  I see it now.&lt;/p&gt;

&lt;p&gt;Why double up the ArrivalWindowTest?&lt;/p&gt;</comment>
                            <comment id="13791182" author="kohlisankalp" created="Thu, 10 Oct 2013 04:27:51 +0000"  >&lt;p&gt;I wanted to check whether passing  millis and nano gives out the same results. I can remove the millis part if you want. &lt;/p&gt;</comment>
                            <comment id="13797478" author="kohlisankalp" created="Thu, 17 Oct 2013 00:36:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; Should I make the test single? &lt;/p&gt;</comment>
                            <comment id="13797726" author="jbellis" created="Thu, 17 Oct 2013 08:59:53 +0000"  >&lt;p&gt;I think that would probably make more sense.&lt;/p&gt;</comment>
                            <comment id="13798470" author="kohlisankalp" created="Thu, 17 Oct 2013 21:43:31 +0000"  >&lt;p&gt;Changed the test&lt;/p&gt;</comment>
                            <comment id="13798513" author="jbellis" created="Thu, 17 Oct 2013 22:11:19 +0000"  >&lt;p&gt;Hmm, I get&lt;/p&gt;

&lt;p&gt;patch: **** malformed patch at line 164: diff --git a/test/unit/org/apache/cassandra/utils/BoundedStatsDequeTest.java b/test/unit/org/apache/cassandra/utils/BoundedStatsDequeTest.java&lt;/p&gt;</comment>
                            <comment id="13798593" author="kohlisankalp" created="Thu, 17 Oct 2013 23:26:21 +0000"  >&lt;p&gt;Another patch&lt;/p&gt;</comment>
                            <comment id="13799603" author="jbellis" created="Fri, 18 Oct 2013 22:30:50 +0000"  >&lt;p&gt;committed; thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12609029" name="trunk-4925-v1.patch" size="7395" author="kohlisankalp" created="Thu, 17 Oct 2013 21:43:31 +0000"/>
                            <attachment id="12609057" name="trunk-4925-v2.patch" size="7397" author="kohlisankalp" created="Thu, 17 Oct 2013 23:26:21 +0000"/>
                            <attachment id="12607391" name="trunk-4925.patch" size="7869" author="kohlisankalp" created="Tue, 8 Oct 2013 17:21:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[kohlisankalp]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255583</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fslz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>