<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:45:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7354] Divide by zero in hinted handoff</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7354</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Got this on a node shortly after upgrading it to 2.0.8.  The other node went down and up (triggering the hinted handoff) because it was being migrated from 2.0.7 to 2.0.8.&lt;/p&gt;

&lt;p&gt;INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;HintedHandoff:1&amp;#93;&lt;/span&gt; 2014-06-05 07:26:35,447 HintedHandOffManager.java (line 344) Started hinted handoff for host: b12e6d71-e189-4fe8-b00a-8ff2cc9848fd wit&lt;br/&gt;
h IP: /192.168.60.137&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;HintedHandoff:1&amp;#93;&lt;/span&gt; 2014-06-05 07:26:35,448 CassandraDaemon.java (line 199) Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;HintedHandoff:1,1,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.ArithmeticException: / by zero&lt;br/&gt;
        at org.apache.cassandra.db.HintedHandOffManager.calculatePageSize(HintedHandOffManager.java:493)&lt;br/&gt;
        at org.apache.cassandra.db.HintedHandOffManager.doDeliverHintsToEndpoint(HintedHandOffManager.java:351)&lt;br/&gt;
        at org.apache.cassandra.db.HintedHandOffManager.deliverHintsToEndpoint(HintedHandOffManager.java:330)&lt;br/&gt;
        at org.apache.cassandra.db.HintedHandOffManager.access$300(HintedHandOffManager.java:91)&lt;br/&gt;
        at org.apache.cassandra.db.HintedHandOffManager$5.run(HintedHandOffManager.java:547)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:744)&lt;/p&gt;</description>
                <environment>&lt;p&gt;C* 2.0.8, x86-64 ubuntu 12.04&lt;/p&gt;</environment>
        <key id="12718543">CASSANDRA-7354</key>
            <summary>Divide by zero in hinted handoff</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="baldrick">Duncan Sands</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Jun 2014 05:59:44 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:43 +0000</updated>
                            <resolved>Thu, 5 Jun 2014 22:07:20 +0000</resolved>
                                        <fixVersion>2.1 rc2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14018607" author="iamaleksey" created="Thu, 5 Jun 2014 09:05:17 +0000"  >&lt;p&gt;Apparently it&apos;s possible for meanRowSize to be 0 when meanColumnCount is not, even though both only consider SSTables, and not the memtables, in a rare race condition. Attaching a simple fix.&lt;/p&gt;</comment>
                            <comment id="14018852" author="jbellis" created="Thu, 5 Jun 2014 15:16:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;Apparently it&apos;s possible for meanRowSize to be 0 when meanColumnCount is not&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How does that work?&lt;/p&gt;</comment>
                            <comment id="14018877" author="iamaleksey" created="Thu, 5 Jun 2014 15:34:11 +0000"  >&lt;p&gt;Hypothetically, it would be so if a compaction ends w/ no sstables outputted (possible w/ hints&apos; gc gs = 0) between getMeanColumns() and getMeanRowSize() calls. Now, I can&apos;t say that this is in fact what&apos;s happening, but it is theoretically possible, and thus should be guarded against.&lt;/p&gt;

&lt;p&gt;The metrics code looks legit for both gauges, so I really don&apos;t know what else could be behind it. The patch fixes the issue.&lt;/p&gt;</comment>
                            <comment id="14018881" author="jbellis" created="Thu, 5 Jun 2014 15:44:38 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14019343" author="iamaleksey" created="Thu, 5 Jun 2014 22:07:20 +0000"  >&lt;p&gt;Committed a (slightly) different version in &lt;a href=&quot;https://github.com/apache/cassandra/commit/1e49abaf9cbc0833146f30c32ab574cd892aa0a4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/1e49abaf9cbc0833146f30c32ab574cd892aa0a4&lt;/a&gt; to guard against another potential division by zero further down the road.&lt;/p&gt;

&lt;p&gt;Messed up the CHANGES title (NPE has nothing to do with it, but reflexes do). Will ninja CHANGES later.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12723967">CASSANDRA-7456</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12648450" name="7354.txt" size="1112" author="aleksey" created="Thu, 5 Jun 2014 08:56:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396742</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wayv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396861</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>