<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:03:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12002] SSTable tools mishandling LocalPartitioner</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12002</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The sstabledump and sstablemetadata tools use the FBUtilities.newPartitioner from the name of the partitioner in the validation component. This fails on sstables that are created with things that use the LocalPartitioner (secondary indexes, and the system.batches table). The sstabledump had a check for secondary indexes, but still failed for the system table it was failing for all in the metadata tool.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12978558">CASSANDRA-12002</key>
            <summary>SSTable tools mishandling LocalPartitioner</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cnlwsu">Chris Lohfink</assignee>
                                    <reporter username="cnlwsu">Chris Lohfink</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jun 2016 02:32:40 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:29 +0000</updated>
                            <resolved>Mon, 20 Jun 2016 11:28:55 +0000</resolved>
                                        <fixVersion>3.8</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15333375" author="stefania" created="Thu, 16 Jun 2016 08:46:11 +0000"  >&lt;p&gt;Thanks for the trunk patch. I do agree on committing only to trunk, since this is a minor bug and sstablemetadata is using the partitioner only since &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7159&quot; title=&quot;sstablemetadata command should print some more stuff&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7159&quot;&gt;&lt;del&gt;CASSANDRA-7159&lt;/del&gt;&lt;/a&gt;, which was committed in 3.6, whilst sstabledump already handles secondary indexes as you mention.&lt;/p&gt;

&lt;p&gt;This worried me a little bit: &lt;tt&gt;if (validationMetadata.partitioner.endsWith(&quot;LocalPartitioner&quot;))&lt;/tt&gt;, although &lt;em&gt;extremely&lt;/em&gt; unlikely to be a problem, I prefer to use the fully qualified class name, see this commit &lt;a href=&quot;https://github.com/stef1927/cassandra/commit/5e5e3c818adea83b702e52ee6653c2a54c7dbef4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, could you cross review it?&lt;/p&gt;

&lt;p&gt;I&apos;ve started CI tests for trunk here:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/stef1927/cassandra/commits/12002&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-12002-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-12002-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;It would be nice to have a dtest or unit test to exercise this code, how did you bump into this issue?&lt;/p&gt;</comment>
                            <comment id="15334010" author="cnlwsu" created="Thu, 16 Jun 2016 15:38:46 +0000"  >&lt;p&gt;Was reported on the user list when someone tried to look at sstables of system.batches.&lt;/p&gt;

&lt;p&gt;+1 to the changes. I can add some unit tests.&lt;/p&gt;</comment>
                            <comment id="15335622" author="stefania" created="Fri, 17 Jun 2016 07:52:40 +0000"  >&lt;p&gt;Thanks for the cross review.&lt;/p&gt;

&lt;p&gt;The Jenkins results are good, all failures also happen on trunk and are clearly unrelated to this change.&lt;/p&gt;

&lt;p&gt;+1, we can commit this as soon as some unit tests are available. For the lack of dtests I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12020&quot; title=&quot;sstablemetadata and sstabledump need better testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12020&quot;&gt;CASSANDRA-12020&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15339195" author="stefania" created="Mon, 20 Jun 2016 09:08:38 +0000"  >&lt;p&gt;Thanks for the &lt;a href=&quot;https://github.com/apache/cassandra/commit/ea38b32e66718f3d7ec5b4615ce07690589e8b9a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unit tests&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;ve rebased, squashed and restarted &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-12002-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt; to make sure the two new utests run on Jenkins as well. I&apos;ve modified &lt;tt&gt;testNewPartitionerLocalPartitioner&lt;/tt&gt; &lt;a href=&quot;https://github.com/stef1927/cassandra/commit/e116246b3b3724ce48eb695ae16fe03dbc189dde#diff-90ed12eaeceea71a715f4fe5d9b85c6eR148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;slightly&lt;/a&gt; to test the fully qualified class name as well.&lt;/p&gt;

&lt;p&gt;I will commit once the results on Jenkins are fine, full patch is &lt;a href=&quot;https://github.com/stef1927/cassandra/commit/e116246b3b3724ce48eb695ae16fe03dbc189dde&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15339366" author="stefania" created="Mon, 20 Jun 2016 11:28:38 +0000"  >&lt;p&gt;Committed to trunk as 0e9d6bfe1a182b5ce12e7772ade3433b440aa2c6.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12980117">CASSANDRA-12020</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12810181" name="CASSADNRA-12002.txt" size="5481" author="cnlwsu" created="Tue, 14 Jun 2016 02:36:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[cnlwsu]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zeyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stefania</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>