<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:52:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9148] Issue when modifying UDT</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9148</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I&apos;m trying out the user defined types but ran into some issues when adding a column to an existing type.&lt;/p&gt;

&lt;p&gt;Unfortunately I had to scrap the entire cluster so I cannot access it any more.&lt;/p&gt;

&lt;p&gt;After creating the UDT i adde two tables using it. 1 was just using frozen&amp;lt;type&amp;gt;. The other was using both frozen&amp;lt;type&amp;gt; frozen map&amp;lt;String, type&amp;gt;.&lt;/p&gt;

&lt;p&gt;Then I realized I needed to add a new field to the user type. Then when I tried to put to any of the two tables (setting all fields to the UDT in the datastax java driver) I got this error message that I could not find anywhere else but in the cassandra code:&lt;/p&gt;

&lt;p&gt;com.datastax.driver.core.exceptions.InvalidQueryException: Invalid remaining data after end of UDT value&lt;/p&gt;

&lt;p&gt;I had to scrap my keyspace in order to be able to use it again. Could not even drop one of the tables.&lt;/p&gt;

&lt;p&gt;I know that they are frozen so we cannot modify the value of individual fields once they are written but we must be able to modify the schema right?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12819696">CASSANDRA-9148</key>
            <summary>Issue when modifying UDT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jjirsa">Jeff Jirsa</assignee>
                                    <reporter username="OskarKjellin">Oskar Kjellin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Apr 2015 14:39:24 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:15 +0000</updated>
                            <resolved>Tue, 21 Apr 2015 16:22:40 +0000</resolved>
                                        <fixVersion>2.1.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14487464" author="philipthompson" created="Thu, 9 Apr 2015 14:56:33 +0000"  >&lt;p&gt;What Cassandra version were you using? Can you paste the full schemas of the types and tables you were using?&lt;/p&gt;

&lt;p&gt;How did you try to alter the type schema? What exact insert query threw the InvalidQueryException?&lt;/p&gt;</comment>
                            <comment id="14487513" author="oskarkjellin" created="Thu, 9 Apr 2015 15:24:00 +0000"  >&lt;p&gt;Running cassandra 2.1.4. In docker, not sure if that really should differ in this case.&lt;/p&gt;

&lt;p&gt;I just tried to reproduce it using only cql and I managed to quite easily using the following commands:&lt;/p&gt;

&lt;p&gt;CREATE TYPE test (foo text);&lt;br/&gt;
CREATE TABLE testtable (id text, map frozen&amp;lt;map&amp;lt;text,test&amp;gt;&amp;gt;, primary key (id));&lt;br/&gt;
INSERT INTO testtable (id, map) VALUES (&apos;foo&apos;, {&apos;foo&apos;:{foo:&apos;bar&apos;}});&lt;br/&gt;
ALTER  TYPE test add bar text;&lt;/p&gt;

&lt;p&gt;When altering the type I actually got a:&lt;br/&gt;
ServerError: &amp;lt;ErrorMessage code=0000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Server error&amp;#93;&lt;/span&gt; message=&quot;java.lang.NullPointerException&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;Trying to add it again I got:&lt;br/&gt;
InvalidRequest: code=2200 &lt;span class=&quot;error&quot;&gt;&amp;#91;Invalid query&amp;#93;&lt;/span&gt; message=&quot;Cannot add new field bar to type test.test: a field of the same name already exists&quot;&lt;/p&gt;

&lt;p&gt;So I tried to do an insert:&lt;br/&gt;
INSERT INTO testtable (id, map) VALUES (&apos;foo&apos;, {&apos;foo&apos;:{foo:&apos;bar&apos;, bar:&apos;foo&apos;}});&lt;/p&gt;

&lt;p&gt;Which returned:&lt;br/&gt;
InvalidRequest: code=2200 &lt;span class=&quot;error&quot;&gt;&amp;#91;Invalid query&amp;#93;&lt;/span&gt; message=&quot;Unknown field &apos;bar&apos; in value of user defined type test&quot;&lt;/p&gt;

&lt;p&gt;However:&lt;br/&gt;
cqlsh:test&amp;gt; DESC TYPE test;&lt;/p&gt;

&lt;p&gt;CREATE TYPE test.test (&lt;br/&gt;
    foo text,&lt;br/&gt;
    bar text&lt;br/&gt;
);&lt;/p&gt;</comment>
                            <comment id="14487514" author="philipthompson" created="Thu, 9 Apr 2015 15:25:20 +0000"  >&lt;p&gt;Thanks for the easy reproduction steps, that will get this fixed pretty quickly.&lt;/p&gt;</comment>
                            <comment id="14487522" author="oskarkjellin" created="Thu, 9 Apr 2015 15:29:27 +0000"  >&lt;p&gt;No problem. Were you able to reproduce it?&lt;/p&gt;</comment>
                            <comment id="14487532" author="philipthompson" created="Thu, 9 Apr 2015 15:34:06 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [SharedPool-Worker-1] 2015-04-09 11:32:5
0,156 ErrorMessage.java:243 - Unexpected excep
tion during request
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at org.apache.cassandra.db.composites.
AbstractSimpleCellNameType.&amp;lt;init&amp;gt;(AbstractSimp
leCellNameType.java:70) ~[main/:na]
        at org.apache.cassandra.db.composites.
SimpleSparseCellNameType.&amp;lt;init&amp;gt;(SimpleSparseCe
llNameType.java:43) ~[main/:na]
        at org.apache.cassandra.db.composites.
SimpleSparseCellNameType.&amp;lt;init&amp;gt;(SimpleSparseCe
llNameType.java:38) ~[main/:na]
        at org.apache.cassandra.db.composites.
CellNames.fromAbstractType(CellNames.java:66)
~[main/:na]
        at org.apache.cassandra.cql3.statement
s.AlterTypeStatement.updateDefinition(AlterTyp
eStatement.java:169) ~[main/:na]
        at org.apache.cassandra.cql3.statement
s.AlterTypeStatement.announceMigration(AlterTy
peStatement.java:116) ~[main/:na]
        at org.apache.cassandra.cql3.statement
s.SchemaAlteringStatement.execute(SchemaAlteri
ngStatement.java:80) ~[main/:na]
        at org.apache.cassandra.cql3.QueryProc
essor.processStatement(QueryProcessor.java:238
) ~[main/:na]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; is the full stack trace on the ALTER TYPE command&lt;/p&gt;</comment>
                            <comment id="14487534" author="philipthompson" created="Thu, 9 Apr 2015 15:34:41 +0000"  >&lt;p&gt;Yes.&lt;/p&gt;</comment>
                            <comment id="14491978" author="jjirsa" created="Mon, 13 Apr 2015 06:37:36 +0000"  >&lt;p&gt;Apologies for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;, didn&apos;t notice he was already assigned. Perhaps he can review. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jeffjirsa/cassandra/commit/3802b59b5df33d546832095df010287f3cebe0f5.diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeffjirsa/cassandra/commit/3802b59b5df33d546832095df010287f3cebe0f5.diff&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Includes unit test. &lt;/p&gt;

&lt;p&gt;The assert in db/composites/CellNames.java is to throw an AssertionError rather than an NPE if there&apos;s another code path that somehow hits this same issue. &lt;/p&gt;</comment>
                            <comment id="14493822" author="blerer" created="Tue, 14 Apr 2015 09:05:32 +0000"  >&lt;p&gt;No problem &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;Here my remarks:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The problem with the patch is that it as a side effect. It will announce a migration for every table that contains a &lt;tt&gt;UDT&lt;/tt&gt; even if it is not the modified one.&lt;/li&gt;
	&lt;li&gt;I think it is better to use meaningfull name for the unit tests, like &lt;tt&gt;testAlteringUserTypeNestedWithinMap&lt;/tt&gt;, as it does not force the reader to go to internet to understand what the test is about.&lt;/li&gt;
	&lt;li&gt;For the tests I would personnally add the following method to &lt;tt&gt;CQLTester&lt;/tt&gt;:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; userType(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;...values)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TupleValue(values).toByteBuffer();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;and try to be as precise as possible in the expectations:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testAlteringUserTypeNestedWithinMap() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Throwable
    {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ut1 = createType(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TYPE %s (a &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)&quot;&lt;/span&gt;);

        createTable(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TABLE %s (x &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; PRIMARY KEY, y frozen &amp;lt; map &amp;lt; text, &quot;&lt;/span&gt; + KEYSPACE + &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt; + ut1 + &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt; &amp;gt;)&quot;&lt;/span&gt;);

        execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO %s (x, y) VALUES(1, {&lt;span class=&quot;code-quote&quot;&gt;&apos;firstValue&apos;&lt;/span&gt;:{a:1}})&quot;&lt;/span&gt;);
        assertRows(execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT * FROM %s&quot;&lt;/span&gt;), row(1, map(&lt;span class=&quot;code-quote&quot;&gt;&quot;firstValue&quot;&lt;/span&gt;, userType(1))));
        flush();

        execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;ALTER TYPE &quot;&lt;/span&gt; + KEYSPACE + &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt; + ut1 + &lt;span class=&quot;code-quote&quot;&gt;&quot; ADD b &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt;);
        execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO %s (x, y) VALUES(2, {&lt;span class=&quot;code-quote&quot;&gt;&apos;secondValue&apos;&lt;/span&gt;:{a:2, b:2}})&quot;&lt;/span&gt;);
        execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO %s (x, y) VALUES(3, {&lt;span class=&quot;code-quote&quot;&gt;&apos;thirdValue&apos;&lt;/span&gt;:{a:3}})&quot;&lt;/span&gt;);
        execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO %s (x, y) VALUES(4, {&lt;span class=&quot;code-quote&quot;&gt;&apos;fourthValue&apos;&lt;/span&gt;:{b:4}})&quot;&lt;/span&gt;);

        assertRows(execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT * FROM %s&quot;&lt;/span&gt;),
                   row(1, map(&lt;span class=&quot;code-quote&quot;&gt;&quot;firstValue&quot;&lt;/span&gt;, userType(1))),
                   row(2, map(&lt;span class=&quot;code-quote&quot;&gt;&quot;secondValue&quot;&lt;/span&gt;, userType(2, 2))),
                   row(3, map(&lt;span class=&quot;code-quote&quot;&gt;&quot;thirdValue&quot;&lt;/span&gt;, userType(3, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;))),
                   row(4, map(&lt;span class=&quot;code-quote&quot;&gt;&quot;fourthValue&quot;&lt;/span&gt;, userType(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 4))));

        flush();

        assertRows(execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT * FROM %s&quot;&lt;/span&gt;),
                   row(1, map(&lt;span class=&quot;code-quote&quot;&gt;&quot;firstValue&quot;&lt;/span&gt;, userType(1))),
                   row(2, map(&lt;span class=&quot;code-quote&quot;&gt;&quot;secondValue&quot;&lt;/span&gt;, userType(2, 2))),
                   row(3, map(&lt;span class=&quot;code-quote&quot;&gt;&quot;thirdValue&quot;&lt;/span&gt;, userType(3, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;))),
                   row(4, map(&lt;span class=&quot;code-quote&quot;&gt;&quot;fourthValue&quot;&lt;/span&gt;, userType(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 4))));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;By forcing the flush of the data you also make sure that everything work the same when the data are read from the SSTables.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;I noticed that the unit tests are a bit limited. It would be nice if you could add some tests for verifying the behavior when the &lt;tt&gt;UDT&lt;/tt&gt; is nested within a &lt;tt&gt;Map&lt;/tt&gt; as a key or within a &lt;tt&gt;List&lt;/tt&gt;, a &lt;tt&gt;Set&lt;/tt&gt;, a &lt;tt&gt;Tuple&lt;/tt&gt; or another &lt;tt&gt;UDT&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14497593" author="jjirsa" created="Thu, 16 Apr 2015 05:49:38 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Uploaded 9148-v2.txt - also available at &lt;a href=&quot;https://github.com/jeffjirsa/cassandra/commit/cbfccbe7a3f56db47d560afb0bc8882950d2a5f1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeffjirsa/cassandra/commit/cbfccbe7a3f56db47d560afb0bc8882950d2a5f1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Rebased to trunk as of 20150415&lt;/p&gt;

&lt;p&gt;Unit tests updated as suggested (I was originally keeping it minimal and matching the naming of existing tests, but let&apos;s get better tests written now instead of waiting on the 3.0 triage). New patch includes set/list tests.&lt;/p&gt;

&lt;p&gt;No longer causing the double migrations when running this quick test script:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create keyspace test2 WITH replication = {&apos;class&apos;: &apos;SimpleStrategy&apos;, &apos;replication_factor&apos;: 1}; 
use test2;

CREATE TYPE test1 (foo text);
CREATE TYPE test2 (foo text, bar text);

CREATE TABLE testtable (id text, map1 frozen&amp;lt;map&amp;lt;text,test1&amp;gt;&amp;gt;, primary key (id));
INSERT INTO testtable (id, map1) VALUES (&apos;foo&apos;, {&apos;foo&apos;:{foo:&apos;bar&apos;}});
CREATE TABLE testtable2 (id text, map2 frozen&amp;lt;map&amp;lt;text,test2&amp;gt;&amp;gt;, primary key(id));
ALTER TYPE test1 add bar text;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The ALTER TYPE statement now results in a the proper number of announced migrations, rather than announcing migrations for any table that had any UDT, and that announced migration has the properly updated comparator for the updated UDT.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INFO  [SharedPool-Worker-2] 2015-04-15 22:25:01,882 MigrationManager.java: 
Update table &apos;test2/testtable&apos; From org.apache.cassandra.config.CFMetaData@1aee5414[cfId=ee34a6a0-e3f8-11e4-af98-95e9d2c49838,
ksName=test2,
cfName=testtable,
cfType=Standard,
comparator=org.apache.cassandra.db.marshal.CompositeType(org.apache.cassandra.db.marshal.UTF8Type),comment=,readRepairChance=0.0,dcLocalReadRepairChance=0.1,gcGraceSeconds=864000,
defaultValidator=org.apache.cassandra.db.marshal.BytesType,keyValidator=org.apache.cassandra.db.marshal.UTF8Type,minCompactionThreshold=4,maxCompactionThreshold=32,columnMetadata=[ColumnDefinition{name=id, type=org.apache.cassandra.db.marshal.UTF8Type, kind=PARTITION_KEY, componentIndex=null, indexName=null, indexType=null}, ColumnDefinition{name=map1, type=org.apache.cassandra.db.marshal.FrozenType(org.apache.cassandra.db.marshal.MapType(org.apache.cassandra.db.marshal.UTF8Type,org.apache.cassandra.db.marshal.UserType(test2,7465737431,666f6f:org.apache.cassandra.db.marshal.UTF8Type))), 
kind=REGULAR, componentIndex=0, indexName=null, indexType=null}],
compactionStrategyClass=class org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy,compactionStrategyOptions={},
compressionParameters={sstable_compression=org.apache.cassandra.io.compress.LZ4Compressor},bloomFilterFpChance=0.01,memtableFlushPeriod=0,
caching={&quot;keys&quot;:&quot;ALL&quot;, &quot;rows_per_partition&quot;:&quot;NONE&quot;},defaultTimeToLive=0,minIndexInterval=128,maxIndexInterval=2048,speculativeRetry=99.0PERCENTILE,droppedColumns={},triggers=[],isDense=false] 

To 

org.apache.cassandra.config.CFMetaData@3e779c17[cfId=ee34a6a0-e3f8-11e4-af98-95e9d2c49838,
ksName=test2,
cfName=testtable,
cfType=Standard,
comparator=org.apache.cassandra.db.marshal.CompositeType(org.apache.cassandra.db.marshal.UTF8Type),
comment=,readRepairChance=0.0,dcLocalReadRepairChance=0.1,gcGraceSeconds=864000,
defaultValidator=org.apache.cassandra.db.marshal.BytesType,keyValidator=org.apache.cassandra.db.marshal.UTF8Type,minCompactionThreshold=4,maxCompactionThreshold=32,
columnMetadata=[ColumnDefinition{name=id, type=org.apache.cassandra.db.marshal.UTF8Type, kind=PARTITION_KEY, componentIndex=null, indexName=null, indexType=null}, ColumnDefinition{name=map1, type=org.apache.cassandra.db.marshal.FrozenType(org.apache.cassandra.db.marshal.MapType(org.apache.cassandra.db.marshal.UTF8Type,org.apache.cassandra.db.marshal.UserType(test2,7465737431,666f6f:org.apache.cassandra.db.marshal.UTF8Type,626172:org.apache.cassandra.db.marshal.UTF8Type))), kind=REGULAR, componentIndex=0, indexName=null, indexType=null}],compactionStrategyClass=class org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy,compactionStrategyOptions={},compressionParameters={sstable_compression=org.apache.cassandra.io.compress.LZ4Compressor},bloomFilterFpChance=0.01,memtableFlushPeriod=0,caching={&quot;keys&quot;:&quot;ALL&quot;, &quot;rows_per_partition&quot;:&quot;NONE&quot;},defaultTimeToLive=0,minIndexInterval=128,maxIndexInterval=2048,speculativeRetry=99.0PERCENTILE,droppedColumns={},triggers=[],isDense=false]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14497973" author="blerer" created="Thu, 16 Apr 2015 11:59:03 +0000"  >&lt;p&gt;I am not sure why but I could not apply your patch. I recreated one to avoid any issue.&lt;/p&gt;

&lt;p&gt;Thanks for the patch.&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="14497974" author="blerer" created="Thu, 16 Apr 2015 11:59:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt; Could you commit?&lt;/p&gt;</comment>
                            <comment id="14505212" author="thobbs" created="Tue, 21 Apr 2015 16:22:40 +0000"  >&lt;p&gt;Committed the patch as &lt;tt&gt;bdef072&lt;/tt&gt; with a change to the unit tests to cover both frozen and non-frozen collections.&lt;/p&gt;

&lt;p&gt;Although the patch happened to be safe, I made a follow-on commit as &lt;tt&gt;5ed41ea9&lt;/tt&gt; to only update the comparator when the type is both a collection and multi-cell (i.e. not frozen).  Let me know if that looks okay to you.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12820998">CASSANDRA-9192</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12725849" name="9148-V3.txt" size="7503" author="blerer" created="Thu, 16 Apr 2015 11:59:03 +0000"/>
                            <attachment id="12725783" name="9148-v2.txt" size="6758" author="jjirsa" created="Thu, 16 Apr 2015 05:49:38 +0000"/>
                            <attachment id="12725082" name="9148.txt" size="2343" author="jjirsa" created="Mon, 13 Apr 2015 23:00:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jjirsa]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d1br:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12329381">2.1.4</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>blerer</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>