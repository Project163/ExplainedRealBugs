<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:03:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11272] NullPointerException (NPE) during bootstrap startup in StorageService.java</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11272</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After bootstrapping fails due to stream closed error, the following error results:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Feb 27, 2016 8:06:38 PM com.google.common.util.concurrent.ExecutionList executeListener
SEVERE: RuntimeException &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing runnable com.google.common.util.concurrent.Futures$6@3d61813b with executor INSTANCE
java.lang.NullPointerException
        at org.apache.cassandra.service.StorageService$2.onFailure(StorageService.java:1284)
        at com.google.common.util.concurrent.Futures$6.run(Futures.java:1310)
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:457)
        at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156)
        at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145)
        at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202)
        at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:210)
        at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:186)
        at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:430)
        at org.apache.cassandra.streaming.StreamSession.onError(StreamSession.java:525)
        at org.apache.cassandra.streaming.StreamSession.doRetry(StreamSession.java:645)
        at org.apache.cassandra.streaming.messages.IncomingFileMessage$1.deserialize(IncomingFileMessage.java:70)
        at org.apache.cassandra.streaming.messages.IncomingFileMessage$1.deserialize(IncomingFileMessage.java:39)
        at org.apache.cassandra.streaming.messages.StreamMessage.deserialize(StreamMessage.java:59)
        at org.apache.cassandra.streaming.ConnectionHandler$IncomingMessageHandler.run(ConnectionHandler.java:261)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;debian jesse up to date&lt;/p&gt;</environment>
        <key id="12945230">CASSANDRA-11272</key>
            <summary>NullPointerException (NPE) during bootstrap startup in StorageService.java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ifesdjeen">Alex Petrov</assignee>
                                    <reporter username="longtimer">Jason Kania</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Feb 2016 01:10:46 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:58 +0000</updated>
                            <resolved>Mon, 23 May 2016 22:13:52 +0000</resolved>
                                        <fixVersion>2.2.7</fixVersion>
                    <fixVersion>3.0.7</fixVersion>
                    <fixVersion>3.7</fixVersion>
                    <fixVersion>3.8</fixVersion>
                                    <component>Local/Startup and Shutdown</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15261888" author="ifesdjeen" created="Thu, 28 Apr 2016 09:50:01 +0000"  >&lt;p&gt;Which Cassandra version are you using? &lt;/p&gt;</comment>
                            <comment id="15262426" author="longtimer" created="Thu, 28 Apr 2016 16:16:39 +0000"  >&lt;p&gt;This was in 3.0.3.&lt;/p&gt;</comment>
                            <comment id="15277730" author="ufoton" created="Tue, 10 May 2016 07:17:56 +0000"  >&lt;p&gt;Same problem in 2.2.5 &lt;/p&gt;

&lt;p&gt;INFO   | jvm 1    | 2016/05/09 21:44:28 | May 09, 2016 9:44:28 PM com.google.common.util.concurrent.ExecutionList executeListener&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 | SEVERE: RuntimeException while executing runnable com.google.common.util.concurrent.Futures$4@5d81f1af with executor com.google.common.util.concurrent.MoreExecutors$SameThreadExecutorService@6992bd30&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 | java.lang.NullPointerException&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at org.apache.cassandra.service.StorageService$2.onFailure(StorageService.java:1243)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at com.google.common.util.concurrent.Futures$4.run(Futures.java:1172)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at com.google.common.util.concurrent.MoreExecutors$SameThreadExecutorService.execute(MoreExecutors.java:297)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at com.google.common.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at com.google.common.util.concurrent.ExecutionList.execute(ExecutionList.java:145)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at com.google.common.util.concurrent.AbstractFuture.setException(AbstractFuture.java:202)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at org.apache.cassandra.streaming.StreamResultFuture.maybeComplete(StreamResultFuture.java:210)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at org.apache.cassandra.streaming.StreamResultFuture.handleSessionComplete(StreamResultFuture.java:186)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at org.apache.cassandra.streaming.StreamSession.closeSession(StreamSession.java:434)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at org.apache.cassandra.streaming.StreamSession.onError(StreamSession.java:529)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at org.apache.cassandra.streaming.StreamReceiveTask$OnCompletionRunnable.run(StreamReceiveTask.java:181)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 |       at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
INFO   | jvm 1    | 2016/05/09 21:44:28 | &lt;/p&gt;</comment>
                            <comment id="15277776" author="ifesdjeen" created="Tue, 10 May 2016 08:04:14 +0000"  >&lt;p&gt;From what I can see we have a &lt;tt&gt;NullPointerException&lt;/tt&gt; in the callback listener &lt;tt&gt;onFailure&lt;/tt&gt;, which results into the &lt;tt&gt;SEVERE&lt;/tt&gt; level error within executor itself. Unfortunately, this does not really indicate what exactly happened during the bootstrap process. &lt;/p&gt;

&lt;p&gt;I&apos;ve removed the cause fetch from all branches, which should surface the exception cause:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;WARN  07:44:06 Warn Message
java.lang.RuntimeException: Exception Message
	at ...(ExceptionTest.java:44) [test/:na]

        ... stacktrace...

Caused by: java.lang.RuntimeException: Cause Message
	... 29 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It doesn&apos;t fix the &quot;cause&quot;, although I guess it&apos;s the best I can do not being able to find out what actually causes the bootstrap error.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/11272-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-11272-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-11272-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/11272-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-11272-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-11272-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/11272-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-11272-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/ifesdjeen/job/ifesdjeen-11272-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15283163" author="jkni" created="Fri, 13 May 2016 21:09:20 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; - elsewhere in the codebase, the pattern we follow is just &lt;tt&gt;logger.warn(&quot;Error during bootstrap: &quot;, e)&lt;/tt&gt;. I think we should just do that here, get it committed, and then resolve any new errors logged in this way in separate tickets.&lt;/p&gt;</comment>
                            <comment id="15286186" author="ifesdjeen" created="Tue, 17 May 2016 07:41:40 +0000"  >&lt;p&gt;I&apos;ve removed the cause concatenation and re-triggered CI.&lt;/p&gt;</comment>
                            <comment id="15290293" author="jkni" created="Thu, 19 May 2016 02:16:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; - why log e.getCause() instead of just e in your patches? No need to retrigger CI, but I think we should just log the original error.&lt;/p&gt;</comment>
                            <comment id="15290673" author="ifesdjeen" created="Thu, 19 May 2016 08:14:41 +0000"  >&lt;p&gt;This had to do with the fact it&apos;s the `onFailure` callback. In this particular case, I assumed that previous handler code had it there for the reason (there was also special casing for &lt;tt&gt;ExecutionException&lt;/tt&gt; in Guava that unpacked the cause). After taking another look at the context, I can&apos;t really see any.&lt;/p&gt;

&lt;p&gt;Removed it now. &lt;/p&gt;</comment>
                            <comment id="15293923" author="jkni" created="Fri, 20 May 2016 18:26:07 +0000"  >&lt;p&gt;+1. Note to committer: patch is at the end of &lt;a href=&quot;https://github.com/ifesdjeen/cassandra/tree/11272-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ifesdjeen/11272-2.2&lt;/a&gt;. It should apply cleanly on 2.2 and merge cleanly into 3.0/3.7/trunk.&lt;/p&gt;

&lt;p&gt;Although this just fixes the logging NPE from some other issue, we should close this after commit. Once this is committed, logging output will be fixed, and there will be nothing to lead a new reporter here.&lt;/p&gt;</comment>
                            <comment id="15297214" author="jmckenzie" created="Mon, 23 May 2016 22:13:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=cassandra.git;a=commit;h=f463fed234ce5bd9c536ac5fdf51c3555b9af805&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Committed&lt;/a&gt; and merged up.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15340361" author="githubbot" created="Mon, 20 Jun 2016 20:43:55 +0000"  >&lt;p&gt;Github user zhiyanshao closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/71&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ifesdjeen]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2tvfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jkni</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jkni]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>