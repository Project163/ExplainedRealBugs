<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:26:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18320] Incompatible file system thrown while running Simulator</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18320</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.io.UncheckedIOException
	at org.apache.cassandra.io.util.PathUtils.propagateUnchecked(PathUtils.java:831)
	at org.apache.cassandra.io.util.PathUtils.propagateUnchecked(PathUtils.java:816)
	at org.apache.cassandra.io.util.PathUtils.delete(PathUtils.java:257)
	at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:381)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:483)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
	at org.apache.cassandra.io.util.PathUtils.forEach(PathUtils.java:155)
	at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:378)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:483)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
	at org.apache.cassandra.io.util.PathUtils.forEach(PathUtils.java:155)
	at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:378)
	at org.apache.cassandra.distributed.impl.AbstractCluster.close(AbstractCluster.java:1047)
	at org.apache.cassandra.simulator.ClusterSimulation.close(ClusterSimulation.java:816)
	at org.apache.cassandra.simulator.SimulationRunner$Run.run(SimulationRunner.java:370)
	at org.apache.cassandra.simulator.SimulationRunner$BasicCommand.run(SimulationRunner.java:345)
	at org.apache.cassandra.simulator.paxos.PaxosSimulationRunner.main(PaxosSimulationRunner.java:148)
	at org.apache.cassandra.simulator.test.ShortPaxosSimulationTest.simulationTest(ShortPaxosSimulationTest.java:33)
Caused by: java.nio.file.DirectoryNotEmptyException: /cassandra/node1/commitlog
	at com.google.common.jimfs.FileSystemView.checkEmpty(FileSystemView.java:535)
	at com.google.common.jimfs.FileSystemView.checkDeletable(FileSystemView.java:517)
	at com.google.common.jimfs.FileSystemView.delete(FileSystemView.java:479)
	at com.google.common.jimfs.FileSystemView.deleteFile(FileSystemView.java:465)
	at com.google.common.jimfs.JimfsFileSystemProvider.delete(JimfsFileSystemProvider.java:261)
	at java.nio.file.Files.delete(Files.java:1126)
	at org.apache.cassandra.io.util.PathUtils.delete(PathUtils.java:252)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13528031">CASSANDRA-18320</key>
            <summary>Incompatible file system thrown while running Simulator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcapwell">David Capwell</assignee>
                                    <reporter username="edimitrova">Ekaterina Dimitrova</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Mar 2023 19:26:20 +0000</created>
                <updated>Fri, 10 Oct 2025 08:45:42 +0000</updated>
                            <resolved>Wed, 15 Mar 2023 23:23:16 +0000</resolved>
                                        <fixVersion>4.1.2</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>CI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="17699089" author="smiklosovic" created="Fri, 10 Mar 2023 19:28:18 +0000"  >&lt;p&gt;It says that it can not recursively remove a directory because it was not empty. This is happening after Cluster (as in dtest jvm api) is being closed.&lt;/p&gt;

&lt;p&gt;I wonder how that is related to what we did in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18294&quot; title=&quot;die disk failure policy will not kill jvm as documented&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18294&quot;&gt;&lt;del&gt;CASSANDRA-18294&lt;/del&gt;&lt;/a&gt;. There are two ways of removing stuff, &quot;Java way&quot; (whatever that means) and calling &quot;rm&quot; command in *nix by means of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17427&quot; title=&quot;Improve unit tests performance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17427&quot;&gt;&lt;del&gt;CASSANDRA-17427&lt;/del&gt;&lt;/a&gt; which adds this CassandraRelevantProperty:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /** When enabled, recursive directory deletion will be executed using a unix command `rm -rf` instead of traversing
     * and removing individual files. This is now used only tests, but eventually we will make it &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; by &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.*/
    USE_NIX_RECURSIVE_DELETE(&lt;span class=&quot;code-quote&quot;&gt;&quot;cassandra.use_nix_recursive_delete&quot;&lt;/span&gt;),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I set this to true before that cleanup logic in simulator kicks in, it will just remove it without any error.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/1980/workflows/9cbd06eb-4333-485c-ad38-5986cd4870c6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/1980/workflows/9cbd06eb-4333-485c-ad38-5986cd4870c6&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/instaclustr/cassandra/commit/d7c44651d63a75ca017414b172538bd9246e4b98&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/instaclustr/cassandra/commit/d7c44651d63a75ca017414b172538bd9246e4b98&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This property is set only in IDEA test run config but you see that there is the intention to set it by default to true in tests without setting any flag.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/io/util/PathUtils.java#L391&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/io/util/PathUtils.java#L391&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17699095" author="dcapwell" created="Fri, 10 Mar 2023 19:50:19 +0000"  >&lt;p&gt;agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt; here, this isn&apos;t a simulator issue but a jvm-dtest Cluster.close issue&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	at org.apache.cassandra.distributed.impl.AbstractCluster.close(AbstractCluster.java:1047)
	at org.apache.cassandra.simulator.ClusterSimulation.close(ClusterSimulation.java:816)
	at org.apache.cassandra.simulator.SimulationRunner$Run.run(SimulationRunner.java:370)
	at org.apache.cassandra.simulator.SimulationRunner$BasicCommand.run(SimulationRunner.java:345)
	at org.apache.cassandra.simulator.paxos.PaxosSimulationRunner.main(PaxosSimulationRunner.java:148)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since we got a &quot;Caused by: java.nio.file.DirectoryNotEmptyException: /cassandra/node1/commitlog&quot; we then rethrow the error, but this looks like we have a close bug...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void close()
    {
        FBUtilities.waitOnFutures(instances.stream()
                                           .filter(i -&amp;gt; !i.isShutdown())
                                           .map(IInstance::shutdown)
                                           .collect(Collectors.toList()),
                                  1L, TimeUnit.MINUTES);

        instances.clear();
        instanceMap.clear();
        PathUtils.setDeletionListener(ignore -&amp;gt; {});
        &lt;span class=&quot;code-comment&quot;&gt;// Make sure to only delete directory when threads are stopped
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Files.exists(root))
            PathUtils.deleteRecursive(root);
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.setDefaultUncaughtExceptionHandler(previousHandler);
        previousHandler = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        checkAndResetUncaughtExceptions();
        &lt;span class=&quot;code-comment&quot;&gt;//checkForThreadLeaks();
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;//withThreadLeakCheck(futures);
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All our close futures were success, yet commit log touched a file while we were deleting... so we have a concurrency issue with PathUtils.deleteRecursive(root);&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This property is set only in IDEA test run config but you see that there is the intention to set it by default to true in tests without setting any flag.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Its hard for me to test this as the issue looks to be a concurrency issue, so if `rm -rd` fails when the dir adds a file AFTER the dentry was loaded by rm I can&apos;t say... but I don&apos;t think changing the implementation actually fixes this bug, it looks like commit log said it was fully closed when it wasn&apos;t, so we have concurrent file creation while we are deleting...&lt;/p&gt;</comment>
                            <comment id="17699097" author="smiklosovic" created="Fri, 10 Mar 2023 20:00:14 +0000"  >&lt;p&gt;Yes I agree, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dcapwell&quot; class=&quot;user-hover&quot; rel=&quot;dcapwell&quot;&gt;dcapwell&lt;/a&gt;, it seems like CommitLog &quot;leaks&quot;. deleteRecursive should just delete that stuff and no new files should be created while it is doing its job. It seems like somebody wrote a file while it was about to remove the dir and it was expecting that to be empty.&lt;/p&gt;</comment>
                            <comment id="17699102" author="brandon.williams" created="Fri, 10 Mar 2023 20:19:04 +0000"  >&lt;p&gt;Looping Stefan&apos;s patch, I received a slight different error:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[junit-timeout] Testcase: simulationTest(org.apache.cassandra.simulator.test.ShortPaxosSimulationTest)-.jdk1.8: Caused an ERROR
[junit-timeout] null
[junit-timeout] java.io.UncheckedIOException
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.propagateUnchecked(PathUtils.java:831)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.propagateUnchecked(PathUtils.java:816)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.delete(PathUtils.java:257)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:381)
[junit-timeout]         at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
[junit-timeout]         at java.util.ArrayList.forEach(ArrayList.java:1259)
[junit-timeout]         at java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
[junit-timeout]         at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:483)
[junit-timeout]         at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
[junit-timeout]         at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
[junit-timeout]         at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
[junit-timeout]         at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
[junit-timeout]         at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.forEach(PathUtils.java:155)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:378)
[junit-timeout]         at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
[junit-timeout]         at java.util.ArrayList.forEach(ArrayList.java:1259)
[junit-timeout]         at java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
[junit-timeout]         at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:483)
[junit-timeout]         at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
[junit-timeout]         at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
[junit-timeout]         at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
[junit-timeout]         at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
[junit-timeout]         at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.forEach(PathUtils.java:155)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:378)
[junit-timeout]         at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
[junit-timeout]         at java.util.ArrayList.forEach(ArrayList.java:1259)
[junit-timeout]         at java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
[junit-timeout]         at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:483)
[junit-timeout]         at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)
[junit-timeout]         at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
[junit-timeout]         at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
[junit-timeout]         at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
[junit-timeout]         at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:485)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.forEach(PathUtils.java:155)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:378)
[junit-timeout]         at org.apache.cassandra.distributed.impl.AbstractCluster.close(AbstractCluster.java:1049)
[junit-timeout]         at org.apache.cassandra.simulator.ClusterSimulation.close(ClusterSimulation.java:816)
[junit-timeout]         at org.apache.cassandra.simulator.SimulationRunner$Run.run(SimulationRunner.java:370)
[junit-timeout]         at org.apache.cassandra.simulator.SimulationRunner$BasicCommand.run(SimulationRunner.java:345)
[junit-timeout]         at org.apache.cassandra.simulator.paxos.PaxosSimulationRunner.main(PaxosSimulationRunner.java:148)
[junit-timeout]         at org.apache.cassandra.simulator.test.ShortPaxosSimulationTest.simulationTest(ShortPaxosSimulationTest.java:33)
[junit-timeout] Caused by: java.nio.file.NoSuchFileException: /cassandra/node1/commitlog/CommitLog-7-1577836800031.log
[junit-timeout]         at com.google.common.jimfs.DirectoryEntry.requireExists(DirectoryEntry.java:70)
[junit-timeout]         at com.google.common.jimfs.FileSystemView.deleteFile(FileSystemView.java:464)
[junit-timeout]         at com.google.common.jimfs.JimfsFileSystemProvider.delete(JimfsFileSystemProvider.java:261)
[junit-timeout]         at java.nio.file.Files.delete(Files.java:1126)
[junit-timeout]         at org.apache.cassandra.io.util.PathUtils.delete(PathUtils.java:252)
[junit-timeout]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17699112" author="smiklosovic" created="Fri, 10 Mar 2023 20:54:58 +0000"  >&lt;p&gt;This might happen when the underlying &quot;file lister&quot; lists the files to be deleted and as it goes one by one and deletes each, that file is not there anymore. In the context of CommitLog, maybe it removes the commit log file but the removal logic races again.&lt;br/&gt;
Any way I look at this it seems like we should be sure that we indeed closed / finished what CommitLog subsystem is doing and then we approach the removal of any files.&lt;/p&gt;</comment>
                            <comment id="17699752" author="dcapwell" created="Mon, 13 Mar 2023 17:33:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt; is rebasing accord branch and has an interesting stack trace&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/696/workflows/180e9555-6796-4733-8214-ba94fb9484fd/jobs/6936/tests#failed-test-0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/maedhroz/cassandra/696/workflows/180e9555-6796-4733-8214-ba94fb9484fd/jobs/6936/tests#failed-test-0&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalArgumentException: Incompatible file system
	at org.apache.cassandra.io.util.File.&amp;lt;init&amp;gt;(File.java:135)
	at org.apache.cassandra.service.snapshot.SnapshotLoader.loadSnapshots(SnapshotLoader.java:173)
	at org.apache.cassandra.service.snapshot.SnapshotLoader.loadSnapshots(SnapshotLoader.java:189)
	at org.apache.cassandra.service.snapshot.SnapshotManager.loadSnapshots(SnapshotManager.java:119)
	at org.apache.cassandra.service.snapshot.SnapshotManager.start(SnapshotManager.java:88)
	at org.apache.cassandra.service.StorageService.startSnapshotManager(StorageService.java:1160)
	at org.apache.cassandra.distributed.impl.Instance.lambda$startup$12(Instance.java:712)
	at org.apache.cassandra.concurrent.FutureTask$1.call(FutureTask.java:96)
	at org.apache.cassandra.concurrent.SyncFutureTask.run(SyncFutureTask.java:68)
	at org.apache.cassandra.simulator.systems.InterceptingExecutor$InterceptingPooledExecutor$WaitingThread.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$1(InterceptingExecutor.java:317)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829)
	Suppressed: java.io.UncheckedIOException
		at org.apache.cassandra.io.util.PathUtils.propagateUnchecked(PathUtils.java:831)
		at org.apache.cassandra.io.util.PathUtils.propagateUnchecked(PathUtils.java:816)
		at org.apache.cassandra.io.util.PathUtils.delete(PathUtils.java:257)
		at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:381)
		at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
		at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)
		at java.base/java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
		at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)
		at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
		at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
		at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
		at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
		at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)
		at org.apache.cassandra.io.util.PathUtils.forEach(PathUtils.java:155)
		at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:378)
		at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
		at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)
		at java.base/java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
		at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)
		at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
		at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
		at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
		at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
		at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)
		at org.apache.cassandra.io.util.PathUtils.forEach(PathUtils.java:155)
		at org.apache.cassandra.io.util.PathUtils.deleteRecursive(PathUtils.java:378)
		at org.apache.cassandra.distributed.impl.AbstractCluster.close(AbstractCluster.java:1047)
		at org.apache.cassandra.simulator.ClusterSimulation.close(ClusterSimulation.java:819)
		at org.apache.cassandra.simulator.SimulationRunner$Run.run(SimulationRunner.java:370)
		at org.apache.cassandra.simulator.paxos.AccordSimulationRunner$Run.run(AccordSimulationRunner.java:39)
		at org.apache.cassandra.simulator.paxos.AccordSimulationRunner$Run.run(AccordSimulationRunner.java:30)
		at org.apache.cassandra.simulator.SimulationRunner$BasicCommand.run(SimulationRunner.java:355)
		at org.apache.cassandra.simulator.paxos.AccordSimulationRunner$Run.run(AccordSimulationRunner.java:30)
		at org.apache.cassandra.simulator.paxos.AccordSimulationRunner.main(AccordSimulationRunner.java:76)
		at org.apache.cassandra.simulator.test.ShortAccordSimulationTest.simulationTest(ShortAccordSimulationTest.java:32)
		at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
		at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
		at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	Caused by: java.nio.file.DirectoryNotEmptyException: /cassandra/node1/data0
		at com.google.common.jimfs.FileSystemView.checkEmpty(FileSystemView.java:535)
		at com.google.common.jimfs.FileSystemView.checkDeletable(FileSystemView.java:517)
		at com.google.common.jimfs.FileSystemView.delete(FileSystemView.java:479)
		at com.google.common.jimfs.FileSystemView.deleteFile(FileSystemView.java:465)
		at com.google.common.jimfs.JimfsFileSystemProvider.delete(JimfsFileSystemProvider.java:261)
		at java.base/java.nio.file.Files.delete(Files.java:1142)
		at org.apache.cassandra.io.util.PathUtils.delete(PathUtils.java:252)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We still see this on&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
		at org.apache.cassandra.distributed.impl.AbstractCluster.close(AbstractCluster.java:1047)
		at org.apache.cassandra.simulator.ClusterSimulation.close(ClusterSimulation.java:819)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but, the top-level exception is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalArgumentException: Incompatible file system
	at org.apache.cassandra.io.util.File.&amp;lt;init&amp;gt;(File.java:135)
	at org.apache.cassandra.service.snapshot.SnapshotLoader.loadSnapshots(SnapshotLoader.java:173)
	at org.apache.cassandra.service.snapshot.SnapshotLoader.loadSnapshots(SnapshotLoader.java:189)
	at org.apache.cassandra.service.snapshot.SnapshotManager.loadSnapshots(SnapshotManager.java:119)
	at org.apache.cassandra.service.snapshot.SnapshotManager.start(SnapshotManager.java:88)
	at org.apache.cassandra.service.StorageService.startSnapshotManager(StorageService.java:1160)
	at org.apache.cassandra.distributed.impl.Instance.lambda$startup$12(Instance.java:712)
	at org.apache.cassandra.concurrent.FutureTask$1.call(FutureTask.java:96)
	at org.apache.cassandra.concurrent.SyncFutureTask.run(SyncFutureTask.java:68)
	at org.apache.cassandra.simulator.systems.InterceptingExecutor$InterceptingPooledExecutor$WaitingThread.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$1(InterceptingExecutor.java:317)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;since close error is suppressed, looks like startup fails and close sees a write, so possible this stack trace may help show what is running while the future is complete?&lt;/p&gt;</comment>
                            <comment id="17699759" author="dcapwell" created="Mon, 13 Mar 2023 17:46:00 +0000"  >&lt;p&gt;looking at the code I feel the following could be happening&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void shutdownBlocking() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException
    {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!started)
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;

        started = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        executor.shutdown();
        executor.awaitTermination();
        segmentManager.shutdown();
        segmentManager.awaitTermination(1L, TimeUnit.MINUTES);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If we shutdown before close calls this, then the close future will be success right away as there isn&apos;t actually a blocking call... creating a shutdown future would help solve that&lt;/p&gt;

&lt;p&gt;Sadly Simulator isn&apos;t showing you the seed in the exception, so hard to confirm such a patch actually solves the problem.&lt;/p&gt;</comment>
                            <comment id="17699777" author="dcapwell" created="Mon, 13 Mar 2023 18:07:27 +0000"  >&lt;p&gt;going to see if I can reproduce, I want to make sure we don&apos;t loose the seed and if blocking on awaitTermination even if another thread did shutdown&lt;/p&gt;</comment>
                            <comment id="17699787" author="dcapwell" created="Mon, 13 Mar 2023 18:32:52 +0000"  >&lt;p&gt;think I have a patch but to help verify I changed simulator to throw error with seed rather than log the seed&lt;/p&gt;

&lt;p&gt;PR: &lt;a href=&quot;https://github.com/apache/cassandra/pull/2213&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2213&lt;/a&gt;&lt;br/&gt;
CI: &lt;a href=&quot;https://app.circleci.com/pipelines/github/dcapwell/cassandra?branch=CASSANDRA-18320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/dcapwell/cassandra?branch=CASSANDRA-18320&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;once I can get a repo, I can see if the patch I have (which is reverted in this branch) fixes it.&lt;/p&gt;</comment>
                            <comment id="17699819" author="dcapwell" created="Mon, 13 Mar 2023 19:54:00 +0000"  >&lt;p&gt;so far simulator looks stable with my patch, which is just&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/src/java/org/apache/cassandra/service/snapshot/SnapshotLoader.java b/src/java/org/apache/cassandra/service/snapshot/SnapshotLoader.java
index 532ea79f1b..37d286d721 100644
--- a/src/java/org/apache/cassandra/service/snapshot/SnapshotLoader.java
+++ b/src/java/org/apache/cassandra/service/snapshot/SnapshotLoader.java
@@ -23,7 +23,6 @@ &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.FileVisitResult;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Files;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.NoSuchFileException;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Path;
-&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Paths;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.SimpleFileVisitor;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.attribute.BasicFileAttributes;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Arrays;
@@ -66,7 +65,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SnapshotLoader

     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; SnapshotLoader(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] dataDirectories)
     {
-        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(Arrays.stream(dataDirectories).map(Paths::get).collect(Collectors.toList()));
+        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(Arrays.stream(dataDirectories).map(File::&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;).map(File::toPath).collect(Collectors.toList()));
     }

     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; SnapshotLoader(Collection&amp;lt;Path&amp;gt; dataDirs)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This looks like Paths.get is unsafe as its defined as&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Path get(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; first, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... more) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; FileSystems.getDefault().getPath(first, more);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since we don&apos;t override the default file system (its app ClassLoader and final) all usage will produce a Path that has a different FileSystem than File does; this implies that mixing Path and File may not be safe in the context of Simulator...&lt;/p&gt;

&lt;p&gt;Ill talk to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt; about this when he gets back&lt;/p&gt;</comment>
                            <comment id="17699830" author="dcapwell" created="Mon, 13 Mar 2023 21:00:58 +0000"  >&lt;p&gt;Turns out File has a TODO to remove Paths.get... so I added a check style to block it and migrated all usage away.&lt;/p&gt;

&lt;p&gt;There was one issue with Checkstyle... Paths.get matches absolutePaths.get... so I block Paths class from being imported...&lt;/p&gt;</comment>
                            <comment id="17699848" author="dcapwell" created="Mon, 13 Mar 2023 22:01:15 +0000"  >&lt;p&gt;patch is mostly stable (OOMs from time to time...; but jdk11 is stable &lt;a href=&quot;https://app.circleci.com/pipelines/github/dcapwell/cassandra/1928/workflows/e38a054b-a97f-4a84-bf88-b4abceb5947f/jobs/18273&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/dcapwell/cassandra/1928/workflows/e38a054b-a97f-4a84-bf88-b4abceb5947f/jobs/18273&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="17699850" author="maedhroz" created="Mon, 13 Mar 2023 22:06:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17699859" author="dcapwell" created="Mon, 13 Mar 2023 22:28:05 +0000"  >&lt;p&gt;won&apos;t commit today, want to give time to others to see if desired&lt;/p&gt;</comment>
                            <comment id="17699876" author="smiklosovic" created="Mon, 13 Mar 2023 23:22:57 +0000"  >&lt;p&gt;I will wait until this is merged so we can release 4.1.1 with it.&lt;/p&gt;

&lt;p&gt;I dont see any problem with the patch.&lt;/p&gt;</comment>
                            <comment id="17700023" author="smiklosovic" created="Tue, 14 Mar 2023 08:41:21 +0000"  >&lt;p&gt;Actually, we do not need to wait for this to appear in 4.1.1 because this is just test-related.&lt;/p&gt;</comment>
                            <comment id="17700100" author="brandon.williams" created="Tue, 14 Mar 2023 11:12:59 +0000"  >&lt;p&gt;This looks good to me and I can unsurprisingly no longer reproduce, +1.&lt;/p&gt;</comment>
                            <comment id="17700318" author="dcapwell" created="Tue, 14 Mar 2023 17:32:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;Actually, we do not need to wait for this to appear in 4.1.1 because this is just test-related.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt; this is only an issue in Simulator as it overrides the default FileSystem.  If you run embedded Cassandra and leverage this logic, then there are edge cases for you, else you would never see this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I can unsurprisingly no longer reproduce&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yay!  I ran _repeat jobs around 5 times and only ever saw OOM (not the &quot;I can not make progress&quot; OOM, but a real one (likely direct memory given the stack trace)).  As far as I can tell, the loading logic fails due to this bug which causes weird cascading issues; those issues are what was reported.&lt;/p&gt;</comment>
                            <comment id="17700324" author="dcapwell" created="Tue, 14 Mar 2023 17:52:13 +0000"  >&lt;p&gt;Starting commit&lt;/p&gt;

&lt;p&gt;CI Results (pending):&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Source&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Circle CI&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Jenkins&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;cassandra-4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/dcapwell/cassandra/tree/commit_remote_branch/CASSANDRA-18320-cassandra-4.1-FA990C99-FC38-4C68-91A6-96C4A8303CE3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/dcapwell/cassandra?branch=commit_remote_branch%2FCASSANDRA-18320-cassandra-4.1-FA990C99-FC38-4C68-91A6-96C4A8303CE3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/2350/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/dcapwell/cassandra/tree/commit_remote_branch/CASSANDRA-18320-trunk-FA990C99-FC38-4C68-91A6-96C4A8303CE3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/dcapwell/cassandra?branch=commit_remote_branch%2FCASSANDRA-18320-trunk-FA990C99-FC38-4C68-91A6-96C4A8303CE3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/2351/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17700354" author="dcapwell" created="Tue, 14 Mar 2023 19:41:40 +0000"  >&lt;p&gt;Circle CI is failing, so holding off until I can get a build working... Jenkins is chugging alone, so will see what happens&lt;/p&gt;</comment>
                            <comment id="17700814" author="dcapwell" created="Wed, 15 Mar 2023 18:32:01 +0000"  >&lt;p&gt;CI was unstable yesterday so triggered new circle build to see if things are better now&lt;/p&gt;</comment>
                            <comment id="17700895" author="dcapwell" created="Wed, 15 Mar 2023 23:14:22 +0000"  >&lt;p&gt;CI is clean, going to start merging&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13521174">CASSANDRA-18196</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dcapwell]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12990" cascade-level="1"><![CDATA[Test Failure]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1gi1k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
        <customfieldvalue><![CDATA[maedhroz]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12352689">4.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/d5b1483703b53c02fb0e616e58107afb814f9f81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/d5b1483703b53c02fb0e616e58107afb814f9f81&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;ran ci&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>