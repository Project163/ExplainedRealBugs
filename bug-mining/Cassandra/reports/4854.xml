<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:08:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13620] Don&apos;t skip corrupt sstables on startup</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13620</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;If we get an IOException when opening an sstable on startup, we just &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/io/sstable/format/SSTableReader.java#L563-L567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;skip&lt;/a&gt; it and continue starting&lt;/p&gt;

&lt;p&gt;we should use the DiskFailurePolicy and never explicitly catch an IOException here&lt;/p&gt;</description>
                <environment></environment>
        <key id="13080802">CASSANDRA-13620</key>
            <summary>Don&apos;t skip corrupt sstables on startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="marcuse">Marcus Eriksson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jun 2017 12:02:15 +0000</created>
                <updated>Fri, 15 May 2020 08:02:35 +0000</updated>
                            <resolved>Mon, 28 Aug 2017 13:43:22 +0000</resolved>
                                        <fixVersion>3.0.15</fixVersion>
                    <fixVersion>3.11.1</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Local/SSTable</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16054008" author="krummas" created="Mon, 19 Jun 2017 13:40:32 +0000"  >&lt;p&gt;Patch to catch IOExceptions and rethrow them as CorruptSSTableExceptions - if we get an IOException when opening an sstable, it should be considered corrupt&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/13620&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/13620&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/13620-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/13620-3.11&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/13620-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/13620-trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The trunk version removes the &lt;tt&gt;throws IOException&lt;/tt&gt; from all open* methods, I kept it in the earlier versions as I guess it can be considered a public API&lt;/p&gt;</comment>
                            <comment id="16075460" author="aweisberg" created="Wed, 5 Jul 2017 21:30:31 +0000"  >&lt;p&gt;Can you run the dtests on this just to make sure the change in logging and signatures doesn&apos;t break any tests?&lt;/p&gt;</comment>
                            <comment id="16076038" author="krummas" created="Thu, 6 Jul 2017 06:52:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/116/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/116/&lt;/a&gt;&lt;br/&gt;
Only running for 3.0 so far, if they look good I&apos;ll trigger for the other branches&lt;/p&gt;</comment>
                            <comment id="16139673" author="krummas" created="Thu, 24 Aug 2017 07:05:21 +0000"  >&lt;p&gt;3.0:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/210/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/210/testReport/&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12883498/12883498_13620-3.0.png&quot; title=&quot;13620-3.0.png attached to CASSANDRA-13620&quot;&gt;13620-3.0.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;3.11:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/208/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/208/testReport/&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12883497/12883497_13620-3.11.png&quot; title=&quot;13620-3.11.png attached to CASSANDRA-13620&quot;&gt;13620-3.11.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;trunk:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/207/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/207/testReport/&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12883499/12883499_13620-trunk.png&quot; title=&quot;13620-trunk.png attached to CASSANDRA-13620&quot;&gt;13620-trunk.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;trying to figure out if any of the failures are caused by this patch&lt;/p&gt;</comment>
                            <comment id="16140531" author="aweisberg" created="Thu, 24 Aug 2017 19:08:14 +0000"  >&lt;p&gt;I recognize all of them except ttl_is_respected_on_repair and test_13691.&lt;/p&gt;

&lt;p&gt;13691 failed on the 3.0 branch. ttl_is_respected_on_repair failed maybe once in the last 30 builds on the 3.0 branch, but not on 3.11 or trunk.&lt;/p&gt;

&lt;p&gt;The issue looks like the environment?&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Error Message

[Errno 20] Not a directory: &apos;/tmp/dtest-Bx7qYJ/test/node2/bin/cassandra&apos;
-------------------- &amp;gt;&amp;gt; begin captured logging &amp;lt;&amp;lt; --------------------
dtest: DEBUG: cluster ccm directory: /tmp/dtest-Bx7qYJ
dtest: DEBUG: Done setting configuration options:
{   &apos;initial_token&apos;: None,
    &apos;num_tokens&apos;: &apos;32&apos;,
    &apos;phi_convict_threshold&apos;: 5,
    &apos;range_request_timeout_in_ms&apos;: 10000,
    &apos;read_request_timeout_in_ms&apos;: 10000,
    &apos;request_timeout_in_ms&apos;: 10000,
    &apos;truncate_request_timeout_in_ms&apos;: 10000,
    &apos;write_request_timeout_in_ms&apos;: 10000}
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
cassandra.connection: WARNING: Heartbeat failed for connection (140182908452560) to 127.0.0.2
cassandra.cluster: WARNING: Host 127.0.0.2 has been marked down
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 2.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 4.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 8.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
cassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 16.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused
--------------------- &amp;gt;&amp;gt; end captured logging &amp;lt;&amp;lt; ---------------------
Stacktrace

  File &quot;/usr/lib/python2.7/unittest/case.py&quot;, line 320, in run
    self.setUp()
  File &quot;/home/jenkins/jenkins-slave/workspace/Cassandra-devbranch-dtest/cassandra-dtest/ttl_test.py&quot;, line 349, in setUp
    self.cluster.populate(2).start()
  File &quot;/home/jenkins/jenkins-slave/workspace/Cassandra-devbranch-dtest/venv/local/lib/python2.7/site-packages/ccmlib/cluster.py&quot;, line 393, in start
    p = node.start(update_pid=False, jvm_args=jvm_args, profile_options=profile_options, verbose=verbose, quiet_start=quiet_start, allow_root=allow_root)
  File &quot;/home/jenkins/jenkins-slave/workspace/Cassandra-devbranch-dtest/venv/local/lib/python2.7/site-packages/ccmlib/node.py&quot;, line 617, in start
    os.chmod(launch_bin, os.stat(launch_bin).st_mode | stat.S_IEXEC)
&quot;[Errno 20] Not a directory: &apos;/tmp/dtest-Bx7qYJ/test/node2/bin/cassandra&apos;\n-------------------- &amp;gt;&amp;gt; begin captured logging &amp;lt;&amp;lt; --------------------\ndtest: DEBUG: cluster ccm directory: /tmp/dtest-Bx7qYJ\ndtest: DEBUG: Done setting configuration options:\n{   &apos;initial_token&apos;: None,\n    &apos;num_tokens&apos;: &apos;32&apos;,\n    &apos;phi_convict_threshold&apos;: 5,\n    &apos;range_request_timeout_in_ms&apos;: 10000,\n    &apos;read_request_timeout_in_ms&apos;: 10000,\n    &apos;request_timeout_in_ms&apos;: 10000,\n    &apos;truncate_request_timeout_in_ms&apos;: 10000,\n    &apos;write_request_timeout_in_ms&apos;: 10000}\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 512.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\ncassandra.connection: WARNING: Heartbeat failed for connection (140182908452560) to 127.0.0.2\ncassandra.cluster: WARNING: Host 127.0.0.2 has been marked down\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 2.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 4.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 8.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\ncassandra.pool: WARNING: Error attempting to reconnect to 127.0.0.2, scheduling retry in 16.0 seconds: [Errno 111] Tried connecting to [(&apos;127.0.0.2&apos;, 9042)]. Last error: Connection refused\n--------------------- &amp;gt;&amp;gt; end captured logging &amp;lt;&amp;lt; ---------------------&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16141263" author="krummas" created="Fri, 25 Aug 2017 06:29:16 +0000"  >&lt;p&gt;yeah, the suspicious tests pass locally multiple times&lt;/p&gt;</comment>
                            <comment id="16143785" author="krummas" created="Mon, 28 Aug 2017 13:43:22 +0000"  >&lt;p&gt;Committed as &lt;tt&gt;dfbe3fabd266493e69&lt;/tt&gt;, thanks&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12720540">CASSANDRA-7377</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12883498" name="13620-3.0.png" size="487415" author="marcuse" created="Thu, 24 Aug 2017 07:04:35 +0000"/>
                            <attachment id="12883497" name="13620-3.11.png" size="340734" author="marcuse" created="Thu, 24 Aug 2017 07:04:37 +0000"/>
                            <attachment id="12883499" name="13620-trunk.png" size="298637" author="marcuse" created="Thu, 24 Aug 2017 07:04:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12986" cascade-level="1"><![CDATA[Recoverable Corruption / Loss]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gfuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aweisberg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aweisberg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>