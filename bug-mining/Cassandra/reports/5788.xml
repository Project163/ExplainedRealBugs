<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:21:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-15663] DESCRIBE KEYSPACE does not properly quote table names</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-15663</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;How to reproduce (3.11.6) - cqlsh:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE KEYSPACE test1 WITH replication = \{&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;} AND durable_writes = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
CREATE TABLE test1.&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt; (id text PRIMARY KEY, data text, etag text);
DESCRIBE KEYSPACE test1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output will be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE TABLE test1.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; (
 id text PRIMARY KEY,
 data text,
 etag text
) WITH [..]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output should be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE TABLE test1.&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt; (
 id text PRIMARY KEY,
 data text,
 etag text
) WITH [..]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;If you try to run &lt;tt&gt;CREATE TABLE test1.default &lt;span class=&quot;error&quot;&gt;&amp;#91;..&amp;#93;&lt;/span&gt;&lt;/tt&gt; you will get an error &lt;/p&gt;

&lt;p&gt;SyntaxException: line 1:19 no viable alternative at input &apos;default&apos; (CREATE TABLE test1.&lt;span class=&quot;error&quot;&gt;&amp;#91;default&amp;#93;&lt;/span&gt;...)&lt;/p&gt;

&lt;p&gt;Oskar Liljeblad&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13294090">CASSANDRA-15663</key>
            <summary>DESCRIBE KEYSPACE does not properly quote table names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Gerrrr">Alex Sorokoumov</assignee>
                                    <reporter username="oskar3215">Oskar Liljeblad</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 26 Mar 2020 06:13:11 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:48 +0000</updated>
                            <resolved>Tue, 13 Jul 2021 12:41:20 +0000</resolved>
                                        <fixVersion>3.11.11</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>CQL/Syntax</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17070880" author="gerrrr" created="Mon, 30 Mar 2020 10:53:51 +0000"  >&lt;p&gt;I reproduced the bug in 3.11 and 4.0. It is not reproducible in 3.0:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cqlsh&amp;gt; CREATE KEYSPACE test1 WITH replication = {&apos;class&apos;: &apos;SimpleStrategy&apos;, &apos;replication_factor&apos;: &apos;1&apos;} AND durable_writes = true;
cqlsh&amp;gt; CREATE TABLE test1.default (id text PRIMARY KEY, data text, etag text);
cqlsh&amp;gt; describe table test1.default;

CREATE TABLE test1.default (
    id text PRIMARY KEY,
    data text,
    etag text
) WITH bloom_filter_fp_chance = 0.01
    AND caching = {&apos;keys&apos;: &apos;ALL&apos;, &apos;rows_per_partition&apos;: &apos;NONE&apos;}
    AND comment = &apos;&apos;
    AND compaction = {&apos;class&apos;: &apos;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&apos;, &apos;max_threshold&apos;: &apos;32&apos;, &apos;min_threshold&apos;: &apos;4&apos;}
    AND compression = {&apos;chunk_length_in_kb&apos;: &apos;64&apos;, &apos;class&apos;: &apos;org.apache.cassandra.io.compress.LZ4Compressor&apos;}
    AND crc_check_chance = 1.0
    AND dclocal_read_repair_chance = 0.1
    AND default_time_to_live = 0
    AND gc_grace_seconds = 864000
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = &apos;99PERCENTILE&apos;;

cqlsh&amp;gt; DROP TABLE test1.default;
cqlsh&amp;gt; CREATE TABLE test1.default (
   ...     id text PRIMARY KEY,
   ...     data text,
   ...     etag text
   ... ) WITH bloom_filter_fp_chance = 0.01
   ...     AND caching = {&apos;keys&apos;: &apos;ALL&apos;, &apos;rows_per_partition&apos;: &apos;NONE&apos;}
   ...     AND comment = &apos;&apos;
   ...     AND compaction = {&apos;class&apos;: &apos;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&apos;, &apos;max_threshold&apos;: &apos;32&apos;, &apos;min_threshold&apos;: &apos;4&apos;}
   ...     AND compression = {&apos;chunk_length_in_kb&apos;: &apos;64&apos;, &apos;class&apos;: &apos;org.apache.cassandra.io.compress.LZ4Compressor&apos;}
   ...     AND crc_check_chance = 1.0
   ...     AND dclocal_read_repair_chance = 0.1
   ...     AND default_time_to_live = 0
   ...     AND gc_grace_seconds = 864000
   ...     AND max_index_interval = 2048
   ...     AND memtable_flush_period_in_ms = 0
   ...     AND min_index_interval = 128
   ...     AND read_repair_chance = 0.0
   ...     AND speculative_retry = &apos;99PERCENTILE&apos;;

Warnings :
dclocal_read_repair_chance table option has been deprecated and will be removed in version 4.0

dclocal_read_repair_chance table option has been deprecated and will be removed in version 4.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17070888" author="gerrrr" created="Mon, 30 Mar 2020 11:13:28 +0000"  >&lt;p&gt;I opened a PR&#160; to &lt;a href=&quot;https://github.com/datastax/python-driver/pull/1075&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;datastax/python-driver&lt;/a&gt;. This patch adds &lt;tt&gt;default&lt;/tt&gt; to a list of cql keywords and fixes the issue. Once it is merged, I will cherry-pick it to 3.11 and update the driver version for 4.0.&lt;/p&gt;</comment>
                            <comment id="17077316" author="aholmber" created="Tue, 7 Apr 2020 15:01:09 +0000"  >&lt;p&gt;Python driver 3.23 went out last week, including this change.&lt;/p&gt;</comment>
                            <comment id="17079497" author="gerrrr" created="Thu, 9 Apr 2020 15:41:14 +0000"  >&lt;p&gt;Python driver 3.23 has a dependency on &lt;tt&gt;geomet&lt;/tt&gt; that is not present in C* 3.11. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aboudreault&quot; class=&quot;user-hover&quot; rel=&quot;aboudreault&quot;&gt;aboudreault&lt;/a&gt; and I considered the following options:&lt;br/&gt;
1. cherry-pick &lt;a href=&quot;https://github.com/datastax/python-driver/commit/607ff52c7521f179fc944df4dfc9ddb075fbb30d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;607ff52&lt;/a&gt; on top of the driver version used in 3.11.&lt;br/&gt;
2. update the driver version to 3.23 and add &lt;tt&gt;geomet&lt;/tt&gt; zipfile to &lt;tt&gt;lib&lt;/tt&gt;.&lt;br/&gt;
3. make &lt;tt&gt;geomet&lt;/tt&gt; optional in the next driver release and update the driver for C* 3.11 then.&lt;/p&gt;

&lt;p&gt;We agreed to proceed with the last option. I believe that this would not be an problem for 4.0 and 3.11 both as this is far from being a critical issue.&lt;/p&gt;</comment>
                            <comment id="17085750" author="blerer" created="Fri, 17 Apr 2020 13:36:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; I am currently reviewing &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14825&quot; title=&quot;Expose table schema for drivers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14825&quot;&gt;&lt;del&gt;CASSANDRA-14825&lt;/del&gt;&lt;/a&gt; that should fix that problem as the code will not use the python driver anymore for DESCRIBE.&lt;/p&gt;</comment>
                            <comment id="17085954" author="aholmber" created="Fri, 17 Apr 2020 17:45:45 +0000"  >&lt;p&gt;I think it&apos;s still a good idea to get the Python driver updated for 4.0&#160;&lt;em&gt;somewhere&lt;/em&gt;. Driver 3.23 has some unrelated updates for 4.0 (parsing transient replica options, for example). Does it make sense to just finish this independent of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14825&quot; title=&quot;Expose table schema for drivers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14825&quot;&gt;&lt;del&gt;CASSANDRA-14825&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17088028" author="blerer" created="Mon, 20 Apr 2020 19:21:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aholmber&quot; class=&quot;user-hover&quot; rel=&quot;aholmber&quot;&gt;aholmber&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; If you prefer to continue with this ticket. It is fine for me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I just wanted to raise the fact that the problem will be fixed by another ticket.&lt;/p&gt;</comment>
                            <comment id="17120293" author="jmckenzie" created="Sat, 30 May 2020 16:16:06 +0000"  >&lt;p&gt;Do we want to close this out in favor of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14825&quot; title=&quot;Expose table schema for drivers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14825&quot;&gt;&lt;del&gt;CASSANDRA-14825&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17123449" author="gerrrr" created="Tue, 2 Jun 2020 07:35:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmckenzie&quot; class=&quot;user-hover&quot; rel=&quot;jmckenzie&quot;&gt;jmckenzie&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14825&quot; title=&quot;Expose table schema for drivers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14825&quot;&gt;&lt;del&gt;CASSANDRA-14825&lt;/del&gt;&lt;/a&gt; solves the issue for 4.0. The ticket is still valid for 3.11. To fix it in 3.11, we need to update python driver to the latest version that already has &lt;a href=&quot;https://github.com/datastax/python-driver/commit/607ff52c7521f179fc944df4dfc9ddb075fbb30d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;607ff52&lt;/a&gt;. A side effect of doing that right now is that the new driver depends on external library that we&apos;ll need to bring as well - &lt;tt&gt;geomet&lt;/tt&gt;. We discussed this with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aboudreault&quot; class=&quot;user-hover&quot; rel=&quot;aboudreault&quot;&gt;aboudreault&lt;/a&gt; and he suggested to make dependency on that library optional in the next release. &lt;/p&gt;

&lt;p&gt;I suggest to remove &lt;tt&gt;fix version 4.0-alpha&lt;/tt&gt; as the issue there will be fixed without any changes in this ticket. As for 3.11, I&apos;d keep the ticket opened until the next driver version. WDYT?&lt;/p&gt;</comment>
                            <comment id="17124057" author="aholmber" created="Tue, 2 Jun 2020 17:02:04 +0000"  >&lt;p&gt;Sounds good. The next driver is only a couple weeks out. We&apos;ll ping here when it lands. (/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aboudreault&quot; class=&quot;user-hover&quot; rel=&quot;aboudreault&quot;&gt;aboudreault&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="17139873" author="aboudreault" created="Thu, 18 Jun 2020 17:30:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt;&#160;We just released cassandra driver 3.24. geomet is not required anymore at runtime.&lt;/p&gt;</comment>
                            <comment id="17146374" author="gerrrr" created="Fri, 26 Jun 2020 14:47:05 +0000"  >&lt;p&gt;Thanks Alan!&lt;/p&gt;

&lt;p&gt;Here are the patches:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;PR to update python driver in Cassandra 3.11 - &lt;a href=&quot;https://github.com/apache/cassandra/pull/654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/654&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;PR to fix &lt;tt&gt;test_describe_functions&lt;/tt&gt; broken by driver upgrade - &lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra-dtest/pull/81&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;CI run&#160; - &lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/154/tests/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/154/tests/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I checked the rest of the failing tests manually. Test failures either do not reproduce locally or fail as well on the base branch.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17158527" author="maedhroz" created="Wed, 15 Jul 2020 16:51:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; I&apos;ve just filed &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15948&quot; title=&quot;Multiple failures in cqlsh_tests.test_cqlsh.TestCqlsh&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15948&quot;&gt;&lt;del&gt;CASSANDRA-15948&lt;/del&gt;&lt;/a&gt;. It&apos;s not clear to me how much this overlaps.&lt;/p&gt;</comment>
                            <comment id="17195546" author="adelapena" created="Mon, 14 Sep 2020 15:49:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aboudreault&quot; class=&quot;user-hover&quot; rel=&quot;aboudreault&quot;&gt;aboudreault&lt;/a&gt; It seems that the Python driver fix still misses the reserved keywords &lt;tt&gt;mbean&lt;/tt&gt; and &lt;tt&gt;mbeans&lt;/tt&gt;, so using them as table names produces the same behaviour as &lt;tt&gt;default&lt;/tt&gt; does without the fix. &lt;/p&gt;

&lt;p&gt;The keywords &lt;tt&gt;default&lt;/tt&gt;, &lt;tt&gt;mbean&lt;/tt&gt;, &lt;tt&gt;mbeans&lt;/tt&gt; and &lt;tt&gt;unset&lt;/tt&gt; where added to &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.11/src/java/org/apache/cassandra/cql3/ReservedKeywords.java#L91-L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;ReservedKeywords&lt;/tt&gt;&lt;/a&gt; by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14205&quot; title=&quot;ReservedKeywords class is missing some reserved CQL keywords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14205&quot;&gt;&lt;del&gt;CASSANDRA-14205&lt;/del&gt;&lt;/a&gt;, and it seems they didn&apos;t make it into that driver set of keywords. However, &lt;tt&gt;unset&lt;/tt&gt; is in the driver&apos;s set as a DSE specific, even though it really isn&apos;t so.&lt;/p&gt;</comment>
                            <comment id="17221615" author="aboudreault" created="Tue, 27 Oct 2020 17:53:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt; This will be fixed for the next release: &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-1269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://datastax-oss.atlassian.net/browse/PYTHON-1269&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17222103" author="adelapena" created="Wed, 28 Oct 2020 11:16:47 +0000"  >&lt;p&gt;Great. Should we wait until 3.25.0 containing &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-1269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PYTHON-1269&lt;/a&gt; is ready, or commit this a it is and create another ticket for &lt;tt&gt;MBEAN&lt;/tt&gt; and &lt;tt&gt;MBEANS&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="17222108" author="gerrrr" created="Wed, 28 Oct 2020 11:33:42 +0000"  >&lt;p&gt;+1 to waiting for 3.25.0. Regarding &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-1269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PYTHON-1269&lt;/a&gt;, I plan to work on it next week if no-one takes it before that.&lt;/p&gt;</comment>
                            <comment id="17368913" author="gerrrr" created="Thu, 24 Jun 2021 15:03:15 +0000"  >&lt;p&gt;Python driver 3.25.0 with fixed &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-1269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PYTHON-1269&lt;/a&gt; was released a while ago. Unfortunately, with the new driver version Cassandra server logs the following errors in dtests:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Protocol exception with client networking: org.apache.cassandra.transport.ProtocolException: Beta version of the protocol used (5/v5-beta), but USE_BETA flag is unset
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;AFAIU this happens because 3.11 classifies V5 as beta while 3.25.0 considers it stable.&lt;/p&gt;

&lt;p&gt;I don&apos;t think it is a good idea to introduce protocol-level warnings in the trivial bug fix, therefore I cherry-picked &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-1269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PYTHON-1269&lt;/a&gt; into 3.24.0. Patches:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;PR to update python driver in Cassandra 3.11 - &lt;a href=&quot;https://github.com/apache/cassandra/pull/654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/654&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;PR to fix &lt;tt&gt;test_describe_functions&lt;/tt&gt; broken by the driver upgrade - &lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra-dtest/pull/148&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt; Can you please review?&lt;/p&gt;</comment>
                            <comment id="17371962" author="adelapena" created="Wed, 30 Jun 2021 11:53:32 +0000"  >&lt;p&gt;Sure, I&apos;m taking a look&lt;/p&gt;</comment>
                            <comment id="17372021" author="adelapena" created="Wed, 30 Jun 2021 14:10:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt;&#160;made changes in cqlsh to not pull the list of reserved keywords from the driver but to have it in a constant. Maybe we could backport this to 3.11?&lt;/p&gt;</comment>
                            <comment id="17373711" author="gerrrr" created="Fri, 2 Jul 2021 18:02:50 +0000"  >&lt;p&gt;Unfortunately, solving this issue by porting &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt; will be even more invasive than upgrading and patching drivers.&lt;/p&gt;

&lt;p&gt;The difficulty lies in pylib relying heavily on the drivers to escape and convert statements to strings. For example:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;cql3handling.py&lt;/tt&gt;, &lt;tt&gt;copyutil.py&lt;/tt&gt;, &lt;tt&gt;cqlsh.py&lt;/tt&gt; use &lt;tt&gt;maybe_escape_name&lt;/tt&gt;, &lt;tt&gt;protect_name&lt;/tt&gt;, &lt;tt&gt;protect_names&lt;/tt&gt; functions from the driver that in turn use driver&apos;s list of reserved keywords.&lt;/li&gt;
	&lt;li&gt;Use of &lt;tt&gt;export_as_string&lt;/tt&gt; in &lt;tt&gt;cqlsh.py&lt;/tt&gt; which in turn calls the same method for parts of the statements - aggregates, functions, etc.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The former is easy to fix, e.g., by copying these functions to &lt;tt&gt;cql3handling.py&lt;/tt&gt;. However, to solve the latter, we&apos;ll have to copy over the vast majority of the driver&apos;s &lt;a href=&quot;https://github.com/datastax/python-driver/blob/master/cassandra/metadata.py&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;metadata.py&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;WDYT?&lt;/p&gt;</comment>
                            <comment id="17375610" author="adelapena" created="Tue, 6 Jul 2021 11:35:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt;&#160;you are totally right, the solution in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt; is not enough since pylib indirectly depends on &lt;tt&gt;cql_keywords_reserved&lt;/tt&gt; on multiple places. I think we should probably have a followup ticket on 4.0/4.x for either reverting that approach and go back to using the driver keywords, or completing the fix by removing the remaining dependencies. CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As for this ticket, I agree that upgrading and patching the driver is the way to go. However, it seems that something is missed in the upgraded driver since it&apos;s not finding the dependency on both &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/635/workflows/762f47f2-0419-4e06-a342-d5258f1bbf16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt; and &lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/892/tests/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Jenkins&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17376134" author="edimitrova" created="Wed, 7 Jul 2021 00:52:15 +0000"  >&lt;p&gt;Thanks for the ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;. I spent some time today on this to remind myself of that issue.&lt;/p&gt;

&lt;p&gt;Indeed, it seems autocomplete and maybe some other cases show quotes and the fix we worked on in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt; is not full.&lt;/p&gt;

&lt;p&gt;First I thought, I should just update the reserved keywords in the driver but then I reminded myself of &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-1270&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://datastax-oss.atlassian.net/browse/PYTHON-1270&lt;/a&gt;&#160;which was discussed here&#160;and I confirmed that the reported non-keyword in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt; is actually a keyword for DSE.&#160;&lt;/p&gt;

&lt;p&gt;It seems &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt; was not really a bug but improvement if I read correctly PYTHON-1270.&lt;/p&gt;

&lt;p&gt;So I guess we have two options for this case - either we keep &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt; patch as partial improvement or we revert it. As far as I know from Adam, no one planned to work on the driver improvement for now.&lt;/p&gt;

&lt;p&gt;Probably we can document this detail in a way as a known behavior?&lt;/p&gt;

&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aboudreault&quot; class=&quot;user-hover&quot; rel=&quot;aboudreault&quot;&gt;aboudreault&lt;/a&gt;&#160;as I saw he was also updating the DSE cql keywords list so probably there were already similar discussions and output he might be able to share with us.&#160;&lt;/p&gt;</comment>
                            <comment id="17376614" author="adelapena" created="Wed, 7 Jul 2021 14:49:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/638/workflows/9828c5f2-9207-44f7-bba7-d37e74842ac6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Last CI results&lt;/a&gt; for the upgraded and patched driver look better.&lt;/p&gt;

&lt;p&gt;It seems that the ideal solution would be having&#160;PYTHON-1270, but it seems that this isn&apos;t going to happen soon. I guess that if we are going to ship a patched version of the driver we should also remove the DSE-only keywords, to avoid problems like the one that can be seen with this example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE KEYSPACE node WITH replication = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;};
DESCRIBE KEYSPACES; # &lt;span class=&quot;code-quote&quot;&gt;&quot;node&quot;&lt;/span&gt; is quoted
DESCRIBE KEYSPACE node; # Improper DESCRIBE command.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Alternatively, following the approach used in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt;, we could try to modify &lt;tt&gt;cqlhandling.py&lt;/tt&gt; to just override the sets of keywords in the driver&apos;s &lt;tt&gt;metadata&lt;/tt&gt;. That way the driver&apos;s methods &lt;tt&gt;maybe_escape_name&lt;/tt&gt;, &lt;tt&gt;protect_name&lt;/tt&gt;, &lt;tt&gt;export_as_string&lt;/tt&gt;, etc. would use the &quot;injected&quot; set of reserved keywords. I gave it a go &lt;a href=&quot;https://github.com/adelapena/cassandra/commit/9e94174e8a74cc11f6196e299eadf0d6565311b1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, and I&apos;m trying to run CI on it.&lt;/p&gt;

&lt;p&gt;To add some more confusion, the lists of keywords, reserved keywords and unreserved keywords defined in the driver don&apos;t exactly match what is defined in &lt;tt&gt;Parser.g&lt;/tt&gt;, &lt;tt&gt;Lexer.g&lt;/tt&gt; and &lt;tt&gt;ReservedKeywords.java&lt;/tt&gt;. The driver assumes that the reserved keywords are the difference between all the keywords and the unreserved keywords (see &lt;a href=&quot;https://github.com/Gerrrr/python-driver/blob/master/cassandra/metadata.py#L90-L93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;). However, it seems that &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.11/src/antlr/Lexer.g#L58-L204&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;Lexer.g&lt;/tt&gt;&lt;/a&gt; contains some keywords that aren&apos;t included in neither the list of &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.11/src/antlr/Parser.g#L1640-L1687&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unreserved keywords defined in &lt;tt&gt;Parser.g&lt;/tt&gt;&lt;/a&gt; nor in the &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.11/src/java/org/apache/cassandra/cql3/ReservedKeywords.java#L29-L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;list of reserved keywords defined in &lt;tt&gt;ReservedKeywords.java&lt;/tt&gt;&lt;/a&gt;. These keywords that aren&apos;t included in none of the reserved/unreserved sets are &lt;tt&gt;varint&lt;/tt&gt;, &lt;tt&gt;int&lt;/tt&gt;, &lt;tt&gt;text&lt;/tt&gt;, &lt;tt&gt;float&lt;/tt&gt;, &lt;tt&gt;boolean&lt;/tt&gt;, &lt;tt&gt;ttl&lt;/tt&gt;, &lt;tt&gt;duration&lt;/tt&gt;, &lt;tt&gt;ascii&lt;/tt&gt;, &lt;tt&gt;smallint&lt;/tt&gt;, &lt;tt&gt;uuid&lt;/tt&gt;, &lt;tt&gt;distinct&lt;/tt&gt;, &lt;tt&gt;bigint&lt;/tt&gt;, &lt;tt&gt;json&lt;/tt&gt;, &lt;tt&gt;blob&lt;/tt&gt;, &lt;tt&gt;inet&lt;/tt&gt;, &lt;tt&gt;timeuuid&lt;/tt&gt;, &lt;tt&gt;varchar&lt;/tt&gt;, &lt;tt&gt;timestamp&lt;/tt&gt;, &lt;tt&gt;key&lt;/tt&gt;, &lt;tt&gt;date&lt;/tt&gt;, &lt;tt&gt;count&lt;/tt&gt;, &lt;tt&gt;double&lt;/tt&gt;, &lt;tt&gt;decimal&lt;/tt&gt;, &lt;tt&gt;counter&lt;/tt&gt;, &lt;tt&gt;cast&lt;/tt&gt;, &lt;tt&gt;tinyint&lt;/tt&gt;, &lt;tt&gt;writetime&lt;/tt&gt; and &lt;tt&gt;time&lt;/tt&gt;. The sets of keywords matching the contents of those files would look &lt;a href=&quot;https://github.com/adelapena/cassandra/blob/b15a8bbb25a35f17617966aa5d4e056d3496a6f7/pylib/cqlshlib/cqlhandling.py#L26-L71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;like this&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17376634" author="edimitrova" created="Wed, 7 Jul 2021 15:12:29 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;&#160;for working on a patch. This seems to me IMHO like the best idea at this moment which removes the confusion for the users why they see DSE reserved keywords and also removes the dependency on drivers releases.&#160;&lt;/p&gt;

&lt;p&gt;Let&apos;s see what the CI will show but I definitely like it at this point.&#160;&lt;/p&gt;</comment>
                            <comment id="17376745" author="adelapena" created="Wed, 7 Jul 2021 17:39:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/640/workflows/d3b015ed-7969-4009-a42f-351137729a7a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt;&#160;for the &lt;tt&gt;cqlhandling&lt;/tt&gt; patch looks good to me. If we were going to use that approach we should also port the test added by&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17376951" author="edimitrova" created="Thu, 8 Jul 2021 02:17:27 +0000"  >&lt;p&gt;Should we port this also to 4.0.0 before the release(with the updated list of words of course)?&#160;&lt;/p&gt;</comment>
                            <comment id="17377320" author="gerrrr" created="Thu, 8 Jul 2021 11:17:10 +0000"  >&lt;p&gt;I love the idea to override the set of keywords in the driver! I created a branch that ports &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16659&quot; title=&quot;cqlsh 6.0.0 treats &amp;quot;config&amp;quot; as a reserved keyword&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16659&quot;&gt;&lt;del&gt;CASSANDRA-16659&lt;/del&gt;&lt;/a&gt; on top of Andres&apos;s changes: &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...Gerrrr:15663-3.11-take-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;15663-3.11-take-2&lt;/a&gt; (&lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/180/workflows/44e38774-1c16-40ef-9f87-d5a1d437d6ed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Circle CI&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Here is a separate branch that ports this to 4.0.0: &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...Gerrrr:15663-4.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;15663-4.0&lt;/a&gt; (&lt;a href=&quot;https://app.circleci.com/pipelines/github/Gerrrr/cassandra/181/workflows/e686981d-d02d-48b9-a579-a46105ac3960&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="17377323" author="adelapena" created="Thu, 8 Jul 2021 11:18:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;Should we port this also to 4.0.0 before the release(with the updated list of words of course)?&#160;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m a bit on the fence about porting to 4.0.0, since it&apos;s always scary to risk compromising the stability of the release with a bug that doesn&apos;t seem that bad. However it&apos;s clearly a bug, the solution seems quite straight forward and I like the idea of fixing the list of keywords since the start of a major, so we don&apos;t have changes in between minors. So I think I&apos;d port this to 4.0.0. wdyt?&lt;/p&gt;

&lt;p&gt;Also, I think that the patch only needs to override &lt;tt&gt;metadata.cql_keywords_reserved&lt;/tt&gt;. IIUC &lt;tt&gt;metada.cql_keywords&lt;/tt&gt; and &lt;tt&gt;metadata.cql_keywords_unreserved&lt;/tt&gt; only exist to generate &lt;tt&gt;metadata.cql_keywords_reserved&lt;/tt&gt;, and they aren&apos;t used anywhere else. I think that the reason why it&apos;s done that way in the driver is because in pre-3.0 releases there wasn&apos;t an explicit set of reserved keywords in the server. The Java class &lt;tt&gt;ReservedKeywords&lt;/tt&gt; didn&apos;t exist back then, and all the grammar was in the &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-2.2/src/java/org/apache/cassandra/cql3/Cql.g&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;Cql.g&lt;/tt&gt;&lt;/a&gt; file. That file contained the sets of keywords and unreserved keywords that were used to calculate the set of reserved keywords. So, now that we have a clear list of reserved keywords on the server, we can just use it to override &lt;tt&gt;metadata.cql_keywords_reserved&lt;/tt&gt; and ignore the other sets.&lt;/p&gt;</comment>
                            <comment id="17377424" author="adelapena" created="Thu, 8 Jul 2021 14:28:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt;&#160;thanks for putting everything together, I have created &lt;a href=&quot;https://github.com/apache/cassandra/pull/1105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a PR for 3.11&lt;/a&gt; from your branch and left a few minor comments there.&lt;/p&gt;</comment>
                            <comment id="17378097" author="adelapena" created="Fri, 9 Jul 2021 14:22:09 +0000"  >&lt;p&gt;The patch with the last changes looks good to me. Running CI with the last changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;3.11: &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/650/workflows/f8548311-fbde-4a5c-b8a1-4c3caa3a4675&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;4.0.0: &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/648/workflows/1587d081-bef0-4382-a38d-f3610f1c3b29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/648/workflows/a7ba4f86-9bfd-4380-b771-e7ac9596fcc3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;4.0: &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/647/workflows/43ac879b-b90a-48aa-8c22-7cf85d7992df&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/647/workflows/b9f131c2-39a3-41d6-8fe6-b11079632fc4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;trunk: &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/649/workflows/e1140c43-5cfc-4bef-b83a-a2dd32ac0db4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/649/workflows/525320d2-bea6-43c1-aa3a-6bbd62e55041&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17379863" author="adelapena" created="Tue, 13 Jul 2021 12:37:44 +0000"  >&lt;p&gt;Committed to 3.11 as &lt;a href=&quot;https://github.com/apache/cassandra/commit/2a8e01858f3aa18e72806acfed5f9cfa9d6c6d03&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2a8e01858f3aa18e72806acfed5f9cfa9d6c6d03&lt;/a&gt; and merged up to &lt;a href=&quot;https://github.com/apache/cassandra/commit/906781ecbb76bdd6f06e32ee52348e78d98025d1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/cassandra/commit/096777d6c637995a227baa46b1df5e3e57e76039&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17380150" author="edimitrova" created="Tue, 13 Jul 2021 20:10:44 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; . For the sake of completeness, posting also here - LGTM, thanks! (The patch was approved in Slack before)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13191700">CASSANDRA-14825</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13316973">CASSANDRA-15948</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[Gerrrr]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="13163" cascade-level=""><![CDATA[Code]]></customfieldvalue>
                                <customfieldvalue key="13164" cascade-level="1"><![CDATA[Bug - Unclear Impact]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0cx7k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
        <customfieldvalue><![CDATA[e.dimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12341709">3.11.2</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/2a8e01858f3aa18e72806acfed5f9cfa9d6c6d03&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/2a8e01858f3aa18e72806acfed5f9cfa9d6c6d03&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Thanks Alan!&lt;/p&gt;

&lt;p&gt;Here are the patches:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;PR to update python driver in Cassandra 3.11 - &lt;a href=&quot;https://github.com/apache/cassandra/pull/654&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/654&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;PR to fix &lt;tt&gt;test_describe_functions&lt;/tt&gt; broken by driver upgrade - &lt;a href=&quot;https://github.com/apache/cassandra-dtest/pull/81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra-dtest/pull/81&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;CI run&#160; - &lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/154/tests/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/154/tests/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I checked the rest of the failing tests manually. Test failures either do not reproduce locally or fail as well on the base branch.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>