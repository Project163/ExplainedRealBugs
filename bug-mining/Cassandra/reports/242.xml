<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:12:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-618] json2sstable/sstable2json don&apos;t export/import correct column names when the column family is of BytesType ordering</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-618</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Easy to reproduce.&lt;br/&gt;
1- start with an empty node.&lt;br/&gt;
2- run: client.insert(&quot;Keyspace1&quot;,&lt;br/&gt;
                          key_user_id,&lt;br/&gt;
                          new ColumnPath(&quot;Standard1&quot;, null, &quot;name&quot;.getBytes(&quot;UTF-8&quot;)),&lt;br/&gt;
                          &quot;Ramzi&quot;.getBytes(&quot;UTF-8&quot;),&lt;br/&gt;
                          timestamp,&lt;br/&gt;
                          ConsistencyLevel.ONE)&lt;br/&gt;
3- flush to get sstable&lt;br/&gt;
4- sstable2json and export the sstable to a file&lt;br/&gt;
5- delete sstable&lt;br/&gt;
6- json2sstable and import the json into a new sstable.&lt;br/&gt;
7- sstable2json on new sstable, you will see that the name is different than the name in the original json file. &lt;br/&gt;
Also do a get on the column and it will return no result. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12442906">CASSANDRA-618</key>
            <summary>json2sstable/sstable2json don&apos;t export/import correct column names when the column family is of BytesType ordering</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="urandom">Eric Evans</assignee>
                                    <reporter username="rrabah">Ramzi Rabah</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Dec 2009 20:51:23 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:31 +0000</updated>
                            <resolved>Mon, 14 Dec 2009 21:10:45 +0000</resolved>
                                        <fixVersion>0.5</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12788317" author="jbellis" created="Wed, 9 Dec 2009 21:10:10 +0000"  >&lt;p&gt;Ramzi, could you add a test to SSTableExportTest illustrating the problem?&lt;/p&gt;</comment>
                            <comment id="12788446" author="rrabah" created="Thu, 10 Dec 2009 01:54:45 +0000"  >&lt;p&gt;Attached is a unit test for exporting/importing to json that reproduces this problem&lt;/p&gt;</comment>
                            <comment id="12789576" author="urandom" created="Fri, 11 Dec 2009 22:17:33 +0000"  >&lt;p&gt;The attached patch(s) addresses this by serializing all column names to hex (instead of using the comparators toString()).&lt;/p&gt;</comment>
                            <comment id="12789630" author="rrabah" created="Sat, 12 Dec 2009 01:05:40 +0000"  >&lt;p&gt;Applying the patch I am getting this error when I run ant clean build test:&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Testcase: testImportSuperCf(org.apache.cassandra.tools.SSTableImportTest):	Caused an ERROR&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Invalid localDeleteTime read: -2140491435&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.io.IOException: Invalid localDeleteTime read: -2140491435&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.db.SuperColumnSerializer.deserialize(SuperColumn.java:368)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.db.SuperColumnSerializer.deserialize(SuperColumn.java:325)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.db.filter.SSTableNamesIterator.&amp;lt;init&amp;gt;(SSTableNamesIterator.java:103)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.db.filter.NamesQueryFilter.getSSTableColumnIterator(NamesQueryFilter.java:69)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.cassandra.tools.SSTableImportTest.testImportSuperCf(SSTableImportTest.java:63)&lt;/p&gt;</comment>
                            <comment id="12789746" author="jbellis" created="Sat, 12 Dec 2009 14:34:37 +0000"  >&lt;p&gt;I&apos;m getting that error even w/o the patch, even rolling back to code from dec 9 when i know the tests were passing.  possibly a change in wall clock time is what is causing the test failure?&lt;/p&gt;</comment>
                            <comment id="12790319" author="urandom" created="Mon, 14 Dec 2009 20:01:34 +0000"  >&lt;p&gt;Apparently there is something on the order of 1,000 milliseconds in a second. Who knew.&lt;/p&gt;</comment>
                            <comment id="12790353" author="rrabah" created="Mon, 14 Dec 2009 20:34:39 +0000"  >&lt;p&gt;in SSTableExport.java  for super column name we still use asKey(comparator.getString(column.name()))&lt;br/&gt;
change to byteToHex() besides that, looks good&lt;/p&gt;</comment>
                            <comment id="12790371" author="urandom" created="Mon, 14 Dec 2009 21:10:45 +0000"  >&lt;p&gt;Right you are. Man, I&apos;m batting a thousand with this ticket. Thanks Ramzi!&lt;/p&gt;</comment>
                            <comment id="12792159" author="hudson" created="Thu, 17 Dec 2009 22:03:03 +0000"  >&lt;p&gt;Integrated in Cassandra #291 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/291/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/291/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12427952" name="ASF.LICENSE.NOT.GRANTED--v2-0001-CASSANDRA-618-unittest-that-demonstrates-bug.txt" size="3566" author="urandom" created="Mon, 14 Dec 2009 19:59:47 +0000"/>
                            <attachment id="12427953" name="ASF.LICENSE.NOT.GRANTED--v2-0002-de-serialize-columns-to-from-hex-regardless-of-compara.txt" size="5581" author="urandom" created="Mon, 14 Dec 2009 19:59:47 +0000"/>
                            <attachment id="12427954" name="ASF.LICENSE.NOT.GRANTED--v2-0003-do-trivial-arithmetic-correctly.txt" size="983" author="urandom" created="Mon, 14 Dec 2009 19:59:47 +0000"/>
                            <attachment id="12427554" name="unittest.patch" size="3093" author="rrabah" created="Thu, 10 Dec 2009 01:54:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19784</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g01j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91437</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>