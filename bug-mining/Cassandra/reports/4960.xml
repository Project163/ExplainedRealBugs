<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:10:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13528] nodetool describeclusters shows different snitch info as to what is configured.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13528</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I couldn&apos;t find any similar issue as this one so I&apos;m creating one.&lt;br/&gt;
I noticed that doing nodetool describecluster shows a different Snitch Information as to what is being set in the configuration file.&lt;/p&gt;

&lt;p&gt;My setup is hosted in AWS and I am using Ec2Snitch.&lt;/p&gt;

&lt;p&gt;cassandra@cassandra3$ nodetool describecluster&lt;br/&gt;
Cluster Information:&lt;br/&gt;
	Name: testv3&lt;br/&gt;
	Snitch: org.apache.cassandra.locator.DynamicEndpointSnitch&lt;br/&gt;
	Partitioner: org.apache.cassandra.dht.Murmur3Partitioner&lt;br/&gt;
	Schema versions:&lt;br/&gt;
		fc6e8656-ee7a-341b-9782-b569d1fd1a51: &lt;span class=&quot;error&quot;&gt;&amp;#91;10.0.3.61,10.0.3.62,10.0.3.63&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I checked via MX4J and it shows the same, I haven&apos;t verified tho using a different Snitch and I am using 2.2.6 above and 3.0.X &lt;/p&gt;</description>
                <environment></environment>
        <key id="13071508">CASSANDRA-13528</key>
            <summary>nodetool describeclusters shows different snitch info as to what is configured.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Lerh Low">Lerh Chuan Low</assignee>
                                    <reporter username="superpaul">Paul Villacorta</reporter>
                        <labels>
                            <label>lhf</label>
                    </labels>
                <created>Fri, 12 May 2017 11:17:01 +0000</created>
                <updated>Fri, 15 May 2020 08:05:05 +0000</updated>
                            <resolved>Thu, 18 Jan 2018 12:37:18 +0000</resolved>
                                        <fixVersion>3.11.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Tool/nodetool</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16009739" author="rha" created="Sun, 14 May 2017 13:30:05 +0000"  >&lt;p&gt;Actually &lt;tt&gt;DynamicEndpointSnitch&lt;/tt&gt; is a wrapper, so it wraps &lt;tt&gt;EC2Snitch&lt;/tt&gt; here. When DES is disabled, &lt;tt&gt;nodetool describecluster&lt;/tt&gt; gives you what you expect.  I agree it&apos;s not very user friendly nor very useful.&lt;/p&gt;

&lt;p&gt;Something like this would be more helpful:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Snitch: &amp;lt;Snitch name here e.g. org.apache.cassandra.locator.GossipingPropertyFileSnitch&amp;gt;
DynamicEndpointSnitch: (enabled|disabled)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="16016585" author="lerh low" created="Thu, 18 May 2017 22:45:19 +0000"  >&lt;p&gt;I like that approach, sounds reasonable. I&apos;ve attached some patches, one for 2.1 and one for 2.2, 3.0, 3.X, trunk (it applies cleanly). Any thoughts? &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Cluster Information:
        Name: Test Cluster
        Snitch: org.apache.cassandra.locator.SimpleSnitch
        DynamicEndPointSnitch: enabled
        Partitioner: org.apache.cassandra.dht.Murmur3Partitioner
        Schema versions:
                9cf2fd0e-ab63-348e-b9af-6db0a3da5a29: [127.0.0.1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Cluster Information:
        Name: Test Cluster
        Snitch: org.apache.cassandra.locator.SimpleSnitch
        DynamicEndPointSnitch: disabled
        Partitioner: org.apache.cassandra.dht.Murmur3Partitioner
        Schema versions:
                9cf2fd0e-ab63-348e-b9af-6db0a3da5a29: [127.0.0.1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16016916" author="superpaul" created="Fri, 19 May 2017 05:35:47 +0000"  >&lt;p&gt;I like the solution! It provides proper information of the snitch and eliminates the confusion.&lt;br/&gt;
It would be nice also to have this patch on the forthcoming releases.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="16051234" author="jay.zhuang" created="Fri, 16 Jun 2017 00:26:05 +0000"  >&lt;p&gt;Not sure if changing the behave of the existing JMX interface is a good idea. I would suggest to use &lt;tt&gt;&lt;a href=&quot;https://github.com/apache/cassandra/blob/8b3a60b9a7dbefeecc06bace617279612ec7092d/src/java/org/apache/cassandra/locator/DynamicEndpointSnitch.java#L362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DynamicEndpointSnitchMBean.getSubsnitchClassName()&lt;/a&gt;&lt;/tt&gt;, which will give you the same information.&lt;/p&gt;</comment>
                            <comment id="16051236" author="lerh low" created="Fri, 16 Jun 2017 00:30:44 +0000"  >&lt;p&gt;Hell. My bad, I didn&apos;t know that existed. I&apos;ll look into it, if that already exists then definitely we should use it. Thanks for your suggestion. &lt;/p&gt;</comment>
                            <comment id="16278044" author="lerh low" created="Tue, 5 Dec 2017 05:36:11 +0000"  >&lt;p&gt;Hello, sorry for taking so long on this, it&apos;s ancient by now. I&apos;ve reuploaded a new patch without changing the MBean interfaces, though the UI is slightly different now (less code changes required): &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Cluster Information:
	Name: Test Cluster
	Snitch: org.apache.cassandra.locator.SimpleSnitch
	Partitioner: org.apache.cassandra.dht.Murmur3Partitioner
	Schema versions:
		59a1610b-0384-337c-a2c5-9c8efaba12be: [127.0.0.1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Cluster Information:
	Name: Test Cluster
	Snitch: org.apache.cassandra.locator.DynamicEndpointSnitch
	SubSnitch: org.apache.cassandra.locator.SimpleSnitch
	Partitioner: org.apache.cassandra.dht.Murmur3Partitioner
	Schema versions:
		59a1610b-0384-337c-a2c5-9c8efaba12be: [127.0.0.1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Applies cleanly to 2.1/2.2/3.0.X/3.X, and tested as well. &lt;/p&gt;</comment>
                            <comment id="16323267" author="lerh low" created="Fri, 12 Jan 2018 00:12:40 +0000"  >&lt;p&gt;Just wondering if anyone would like to review the patch? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16324129" author="jjirsa" created="Fri, 12 Jan 2018 15:35:06 +0000"  >&lt;p&gt;Marking patch-available so reviewers see it.&lt;/p&gt;</comment>
                            <comment id="16324462" author="jasobrown" created="Fri, 12 Jan 2018 19:49:06 +0000"  >&lt;p&gt;I can review this.&lt;/p&gt;</comment>
                            <comment id="16324494" author="jasobrown" created="Fri, 12 Jan 2018 20:07:15 +0000"  >&lt;p&gt;This patch works and code is fine, but I kinda like the version that printed like this:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Cluster Information:&lt;br/&gt;
        Snitch: org.apache.cassandra.locator.SimpleSnitch&lt;br/&gt;
        DynamicEndPointSnitch: enabled&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is better because operators can choose to configure the &lt;tt&gt;endpoint_snitch&lt;/tt&gt; in the yaml, and to output that as a &quot;Subsnitch&quot; from &lt;tt&gt;nodetool describecluster&lt;/tt&gt; is little confusing as it&apos;s not what they configured. Calling it Subsnitch is the correct wrt the src code, it&apos;s not operator-friendly.&lt;/p&gt;

&lt;p&gt;Which branches should we apply this change to? I&apos;m thinking 3.11 and trunk. Any strong argument for 3.0?&lt;/p&gt;</comment>
                            <comment id="16329643" author="lerh low" created="Wed, 17 Jan 2018 22:46:10 +0000"  >&lt;p&gt;Thanks for reviewing Jason &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Agreed. For some reason back then I was thinking the code would be less elegant to support that, but now revisiting it it&apos;s still relatively straightforward and doesn&apos;t need too many hacks.&#160;&lt;/p&gt;

&lt;p&gt;So it&apos;s now back to:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Cluster Information:
Name: Test Cluster
Snitch: org.apache.cassandra.locator.SimpleSnitch
DynamicEndPointSnitch: enabled
Partitioner: org.apache.cassandra.dht.Murmur3Partitioner
Schema versions:
59a1610b-0384-337c-a2c5-9c8efaba12be: [127.0.0.1]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Cluster Information:
Name: Test Cluster
Snitch: org.apache.cassandra.locator.SimpleSnitch
DynamicEndPointSnitch: disabled
Partitioner: org.apache.cassandra.dht.Murmur3Partitioner
Schema versions:
59a1610b-0384-337c-a2c5-9c8efaba12be: [127.0.0.1]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Just finished testing this on trunk and 3.11 (patch applies cleanly). Here&apos;s the Github link: &lt;a href=&quot;https://github.com/juiceblender/cassandra/commit/e93c219f86469357e01595f3adcea81efd0dec84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/juiceblender/cassandra/commit/e93c219f86469357e01595f3adcea81efd0dec84&lt;/a&gt;&#160;if that floats your boat more, otherwise the attached patch has also been updated.&#160;&lt;/p&gt;

&lt;p&gt;I believe it actually applies alright all the way down to 2.1 (so we can just apply it to 3.0 if we do wish). But it&apos;s up to you, just let me know.&#160;&lt;/p&gt;</comment>
                            <comment id="16330450" author="jasobrown" created="Thu, 18 Jan 2018 12:37:18 +0000"  >&lt;p&gt;committed as sha &lt;tt&gt;fc3357a00e2b6e56d399f07c5b81a82780c1e143&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13077050">CASSANDRA-13572</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12906500" name="13528-trunk.txt" size="3598" author="Lerh Low" created="Wed, 17 Jan 2018 22:47:38 +0000"/>
                            <attachment id="12867759" name="Screen Shot 2017-05-12 at 14.15.04.png" size="68345" author="superpaul" created="Fri, 12 May 2017 11:17:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[Lerh Low]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ew73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jasobrown</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jasobrown]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12334797">2.2.6</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>