<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:58:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10555] ReadCommandTest should truncate between test cases</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10555</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;ReadCommandTest writes to the same CF in multiple unit tests, and then counts the results in a partition. This can lead to tests failing in some circumstances:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Testcase: testSinglePartitionNamesAbort(org.apache.cassandra.db.ReadCommandTest):	FAILED
    [junit] expected:&amp;lt;2&amp;gt; but was:&amp;lt;1&amp;gt;
    [junit] junit.framework.AssertionFailedError: expected:&amp;lt;2&amp;gt; but was:&amp;lt;1&amp;gt;
    [junit] 	at org.apache.cassandra.db.ReadCommandTest.testSinglePartitionNamesAbort(ReadCommandTest.java:140)
    [junit] 
    [junit] 
    [junit] Testcase: testSinglePartitionSliceAbort(org.apache.cassandra.db.ReadCommandTest):	FAILED
    [junit] expected:&amp;lt;2&amp;gt; but was:&amp;lt;3&amp;gt;
    [junit] junit.framework.AssertionFailedError: expected:&amp;lt;2&amp;gt; but was:&amp;lt;3&amp;gt;
    [junit] 	at org.apache.cassandra.db.ReadCommandTest.testSinglePartitionSliceAbort(ReadCommandTest.java:111)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This can be fixed trivially by truncating the CF at the beginning of &lt;tt&gt;testSinglePartitionSliceAbort&lt;/tt&gt; and &lt;tt&gt;testSinglePartitionNamesAbort&lt;/tt&gt; &lt;/p&gt;

&lt;p&gt;Also, once the truncate is in place, a potential typo is exposed in &lt;tt&gt;testSinglePartitionNamesAbort&lt;/tt&gt;, where the partition is written with clustering column &lt;tt&gt;cc&lt;/tt&gt; and &lt;tt&gt;cdd&lt;/tt&gt;, but the read command reads &lt;tt&gt;cc&lt;/tt&gt; and &lt;tt&gt;dd&lt;/tt&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="12906140">CASSANDRA-10555</key>
            <summary>ReadCommandTest should truncate between test cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jjirsa">Jeff Jirsa</assignee>
                                    <reporter username="jjirsa">Jeff Jirsa</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Oct 2015 05:36:18 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:59 +0000</updated>
                            <resolved>Tue, 20 Oct 2015 15:33:30 +0000</resolved>
                                        <fixVersion>3.2</fixVersion>
                                    <component>Legacy/Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14964564" author="jjirsa" created="Tue, 20 Oct 2015 05:38:33 +0000"  >&lt;p&gt;Patch at &lt;a href=&quot;https://github.com/jeffjirsa/cassandra/commit/5b8cf57e11e04c2e61455f21e155354d03f48b99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeffjirsa/cassandra/commit/5b8cf57e11e04c2e61455f21e155354d03f48b99&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Waiting on CI, should be available shortly. &lt;/p&gt;</comment>
                            <comment id="14964643" author="stefania" created="Tue, 20 Oct 2015 06:35:00 +0000"  >&lt;p&gt;The problem can only be reproduced if &lt;tt&gt;testSinglePartitionNamesAbort&lt;/tt&gt; runs before &lt;tt&gt;testSinglePartitionSliceAbort&lt;/tt&gt; and it&apos;s because of the typo &quot;cdd&quot; instead of &quot;dd&quot;. So the typo must be fixed. We could write the data only once since it is identical but truncating is preferred in case later on we want to modify the test methods.&lt;/p&gt;

&lt;p&gt;+1 once the test is confirmed to pass on CI as well:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/job/jeffjirsa-cassandra-10555-testall/lastBuild/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/jeffjirsa-cassandra-10555-testall/lastBuild/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/job/jeffjirsa-cassandra-10555-dtest/lastBuild/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/jeffjirsa-cassandra-10555-dtest/lastBuild/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you for fixing this.&lt;/p&gt;</comment>
                            <comment id="14964746" author="stefania" created="Tue, 20 Oct 2015 07:57:23 +0000"  >&lt;p&gt;CI looks good.&lt;/p&gt;</comment>
                            <comment id="14965262" author="jmckenzie" created="Tue, 20 Oct 2015 15:33:31 +0000"  >&lt;p&gt;Committed as &lt;tt&gt;881e2da0a4c37f54fbd52ed66f080e33af02b978&lt;/tt&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jjirsa]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n7xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stefania</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>