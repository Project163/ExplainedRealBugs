<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:18:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16301] upgrade from C* 3.11.9 to 4.0-beta3 fails if 3.11.9 is configured with OldNetworkTopologyStrategy</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16301</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When we upgrade Cassandra from 3.11.9 to 4.0-beta3, if the old cluster (3.11.9) is configured with&#160;OldNetworkTopologyStrategy, 4.0-beta3 Cassandra fails to start with the following exception:&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR [main] 2020-11-24 22:49:33,423 CassandraDaemon.java:278 - Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; loading schema:
org.apache.cassandra.exceptions.ConfigurationException: Unable to find replication strategy class &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.locator.OldNetworkTopologyStrategy&apos;&lt;/span&gt;
        at org.apache.cassandra.utils.FBUtilities.classForName(FBUtilities.java:720)
        at org.apache.cassandra.locator.AbstractReplicationStrategy.getClass(AbstractReplicationStrategy.java:422)
        at org.apache.cassandra.schema.ReplicationParams.fromMapWithDefaults(ReplicationParams.java:90)
        at org.apache.cassandra.schema.ReplicationParams.fromMap(ReplicationParams.java:82)
        at org.apache.cassandra.schema.KeyspaceParams.create(KeyspaceParams.java:64)
        at org.apache.cassandra.schema.SchemaKeyspace.fetchKeyspaceParams(SchemaKeyspace.java:971)
        at org.apache.cassandra.schema.SchemaKeyspace.fetchKeyspace(SchemaKeyspace.java:956)
        at org.apache.cassandra.schema.SchemaKeyspace.fetchKeyspacesWithout(SchemaKeyspace.java:949)
        at org.apache.cassandra.schema.SchemaKeyspace.fetchNonSystemKeyspaces(SchemaKeyspace.java:859)
        at org.apache.cassandra.schema.Schema.loadFromDisk(Schema.java:100)
        at org.apache.cassandra.schema.Schema.loadFromDisk(Schema.java:89)
        at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:274)
        at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:671)
        at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:795)
Caused by: java.lang.ClassNotFoundException: org.apache.cassandra.locator.OldNetworkTopologyStrategy
        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:418)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:351)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:264)
        at org.apache.cassandra.utils.FBUtilities.classForName(FBUtilities.java:716)
        ... 13 common frames omitted
Exception (org.apache.cassandra.exceptions.ConfigurationException) encountered during startup: Unable to find replication strategy class &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.locator.OldNetworkTopologyStrategy&apos;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342502">CASSANDRA-16301</key>
            <summary>upgrade from C* 3.11.9 to 4.0-beta3 fails if 3.11.9 is configured with OldNetworkTopologyStrategy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blerer">Benjamin Lerer</assignee>
                                    <reporter username="zagol">Yongle Zhang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Nov 2020 03:08:58 +0000</created>
                <updated>Sun, 3 Jan 2021 16:58:22 +0000</updated>
                            <resolved>Thu, 26 Nov 2020 13:08:48 +0000</resolved>
                                        <fixVersion>4.0-beta4</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17238493" author="flightc" created="Wed, 25 Nov 2020 03:51:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zagol&quot; class=&quot;user-hover&quot; rel=&quot;zagol&quot;&gt;zagol&lt;/a&gt;&#160;&lt;tt&gt;OldNetworkTopologyStrategy&lt;/tt&gt; was removed in C* 4.0-alpha3 by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13990&quot; title=&quot;Remove OldNetworkTopologyStrategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13990&quot;&gt;&lt;del&gt;CASSANDRA-13990&lt;/del&gt;&lt;/a&gt;. It hasn&apos;t been touched for 8 years and we recommend that you switch to &lt;tt&gt;NetworkTopologyStrategy&lt;/tt&gt; for all your application keyspaces. Cheers!&lt;/p&gt;</comment>
                            <comment id="17238905" author="zagol" created="Wed, 25 Nov 2020 20:00:58 +0000"  >&lt;p&gt;Thanks! &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=flightc&quot; class=&quot;user-hover&quot; rel=&quot;flightc&quot;&gt;flightc&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17239138" author="blerer" created="Thu, 26 Nov 2020 09:18:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=flightc&quot; class=&quot;user-hover&quot; rel=&quot;flightc&quot;&gt;flightc&lt;/a&gt; I had a quick look to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13990&quot; title=&quot;Remove OldNetworkTopologyStrategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13990&quot;&gt;&lt;del&gt;CASSANDRA-13990&lt;/del&gt;&lt;/a&gt;. It does not seems that we mention anything in the NEWS.txt in the upgrade section. We could also provide an error message which is more user friendly.&lt;/p&gt;</comment>
                            <comment id="17239153" author="blerer" created="Thu, 26 Nov 2020 09:47:21 +0000"  >&lt;p&gt;I pushed a patch to fix those things &lt;a href=&quot;https://github.com/apache/cassandra/pull/834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; (CI results are &lt;a href=&quot;https://app.circleci.com/pipelines/github/blerer/cassandra/73/workflows/f92486d6-a133-4829-b05c-65eb359cad4e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=flightc&quot; class=&quot;user-hover&quot; rel=&quot;flightc&quot;&gt;flightc&lt;/a&gt; Tell me if it looks good to you.&lt;/p&gt;</comment>
                            <comment id="17239185" author="flightc" created="Thu, 26 Nov 2020 10:48:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&#160;excellent suggestions and thanks for getting to them really quickly. I was about to do them but it&apos;s awesome that you already did.&lt;/p&gt;

&lt;p&gt;If I may suggest adding &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13999&quot; title=&quot;Segfault during memtable flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13999&quot;&gt;&lt;del&gt;CASSANDRA-13999&lt;/del&gt;&lt;/a&gt;&lt;/tt&gt;&#160;to the &lt;tt&gt;NEWS.txt&lt;/tt&gt;&#160;entry.&lt;/p&gt;

&lt;p&gt;And what do you think about also adding the ticket in the exception message of &lt;tt&gt;AbstractReplicationStrategy&lt;/tt&gt;? If not, maybe even as a comment. Cheers! &#128077;&lt;/p&gt;</comment>
                            <comment id="17239247" author="blerer" created="Thu, 26 Nov 2020 13:05:56 +0000"  >&lt;p&gt;I added your suggestions. Thanks for the review. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17239253" author="blerer" created="Thu, 26 Nov 2020 13:08:48 +0000"  >&lt;p&gt;Committed into trunk at 47278ae3765fcf1532f20b0ade3f36f08a089630&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13115951">CASSANDRA-13990</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kwts:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[flightc]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348283">4.0-alpha3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/47278ae3765fcf1532f20b0ade3f36f08a089630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/47278ae3765fcf1532f20b0ade3f36f08a089630&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;The changes do not require additional tests.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>