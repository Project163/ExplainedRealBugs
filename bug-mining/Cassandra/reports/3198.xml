<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:49:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8144] Creating CQL2 tables fails in C* 2.1</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8144</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Although cql2 has been deprecated and removed from cqlsh, the functionality is still accessible using thrift. However, it seems that creation of new tables via cql2 is broken in 2.1.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE KEYSPACE test_ks WITH strategy_class=&lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt; AND replication_factor = &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;;
CREATE TABLE test_cf (id text PRIMARY KEY, value text, test text);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fails with the following stacktrace on the server:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [MigrationStage:1] 2014-10-20 13:53:29,506 CassandraDaemon.java:153 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[MigrationStage:1,5,main]
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:635) ~[na:1.7.0_51]
    at java.util.ArrayList.set(ArrayList.java:426) ~[na:1.7.0_51]
    at org.apache.cassandra.config.CFMetaData.rebuild(CFMetaData.java:2072) ~[main/:na]
    at org.apache.cassandra.config.CFMetaData.fromSchemaNoTriggers(CFMetaData.java:1842) ~[main/:na]
    at org.apache.cassandra.config.CFMetaData.fromSchema(CFMetaData.java:1882) ~[main/:na]
    at org.apache.cassandra.config.KSMetaData.deserializeColumnFamilies(KSMetaData.java:320) ~[main/:na]
    at org.apache.cassandra.db.DefsTables.mergeColumnFamilies(DefsTables.java:279) ~[main/:na]
    at org.apache.cassandra.db.DefsTables.mergeSchemaInternal(DefsTables.java:193) ~[main/:na]
    at org.apache.cassandra.db.DefsTables.mergeSchema(DefsTables.java:165) ~[main/:na]
    at org.apache.cassandra.service.MigrationManager$2.runMayThrow(MigrationManager.java:393) ~[main/:na]
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28) ~[main/:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) ~[na:1.7.0_51]
    at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[na:1.7.0_51]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) ~[na:1.7.0_51]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_51]
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744) [na:1.7.0_51]
ERROR [Thrift:1] 2014-10-20 13:53:29,506 CustomTThreadPoolServer.java:219 - Error occurred during processing of message.
java.lang.RuntimeException: java.util.concurrent.ExecutionException: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at org.apache.cassandra.utils.FBUtilities.waitOnFuture(FBUtilities.java:397) ~[main/:na]
    at org.apache.cassandra.service.MigrationManager.announce(MigrationManager.java:374) ~[main/:na]
    at org.apache.cassandra.service.MigrationManager.announceNewColumnFamily(MigrationManager.java:249) ~[main/:na]
    at org.apache.cassandra.service.MigrationManager.announceNewColumnFamily(MigrationManager.java:235) ~[main/:na]
    at org.apache.cassandra.cql.QueryProcessor.processStatement(QueryProcessor.java:662) ~[main/:na]
    at org.apache.cassandra.cql.QueryProcessor.process(QueryProcessor.java:802) ~[main/:na]
    at org.apache.cassandra.thrift.CassandraServer.execute_cql_query(CassandraServer.java:1941) ~[main/:na]
    at org.apache.cassandra.thrift.Cassandra$Processor$execute_cql_query.getResult(Cassandra.java:4558) ~[thrift/:na]
    at org.apache.cassandra.thrift.Cassandra$Processor$execute_cql_query.getResult(Cassandra.java:4542) ~[thrift/:na]
    at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39) ~[libthrift-0.9.1.jar:0.9.1]
    at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39) ~[libthrift-0.9.1.jar:0.9.1]
    at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:201) ~[main/:na]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_51]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_51]
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744) [na:1.7.0_51]
Caused by: java.util.concurrent.ExecutionException: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:1.7.0_51]
    at java.util.concurrent.FutureTask.get(FutureTask.java:188) ~[na:1.7.0_51]
    at org.apache.cassandra.utils.FBUtilities.waitOnFuture(FBUtilities.java:393) ~[main/:na]
    ... 14 common frames omitted
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:635) ~[na:1.7.0_51]
    at java.util.ArrayList.set(ArrayList.java:426) ~[na:1.7.0_51]
    at org.apache.cassandra.config.CFMetaData.rebuild(CFMetaData.java:2072) ~[main/:na]
    at org.apache.cassandra.config.CFMetaData.fromSchemaNoTriggers(CFMetaData.java:1842) ~[main/:na]
    at org.apache.cassandra.config.CFMetaData.fromSchema(CFMetaData.java:1882) ~[main/:na]
    at org.apache.cassandra.config.KSMetaData.deserializeColumnFamilies(KSMetaData.java:320) ~[main/:na]
    at org.apache.cassandra.db.DefsTables.mergeColumnFamilies(DefsTables.java:279) ~[main/:na]
    at org.apache.cassandra.db.DefsTables.mergeSchemaInternal(DefsTables.java:193) ~[main/:na]
    at org.apache.cassandra.db.DefsTables.mergeSchema(DefsTables.java:165) ~[main/:na]
    at org.apache.cassandra.service.MigrationManager$2.runMayThrow(MigrationManager.java:393) ~[main/:na]
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28) ~[main/:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) ~[na:1.7.0_51]
    at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[na:1.7.0_51]
    ... 3 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12749244">CASSANDRA-8144</key>
            <summary>Creating CQL2 tables fails in C* 2.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="samt">Sam Tunnicliffe</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Oct 2014 13:33:31 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:31 +0000</updated>
                            <resolved>Wed, 22 Oct 2014 14:55:13 +0000</resolved>
                                        <fixVersion>2.1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14176928" author="philipthompson" created="Mon, 20 Oct 2014 14:29:05 +0000"  >&lt;p&gt;This is probably due to switching the driver that cqlsh uses in 2.1.0. The new driver only supports CQL3 according to its documentation: &lt;a href=&quot;http://datastax.github.io/python-driver/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://datastax.github.io/python-driver/index.html&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="14177067" author="iamaleksey" created="Mon, 20 Oct 2014 16:19:35 +0000"  >&lt;p&gt;Right. CQL2 support has been removed from cqlsh in 2.1. But I&apos;m certain that Sam wasn&apos;t using cqlsh, but Thrift directly, so the cqlsh label is misplaced.&lt;/p&gt;</comment>
                            <comment id="14177069" author="beobal" created="Mon, 20 Oct 2014 16:22:19 +0000"  >&lt;p&gt;That&apos;s right, I&apos;m triggering these errors using a thrift client via the &lt;tt&gt;execute_cql_query&lt;/tt&gt; rpc call.&lt;/p&gt;</comment>
                            <comment id="14177071" author="philipthompson" created="Mon, 20 Oct 2014 16:23:57 +0000"  >&lt;p&gt;Sorry, I totally misread your description.&lt;/p&gt;</comment>
                            <comment id="14178661" author="iamaleksey" created="Tue, 21 Oct 2014 17:19:29 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7744&quot; title=&quot;Dropping the last collection column turns CompoundSparseCellNameType$WithCollection into CompoundDenseCellNameType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7744&quot;&gt;&lt;del&gt;CASSANDRA-7744&lt;/del&gt;&lt;/a&gt; could be the reason here. Attaching a simple patch that &lt;b&gt;should&lt;/b&gt; fix the issue.&lt;/p&gt;</comment>
                            <comment id="14178774" author="beobal" created="Tue, 21 Oct 2014 18:16:25 +0000"  >&lt;p&gt;nope sorry, that isn&apos;t the patch you&apos;re looking for&lt;/p&gt;</comment>
                            <comment id="14178941" author="iamaleksey" created="Tue, 21 Oct 2014 19:55:00 +0000"  >&lt;p&gt;Attaching v2 that actually works (starts with the right CellNameType instead of using simple dense for any configuration).&lt;/p&gt;</comment>
                            <comment id="14179739" author="beobal" created="Wed, 22 Oct 2014 09:00:40 +0000"  >&lt;p&gt;v2 wfm&lt;/p&gt;</comment>
                            <comment id="14179986" author="iamaleksey" created="Wed, 22 Oct 2014 14:55:13 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12676158" name="8144-v2.txt" size="3423" author="aleksey" created="Tue, 21 Oct 2014 19:53:36 +0000"/>
                            <attachment id="12676137" name="repro.py" size="439" author="samt" created="Tue, 21 Oct 2014 18:16:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21cu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>samt</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327256">2.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>