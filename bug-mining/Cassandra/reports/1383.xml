<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:28:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3700] SelectStatement start/end key are not set correctly when a key alias is involved</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3700</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;start/end key are set by antlr in WhereClause, but this depends on the &quot;KEY&quot; keyword.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12537365">CASSANDRA-3700</key>
            <summary>SelectStatement start/end key are not set correctly when a key alias is involved</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xedin">Pavel Yaskevich</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                            <label>cql</label>
                    </labels>
                <created>Thu, 5 Jan 2012 17:32:19 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:43 +0000</updated>
                            <resolved>Tue, 10 Jan 2012 18:56:46 +0000</resolved>
                                        <fixVersion>1.0.7</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13180584" author="jbellis" created="Thu, 5 Jan 2012 17:32:56 +0000"  >&lt;p&gt;My suggestion would be to have antlr just generate a list of expressions and let QueryProcessor determine which are for the key and which are for columns.&lt;/p&gt;</comment>
                            <comment id="13180917" author="jbellis" created="Thu, 5 Jan 2012 23:00:13 +0000"  >&lt;p&gt;This also affects 0.8, but if people haven&apos;t hit the problem there yet then they&apos;re probably not going to.  (And the workaround of &quot;just use KEY instead&quot; is straightforward.)  Let&apos;s fix this in 1.0+.&lt;/p&gt;</comment>
                            <comment id="13181413" author="jbellis" created="Fri, 6 Jan 2012 16:08:31 +0000"  >&lt;p&gt;EntityType is basically obsolete now isn&apos;t it?&lt;/p&gt;</comment>
                            <comment id="13181414" author="xedin" created="Fri, 6 Jan 2012 16:11:15 +0000"  >&lt;p&gt;we will need it in the situation where KEY is involved, we probably can use default alias if it&apos;s guaranteed to be KEY tho...&lt;/p&gt;</comment>
                            <comment id="13181416" author="jbellis" created="Fri, 6 Jan 2012 16:20:39 +0000"  >&lt;p&gt;Right, it either has to be the key alias or KEY.&lt;/p&gt;</comment>
                            <comment id="13181420" author="slebresne" created="Fri, 6 Jan 2012 16:32:29 +0000"  >&lt;p&gt;Is there a real advantage to allow the use of key alias &lt;b&gt;or&lt;/b&gt; KEY. That is, why don&apos;t we just allow the key alias, and have this be KEY (which we already do) by default for CF created through thrift without a proper key_alias (case that is hopefully bound to disappear). The fact that we reserve KEY (and key too I believe) is kind of limiting in that you cannot use KEY for some other column.&lt;br/&gt;
Besides, the KEY notation will be slightly less meaningful post-2474 because it will not necessarily correspond to the primary key anymore (i.e, it may correspond only to the first column column that compose the PRIMARY KEY).&lt;/p&gt;</comment>
                            <comment id="13181427" author="jbellis" created="Fri, 6 Jan 2012 16:44:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;why don&apos;t we just allow the key alias, and have this be KEY (which we already do) by default for CF created through thrift without a proper key_alias &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That makes a lot of sense to me.&lt;/p&gt;</comment>
                            <comment id="13181605" author="xedin" created="Fri, 6 Jan 2012 21:08:07 +0000"  >&lt;p&gt;updated patch with does not special-case KEY and removes EntityType.&lt;/p&gt;</comment>
                            <comment id="13181673" author="jbellis" created="Fri, 6 Jan 2012 23:06:06 +0000"  >&lt;p&gt;I think this is obsolete now (in QP.process) since we use the &quot;realKeyAlias&quot; in WhereClause now to check if in fact an identifier is a key reference:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;.               &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (select.getKeys().size() &amp;gt; 0)
                    validateKeyAlias(metadata, select.getKeyAlias());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13181682" author="xedin" created="Fri, 6 Jan 2012 23:19:25 +0000"  >&lt;p&gt;&amp;lt;key&amp;gt; IN (.., ..., ...) condition is treated directly without relaying on extractKeysFromColumns() so we still need this check in such case.&lt;/p&gt;</comment>
                            <comment id="13181871" author="jbellis" created="Sat, 7 Jan 2012 05:37:11 +0000"  >&lt;p&gt;I guess that&apos;s okay, although we will probably want generalize IN to allow &amp;lt;column&amp;gt; IN (...) as well at some point.&lt;/p&gt;

&lt;p&gt;+1 on this patch&lt;/p&gt;</comment>
                            <comment id="13181977" author="xedin" created="Sat, 7 Jan 2012 14:40:16 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="13183450" author="jbellis" created="Tue, 10 Jan 2012 18:35:52 +0000"  >&lt;p&gt;Ugh, we should actually continue to allow using KEY in 1.0.x.  Working on a patch for that and case-insensitivity for the aliases.&lt;/p&gt;</comment>
                            <comment id="13183465" author="xedin" created="Tue, 10 Jan 2012 18:48:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13183474" author="jbellis" created="Tue, 10 Jan 2012 18:56:46 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12510077" name="3700-case-insensitivity.txt" size="1780" author="jbellis" created="Tue, 10 Jan 2012 18:37:39 +0000"/>
                            <attachment id="12509714" name="CASSANDRA-3700.patch" size="7573" author="xedin" created="Fri, 6 Jan 2012 21:07:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222873</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gn6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95185</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>