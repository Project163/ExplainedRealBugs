<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:16:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1487] Bug in calculating QUORUM</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1487</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;It seems that there is a bug in calculating QUORUM in src/java/org/apache/cassandra/service/QuorumResponseHandler.java&lt;/p&gt;

&lt;p&gt;Currently the QUORUM formula in place will return correct QUORUM if replication factor &amp;lt;= 3. However if you have a Replication Factor &amp;gt; 3, it will return incorrect result.&lt;/p&gt;

&lt;p&gt;-----------------------&lt;br/&gt;
&amp;#8212; src/java/org/apache/cassandra/service/QuorumResponseHandler.java    (revision 995482)&lt;br/&gt;
+++ src/java/org/apache/cassandra/service/QuorumResponseHandler.java    (working copy)&lt;br/&gt;
@@ -109,7 +109,7 @@&lt;br/&gt;
             case ANY:&lt;br/&gt;
                 return 1;&lt;br/&gt;
             case QUORUM:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return (DatabaseDescriptor.getQuorum(table)/ 2) + 1;&lt;br/&gt;
+                return DatabaseDescriptor.getQuorum(table);&lt;br/&gt;
             case ALL:&lt;br/&gt;
                 return DatabaseDescriptor.getReplicationFactor(table);&lt;br/&gt;
             default:&lt;br/&gt;
-------------------&lt;br/&gt;
In QuorumResponseHandler:determineBlockFor()&lt;br/&gt;
DatabaseDescriptor.getQuorum(table) is already returning a quorum value which is further divided by 2 and a one is added.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So say if your RF=6, it is suppose to check 4 replicas, (6/2)+1=4 but it ends up checking only 3 replicas as DatabaseDescriptor.getQuorum returns 4, so determineBlockFor will return (4/2)+1=3.&lt;/p&gt;

&lt;p&gt;Let me know if you have any questions.&lt;/p&gt;

&lt;p&gt;Jignesh&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473700">CASSANDRA-1487</key>
            <summary>Bug in calculating QUORUM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jigneshdhruv">Jignesh Dhruv</assignee>
                                    <reporter username="jigneshdhruv">Jignesh Dhruv</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Sep 2010 16:34:56 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:17 +0000</updated>
                            <resolved>Sat, 11 Sep 2010 01:00:11 +0000</resolved>
                                        <fixVersion>0.7 beta 2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12907744" author="kingryan" created="Thu, 9 Sep 2010 19:34:31 +0000"  >&lt;p&gt;You should attach patches rather than pasting them.&lt;/p&gt;</comment>
                            <comment id="12907765" author="jigneshdhruv" created="Thu, 9 Sep 2010 20:20:54 +0000"  >&lt;p&gt;QuoromResponseHandler Patch.&lt;/p&gt;</comment>
                            <comment id="12907766" author="jigneshdhruv" created="Thu, 9 Sep 2010 20:21:25 +0000"  >&lt;p&gt;Attached patch for QuorumResponseHandler.java.&lt;/p&gt;</comment>
                            <comment id="12908257" author="jbellis" created="Sat, 11 Sep 2010 01:00:11 +0000"  >&lt;p&gt;committed, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12454235" name="QuorumResponseHandler.java.patch" size="655" author="jigneshdhruv" created="Thu, 9 Sep 2010 20:20:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jigneshdhruv]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20163</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g5d3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92299</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>