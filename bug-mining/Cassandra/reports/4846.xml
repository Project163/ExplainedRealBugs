<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:08:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12938] cassandra-stress hangs on error</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12938</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After encountering a fatal error, cassandra-stress hangs. Having not run a previous stress write, can be reproduced with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cassandra-stress read n=1000 -rate threads=2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s the full output&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;******************** Stress Settings ********************
Command:
  Type: read
  Count: 1,000
  No Warmup: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
  Consistency Level: LOCAL_ONE
  Target Uncertainty: not applicable
  Key Size (bytes): 10
  Counter Increment Distibution: add=fixed(1)
Rate:
  Auto: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; Count: 2
  OpsPer Sec: 0
Population:
  Distribution: Gaussian:  min=1,max=1000,mean=500.500000,stdev=166.500000
  Order: ARBITRARY
  Wrap: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
Insert:
  Revisits: Uniform:  min=1,max=1000000
  Visits: Fixed:  key=1
  Row Population Ratio: Ratio: divisor=1.000000;delegate=Fixed:  key=1
  Batch Type: not batching
Columns:
  Max Columns Per Key: 5
  Column Names: [C0, C1, C2, C3, C4]
  Comparator: AsciiType
  Timestamp: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  Variable Column Count: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
  Slice: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
  Size Distribution: Fixed:  key=34
  Count Distribution: Fixed:  key=5
Errors:
  Ignore: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
  Tries: 10
Log:
  No Summary: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
  No Settings: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
  File: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  Interval Millis: 1000
  Level: NORMAL
Mode:
  API: JAVA_DRIVER_NATIVE
  Connection Style: CQL_PREPARED
  CQL Version: CQL3
  Protocol Version: V4
  Username: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  Password: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  Auth Provide &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  Max Pending Per Connection: 128
  Connections Per Host: 8
  Compression: NONE
Node:
  Nodes: [localhost]
  Is White List: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
  Datacenter: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
Schema:
  Keyspace: keyspace1
  Replication Strategy: org.apache.cassandra.locator.SimpleStrategy
  Replication Strategy Pptions: {replication_factor=1}
  Table Compression: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  Table Compaction Strategy: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  Table Compaction Strategy Options: {}
Transport:
  factory=org.apache.cassandra.thrift.TFramedTransportFactory; truststore=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; truststore-password=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; keystore=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; keystore-password=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; ssl-protocol=TLS; ssl-alg=SunX509; store-type=JKS; ssl-ciphers=TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA; 
Port:
  Native Port: 9042
  Thrift Port: 9160
  JMX Port: 9042
Send To Daemon:
  *not set*
Graph:
  File: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  Revision: unknown
  Title: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  Operation: READ
TokenRange:
  Wrap: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
  Split Factor: 1

Sleeping 2s...
Warming up READ with 250 iterations...
Connected to cluster: falcon-test2, max pending requests per connection 128, max connections per host 8
Datatacenter: Cassandra; Host: localhost/127.0.0.1; Rack: rack1
Failed to connect over JMX; not collecting these stats
Connected to cluster: falcon-test2, max pending requests per connection 128, max connections per host 8
Datatacenter: Cassandra; Host: localhost/127.0.0.1; Rack: rack1
com.datastax.driver.core.exceptions.InvalidQueryException: Keyspace &lt;span class=&quot;code-quote&quot;&gt;&apos;keyspace1&apos;&lt;/span&gt; does not exist
Connected to cluster: falcon-test2, max pending requests per connection 128, max connections per host 8
Datatacenter: Cassandra; Host: localhost/127.0.0.1; Rack: rack1
com.datastax.driver.core.exceptions.InvalidQueryException: Keyspace &lt;span class=&quot;code-quote&quot;&gt;&apos;keyspace1&apos;&lt;/span&gt; does not exist
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13022242">CASSANDRA-12938</key>
            <summary>cassandra-stress hangs on error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eduard.tudenhoefner">Eduard Tudenhoefner</assignee>
                                    <reporter username="falcojr">James Falcon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Nov 2016 16:38:03 +0000</created>
                <updated>Fri, 15 May 2020 08:02:56 +0000</updated>
                            <resolved>Mon, 21 Aug 2017 08:40:20 +0000</resolved>
                                        <fixVersion>3.11.1</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15686144" author="eduard.tudenhoefner" created="Tue, 22 Nov 2016 09:04:07 +0000"  >&lt;p&gt;It looks like this got introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11853&quot; title=&quot;Improve Cassandra-Stress latency measurement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11853&quot;&gt;&lt;del&gt;CASSANDRA-11853&lt;/del&gt;&lt;/a&gt; (3.8) where we wait in &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.X/tools/stress/src/org/apache/cassandra/stress/StressAction.java#L239-L239&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-3.X/tools/stress/src/org/apache/cassandra/stress/StressAction.java#L239-L239&lt;/a&gt; until the consumers got started. &lt;/p&gt;

&lt;p&gt;The &lt;b&gt;start&lt;/b&gt; is counted down in &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.X/tools/stress/src/org/apache/cassandra/stress/StressAction.java#L443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-3.X/tools/stress/src/org/apache/cassandra/stress/StressAction.java#L443&lt;/a&gt;. The problem however is that if anything fails in &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.X/tools/stress/src/org/apache/cassandra/stress/StressAction.java#L425-L440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-3.X/tools/stress/src/org/apache/cassandra/stress/StressAction.java#L425-L440&lt;/a&gt; because of wrong credentials / non-existing keyspace / ..., we wait forever.&lt;/p&gt;

&lt;p&gt;My proposal is to move the count down above the mentioned code.&lt;/p&gt;

&lt;p&gt;Here&apos;s the patch: &lt;a href=&quot;https://github.com/nastra/cassandra/tree/CASSANDRA-12938-3.X&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nastra/cassandra/tree/CASSANDRA-12938-3.X&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15686159" author="eduard.tudenhoefner" created="Tue, 22 Nov 2016 09:10:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tjake&quot; class=&quot;user-hover&quot; rel=&quot;tjake&quot;&gt;tjake&lt;/a&gt; can you review please since you were also reviewing &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11853&quot; title=&quot;Improve Cassandra-Stress latency measurement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11853&quot;&gt;&lt;del&gt;CASSANDRA-11853&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="15686938" author="tjake" created="Tue, 22 Nov 2016 14:52:24 +0000"  >&lt;p&gt;In order to be accurate the latch needs to be counted down after the initialization is done.  I would just put the driver init in a try{} with finally &lt;/p&gt;
{latch.countDown();}</comment>
                            <comment id="15687423" author="eduard.tudenhoefner" created="Tue, 22 Nov 2016 17:57:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tjake&quot; class=&quot;user-hover&quot; rel=&quot;tjake&quot;&gt;tjake&lt;/a&gt; good point, updated the code.&lt;/p&gt;</comment>
                            <comment id="16133416" author="eduard.tudenhoefner" created="Fri, 18 Aug 2017 18:26:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefania_alborghetti&quot; class=&quot;user-hover&quot; rel=&quot;stefania_alborghetti&quot;&gt;stefania_alborghetti&lt;/a&gt; rebased the commit onto &lt;b&gt;cassandra-3.11&lt;/b&gt;.&lt;br/&gt;
Branch: &lt;a href=&quot;https://github.com/nastra/cassandra/tree/CASSANDRA-12938-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nastra/cassandra/tree/CASSANDRA-12938-3.11&lt;/a&gt;&lt;br/&gt;
Test: &lt;a href=&quot;https://circleci.com/gh/nastra/cassandra/13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://circleci.com/gh/nastra/cassandra/13&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16134675" author="stefania" created="Mon, 21 Aug 2017 03:49:30 +0000"  >&lt;p&gt;&amp;#43;1, running dtests on our internal CI, I will commit to 3.11+ if results are OK.&lt;/p&gt;</comment>
                            <comment id="16134888" author="stefania" created="Mon, 21 Aug 2017 08:40:20 +0000"  >&lt;p&gt;Committed to 3.11 as &lt;tt&gt;1619413e5602b93641af1ccf5adbee80eaa2b53c&lt;/tt&gt; and merged into trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[eduard.tudenhoefner]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36l73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stefania</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12335695">3.8</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>