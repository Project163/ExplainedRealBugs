<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:42:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6688] Avoid possible sstable overlaps with leveled compaction</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6688</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Two cases where we can end up with overlapping sstables in the leveled manifest;&lt;/p&gt;

&lt;p&gt;FIrst one is when we skip levels during compaction. Here we need to make sure we are not compacting in newLevel - 1 since if, for example, we are doing a L1 -&amp;gt; L2 compaction and then start a new L0 compaction where we decide to skip L1, we could have overlapping sstables in L2 when the compactions are done. This case is new in 2.0 since we check if we skip levels before the compaction starts.&lt;/p&gt;

&lt;p&gt;Second case is where we try to include as many overlapping L0 sstables as possible, here we could add sstables that are not compacting, but overlap sstables that are.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12694431">CASSANDRA-6688</key>
            <summary>Avoid possible sstable overlaps with leveled compaction</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="marcuse">Marcus Eriksson</reporter>
                        <labels>
                            <label>lcs</label>
                    </labels>
                <created>Tue, 11 Feb 2014 06:31:28 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:54 +0000</updated>
                            <resolved>Thu, 13 Feb 2014 07:48:30 +0000</resolved>
                                        <fixVersion>2.0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13897932" author="jbellis" created="Tue, 11 Feb 2014 15:41:56 +0000"  >&lt;p&gt;v2 attached that generalizes the skipLevel approach a bit, but I think we have a problem: what we really want to know is (as I edited the comment) whether sstables being compacted &lt;b&gt;into&lt;/b&gt; newLevel might overlap, but I don&apos;t think we actually track that anywhere.  (Maybe we could walk the in-progress CompactionTasks but that is tricky since once we&apos;re out of getCompactionCandidates we don&apos;t have &lt;tt&gt;synchronized&lt;/tt&gt; to keep things race-free.)  So, if we had two compactions skipping levels, we could still get into trouble if we&apos;re just checking newlevel-1.&lt;/p&gt;</comment>
                            <comment id="13897933" author="jbellis" created="Tue, 11 Feb 2014 15:42:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Second case is where we try to include as many overlapping L0 sstables as possible, here we could add sstables that are not compacting, but overlap sstables that are.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This affects 1.2 as well right?&lt;/p&gt;</comment>
                            <comment id="13897959" author="krummas" created="Tue, 11 Feb 2014 16:01:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;This affects 1.2 as well right?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yeah, looks like it&lt;/p&gt;

&lt;p&gt;Should we perhaps stop skipping levels? Can&apos;t really see it happening more than once in the lifetime of a cluster, right after bootstrap (or after dropping all the sstables to L0), first compaction might skip L1.&lt;/p&gt;</comment>
                            <comment id="13897960" author="jbellis" created="Tue, 11 Feb 2014 16:03:53 +0000"  >&lt;p&gt;that&apos;s definitely the simplest solution&lt;/p&gt;</comment>
                            <comment id="13898907" author="krummas" created="Wed, 12 Feb 2014 08:03:35 +0000"  >&lt;p&gt;1.2 is not affected since it repairs the level right after it adds the compacted files&lt;/p&gt;</comment>
                            <comment id="13898908" author="krummas" created="Wed, 12 Feb 2014 08:03:47 +0000"  >&lt;p&gt;v3 attached that removes skipLevels&lt;/p&gt;</comment>
                            <comment id="13899212" author="jbellis" created="Wed, 12 Feb 2014 15:53:14 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13900102" author="krummas" created="Thu, 13 Feb 2014 07:48:30 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12693860">CASSANDRA-6673</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12628154" name="0001-6688.patch" size="2501" author="marcuse" created="Tue, 11 Feb 2014 06:33:44 +0000"/>
                            <attachment id="12628244" name="6688-v2.txt" size="3502" author="jbellis" created="Tue, 11 Feb 2014 16:02:59 +0000"/>
                            <attachment id="12628451" name="6688-v3.patch" size="2667" author="marcuse" created="Wed, 12 Feb 2014 08:03:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372939</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s9q7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12322954">2.0 beta 1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>