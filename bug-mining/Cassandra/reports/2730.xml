<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:44:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6965] sstableloader fails to stream data</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6965</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When loading a snapshot via sstableloader I get this NullPointerException:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Established connection to initial hosts
Opening sstables and calculating sections to stream
Streaming relevant part of /tmp/tmpmusajE/ks/cf/ks-cf-ka-1-Data.db to [/127.0.0.1]
Streaming session ID: 276a9d20-b944-11e3-9f60-4191ec2d6f66
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;STREAM-OUT-/127.0.0.1&quot;&lt;/span&gt; java.lang.NullPointerException
	at org.apache.cassandra.streaming.ConnectionHandler$MessageHandler.signalCloseDone(ConnectionHandler.java:249)
	at org.apache.cassandra.streaming.ConnectionHandler$OutgoingMessageHandler.run(ConnectionHandler.java:375)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which at first I thought meant it was unable to connect, but I do see this in system.log, indicating the connection was successful:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;INFO  [STREAM-INIT-/127.0.0.1:55820] 2014-03-31 22:20:12,265 StreamResultFuture.java:121 - [Stream #276a9d20-b944-11e3-9f60-4191ec2d6f66] Received streaming plan &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Bulk Load
INFO  [STREAM-IN-/10.13.37.130] 2014-03-31 22:20:12,272 StreamResultFuture.java:173 - [Stream #276a9d20-b944-11e3-9f60-4191ec2d6f66] Prepare completed. Receiving 1 files(1726 bytes), sending 0 files(0 bytes)
INFO  [STREAM-IN-/10.13.37.130] 2014-03-31 22:20:12,280 CompressedStreamReader.java:65 - reading file from /10.13.37.130, repairedAt = 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To reproduce this behaviour, run the &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/blob/85692be39cb6b1b5ebc96905834ff7bb174de0bc/snapshot_test.py#L40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;snapshot_test.py:TestSnapshot.test_basic_snapshot dtest&lt;/a&gt; on 2.1 HEAD.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12705836">CASSANDRA-6965</key>
            <summary>sstableloader fails to stream data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vijay2win@yahoo.com">Vijay</assignee>
                                    <reporter username="enigmacurry">Ryan McGuire</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Apr 2014 02:26:35 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:49 +0000</updated>
                            <resolved>Wed, 2 Apr 2014 23:48:47 +0000</resolved>
                                                            <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13957207" author="yukim" created="Wed, 2 Apr 2014 00:59:18 +0000"  >&lt;p&gt;It looks like this is regression from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6596&quot; title=&quot;Split out outgoing stream throughput within a DC and inter-DC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6596&quot;&gt;&lt;del&gt;CASSANDRA-6596&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Root stack trace is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;STREAM-OUT-/127.0.0.1&quot;&lt;/span&gt; java.lang.NullPointerException
        at org.apache.cassandra.streaming.StreamManager$StreamRateLimiter.&amp;lt;init&amp;gt;(StreamManager.java:79)
        at org.apache.cassandra.streaming.StreamManager.getRateLimiter(StreamManager.java:61)
        at org.apache.cassandra.streaming.StreamWriter.&amp;lt;init&amp;gt;(StreamWriter.java:60)
        at org.apache.cassandra.streaming.compress.CompressedStreamWriter.&amp;lt;init&amp;gt;(CompressedStreamWriter.java:47)
        at org.apache.cassandra.streaming.messages.OutgoingFileMessage$1.serialize(OutgoingFileMessage.java:51)
        at org.apache.cassandra.streaming.messages.OutgoingFileMessage$1.serialize(OutgoingFileMessage.java:40)
        at org.apache.cassandra.streaming.messages.StreamMessage.serialize(StreamMessage.java:45)
        at org.apache.cassandra.streaming.ConnectionHandler$OutgoingMessageHandler.sendMessage(ConnectionHandler.java:389)
        at org.apache.cassandra.streaming.ConnectionHandler$OutgoingMessageHandler.run(ConnectionHandler.java:359)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Line 79 of StreamManager.java indicates that DC names should be loaded from cassandra.yaml file, but in sstableloader cassandra.yaml should not be readed.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vijay2win%40yahoo.com&quot; class=&quot;user-hover&quot; rel=&quot;vijay2win@yahoo.com&quot;&gt;vijay2win@yahoo.com&lt;/a&gt; can you take a look?&lt;/p&gt;</comment>
                            <comment id="13957208" author="yukim" created="Wed, 2 Apr 2014 01:00:06 +0000"  >&lt;p&gt;Because of this bug, 2.1 sstableloader is not working right now.&lt;/p&gt;</comment>
                            <comment id="13957325" author="vijay2win@yahoo.com" created="Wed, 2 Apr 2014 04:22:57 +0000"  >&lt;p&gt;Thanks Yuki, attached is a simple patch with null check. I guess we don&apos;t need to throttle for the tools across the DC.&lt;/p&gt;</comment>
                            <comment id="13957804" author="enigmacurry" created="Wed, 2 Apr 2014 15:46:50 +0000"  >&lt;p&gt;The patch makes my test pass. Thanks Vijay.&lt;/p&gt;</comment>
                            <comment id="13957809" author="yukim" created="Wed, 2 Apr 2014 15:49:39 +0000"  >&lt;p&gt;+1 from me too.&lt;/p&gt;</comment>
                            <comment id="13958353" author="vijay2win@yahoo.com" created="Wed, 2 Apr 2014 23:48:47 +0000"  >&lt;p&gt;Committed to 2.1 and trunk. Thanks Ryan and Yuki!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12638192" name="0001-CASSANDRA-6965.patch" size="1496" author="vijay2win@yahoo.com" created="Wed, 2 Apr 2014 04:22:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[vijay2win@yahoo.com]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384160</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1u6lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384428</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326275">2.1 beta1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>yukim</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yukim]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>