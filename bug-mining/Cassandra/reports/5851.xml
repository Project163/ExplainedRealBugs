<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:22:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13843] Debian init shadows CASSANDRA_HEAPDUMP_DIR</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13843</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The debian init script sets the heap dump file directly using the cassandra users home directory and the -H flag to the cassandra process&lt;a href=&quot;https://github.com/apache/cassandra/blob/8b3a60b9a7dbefeecc06bace617279612ec7092d/debian/init#L76&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1&lt;/a&gt;. The cassandra heap dump location can also be set in the cassandra-env.sh file using CASSANDRA_HEAPDUMP_DIR. Unfortunately the debian init heap dump location is based off the home directory of the cassandra user and cannot easily be changed. Also unfortunately if you do `ps aux | grep casandra` you can clearly see that the -H flag takes precedent over the value found in cassandra-env.sh. This makes it difficult to change the heap dump location for cassandra and is non-intuitive when the value is set in cassandra-env.sh why the heap dump does not actually end up in the correct place.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13099842">CASSANDRA-13843</key>
            <summary>Debian init shadows CASSANDRA_HEAPDUMP_DIR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="ajorgensen">Andrew Jorgensen</reporter>
                        <labels>
                            <label>newbie</label>
                            <label>patch</label>
                    </labels>
                <created>Tue, 5 Sep 2017 13:42:48 +0000</created>
                <updated>Tue, 7 Mar 2023 11:52:22 +0000</updated>
                            <resolved>Tue, 21 Sep 2021 14:27:13 +0000</resolved>
                                        <fixVersion>3.0.26</fixVersion>
                    <fixVersion>3.11.12</fixVersion>
                    <fixVersion>4.0.2</fixVersion>
                                    <component>Legacy/Observability</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16154982" author="esimfon" created="Wed, 6 Sep 2017 08:18:06 +0000"  >&lt;p&gt;I would rather solve this issue with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13006&quot; title=&quot;Disable automatic heap dumps on OOM error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13006&quot;&gt;&lt;del&gt;CASSANDRA-13006&lt;/del&gt;&lt;/a&gt;. So instead of letting Cassandra creating it&apos;s own heapdumps leave that job to the JVM. &lt;/p&gt;</comment>
                            <comment id="16167911" author="ajorgensen" created="Fri, 15 Sep 2017 14:10:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=esimfon&quot; class=&quot;user-hover&quot; rel=&quot;esimfon&quot;&gt;esimfon&lt;/a&gt; I believe this change is still needed and works in conjunction with the change  you linked. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13006&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;CASSANDRA-13006&lt;/a&gt; does not solve this issue, it simply disables heap dumps being created automatically. The change I am proposing here is to allow the user to control where the heap dumps are written to. Currently the debian init script shadows the users ability to set the -XX:HeapDumpPath flag at all and will always default to putting them in the cassandra users home directory.&lt;/p&gt;</comment>
                            <comment id="17384944" author="brandon.williams" created="Wed, 21 Jul 2021 15:11:39 +0000"  >&lt;p&gt;I took a simpler approach &lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-13843&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; that makes the init respect CASSANDRA_HEAPDUMP_DIR so that that becomes the de facto way to specify the location.&lt;/p&gt;</comment>
                            <comment id="17418031" author="adelapena" created="Tue, 21 Sep 2021 10:29:56 +0000"  >&lt;p&gt;The approach respecting &lt;tt&gt;CASSANDRA_HEAPDUMP_DIR&lt;/tt&gt; looks good to me, +1.&lt;/p&gt;</comment>
                            <comment id="17418146" author="brandon.williams" created="Tue, 21 Sep 2021 14:27:13 +0000"  >&lt;p&gt;Thanks, committed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13015850">CASSANDRA-12849</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13011406">CASSANDRA-12772</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12885398" name="0001-Remove-debian-init-setting-heap-dump-file.patch" size="3246" author="ajorgensen" created="Tue, 5 Sep 2017 15:03:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jnnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12339541">3.11.x</customfieldvalue>
    <customfieldvalue id="12351720">5.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348835">NA</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/ea3cca04eba8844a685142d7d3093b1aa58bb4eb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/ea3cca04eba8844a685142d7d3093b1aa58bb4eb&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>