<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:30:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4095] Internal error processing get_slice (NullPointerException)</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4095</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I get this pretty regularly.  It seems to happen transiently on multiple nodes in my cluster, every so often, and goes away.&lt;/p&gt;


&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;Thrift:45&amp;#93;&lt;/span&gt; 2012-03-26 19:59:12,024 Cassandra.java (line 3041) Internal error processing get_slice&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.cassandra.db.SliceFromReadCommand.maybeGenerateRetryCommand(SliceFromReadCommand.java:76)&lt;br/&gt;
        at org.apache.cassandra.service.StorageProxy.fetchRows(StorageProxy.java:724)&lt;br/&gt;
        at org.apache.cassandra.service.StorageProxy.read(StorageProxy.java:564)&lt;br/&gt;
        at org.apache.cassandra.thrift.CassandraServer.readColumnFamily(CassandraServer.java:128)&lt;br/&gt;
        at org.apache.cassandra.thrift.CassandraServer.getSlice(CassandraServer.java:283)&lt;br/&gt;
        at org.apache.cassandra.thrift.CassandraServer.multigetSliceInternal(CassandraServer.java:365)&lt;br/&gt;
        at org.apache.cassandra.thrift.CassandraServer.get_slice(CassandraServer.java:326)&lt;br/&gt;
        at org.apache.cassandra.thrift.Cassandra$Processor$get_slice.process(Cassandra.java:3033)&lt;br/&gt;
        at org.apache.cassandra.thrift.Cassandra$Processor.process(Cassandra.java:2889)&lt;br/&gt;
        at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:187)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;



&lt;p&gt;The line in question is (I think) the one below, so it looks like the column family reference for a row can sometimes be null?&lt;/p&gt;

&lt;p&gt;    int liveColumnsInRow = row != null ? row.cf.getLiveColumnCount() : 0;&lt;/p&gt;



&lt;p&gt;Here is my column family (on 1.0.8):&lt;/p&gt;

&lt;p&gt;    ColumnFamily: WorkQueue (Super)&lt;br/&gt;
      Key Validation Class: org.apache.cassandra.db.marshal.UTF8Type&lt;br/&gt;
      Default column value validator: org.apache.cassandra.db.marshal.UTF8Type&lt;br/&gt;
      Columns sorted by: org.apache.cassandra.db.marshal.UTF8Type/org.apache.cassandra.db.marshal.UTF8Type&lt;br/&gt;
      Row cache size / save period in seconds / keys to save : 0.0/0/all&lt;br/&gt;
      Row Cache Provider: org.apache.cassandra.cache.ConcurrentLinkedHashCacheProvider&lt;br/&gt;
      Key cache size / save period in seconds: 0.0/0&lt;br/&gt;
      GC grace seconds: 0&lt;br/&gt;
      Compaction min/max thresholds: 4/32&lt;br/&gt;
      Read repair chance: 0.0&lt;br/&gt;
      Replicate on write: false&lt;br/&gt;
      Bloom Filter FP chance: default&lt;br/&gt;
      Built indexes: []&lt;br/&gt;
      Compaction Strategy: org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java(TM) SE Runtime Environment (build 1.6.0_30-b12)&lt;/p&gt;</environment>
        <key id="12548427">CASSANDRA-4095</key>
            <summary>Internal error processing get_slice (NullPointerException)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="jlaban">John Laban</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Mar 2012 03:09:54 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:36 +0000</updated>
                            <resolved>Fri, 30 Mar 2012 15:24:21 +0000</resolved>
                                        <fixVersion>1.0.9</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13241501" author="jbellis" created="Thu, 29 Mar 2012 18:45:19 +0000"  >&lt;p&gt;Thanks for the report, John.  I think your analysis is spot on.  Patch attached that does not assume row.cf is non-null.&lt;/p&gt;</comment>
                            <comment id="13241510" author="vijay2win@yahoo.com" created="Thu, 29 Mar 2012 18:56:46 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13242159" author="slebresne" created="Fri, 30 Mar 2012 08:28:13 +0000"  >&lt;p&gt;The patch doesn&apos;t compile, it&apos;s calling a method that doesn&apos;t exist. Attaching v2 that I think adds the intended method.&lt;/p&gt;</comment>
                            <comment id="13242359" author="jbellis" created="Fri, 30 Mar 2012 14:06:16 +0000"  >&lt;p&gt;I wrote the patch against 1.1, which already has that method.  Sorry for not being clear.&lt;/p&gt;</comment>
                            <comment id="13242401" author="vijay2win@yahoo.com" created="Fri, 30 Mar 2012 14:52:08 +0000"  >&lt;p&gt;I Should have also verified against 1.0, thanks!&lt;/p&gt;</comment>
                            <comment id="13242431" author="slebresne" created="Fri, 30 Mar 2012 15:24:21 +0000"  >&lt;p&gt;Alright, I&apos;ve committed v2 to 1.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12520481" name="4095.txt" size="824" author="jbellis" created="Thu, 29 Mar 2012 18:45:19 +0000"/>
                            <attachment id="12520581" name="4095_v2.txt" size="1656" author="slebresne" created="Fri, 30 Mar 2012 08:28:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233524</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0grx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95953</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>vijay2win@yahoo.com</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[vijay2win@yahoo.com]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>