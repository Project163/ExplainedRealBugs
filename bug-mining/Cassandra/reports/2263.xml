<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:39:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5774] Fix system.schema_triggers-related trigger/schema issues</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5774</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Among other things, the patch does the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;adds missing schema_triggers to MigrationManager.resetLocalSchema()&lt;/li&gt;
	&lt;li&gt;adds missing schema_triggers to SystemKeyspace.serializeSchema() - so that triggers would be part of schema version calculation&lt;/li&gt;
	&lt;li&gt;adds missing schema_triggers to DefsTables.flushSchemaCFs()&lt;/li&gt;
	&lt;li&gt;adds missing triggers to CFMetaData.toSchema(), so that CFs created via thrift with triggers from the beginning would serialize triggers&lt;/li&gt;
	&lt;li&gt;removes triggers from CFMetaData.newIndexMetadata(), so that 2i CFs wouldn&apos;t inherit the triggers from the parent CF&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There are other minor and not so minor changes, but these were the most critical ones. The patch also (unnecessarily) cleans up ColumnDefinition, but that was done to make it consistent with the new TriggerDefinition class.&lt;/p&gt;

&lt;p&gt;The bulk of the patch is the updated thrift-gen files.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12658342">CASSANDRA-5774</key>
            <summary>Fix system.schema_triggers-related trigger/schema issues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="aleksey">Aleksey Yeschenko</reporter>
                        <labels>
                            <label>triggers</label>
                    </labels>
                <created>Wed, 17 Jul 2013 19:34:24 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:09 +0000</updated>
                            <resolved>Mon, 22 Jul 2013 23:03:28 +0000</resolved>
                                        <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13715303" author="jbellis" created="Mon, 22 Jul 2013 15:40:06 +0000"  >&lt;p&gt;Do we need a mutable map in the CFDefinition copies?&lt;/p&gt;

&lt;p&gt;Should probably move the to/from/deleteFrom Schema code into SystemTable for consistency.&lt;/p&gt;

&lt;p&gt;Would prefer to split the ColumnDefinition cleanup (others?) to a separate commit, ninja is fine.&lt;/p&gt;

&lt;p&gt;Otherwise LGTM.&lt;/p&gt;</comment>
                            <comment id="13715625" author="iamaleksey" created="Mon, 22 Jul 2013 20:41:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do we need a mutable map in the CFDefinition copies?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right now we do.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should probably move the to/from/deleteFrom Schema code into SystemTable for consistency.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;it&apos;s currently in TriggerDefinition for consistency with ColumnDefinition, which follows very similar structure. If we move it to SystemTables, then we should move both. So I&apos;m gonna keep it as is in this commit, and maybe move all of schema read/write code from both ColumnDefinition and TriggerDefinition in that ninja commit.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Would prefer to split the ColumnDefinition cleanup (others?) to a separate commit, ninja is fine.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;will do&lt;/p&gt;</comment>
                            <comment id="13715683" author="jbellis" created="Mon, 22 Jul 2013 21:25:31 +0000"  >&lt;p&gt;Ship it!&lt;/p&gt;</comment>
                            <comment id="13715819" author="iamaleksey" created="Mon, 22 Jul 2013 23:03:28 +0000"  >&lt;p&gt;Pushed in separate commits, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12592836" name="5774.txt" size="232309" author="aleksey" created="Wed, 17 Jul 2013 19:35:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1me33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338856</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>