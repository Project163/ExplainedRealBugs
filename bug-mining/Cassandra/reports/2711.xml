<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:43:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6931] BatchLogManager shouldn&apos;t serialize mutations with version 1.2 in 2.1.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6931</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;BatchLogManager serialize and deserialize mutations using MessagingService.VERSION_12 and this is hardcoded. Meaning that it does that in 2.0, 2.1 and trunk, even though in 2.1 the 1.2 format is not properly serialized properly since &lt;a href=&quot;https://github.com/apache/cassandra/commit/cca65d7c1638dcd9370b080f08fd55faefc2733e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this commit&lt;/a&gt; (meaning that I&apos;m pretty sure batch logs on super columns is broken on 2.1 currently). And keeping the 1.2 format indefinitely just for batchlog is unrealistic.&lt;/p&gt;

&lt;p&gt;So batchlog needs to do something like hints, record the messaging format used to encode every mutation and use that for deserialization, but always serialize with the current format.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12703692">CASSANDRA-6931</key>
            <summary>BatchLogManager shouldn&apos;t serialize mutations with version 1.2 in 2.1.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Mar 2014 10:19:01 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:50 +0000</updated>
                            <resolved>Mon, 31 Mar 2014 10:16:27 +0000</resolved>
                                        <fixVersion>2.0.7</fixVersion>
                    <fixVersion>2.1 beta2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13954505" author="iamaleksey" created="Sat, 29 Mar 2014 23:09:25 +0000"  >&lt;p&gt;Pushed to &lt;a href=&quot;https://github.com/iamaleksey/cassandra/commits/6931-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/iamaleksey/cassandra/commits/6931-2.0&lt;/a&gt; and to &lt;br/&gt;
&lt;a href=&quot;https://github.com/iamaleksey/cassandra/commits/6931-2.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/iamaleksey/cassandra/commits/6931-2.1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The first (2.0) branch makes 2.0 understand VERSION_20-encoded batches sent from 2.1, which fixes currently broken 2.1-&amp;gt;2.0 super-cf batches during the rolling upgrade.&lt;/p&gt;

&lt;p&gt;The second (2.1) branch adds &apos;version&apos; column to the batchlog cf and uses/records the version of the target node when serializing for the batchlog.&lt;/p&gt;

&lt;p&gt;This means that 1) Rolling upgrade to 2.1 requires at least 2.0.7 now, and 2) We can&apos;t ditch supercolumn deserialize code entirely until 3.0, unless we introduce a required middle step somewhere in 2.0, which I&apos;d rather not do.&lt;/p&gt;</comment>
                            <comment id="13955038" author="slebresne" created="Mon, 31 Mar 2014 09:00:23 +0000"  >&lt;p&gt;It&apos;s a bit annoying to have to bump the minimum requirement to upgrade to 2.1 once again: can&apos;t we just special case the 2.1 patch to use the 1.2 version for any node before 2.1 (which would make the 2.0 patch unnecessary as a bonus,  not that the 2.0 patch is extremely complex)?&lt;/p&gt;</comment>
                            <comment id="13955039" author="slebresne" created="Mon, 31 Mar 2014 09:03:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;can&apos;t we just special case the 2.1 patch to use the 1.2 version for any node before 2.1&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hum, never mind, that would force us to re-add the serialization code for super columns which is probably more error-prone that not.&lt;br/&gt;
Well, +1 to the patches then.&lt;/p&gt;</comment>
                            <comment id="13955072" author="iamaleksey" created="Mon, 31 Mar 2014 10:16:27 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382026</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ttgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382301</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>