<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:17:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1734] New subcolumn resurrect deleted subcolumns</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1734</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The followings are the conversation I had with jbellis on IRC:&lt;br/&gt;
have a question on deletion of super column....deletion of SuperColumn works fine....but when I add any new sub-column, the &apos;old&apos; sub-columns reappear..how can I tell they are tombstoned&lt;br/&gt;
the &apos;old&apos; sub-columns still have all the data in place, including timestamp&lt;br/&gt;
and the timestamp is older than markDeletaAt of the super column&lt;br/&gt;
&amp;lt;jbellis&amp;gt; appoji: right.  that is expected.  the subcolumns won&apos;t be tombstoned, the supercolumn tombstone should supress them.&lt;br/&gt;
&amp;lt;jbellis&amp;gt; shouldn&apos;t*&lt;br/&gt;
&amp;lt;jbellis&amp;gt; appoji: but writing a new subcolumn should resurrect the others.  can you submit a test case?&lt;/p&gt;

&lt;p&gt;I am able to reproduce it with cli as followings:&lt;/p&gt;

&lt;p&gt;1.  create column family UserGroup with column_type = &apos;Super&apos; and gc_grace=5 and comparator = &apos;AsciiType&apos; and subcomparator = &apos;BytesType&apos;&lt;br/&gt;
2. set UserGroup &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;100&amp;#39;&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;memberList&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;paul&amp;#39;&amp;#93;&lt;/span&gt;=&apos;&apos;&lt;br/&gt;
3. del UserGroup &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;100&amp;#39;&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;memberList&amp;#39;&amp;#93;&lt;/span&gt;&lt;br/&gt;
4. wait for 5 seconds and &quot;list UserGroup&quot; does not return any data, which is correct&lt;br/&gt;
5. set UserGroup &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;100&amp;#39;&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;memberList&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;andrew&amp;#39;&amp;#93;&lt;/span&gt;=&apos;&apos;&lt;br/&gt;
6. now &quot;list UserGroup&quot; returns 2 sub-columns (&apos;paul&apos; and &apos;andrew&apos;)&lt;/p&gt;

&lt;p&gt;here is server log for step 6:&lt;/p&gt;

&lt;p&gt;DEBUG 22:40:52,378 range_slice&lt;br/&gt;
DEBUG 22:40:52,379 RangeSliceCommand&lt;/p&gt;
{keyspace=&apos;Appoji&apos;, column_family=&apos;UserGroup
1&apos;, super_column=null, predicate=SlicePredicate(slice_range:SliceRange(start:80
01 00 01 00 00 00 10 67 65 74 5F 72 61 6E 67 65 5F 73 6C 69 63 65 73 00 00 00 28
 0C 00 01 0B 00 03 00 00 00 0A 55 73 65 72 47 72 6F 75 70 31 00 0C 00 02 0C 00 0
2 0B 00 01 00 00 00 00, finish:80 01 00 01 00 00 00 10 67 65 74 5F 72 61 6E 67 6
5 5F 73 6C 69 63 65 73 00 00 00 28 0C 00 01 0B 00 03 00 00 00 0A 55 73 65 72 47
72 6F 75 70 31 00 0C 00 02 0C 00 02 0B 00 01 00 00 00 00 0B 00 02 00 00 00 00, r
eversed:false, count:100)), range=[0,0], max_keys=100}
&lt;p&gt;DEBUG 22:40:52,380 restricted single token match for query &lt;span class=&quot;error&quot;&gt;&amp;#91;0,0&amp;#93;&lt;/span&gt;&lt;br/&gt;
DEBUG 22:40:52,381 local range slice&lt;br/&gt;
DEBUG 22:40:52,382 collecting 0 of 100: SuperColumn(memberList -delete at 128953&lt;br/&gt;
3231194000- [616e64726577:false:0@1289533250404000,7061756c:false:0@128953321401&lt;br/&gt;
5000,])&lt;br/&gt;
DEBUG 22:40:52,383 scanned DecoratedKey(9839004666223652184852086760848439587, 3&lt;br/&gt;
13030)&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows7-64&lt;/p&gt;</environment>
        <key id="12479769">CASSANDRA-1734</key>
            <summary>New subcolumn resurrect deleted subcolumns</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="wenjun@appoji.com">Wenjun</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Nov 2010 03:43:36 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:13 +0000</updated>
                            <resolved>Mon, 15 Nov 2010 14:24:15 +0000</resolved>
                                        <fixVersion>0.7.0 rc 1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12931797" author="jbellis" created="Sun, 14 Nov 2010 09:36:59 +0000"  >&lt;p&gt;patch to add removeDeleted call to getRangeSlices (list) as it is for getColumnFamily (get)&lt;/p&gt;</comment>
                            <comment id="12932059" author="tjake" created="Mon, 15 Nov 2010 14:08:50 +0000"  >&lt;p&gt;The patch doesn&apos;t account for already deleted rows, where cf if null.&lt;/p&gt;

&lt;p&gt;I&apos;ve addressed this in the next patch, +1 with this change.&lt;/p&gt;</comment>
                            <comment id="12932063" author="jbellis" created="Mon, 15 Nov 2010 14:24:15 +0000"  >&lt;p&gt;committed v2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12459550" name="1734.txt" size="3349" author="jbellis" created="Sun, 14 Nov 2010 09:36:59 +0000"/>
                            <attachment id="12459603" name="1734_v2.txt" size="3371" author="tjake" created="Mon, 15 Nov 2010 14:08:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g727:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92574</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tjake</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[tjake]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>