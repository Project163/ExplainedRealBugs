<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:58:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10412] Could not initialize class org.apache.cassandra.config.DatabaseDescriptor</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10412</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We are unable to start version 2.2.1 on our Windows 2012 R2 systems, however we can use the same environment to start version 2.1.2&lt;/p&gt;

&lt;p&gt;I have attached our Cassandra.yaml and cassandra-env.ps1 file for reference.  I have also attached the system.log file displaying the error.&lt;/p&gt;


&lt;p&gt;I have also included an excerpt of the log file showing the stack trace of the error.&lt;/p&gt;


&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;ScheduledTasks:1&amp;#93;&lt;/span&gt; 2015-09-29 07:03:47,482 DebuggableThreadPoolExecutor.java:242 - Error in ThreadPoolExecutor&lt;br/&gt;
java.lang.NoClassDefFoundError: Could not initialize class org.apache.cassandra.config.DatabaseDescriptor&lt;br/&gt;
	at org.apache.cassandra.utils.JVMStabilityInspector.inspectThrowable(JVMStabilityInspector.java:57) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.2.1.jar:2.2.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.concurrent.DebuggableScheduledThreadPoolExecutor$UncomplainingRunnable.run(DebuggableScheduledThreadPoolExecutor.java:122) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.2.1.jar:2.2.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.FutureTask.runAndReset(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Unknown Source) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS: Windows 2012 R2&lt;br/&gt;
Java JRE: 1.8.0_51&lt;/p&gt;</environment>
        <key id="12901337">CASSANDRA-10412</key>
            <summary>Could not initialize class org.apache.cassandra.config.DatabaseDescriptor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="carlyeks">Carl Yeksigian</assignee>
                                    <reporter username="esimmons">Eric Simmons</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Sep 2015 15:13:19 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:03 +0000</updated>
                            <resolved>Mon, 12 Oct 2015 12:56:44 +0000</resolved>
                                        <fixVersion>2.2.3</fixVersion>
                    <fixVersion>3.0.0 rc2</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14935443" author="carlyeks" created="Tue, 29 Sep 2015 17:01:16 +0000"  >&lt;p&gt;This is a problem with the .yaml file; we try to load it in a static constructor in &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt; and fail.&lt;/p&gt;

&lt;p&gt;It looks like the setting of &lt;tt&gt;memtable_cleanup_threshold&lt;/tt&gt; is causing the problem; it should be &amp;lt;=0.99.&lt;/p&gt;</comment>
                            <comment id="14935448" author="esimmons" created="Tue, 29 Sep 2015 17:03:40 +0000"  >&lt;p&gt;Thanks.  I will give it a try.&lt;/p&gt;

&lt;p&gt;John Eric Simmons | Varec&lt;br/&gt;
Senior Software Engineer&lt;br/&gt;
phone: 770.810.9317 | mobile: 770.508.9298&lt;br/&gt;
esimmons@varec.com | varec.com&lt;/p&gt;

&lt;p&gt;Varec, Inc.&lt;br/&gt;
5834 Peachtree Corners East&lt;br/&gt;
Peachtree Corners (Atlanta), GA 30092&lt;/p&gt;

&lt;p&gt;Measurement | Control&#160;| Automation&#160;| Enterprise&#160; |&#160; Integration&#160;| Support&lt;/p&gt;

&lt;p&gt;Varec, Inc. is a Leidos company. This email and any attachments to it are intended only for the identified recipients. It may contain proprietary or otherwise legally protected information of Leidos. Any unauthorized use or disclosure of this communication is strictly prohibited. If you have received this communication in error, please notify the sender and delete or otherwise destroy the email and all attachments immediately.&lt;/p&gt;

&lt;p&gt;&#61520; Please consider the environment before printing this email.&lt;/p&gt;

</comment>
                            <comment id="14935487" author="esimmons" created="Tue, 29 Sep 2015 17:24:40 +0000"  >&lt;p&gt;That resolved the issue.  Thank you so much.&lt;/p&gt;

&lt;p&gt;John Eric Simmons | Varec&lt;br/&gt;
Senior Software Engineer&lt;br/&gt;
phone: 770.810.9317 | mobile: 770.508.9298&lt;br/&gt;
esimmons@varec.com | varec.com&lt;/p&gt;

&lt;p&gt;Varec, Inc.&lt;br/&gt;
5834 Peachtree Corners East&lt;br/&gt;
Peachtree Corners (Atlanta), GA 30092&lt;/p&gt;

&lt;p&gt;Measurement | Control&#160;| Automation&#160;| Enterprise&#160; |&#160; Integration&#160;| Support&lt;/p&gt;

&lt;p&gt;Varec, Inc. is a Leidos company. This email and any attachments to it are intended only for the identified recipients. It may contain proprietary or otherwise legally protected information of Leidos. Any unauthorized use or disclosure of this communication is strictly prohibited. If you have received this communication in error, please notify the sender and delete or otherwise destroy the email and all attachments immediately.&lt;/p&gt;

&lt;p&gt;&#61520; Please consider the environment before printing this email.&lt;/p&gt;


</comment>
                            <comment id="14940747" author="jbellis" created="Fri, 2 Oct 2015 04:07:46 +0000"  >&lt;p&gt;Can we make yaml loading fail with an easier to understand error message?&lt;/p&gt;</comment>
                            <comment id="14941726" author="carlyeks" created="Fri, 2 Oct 2015 20:37:29 +0000"  >&lt;p&gt;This was a confluence of a few separate issues together. In 2.1, we were immediately exiting with a log message when the yaml loading failed. In &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7997&quot; title=&quot;Improve the ability to run the CassandraDaemon as a managed service&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7997&quot;&gt;&lt;del&gt;CASSANDRA-7997&lt;/del&gt;&lt;/a&gt;, we removed that fast-fail portion of the code which manifested this error. To get around that, we added back an initialization step for &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt; in &lt;tt&gt;CassandraDaemon&lt;/tt&gt;, but &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9634&quot; title=&quot;Set kernel timer resolution on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9634&quot;&gt;&lt;del&gt;CASSANDRA-9634&lt;/del&gt;&lt;/a&gt; has us touching the &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt; earlier than the static initialization but only on Windows.&lt;/p&gt;

&lt;p&gt;It seems like changing &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt;&apos;s static behavior to not use &lt;tt&gt;System.exit&lt;/tt&gt; when it fails to load the config makes the class much harder to use and breaks our assumption that it will handle error conditions properly. I added a new state to config &lt;tt&gt;isEmbeddedService&lt;/tt&gt; to allow us to skip the &lt;tt&gt;System.exit&lt;/tt&gt; for when embedding Cassandra, but in the general case we&apos;ll exit early if the config is not properly loaded.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/carlyeks/cassandra/tree/ticket/10412/2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;br/&gt;
cassci: &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10412-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 utest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10412-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 dtest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10412-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 utest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10412-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 dtest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10412-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk utest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10412-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk dtest&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14945671" author="pauloricardomg" created="Tue, 6 Oct 2015 20:08:24 +0000"  >&lt;p&gt;Overall looks good, but I&apos;d rather not add the &lt;tt&gt;Config.setEmbeddedService()&lt;/tt&gt; method only for this exit check on &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt; if there are alternatives. &lt;/p&gt;

&lt;p&gt;Can&apos;t we move the Windows timer period initialization to after &lt;tt&gt;DatabaseDescriptor.forceStaticInitialization()&lt;/tt&gt; on &lt;tt&gt;CassandraDaemon.activate()&lt;/tt&gt; ? The &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt; static initialization will be done anyway before the timer setup, so unless there&apos;s some nit I&apos;m not aware of with this Windows timer period thing I don&apos;t see a problem with this approach. We&apos;d still need to throw &lt;tt&gt;ExceptionInInitializerError&lt;/tt&gt; after catching a &lt;tt&gt;ConfigurationException&lt;/tt&gt; on  &lt;tt&gt;DatabaseDescriptor.forceStaticInitialization()&lt;/tt&gt;, so &lt;tt&gt;CassandraDaemon.activate()&lt;/tt&gt; would fail and exit with a nice message after a configuration error.&lt;/p&gt;</comment>
                            <comment id="14945744" author="jmckenzie" created="Tue, 6 Oct 2015 20:40:52 +0000"  >&lt;p&gt;Windows timer init&apos;s pretty flexible, so move it around in that method at-will.&lt;/p&gt;</comment>
                            <comment id="14945797" author="carlyeks" created="Tue, 6 Oct 2015 21:04:09 +0000"  >&lt;p&gt;It is an easy fix, but I&apos;d rather fix the prior mistake so that it hopefully doesn&apos;t happen again. I provided the history behind how this broke to show that it&apos;s broken a few times and is very fragile. The changes have made &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt; more difficult to use, and it&apos;s to support a secondary use case whereas for our primary use case, it&apos;s become brittle.&lt;/p&gt;</comment>
                            <comment id="14945931" author="pauloricardomg" created="Tue, 6 Oct 2015 22:19:26 +0000"  >&lt;p&gt;I think we should keep as few &lt;tt&gt;System.exit&lt;/tt&gt; calls as possible spread around the code, and &lt;tt&gt;CassandraDaemon&lt;/tt&gt; already has a &lt;tt&gt;runManaged&lt;/tt&gt; field to supress &lt;tt&gt;System.exit()&lt;/tt&gt; on errors, so we would be duplicating that functionality with &lt;tt&gt;DatabaseDescriptor.setEmbeddedService()&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;I don&apos;t think &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt; became more difficult to use, we just need to make sure it&apos;s used after &lt;tt&gt;DatabaseDescriptor.forceStaticInitialization()&lt;/tt&gt; statement on &lt;tt&gt;CassandraDaemon.activate()&lt;/tt&gt;. Maybe we could rename this method or add a notice to &lt;tt&gt;CassandraDaemon.activate()&lt;/tt&gt; to make this more clear? Do you see any situation in which we would need to access &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt; before it&apos;s initialization on &lt;tt&gt;CassandraDaemon.activate()&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="14946888" author="carlyeks" created="Wed, 7 Oct 2015 14:02:11 +0000"  >&lt;p&gt;Pushed a new version of the ticket which just has the changes to &lt;tt&gt;CassandraDaemon.activate&lt;/tt&gt;, along with a comment there. &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt; is also used in the offline tools, so I made changes to the offline tools to make sure they properly call &lt;tt&gt;forceStaticInitialization&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14947517" author="pauloricardomg" created="Wed, 7 Oct 2015 20:28:04 +0000"  >&lt;p&gt;+1, marking as ready to commit. thanks!&lt;/p&gt;</comment>
                            <comment id="14953083" author="slebresne" created="Mon, 12 Oct 2015 12:56:44 +0000"  >&lt;p&gt;Based on the previous comment, I&apos;ve assumed you forgot the click the &quot;ready to commit&quot; button and committed. Feel free to complain if it was actually not ready to commit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12764258" name="cassandra-env.ps1" size="19006" author="esimmons" created="Tue, 29 Sep 2015 15:13:19 +0000"/>
                            <attachment id="12764257" name="cassandra.yaml" size="42080" author="esimmons" created="Tue, 29 Sep 2015 15:13:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[carlyeks]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mesn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>pauloricardomg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[pauloricardomg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>