<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:19:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2189] json2sstable fails due to OutOfMemory</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2189</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I have a json file created with sstable2json for a column family of super column type. Its size is about 1.9GB. (It&apos;s a dump of all keys because I cannot find out how to specify keys to dump in sstable2json.)&lt;br/&gt;
When I tried to create sstable from the json file, it failed with OutOfMemoryError as follows.&lt;/p&gt;

&lt;p&gt; WARN 00:31:58,595 Schema definitions were defined both locally and in cassandra.yaml. Definitions in cassandra.yaml were ignored.&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: PermGen space&lt;br/&gt;
        at java.lang.String.intern(Native Method)&lt;br/&gt;
        at org.codehaus.jackson.util.InternCache.intern(InternCache.java:40)&lt;br/&gt;
        at org.codehaus.jackson.sym.BytesToNameCanonicalizer.addName(BytesToNameCanonicalizer.java:471)&lt;br/&gt;
        at org.codehaus.jackson.impl.Utf8StreamParser.addName(Utf8StreamParser.java:893)&lt;br/&gt;
        at org.codehaus.jackson.impl.Utf8StreamParser.findName(Utf8StreamParser.java:773)&lt;br/&gt;
        at org.codehaus.jackson.impl.Utf8StreamParser.parseLongFieldName(Utf8StreamParser.java:379)&lt;br/&gt;
        at org.codehaus.jackson.impl.Utf8StreamParser.parseMediumFieldName(Utf8StreamParser.java:347)&lt;br/&gt;
        at org.codehaus.jackson.impl.Utf8StreamParser._parseFieldName(Utf8StreamParser.java:304)&lt;br/&gt;
        at org.codehaus.jackson.impl.Utf8StreamParser.nextToken(Utf8StreamParser.java:140)&lt;br/&gt;
        at org.codehaus.jackson.map.deser.UntypedObjectDeserializer.mapObject(UntypedObjectDeserializer.java:93)&lt;br/&gt;
        at org.codehaus.jackson.map.deser.UntypedObjectDeserializer.deserialize(UntypedObjectDeserializer.java:65)&lt;br/&gt;
        at org.codehaus.jackson.map.deser.MapDeserializer._readAndBind(MapDeserializer.java:197)&lt;br/&gt;
        at org.codehaus.jackson.map.deser.MapDeserializer.deserialize(MapDeserializer.java:145)&lt;br/&gt;
        at org.codehaus.jackson.map.deser.MapDeserializer.deserialize(MapDeserializer.java:23)&lt;br/&gt;
        at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:1261)&lt;br/&gt;
        at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:517)&lt;br/&gt;
        at org.codehaus.jackson.JsonParser.readValueAs(JsonParser.java:897)&lt;br/&gt;
        at org.apache.cassandra.tools.SSTableImport.importUnsorted(SSTableImport.java:208)&lt;br/&gt;
        at org.apache.cassandra.tools.SSTableImport.importJson(SSTableImport.java:197)&lt;br/&gt;
        at org.apache.cassandra.tools.SSTableImport.main(SSTableImport.java:421)&lt;/p&gt;

&lt;p&gt;So, what I had to is that split the json file with &quot;split&quot; command and modify them to be correct json file. Create sstable for each small json files.&lt;/p&gt;

&lt;p&gt;Could you change json2sstable to avoid OutOfMemory?&lt;/p&gt;</description>
                <environment>&lt;p&gt;linux&lt;/p&gt;</environment>
        <key id="12498991">CASSANDRA-2189</key>
            <summary>json2sstable fails due to OutOfMemory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="skamio">Shotaro Kamio</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Feb 2011 02:53:57 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:06 +0000</updated>
                            <resolved>Thu, 8 Dec 2011 16:39:54 +0000</resolved>
                                        <fixVersion>0.8.9</fixVersion>
                    <fixVersion>1.0.6</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="12996224" author="jbellis" created="Fri, 18 Feb 2011 03:00:26 +0000"  >&lt;p&gt;That kind of looks like a jackson bug to me.  I&apos;ll ask Tatu.&lt;/p&gt;</comment>
                            <comment id="12996262" author="jbellis" created="Fri, 18 Feb 2011 06:58:53 +0000"  >&lt;p&gt;patch to disable interning.  (Thanks to Tatu for pointing me at the right Feature.)&lt;/p&gt;</comment>
                            <comment id="12997567" author="jbellis" created="Mon, 21 Feb 2011 21:13:15 +0000"  >&lt;p&gt;Shotaro, can you test the patch?&lt;/p&gt;</comment>
                            <comment id="12998606" author="jbellis" created="Wed, 23 Feb 2011 23:28:09 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="12998616" author="hudson" created="Wed, 23 Feb 2011 23:46:32 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #313 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.7/313/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.7/313/&lt;/a&gt;)&lt;br/&gt;
    turnoff string interning in json2sstable&lt;br/&gt;
patch by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2189&quot; title=&quot;json2sstable fails due to OutOfMemory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2189&quot;&gt;&lt;del&gt;CASSANDRA-2189&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13164845" author="jbellis" created="Wed, 7 Dec 2011 23:46:19 +0000"  >&lt;p&gt;This didn&apos;t actually fix the problem.  Tatu again:&lt;/p&gt;

&lt;p&gt;&quot;This calls configure on parser; but at that point the symbol table has already been created. So configure must be called on the factory first (and only need to be called once, really), and then settings will be passed as expected.&quot;&lt;/p&gt;</comment>
                            <comment id="13164850" author="jbellis" created="Wed, 7 Dec 2011 23:54:22 +0000"  >&lt;p&gt;Patch attached to move configuration to the factory.&lt;/p&gt;</comment>
                            <comment id="13165314" author="jbellis" created="Thu, 8 Dec 2011 16:39:54 +0000"  >&lt;p&gt;Customer testing indicates that this is a big improvement, especially when combined with an upgrade to Jackson 1.9.2.  I&apos;ll commit this patch to 0.8.9 and 1.0.6, and upgrade Jackson in trunk.&lt;/p&gt;</comment>
                            <comment id="13165349" author="hudson" created="Thu, 8 Dec 2011 17:37:14 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #413 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra-0.8/413/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra-0.8/413/&lt;/a&gt;)&lt;br/&gt;
    turn off string interning in json2sstable, take 2&lt;br/&gt;
patch by jbellis; tested by George Ciubotaru for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2189&quot; title=&quot;json2sstable fails due to OutOfMemory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2189&quot;&gt;&lt;del&gt;CASSANDRA-2189&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;jbellis : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1211976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1211976&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/tools/SSTableImport.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506542" name="2189-2.txt" size="1543" author="jbellis" created="Wed, 7 Dec 2011 23:54:22 +0000"/>
                            <attachment id="12471370" name="2189.txt" size="593" author="jbellis" created="Fri, 18 Feb 2011 06:58:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g9v3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93028</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>