<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:46:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7503] Windows - better communication on start-up failure</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7503</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The Windows launch scripts report successful launch on certain failure conditions.  For instance, if you try to start a 2nd instance of Cassandra and it fails to bind to the JMX port:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;silent failure&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;D:\src\cassandra\bin&amp;gt;cassandra.bat
Detected powershell execution permissions.  Running with enhanced startup scripts.
Setting up Cassandra environment
Starting cassandra server
Started cassandra successfully with pid: 6520
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;-f failure&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;D:\src\cassandra\bin&amp;gt;cassandra.bat -f
Detected powershell execution permissions.  Running with enhanced startup scripts.
Setting up Cassandra environment
Starting cassandra server
Error: Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 7199; nested exception is:
        java.net.BindException: Address already in use: JVM_Bind
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reference &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7254&quot; title=&quot;NPE on startup if another Cassandra instance is already running&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7254&quot;&gt;&lt;del&gt;CASSANDRA-7254&lt;/del&gt;&lt;/a&gt; for linux-based solution to a similar NPE on startup due to duplicate JMX port-bind.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12725745">CASSANDRA-7503</key>
            <summary>Windows - better communication on start-up failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ala.alkhaldi">Ala&apos; Alkhaldi</assignee>
                                    <reporter username="jmckenzie">Josh McKenzie</reporter>
                        <labels>
                            <label>Windows</label>
                    </labels>
                <created>Mon, 7 Jul 2014 14:08:14 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:07 +0000</updated>
                            <resolved>Mon, 14 Jul 2014 12:48:36 +0000</resolved>
                                        <fixVersion>2.1 rc4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14054251" author="ala.alkhaldi" created="Mon, 7 Jul 2014 22:29:35 +0000"  >&lt;p&gt;The problem can be detected if the sleep time after running cassandra process is increased to few seconds (as shown in the attached 7503_v1.txt), the script will report &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;D:\Projects\cassandra&amp;gt;bin\cassandra
Detected powershell execution permissions.  Running with enhanced startup scripts.
Setting up Cassandra environment
Starting cassandra server
Error starting cassandra.
Run with -v and -f to get foreground verbose information on the error.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similar behavior can be also achieved by using &quot;System.Diagnostics.Process&quot; as in the foreground case and using WaitForExit(1500)&lt;/p&gt;</comment>
                            <comment id="14054284" author="jmckenzie" created="Mon, 7 Jul 2014 23:29:53 +0000"  >&lt;p&gt;Will that 1.5 second sleep interfere with starting clusters via ccm and potentially with dtests?&lt;/p&gt;

&lt;p&gt;On the linux side we simply return the exit code of the call to the daemon - maybe we should do the same and set ERRORLEVEL on Windows as appropriate rather than putting in arbitrary timings at all?&lt;/p&gt;</comment>
                            <comment id="14059192" author="ala.alkhaldi" created="Fri, 11 Jul 2014 18:51:10 +0000"  >&lt;p&gt;I cleaned up the wait time as well as the sucess/error messages. Now the script returns the immediate exit code of the start-process command. Please check 7503_v2.txt&lt;/p&gt;</comment>
                            <comment id="14059291" author="jmckenzie" created="Fri, 11 Jul 2014 20:21:03 +0000"  >&lt;p&gt;Attaching a v3 that does a few extra things I thought of while reviewing:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Make writing pidfile required since we can&apos;t SIGINT procs on Windows without it (overrides path if they provide -p)&lt;/li&gt;
	&lt;li&gt;Pass back return code as 0 or 1 from PowerShell to .bat file&lt;/li&gt;
	&lt;li&gt;Set errorlevel in .bat file and immediately exit, transferring control to caller after powershell launch is complete&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This should give us idiomatic scripting behavior on Windows (errorlevel) and still mirror our behavior on the linux launch scripts.&lt;/p&gt;</comment>
                            <comment id="14059405" author="ala.alkhaldi" created="Fri, 11 Jul 2014 21:47:51 +0000"  >&lt;p&gt;looks good to me. +1&lt;/p&gt;</comment>
                            <comment id="14059664" author="jbellis" created="Sat, 12 Jul 2014 05:49:05 +0000"  >&lt;p&gt;Tagged 2.1.0 but v3 doesn&apos;t apply to 2.1.0 branch?&lt;/p&gt;</comment>
                            <comment id="14059799" author="jmckenzie" created="Sat, 12 Jul 2014 14:09:28 +0000"  >&lt;p&gt;Line-ending issues on cassandra.bat seem to consistently give us issues on patch generation if we generate the patch file on Windows with autocrlf set to true (which we usually do).  Sorry about that - attaching a v4 that applies to 2.1.0 branch successfully on linux.&lt;/p&gt;</comment>
                            <comment id="14060606" author="jbellis" created="Mon, 14 Jul 2014 12:48:37 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12654405" name="7503_v1.txt" size="419" author="ala.alkhaldi" created="Mon, 7 Jul 2014 22:29:29 +0000"/>
                            <attachment id="12655277" name="7503_v2.txt" size="1116" author="ala.alkhaldi" created="Fri, 11 Jul 2014 18:49:03 +0000"/>
                            <attachment id="12655288" name="7503_v3.txt" size="3476" author="joshuamckenzie" created="Fri, 11 Jul 2014 20:21:03 +0000"/>
                            <attachment id="12655401" name="7503_v4.txt" size="3486" author="joshuamckenzie" created="Sat, 12 Jul 2014 14:09:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ala.alkhaldi]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403903</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xijj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>joshuamckenzie</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[joshuamckenzie]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>