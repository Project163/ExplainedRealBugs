<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:29:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18999] Gossiper::hasMajorVersion3Nodes returns true when a cluster is upgrading patch version without Cassandra 3 nodes.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18999</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When working on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18968&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-18968&lt;/a&gt; we found that &lt;tt&gt;Gossiper::hasMajorVersion3Nodes&lt;/tt&gt; will return true when the cluster is undergoing an upgrade from a patch version even if the cluster has no Cassandra 3 nodes in it.&lt;/p&gt;

&lt;p&gt;This can be reproduced by running this Gossiper test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testHasVersion3NodesShouldReturnFalseWhenNoVersion3NodesDetectedAndCassandra4UpgradeInProgress() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
    {
        Gossiper.instance.start(0);
        Gossiper.instance.expireUpgradeFromVersion();

        VersionedValue.VersionedValueFactory factory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; VersionedValue.VersionedValueFactory(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        EndpointState es = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EndpointState((HeartBeatState) &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        es.addApplicationState(ApplicationState.RELEASE_VERSION, factory.releaseVersion(CURRENT_VERSION.toString()));
        Gossiper.instance.endpointStateMap.put(InetAddressAndPort.getByName(&lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;), es);
        Gossiper.instance.liveEndpoints.add(InetAddressAndPort.getByName(&lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;));

        es = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EndpointState((HeartBeatState) &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; previousPatchVersion = &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(CURRENT_VERSION.major) + &lt;span class=&quot;code-quote&quot;&gt;&apos;.&apos;&lt;/span&gt; + (CURRENT_VERSION.minor) + &lt;span class=&quot;code-quote&quot;&gt;&apos;.&apos;&lt;/span&gt; + (CURRENT_VERSION.patch - 1);
        es.addApplicationState(ApplicationState.RELEASE_VERSION, factory.releaseVersion(previousPatchVersion));
        Gossiper.instance.endpointStateMap.put(InetAddressAndPort.getByName(&lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.2&quot;&lt;/span&gt;), es);
        Gossiper.instance.liveEndpoints.add(InetAddressAndPort.getByName(&lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.2&quot;&lt;/span&gt;));
        assertFalse(Gossiper.instance.hasMajorVersion3Nodes());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This seems to be because of &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-4.1/src/java/org/apache/cassandra/gms/Gossiper.java#L2360&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-4.1/src/java/org/apache/cassandra/gms/Gossiper.java#L2360&lt;/a&gt;, where an upgrade in progress is possible but we are not upgrading from a lower family version (i.e from 4.1.1 to 4.1.2).&lt;/p&gt;

&lt;p&gt;From the comment in this function, it seems instead of the existing check, we would want to iterate over all known endpoints in gossip and return true if any of them do not have a version (similar to &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-4.1/src/java/org/apache/cassandra/gms/Gossiper.java#L227-L236).&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-4.1/src/java/org/apache/cassandra/gms/Gossiper.java#L227-L236)&#160;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13556747">CASSANDRA-18999</key>
            <summary>Gossiper::hasMajorVersion3Nodes returns true when a cluster is upgrading patch version without Cassandra 3 nodes.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="isaacreath">Isaac Reath</assignee>
                                    <reporter username="isaacreath">Isaac Reath</reporter>
                        <labels>
                            <label>lhf</label>
                    </labels>
                <created>Fri, 3 Nov 2023 21:01:00 +0000</created>
                <updated>Tue, 26 Mar 2024 10:38:29 +0000</updated>
                            <resolved>Wed, 10 Jan 2024 16:27:47 +0000</resolved>
                                        <fixVersion>4.0.12</fixVersion>
                    <fixVersion>4.1.4</fixVersion>
                    <fixVersion>5.0-rc1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>Legacy/Distributed Metadata</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17782778" author="paulo" created="Fri, 3 Nov 2023 21:28:48 +0000"  >&lt;p&gt;Nice catch, thanks for the report!&lt;/p&gt;

&lt;p&gt;Based on the &lt;a href=&quot;https://github.com/search?q=repo%3Aapache%2Fcassandra%20hasMajorVersion3Nodes&amp;amp;type=code)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;usages of this function&lt;/a&gt; it looks like this could cause 2 minor side-effects during minor 4.x upgrades:&lt;br/&gt;
a) &lt;a href=&quot;https://github.com/apache/cassandra/blob/e5d235dd4d385a324a3599c178118a2f32ec85d6/src/java/org/apache/cassandra/tracing/TraceKeyspace.java#L128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;omit insertion&lt;/a&gt; of trace columns &lt;tt&gt;source_port&lt;/tt&gt; and &lt;tt&gt;cordinator_port&lt;/tt&gt;&lt;br/&gt;
b) &lt;a href=&quot;https://github.com/apache/cassandra/blob/e5d235dd4d385a324a3599c178118a2f32ec85d6/src/java/org/apache/cassandra/schema/SystemDistributedKeyspace.java#L233&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;omit insertion&lt;/a&gt; of system_distributed.repair_history columns &lt;tt&gt;coordinator_port&lt;/tt&gt; and &lt;tt&gt;participants_v2&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This looks like low severity but still important to fix to prevent these defects during minor upgrades.&lt;/p&gt;</comment>
                            <comment id="17782779" author="paulo" created="Fri, 3 Nov 2023 21:33:32 +0000"  >&lt;p&gt;Also:&lt;br/&gt;
c) &lt;a href=&quot;https://github.com/apache/cassandra/blob/e5d235dd4d385a324a3599c178118a2f32ec85d6/src/java/org/apache/cassandra/gms/Gossiper.java#L1727&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Skip removing&lt;/a&gt;  legacy fields from gossip state once the cluster has upgraded (this would not be an issue since the fields would have been already removed in a minor 4.x upgrade)&lt;/p&gt;</comment>
                            <comment id="17783240" author="brandon.williams" created="Mon, 6 Nov 2023 14:53:10 +0000"  >&lt;p&gt;After 4.1, I think this method can be removed since upgrading directly from 3.x to 5.x is not supported.&lt;/p&gt;</comment>
                            <comment id="17784416" author="michaelsembwever" created="Thu, 9 Nov 2023 12:06:47 +0000"  >&lt;p&gt;Removing fixVersion 5.0-beta as I see nothing here that is critical and should block 5.0-beta1,  and the patch for all the branches is best done in one go (even if &amp;gt;5 is removing the function).&lt;/p&gt;</comment>
                            <comment id="17794303" author="isaacreath" created="Thu, 7 Dec 2023 15:33:14 +0000"  >&lt;p&gt;Looks like this function was removed on trunk in &lt;a href=&quot;https://github.com/apache/cassandra/commit/ae0842372ff6dd1437d026f82968a3749f555ff4#diff-99267a2170b04fd7dd24d6c6bf2ba1fc26d6dc896cd74f8c5bd56c476e2540e4L2458-L2464&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/ae0842372ff6dd1437d026f82968a3749f555ff4#diff-99267a2170b04fd7dd24d6c6bf2ba1fc26d6dc896cd74f8c5bd56c476e2540e4L2458-L2464&lt;/a&gt;&#160; as part of adding TCM. Since it&apos;s all removed there, I applied the same fix as 4.0 and 4.1 instead of removing the code entirely on the patch to 5.0.&lt;/p&gt;</comment>
                            <comment id="17798271" author="smiklosovic" created="Mon, 18 Dec 2023 16:20:02 +0000"  >&lt;p&gt;I am not sure what to do about this in 5.0. It feels &quot;wrong&quot; to have a method there like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Returns {@code &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;} only &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the information about the version of each node in the cluster is available and
 * ALL the nodes are on 4.0+ (regardless of the patch version).
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasMajorVersion3OrUnknownNodes()
{
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; isUpgradingFromVersionLowerThan(CassandraVersion.CASSANDRA_4_0) || &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is quite obvious
&lt;/span&gt;           &lt;span class=&quot;code-comment&quot;&gt;// however &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we discovered only nodes at current version so far (in particular only &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; node),
&lt;/span&gt;           &lt;span class=&quot;code-comment&quot;&gt;// but still there are nodes with unknown version, we also want to report that the cluster may have nodes at 3.x
&lt;/span&gt;           hasNodeWithUnknownVersion;
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is not it impossible to have 3.x nodes from 5.0 perspective in one cluster? This is not supported, right?&#160;&lt;/p&gt;

&lt;p&gt;So I can see an argument for completely removing this in 5.0, but on the other hand, there is also this &quot;or unknown nodes&quot; and that is still valid question to ask. Hence, would not it be more appropriate to remove &quot;isUpgradingFromVersionLowerThan&quot; and base this method just on &quot;hasNodeWithUnknownVersion&quot; ?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; &#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;&#160; what do you think?&lt;/p&gt;

&lt;p&gt;On the other hand, for simplicity, we could just leave it as it is proposed in 5.0 PR ...&#160;&lt;/p&gt;</comment>
                            <comment id="17798274" author="paulo" created="Mon, 18 Dec 2023 16:26:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;So I can see an argument for completely removing this in 5.0, but on the other hand, there is also this &quot;or unknown nodes&quot; and that is still valid question to ask. Hence, would not it be more appropriate to remove &quot;isUpgradingFromVersionLowerThan&quot; and base this method just on &quot;hasNodeWithUnknownVersion&quot; ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Upgrade from 3.x to 5.x is not supported, so this method should be removed. The unknown version check is a pessimistic guard against a 3.x node possibly not having its version propagated via gossip. Since upgrade from 3.x is no longer supported on 5.x, the unknown version check should no longer exist.&lt;/p&gt;</comment>
                            <comment id="17798276" author="paulo" created="Mon, 18 Dec 2023 16:31:29 +0000"  >&lt;p&gt;Fwiw I&apos;m +1 on the patch, but let&apos;s wait a bit to see if Mick/Brandon have any input. If you&apos;re good can you trigger ci &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt; ? I need to setup my circleci stuff to be able to submit, will setup this soon.&lt;/p&gt;</comment>
                            <comment id="17798280" author="smiklosovic" created="Mon, 18 Dec 2023 16:44:22 +0000"  >&lt;p&gt;So, if this is removed in 5.0, that also means that the places where that method is called are not relevant anymore - as you showed its usage in your first comment to this ticket. That means that we would need a little bit more refactoring in 5.0 around that.&lt;/p&gt;

&lt;p&gt;But ... why is that pessimistic check for unknown version done against 3.x only? Could not it still happen with 4.x? What has happened in 4.x that unknown version check is not applicable anymore?&#160;&lt;/p&gt;</comment>
                            <comment id="17798282" author="smiklosovic" created="Mon, 18 Dec 2023 16:50:41 +0000"  >&lt;p&gt;check this, that comment in particular (1). It seems to me that unknown version can happen in 4.0+ as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/blob/CASSANDRA-18999-5.0/src/java/org/apache/cassandra/gms/Gossiper.java#L244-L246&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/instaclustr/cassandra/blob/CASSANDRA-18999-5.0/src/java/org/apache/cassandra/gms/Gossiper.java#L244-L246&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17798294" author="paulo" created="Mon, 18 Dec 2023 17:29:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;So, if this is removed in 5.0, that also means that the places where that method is called are not relevant anymore - as you showed its usage in your first comment to this ticket. That means that we would need a little bit more refactoring in 5.0 around that.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=isaacreath&quot; class=&quot;user-hover&quot; rel=&quot;isaacreath&quot;&gt;isaacreath&lt;/a&gt; I think we need to update the 5.0 patch to remove &lt;tt&gt;Gossiper::hasMajorVersion3Nodes&lt;/tt&gt; and any references to it.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;check this, that comment in particular (1). It seems to me that unknown version can happen in 4.0+ as well.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We shouldn&apos;t remove this variable from &lt;tt&gt;upgradeFromVersionSupplier&lt;/tt&gt; since it will still be needed there. We just don&apos;t need the method &lt;tt&gt;hasMajorVersion3OrUnknownNodes&lt;/tt&gt; nor &lt;tt&gt;hasNodeWithUnknownVersion&lt;/tt&gt;, since these will no longer be required anywhere in 5.x.&lt;/p&gt;

&lt;p&gt;For the 5.x patch after removing &lt;tt&gt;Gossiper::hasMajorVersion3Nodes&lt;/tt&gt; we can keep the &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-5.0/src/java/org/apache/cassandra/gms/Gossiper.java#L219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;upgradeFromVersionSupplier&lt;/a&gt; in the original configuration, where &lt;tt&gt;allHostsHaveKnownVersion&lt;/tt&gt; is a local variable within that method used &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-5.0/src/java/org/apache/cassandra/gms/Gossiper.java#L253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&#160;&lt;/p&gt;

&lt;p&gt;In summary:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;4.0/4.1 patches: LGTM&lt;/li&gt;
	&lt;li&gt;5.0 patch: only remove Gossiper::hasMajorVersion3Nodes and any references to it.&lt;/li&gt;
	&lt;li&gt;Trunk (no change)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;WDYT?&lt;/p&gt;</comment>
                            <comment id="17798296" author="smiklosovic" created="Mon, 18 Dec 2023 17:39:42 +0000"  >&lt;p&gt;I think we should keep some version of hasMajorVersion3Nodes still around, something like this:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasUnknownNodes()
{
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; hasNodeWithUnknownVersion;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I just dont understand that when the original version was dealing with unknown versions and it could evaluate that method as returning true, then us removing the unknown check will change behavior in 5.0 as well. &lt;/p&gt;</comment>
                            <comment id="17798298" author="paulo" created="Mon, 18 Dec 2023 17:50:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we should keep some version of hasMajorVersion3Nodes still around, something like this:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Where will this method be ever used if we&apos;re removing &lt;tt&gt;Gossiper::hasMajorVersion3Nodes&lt;/tt&gt; and all references to it? There is no place in the code that requires checking if there are unknown version nodes in gossip, except inside &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-5.0/src/java/org/apache/cassandra/gms/Gossiper.java#L219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;upgradeFromVersionSupplier&lt;/a&gt;, where the check will be kept.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I just dont understand that when the original version was dealing with unknown versions and it could evaluate that method as returning true, then us removing the unknown check will change behavior in 5.0 as well.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As far as I understand the objective of hasMajorVersion3Nodes methods is to &lt;b&gt;not&lt;/b&gt; do things when a cluster node is identified to be in version 3.x. It was not possible to know if a node with unknown version was on 3.x or not, so hasMajorVersion3Nodes returned true if a node version was not known (since it could potentially be a 3.x nodes).&lt;/p&gt;

&lt;p&gt;On 5.x we no longer need to identify if a node is on version 3.x since direct upgrade from 3.x is not supported, so there is no reason to keep hasMajorVersion3Nodes or hasUnknownNodes around.&lt;/p&gt;</comment>
                            <comment id="17798301" author="smiklosovic" created="Mon, 18 Dec 2023 18:01:45 +0000"  >&lt;p&gt;Got it, yeah I think you nailed it. I needed to have it explicitly stated like this.&lt;/p&gt;

&lt;p&gt;In summary:&lt;/p&gt;

&lt;p&gt;4.0/4.1 patches: LGTM&lt;br/&gt;
5.0 patch: only remove Gossiper::hasMajorVersion3Nodes and any references to it.&lt;br/&gt;
Trunk (no change)&lt;/p&gt;

&lt;p&gt;This seems like good approach.&lt;/p&gt;</comment>
                            <comment id="17798482" author="smiklosovic" created="Tue, 19 Dec 2023 08:22:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3658/workflows/a7c5ab7a-67f4-4496-ba2a-44086743aa83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11 4.0&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3658/workflows/29339649-fa96-43e9-908c-10101413d1b4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8 4.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3659/workflows/0628f9f4-0546-4100-b2fc-3b1aed0a5380&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11 4.1&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3659/workflows/65b06220-fdf4-46ee-bcb3-7a1799746c1a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8 4.1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Builds look good on these branches. We just need to cover 5.0.&lt;/p&gt;</comment>
                            <comment id="17798643" author="isaacreath" created="Tue, 19 Dec 2023 15:57:52 +0000"  >&lt;p&gt;I closed the old 5.0 PR and created &lt;a href=&quot;https://github.com/apache/cassandra/pull/3004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/3004&lt;/a&gt; which removes Gossiper::hasMajorVersion3Nodes and references. If there is any objection to doing this clean up we can always re-open the old 5.0 PR which fixes the bug.&#160;&lt;/p&gt;</comment>
                            <comment id="17798652" author="smiklosovic" created="Tue, 19 Dec 2023 16:22:18 +0000"  >&lt;p&gt;Let&apos;s see what circle has to say &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3670/workflows/7efc6f14-5f53-474b-b469-e52f682abc7f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3670/workflows/7efc6f14-5f53-474b-b469-e52f682abc7f&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;EDIT: seems good!&lt;/p&gt;

&lt;p&gt;I want to run upgrade tests as well.&lt;/p&gt;</comment>
                            <comment id="17799340" author="smiklosovic" created="Thu, 21 Dec 2023 09:47:09 +0000"  >&lt;p&gt;upgrade dtests look good too &lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/1238/workflows/0f5916b2-1e7d-4bd2-b96b-07288fdfa770/jobs/62154&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/1238/workflows/0f5916b2-1e7d-4bd2-b96b-07288fdfa770/jobs/62154&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulo&quot; class=&quot;user-hover&quot; rel=&quot;paulo&quot;&gt;paulo&lt;/a&gt; so, what is the next step here? &lt;/p&gt;</comment>
                            <comment id="17799571" author="smiklosovic" created="Thu, 21 Dec 2023 20:43:23 +0000"  >&lt;p&gt;We should double check there are not any leftovers in trunk. Otherwise I am OK to merge this. I think that we need upgrade dtests for 4.0 and 4.1 as well. &lt;/p&gt;</comment>
                            <comment id="17801031" author="paulo" created="Thu, 28 Dec 2023 17:16:22 +0000"  >&lt;p&gt;I created&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19243&quot; title=&quot;Remove pre-4.0 compatibility code for 5.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19243&quot;&gt;CASSANDRA-19243&lt;/a&gt; to have a wider review on removal of pre-4.0 compatibility code.&lt;/p&gt;

&lt;p&gt;For this ticket, let&apos;s just merge the original 4.0/4.1/5.0 PRs fixing &lt;tt&gt;Gossiper::hasMajorVersion3Nodes&lt;/tt&gt; without removing pre-4.0 compatibility code from 5.0:&lt;/p&gt;

&lt;p&gt;I have prepared the patches for commit:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/pauloricardomg/cassandra/tree/cassandra-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cassandra-4.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/pauloricardomg/cassandra/tree/cassandra-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cassandra-4.1&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/pauloricardomg/cassandra/tree/cassandra-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cassandra-5.0&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ve submitted a &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/2649/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;devbranch job&lt;/a&gt; for the cassandra-5.0 branch but it seems ci-cassandra.a.o is unavailable.&lt;/p&gt;

&lt;p&gt;I don&apos;t have circle environment setup, so I will wait until jenkins is back or someone submits a circle job for cassandra-5.0 before committing this.&lt;/p&gt;</comment>
                            <comment id="17801762" author="smiklosovic" created="Tue, 2 Jan 2024 12:08:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulo&quot; class=&quot;user-hover&quot; rel=&quot;paulo&quot;&gt;paulo&lt;/a&gt; I have tested 5.0 already, links are in my last comments above. Have you done some changes to it? I think 5.0 is fully covered, the only thing we need is upgrade dtests for 4.0 and 4.1.&lt;/p&gt;</comment>
                            <comment id="17801825" author="paulo" created="Tue, 2 Jan 2024 15:42:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;I have tested 5.0 already, links are in my last comments above. Have you done some changes to it? I think 5.0 is fully covered, the only thing we need is upgrade dtests for 4.0 and 4.1.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The 5.0 version you submitted was based on the &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...instaclustr:cassandra:CASSANDRA-18999-5.0-hasMajVer3removal&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-18999-5.0-hasMajVer3removal&lt;/a&gt; branch which removes &lt;tt&gt;hasMajorVersion3Nodes&lt;/tt&gt; from 5.0.&lt;/p&gt;

&lt;p&gt;We need to submit CI for &lt;a href=&quot;https://github.com/pauloricardomg/cassandra/tree/cassandra-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this branch&lt;/a&gt; where &lt;tt&gt;hasMajorVersion3Nodes&lt;/tt&gt; is fixed but not removed (the removal will be done on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19243&quot; title=&quot;Remove pre-4.0 compatibility code for 5.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19243&quot;&gt;CASSANDRA-19243&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;We also need to submit upgrade tests for 4.0/4.1/5.0. Can you do this in circle? If not I guess we&apos;ll have to wait until asf ci is bac.&lt;/p&gt;</comment>
                            <comment id="17801833" author="smiklosovic" created="Tue, 2 Jan 2024 16:00:02 +0000"  >&lt;p&gt;I dont have such Circle plan. You need to ask somebody from Apple or DS.&lt;/p&gt;</comment>
                            <comment id="17803651" author="paulo" created="Fri, 5 Jan 2024 18:06:58 +0000"  >&lt;p&gt;Please find updated patches prepared for commit:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/pauloricardomg/cassandra/tree/4.0-18999&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0-18999&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/pauloricardomg/cassandra/tree/4.1-18999&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1-18999&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/pauloricardomg/cassandra/tree/5.0-18999&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0-18999&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17803656" author="brandon.williams" created="Fri, 5 Jan 2024 18:18:12 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18999-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1445/workflows/d346af10-7b34-41a0-b2b7-c1c3290a6696&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;upgrade tests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18999-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1444/workflows/ddfe8a3c-4b36-4b9e-8f01-c85249fd8488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;upgrade tests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18999-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1446/workflows/f198627c-310d-4c2d-ad2c-c18ac8a13ee7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1446/workflows/e0726e79-e517-4a82-828c-c7931fc9d99b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17803676" author="paulo" created="Fri, 5 Jan 2024 18:57:29 +0000"  >&lt;p&gt;Thanks Brandon! Looks like &lt;tt&gt;test_read_from_bootstrapped_node&lt;/tt&gt; already failed in &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1446/workflows/e0726e79-e517-4a82-828c-c7931fc9d99b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0-j17&lt;/a&gt; but this is being tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19097&quot; title=&quot;Test Failure: bootstrap_test.TestBootstrap.*&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19097&quot;&gt;&lt;del&gt;CASSANDRA-19097&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I will check back when CI finishes and commit if it looks good.&lt;/p&gt;</comment>
                            <comment id="17804104" author="paulo" created="Mon, 8 Jan 2024 04:15:08 +0000"  >&lt;p&gt;5.0 precommit tests are looking good.&lt;/p&gt;

&lt;p&gt;I can&apos;t make a lot of sense from the &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1444/workflows/ddfe8a3c-4b36-4b9e-8f01-c85249fd8488/jobs/70142/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;upgrade dtests failures&lt;/a&gt; but they don&apos;t seem related to this ticket.&lt;/p&gt;

&lt;p&gt;It looks like in both runs tests from &lt;tt&gt;upgrade_through_versions_test&lt;/tt&gt; failed with:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;class &apos;ccmlib.node.NodeError&apos;&amp;gt;
        Problem starting node node1 due to [Errno 2] No such file or directory: &apos;/tmp/dtest-jbrcckw7/test/node1/cassandra.pid&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This looks like an environmental issue to me as I didn&apos;t find any open ticket for this particular issue. While the &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1444/workflows/ddfe8a3c-4b36-4b9e-8f01-c85249fd8488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt; job completed the &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1445/workflows/d346af10-7b34-41a0-b2b7-c1c3290a6696&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt; seems to have gotten stuck.&lt;/p&gt;

&lt;p&gt;I&apos;m inclined to commit this to avoid dragging this ticket longer and re-run the upgrade dtest before the next 4.X release to catch any outstanding upgrade issues. WDYT?&lt;/p&gt;</comment>
                            <comment id="17804166" author="smiklosovic" created="Mon, 8 Jan 2024 08:33:38 +0000"  >&lt;p&gt;I am not sure what&apos;s the problem either. The same set of tests seem to fail on 4.0 and 4.1 so I do not think this is environmental. Maybe a rerun would confirm or reject this?&lt;/p&gt;</comment>
                            <comment id="17804251" author="brandon.williams" created="Mon, 8 Jan 2024 12:24:56 +0000"  >&lt;p&gt;I started &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1445/workflows/80335a29-b138-49d3-897a-363c5d558ab5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt; and &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1444/workflows/3a517f8a-872b-4119-9dea-fef2fffd78db&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt; upgrade tests again.&lt;/p&gt;</comment>
                            <comment id="17804252" author="smiklosovic" created="Mon, 8 Jan 2024 12:29:27 +0000"  >&lt;p&gt;It would be also worth to run these tests &lt;em&gt;without&lt;/em&gt; this patch. If it fails there too, we know we are not the ones to blame.&lt;/p&gt;</comment>
                            <comment id="17804262" author="brandon.williams" created="Mon, 8 Jan 2024 13:00:01 +0000"  >&lt;p&gt;Here&apos;s a baseline for &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1454/workflows/0357136e-cee3-42e4-900b-3347fc8d42d3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt; and &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1453/workflows/dd1732df-271c-43bc-bc5f-8577c605c746&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17804463" author="smiklosovic" created="Mon, 8 Jan 2024 21:11:19 +0000"  >&lt;p&gt;Yeah, baseline fails too. I think this was broken already.&lt;/p&gt;</comment>
                            <comment id="17805216" author="paulo" created="Wed, 10 Jan 2024 16:27:47 +0000"  >&lt;p&gt;Thanks Brandon and Stefan.&lt;/p&gt;

&lt;p&gt;I&apos;m confident these failures are unrelated so I optimistically committed this to 4.0+ on &lt;a href=&quot;https://github.com/apache/cassandra/commit/475c0035e6e04526eaf50805d33156ac9b828ab6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;475c0035e6e04526eaf50805d33156ac9b828ab6&lt;/a&gt; to avoid dragging this for any longer given current CI restrictions.&lt;/p&gt;

&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19259&quot; title=&quot;upgrade_tests.upgrade_through_versions_test consistently failing on circleci&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19259&quot;&gt;CASSANDRA-19259&lt;/a&gt; to address these failures separately. We should attempt a green upgrade CI run before next 4.0/4.1 releases.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13563118">CASSANDRA-19243</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                                                <inwardlinks description="Discovered while testing">
                                        <issuelink>
            <issuekey id="13555857">CASSANDRA-18968</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[isaacreath]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12987" cascade-level="1"><![CDATA[Transient Incorrect Response]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12975"><![CDATA[Code Inspection]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1leco:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[paulo]]></customfieldvalue>
        <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12336842">4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/475c0035e6e04526eaf50805d33156ac9b828ab6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/475c0035e6e04526eaf50805d33156ac9b828ab6&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;4.x: Added new test cases to GossiperTest.java which validate that the Gossiper works correctly given the behavior described in the ticket.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;5.0: Removed Gossiper::hasMajorVersion3Nodes and all references to the function.&#160;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>