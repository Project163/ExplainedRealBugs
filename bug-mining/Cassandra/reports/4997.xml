<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:11:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14338] Fix scheduling of speculative retry threshold recalculation</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14338</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Realized after committing &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14293&quot; title=&quot;Speculative Retry Policy Should Support Specifying MIN/MAX of 2 PERCENTILE and FIXED Policies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14293&quot;&gt;&lt;del&gt;CASSANDRA-14293&lt;/del&gt;&lt;/a&gt; that it&apos;s slightly broken: when updating from a static to a dynamic speculative retry policy, the refresher will never be scheduled.&lt;/p&gt;

&lt;p&gt;Also realised that the whole thing is a bit dumb. We don&apos;t need a latency calculator runnable per &lt;tt&gt;ColumnFamilyStore&lt;/tt&gt;, we should have one per node, that does in batch refresh thresholds for every table. It&apos;s one fewer thing to manage, and allows to get rid of &lt;tt&gt;isDynamic()&lt;/tt&gt; method in &lt;tt&gt;SpeculativeRetryPolicy&lt;/tt&gt;, which I thought was clever at the time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13147465">CASSANDRA-14338</key>
            <summary>Fix scheduling of speculative retry threshold recalculation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="aleksey">Aleksey Yeschenko</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Mar 2018 13:07:33 +0000</created>
                <updated>Fri, 15 May 2020 08:01:21 +0000</updated>
                            <resolved>Fri, 23 Mar 2018 13:59:04 +0000</resolved>
                                        <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16411339" author="iamaleksey" created="Fri, 23 Mar 2018 13:09:57 +0000"  >&lt;p&gt;4.0 branch: &lt;a href=&quot;https://github.com/iamaleksey/cassandra/tree/14338-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/iamaleksey/cassandra/tree/14338-4.0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16411397" author="beobal" created="Fri, 23 Mar 2018 13:43:00 +0000"  >&lt;p&gt;+1 LGTM.&lt;/p&gt;

&lt;p&gt;I would just wrap the calculation in &lt;tt&gt;CFS::updateSpeculationThreshold&lt;/tt&gt;&#160;in a try/catch so that an exception there doesn&apos;t cause future executions of the task to be suppressed.&lt;/p&gt;</comment>
                            <comment id="16411405" author="iamaleksey" created="Fri, 23 Mar 2018 13:46:50 +0000"  >&lt;p&gt;Good call. I&apos;d say in 3.0 this also should be fixed, so that a single exception there doesn&apos;t stop recalculating percentiles for the affected table.&lt;/p&gt;

&lt;p&gt;Thanks for the review. Will commit once Circle is happy.&lt;/p&gt;</comment>
                            <comment id="16411423" author="iamaleksey" created="Fri, 23 Mar 2018 13:58:59 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/8b7e96761f968b346aed08c0c201a8d40d801b19&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;8b7e96761f968b346aed08c0c201a8d40d801b19&lt;/a&gt;, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rpav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>samt</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>