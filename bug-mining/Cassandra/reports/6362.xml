<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:28:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-19034] SelectTest fails when run with SAI index</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-19034</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When run with SAI index, the following two tests error out:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[junit-timeout] Testcase: testContainsKeyAndContainsWithIndexOnMapValue(org.apache.cassandra.cql3.validation.operations.SelectTest)-_jdk11:	FAILED
[junit-timeout] Got less rows than expected. Expected 1 but got 0
[junit-timeout] junit.framework.AssertionFailedError: Got less rows than expected. Expected 1 but got 0
[junit-timeout] 	at org.apache.cassandra.cql3.CQLTester.assertRows(CQLTester.java:1849)
[junit-timeout] 	at org.apache.cassandra.cql3.validation.operations.SelectTest.lambda$testContainsKeyAndContainsWithIndexOnMapValue$9(SelectTest.java:625)
[junit-timeout] 	at org.apache.cassandra.cql3.CQLTester.beforeAndAfterFlush(CQLTester.java:2238)
[junit-timeout] 	at org.apache.cassandra.cql3.validation.operations.SelectTest.testContainsKeyAndContainsWithIndexOnMapValue(SelectTest.java:618)
[junit-timeout] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[junit-timeout] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
[junit-timeout] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[junit-timeout] 
[junit-timeout] 
[junit-timeout] Testcase: testFilterWithIndexForContains(org.apache.cassandra.cql3.validation.operations.SelectTest)-_jdk11:	FAILED
[junit-timeout] Invalid value &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; row 1 column 0 (k1 of type &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;), expected &amp;lt;1&amp;gt; but got &amp;lt;0&amp;gt;
[junit-timeout] Invalid value &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; row 1 column 2 (v of type set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;), expected &amp;lt;{4, 5, 6}&amp;gt; but got &amp;lt;{2, 3, 4}&amp;gt;
[junit-timeout] 
[junit-timeout] junit.framework.AssertionFailedError: Invalid value &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; row 1 column 0 (k1 of type &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;), expected &amp;lt;1&amp;gt; but got &amp;lt;0&amp;gt;
[junit-timeout] Invalid value &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; row 1 column 2 (v of type set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;), expected &amp;lt;{4, 5, 6}&amp;gt; but got &amp;lt;{2, 3, 4}&amp;gt;
[junit-timeout] 
[junit-timeout] 	at org.apache.cassandra.cql3.CQLTester.assertRows(CQLTester.java:1826)
[junit-timeout] 	at org.apache.cassandra.cql3.validation.operations.SelectTest.lambda$testFilterWithIndexForContains$6(SelectTest.java:543)
[junit-timeout] 	at org.apache.cassandra.cql3.CQLTester.beforeAndAfterFlush(CQLTester.java:2240)
[junit-timeout] 	at org.apache.cassandra.cql3.validation.operations.SelectTest.testFilterWithIndexForContains(SelectTest.java:542)
[junit-timeout] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[junit-timeout] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
[junit-timeout] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The latter seems to be giving the results in the wrong order, and the order flips when the data is flushed.&lt;/p&gt;

&lt;p&gt;Caught during preparation of _latest config that would switch default to SAI (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18753&quot; title=&quot;Add an optimized default configuration to tests and make it available for new users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18753&quot;&gt;&lt;del&gt;CASSANDRA-18753&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13558428">CASSANDRA-19034</key>
            <summary>SelectTest fails when run with SAI index</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mike_tr_adamson">Mike Adamson</assignee>
                                    <reporter username="blambov">Branimir Lambov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Nov 2023 15:06:30 +0000</created>
                <updated>Mon, 27 Nov 2023 19:32:40 +0000</updated>
                            <resolved>Sun, 26 Nov 2023 11:39:02 +0000</resolved>
                                        <fixVersion>5.0-beta1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                    <fixVersion>5.1</fixVersion>
                                    <component>Feature/SAI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17787279" author="blambov" created="Fri, 17 Nov 2023 15:49:16 +0000"  >&lt;p&gt;A further failure of this kind:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[junit-timeout] Testcase: testStaticIndexAndNonStaticIndex(org.apache.cassandra.cql3.validation.entities.SecondaryIndexOnStaticColumnTest)-_jdk11:	FAILED
[junit-timeout] Got less rows than expected. Expected 1 but got 0
[junit-timeout] junit.framework.AssertionFailedError: Got less rows than expected. Expected 1 but got 0
[junit-timeout] 	at org.apache.cassandra.cql3.CQLTester.assertRows(CQLTester.java:1849)
[junit-timeout] 	at org.apache.cassandra.cql3.validation.entities.SecondaryIndexOnStaticColumnTest.testStaticIndexAndNonStaticIndex(SecondaryIndexOnStaticColumnTest.java:191)
[junit-timeout] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[junit-timeout] 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
[junit-timeout] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[junit-timeout] 
[junit-timeout] 
[junit-timeout] Test org.apache.cassandra.cql3.validation.entities.SecondaryIndexOnStaticColumnTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17787303" author="maedhroz" created="Fri, 17 Nov 2023 16:44:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blambov&quot; class=&quot;user-hover&quot; rel=&quot;blambov&quot;&gt;blambov&lt;/a&gt; Does this mean we&apos;ve run the entire test suite w/ SAI as the default, and these are the only failures that have popped up so far?&lt;/p&gt;

&lt;p&gt;I guess for tests like this, where we&apos;re incidentally using/testing a 2i implementation, we should consider either using SAI alone, or parameterizing to use both SAI and the legacy 2i?&lt;/p&gt;</comment>
                            <comment id="17787323" author="blambov" created="Fri, 17 Nov 2023 17:03:13 +0000"  >&lt;p&gt;Yes, we have run the entire unit test suite (no dtests yet) with SAI as default, and these three are the only failures that aren&apos;t usecases that SAI can&apos;t support (ByteOrderedPartitioner and blobs).&lt;/p&gt;

&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18753&quot; title=&quot;Add an optimized default configuration to tests and make it available for new users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18753&quot;&gt;&lt;del&gt;CASSANDRA-18753&lt;/del&gt;&lt;/a&gt;, we will have a test configuration run as part as the precommit tests that runs with SAI (plus tries, UCS, paxos v2...).&lt;/p&gt;</comment>
                            <comment id="17787324" author="maedhroz" created="Fri, 17 Nov 2023 17:07:13 +0000"  >&lt;p&gt;This feels similar to&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19011&quot; title=&quot;Primary key -&amp;gt; row ID lookups are broken for skipping and intersections during SAI queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19011&quot;&gt;&lt;del&gt;CASSANDRA-19011&lt;/del&gt;&lt;/a&gt;, in the sense that we&apos;re having result ordering problems. Have to dig in though...&lt;/p&gt;</comment>
                            <comment id="17788030" author="adelapena" created="Mon, 20 Nov 2023 14:05:07 +0000"  >&lt;p&gt;The issue with &lt;tt&gt;testContainsKeyAndContainsWithIndexOnMapValue&lt;/tt&gt; can be reproduced with this simple test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
createTable(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TABLE %s (k &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; PRIMARY KEY, v &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, m map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;)&quot;&lt;/span&gt;);
createIndex(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE INDEX ON %s(v) USING &lt;span class=&quot;code-quote&quot;&gt;&apos;SAI&apos;&lt;/span&gt;&quot;&lt;/span&gt;);
execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO %s (k, v, m) VALUES (?, ?, ?)&quot;&lt;/span&gt;, 0, 1, map(2, 3));
assertRows(execute(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT k, v, m FROM %s WHERE v = 1 AND m CONTAINS KEY 2 ALLOW FILTERING&quot;&lt;/span&gt;),
        row(0, 1, map(2, 3)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think the problem is that the index context created by the query planner for an unindexed column always has a &lt;tt&gt;VALUES&lt;/tt&gt; index target type, &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/index/sai/plan/QueryController.java#L149&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. This is problematic when there is a &lt;tt&gt;CONTAINS KEY&lt;/tt&gt; expression that isn&apos;t backed by an index, since we&apos;ll be comparing the searched map key to scanned map values.&lt;/p&gt;

&lt;p&gt;This simple patch modifies that to consider the &lt;tt&gt;CONTAINS KEY&lt;/tt&gt; case:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Patch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-5.0...adelapena:19034-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0  &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/3321/workflows/1450ed03-61d9-4abc-93f0-ad0a335dd703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;The other two failures (&lt;tt&gt;testFilterWithIndexForContains&lt;/tt&gt; and &lt;tt&gt;testStaticIndexAndNonStaticIndex&lt;/tt&gt;) seem to have different causes. Should we open separate tickets for each one?&lt;/p&gt;</comment>
                            <comment id="17788059" author="adelapena" created="Mon, 20 Nov 2023 15:17:20 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19040&quot; title=&quot;Consider CONTAINS KEY in SAI unindexed index contexts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19040&quot;&gt;&lt;del&gt;CASSANDRA-19040&lt;/del&gt;&lt;/a&gt; for the particular bug discovered by &lt;tt&gt;testContainsKeyAndContainsWithIndexOnMapValue&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17788387" author="mike_tr_adamson" created="Tue, 21 Nov 2023 12:03:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt; Please note that this error has been fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18166&quot; title=&quot;Improve the code model around IndexContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18166&quot;&gt;&lt;del&gt;CASSANDRA-18166&lt;/del&gt;&lt;/a&gt; which is in review already.&lt;/p&gt;</comment>
                            <comment id="17788396" author="mike_tr_adamson" created="Tue, 21 Nov 2023 12:18:39 +0000"  >&lt;p&gt;I&apos;d like to clarify what I think are the issues here:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;SelectTest.testFilterWithIndexForContains is failing because of an optimisation make to the SAI query filtering. I have a fix for this currently going onto the patch for this ticket.&lt;/li&gt;
	&lt;li&gt;SelectTest.testContainsKeyAndContainsWithIndexOnMapValue is fixed on the &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18166&quot; title=&quot;Improve the code model around IndexContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18166&quot;&gt;&lt;del&gt;CASSANDRA-18166&lt;/del&gt;&lt;/a&gt; patch.&lt;/li&gt;
	&lt;li&gt;SecondaryIndexOnStaticColumnTest.testStaticIndexAndNonStaticIndex appears to be a separate issue because it is not fixed by the fix for 1 but it does seem related so I will investigate it on this ticket. If it is completely unrelated then I&apos;ll create a new ticket for it. The only reason I think it may be related is because it is related to static columns and that is part of the 1 issue.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17788753" author="adelapena" created="Wed, 22 Nov 2023 12:35:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mike_tr_adamson&quot; class=&quot;user-hover&quot; rel=&quot;mike_tr_adamson&quot;&gt;mike_tr_adamson&lt;/a&gt; the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19040&quot; title=&quot;Consider CONTAINS KEY in SAI unindexed index contexts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19040&quot;&gt;&lt;del&gt;CASSANDRA-19040&lt;/del&gt;&lt;/a&gt; is mostly ready. Even if the big refactor in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18166&quot; title=&quot;Improve the code model around IndexContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18166&quot;&gt;&lt;del&gt;CASSANDRA-18166&lt;/del&gt;&lt;/a&gt; solves the issue in&#160;&lt;tt&gt;testContainsKeyAndContainsWithIndexOnMapValue&lt;/tt&gt;, I&apos;d like to commit it anyway because it adds testing around combinations of &lt;tt&gt;CONTAINS&lt;/tt&gt;/&lt;tt&gt;CONTAINS KEY&lt;/tt&gt; and filtering. The bug fixing part is a single-line change that surely won&apos;t get in the way of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18166&quot; title=&quot;Improve the code model around IndexContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18166&quot;&gt;&lt;del&gt;CASSANDRA-18166&lt;/del&gt;&lt;/a&gt;. wdyt?&lt;/p&gt;</comment>
                            <comment id="17788851" author="mike_tr_adamson" created="Wed, 22 Nov 2023 17:56:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt; I&apos;m happy with that. The more testing we can get round this the better.&lt;/p&gt;</comment>
                            <comment id="17789522" author="mike_tr_adamson" created="Fri, 24 Nov 2023 17:02:10 +0000"  >&lt;p&gt;Here are patches for 5.0 and trunk:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/mike-tr-adamson/cassandra/401/workflows/6ab79f11-948d-4f95-b80e-6db662bb30fc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2930&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/mike-tr-adamson/cassandra/402/workflows/92aacb84-fd3a-48e0-9fb2-d1e2fe6fc71a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;This fixes two specific issues in the code:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Composite partition indexes were not working as expected because of an optimisation we&apos;d made during the CEP. We moved the check for the static row in StorageAttachedIndexSearcher.applyIndexFilter to the top of the method before the full partition check. This was wrong for composite partition indexes.&lt;/li&gt;
	&lt;li&gt;Static primary keys were not being compared correctly against non-static primary keys in the same partition. They should be equal but were being compared as less than. This resulted in intersections between static and non-static indexes never returning any rows.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17789536" author="michaelsembwever" created="Fri, 24 Nov 2023 18:22:44 +0000"  >&lt;p&gt;On trunk, the failures are:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;j11_dtests
=================
pushed_notifications_test.TestPushedNotifications.test_move_single_node
materialized_views_test.TestMaterializedViewsConsistency.test_multi_partition_consistent_reads_after_write

j11_dtests_vnode 
=================
bootstrap_test.TestBootstrap.test_cleanup

j17_jvm_dtests
=================
org.apache.cassandra.distributed.test.log.RegisterTest.serializationVersionDisagreementTest-_jdk17

j11_jvm_dtests_vnode
=================
org.apache.cassandra.distributed.test.ClearSnapshotTest.clearSnapshotSlowTest-_jdk11
org.apache.cassandra.distributed.test.log.InProgressSequenceCoordinationTest.rejectSubsequentInProgressSequence-cassandra.testtag_IS_UNDEFINED
org.apache.cassandra.distributed.test.ring.DecommissionTest.testMixedVersionBlockDecom-_jdk11
org.apache.cassandra.distributed.test.log.FetchLogFromPeersTest.catchupCoordinatorAheadPlacementsReadTest-_jdk11
org.apache.cassandra.distributed.test.log.FetchLogFromPeersTest.testSchema-_jdk11

j17_jvm_dtests_vnode
=================
org.apache.cassandra.distributed.test.ClearSnapshotTest.clearSnapshotSlowTest-_jdk17
org.apache.cassandra.distributed.test.log.InProgressSequenceCoordinationTest.rejectSubsequentInProgressSequence-cassandra.testtag_IS_UNDEFINED
org.apache.cassandra.distributed.test.log.RegisterTest.serializationVersionDisagreementTest-_jdk17
org.apache.cassandra.distributed.test.ring.DecommissionTest.testDecomDirectoryMinMaxVersions-_jdk17
org.apache.cassandra.distributed.test.ring.DecommissionTest.testMixedVersionBlockDecom-_jdk17
org.apache.cassandra.distributed.test.log.FetchLogFromPeersTest.catchupCoordinatorAheadPlacementsReadTest-_jdk17
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All of them are identified in 19055, or by other tickets (e.g. Butler).&lt;/p&gt;</comment>
                            <comment id="17789540" author="michaelsembwever" created="Fri, 24 Nov 2023 19:01:51 +0000"  >&lt;p&gt;A number of test types and variants were not run on trunk.&lt;br/&gt;
Running them here: &lt;a href=&quot;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/257&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="17789546" author="adelapena" created="Fri, 24 Nov 2023 19:25:38 +0000"  >&lt;p&gt;The fixes look good to me.&lt;/p&gt;

&lt;p&gt;I think we are missing the j17 CI runs. As for the runs for j11, are &lt;a href=&quot;https://app.circleci.com/pipelines/github/mike-tr-adamson/cassandra/401/workflows/6ab79f11-948d-4f95-b80e-6db662bb30fc/jobs/35365/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;these failures on &lt;tt&gt;BootstrapTest&lt;/tt&gt;&lt;/a&gt; known?&lt;/p&gt;

&lt;p&gt;Regarding the rest of the tests, I think they have these associated tickets:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;test_move_single_node&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19088&quot; title=&quot;Test Failure: pushed_notifications_test.TestPushedNotifications.test_move_single_node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19088&quot;&gt;&lt;del&gt;CASSANDRA-19088&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;test_multi_partition_consistent_reads_after_write&lt;/tt&gt; is&#160;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19056&quot; title=&quot;Test failure: materialized_views_test.TestMaterializedViewsConsistency.test_multi_partition_consistent_reads_after_write&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19056&quot;&gt;&lt;del&gt;CASSANDRA-19056&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;test_cleanup&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18098&quot; title=&quot;Test failure bootstrap_test.py::test_cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18098&quot;&gt;CASSANDRA-18098&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;serializationVersionDisagreementTest&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19073&quot; title=&quot;Test failure: org.apache.cassandra.distributed.test.log.RegisterTest#serializationVersionDisagreementTest-_jdk17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19073&quot;&gt;&lt;del&gt;CASSANDRA-19073&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;clearSnapshotSlowTest&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19070&quot; title=&quot;Test failure: org.apache.cassandra.distributed.test.ClearSnapshotTest#clearSnapshotSlowTest-_jdk11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19070&quot;&gt;&lt;del&gt;CASSANDRA-19070&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;rejectSubsequentInProgressSequence&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19076&quot; title=&quot;Test failure: org.apache.cassandra.distributed.test.log.InProgressSequenceCoordinationTest:rejectSubsequentInProgressSequence&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19076&quot;&gt;&lt;del&gt;CASSANDRA-19076&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;testMixedVersionBlockDecom&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19078&quot; title=&quot;Test failure: org.apache.cassandra.distributed.test.ring.DecommissionTest.test*Version*&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19078&quot;&gt;&lt;del&gt;CASSANDRA-19078&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;catchupCoordinatorAheadPlacementsReadTest&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19072&quot; title=&quot;Test failure: org.apache.cassandra.distributed.test.log.FetchLogFromPeersTest.catchupCoordinatorAheadPlacementsReadTest-_jdk11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19072&quot;&gt;&lt;del&gt;CASSANDRA-19072&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;testSchema&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19087&quot; title=&quot;Test Failure: org.apache.cassandra.distributed.test.log.FetchLogFromPeersTest.testSchema-_jdk11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19087&quot;&gt;&lt;del&gt;CASSANDRA-19087&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17789551" author="michaelsembwever" created="Fri, 24 Nov 2023 19:59:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we are missing the j17 CI runs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;See my run in my last comment.&lt;/p&gt;</comment>
                            <comment id="17789555" author="adelapena" created="Fri, 24 Nov 2023 20:17:11 +0000"  >&lt;p&gt;Sure, thanks, I didn&apos;t refresh the page after a while writing that comment.&lt;/p&gt;

&lt;p&gt;Is the failure at &lt;tt&gt;org.apache.cassandra.distributed.test.ring.DecommissionTest#testDecomDirectoryMinMaxVersions&lt;/tt&gt; identifed by any ticket? It&apos;s the same class as the one reported by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19078&quot; title=&quot;Test failure: org.apache.cassandra.distributed.test.ring.DecommissionTest.test*Version*&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19078&quot;&gt;&lt;del&gt;CASSANDRA-19078&lt;/del&gt;&lt;/a&gt;, but a different method.&lt;/p&gt;</comment>
                            <comment id="17789567" author="michaelsembwever" created="Fri, 24 Nov 2023 20:37:20 +0000"  >&lt;p&gt;It is the same as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19078&quot; title=&quot;Test failure: org.apache.cassandra.distributed.test.ring.DecommissionTest.test*Version*&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19078&quot;&gt;&lt;del&gt;CASSANDRA-19078&lt;/del&gt;&lt;/a&gt;, let me update the ticket title.&lt;/p&gt;</comment>
                            <comment id="17789570" author="michaelsembwever" created="Fri, 24 Nov 2023 20:53:07 +0000"  >&lt;p&gt;Failures in the additional run (from me):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;***j11***

j11_dtests_large
=============
pending_range_test.TestPendingRangeMovements.test_pending_range

j11_utests_trie
=============
org.apache.cassandra.db.compaction.writers.CompactionAwareWriterTest.testSplittingSizeTieredCompactionWriter-trie_jdk11
org.apache.cassandra.tools.JMXCompatabilityTest.jdiff*-trie_jdk11
org.apache.cassandra.db.CorruptPrimaryIndexTest.bigPrimaryIndexDoesNotDetectDiskCorruption-cassandra.testtag_IS_UNDEFINED

j17_dtests_large
=============
pending_range_test.TestPendingRangeMovements.test_pending_range

j17_utests_cdc
=============
org.apache.cassandra.db.lifecycle.HelpersTest-cdc_jdk17
(Same as lifecycle)

j17_utests_trie
=============
Same 6 failures as j11_utests_trie

j11_jvm_upgrade_dtests
=============
org.apache.cassandra.distributed.upgrade.MixedModeTTLOverflowUpgradeTest.testTTLOverflowDuringUpgrade-_jdk11


***j17***

j17_cqlsh_dtests_py3
=============
cql_tracing_test.TestCqlTracing.test_tracing_simple

j17_dtests_large
=============
pending_range_test.TestPendingRangeMovements.test_pending_range

j17_jvm_dtests
=============
org.apache.cassandra.distributed.test.log.RegisterTest.serializationVersionDisagreementTest-_jdk17
org.apache.cassandra.distributed.test.topology.DecommissionAvoidWriteTimeoutsTest.test-_jdk17
org.apache.cassandra.distributed.test.log.FetchLogFromPeersTest.testSchema-_jdk17

j17_jvm_dtests_vnode
=============
org.apache.cassandra.distributed.test.ClearSnapshotTest.clearSnapshotSlowTest-_jdk17
org.apache.cassandra.distributed.test.log.InProgressSequenceCoordinationTest.rejectSubsequentInProgressSequence-cassandra.testtag_IS_UNDEFINED
org.apache.cassandra.distributed.test.log.RegisterTest.serializationVersionDisagreementTest-_jdk17
org.apache.cassandra.distributed.test.log.FetchLogFromPeersTest.catchupCoordinatorAheadPlacementsReadTest-_jdk17
org.apache.cassandra.distributed.test.log.FetchLogFromPeersTest.testSchema-_jdk17

j17_unit_tests
=============
org.apache.cassandra.net.ConnectionTest.testMessageDeliveryOnReconnect-_jdk17

j17_utests_trie
=============
Same 6 failures as j11_utests_trie, plus
org.apache.cassandra.db.compaction.writers.CompactionAwareWriterTest.testMajorLeveledCompactionWriter-trie_jdk17
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unidentified by 19055, or by other tickets (e.g. Butler):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;***j11***

j11_utests_trie
=============
org.apache.cassandra.db.compaction.writers.CompactionAwareWriterTest.testSplittingSizeTieredCompactionWriter-trie_jdk11

j17_utests_cdc
=============
org.apache.cassandra.db.lifecycle.HelpersTest-cdc_jdk17
(Same as CASSANDRA-19062)

j17_utests_trie
=============
Same CompactionAwareWriterTest.testSplittingSizeTieredCompactionWriter failures as j11_utests_trie

***j17***

j17_cqlsh_dtests_py3
=============
cql_tracing_test.TestCqlTracing.test_tracing_simple

j17_jvm_dtests
=============
org.apache.cassandra.distributed.test.topology.DecommissionAvoidWriteTimeoutsTest.test-_jdk17

j17_utests_trie
=============
Same CompactionAwareWriterTest.testSplittingSizeTieredCompactionWriter failures as j11_utests_trie, plus
org.apache.cassandra.db.compaction.writers.CompactionAwareWriterTest.testMajorLeveledCompactionWriter-trie_jdk17
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17789597" author="michaelsembwever" created="Fri, 24 Nov 2023 23:19:50 +0000"  >&lt;p&gt;All CI runs are summarised.&lt;br/&gt;
Andres has +1&apos;d.&lt;/p&gt;

&lt;p&gt;I plan to commit over the weekend. But will first rebase and run a new round of CI after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18166&quot; title=&quot;Improve the code model around IndexContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18166&quot;&gt;&lt;del&gt;CASSANDRA-18166&lt;/del&gt;&lt;/a&gt; is committed.&lt;/p&gt;</comment>
                            <comment id="17789622" author="michaelsembwever" created="Sat, 25 Nov 2023 07:47:40 +0000"  >&lt;p&gt;Unidentified tickets have been put under 19055.&lt;br/&gt;
(This comment was supposed to come before the comment above^)&lt;/p&gt;

&lt;p&gt;CompactionAwareWriterTest.test*CompactionWriter-trie --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19091&quot; title=&quot;Test Failure: org.apache.cassandra.db.compaction.writers.CompactionAwareWriterTest.test*CompactionWriter-trie&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19091&quot;&gt;&lt;del&gt;CASSANDRA-19091&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
DecommissionAvoidWriteTimeoutsTest --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19090&quot; title=&quot;Test Failure: org.apache.cassandra.distributed.test.topology.DecommissionAvoidWriteTimeoutsTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19090&quot;&gt;&lt;del&gt;CASSANDRA-19090&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
cql_tracing_test.TestCqlTracing.test_tracing_simple --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19092&quot; title=&quot;Test Failure: cql_tracing_test.TestCqlTracing.test_tracing_simple&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19092&quot;&gt;&lt;del&gt;CASSANDRA-19092&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17789631" author="michaelsembwever" created="Sat, 25 Nov 2023 09:23:04 +0000"  >&lt;p&gt;Rebased CI&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;5.0 &#8211; &lt;a href=&quot;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/258&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/258&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;trunk &#8211;&#160;&lt;a href=&quot;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/259&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17789735" author="adelapena" created="Sat, 25 Nov 2023 22:06:18 +0000"  >&lt;p&gt;I haven&apos;t checked trunk yet but I&apos;d say 5.0 looks mostly good:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;upgrade_tests.storage_engine_upgrade_test.TestStorageEngineUpgrade/TestBootstrapAfterUpgrade&lt;/tt&gt; seem unrelated?&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;bootstrap_test.TestBootstrap#test_read_from_bootstrapped_node&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19097&quot; title=&quot;Test Failure: bootstrap_test.TestBootstrap.*&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19097&quot;&gt;&lt;del&gt;CASSANDRA-19097&lt;/del&gt;&lt;/a&gt; (detected by this run, most probably unrelated)&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;bootstrap_test.TestBootstrap#test_killed_wiped_node_cannot_join&lt;/tt&gt; is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19097&quot; title=&quot;Test Failure: bootstrap_test.TestBootstrap.*&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19097&quot;&gt;&lt;del&gt;CASSANDRA-19097&lt;/del&gt;&lt;/a&gt; (detected by this run, most probably unrelated)&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;materialized_views_test.TestMaterializedViews#test_drop_mv&lt;/tt&gt; might be &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17886&quot; title=&quot;Test failure: materialized_views_test.py::TestMaterializedViews::test_drop_with_stopped_build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17886&quot;&gt;CASSANDRA-17886&lt;/a&gt;?&lt;/li&gt;
	&lt;li&gt;multiple dtest timeouts focused on a slow runner: &lt;a href=&quot;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/258/workflows/cea7d697-ca33-40bb-8914-fb9fc662820a/jobs/21166/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/258/workflows/cea7d697-ca33-40bb-8914-fb9fc662820a/jobs/21166/tests&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;multiple ustest timeouts focused on a slow runner: &lt;a href=&quot;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/258/workflows/cea7d697-ca33-40bb-8914-fb9fc662820a/jobs/21164/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/258/workflows/cea7d697-ca33-40bb-8914-fb9fc662820a/jobs/21164/tests&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Maybe we should re-run the tasks with multiple timeouts (&lt;tt&gt;j17_dtests_vnode&lt;/tt&gt; and {&lt;tt&gt;17_utests_system_keyspace_directory&lt;/tt&gt;) on CircleCI separate workflow to be on the safe side, although they seem unlikely to be related to the small, SAI-focused changes proposed here.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17789784" author="michaelsembwever" created="Sun, 26 Nov 2023 09:54:18 +0000"  >&lt;p&gt;5.0 failures:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;org.apache.cassandra.index.sai.cql.StorageAttachedIndexDDLTest --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19032&quot; title=&quot;StorageAttachedIndexDDLTest.concurrentTruncateWithIndexBuilding is flakey&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19032&quot;&gt;&lt;del&gt;CASSANDRA-19032&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;cqlsh_tests.test_cqlsh_copy.TestCqlshCopy.test_round_trip_with_rate_file --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17322&quot; title=&quot;Test Failure: dtest-novnode.cqlsh_tests.test_cqlsh_copy.TestCqlshCopy.test_round_trip_with_rate_file (from Cassandra dtests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17322&quot;&gt;CASSANDRA-17322&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;bootstrap_test.TestBootstrap --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19097&quot; title=&quot;Test Failure: bootstrap_test.TestBootstrap.*&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19097&quot;&gt;&lt;del&gt;CASSANDRA-19097&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;upgrade_dtests needed a new run (to get the dtest changes to version guard the initialisecms call)&lt;/li&gt;
	&lt;li&gt;and timeouts&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;trunk failures:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;as above, or associated by 19055, plus&#8230;&lt;/li&gt;
	&lt;li&gt;org.apache.cassandra.index.sai.cql.VectorSegmentationTest.testMultipleSegmentsForCompaction --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19095&quot; title=&quot;Test Failure: org.apache.cassandra.index.sai.cql.VectorSegmentationTest.testMultipleSegmentsForCompaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19095&quot;&gt;CASSANDRA-19095&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;org.apache.cassandra.db.SystemKeyspaceMigrator41Test.testMigrateCompactionHistory --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19098&quot; title=&quot;Test Failure: org.apache.cassandra.db.SystemKeyspaceMigrator41Test.testMigrateCompactionHistory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19098&quot;&gt;&lt;del&gt;CASSANDRA-19098&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;org.apache.cassandra.cql3.validation.operations.AlterTest.testDropListAndAddListWithSameName --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18360&quot; title=&quot;Test Failure: o.a.c.cql3.validation.operations.AlterTest#testDropListAndAddListWithSameName&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18360&quot;&gt;CASSANDRA-18360&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;and timeouts&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="17789785" author="michaelsembwever" created="Sun, 26 Nov 2023 09:56:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;upgrade_dtests needed a new run (to get the dtest changes to version guard the initialisecms call)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ve rerun all timeouts failures.  They only persisting failures is those related to &lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/c0082c9d0b2ded7da93942dfbfc7c87c896d53e0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cassandra-dtest@c0082c9&lt;/a&gt;. Still trying&#8230;&lt;/p&gt;</comment>
                            <comment id="17789789" author="michaelsembwever" created="Sun, 26 Nov 2023 11:03:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;They only persisting failures is those related to &lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/c0082c9d0b2ded7da93942dfbfc7c87c896d53e0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cassandra-dtest@c0082c9&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;These are reproducible on cassandra-5.0.  The cassandra-dtest commit is not working as intended.&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/261/workflows/6a15688e-b110-4ede-977c-550b85306867/jobs/21417/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/michaelsembwever/cassandra/261/workflows/6a15688e-b110-4ede-977c-550b85306867/jobs/21417/tests&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Entered as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19099&quot; title=&quot;Test Failure: 5.0 dtest-upgrade failing bc nodetool initiatlizecms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19099&quot;&gt;&lt;del&gt;CASSANDRA-19099&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17789794" author="michaelsembwever" created="Sun, 26 Nov 2023 11:39:02 +0000"  >&lt;p&gt;Committed &lt;a href=&quot;https://github.com/apache/cassandra/commit/a9e6ed37874f2240039086309e7849bea42c07e2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/a9e6ed37874f2240039086309e7849bea42c07e2&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310460">
                    <name>Child-Issue</name>
                                            <outwardlinks description="is a parent of">
                                        <issuelink>
            <issuekey id="13558721">CASSANDRA-19040</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                                                <inwardlinks description="Discovered while testing">
                                        <issuelink>
            <issuekey id="13547359">CASSANDRA-18753</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mike_tr_adamson]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12970"><![CDATA[Unit Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311120" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>CASSANDRA-18473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lopk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
        <customfieldvalue><![CDATA[mck]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12353513">5.0-alpha1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/a9e6ed37874f2240039086309e7849bea42c07e2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/a9e6ed37874f2240039086309e7849bea42c07e2&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Latest CI runs are in the comments&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>