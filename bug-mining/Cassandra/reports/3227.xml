<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:49:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8262] parse_for_table_meta errors out on queries with undefined grammars</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8262</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6910&quot; title=&quot;Better table structure display in cqlsh&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6910&quot;&gt;&lt;del&gt;CASSANDRA-6910&lt;/del&gt;&lt;/a&gt; introduced changes to the cqlsh function &lt;tt&gt;parse_for_table_meta&lt;/tt&gt; that cause an error to be thrown whenever a query does not have its grammar defined in cql3handling.py. However, this is affecting queries that are legitimate cql syntax and are accepted by Cassandra, but aren&apos;t defined in cqlsh. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12753195">CASSANDRA-8262</key>
            <summary>parse_for_table_meta errors out on queries with undefined grammars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="philipthompson">Philip Thompson</assignee>
                                    <reporter username="philipthompson">Philip Thompson</reporter>
                        <labels>
                            <label>cqlsh</label>
                    </labels>
                <created>Wed, 5 Nov 2014 22:05:34 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:29 +0000</updated>
                            <resolved>Wed, 5 Nov 2014 23:50:59 +0000</resolved>
                                        <fixVersion>2.1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14199260" author="philipthompson" created="Wed, 5 Nov 2014 22:38:43 +0000"  >&lt;p&gt;If &lt;tt&gt;cql_parse&lt;/tt&gt; does not succeed and an &lt;tt&gt;IndexError&lt;/tt&gt; is thrown, then &lt;tt&gt;parse_for_table_meta&lt;/tt&gt; will return None. If there are any results, then this will not affect the output. Queries without grammars defined will still succeed. With the v1 patch, if a query has no results, an exception will be thrown. I will attempt to remedy that in a v2.&lt;/p&gt;</comment>
                            <comment id="14199277" author="philipthompson" created="Wed, 5 Nov 2014 22:47:59 +0000"  >&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mishail&quot; class=&quot;user-hover&quot; rel=&quot;mishail&quot;&gt;mishail&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In 2.1.0, if a cqlsh query returned 0 rows, all that is printed is &lt;tt&gt;(0 rows)&lt;/tt&gt;. After &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6910&quot; title=&quot;Better table structure display in cqlsh&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6910&quot;&gt;&lt;del&gt;CASSANDRA-6910&lt;/del&gt;&lt;/a&gt;, it also prints out the table metadata. If table metadata cannot be determined, is it acceptable to just fall back to the 2.1.0 output, or would you also like a warning message that says table metadata could not be determined?&lt;/p&gt;</comment>
                            <comment id="14199280" author="mishail" created="Wed, 5 Nov 2014 22:49:01 +0000"  >&lt;p&gt;Let&apos;s fallback to the old behavior &lt;/p&gt;</comment>
                            <comment id="14199288" author="philipthompson" created="Wed, 5 Nov 2014 22:54:29 +0000"  >&lt;p&gt;Okay, if there are no rows and no table_meta, &lt;tt&gt;(0 rows)&lt;/tt&gt; is printed. If there are no rows and there is table meta, the 6910 behavior is preserved. If there are rows, but no table_meta, everything prints normally but the column header coloring is changed. &lt;/p&gt;</comment>
                            <comment id="14199343" author="mishail" created="Wed, 5 Nov 2014 23:21:39 +0000"  >&lt;p&gt;Can we change &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not rows and not table_meta:
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;

        elif not rows:
             # print header only
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to just &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not rows:
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not table_meta:
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;

            # print header only
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14199355" author="philipthompson" created="Wed, 5 Nov 2014 23:26:35 +0000"  >&lt;p&gt;Attached as v3.&lt;/p&gt;</comment>
                            <comment id="14199402" author="mishail" created="Wed, 5 Nov 2014 23:50:59 +0000"  >&lt;p&gt;Committed v3, thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12751861">CASSANDRA-8226</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12703084">CASSANDRA-6910</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12679660" name="cassandra-2.1-8262-1.txt" size="586" author="philipthompson" created="Wed, 5 Nov 2014 22:35:35 +0000"/>
                            <attachment id="12679665" name="cassandra-2.1-8262-2.txt" size="1068" author="philipthompson" created="Wed, 5 Nov 2014 22:52:39 +0000"/>
                            <attachment id="12679683" name="cassandra-2.1-8262-3.txt" size="956" author="philipthompson" created="Wed, 5 Nov 2014 23:26:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[philipthompson]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i220v3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326774">2.1.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mishail</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mishail]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326774">2.1.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>philipthompson</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>