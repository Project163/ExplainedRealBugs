<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:27:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18448] Missing &quot;SSTable Count&quot; metric  when using nodetool with &quot;--format&quot; option</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18448</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Hi,&#160;&lt;/p&gt;

&lt;p&gt;I&apos;m using &quot;nodetool cfstats --format json&quot; to gather some metrics/infomation about our tables.&#160;&lt;br/&gt;
I noticed that the &quot;SSTable Count&quot; is missing when using &quot;&#8211;format&quot; option.&#160;&lt;/p&gt;

&lt;p&gt;If I don&apos;t use &quot;&#8211;format&quot;&#160; option, I can set &quot;SSTable Count&quot; in the output.&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Output of &quot;nodetool cfstats --format json | jq&quot;:&lt;/b&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;total_number_of_tables&quot;&lt;/span&gt;: 38,&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;stress_test&quot;&lt;/span&gt;: {&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;write_latency_ms&quot;&lt;/span&gt;: 0.8536725334338424,&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;tables&quot;&lt;/span&gt;: {&#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;res1&quot;&lt;/span&gt;: {&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;average_tombstones_per_slice_last_five_minutes&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;bloom_filter_off_heap_memory_used&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;159256&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;memtable_switch_count&quot;&lt;/span&gt;: 754,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;maximum_tombstones_per_slice_last_five_minutes&quot;&lt;/span&gt;: 0,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;memtable_cell_count&quot;&lt;/span&gt;: 0,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;memtable_data_size&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;average_live_cells_per_slice_last_five_minutes&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;local_read_latency_ms&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;NaN&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;local_write_latency_ms&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;NaN&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;pending_flushes&quot;&lt;/span&gt;: 0,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;compacted_partition_minimum_bytes&quot;&lt;/span&gt;: 785940,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;local_read_count&quot;&lt;/span&gt;: 0,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;sstable_compression_ratio&quot;&lt;/span&gt;: 0.6294161376582798,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;dropped_mutations&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;52751&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;bloom_filter_false_positives&quot;&lt;/span&gt;: 0,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;off_heap_memory_used_total&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;58842196&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;memtable_off_heap_memory_used&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;index_summary_off_heap_memory_used&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;18972&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;bloom_filter_space_used&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;159408&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;sstables_in_each_level&quot;&lt;/span&gt;: [],&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;compacted_partition_maximum_bytes&quot;&lt;/span&gt;: 4055269,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;space_used_total&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;302694398635&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;local_write_count&quot;&lt;/span&gt;: 297111,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;compression_metadata_off_heap_memory_used&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;58663968&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;number_of_partitions_estimate&quot;&lt;/span&gt;: 99614,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;maximum_live_cells_per_slice_last_five_minutes&quot;&lt;/span&gt;: 0,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;space_used_live&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;302694398635&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;compacted_partition_mean_bytes&quot;&lt;/span&gt;: 3827283,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;bloom_filter_false_ratio&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;0.00000&quot;&lt;/span&gt;,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;percent_repaired&quot;&lt;/span&gt;: 0,&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;space_used_by_snapshots_total&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;&#160; &#160; &#160; }&#160; &#160; },&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;read_latency_ms&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;pending_flushes&quot;&lt;/span&gt;: 0,&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;write_count&quot;&lt;/span&gt;: 594308,&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;read_latency&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;read_count&quot;&lt;/span&gt;: 0&#160; }}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Output of &quot;nodetool cfstats&quot;:&lt;/b&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
----------------
Keyspace : stress_test
&#160; &#160; &#160; &#160; Read Count: 0
&#160; &#160; &#160; &#160; Read Latency: NaN ms
&#160; &#160; &#160; &#160; Write Count: 594308
&#160; &#160; &#160; &#160; Write Latency: 0.8536725334338424 ms
&#160; &#160; &#160; &#160; Pending Flushes: 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Table: res1
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; SSTable count: 19&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 
                Space used (live): 302694398635
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Space used (total): 302694398635
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Space used by snapshots (total): 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Off heap memory used (total): 58842196
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; SSTable Compression Ratio: 0.6294161376582798
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of partitions (estimate): 99614
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Memtable cell count: 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Memtable data size: 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Memtable off heap memory used: 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Memtable &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; count: 754
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Local read count: 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Local read latency: NaN ms
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Local write count: 297111
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Local write latency: NaN ms
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Pending flushes: 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Percent repaired: 0.0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Bloom filter &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; positives: 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Bloom filter &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; ratio: 0.00000
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Bloom filter space used: 159408
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Bloom filter off heap memory used: 159256
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Index summary off heap memory used: 18972
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Compression metadata off heap memory used: 58663968
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Compacted partition minimum bytes: 785940
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Compacted partition maximum bytes: 4055269
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Compacted partition mean bytes: 3827283
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Average live cells per slice (last five minutes): NaN
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Maximum live cells per slice (last five minutes): 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Average tombstones per slice (last five minutes): NaN
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Maximum tombstones per slice (last five minutes): 0
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Dropped Mutations: 52751* &#160;
----------------
&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13532568">CASSANDRA-18448</key>
            <summary>Missing &quot;SSTable Count&quot; metric  when using nodetool with &quot;--format&quot; option</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adelapena">Andres de la Pe&#241;a</assignee>
                                    <reporter username="Aburadeh">Mohammad Aburadeh</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Apr 2023 19:58:09 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:39 +0000</updated>
                            <resolved>Mon, 17 Apr 2023 14:10:19 +0000</resolved>
                                        <fixVersion>3.11.15</fixVersion>
                    <fixVersion>4.0.10</fixVersion>
                    <fixVersion>4.1.2</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>Tool/nodetool</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17712477" author="adelapena" created="Fri, 14 Apr 2023 17:24:37 +0000"  >&lt;p&gt;I think this was missed by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12205&quot; title=&quot;nodetool tablestats sstable count missing.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12205&quot;&gt;&lt;del&gt;CASSANDRA-12205&lt;/del&gt;&lt;/a&gt;, when it added the sstable count to &lt;tt&gt;TableStatsPrinter.DefaultPrinter&lt;/tt&gt;. The patch forgot to add it also to the &lt;tt&gt;StatsHolder#convert2Map&lt;/tt&gt; method used by &lt;tt&gt;TableStatsPrinter.JsonPrinter&lt;/tt&gt; and &lt;tt&gt;TableStatsPrinter.YamlPrinter&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Here is a very simple fix:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;PR&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2849/workflows/71775e33-1717-43c4-83d6-02f5a849f983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2849/workflows/e1fc878a-a63d-4651-a3b5-4ce2db2d3261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17712478" author="brandon.williams" created="Fri, 14 Apr 2023 17:27:12 +0000"  >&lt;p&gt;Looks good for trunk, how about the other branches?&lt;/p&gt;</comment>
                            <comment id="17712479" author="adelapena" created="Fri, 14 Apr 2023 17:31:48 +0000"  >&lt;p&gt;Thanks, I&apos;ll add them if that and CI look good.&lt;/p&gt;</comment>
                            <comment id="17712482" author="edimitrova" created="Fri, 14 Apr 2023 17:39:27 +0000"  >&lt;p&gt;&lt;del&gt;I guess in older branches the new output should be under a new flag, no? (respectively this will actually lead to adding new flag in trunk too)&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;The bug is from 3.8 and this means that it kept rolling with that output in newer major versions so it will be breaking the nodetool output for users. 3.11 was here for many years already, that is what bothers me.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;It is about JSON, I was wrong and not the nodetool output per se but I am still not sure whether we should just add it&lt;/p&gt;</comment>
                            <comment id="17712484" author="brandon.williams" created="Fri, 14 Apr 2023 17:43:19 +0000"  >&lt;p&gt;I don&apos;t think extra fields in json will break anything, but I also don&apos;t think anyone will complain about finally getting missing information.&lt;/p&gt;</comment>
                            <comment id="17712489" author="adelapena" created="Fri, 14 Apr 2023 17:54:15 +0000"  >&lt;p&gt;The regular nodetool output might be parsed by ad hoc scripts that can be broken by this type of changes, so we need the flag for those cases. &lt;br/&gt;
However, I think that the yaml and json outputs that we are modifying here are well-know standards, probably meant to be read by parsers that shouldn&apos;t break on the extra fields. So I&apos;d say we don&apos;t need the extra flag.&lt;/p&gt;</comment>
                            <comment id="17712492" author="edimitrova" created="Fri, 14 Apr 2023 18:15:22 +0000"  >&lt;p&gt;Agreed with both of you, thanks. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17713043" author="adelapena" created="Mon, 17 Apr 2023 11:43:58 +0000"  >&lt;p&gt;Thanks for pointing it out nevertheless, one can never be too careful spotting compatibility issues &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Here are the patches for all the branches:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;PR&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11 &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2851/workflows/c5caa6f2-a315-40a8-922a-2cb8c55f97d7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0 &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2850/workflows/19806cf0-51b2-4030-ad21-c312471f19a1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2850/workflows/6c4a313f-0b72-427f-84b0-406803d4002f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2279&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1 &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2852/workflows/fe8aae70-8716-4d87-9ce8-54a99fd5a283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2852/workflows/5c124db9-30e6-4919-817a-ea323eb0418d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2849/workflows/71775e33-1717-43c4-83d6-02f5a849f983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2849/workflows/e1fc878a-a63d-4651-a3b5-4ce2db2d3261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;3.11 doesn&apos;t contain any test at all for &lt;tt&gt;cfstats&lt;/tt&gt;/&lt;tt&gt;tablestats&lt;/tt&gt;, beyond some sporadic usages on Python dtests meant to tests other things, rather than the tool itself. The tests that are modified on 4.0, 4.1 and trunk to include sstable count on json/yaml output don&apos;t exist on 3.11. It neither exist the machinery that makes those tests work, which includes &lt;tt&gt;ToolRunner&lt;/tt&gt; and changes on &lt;tt&gt;CQLTester&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;We can port that test machinery back to 3.11, but I&apos;m not sure it&apos;s worth it. It would make the changes on 3.11 quite more extensive, and that branch doesn&apos;t seem to have a very long life expectancy. wdyt?&lt;/p&gt;</comment>
                            <comment id="17713045" author="brandon.williams" created="Mon, 17 Apr 2023 11:46:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;neither exist the machinery that makes those tests work&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oof, yeah, that is a lot of heavy lifting to just test a json/yaml field.  I don&apos;t think it&apos;s worth the effort.&lt;/p&gt;</comment>
                            <comment id="17713058" author="brandon.williams" created="Mon, 17 Apr 2023 12:24:26 +0000"  >&lt;p&gt;No related failures, +1 from me.&lt;/p&gt;</comment>
                            <comment id="17713082" author="edimitrova" created="Mon, 17 Apr 2023 13:10:16 +0000"  >&lt;p&gt;I also agree about 3.11 patch. I can confirm I tested the 3.11 patch with &lt;b&gt;nodetool cfstats --format json | jq&lt;/b&gt;&#160;locally and it shows sstable_count (old_sstable_count not presented in 3.11)&lt;/p&gt;

&lt;p&gt;In regards to CI:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;3.11:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;test_dead_async_initiator - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17702&quot; title=&quot;Fix flaky dtest - repair_tests.repair_test.TestRepair.test_dead_sync_initiator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17702&quot;&gt;CASSANDRA-17702&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;testReprepareMixedVersionWithoutReset - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18021&quot; title=&quot;Flaky org.apache.cassandra.distributed.test.ReprepareTestOldBehaviour#testReprepareMixedVersionWithoutReset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18021&quot;&gt;CASSANDRA-18021&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;test_upgrade_legacy_table - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17329&quot; title=&quot;Fix failing test - dtest-upgrade.upgrade_internal_auth_test.TestAuthUpgrade.test_upgrade_legacy_tabl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17329&quot;&gt;CASSANDRA-17329&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;4.0:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;testPagingWithClustering - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18432&quot; title=&quot;Test failure: org.apache.cassandra.index.sasi.SASICQLTest#testPagingWithClustering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18432&quot;&gt;CASSANDRA-18432&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;testDropCompactStorage - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17674&quot; title=&quot;Test failure: org.apache.cassandra.distributed.upgrade.DropCompactStorageTest.testDropCompactStorage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17674&quot;&gt;CASSANDRA-17674&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;testFailingMessage&lt;span class=&quot;error&quot;&gt;&amp;#91;VALIDATION_REQ/parallel/true&amp;#93;&lt;/span&gt; - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18366&quot; title=&quot;Test failure: org.apache.cassandra.distributed.test.FailingRepairTest - testFailingMessage[VALIDATION_REQ/parallel/true]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18366&quot;&gt;&lt;del&gt;CASSANDRA-18366&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;4.1:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;paxosRepairHistoryIsntUpdatedInForcedRepair - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18047&quot; title=&quot;fix flaky o.a.c.distributed.test.PaxosRepair2Test.paxosRepairHistoryIsntUpdatedInForcedRepair&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18047&quot;&gt;&lt;del&gt;CASSANDRA-18047&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;trunk:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;testPagingWithClustering-.jdk11 - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18432&quot; title=&quot;Test failure: org.apache.cassandra.index.sasi.SASICQLTest#testPagingWithClustering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18432&quot;&gt;CASSANDRA-18432&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+1, thanks&lt;/p&gt;</comment>
                            <comment id="17713110" author="adelapena" created="Mon, 17 Apr 2023 14:08:48 +0000"  >&lt;p&gt;Thanks for the reviews.&lt;/p&gt;

&lt;p&gt;Committed to 3.11 as &lt;a href=&quot;https://github.com/apache/cassandra/commit/08b9471a1ecfcb326ba4fbfdeed5d60aefcc671b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;08b9471a1ecfcb326ba4fbfdeed5d60aefcc671b&lt;/a&gt; and merged to &lt;a href=&quot;https://github.com/apache/cassandra/commit/3f67827387cd2fa790c5587d17105fcadeda451c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;, &lt;a href=&quot;https://github.com/apache/cassandra/commit/2208235ce9928bbf7916e6c37616abe29f939214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/cassandra/commit/976b8395f981c5956ef617ea90b483e8e15d576d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12989515">CASSANDRA-12205</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12986" cascade-level="1"><![CDATA[Recoverable Corruption / Loss]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h9zs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
        <customfieldvalue><![CDATA[e.dimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12335695">3.8</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/08b9471a1ecfcb326ba4fbfdeed5d60aefcc671b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/08b9471a1ecfcb326ba4fbfdeed5d60aefcc671b&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;PR&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2849/workflows/71775e33-1717-43c4-83d6-02f5a849f983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/2849/workflows/e1fc878a-a63d-4651-a3b5-4ce2db2d3261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>