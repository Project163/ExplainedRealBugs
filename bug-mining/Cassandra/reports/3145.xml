<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:48:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7939] checkForEndpointCollision should ignore joining nodes</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7939</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;If you fail a bootstrap, then immediately retry it, cFEC erroneously tells you to replace it:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR 00:04:50 Exception encountered during startup
java.lang.RuntimeException: A node with address bw-3/10.208.8.63 already exists, cancelling join. Use cassandra.replace_address if you want to replace this node.
    at org.apache.cassandra.service.StorageService.checkForEndpointCollision(StorageService.java:453) ~[main/:na]
    at org.apache.cassandra.service.StorageService.prepareToJoin(StorageService.java:666) ~[main/:na]
    at org.apache.cassandra.service.StorageService.initServer(StorageService.java:614) ~[main/:na]
    at org.apache.cassandra.service.StorageService.initServer(StorageService.java:507) ~[main/:na]
    at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:338) [main/:na]
    at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:457) [main/:na]
    at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:546) [main/:na]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12741630">CASSANDRA-7939</key>
            <summary>checkForEndpointCollision should ignore joining nodes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Sep 2014 00:09:48 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:34 +0000</updated>
                            <resolved>Mon, 29 Sep 2014 14:53:27 +0000</resolved>
                                        <fixVersion>2.0.11</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14135883" author="brandon.williams" created="Tue, 16 Sep 2014 18:20:56 +0000"  >&lt;p&gt;A simple enough fix for 2.0.  Unfortunately for 2.1, bypassing this problem causes a new one for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7069&quot; title=&quot;Prevent operator mistakes due to simultaneous bootstrap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7069&quot;&gt;&lt;del&gt;CASSANDRA-7069&lt;/del&gt;&lt;/a&gt;, since we can begin bootstrapping before we&apos;ve seen the entire ring.  I think we&apos;ll have to check STATUS for each node in cFEC and bail if we see JOINING or LEAVING, since tMD won&apos;t be populated from the shadow round.&lt;/p&gt;</comment>
                            <comment id="14136013" author="brandon.williams" created="Tue, 16 Sep 2014 19:17:06 +0000"  >&lt;p&gt;Patch to check states after the shadow round.  This increases the window where &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7069&quot; title=&quot;Prevent operator mistakes due to simultaneous bootstrap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7069&quot;&gt;&lt;del&gt;CASSANDRA-7069&lt;/del&gt;&lt;/a&gt; can miss slightly, since if the nodes are started very close together it&apos;s possible one will gossip with the seed before setting its STATUS, but this was always possible so this is our best effort.&lt;/p&gt;</comment>
                            <comment id="14136025" author="brandon.williams" created="Tue, 16 Sep 2014 19:20:10 +0000"  >&lt;p&gt;On second thought, there&apos;s probably no need to remove the original check for 2.1; we can just double up for better protection.&lt;/p&gt;</comment>
                            <comment id="14136307" author="brandon.williams" created="Tue, 16 Sep 2014 21:50:10 +0000"  >&lt;p&gt;Updated 2.1 patch leaves the original check in place.&lt;/p&gt;</comment>
                            <comment id="14144236" author="tjake" created="Tue, 23 Sep 2014 02:49:46 +0000"  >&lt;p&gt;Based on the description I&apos;m not clear why the patch is to check if it&apos;s not a fatClient?&lt;/p&gt;

&lt;p&gt;nit: in the 2.1 patch you should use RangeStreamer.useStrictConsistency vs re-parsing the property&lt;/p&gt;</comment>
                            <comment id="14144850" author="brandon.williams" created="Tue, 23 Sep 2014 14:44:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Based on the description I&apos;m not clear why the patch is to check if it&apos;s not a fatClient?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because you can&apos;t retry a failed bootstrap until the fat client expires from gossip.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;nit: in the 2.1 patch you should use RangeStreamer.useStrictConsistency vs re-parsing the property&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fair enough, can fix on commit.&lt;/p&gt;</comment>
                            <comment id="14144880" author="tjake" created="Tue, 23 Sep 2014 15:17:03 +0000"  >&lt;p&gt;+1, nit: the state string split etc looks fragile, can you assert the split worked as expected?&lt;/p&gt;</comment>
                            <comment id="14151755" author="brandon.williams" created="Mon, 29 Sep 2014 14:53:27 +0000"  >&lt;p&gt;Committed with both nits fixed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12709849">CASSANDRA-7069</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12843700">CASSANDRA-9765</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12669234" name="7939-2.1.txt" size="2315" author="brandon.williams" created="Tue, 16 Sep 2014 21:50:10 +0000"/>
                            <attachment id="12669118" name="7939.txt" size="1091" author="brandon.williams" created="Tue, 16 Sep 2014 18:20:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i202lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tjake</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[tjake]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>