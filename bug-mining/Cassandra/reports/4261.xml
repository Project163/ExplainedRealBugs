<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:02:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11626] cqlsh fails and exits on non-ascii chars</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11626</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Just seen on cqlsh on current trunk:&lt;/p&gt;

&lt;p&gt;To repro, copy &lt;tt&gt;&#228;&lt;/tt&gt; (german umlaut) to cqlsh and press return.&lt;br/&gt;
cqlsh errors out and immediately exits.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ bin/cqlsh
Connected to Test Cluster at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 2.1.13-SNAPSHOT | CQL spec 3.2.1 | Native protocol v3]
Use HELP &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; help.
cqlsh&amp;gt; &#228;
Invalid syntax at line 1, &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; 1
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/snazy/devel/cassandra/trunk/bin/cqlsh.py&quot;&lt;/span&gt;, line 2636, in &amp;lt;module&amp;gt;
    main(*read_options(sys.argv[1:], os.environ))
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/snazy/devel/cassandra/trunk/bin/cqlsh.py&quot;&lt;/span&gt;, line 2625, in main
    shell.cmdloop()
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/snazy/devel/cassandra/trunk/bin/cqlsh.py&quot;&lt;/span&gt;, line 1114, in cmdloop
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; self.onecmd(self.statement.getvalue()):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/snazy/devel/cassandra/trunk/bin/cqlsh.py&quot;&lt;/span&gt;, line 1139, in onecmd
    self.printerr(&lt;span class=&quot;code-quote&quot;&gt;&apos;  %s&apos;&lt;/span&gt; % statementline)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/snazy/devel/cassandra/trunk/bin/cqlsh.py&quot;&lt;/span&gt;, line 2314, in printerr
    self.writeresult(text, color, newline=newline, out=sys.stderr)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/snazy/devel/cassandra/trunk/bin/cqlsh.py&quot;&lt;/span&gt;, line 2303, in writeresult
    out.write(self.applycolor(str(text), color) + (&lt;span class=&quot;code-quote&quot;&gt;&apos;\n&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; newline &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &apos;&apos;))
UnicodeEncodeError: &lt;span class=&quot;code-quote&quot;&gt;&apos;ascii&apos;&lt;/span&gt; codec can&lt;span class=&quot;code-quote&quot;&gt;&apos;t encode character u&apos;&lt;/span&gt;\xe4&apos; in position 2: ordinal not in range(128)
$ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12960808">CASSANDRA-11626</key>
            <summary>cqlsh fails and exits on non-ascii chars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thobbs">Tom Hobbs</assignee>
                                    <reporter username="snazy">Robert Stupp</reporter>
                        <labels>
                            <label>cqlsh</label>
                    </labels>
                <created>Thu, 21 Apr 2016 16:05:24 +0000</created>
                <updated>Fri, 28 Jun 2019 03:19:23 +0000</updated>
                            <resolved>Thu, 5 May 2016 16:42:59 +0000</resolved>
                                        <fixVersion>2.2.7</fixVersion>
                    <fixVersion>3.0.7</fixVersion>
                    <fixVersion>3.7</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15256480" author="pauloricardomg" created="Mon, 25 Apr 2016 15:29:10 +0000"  >&lt;p&gt;can you check if this is fixed by setting &lt;tt&gt;--encoding utf-8&lt;/tt&gt; ? if so, this should be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11124&quot; title=&quot;Change default cqlsh encoding to utf-8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11124&quot;&gt;&lt;del&gt;CASSANDRA-11124&lt;/del&gt;&lt;/a&gt; on 2.2+.&lt;/p&gt;</comment>
                            <comment id="15257727" author="weideng" created="Tue, 26 Apr 2016 08:21:16 +0000"  >&lt;p&gt;I&apos;m seeing the same problem on latest 3.6-SNAPSHOT. Since &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11124&quot; title=&quot;Change default cqlsh encoding to utf-8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11124&quot;&gt;&lt;del&gt;CASSANDRA-11124&lt;/del&gt;&lt;/a&gt; is fixed in 3.4, this might not be the same thing.&lt;/p&gt;</comment>
                            <comment id="15259587" author="weideng" created="Wed, 27 Apr 2016 05:38:38 +0000"  >&lt;p&gt;Yeah I don&apos;t think it&apos;s the same problem as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11124&quot; title=&quot;Change default cqlsh encoding to utf-8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11124&quot;&gt;&lt;del&gt;CASSANDRA-11124&lt;/del&gt;&lt;/a&gt;. See the following using latest trunk build:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;root@node0:~/cassandra-trunk# ~/cassandra-trunk/bin/cqlsh --encoding=utf-8 --debug
Using CQL driver: &amp;lt;module &apos;cassandra&apos; from &apos;/root/cassandra-trunk/bin/../lib/cassandra-driver-internal-only-3.0.0-6af642d.zip/cassandra-driver-3.0.0-6af642d/cassandra/__init__.py&apos;&amp;gt;
Using connect timeout: 5 seconds
Using &apos;utf-8&apos; encoding
Using ssl: False
Connected to Test Cluster at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 3.6-SNAPSHOT | CQL spec 3.4.2 | Native protocol v4]
Use HELP for help.
cqlsh&amp;gt; &#228;
Invalid syntax at line 1, char 1
Traceback (most recent call last):
  File &quot;/root/cassandra-trunk/bin/cqlsh.py&quot;, line 2636, in &amp;lt;module&amp;gt;
    main(*read_options(sys.argv[1:], os.environ))
  File &quot;/root/cassandra-trunk/bin/cqlsh.py&quot;, line 2625, in main
    shell.cmdloop()
  File &quot;/root/cassandra-trunk/bin/cqlsh.py&quot;, line 1114, in cmdloop
    if self.onecmd(self.statement.getvalue()):
  File &quot;/root/cassandra-trunk/bin/cqlsh.py&quot;, line 1139, in onecmd
    self.printerr(&apos;  %s&apos; % statementline)
  File &quot;/root/cassandra-trunk/bin/cqlsh.py&quot;, line 2314, in printerr
    self.writeresult(text, color, newline=newline, out=sys.stderr)
  File &quot;/root/cassandra-trunk/bin/cqlsh.py&quot;, line 2303, in writeresult
    out.write(self.applycolor(str(text), color) + (&apos;\n&apos; if newline else &apos;&apos;))
UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode character u&apos;\xe4&apos; in position 2: ordinal not in range(128)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is easily reproducible on a number of C* 3.x versions (3.0.4 and 3.6).&lt;/p&gt;</comment>
                            <comment id="15264620" author="thobbs" created="Fri, 29 Apr 2016 19:42:17 +0000"  >&lt;p&gt;In a few places in cqlsh we were only handling ascii chars in error messages.  I&apos;ve changed this to use the specified encoding (defaults to UTF-8).&lt;/p&gt;

&lt;p&gt;Branches and pending CI runs (merges from 2.2 up are trivial and can be ignored):&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;dtest&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-11626-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-11626-2.2&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-11626-2.2-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-11626-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-11626-3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-11626-3.0-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-11626-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-11626-trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-11626-trunk-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;I&apos;ve also opened a &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest pull request&lt;/a&gt; that covers a couple of the unicode error message scenarios.&lt;/p&gt;</comment>
                            <comment id="15264771" author="thobbs" created="Fri, 29 Apr 2016 21:22:43 +0000"  >&lt;p&gt;Hmm, looks like there are some dtest failures, let me fix those up.&lt;/p&gt;</comment>
                            <comment id="15269619" author="thobbs" created="Tue, 3 May 2016 21:23:53 +0000"  >&lt;p&gt;Okay, I&apos;ve pushed a new commit and the second test run looks better.&lt;/p&gt;</comment>
                            <comment id="15271612" author="pauloricardomg" created="Wed, 4 May 2016 23:11:21 +0000"  >&lt;p&gt;LGTM (tested with latin chars), let&apos;s hope this is our last juggling with encoding on cqlsh.&lt;/p&gt;</comment>
                            <comment id="15272029" author="snazy" created="Thu, 5 May 2016 07:45:05 +0000"  >&lt;p&gt;I tried some latin and special characters. Works fine now! +1 from me, too&lt;/p&gt;</comment>
                            <comment id="15272598" author="thobbs" created="Thu, 5 May 2016 16:42:59 +0000"  >&lt;p&gt;Thanks, committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/5de9de1f5832f2a0e92783e2f4412874423e6e15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;5de9de1f5832f2a0e92783e2f4412874423e6e15&lt;/tt&gt;&lt;/a&gt; to 2.2 and merged up to 3.0, 3.7, and trunk.&lt;/p&gt;</comment>
                            <comment id="16873742" author="glocalhelp.com" created="Thu, 27 Jun 2019 01:21:00 +0000"  >&lt;p&gt;I am using cqlsh 5.0.1 now with cassandra 3.11.3, and also has the error as below,&lt;/p&gt;

&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pauloricardomg&quot; class=&quot;user-hover&quot; rel=&quot;pauloricardomg&quot;&gt;pauloricardomg&lt;/a&gt;&#160; what are your steps to solve these decode errors? I cann&apos;t find in the above.&lt;/p&gt;

&lt;p&gt;command: bin/cqlsh hadoop4 &lt;del&gt;u **-p **&lt;/del&gt;-encoding utf8&#160; -e &quot;select * from HYGL_JCSJ.hyjg_ods_yy_gps_novar3 where clcph=&apos;&#40657;A00888D&apos; and dwsj=&apos;2019-06-2509:57:19&apos;;&quot;&lt;/p&gt;

&lt;p&gt;Error:&amp;lt;stdin&amp;gt;:1:&apos;ascii&apos; codec can&apos;t decode byte 0xe9 in position 60: ordinal not in range(128)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16874618" author="glocalhelp.com" created="Fri, 28 Jun 2019 03:19:23 +0000"  >&lt;p&gt;I have found the solution on csdn net,&#160; in order to thanks author and for the new coming newbie, put the link here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/l1028386804/article/details/78976807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://blog.csdn.net/l1028386804/article/details/78976807&lt;/a&gt; , the 1st method is ok on Centos6.9 with python2.7&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wgk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12334792">3.0.4</customfieldvalue>
    <customfieldvalue id="12334947">3.5</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>pauloricardomg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[pauloricardomg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>