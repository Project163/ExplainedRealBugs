<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:08:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13652] Deadlock in AbstractCommitLogSegmentManager</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13652</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;AbstractCommitLogManager uses LockSupport.(un)park incorreclty. It invokes unpark without checking if manager thread was parked in approriate place. &lt;br/&gt;
For example, logging frameworks uses queues and queues uses ReadWriteLock&apos;s that uses LockSupport. Therefore AbstractCommitLogManager.wakeManager can wake thread inside Lock and manager thread will sleep forever at park() method (because unpark permit was already consumed inside lock).&lt;/p&gt;

&lt;p&gt;For examle stack traces:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;MigrationStage:1&quot;&lt;/span&gt; id=412 state=WAITING
    at sun.misc.Unsafe.park(Native Method)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:304)
    at org.apache.cassandra.utils.concurrent.WaitQueue$AbstractSignal.awaitUninterruptibly(WaitQueue.java:279)
    at org.apache.cassandra.db.commitlog.AbstractCommitLogSegmentManager.awaitAvailableSegment(AbstractCommitLogSegmentManager.java:263)
    at org.apache.cassandra.db.commitlog.AbstractCommitLogSegmentManager.advanceAllocatingFrom(AbstractCommitLogSegmentManager.java:237)
    at org.apache.cassandra.db.commitlog.AbstractCommitLogSegmentManager.forceRecycleAll(AbstractCommitLogSegmentManager.java:279)
    at org.apache.cassandra.db.commitlog.CommitLog.forceRecycleAllSegments(CommitLog.java:210)
    at org.apache.cassandra.config.Schema.dropView(Schema.java:708)
    at org.apache.cassandra.schema.SchemaKeyspace.lambda$updateKeyspace$23(SchemaKeyspace.java:1361)
    at org.apache.cassandra.schema.SchemaKeyspace$$Lambda$382/1123232162.accept(Unknown Source)
    at java.util.LinkedHashMap$LinkedValues.forEach(LinkedHashMap.java:608)
    at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1080)
    at org.apache.cassandra.schema.SchemaKeyspace.updateKeyspace(SchemaKeyspace.java:1361)
    at org.apache.cassandra.schema.SchemaKeyspace.mergeSchema(SchemaKeyspace.java:1332)
    at org.apache.cassandra.schema.SchemaKeyspace.mergeSchemaAndAnnounceVersion(SchemaKeyspace.java:1282)
      - locked java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;@cc38904
    at org.apache.cassandra.db.DefinitionsUpdateVerbHandler$1.runMayThrow(DefinitionsUpdateVerbHandler.java:51)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor$LocalSessionWrapper.run(DebuggableThreadPoolExecutor.java:322)
    at com.ringcentral.concurrent.executors.MonitoredRunnable.run(MonitoredRunnable.java:36)
    at MON_R_MigrationStage.run(NamedRunnableFactory.java:67)
    at com.ringcentral.concurrent.executors.MonitoredThreadPoolExecutor$MdcAwareRunnable.run(MonitoredThreadPoolExecutor.java:114)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.cassandra.concurrent.NamedThreadFactory.lambda$threadLocalDeallocator$0(NamedThreadFactory.java:79)
    at org.apache.cassandra.concurrent.NamedThreadFactory$$Lambda$61/1733339045.run(Unknown Source)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;span class=&quot;code-quote&quot;&gt;&quot;COMMIT-LOG-ALLOCATOR:1&quot;&lt;/span&gt; id=80 state=WAITING
    at sun.misc.Unsafe.park(Native Method)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:304)
    at org.apache.cassandra.db.commitlog.AbstractCommitLogSegmentManager$1.runMayThrow(AbstractCommitLogSegmentManager.java:128)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)
    at org.apache.cassandra.concurrent.NamedThreadFactory.lambda$threadLocalDeallocator$0(NamedThreadFactory.java:79)
    at org.apache.cassandra.concurrent.NamedThreadFactory$$Lambda$61/1733339045.run(Unknown Source)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Solution is to use Semaphore instead of low-level LockSupport.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13083994">CASSANDRA-13652</key>
            <summary>Deadlock in AbstractCommitLogSegmentManager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Fuud">Fuud</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Jul 2017 12:52:20 +0000</created>
                <updated>Fri, 15 May 2020 08:06:11 +0000</updated>
                            <resolved>Mon, 17 Jul 2017 20:56:58 +0000</resolved>
                                        <fixVersion>3.11.1</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="16071217" author="githubbot" created="Sat, 1 Jul 2017 12:58:59 +0000"  >&lt;p&gt;GitHub user Fuud opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13652&quot; title=&quot;Deadlock in AbstractCommitLogSegmentManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13652&quot;&gt;&lt;del&gt;CASSANDRA-13652&lt;/del&gt;&lt;/a&gt;: Deadlock in AbstractCompactionManager&lt;/p&gt;

&lt;p&gt;    Change incorrect usage of LockSupport.park/unpark to Semaphore.&lt;br/&gt;
    Old implementation can deadlock because permit from unpark invocation can be consumed by park inside logging framework and manager thread will be parked forever.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13652&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-13652&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/Fuud/cassandra&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Fuud/cassandra&lt;/a&gt; commitlog_deadlock&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/127.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/127.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #127&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 175be27297e9933906a9261cd8d0af3a772bff24&lt;br/&gt;
Author: Fedor Bobin &amp;lt;fuudtorrentsru@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-07-01T12:53:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13652&quot; title=&quot;Deadlock in AbstractCommitLogSegmentManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13652&quot;&gt;&lt;del&gt;CASSANDRA-13652&lt;/del&gt;&lt;/a&gt;: Deadlock in AbstractCompactionManager&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16077630" author="githubbot" created="Fri, 7 Jul 2017 05:44:01 +0000"  >&lt;p&gt;GitHub user Fuud opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13652&quot; title=&quot;Deadlock in AbstractCommitLogSegmentManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13652&quot;&gt;&lt;del&gt;CASSANDRA-13652&lt;/del&gt;&lt;/a&gt;: Deadlock in AbstractCompactionManager&lt;/p&gt;

&lt;p&gt;    PR with same result as #127.&lt;br/&gt;
    Instead of small fix in #127 this PR contains refactoring to make AbstractCommitLogSegmentManager code more clear. &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/Fuud/cassandra&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Fuud/cassandra&lt;/a&gt; commitlog_deadlock_v2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/129.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/129.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #129&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e1a695874dc24e532ae21ef627e852bf999a75f3&lt;br/&gt;
Author: Fedor Bobin &amp;lt;fuudtorrentsru@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-07-07T05:37:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13652&quot; title=&quot;Deadlock in AbstractCommitLogSegmentManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13652&quot;&gt;&lt;del&gt;CASSANDRA-13652&lt;/del&gt;&lt;/a&gt;: Deadlock in AbstractCompactionManager&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16080611" author="jjirsa" created="Mon, 10 Jul 2017 16:33:04 +0000"  >&lt;p&gt;Anyone familiar with this code ( git history suggests maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aweisberg&quot; class=&quot;user-hover&quot; rel=&quot;aweisberg&quot;&gt;aweisberg&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blambov&quot; class=&quot;user-hover&quot; rel=&quot;blambov&quot;&gt;blambov&lt;/a&gt; ) interested in reviewing?&lt;/p&gt;


</comment>
                            <comment id="16080726" author="aweisberg" created="Mon, 10 Jul 2017 17:42:48 +0000"  >&lt;p&gt;I thought that LockSupport was kind of low level when I first saw that, but I didn&apos;t want to bike shed. TIL. It was using a semaphore before, and I don&apos;t remember why we switched. I approve of the change I just want to make sure &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blambov&quot; class=&quot;user-hover&quot; rel=&quot;blambov&quot;&gt;blambov&lt;/a&gt; didn&apos;t have a specific reason for making the switch. &lt;/p&gt;</comment>
                            <comment id="16081873" author="fuud" created="Tue, 11 Jul 2017 08:36:48 +0000"  >&lt;p&gt;Just to keep all things together, copy from mailing list&lt;br/&gt;
&lt;a href=&quot;http://www.mail-archive.com/dev@cassandra.apache.org/msg11313.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@cassandra.apache.org/msg11313.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I found possible deadlock in AbstractCommitLogSegmentManager. The root cause is incorrect use of LockSupport.park/unpark pair. Unpark should be invoked only if caller is sure that thread was parked in appropriate place. Otherwice permission given by calling unpark can be consumed by other structures (for example - inside ReadWriteLock).&lt;/p&gt;

&lt;p&gt;Jira: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13652&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-13652&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I suggest simplest solution: change LockSupport to Semaphore.&lt;br/&gt;
PR: &lt;a href=&quot;https://github.com/apache/cassandra/pull/127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also I suggest another solution with SynchronousQueue-like structure to move available segment from Manager Thread to consumers. With theese changes code became more clear and &lt;br/&gt;
straightforward.&lt;/p&gt;

&lt;p&gt;PR &lt;a href=&quot;https://github.com/apache/cassandra/pull/129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We can not use j.u.c.SynchronousQueue because we need to support shutdown and there is only way to terminate SynchronousQueue.put is to call Thread.interrupt(). But C* uses nio and it does not expect ClosedByInterruptException during IO operations. Thus we can not interrupt Manager Thread. &lt;br/&gt;
I implemented o.a.c.u.c.Transferer that supports shutdown and restart (needed for tests).&lt;br/&gt;
&lt;a href=&quot;https://github.com/Fuud/cassandra/blob/e1a695874dc24e532ae21ef627e852bf999a75f3/src/java/org/apache/cassandra/utils/concurrent/Transferer.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Fuud/cassandra/blob/e1a695874dc24e532ae21ef627e852bf999a75f3/src/java/org/apache/cassandra/utils/concurrent/Transferer.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also I modified o.a.c.d.c.SimpleCachedBufferPool to support waiting for free space.&lt;/p&gt;

&lt;p&gt;Please feel free to ask any questions.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;

&lt;p&gt;Feodor Bobin&lt;br/&gt;
fuudtorrentsru@gmail.com&lt;/p&gt;</comment>
                            <comment id="16082713" author="blambov" created="Tue, 11 Jul 2017 18:29:54 +0000"  >&lt;p&gt;The &lt;tt&gt;park&lt;/tt&gt; call at &lt;a href=&quot;https://github.com/apache/cassandra/pull/127/files#diff-85e13493c70723764c539dd222455979L130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line 130&lt;/a&gt; is indeed suspect, as it does not check there&apos;s no action to perform before parking. I would solve the problem by dropping that call, which would make the usage of park/unpark conform to the specifications.&lt;/p&gt;</comment>
                            <comment id="16082752" author="aweisberg" created="Tue, 11 Jul 2017 18:53:17 +0000"  >&lt;p&gt;Ah you are right it&apos;s the lack of the condition check that causes the problem. I think LockSupport park/unpark is fine it&apos;s just a thread specific semaphore bounded to a single permit.&lt;/p&gt;

&lt;p&gt;It&apos;s technically ok if other usages of park are woken because spurious wakeups are part of the specification so other usages should handle it.&lt;/p&gt;</comment>
                            <comment id="16082776" author="aweisberg" created="Tue, 11 Jul 2017 19:02:04 +0000"  >&lt;p&gt;Although TBH thinking on it why tempt fate with LockSupport.unpark without checking the thread is actually blocked on what we think it is? Let&apos;s go with the semaphore and drop the wait at line 130.&lt;/p&gt;</comment>
                            <comment id="16083616" author="fuud" created="Wed, 12 Jul 2017 08:00:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aweisberg&quot; class=&quot;user-hover&quot; rel=&quot;aweisberg&quot;&gt;aweisberg&lt;/a&gt;&lt;br/&gt;
&amp;gt;&amp;gt;It&apos;s technically ok if other usages of park are woken because spurious wakeups are part of the specification so other usages should handle it.&lt;/p&gt;

&lt;p&gt;Yes. But such other useages will eat permit and Manager Thread will be blocked in our code.&lt;/p&gt;</comment>
                            <comment id="16083702" author="blambov" created="Wed, 12 Jul 2017 09:29:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;Yes. But such other useages will eat permit and Manager Thread will be blocked in our code.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is only relevant if the eating happens before checking we need to park and actually calling &lt;tt&gt;LockSupport.park()&lt;/tt&gt;. This is indeed possible for the line 130 call, which is why it should be removed and the control allowed to continue to the checked park on line 146.&lt;/p&gt;</comment>
                            <comment id="16083705" author="aweisberg" created="Wed, 12 Jul 2017 09:34:20 +0000"  >&lt;p&gt;Most usages of LockSupport don&apos;t introduce (as many) spurious unparks because they check to see of the thread is blocked on the specific condition not just any condition. I want to use a Semaphore so we don&apos;t introduce spurious unparks and trigger bugs in other usages of LockSupport.park. I don&apos;t see a huge advantage to working with LockSupport directly.&lt;/p&gt;

&lt;p&gt;Yes either way blocking without checking the condition at line 130 has to go.&lt;/p&gt;</comment>
                            <comment id="16083849" author="blambov" created="Wed, 12 Jul 2017 11:42:53 +0000"  >&lt;p&gt;The reason to prefer &lt;tt&gt;park&lt;/tt&gt; for me is understandability of the code. This is a loop that does some work and pauses when there&apos;s no need to do any, a perfect candidate for park/unpark.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Semaphore&lt;/tt&gt;, although applicable, implies something else. Our &lt;tt&gt;WaitQueue&lt;/tt&gt; is a better alternative for this kind of application.&lt;/p&gt;</comment>
                            <comment id="16084526" author="aweisberg" created="Wed, 12 Jul 2017 19:12:18 +0000"  >&lt;p&gt;WaitQueue seems even more obtuse? It&apos;s just a condition variable we are looking for so why not ReentrantLock and Condition or synchronized and wait/notify?&lt;/p&gt;

&lt;p&gt;I mean I am fine with it. People working on Cassandra need to learn how WaitQueue works at some point. It just seems like a performance optimization to avoid locking.&lt;/p&gt;</comment>
                            <comment id="16086190" author="aweisberg" created="Thu, 13 Jul 2017 18:39:29 +0000"  >&lt;p&gt;OK, how about this?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...aweisberg:13652-3.11?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11 code&lt;/a&gt;, &lt;a href=&quot;https://circleci.com/gh/aweisberg/cassandra/335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;, &lt;a href=&quot;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/124/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Fuud&quot; class=&quot;user-hover&quot; rel=&quot;Fuud&quot;&gt;Fuud&lt;/a&gt; are you ok with me rewriting your patch this way?&lt;/p&gt;</comment>
                            <comment id="16087047" author="fuud" created="Fri, 14 Jul 2017 08:48:25 +0000"  >&lt;p&gt;Yes. Seems good.&lt;/p&gt;</comment>
                            <comment id="16089481" author="blambov" created="Mon, 17 Jul 2017 08:17:14 +0000"  >&lt;p&gt;This looks good to me.&lt;/p&gt;</comment>
                            <comment id="16090542" author="aweisberg" created="Mon, 17 Jul 2017 20:56:58 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/eb717f154bd24453273d7175006fdef75e5724c2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;eb717f154bd24453273d7175006fdef75e5724c2&lt;/a&gt;. Thanks.&lt;/p&gt;</comment>
                            <comment id="16146653" author="githubbot" created="Wed, 30 Aug 2017 05:42:09 +0000"  >&lt;p&gt;Github user jeffjirsa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @Fuud - eb717f154bd24453273d7175006fdef75e5724c2 has been merged and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13652&quot; title=&quot;Deadlock in AbstractCommitLogSegmentManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13652&quot;&gt;&lt;del&gt;CASSANDRA-13652&lt;/del&gt;&lt;/a&gt; is closed. Is this PR still needed? If not, can you close it (the committers are unable to close it on your behalf)? &lt;/p&gt;</comment>
                            <comment id="16148413" author="githubbot" created="Thu, 31 Aug 2017 04:04:07 +0000"  >&lt;p&gt;Github user Fuud commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @jeffjirsa Sorry, my fault. &lt;/p&gt;</comment>
                            <comment id="16148414" author="githubbot" created="Thu, 31 Aug 2017 04:04:07 +0000"  >&lt;p&gt;Github user Fuud closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/127&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16160637" author="githubbot" created="Mon, 11 Sep 2017 04:03:39 +0000"  >&lt;p&gt;Github user Fuud commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    eb717f1 has been merged and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13652&quot; title=&quot;Deadlock in AbstractCommitLogSegmentManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13652&quot;&gt;&lt;del&gt;CASSANDRA-13652&lt;/del&gt;&lt;/a&gt; is closed. &lt;/p&gt;</comment>
                            <comment id="16160638" author="githubbot" created="Mon, 11 Sep 2017 04:03:39 +0000"  >&lt;p&gt;Github user Fuud closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/129&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12983" cascade-level=""><![CDATA[Availability]]></customfieldvalue>
                                <customfieldvalue key="12994" cascade-level="1"><![CDATA[Unavailable]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gzif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aweisberg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aweisberg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>