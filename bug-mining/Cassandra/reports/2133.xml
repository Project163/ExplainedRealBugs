<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:38:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5465] Shuffle fails to write to system.range_xfers</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5465</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;On trunk, only, executing&lt;/p&gt;

&lt;p&gt;INSERT INTO system.range_xfers (token_bytes, requested_at) VALUES (&apos;5e29cbe30503a9ec&apos;, &apos;now&apos;);&lt;/p&gt;

&lt;p&gt;fails with&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.RuntimeException: InvalidRequestException(why:Invalid STRING constant (5e29cbe30503a9ec) for token_bytes of type blob)&lt;br/&gt;
	at org.apache.cassandra.tools.Shuffle.executeCqlQuery(Shuffle.java:516)&lt;br/&gt;
	at org.apache.cassandra.tools.Shuffle.shuffle(Shuffle.java:359)&lt;br/&gt;
	at org.apache.cassandra.tools.Shuffle.main(Shuffle.java:681)&lt;/p&gt;


&lt;p&gt;patch validates blob-&amp;gt;string&lt;/p&gt;</description>
                <environment></environment>
        <key id="12642366">CASSANDRA-5465</key>
            <summary>Shuffle fails to write to system.range_xfers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dbrosius">David Brosius</reporter>
                        <labels>
                    </labels>
                <created>Sat, 13 Apr 2013 07:46:31 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:14 +0000</updated>
                            <resolved>Sat, 13 Apr 2013 21:27:34 +0000</resolved>
                                        <fixVersion>2.0 beta 1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13631033" author="iamaleksey" created="Sat, 13 Apr 2013 13:12:54 +0000"  >&lt;p&gt;This fix is wrong. BLOB is not there for a reason, and the reason is that in 2.0 &apos;cafe&apos; syntax for blobs is no longer valid. You should fix shuffle instead to use 0xcafe syntax (and do that against 1.2 as well, to avoid the deprecation warning in Cassandra logs).&lt;/p&gt;</comment>
                            <comment id="13631070" author="urandom" created="Sat, 13 Apr 2013 15:07:27 +0000"  >&lt;p&gt;So we&apos;re introducing a breaking (non-backward compatible) change?&lt;/p&gt;</comment>
                            <comment id="13631071" author="iamaleksey" created="Sat, 13 Apr 2013 15:14:08 +0000"  >&lt;p&gt;It was introduced back in 1.2.2. In 1.2 both versions will continue to coexist, so you are able to upgrade. See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5198&quot; title=&quot;Fix CQL3 loose type validation of constants&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5198&quot;&gt;&lt;del&gt;CASSANDRA-5198&lt;/del&gt;&lt;/a&gt; and Jake&apos;s comment - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5198?focusedCommentId=13569019&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13569019&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-5198?focusedCommentId=13569019&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13569019&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13631074" author="urandom" created="Sat, 13 Apr 2013 15:27:38 +0000"  >&lt;p&gt;So we introduced a breaking change.&lt;/p&gt;</comment>
                            <comment id="13631085" author="dbrosius" created="Sat, 13 Apr 2013 16:34:13 +0000"  >&lt;p&gt;So Aleksey, i take it you are saying that Shuffle needs to use prepared statements so that the token can be sent as a ByteBuffer (byte[]) ? &lt;/p&gt;</comment>
                            <comment id="13631088" author="jbellis" created="Sat, 13 Apr 2013 16:42:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;So we introduced a breaking change.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;My understanding is that we did not: the old format continues to work.  What we did do was allow a new format that previously would have errored, and deprecated blob-strings for removal in 2.0.&lt;/p&gt;</comment>
                            <comment id="13631092" author="dbrosius" created="Sat, 13 Apr 2013 16:54:09 +0000"  >&lt;p&gt;oh i see, remove &apos; &apos;s, and add 0x... done&lt;/p&gt;


&lt;p&gt;patch on 1.2 &amp;#8211; 5465_2.txt&lt;/p&gt;</comment>
                            <comment id="13631102" author="urandom" created="Sat, 13 Apr 2013 17:13:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;My understanding is that we did not: the old format continues to work. What we did do was allow a new format that previously would have errored, and deprecated blob-strings for removal in 2.0.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, that&apos;s what I meant, we introduced a breaking change, 1.2 -&amp;gt; 2.0.  CQL 4, then?&lt;/p&gt;</comment>
                            <comment id="13631119" author="iamaleksey" created="Sat, 13 Apr 2013 18:29:40 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13631178" author="dbrosius" created="Sat, 13 Apr 2013 21:27:34 +0000"  >&lt;p&gt;added commit to cassandra-1.2 as commit a25ac14e0d245f648e97f888ee4b64acc50c76d1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12578588" name="5465.txt" size="561" author="dbrosius" created="Sat, 13 Apr 2013 07:47:09 +0000"/>
                            <attachment id="12578604" name="5465_2.txt" size="856" author="dbrosius" created="Sat, 13 Apr 2013 16:54:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322780</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jovj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>323125</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>