<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:11:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-308] Thrift client forwarding the null keys to the servers</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-308</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Thrift client is suppose to validate the input before it actually sends it to the server but it did not.... &lt;/p&gt;

&lt;p&gt;client logs are like the below: (Java client lib)&lt;br/&gt;
org.apache.thrift.TApplicationException: Internal error processing get_slice&lt;br/&gt;
        at org.apache.thrift.TApplicationException.read(TApplicationException.java:107)&lt;br/&gt;
        at org.apache.cassandra.service.Cassandra$Client.recv_get_slice(Cassandra.java:178)&lt;br/&gt;
        at org.apache.cassandra.service.Cassandra$Client.get_slice(Cassandra.java:154)&lt;br/&gt;
        at com.webex.dms.datastore.DataStoreRead.readObject(DataStoreRead.java:163)&lt;br/&gt;
        at com.webex.dms.repository.ReadDocument.load(ReadDocument.java:87)&lt;br/&gt;
        at com.webex.dms.repository.Document.readBasic(Document.java:307)&lt;/p&gt;

&lt;p&gt;Server Logs are as below:&lt;br/&gt;
DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-1-thread-448&amp;#93;&lt;/span&gt; 2009-07-20 09:27:50,831 CassandraServer.java (line 172) get_slice_from&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-1-thread-448&amp;#93;&lt;/span&gt; 2009-07-20 09:27:50,837 Cassandra.java (line 844) Internal error processing get_slice&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.cassandra.service.ThriftValidation.validateKey(ThriftValidation.java:18)&lt;br/&gt;
        at org.apache.cassandra.service.CassandraServer.readColumnFamily(CassandraServer.java:75)&lt;br/&gt;
        at org.apache.cassandra.service.CassandraServer.get_slice(CassandraServer.java:181)&lt;br/&gt;
        at org.apache.cassandra.service.Cassandra$Processor$get_slice.process(Cassandra.java:838)&lt;br/&gt;
        at org.apache.cassandra.service.Cassandra$Processor.process(Cassandra.java:796)&lt;br/&gt;
        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:252)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&lt;br/&gt;
        at java.lang.Thread.run(Unknown Source)&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Centos 3.0, cassendra trunk, JVM 1.6, tomcat 1.6&lt;/p&gt;</environment>
        <key id="12430972">CASSANDRA-308</key>
            <summary>Thrift client forwarding the null keys to the servers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="vijay2win@yahoo.com">Vijay</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jul 2009 23:54:41 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:35 +0000</updated>
                            <resolved>Thu, 3 Sep 2009 15:59:03 +0000</resolved>
                                        <fixVersion>0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12743246" author="jbellis" created="Fri, 14 Aug 2009 15:39:01 +0000"  >&lt;p&gt;The real fix is for the server to do the validation; we don&apos;t want to rely on the client since there are so many implementations of such widely varying maturity.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch for this to &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-562&quot; title=&quot;Java is inconsistent checking for required fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-562&quot;&gt;&lt;del&gt;THRIFT-562&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12743706" author="sbtourist" created="Sat, 15 Aug 2009 12:50:44 +0000"  >&lt;p&gt;Jonathan,&lt;/p&gt;

&lt;p&gt;so should it, in your opinion, be resolved by patching the CassandraServer?&lt;/p&gt;</comment>
                            <comment id="12743710" author="jbellis" created="Sat, 15 Aug 2009 13:36:14 +0000"  >&lt;p&gt;No.&lt;/p&gt;</comment>
                            <comment id="12743711" author="jbellis" created="Sat, 15 Aug 2009 13:36:48 +0000"  >&lt;p&gt;To clarify: it should be resolved by having the Cassandra.java code generated by Thrift do the checking, not the hand-coded CassandraServer.java.&lt;/p&gt;</comment>
                            <comment id="12748572" author="jbellis" created="Thu, 27 Aug 2009 21:06:36 +0000"  >&lt;p&gt;Making &quot;not optional&quot; imply &quot;required&quot; was apparently too much of a leap for dreiss of Thrift.  (See &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-562&quot; title=&quot;Java is inconsistent checking for required fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-562&quot;&gt;&lt;del&gt;THRIFT-562&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-455&quot; title=&quot;Compiler flag to make optional/required field modifiers compulsory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-455&quot;&gt;THRIFT-455&lt;/a&gt;.)  This patch adds `required` boilerplate to all such fields.&lt;/p&gt;</comment>
                            <comment id="12748852" author="hudson" created="Fri, 28 Aug 2009 15:08:48 +0000"  >&lt;p&gt;Integrated in Cassandra #180 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/180/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/180/&lt;/a&gt;)&lt;br/&gt;
    update to thrift trunk and rename jar after the svn revision (806014).  inline our map typedef to work around regression introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-144&quot; title=&quot;Generated classes should implement Comparable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-144&quot;&gt;&lt;del&gt;THRIFT-144&lt;/del&gt;&lt;/a&gt;.  add slf4j dependencies (required since &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-558&quot; title=&quot;Replace use of log4j by commons-logging in Java library and generated Java code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-558&quot;&gt;&lt;del&gt;THRIFT-558&lt;/del&gt;&lt;/a&gt;).  regenerate thrift structs with new version.&lt;br/&gt;
patch by jbellis for , &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-387&quot; title=&quot;Upgrade to Thrift 2009-08-19+ and introduce dependency on slf4j&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-387&quot;&gt;&lt;del&gt;CASSANDRA-387&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12748922" author="urandom" created="Fri, 28 Aug 2009 17:56:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12748944" author="jbellis" created="Fri, 28 Aug 2009 19:03:03 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="12749119" author="hudson" created="Sat, 29 Aug 2009 12:35:41 +0000"  >&lt;p&gt;Integrated in Cassandra #181 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/181/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/181/&lt;/a&gt;)&lt;br/&gt;
    add &quot;required&quot; to non-optional fields. Thrift sucks.&lt;br/&gt;
patch by jbellis; reviewed by Eric Evans for &lt;/p&gt;</comment>
                            <comment id="12750692" author="jbellis" created="Wed, 2 Sep 2009 21:57:47 +0000"  >&lt;p&gt;still not null checking method parameters&lt;/p&gt;</comment>
                            <comment id="12750693" author="jbellis" created="Wed, 2 Sep 2009 21:58:16 +0000"  >&lt;p&gt;v2 adds null-checking to method parameters, as generated by the patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-575&quot; title=&quot;Allow required modifier in method parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-575&quot;&gt;&lt;del&gt;THRIFT-575&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12751054" author="sammy.yu" created="Thu, 3 Sep 2009 15:25:26 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12751067" author="jbellis" created="Thu, 3 Sep 2009 15:59:03 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12433083">THRIFT-562</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12433573">CASSANDRA-387</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12418442" name="308-v2.patch" size="71527" author="jbellis" created="Wed, 2 Sep 2009 21:58:16 +0000"/>
                            <attachment id="12417933" name="308.patch" size="14034" author="jbellis" created="Thu, 27 Aug 2009 21:06:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19628</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fy53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91129</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>