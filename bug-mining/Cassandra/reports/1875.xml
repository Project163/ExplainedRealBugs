<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:35:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4711] Duplicate column names with DynamicCompositeType</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4711</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I have a column family whose comparator is DynamicCompositeType and validation is CounterColumnType.  During automated testing, there have been occasions where a counter column is created twice, throwing off the query results for the column.&lt;/p&gt;

&lt;p&gt;Doing a &apos;get&apos; via the cli, I see the following output for the row:&lt;/p&gt;

&lt;p&gt;=&amp;gt; (counter=s@language:b@00000001:s@pt_BR, value=198)&lt;br/&gt;
=&amp;gt; (counter=s@language:s@possible, value=200)&lt;br/&gt;
=&amp;gt; (counter=s@language:b@00000001:s@pt_BR, value=0)&lt;/p&gt;

&lt;p&gt;If I print out the byte value of the column names along with their MD5 sum I see:&lt;/p&gt;

&lt;p&gt;Name: [language, java.nio.HeapByteBuffer&lt;span class=&quot;error&quot;&gt;&amp;#91;pos=0 lim=4 cap=4&amp;#93;&lt;/span&gt;, pt_BR]&lt;br/&gt;
Byte array: ffffff8073086c616e67756167650ffffff80620400010ffffff80730570745f42520&lt;br/&gt;
MD5: 2db353a9a72a0d7cb6cb277ac5125653&lt;br/&gt;
Name: &lt;span class=&quot;error&quot;&gt;&amp;#91;language, possible&amp;#93;&lt;/span&gt;&lt;br/&gt;
Byte array: ffffff8073086c616e67756167650ffffff807308706f737369626c650&lt;br/&gt;
MD5: 82cad9b6a65c794e97cf1d4613e2e367&lt;br/&gt;
Name: [language, java.nio.HeapByteBuffer&lt;span class=&quot;error&quot;&gt;&amp;#91;pos=0 lim=4 cap=4&amp;#93;&lt;/span&gt;, pt_BR]&lt;br/&gt;
Byte array: ffffff8073086c616e67756167650ffffff80620400010ffffff80730570745f42520&lt;br/&gt;
MD5: 2db353a9a72a0d7cb6cb277ac5125653&lt;/p&gt;

&lt;p&gt;Unfortunately, I have been unable to duplicate this manually or via a generic test script and our QA department can only duplicate ~25% of the time.&lt;/p&gt;</description>
                <environment>&lt;p&gt;CentOS 5.8 x86_64&lt;br/&gt;
Cassandra 1.1.5&lt;br/&gt;
Hector 1.1-2&lt;/p&gt;</environment>
        <key id="12608897">CASSANDRA-4711</key>
            <summary>Duplicate column names with DynamicCompositeType</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="thrykol">Shane</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Sep 2012 16:35:18 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:26 +0000</updated>
                            <resolved>Mon, 29 Oct 2012 10:14:20 +0000</resolved>
                                        <fixVersion>1.1.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13461969" author="thrykol" created="Mon, 24 Sep 2012 18:20:29 +0000"  >&lt;p&gt;Rough example of how counter column is being used.&lt;/p&gt;</comment>
                            <comment id="13484466" author="thrykol" created="Thu, 25 Oct 2012 20:47:03 +0000"  >&lt;p&gt;Java class which demonstrates unexpected behavior with counter columns.&lt;/p&gt;

&lt;p&gt;Sample output from the CLI is included in inline comment blocks.  Each time I ran the script, the column ordering changed slightly.&lt;/p&gt;</comment>
                            <comment id="13484817" author="slebresne" created="Fri, 26 Oct 2012 09:45:53 +0000"  >&lt;p&gt;This is a bug in the patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3625&quot; title=&quot;Do something about DynamicCompositeType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3625&quot;&gt;&lt;del&gt;CASSANDRA-3625&lt;/del&gt;&lt;/a&gt;. We are mistakenly using ReversedType with our FixedValueComparator but that doesn&apos;t correctly reverse the output. Attaching simple patch to fix.&lt;/p&gt;</comment>
                            <comment id="13484818" author="slebresne" created="Fri, 26 Oct 2012 09:47:14 +0000"  >&lt;p&gt;Note that the patch is against 1.1 but 1.0 would also be affected so we can commit there if we want (the patch probably apply there without modifications).&lt;/p&gt;</comment>
                            <comment id="13484824" author="slebresne" created="Fri, 26 Oct 2012 10:02:29 +0000"  >&lt;p&gt;Oh, and the use of counters has nothing to do with anything so I&apos;ve update the title to reflect that.&lt;/p&gt;</comment>
                            <comment id="13484957" author="thrykol" created="Fri, 26 Oct 2012 14:36:06 +0000"  >&lt;p&gt;Thanks for the quick response on this.  Do you have a time frame for when 1.1.7 is expected to be released?  I&apos;m seeing this issue in a production environment and would like to get the fix in place as quickly as possible.  If the release won&apos;t be happening in the very near future, can you patch this into 1.1.6 as well.  While I can download the source and apply the patch locally, it&apos;d be my preference not to.&lt;/p&gt;</comment>
                            <comment id="13485103" author="jbellis" created="Fri, 26 Oct 2012 18:38:00 +0000"  >&lt;p&gt;+1 on the fix.&lt;/p&gt;

&lt;p&gt;The next release will be 1.1.7, probably in a couple weeks.  If you want a hotfix sooner than that, then rolling your own patched 1.1.6 is your best option.&lt;/p&gt;</comment>
                            <comment id="13485929" author="slebresne" created="Mon, 29 Oct 2012 10:14:20 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                            <comment id="13497335" author="thrykol" created="Wed, 14 Nov 2012 18:41:44 +0000"  >&lt;p&gt;As and FYI, after patching 1.1.6 in my environment I&apos;ve found that some of my unit tests failed (I&apos;m assuming the same would be true for 1.1.7).  Going through the failing tests I found that the logic for my slice ranges had to be modified.  It may be good to put a warning along those lines in the change log.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12550944" name="4711.txt" size="2756" author="slebresne" created="Fri, 26 Oct 2012 09:45:53 +0000"/>
                            <attachment id="12550858" name="DuplicateColumnName.java" size="8557" author="thrykol" created="Thu, 25 Oct 2012 20:47:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251121</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4vr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62903</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>