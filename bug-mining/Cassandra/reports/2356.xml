<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:40:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6033] CQL: allow names for bind variables</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6033</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Currently bind variables are &quot;anonymous&quot;, they&apos;re just a question mark. What this means is that the only reliable way to reference those variables after preparation is through position their position in the query string, which is not excessively user friendly.&lt;/p&gt;

&lt;p&gt;Of course some driver may be tempted to add their own version of named variables, but that forces said driver to parse the query string in the first place, which is something we&apos;ve tried to avoid so far. Besides, this is useful enough that making it part of CQL would make this more consistent amongst driver rather than having everyone coming up with its own syntax.&lt;/p&gt;

&lt;p&gt;I&apos;ll add that because we are already sending column names in the metadata, I believe we can support this without any change to the protocol. The idea would be to support queries like this (happy to discuss the exact syntax):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT * FROM test WHERE key = ?my_key AND time &amp;gt; ?t_low AND time &amp;lt;= ?t_high
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the Cassandra side, the only thing that this would change is that in the result set returned to the client, the column names would be &apos;my_key&apos;, &apos;t_low&apos; and &apos;t_high&apos; respectively rather than &apos;key&apos;, &apos;time&apos; and &apos;time&apos; as they are now.  And so in particular using an anymous variable would be equivalent to using a name one with the name of the CQL column the variable is bound to.&lt;/p&gt;

&lt;p&gt;Driver side, the driver would just have to keep a map of each name to their position in the metadata to provide reliable setter by names.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12668796">CASSANDRA-6033</key>
            <summary>CQL: allow names for bind variables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Sep 2013 15:58:50 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:05 +0000</updated>
                            <resolved>Thu, 19 Sep 2013 10:59:45 +0000</resolved>
                                        <fixVersion>2.0.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13770089" author="jbellis" created="Tue, 17 Sep 2013 22:32:10 +0000"  >&lt;p&gt;ï¿½I&apos;ve already wished for this a few times, but to play devil&apos;s advocate, isn&apos;t it a bit late to change this now that we have multiple drivers in production?  I submit that users have already made their peace with this.&lt;/p&gt;</comment>
                            <comment id="13770523" author="slebresne" created="Wed, 18 Sep 2013 07:14:26 +0000"  >&lt;p&gt;I&apos;ve seen at least a few users asked for something like this on the driver side, so not totally sure everyone is fully happy with the status quo. I mean, if I was convinced that everyone would say &quot;well, that&apos;s not supported, fair enough, I&apos;ll do without it, no biggy&quot;, then I&apos;d agree with you. But my fear is that people will be annoyed and start messing with query strings to try doing the equivalent of this. I&apos;m afraid of drivers doing it all in their own way and being made more fragile by having to parse/search-and-replace the query string.&lt;/p&gt;

&lt;p&gt;Do I wish we&apos;d have done that sooner: sure. But typically my suggestion would be to do that for the protocol v2 only, i.e. change the spec of the protocol to say that the name in the result set is not the name of the CQL3 column, but rather the name of the bind variables. Which by default would be the CQL3 column name. We can do that spec change now, in 2.0.1, so client drivers can know what to expect. I strongly doubt anyone is in production with C* 2.0.0 and the native protocol v2 (if only because it&apos;s buggy in 2.0.0: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6040&quot; title=&quot;Paging filter empty rows a bit too agressively&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6040&quot;&gt;&lt;del&gt;CASSANDRA-6040&lt;/del&gt;&lt;/a&gt;). Then we can ship the syntax change in say 2.0.2: it&apos;s not a very complicated change to make.&lt;/p&gt;</comment>
                            <comment id="13770550" author="slebresne" created="Wed, 18 Sep 2013 08:06:00 +0000"  >&lt;p&gt;Btw, let me add that the name we currently send in the metadata as result of a PREPARE is already not always a proper CQL3 column name. For instance, if you prepare:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;UPDATE foo USING TTL ? SET m[?] = ? WHERE k = 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then the bind variables will be respectively named &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;ttl&amp;#93;&lt;/span&gt;&apos;, &apos;key(m)&apos; and &apos;value(m)&apos;.&lt;/p&gt;

&lt;p&gt;So existing drivers already cannot really assume that the name returned is a true CQL3 column name. Just to say that I doubt we&apos;ll break any existing driver by making this change, if that is the fear.&lt;/p&gt;</comment>
                            <comment id="13770898" author="slebresne" created="Wed, 18 Sep 2013 15:45:14 +0000"  >&lt;p&gt;Attaching patch for this, with the small variation that the final syntax uses :name rather than ?name as that&apos;s a lot more common.&lt;/p&gt;

&lt;p&gt;The CQL doc and protocol spec would probably need some updating but I&apos;ll do that upon commit if we&apos;re good on the patch.&lt;/p&gt;</comment>
                            <comment id="13771201" author="iamaleksey" created="Wed, 18 Sep 2013 20:26:51 +0000"  >&lt;p&gt;Can you update for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4210&quot; title=&quot;Support for variadic parameters list for &amp;quot;in clause&amp;quot; in prepared cql query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4210&quot;&gt;&lt;del&gt;CASSANDRA-4210&lt;/del&gt;&lt;/a&gt;? I&apos;ve ghetto-rebased with apply --reject, but that&apos;s not enough.&lt;/p&gt;</comment>
                            <comment id="13771708" author="slebresne" created="Thu, 19 Sep 2013 08:58:07 +0000"  >&lt;p&gt;Rebased patch attached&lt;/p&gt;</comment>
                            <comment id="13771727" author="iamaleksey" created="Thu, 19 Sep 2013 09:27:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13771796" author="slebresne" created="Thu, 19 Sep 2013 10:59:45 +0000"  >&lt;p&gt;Committed (with doc updates), thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12604011" name="6033.txt" size="26756" author="slebresne" created="Thu, 19 Sep 2013 08:58:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>348730</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1o4r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349028</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>