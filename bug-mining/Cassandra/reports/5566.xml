<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:18:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16259] tablehistograms cause ArrayIndexOutOfBoundsException</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16259</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After upgrading some nodes in our cluster from 3.11.8 to 3.11.9 an error appeared on the upgraded nodes when trying to access &lt;b&gt;tablehistograms&lt;/b&gt;. The same command run on our .8 nodes return as expected, only the upgraded .9 nodes fail. Not all tables fail when queried, but about 90% of them do.&lt;/p&gt;

&lt;p&gt;We use Datastax MCAC which appears to query histograms every 30 seconds, this outputs to the system.log:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;WARN  [insights-3-1] 2020-11-09 01:11:22,331 UnixSocketClient.java:830 - Error reporting:
java.lang.ArrayIndexOutOfBoundsException: 115
    at org.apache.cassandra.metrics.TableMetrics.combineHistograms(TableMetrics.java:261) ~[apache-cassandra-3.11.9.jar:3.11.9]
    at org.apache.cassandra.metrics.TableMetrics.access$000(TableMetrics.java:48) ~[apache-cassandra-3.11.9.jar:3.11.9]
    at org.apache.cassandra.metrics.TableMetrics$11.getValue(TableMetrics.java:376) ~[apache-cassandra-3.11.9.jar:3.11.9]
    at org.apache.cassandra.metrics.TableMetrics$11.getValue(TableMetrics.java:373) ~[apache-cassandra-3.11.9.jar:3.11.9]
    at com.datastax.mcac.UnixSocketClient.writeMetric(UnixSocketClient.java:839) [datastax-mcac-agent.jar:na]
    at com.datastax.mcac.UnixSocketClient.access$700(UnixSocketClient.java:78) [datastax-mcac-agent.jar:na]
    at com.datastax.mcac.UnixSocketClient$2.lambda$onGaugeAdded$0(UnixSocketClient.java:626) ~[datastax-mcac-agent.jar:na]
    at com.datastax.mcac.UnixSocketClient.writeGroup(UnixSocketClient.java:819) [datastax-mcac-agent.jar:na]
    at com.datastax.mcac.UnixSocketClient.lambda$restartMetricReporting$2(UnixSocketClient.java:798) [datastax-mcac-agent.jar:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_272]
    at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:126) ~[netty-all-4.0.44.Final.jar:4.0.44.Final]
    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:399) ~[netty-all-4.0.44.Final.jar:4.0.44.Final]
    at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:307) ~[netty-all-4.0.44.Final.jar:4.0.44.Final]
    at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:131) ~[netty-all-4.0.44.Final.jar:4.0.44.Final]
    at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:144) ~[netty-all-4.0.44.Final.jar:4.0.44.Final]
    at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_272]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Manually trying a histogram from the CLI:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ nodetool tablehistograms logdata log_height_index
error: 115
-- StackTrace --
java.lang.ArrayIndexOutOfBoundsException: 115
	at org.apache.cassandra.metrics.TableMetrics.combineHistograms(TableMetrics.java:261)
	at org.apache.cassandra.metrics.TableMetrics.access$000(TableMetrics.java:48)
	at org.apache.cassandra.metrics.TableMetrics$11.getValue(TableMetrics.java:376)
	at org.apache.cassandra.metrics.TableMetrics$11.getValue(TableMetrics.java:373)
	at org.apache.cassandra.metrics.CassandraMetricsRegistry$JmxGauge.getValue(CassandraMetricsRegistry.java:250)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:276)
	at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:112)
	at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:46)
	at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
	at com.sun.jmx.mbeanserver.PerInterface.getAttribute(PerInterface.java:83)
	at com.sun.jmx.mbeanserver.MBeanSupport.getAttribute(MBeanSupport.java:206)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:647)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:678)
	at com.sun.jmx.remote.security.MBeanServerAccessController.getAttribute(MBeanServerAccessController.java:320)
	at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1445)
	at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)
	at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1408)
	at javax.management.remote.rmi.RMIConnectionImpl.getAttribute(RMIConnectionImpl.java:639)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)
	at sun.rmi.transport.Transport$1.run(Transport.java:200)
	at sun.rmi.transport.Transport$1.run(Transport.java:197)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.rmi.transport.Transport.serviceCall(Transport.java:196)
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:573)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:834)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:688)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:687)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13339660">CASSANDRA-16259</key>
            <summary>tablehistograms cause ArrayIndexOutOfBoundsException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blerer">Benjamin Lerer</assignee>
                                    <reporter username="Justin Montgomery">Justin Montgomery</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Nov 2020 05:22:11 +0000</created>
                <updated>Sun, 3 Jan 2021 16:58:25 +0000</updated>
                            <resolved>Wed, 2 Dec 2020 14:03:08 +0000</resolved>
                                        <fixVersion>2.2.20</fixVersion>
                    <fixVersion>3.0.24</fixVersion>
                    <fixVersion>3.11.10</fixVersion>
                    <fixVersion>4.0-beta4</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Observability/Metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17228993" author="flightc" created="Tue, 10 Nov 2020 05:41:39 +0000"  >&lt;p&gt;Noting here that this came out of a &lt;a href=&quot;https://the-asf.slack.com/archives/CJZLTM05A/p1604884605220500&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;discussion on ASF Slack in the #cassandra channel&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17229791" author="rtib" created="Wed, 11 Nov 2020 07:03:47 +0000"  >&lt;p&gt;We have the same issue. Noteworthy observation is that not all tables are affected, but it&apos;s not the table schema, i.e. we have the same tables in multiple keyspaces, some of them fail histograms in one keyspace, not in the other.&lt;/p&gt;</comment>
                            <comment id="17229794" author="flightc" created="Wed, 11 Nov 2020 07:07:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rtib&quot; class=&quot;user-hover&quot; rel=&quot;rtib&quot;&gt;rtib&lt;/a&gt;&#160;could you please confirm your version of Cassandra for completeness?&lt;/p&gt;</comment>
                            <comment id="17229826" author="rtib" created="Wed, 11 Nov 2020 08:14:49 +0000"  >&lt;p&gt;These log messages started after upgrade Apache Cassandra from 3.11.8 to 3.11.9, running Datastax MCAC-Agent 0.1.11 (later upgraded to 0.1.12, without noticeable change).&lt;/p&gt;</comment>
                            <comment id="17229937" author="rtib" created="Wed, 11 Nov 2020 12:16:41 +0000"  >&lt;p&gt;Scrubbing the affected table makes histograms work again.&lt;/p&gt;</comment>
                            <comment id="17229978" author="blerer" created="Wed, 11 Nov 2020 13:19:45 +0000"  >&lt;p&gt;There is effectively a bug in the code &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.11/src/java/org/apache/cassandra/metrics/TableMetrics.java#L259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. If an SSTable histogram contains less buckets than the one of a previous SSTable, the call to &lt;tt&gt;nextBucket&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;;&lt;/tt&gt;  &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.11/src/java/org/apache/cassandra/metrics/TableMetrics.java#L261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; will trigger an &lt;tt&gt;ArrayIndexOutOfBoundsException&lt;/tt&gt;.&lt;br/&gt;
That code has been wrong since it was introduced in 2014 so the error has been caused by some change somewhere else in the code base.&lt;br/&gt;
I will fix that problem and dug a bit deeper to find out which change made us hit that issue. &lt;/p&gt;</comment>
                            <comment id="17230783" author="blerer" created="Thu, 12 Nov 2020 16:59:41 +0000"  >&lt;p&gt;I guess that the change that made us hit the issue is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15164&quot; title=&quot;Overflowed Partition Cell Histograms Can Prevent Compactions from Executing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15164&quot;&gt;&lt;del&gt;CASSANDRA-15164&lt;/del&gt;&lt;/a&gt; where we changed the default number of buckets in the &lt;tt&gt;CellPerPartitionCountHistogram&lt;/tt&gt;. Due to that it is possible to have some SSTables (the one created with the previous version) with a smaller amount of buckets than others. &lt;/p&gt;

&lt;p&gt;That would match the index &lt;tt&gt;115&lt;/tt&gt; seen in the stack trace as the default number was raised from &lt;tt&gt;114&lt;/tt&gt; to &lt;tt&gt;118&lt;/tt&gt;. &lt;/p&gt;</comment>
                            <comment id="17231238" author="rtib" created="Fri, 13 Nov 2020 08:10:16 +0000"  >&lt;p&gt;Well, that would explain why scrubbing the table fixed it.&lt;/p&gt;

&lt;p&gt;If I understand the change within &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15164&quot; title=&quot;Overflowed Partition Cell Histograms Can Prevent Compactions from Executing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15164&quot;&gt;&lt;del&gt;CASSANDRA-15164&lt;/del&gt;&lt;/a&gt; right, then the storage format of SSTable statistics has changed, which should also bump the SSTable version, shouldn&apos;t it?&lt;/p&gt;</comment>
                            <comment id="17231379" author="blerer" created="Fri, 13 Nov 2020 11:02:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;If I understand the change within &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15164&quot; title=&quot;Overflowed Partition Cell Histograms Can Prevent Compactions from Executing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15164&quot;&gt;&lt;del&gt;CASSANDRA-15164&lt;/del&gt;&lt;/a&gt; right, then the storage format of SSTable statistics has changed, which should also bump the SSTable version, shouldn&apos;t it?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The storage format did not change. The encoding was already &lt;tt&gt;&amp;lt;number_of_buckets&amp;gt;&amp;lt;bucket_value&amp;gt;&amp;#42;&lt;/tt&gt;. The old code is able to read the statistics produced by the new one. The problem is only at the metric level where C* try to merge some SSTable histograms that have a different number of buckets with some buggy code.&lt;/p&gt;

&lt;p&gt;When you scrub the old SSTable, it is recreated with the new number of buckets ensuring that you will not hit the TableMetric bug again. &lt;/p&gt;</comment>
                            <comment id="17233036" author="justin montgomery" created="Mon, 16 Nov 2020 19:56:47 +0000"  >&lt;p&gt;So is the current workaround to upgrade a node to 3.11.9 and then scrub all tables (or take the time to find which tables are causing errors and scrub just those)? Incidentally I upgraded to .9 and ran a repair and then a cleanup, but perhaps that doesn&apos;t necessarily rewrite the sstables because I still see the error&lt;/p&gt;</comment>
                            <comment id="17233382" author="rtib" created="Tue, 17 Nov 2020 07:38:12 +0000"  >&lt;p&gt;Not in general. First, the bug is hitting only tables having both old and new SSTables, so it may happen, that a table having old SSTables only will work until it eventually get a new SSTable. Thus, finding out which tables are affected now, doesn&apos;t mean that in the future no more tables could suffer from this bug. Second, be aware of the fact that scrubbing a table using LCS will reset all SSTables to L0, which may have performance implications. Third, you would need to scrub all nodes, which could lead to data loss, therefore a full repair after the scrub is advisable on the node before scrubbing the next node.&lt;/p&gt;</comment>
                            <comment id="17233709" author="blerer" created="Tue, 17 Nov 2020 16:27:04 +0000"  >&lt;p&gt;Sorry, I am sick since a couple of day and do not have the energy to dig into the code.&lt;br/&gt;
If I am not mistaken the problem can be solve by triggering an index summary redistribution using JMX (&lt;tt&gt;IndexSummaryManager.redistributeSummaries()&lt;/tt&gt;). See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5519&quot; title=&quot;Reduce index summary memory use for cold sstables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5519&quot;&gt;&lt;del&gt;CASSANDRA-5519&lt;/del&gt;&lt;/a&gt; for a better understanding of the impact.&lt;br/&gt;
Hope it help.&lt;/p&gt;</comment>
                            <comment id="17238560" author="rtib" created="Wed, 25 Nov 2020 07:07:20 +0000"  >&lt;p&gt;No, redistributing index summaries does not affect the current issue. Get well soon.&lt;/p&gt;</comment>
                            <comment id="17239159" author="blerer" created="Thu, 26 Nov 2020 09:57:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rtib&quot; class=&quot;user-hover&quot; rel=&quot;rtib&quot;&gt;rtib&lt;/a&gt; Sorry, my brain was not working properly. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17239181" author="blerer" created="Thu, 26 Nov 2020 10:38:29 +0000"  >&lt;p&gt;While working on a fix for this bug I hit another issue that impact the 3.0, 3.X and 4.0 versions. On some scenario the number of cells for a row is counted twice.&lt;/p&gt;

&lt;p&gt;We count the number of cells per partition using the &lt;tt&gt;BigTableWriter.StatsCollector&lt;/tt&gt; which will increment the number of cells when &lt;tt&gt;onPartitionClose&lt;/tt&gt; is called. &lt;tt&gt;onPartitionClose&lt;/tt&gt; is called when the transformed &lt;tt&gt;UnfilteredRowIterator&lt;/tt&gt; is closed by the &lt;tt&gt;try-with-resources&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/io/sstable/format/big/BigTableWriter.java#L214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;BigTableWriter.append&lt;/a&gt;. Unfortunately, If the &lt;tt&gt;UnfilteredRowIterator&lt;/tt&gt; is an instance of &lt;tt&gt;UnfilteredRows&lt;/tt&gt; &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/transform/Transformation.java#L138&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Transformation.apply&lt;/a&gt; will not create a wrapper around the &lt;tt&gt;UnfilteredRowIterator&lt;/tt&gt; but will simply add the &lt;tt&gt;Transformation&lt;/tt&gt; to the list of transformations associated to that iterator.&lt;br/&gt;
When a memtable is flush the &lt;tt&gt;UnfilteredRowIterator&lt;/tt&gt; is opened in a &lt;tt&gt;try-with-resources&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/Memtable.java#L473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FlushRunnable:writeSortedContent&lt;/a&gt; before being passed to &lt;tt&gt;BigTableWriter|append&lt;/tt&gt;. If the  &lt;tt&gt;UnfilteredRowIterator&lt;/tt&gt; is an instance of &lt;tt&gt;UnfilteredRows&lt;/tt&gt;, &lt;tt&gt;StatsCollector#onPartitionClose&lt;/tt&gt; will be called twice and the cells for the row will be counted twice.&lt;/p&gt;

&lt;p&gt;The patch contains a change that ensure that we do not hit that problem by ensuring that if we call &lt;tt&gt;close&lt;/tt&gt; on a class inheriting from &lt;tt&gt;BaseIterator&lt;/tt&gt; only the first close will be processed and the following one will be ignored.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Branches &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Test results &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/apache/cassandra/pull/835&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/blerer/cassandra/72/workflows/77c51c04-5a76-4530-99bd-cb1604f58931&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/blerer/cassandra/72/workflows/ab7be933-239c-41fb-a907-fa76a859ed99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/apache/cassandra/pull/836&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/blerer/cassandra/69/workflows/9fb4aca3-3b41-4798-a921-07b4c7026b7e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/apache/cassandra/pull/837&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/blerer/cassandra/70/workflows/b0ef5b25-0a4f-4ddb-92cd-b4c76f7908ea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/apache/cassandra/pull/838&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/blerer/cassandra/71/workflows/d24c6595-9c8c-4893-86e0-ef3b15966f02&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</comment>
                            <comment id="17242081" author="jasonstack" created="Wed, 2 Dec 2020 06:38:18 +0000"  >&lt;p&gt;LGTM, thanks for the fix.&lt;/p&gt;</comment>
                            <comment id="17242381" author="blerer" created="Wed, 2 Dec 2020 14:03:08 +0000"  >&lt;p&gt;The fix for the histogram merge of the table metrics was committed into cassandra-2.2 at e96b60bd9f814ee1a911e8820b7e255d23e2f24e and merged int cassandra-3.0, cassandra-3.11 and trung &lt;br/&gt;
The fix for the counting of partition cells was committed into cassandra-3.0 at 6baeb9247b9156c08305326a77d8c27510d6cb40 and merged into cassandra-3.11 and trunk &lt;/p&gt;</comment>
                            <comment id="17242382" author="blerer" created="Wed, 2 Dec 2020 14:04:00 +0000"  >&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;Bereng&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt; for the review &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kfbc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bereng]]></customfieldvalue>
        <customfieldvalue><![CDATA[jasonstack]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332983">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/e96b60bd9f814ee1a911e8820b7e255d23e2f24e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/e96b60bd9f814ee1a911e8820b7e255d23e2f24e&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;The patch add some new unit tests to TableMetricsTest to check that the merging of histogram is working properly and that the metrics using that mechanism are returning the correct numbers.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>