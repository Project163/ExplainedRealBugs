<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:20:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2538] CQL: NPE running SELECT with an IN clause</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2538</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;b&gt;Test Case to Run&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cqlsh&amp;gt; select * from users where key in (&apos;user2&apos;, &apos;user3&apos;);
Internal application error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;&lt;b&gt;Test Setup&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE COLUMNFAMILY users (
  KEY varchar PRIMARY KEY,
  password varchar);

INSERT INTO users (KEY, password) VALUES (&apos;user1&apos;, &apos;ch@ngem3a&apos;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;&lt;b&gt;Log Files&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR [RequestResponseStage:17] 2011-04-21 23:36:41,600 AbstractCassandraDaemon.java (line 112) Fatal exception in thread Thread[RequestResponseStage:17,5,main]
java.lang.AssertionError
	at org.apache.cassandra.service.ReadCallback.response(ReadCallback.java:127)
	at org.apache.cassandra.net.ResponseVerbHandler.doVerb(ResponseVerbHandler.java:49)
	at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:72)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:636)
ERROR [RequestResponseStage:17] 2011-04-21 23:36:41,600 AbstractCassandraDaemon.java (line 112) Fatal exception in thread Thread[RequestResponseStage:17,5,main]
java.lang.AssertionError
	at org.apache.cassandra.service.ReadCallback.response(ReadCallback.java:127)
	at org.apache.cassandra.net.ResponseVerbHandler.doVerb(ResponseVerbHandler.java:49)
	at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:72)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:636)
ERROR [pool-2-thread-5] 2011-04-21 23:37:12,026 Cassandra.java (line 4082) Internal error processing execute_cql_query
java.lang.NullPointerException
	at org.apache.cassandra.cql.WhereClause.and(WhereClause.java:59)
	at org.apache.cassandra.cql.WhereClause.&amp;lt;init&amp;gt;(WhereClause.java:44)
	at org.apache.cassandra.cql.CqlParser.whereClause(CqlParser.java:816)
	at org.apache.cassandra.cql.CqlParser.selectStatement(CqlParser.java:502)
	at org.apache.cassandra.cql.CqlParser.query(CqlParser.java:191)
	at org.apache.cassandra.cql.QueryProcessor.getStatement(QueryProcessor.java:834)
	at org.apache.cassandra.cql.QueryProcessor.process(QueryProcessor.java:463)
	at org.apache.cassandra.thrift.CassandraServer.execute_cql_query(CassandraServer.java:1134)
	at org.apache.cassandra.thrift.Cassandra$Processor$execute_cql_query.process(Cassandra.java:4072)
	at org.apache.cassandra.thrift.Cassandra$Processor.process(Cassandra.java:2889)
	at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:187)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:636)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12504935">CASSANDRA-2538</key>
            <summary>CQL: NPE running SELECT with an IN clause</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="urandom">Eric Evans</assignee>
                                    <reporter username="cdaw">Cathy Daw</reporter>
                        <labels>
                            <label>cql</label>
                    </labels>
                <created>Thu, 21 Apr 2011 23:41:22 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:01 +0000</updated>
                            <resolved>Tue, 26 Apr 2011 22:12:57 +0000</resolved>
                                        <fixVersion>0.8.0 beta 2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13023072" author="jbellis" created="Fri, 22 Apr 2011 01:42:21 +0000"  >&lt;p&gt;Eric, can you make it so CQL is more clear about not supporting IN, without internal errors?&lt;/p&gt;</comment>
                            <comment id="13023082" author="urandom" created="Fri, 22 Apr 2011 02:36:40 +0000"  >&lt;p&gt;This should result in a syntax error like any other mis-statement, but the NPE was beating it to the punch.  Patch attached.&lt;/p&gt;</comment>
                            <comment id="13023432" author="cdaw" created="Fri, 22 Apr 2011 22:20:11 +0000"  >&lt;p&gt;This is just a consistency thing, but the documentation is misleading.&lt;/p&gt;

&lt;p&gt;The DELETE documentation shows you can use an &apos;IN&apos; clause:&lt;br/&gt;
DELETE &lt;span class=&quot;error&quot;&gt;&amp;#91;COLUMNS&amp;#93;&lt;/span&gt; FROM &amp;lt;COLUMN FAMILY&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;USING &amp;lt;CONSISTENCY&amp;gt;&amp;#93;&lt;/span&gt; WHERE KEY IN (keyname1, keyname2);&lt;/p&gt;

&lt;p&gt;The example for DELETE uses UPDATE, so I assumed &apos;IN&apos; would work for DELETE/UPDATE/SELECT.&lt;br/&gt;
UPDATE ... WHERE KEY IN (keyname1, keyname2)&lt;/p&gt;</comment>
                            <comment id="13023469" author="jbellis" created="Sat, 23 Apr 2011 00:17:03 +0000"  >&lt;p&gt;Totally didn&apos;t know we support IN for DELETE. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Would prefer to fix by offering IN for for the other statements as well. The Antlr doesn&apos;t look too daunting w/ DELETE as an example (knock on wood). Can take a stab at that tomorrow.&lt;/p&gt;</comment>
                            <comment id="13023493" author="urandom" created="Sat, 23 Apr 2011 03:12:51 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Totally didn&apos;t know we support IN for DELETE. &lt;/p&gt;

&lt;p&gt;Would prefer to fix by offering IN for for the other statements as well. The Antlr doesn&apos;t look too daunting w/ DELETE as an example (knock on wood). Can take a stab at that tomorrow.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is &lt;tt&gt;multiget_slice()&lt;/tt&gt; / &lt;tt&gt;multiget_count()&lt;/tt&gt; and was intentionally omitted (remember?).  Not saying this is decision that can&apos;t be revisited, just reminding.&lt;/p&gt;

&lt;p&gt;Oh, and if we do move forward, it&apos;s post-0.8, we&apos;re in a feature-freeze. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13024794" author="jbellis" created="Mon, 25 Apr 2011 13:43:56 +0000"  >&lt;p&gt;Okay, created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2553&quot; title=&quot;Add IN support to CQL SELECT, UPDATE statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2553&quot;&gt;&lt;del&gt;CASSANDRA-2553&lt;/del&gt;&lt;/a&gt; for adding IN support to 0.8.1.&lt;/p&gt;

&lt;p&gt;+1 on the NPE fix.&lt;/p&gt;</comment>
                            <comment id="13025455" author="cdaw" created="Tue, 26 Apr 2011 21:46:34 +0000"  >&lt;p&gt;The patch generates this message:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; select * from users where KEY in (&lt;span class=&quot;code-quote&quot;&gt;&apos;cathy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;ed&apos;&lt;/span&gt;);
Bad Request: line 1:30 mismatched input &lt;span class=&quot;code-quote&quot;&gt;&apos;in&apos;&lt;/span&gt; expecting set &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13025471" author="urandom" created="Tue, 26 Apr 2011 22:10:23 +0000"  >&lt;p&gt;This says that it&apos;s a bad request, a problem at line 1, column 30, where it encountered mismatched input in the form of the word IN.  This is because `KEY IN ...&apos; is not supported.&lt;/p&gt;</comment>
                            <comment id="13025473" author="urandom" created="Tue, 26 Apr 2011 22:12:57 +0000"  >&lt;p&gt;committed.&lt;/p&gt;</comment>
                            <comment id="13025477" author="cdaw" created="Tue, 26 Apr 2011 22:17:31 +0000"  >&lt;p&gt;Sorry if I wasn&apos;t clear. The patch passed in testing because it no longer generated an NPE and gave an ERROR message. I included the message just for info.&lt;/p&gt;</comment>
                            <comment id="13025502" author="hudson" created="Tue, 26 Apr 2011 22:56:43 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #43 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Cassandra-0.8/43/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/Cassandra-0.8/43/&lt;/a&gt;)&lt;br/&gt;
    NPE running SELECT with an IN clause&lt;/p&gt;

&lt;p&gt;Patch by eevans; reviewed by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2538&quot; title=&quot;CQL: NPE running SELECT with an IN clause&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2538&quot;&gt;&lt;del&gt;CASSANDRA-2538&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12477069" name="ASF.LICENSE.NOT.GRANTED--v1-0001-CASSANDRA-2538-NPE-running-SELECT-with-an-IN-clause.txt" size="948" author="urandom" created="Fri, 22 Apr 2011 02:33:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gbyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93367</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>cdaw</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[cdaw]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>