<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:45:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7093] ConfigHelper.setInputColumnFamily incompatible with upper-cased keyspaces since 2.0.7</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7093</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;We have a keyspace starting with an upper-case character: Visitors.&lt;br/&gt;
We are trying to run a map reduce job on one of the column family of this keyspace.&lt;/p&gt;

&lt;p&gt;To specify the keyspace it seems we have to use:&lt;br/&gt;
org.apache.cassandra.hadoop.&lt;br/&gt;
ConfigHelper.setInputColumnFamily(conf, keyspace, columnFamily);&lt;/p&gt;


&lt;p&gt;If we do:&lt;br/&gt;
ConfigHelper.setInputColumnFamily(conf, &quot;Visitors&quot;, columnFamily); we get:&lt;/p&gt;

&lt;p&gt;com.datastax.driver.core.exceptions.InvalidQueryException: Keyspace &apos;visitors&apos; does not exist&lt;br/&gt;
    at com.datastax.driver.core.exceptions.InvalidQueryException.copy(InvalidQueryException.java:35)&lt;br/&gt;
    at com.datastax.driver.core.DefaultResultSetFuture.extractCauseFromExecutionException(DefaultResultSetFuture.java:256)&lt;br/&gt;
    at com.datastax.driver.core.SessionManager.setKeyspace(SessionManager.java:335)&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;

&lt;p&gt;And if we do:&lt;br/&gt;
ConfigHelper.setInputColumnFamily(conf, &quot;\&quot;Visitors\&quot;&quot;, columnFamily); we get:&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.RuntimeException: InvalidRequestException(why:No such keyspace: &quot;Visitors&quot;)&lt;br/&gt;
    at org.apache.cassandra.hadoop.AbstractColumnFamilyInputFormat.getRangeMap(AbstractColumnFamilyInputFormat.java:339)&lt;br/&gt;
    at org.apache.cassandra.hadoop.AbstractColumnFamilyInputFormat.getSplits(AbstractColumnFamilyInputFormat.java:125)&lt;br/&gt;
    at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:962)&lt;br/&gt;
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979)&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;This is working just fine if the keyspace is lowercase.&lt;br/&gt;
And it was working just fine with Cassandra 2.0.6. But with Cassandra 2.0.7, and the addition of Datastax&apos;s java driver in the dependencies, I am getting this error.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12710646">CASSANDRA-7093</key>
            <summary>ConfigHelper.setInputColumnFamily incompatible with upper-cased keyspaces since 2.0.7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alexliu68">Alex Liu</assignee>
                                    <reporter username="Maxime Nay">Maxime Nay</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Apr 2014 20:39:54 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:47 +0000</updated>
                            <resolved>Tue, 20 May 2014 16:15:52 +0000</resolved>
                                        <fixVersion>2.0.8</fixVersion>
                    <fixVersion>2.1 rc1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13981594" author="brandon.williams" created="Fri, 25 Apr 2014 21:00:35 +0000"  >&lt;p&gt;Sounds like you&apos;re using CqlInputFormat where you should be using ColumnFamilyInputFormat&lt;/p&gt;</comment>
                            <comment id="13981609" author="maxime nay" created="Fri, 25 Apr 2014 21:08:04 +0000"  >&lt;p&gt;I am using CqlInputFormat on purpose. It isn&apos;t supposed to work?&lt;/p&gt;</comment>
                            <comment id="13981623" author="brandon.williams" created="Fri, 25 Apr 2014 21:18:47 +0000"  >&lt;p&gt;It will if your keyspace was created in cql.&lt;/p&gt;</comment>
                            <comment id="13981624" author="maxime nay" created="Fri, 25 Apr 2014 21:19:57 +0000"  >&lt;p&gt;It is, I guess, since we used OpsCenter to create the Keyspace. Plus I am using Datastax java driver with CQL to insert/read data from the CFs in the keyspace, and it is working just fine.&lt;/p&gt;</comment>
                            <comment id="13981646" author="brandon.williams" created="Fri, 25 Apr 2014 21:33:33 +0000"  >&lt;p&gt;Ok, then we have a problem.  You say &apos;since 2.0.7&apos;, what version were you on before where it worked?&lt;/p&gt;</comment>
                            <comment id="13981663" author="maxime nay" created="Fri, 25 Apr 2014 21:42:25 +0000"  >&lt;p&gt;As said in the issue, everything is working fine for us with 2.0.6.&lt;br/&gt;
I think this bug is due to a conflict in the way of handling the keyspace string. Datastax java driver is &quot;lower-casing&quot; everything, and if you want to use it with a keyspace containing upper-cased letters, you need to quote it. Whereas Cassandra is not lower-casing it and just use the raw string.&lt;/p&gt;</comment>
                            <comment id="13981673" author="brandon.williams" created="Fri, 25 Apr 2014 21:53:19 +0000"  >&lt;p&gt;Looks like a regression from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6311&quot; title=&quot;Add CqlRecordReader to take advantage of native CQL pagination&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6311&quot;&gt;&lt;del&gt;CASSANDRA-6311&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13981702" author="alexliu68" created="Fri, 25 Apr 2014 22:24:43 +0000"  >&lt;p&gt;Patch is attached. quoted keyspace in CqlRecordReader and keep no change for other old code.  To use it, set ConfigHelper.setInputColumnFamily(conf, keyspace, columnfamily) without quoting the name.&lt;/p&gt;</comment>
                            <comment id="13981713" author="brandon.williams" created="Fri, 25 Apr 2014 22:37:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pkolaczk&quot; class=&quot;user-hover&quot; rel=&quot;pkolaczk&quot;&gt;pkolaczk&lt;/a&gt; to review&lt;/p&gt;</comment>
                            <comment id="13981735" author="alexliu68" created="Fri, 25 Apr 2014 22:54:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://datastax-oss.atlassian.net/browse/JAVA-317&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://datastax-oss.atlassian.net/browse/JAVA-317&lt;/a&gt; is created, once it&apos;s fixed in Cassandra java driver, we can pull it in and don&apos;t handle the case sensitivity at Hadoop code.&lt;/p&gt;</comment>
                            <comment id="13981737" author="maxime nay" created="Fri, 25 Apr 2014 22:59:00 +0000"  >&lt;p&gt;I think this has already been reported in the past, and not considered as a bug.&lt;br/&gt;
&lt;a href=&quot;https://groups.google.com/a/lists.datastax.com/forum/#!searchin/java-driver-user/case$20mixed/java-driver-user/sWx4U-VJteg/EsjOrixJHP0J&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://groups.google.com/a/lists.datastax.com/forum/#!searchin/java-driver-user/case$20mixed/java-driver-user/sWx4U-VJteg/EsjOrixJHP0J&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13983606" author="alexliu68" created="Mon, 28 Apr 2014 21:41:13 +0000"  >&lt;p&gt;The attached patch quotes the keyspace name at Hadoop side. Since Driver invalidates JAVA_317, we have to fix it at C* Hadoop side.&lt;/p&gt;</comment>
                            <comment id="13998797" author="pkolaczk" created="Thu, 15 May 2014 14:14:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14003572" author="brandon.williams" created="Tue, 20 May 2014 16:15:52 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="14004128" author="alexliu68" created="Tue, 20 May 2014 23:36:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; I was told that Java driver doesn&apos;t need to quote the KS and Table name, but TIL it needs quoted, I attach one more patch here. I can open another ticket if it can&apos;t be committed to this ticket.&lt;/p&gt;</comment>
                            <comment id="14004142" author="brandon.williams" created="Wed, 21 May 2014 00:03:12 +0000"  >&lt;p&gt;Committed this as well.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12645908" name="7093-quote-table-name.txt" size="1315" author="alexliu68" created="Tue, 20 May 2014 23:33:44 +0000"/>
                            <attachment id="12642033" name="7093.txt" size="3386" author="alexliu68" created="Fri, 25 Apr 2014 22:24:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[alexliu68]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v01b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389213</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326472">2.0.7</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>pkolaczk</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[pkolaczk]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326472">2.0.7</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>