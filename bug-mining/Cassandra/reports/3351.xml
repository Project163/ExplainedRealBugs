<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:50:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8677] rpc_interface and listen_interface generate NPE on startup when specified interface doesn&apos;t exist</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8677</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This is just a buggy UI bit.&lt;/p&gt;

&lt;p&gt;Initially the error I got was this which is redundant and not well formatted.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR 20:12:55 Exception encountered during startup
java.lang.ExceptionInInitializerError: null
Fatal configuration error; unable to start. See log for stacktrace.
	at org.apache.cassandra.config.DatabaseDescriptor.&amp;lt;clinit&amp;gt;(DatabaseDescriptor.java:108) ~[main/:na]
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:122) [main/:na]
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:479) [main/:na]
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:571) [main/:na]
java.lang.ExceptionInInitializerError: null
Fatal configuration error; unable to start. See log for stacktrace.
	at org.apache.cassandra.config.DatabaseDescriptor.&amp;lt;clinit&amp;gt;(DatabaseDescriptor.java:108)
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:122)
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:479)
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:571)
Exception encountered during startup: null
Fatal configuration error; unable to start. See log for stacktrace.
ERROR 20:12:55 Exception encountered during startup
java.lang.ExceptionInInitializerError: null
Fatal configuration error; unable to start. See log for stacktrace.
	at org.apache.cassandra.config.DatabaseDescriptor.&amp;lt;clinit&amp;gt;(DatabaseDescriptor.java:108) ~[main/:na]
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:122) [main/:na]
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:479) [main/:na]
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:571) [main/:na]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This has no description of the error that occurred. After logging the exception.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException: null
	at org.apache.cassandra.config.DatabaseDescriptor.applyConfig(DatabaseDescriptor.java:347) ~[main/:na]
	at org.apache.cassandra.config.DatabaseDescriptor.&amp;lt;clinit&amp;gt;(DatabaseDescriptor.java:102) ~[main/:na]
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:122) [main/:na]
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:479) [main/:na]
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:571) [main/:na]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exceptions thrown in the DatabaseDescriptor should log in a useful way.&lt;/p&gt;

&lt;p&gt;This particular error should generate a message without a stack trace since it is easily recognized.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12769737">CASSANDRA-8677</key>
            <summary>rpc_interface and listen_interface generate NPE on startup when specified interface doesn&apos;t exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aweisberg">Ariel Weisberg</assignee>
                                    <reporter username="aweisberg">Ariel Weisberg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Jan 2015 20:21:18 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:22 +0000</updated>
                            <resolved>Tue, 27 Jan 2015 12:38:34 +0000</resolved>
                                        <fixVersion>2.1.3</fixVersion>
                    <fixVersion>2.2.0 beta 1</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14290177" author="aweisberg" created="Fri, 23 Jan 2015 22:59:58 +0000"  >&lt;p&gt;ConfigurationException now has a boolean field indicating whether the stack trace should be displayed and I opted in a few places where suppressing stack traces looks harmless. I am very conservative about suppressing stack traces because not getting a stack trace when you need one in the field can be a disaster and ConfigurationException is widely used.&lt;/p&gt;

&lt;p&gt;I also fixed an issue where a format error in the YAML would cause the parser to fail, but the error from the parser is overridden by an NPE in JVMStabilityInspector due to the stability inspector trying to access config the parser needed to generate.&lt;/p&gt;

&lt;p&gt;CassandraDaemon now unwraps the exceptions that propagate out of DatabaseDescriptor&apos;s static initializer. It also avoids printing the stack trace an extra time to both the log and stderr/stdout although it still prints to stderr and stdout once. &lt;/p&gt;

&lt;p&gt;I took a look at 2.1 and 2.0 and it looks like things are working ok. I tested 2.1 and the JVMStabilityInspector circular dependency doesn&apos;t occur.&lt;/p&gt;</comment>
                            <comment id="14290701" author="aweisberg" created="Sat, 24 Jan 2015 16:39:27 +0000"  >&lt;p&gt;It turns out 2.1 still has the issue with the NPE and a non-existent interface so here is a patch for 2.1. 2.0 doesn&apos;t have the problematic configuration parameter.&lt;/p&gt;</comment>
                            <comment id="14291843" author="snazy" created="Mon, 26 Jan 2015 14:06:24 +0000"  >&lt;p&gt;Mostly LGTM - some minors I&apos;d like to have included in the patch(es):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;would love to see a &lt;tt&gt;hasMoreElements()&lt;/tt&gt; check before &lt;tt&gt;*Address = addrs.nextElement()&lt;/tt&gt; and throw an appropriate exception&lt;/li&gt;
	&lt;li&gt;maybe merge the code &lt;tt&gt;listen_address&lt;/tt&gt; and &lt;tt&gt;rpc_address&lt;/tt&gt; into a single method - it looks very similar. E.g. &lt;tt&gt;private static InetAddress networkInterfaceFromConfiguration(String confValue, String confField)&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14292114" author="aweisberg" created="Mon, 26 Jan 2015 17:18:51 +0000"  >&lt;p&gt;Updated patch incorporating Robert&apos;s feedback.&lt;/p&gt;</comment>
                            <comment id="14293437" author="snazy" created="Tue, 27 Jan 2015 12:38:34 +0000"  >&lt;p&gt;LGTM&lt;br/&gt;
committed with minor code formatting as 3e5edb8&lt;/p&gt;</comment>
                            <comment id="14328661" author="molsson" created="Fri, 20 Feb 2015 07:55:03 +0000"  >&lt;p&gt;This patch creates a NPE in 2.1 when using rpc_interface since the variable listenAddress gets set instead of rpcAddress.&lt;/p&gt;

&lt;p&gt;Another note is that listenAddress is set in getNetworkInterfaceAddress, is that intended?&lt;/p&gt;</comment>
                            <comment id="14328728" author="slebresne" created="Fri, 20 Feb 2015 09:24:21 +0000"  >&lt;p&gt;Note: we&apos;ll fix that in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8839&quot; title=&quot;DatabaseDescriptor throws NPE when rpc_interface is used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8839&quot;&gt;&lt;del&gt;CASSANDRA-8839&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12694579" name="8677-2.1.patch" size="3266" author="aweisberg" created="Mon, 26 Jan 2015 17:18:51 +0000"/>
                            <attachment id="12694580" name="8677.patch" size="30091" author="aweisberg" created="Mon, 26 Jan 2015 17:18:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aweisberg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24qnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>snazy</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[snazy]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>