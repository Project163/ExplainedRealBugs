<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:42:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5701] Apache.Cassandra.Cassandra.get_count will disconnect but not throw InvalidRequestException when column family is not exist.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5701</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When I use get_count interface which is defined in Cassandra.thrift, the Cassandra Server(1.2.4) close the connection from Client when column family is not exist in that keyspace but not throw InvalidRequestException. &lt;/p&gt;

&lt;p&gt;It seemed the get_count method in cassandra.thrift.CassandraServer.java did not validate parameters(ThriftValidation.validateColumnFamily) in this method.&lt;/p&gt;


&lt;p&gt;system.log:&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RPC-Thread:3373&amp;#93;&lt;/span&gt; 2013-06-26 14:23:09,264 TNonblockingServer.java (line 638) Unexpected exception while invoking!&lt;br/&gt;
java.lang.IllegalArgumentException: Unknown table/cf pair (Keyspace1.Standard)&lt;br/&gt;
	at org.apache.cassandra.db.Table.getColumnFamilyStore(Table.java:165)&lt;br/&gt;
	at org.apache.cassandra.thrift.CassandraServer.get_count(CassandraServer.java:471)&lt;br/&gt;
	at org.apache.cassandra.thrift.Cassandra$Processor$get_count.getResult(Cassandra.java:3381)&lt;br/&gt;
	at org.apache.cassandra.thrift.Cassandra$Processor$get_count.getResult(Cassandra.java:3369)&lt;br/&gt;
	at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:32)&lt;br/&gt;
	at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:34)&lt;br/&gt;
	at org.apache.thrift.server.TNonblockingServer$FrameBuffer.invoke(TNonblockingServer.java:632)&lt;br/&gt;
	at org.apache.cassandra.thrift.CustomTHsHaServer$Invocation.run(CustomTHsHaServer.java:109)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&lt;br/&gt;
	at java.lang.Thread.run(Unknown Source)&lt;/p&gt;


&lt;p&gt;Please check this bug, thanks!&lt;/p&gt;</description>
                <environment>&lt;p&gt;cassandra server : 1.2.4&lt;br/&gt;
and cassandra1.2.5 has same bug.&lt;br/&gt;
client : C# client&lt;/p&gt;</environment>
        <key id="12654890">CASSANDRA-5701</key>
            <summary>Apache.Cassandra.Cassandra.get_count will disconnect but not throw InvalidRequestException when column family is not exist.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lyubent">Lyuben Todorov</assignee>
                                    <reporter username="yuemaoxing">yuemaoxing</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Jun 2013 08:41:57 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:10 +0000</updated>
                            <resolved>Fri, 20 Dec 2013 20:40:06 +0000</resolved>
                                        <fixVersion>2.0.5</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13727231" author="yuemaoxing" created="Fri, 2 Aug 2013 02:39:41 +0000"  >&lt;p&gt;Uh...&lt;/p&gt;</comment>
                            <comment id="13739154" author="yuemaoxing" created="Wed, 14 Aug 2013 02:21:30 +0000"  >&lt;p&gt;Is it not important?&lt;/p&gt;</comment>
                            <comment id="13833879" author="lyubent" created="Wed, 27 Nov 2013 15:41:22 +0000"  >&lt;p&gt;Added a catch clause to handle IllegalArgumentException and throw a InvalidRequestException which will be picked up by the client.&lt;/p&gt;</comment>
                            <comment id="13833882" author="lyubent" created="Wed, 27 Nov 2013 15:44:25 +0000"  >&lt;p&gt;This is also reproducible in 2.0.x&lt;/p&gt;</comment>
                            <comment id="13834004" author="jbellis" created="Wed, 27 Nov 2013 18:18:53 +0000"  >&lt;p&gt;patch is on the doInsert method; still need fix for get_count?.  also, build fails b/c you&apos;re mixing thrift and internal IRE classes.&lt;/p&gt;</comment>
                            <comment id="13853462" author="jbellis" created="Thu, 19 Dec 2013 23:36:25 +0000"  >&lt;p&gt;Where were we on this?  ISTR having some issues applying the patch.  You were going to post a branch?&lt;/p&gt;</comment>
                            <comment id="13853870" author="lyubent" created="Fri, 20 Dec 2013 11:13:03 +0000"  >&lt;p&gt;Here&apos;s the &lt;a href=&quot;https://github.com/lyubent/cassandra/tree/5701&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt; I think the problem was that the patch was added to trunk, but this branch is on cassandra-2.0 and should build properly. &lt;/p&gt;</comment>
                            <comment id="13854538" author="jbellis" created="Fri, 20 Dec 2013 20:40:06 +0000"  >&lt;p&gt;LGTM, committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12616062" name="5701_cassandra-2.0.patch" size="719" author="lyubent" created="Wed, 27 Nov 2013 15:42:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[lyubent]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335167</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ltcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>