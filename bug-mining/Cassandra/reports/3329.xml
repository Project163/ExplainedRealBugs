<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:50:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8355] NPE when passing wrong argument in ALTER TABLE statement</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8355</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When I tried to change the caching strategy of a table, I provided a wrong argument &lt;tt&gt;&apos;rows_per_partition&apos; : ALL&lt;/tt&gt; with unquoted ALL. Cassandra returned a SyntaxError, which is good, but it seems it was because of a NullPointerException.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Howto&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE foo (k &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; primary key);
ALTER TABLE foo WITH caching = {&lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;all&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt; : ALL};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Output&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;ErrorMessage code=2000 [Syntax error in CQL query] message=&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed parsing statement: [ALTER TABLE foo WITH caching = {&lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;all&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt; : ALL};] reason: NullPointerException &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;Cassandra 2.1.2&lt;/p&gt;</environment>
        <key id="12756979">CASSANDRA-8355</key>
            <summary>NPE when passing wrong argument in ALTER TABLE statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blerer">Benjamin Lerer</assignee>
                                    <reporter username="pingtimeout">Pierre Laporte</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Nov 2014 14:01:06 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:27 +0000</updated>
                            <resolved>Wed, 14 Jan 2015 16:22:33 +0000</resolved>
                                        <fixVersion>2.1.3</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14269252" author="blerer" created="Thu, 8 Jan 2015 11:58:26 +0000"  >&lt;p&gt;The patch fix the problem in the &lt;tt&gt;Cql.g&lt;/tt&gt; file and add a unit test to verify the behavior.&lt;/p&gt;</comment>
                            <comment id="14269255" author="blerer" created="Thu, 8 Jan 2015 11:59:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt; could you review?&lt;/p&gt;</comment>
                            <comment id="14269265" author="snazy" created="Thu, 8 Jan 2015 12:30:24 +0000"  >&lt;p&gt;Sure&lt;/p&gt;</comment>
                            <comment id="14269283" author="snazy" created="Thu, 8 Jan 2015 13:11:47 +0000"  >&lt;p&gt;Note: the offending NPE is thrown at&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
	at org.apache.cassandra.cql3.functions.FunctionCall$Raw.toString(FunctionCall.java:172)
	at java.lang.String.valueOf(String.java:2981)
	at java.lang.StringBuilder.append(StringBuilder.java:131)
	at org.apache.cassandra.cql3.CqlParser.convertPropertyMap(CqlParser.java:327)
	at org.apache.cassandra.cql3.CqlParser.property(CqlParser.java:12082)
	at org.apache.cassandra.cql3.CqlParser.properties(CqlParser.java:11988)
	at org.apache.cassandra.cql3.CqlParser.alterTableStatement(CqlParser.java:5231)
	at org.apache.cassandra.cql3.CqlParser.cqlStatement(CqlParser.java:784)
	at org.apache.cassandra.cql3.CqlParser.query(CqlParser.java:365)
	at org.apache.cassandra.cql3.QueryProcessor.parseStatement(QueryProcessor.java:535)
	at org.apache.cassandra.cql3.QueryProcessor.getStatement(QueryProcessor.java:510)
	at org.apache.cassandra.cql3.QueryProcessor.process(QueryProcessor.java:251)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you investigate whether the same issue can occur in &lt;tt&gt;unaliasedSelector&lt;/tt&gt; (~ line 296 in Cql.g)? On a quick code view and some experiments in cqlsh I think it cannot, but 4 eyes see more &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Otherwise +1 without any objective&lt;/p&gt;</comment>
                            <comment id="14269736" author="blerer" created="Thu, 8 Jan 2015 17:45:40 +0000"  >&lt;p&gt;I had a look at it and run some tests. I think it is fine.&lt;br/&gt;
Thanks for the review.&lt;/p&gt;</comment>
                            <comment id="14277154" author="iamaleksey" created="Wed, 14 Jan 2015 16:22:33 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12690831" name="CASSANDRA-8355.txt" size="2710" author="blerer" created="Thu, 8 Jan 2015 11:58:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22nin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12328841">2.1.2</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>snazy</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[snazy]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>