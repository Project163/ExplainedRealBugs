<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:28:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18747] Test failure: Fix assertion error AssertionError: Unknown keyspace system_auth\n\tat org.apache.cassandra.db.Keyspace.&lt;init&gt;(Keyspace.java:324)\n\tat org.apache.cassandra.db.Keyspace.lambda$open$0(Keyspace.java:162)</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18747</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I&apos;ve been seeing this assertion error in different tests lately.&lt;/p&gt;

&lt;p&gt;Full error message:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
failed on teardown with &lt;span class=&quot;code-quote&quot;&gt;&quot;Unexpected error found in node logs (see stdout &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; full details). Errors: [[node2] &lt;span class=&quot;code-quote&quot;&gt;&apos;ERROR [PendingRangeCalculator:1] 2023-08-11 16:35:14,445 JVMStabilityInspector.java:70 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[PendingRangeCalculator:1,5,PendingRangeCalculator]\njava.lang.AssertionError: Unknown keyspace system_auth\n\tat org.apache.cassandra.db.Keyspace.&amp;lt;init&amp;gt;(Keyspace.java:324)\n\tat org.apache.cassandra.db.Keyspace.lambda$open$0(Keyspace.java:162)\n\tat org.apache.cassandra.utils.concurrent.LoadingMap.blockingLoadIfAbsent(LoadingMap.java:105)\n\tat org.apache.cassandra.schema.Schema.maybeAddKeyspaceInstance(Schema.java:251)\n\tat org.apache.cassandra.db.Keyspace.open(Keyspace.java:162)\n\tat org.apache.cassandra.db.Keyspace.open(Keyspace.java:151)\n\tat org.apache.cassandra.service.PendingRangeCalculatorService.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$1(PendingRangeCalculatorService.java:58)\n\tat org.apache.cassandra.concurrent.SingleThreadExecutorPlus$AtLeastOnce.run(SingleThreadExecutorPlus.java:60)\n\tat org.apache.cassandra.concurrent.ExecutionFailure$1.run(ExecutionFailure.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\tat java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829)&apos;&lt;/span&gt;]&quot;&lt;/span&gt; Unexpected error found in node logs (see stdout &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; full details). Errors: [[node2] &lt;span class=&quot;code-quote&quot;&gt;&apos;ERROR [PendingRangeCalculator:1] 2023-08-11 16:35:14,445 JVMStabilityInspector.java:70 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[PendingRangeCalculator:1,5,PendingRangeCalculator]\njava.lang.AssertionError: Unknown keyspace system_auth\n\tat org.apache.cassandra.db.Keyspace.&amp;lt;init&amp;gt;(Keyspace.java:324)\n\tat org.apache.cassandra.db.Keyspace.lambda$open$0(Keyspace.java:162)\n\tat org.apache.cassandra.utils.concurrent.LoadingMap.blockingLoadIfAbsent(LoadingMap.java:105)\n\tat org.apache.cassandra.schema.Schema.maybeAddKeyspaceInstance(Schema.java:251)\n\tat org.apache.cassandra.db.Keyspace.open(Keyspace.java:162)\n\tat org.apache.cassandra.db.Keyspace.open(Keyspace.java:151)\n\tat org.apache.cassandra.service.PendingRangeCalculatorService.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$1(PendingRangeCalculatorService.java:58)\n\tat org.apache.cassandra.concurrent.SingleThreadExecutorPlus$AtLeastOnce.run(SingleThreadExecutorPlus.java:60)\n\tat org.apache.cassandra.concurrent.ExecutionFailure$1.run(ExecutionFailure.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\tat java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829)&apos;&lt;/span&gt;]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Example failures:&lt;br/&gt;
test_failed_snitch_update_property_file_snitch - &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/2475/workflows/2086619e-0f21-464b-a866-84aca516b5e5/jobs/36716/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/2475/workflows/2086619e-0f21-464b-a866-84aca516b5e5/jobs/36716/tests&lt;/a&gt;&lt;br/&gt;
test_gcgs_validation - &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-trunk/1666/testReport/junit/dtest.materialized_views_test/TestMaterializedViews/test_gcgs_validation/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/job/Cassandra-trunk/1666/testReport/junit/dtest.materialized_views_test/TestMaterializedViews/test_gcgs_validation/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13547008">CASSANDRA-18747</key>
            <summary>Test failure: Fix assertion error AssertionError: Unknown keyspace system_auth\n\tat org.apache.cassandra.db.Keyspace.&lt;init&gt;(Keyspace.java:324)\n\tat org.apache.cassandra.db.Keyspace.lambda$open$0(Keyspace.java:162)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlewandowski">Jacek Lewandowski</assignee>
                                    <reporter username="edimitrova">Ekaterina Dimitrova</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Aug 2023 19:17:42 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:57 +0000</updated>
                            <resolved>Thu, 19 Oct 2023 11:16:01 +0000</resolved>
                                        <fixVersion>4.1.4</fixVersion>
                    <fixVersion>5.0-alpha2</fixVersion>
                    <fixVersion>5.0</fixVersion>
                    <fixVersion>5.1</fixVersion>
                                    <component>Cluster/Schema</component>
                    <component>Test/dtest/python</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="30000">8h 20m</timespent>
                                <comments>
                            <comment id="17764876" author="edimitrova" created="Wed, 13 Sep 2023 20:55:13 +0000"  >&lt;p&gt;I haven&apos;t seen this one recently, and It was seen before very often. Though trying to reproduce test_failed_snitch_update_property_file_snitch on current 5.0 and the commit where I saw it, I cannot do it running it hundreds of times (500).&lt;/p&gt;

&lt;p&gt;The Jenkins link is expired. I tried to find the run in nightlies to check in the logs what happened - build 16666 is missing.&lt;/p&gt;

&lt;p&gt;I will try with the other test mentioned.&#160;&lt;/p&gt;</comment>
                            <comment id="17765211" author="edimitrova" created="Thu, 14 Sep 2023 14:47:24 +0000"  >&lt;p&gt;I did not manage to reproduce the issue with the second test in 500 runs on top of a commit from the time when the ticket was raised.&lt;/p&gt;

&lt;p&gt;I will try to dig more into Butler for other examples and hopefully builds we can find still in nightlies.&#160;&lt;/p&gt;</comment>
                            <comment id="17765374" author="edimitrova" created="Thu, 14 Sep 2023 21:52:54 +0000"  >&lt;p&gt;I cannot do any grep for nightlies; it just hangs, or I can find a failing build with this error in the past 30 (in Butler in Jenkins), and I cannot reproduce it.&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;Bereng&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandonwilliams&quot; class=&quot;user-hover&quot; rel=&quot;brandonwilliams&quot;&gt;brandonwilliams&lt;/a&gt; anyone of you with a recipe for dealing with nightlies? It just hangs for me.&#160;&lt;/p&gt;

&lt;p&gt;A long time ago, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt; gave this on another ticket:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
find Cassandra-trunk-dtest*/label=cassandra,split=* -name nosetests.xml -exec grep -q ${DTEST_CLASS} {} \; -exec grep -l &lt;span class=&quot;code-quote&quot;&gt;&quot;name=\&quot;&lt;/span&gt;${DTEST_NAME}\&lt;span class=&quot;code-quote&quot;&gt;&quot; time=\&quot;&lt;/span&gt;[0-9.]*\&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt;&amp;lt;error message&quot;&lt;/span&gt; {} \;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I tried it with the two test names mentioned in this ticket on trunk, but I got &quot;no matches found: Cassandra-trunk-dtest*/label=cassandra,split=*&quot;. Perhaps something changed in time.&#160;&lt;/p&gt;

&lt;p&gt;What do I do wrong? Any ideas?&lt;/p&gt;</comment>
                            <comment id="17765460" author="bereng" created="Fri, 15 Sep 2023 06:00:06 +0000"  >&lt;p&gt;If you check the trunk runs id and the trunk-dtest runs you&apos;ll see they are 211 apart more or less. Go into nightlies trunk-dtest &lt;a href=&quot;https://nightlies.apache.org/cassandra/trunk/Cassandra-trunk-dtest-novnode/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;folder&lt;/a&gt; around id 1455, download the previous/later 5 folders and with some luck you&apos;ll have the logs you need. My 2cts&lt;/p&gt;</comment>
                            <comment id="17765676" author="edimitrova" created="Fri, 15 Sep 2023 14:46:03 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;Bereng&lt;/a&gt;&#160;, it was valuable advice. I actually realized I can go to this &lt;a href=&quot;https://nightlies.apache.org/cassandra/ci-cassandra.apache.org/job/Cassandra-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;link&lt;/a&gt;&#160;starting from&#160;&lt;a href=&quot;https://nightlies.apache.org/cassandra/ci-cassandra.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra.apache.org/&lt;/a&gt;&#160;on the home page of nightlies.&#160;Even if the Jenkins exact failure page is expired, I was able to find &lt;a href=&quot;https://nightlies.apache.org/cassandra/ci-cassandra.apache.org/job/Cassandra-trunk-dtest/1451/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this page&lt;/a&gt; where we see the same test name failure we discuss in the ticket and the dtests run being associated with build 1666. Then I go to the list you pointed to me and find the logs for tests run 1451.&#160;&lt;/p&gt;

&lt;p&gt;Now I need to know the split which was not visible on the &lt;a href=&quot;https://nightlies.apache.org/cassandra/ci-cassandra.apache.org/job/Cassandra-trunk-dtest/1451/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;mentioned page&lt;/a&gt;, but clicking on the expired Jenkins page I can see in the &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-trunk-dtest/1451/jdk=jdk_11_latest,label=cassandra-dtest,split=28/testReport/junit/dtest.materialized_views_test/TestMaterializedViews/test_gcgs_validation/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;URL&lt;/a&gt;&#160;- split28. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&#160;&lt;/p&gt;

&lt;p&gt;HA! Actually the URL to the expired Jenkins page also points which is the test run we need - 1451, not only the split! We can use that in the future. The tricky part is that URL is available if we go through the dtest job page, not through the main page of failures - the one pasted in the ticket.&#160;&lt;/p&gt;</comment>
                            <comment id="17765701" author="bereng" created="Fri, 15 Sep 2023 15:36:53 +0000"  >&lt;p&gt;Yep those are the breadcrumbs to follow &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17765710" author="edimitrova" created="Fri, 15 Sep 2023 16:02:09 +0000"  >&lt;p&gt;We can add to our Build Lead page that when people open a ticket for a test failure based on Jenkins - they should add the build number for the specific test suite job, not the main cassandra build and split numbers. This will make it easier to investigate later, using nightlies logs if we cannot reproduce. &#160;&lt;/p&gt;</comment>
                            <comment id="17765756" author="edimitrova" created="Fri, 15 Sep 2023 18:04:36 +0000"  >&lt;p&gt;These are the logs we need for this ticket - &lt;a href=&quot;https://nightlies.apache.org/cassandra/trunk/Cassandra-trunk-dtest/1451/Cassandra-trunk-dtest/jdk=jdk_11_latest,label=cassandra-dtest,split=28/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://nightlies.apache.org/cassandra/trunk/Cassandra-trunk-dtest/1451/Cassandra-trunk-dtest/jdk=jdk_11_latest,label=cassandra-dtest,split=28/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is for test_gcgs_validation failure&lt;/p&gt;</comment>
                            <comment id="17765816" author="edimitrova" created="Fri, 15 Sep 2023 19:05:01 +0000"  >&lt;p&gt;I also saw today &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-trunk/1708/testReport/dtest.materialized_views_test/TestMaterializedViews/test_drop_table/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/job/Cassandra-trunk/1708/testReport/dtest.materialized_views_test/TestMaterializedViews/test_drop_table/&lt;/a&gt;&#160;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Error Message
failed on teardown with &lt;span class=&quot;code-quote&quot;&gt;&quot;Failed: Unexpected error found in node logs (see stdout &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; full details). Errors: [[node2] &lt;span class=&quot;code-quote&quot;&gt;&apos;ERROR [PendingRangeCalculator:1] 2023-09-15 13:30:52,532 JVMStabilityInspector.java:70 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[PendingRangeCalculator:1,5,PendingRangeCalculator]\njava.lang.AssertionError: Unknown keyspace system_traces\n\tat org.apache.cassandra.db.Keyspace.&amp;lt;init&amp;gt;(Keyspace.java:324)\n\tat org.apache.cassandra.db.Keyspace.lambda$open$0(Keyspace.java:162)\n\tat org.apache.cassandra.utils.concurrent.LoadingMap.blockingLoadIfAbsent(LoadingMap.java:105)\n\tat org.apache.cassandra.schema.Schema.maybeAddKeyspaceInstance(Schema.java:251)\n\tat org.apache.cassandra.db.Keyspace.open(Keyspace.java:162)\n\tat org.apache.cassandra.db.Keyspace.open(Keyspace.java:151)\n\tat org.apache.cassandra.service.PendingRangeCalculatorService.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$1(PendingRangeCalculatorService.java:58)\n\tat org.apache.cassandra.concurrent.SingleThreadExecutorPlus$AtLeastOnce.run(SingleThreadExecutorPlus.java:60)\n\tat org.apache.cassandra.concurrent.ExecutionFailure$1.run(ExecutionFailure.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\tat java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829)&apos;&lt;/span&gt;]&quot;&lt;/span&gt;

Stacktrace
Unexpected error found in node logs (see stdout &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; full details). Errors: [[node2] &lt;span class=&quot;code-quote&quot;&gt;&apos;ERROR [PendingRangeCalculator:1] 2023-09-15 13:30:52,532 JVMStabilityInspector.java:70 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[PendingRangeCalculator:1,5,PendingRangeCalculator]\njava.lang.AssertionError: Unknown keyspace system_traces\n\tat org.apache.cassandra.db.Keyspace.&amp;lt;init&amp;gt;(Keyspace.java:324)\n\tat org.apache.cassandra.db.Keyspace.lambda$open$0(Keyspace.java:162)\n\tat org.apache.cassandra.utils.concurrent.LoadingMap.blockingLoadIfAbsent(LoadingMap.java:105)\n\tat org.apache.cassandra.schema.Schema.maybeAddKeyspaceInstance(Schema.java:251)\n\tat org.apache.cassandra.db.Keyspace.open(Keyspace.java:162)\n\tat org.apache.cassandra.db.Keyspace.open(Keyspace.java:151)\n\tat org.apache.cassandra.service.PendingRangeCalculatorService.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$1(PendingRangeCalculatorService.java:58)\n\tat org.apache.cassandra.concurrent.SingleThreadExecutorPlus$AtLeastOnce.run(SingleThreadExecutorPlus.java:60)\n\tat org.apache.cassandra.concurrent.ExecutionFailure$1.run(ExecutionFailure.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\tat java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829)&apos;&lt;/span&gt;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17765856" author="edimitrova" created="Fri, 15 Sep 2023 21:18:17 +0000"  >&lt;p&gt;So from the logs from nightlies we can see the following race is happening on startup of node 3:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:32,992 DefaultSchemaUpdateHandler.java:221 - Applying schema change due to received mutations: SchemaTransformationResult{2e847089-a5be-3705-a1aa-4a7f9b3ebe36 --&amp;gt; d03783d7-b468-3c1a-82f1-8e30b2edde8b, diff=KeyspacesDiff{created=[KeyspaceMetadata{name=system_auth, kind=REGULAR, params=KeyspaceParams{durable_writes=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, replication=ReplicationParams{class=org.apache.cassandra.locator.SimpleStrategy, replication_factor=1}}, tables=[system_auth.cidr_groups, system_auth.cidr_permissions, system_auth.identity_to_role, system_auth.network_permissions, system_auth.resource_role_permissons_index, system_auth.role_members, system_auth.role_permissions, system_auth.roles], views=[], functions=[], types=[]}], dropped=[], altered=[]}}
DEBUG [MigrationStage:1] 2023-08-10 18:39:32,993 DefaultSchemaUpdateHandler.java:259 - Schema updated: SchemaTransformationResult{2e847089-a5be-3705-a1aa-4a7f9b3ebe36 --&amp;gt; d03783d7-b468-3c1a-82f1-8e30b2edde8b, diff=KeyspacesDiff{created=[KeyspaceMetadata{name=system_auth, kind=REGULAR, params=KeyspaceParams{durable_writes=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, replication=ReplicationParams{class=org.apache.cassandra.locator.SimpleStrategy, replication_factor=1}}, tables=[system_auth.cidr_groups, system_auth.cidr_permissions, system_auth.identity_to_role, system_auth.network_permissions, system_auth.resource_role_permissons_index, system_auth.role_members, system_auth.role_permissions, system_auth.roles], views=[], functions=[], types=[]}], dropped=[], altered=[]}}
DEBUG [PendingRangeCalculator:1] 2023-08-10 18:39:32,997 TokenMetadata.java:876 - Starting pending range calculation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_traces
DEBUG [PendingRangeCalculator:1] 2023-08-10 18:39:32,997 TokenMetadata.java:881 - Pending range calculation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_traces completed (took: 0ms)
DEBUG [PendingRangeCalculator:1] 2023-08-10 18:39:32,997 TokenMetadata.java:876 - Starting pending range calculation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_distributed
DEBUG [PendingRangeCalculator:1] 2023-08-10 18:39:32,997 TokenMetadata.java:881 - Pending range calculation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_distributed completed (took: 0ms)
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:32,998 Keyspace.java:366 - Creating replication strategy system_auth params KeyspaceParams{durable_writes=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, replication=ReplicationParams{class=org.apache.cassandra.locator.SimpleStrategy, replication_factor=1}}
DEBUG [MigrationStage:1] 2023-08-10 18:39:32,998 Keyspace.java:370 - New replication settings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; keyspace system_auth - invalidating disk boundary caches
ERROR [PendingRangeCalculator:1] 2023-08-10 18:39:33,000 JVMStabilityInspector.java:70 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[PendingRangeCalculator:1,5,PendingRangeCalculator]
java.lang.AssertionError: Unknown keyspace system_auth
&#160; &#160; at org.apache.cassandra.db.Keyspace.&amp;lt;init&amp;gt;(Keyspace.java:324)
&#160; &#160; at org.apache.cassandra.db.Keyspace.lambda$open$0(Keyspace.java:162)
&#160; &#160; at org.apache.cassandra.utils.concurrent.LoadingMap.blockingLoadIfAbsent(LoadingMap.java:105)
&#160; &#160; at org.apache.cassandra.schema.Schema.maybeAddKeyspaceInstance(Schema.java:251)
&#160; &#160; at org.apache.cassandra.db.Keyspace.open(Keyspace.java:162)
&#160; &#160; at org.apache.cassandra.db.Keyspace.open(Keyspace.java:151)
&#160; &#160; at org.apache.cassandra.service.PendingRangeCalculatorService.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$1(PendingRangeCalculatorService.java:58)
&#160; &#160; at org.apache.cassandra.concurrent.SingleThreadExecutorPlus$AtLeastOnce.run(SingleThreadExecutorPlus.java:60)
&#160; &#160; at org.apache.cassandra.concurrent.ExecutionFailure$1.run(ExecutionFailure.java:133)
&#160; &#160; at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
&#160; &#160; at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
&#160; &#160; at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
&#160; &#160; at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829)
DEBUG [GossipStage:1] 2023-08-10 18:39:33,002 MigrationCoordinator.java:428 - Reported schema d03783d7-b468-3c1a-82f1-8e30b2edde8b at endpoint /127.0.0.1:7000
INFO &#160;[GossipStage:1] 2023-08-10 18:39:33,006 TokenMetadata.java:539 - Updating topology &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /127.0.0.1:7000
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:33,008 ColumnFamilyStore.java:493 - Initializing system_auth.cidr_groups
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,011 DiskBoundaryManager.java:54 - Refreshing disk boundary cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.cidr_groups
INFO &#160;[GossipStage:1] 2023-08-10 18:39:33,010 TokenMetadata.java:539 - Updating topology &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /127.0.0.1:7000
DEBUG [PendingRangeCalculator:1] 2023-08-10 18:39:33,026 HeapUtils.java:133 - Heap dump creation on uncaught exceptions is disabled.
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,034 DiskBoundaryManager.java:93 - Got local ranges [] (ringVersion = 5)
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,034 DiskBoundaryManager.java:57 - Updating boundaries from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; to DiskBoundaries{directories=[DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data0}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data1}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data2}], positions=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ringVersion=5, directoriesVersion=0} &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.cidr_groups
INFO &#160;[GossipStage:1] 2023-08-10 18:39:33,034 Gossiper.java:1467 - Node /127.0.0.2:7000 is now part of the cluster
DEBUG [GossipStage:1] 2023-08-10 18:39:33,038 StorageService.java:3187 - Node /127.0.0.2:7000 state NORMAL, token [-149492677599243657, -2026557007112229685, -3846561308092176084, -4910902297865239480, -6169322889008892514, -8291017789011127624, 1019462245579770721, 2068586045908961809, 3004499218700477229, 3420136878272117109, 4631817224944098254, 5029140077292811045, 6287560793238254133, 7321861439913658500, 7748147941194787890, 9098349767769465773]
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:33,055 ColumnFamilyStore.java:493 - Initializing system_auth.cidr_permissions
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,058 DiskBoundaryManager.java:54 - Refreshing disk boundary cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.cidr_permissions
DEBUG [GossipStage:1] 2023-08-10 18:39:33,060 StorageService.java:3097 - New node /127.0.0.2:7000 at token -149492677599243657
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,061 DiskBoundaryManager.java:93 - Got local ranges [] (ringVersion = 5)
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,061 DiskBoundaryManager.java:57 - Updating boundaries from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; to DiskBoundaries{directories=[DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data0}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data1}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data2}], positions=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ringVersion=5, directoriesVersion=0} &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.cidr_permissions
DEBUG [GossipStage:1] 2023-08-10 18:39:33,061 StorageService.java:3097 - New node /127.0.0.2:7000 at token -2026557007112229685
DEBUG [GossipStage:1] 2023-08-10 18:39:33,062 StorageService.java:3097 - New node /127.0.0.2:7000 at token -3846561308092176084
DEBUG [GossipStage:1] 2023-08-10 18:39:33,062 StorageService.java:3097 - New node /127.0.0.2:7000 at token -4910902297865239480
DEBUG [GossipStage:1] 2023-08-10 18:39:33,063 StorageService.java:3097 - New node /127.0.0.2:7000 at token -6169322889008892514
DEBUG [GossipStage:1] 2023-08-10 18:39:33,065 StorageService.java:3097 - New node /127.0.0.2:7000 at token -8291017789011127624
DEBUG [GossipStage:1] 2023-08-10 18:39:33,065 StorageService.java:3097 - New node /127.0.0.2:7000 at token 1019462245579770721
DEBUG [GossipStage:1] 2023-08-10 18:39:33,066 StorageService.java:3097 - New node /127.0.0.2:7000 at token 2068586045908961809
DEBUG [GossipStage:1] 2023-08-10 18:39:33,066 StorageService.java:3097 - New node /127.0.0.2:7000 at token 3004499218700477229
DEBUG [GossipStage:1] 2023-08-10 18:39:33,066 StorageService.java:3097 - New node /127.0.0.2:7000 at token 3420136878272117109
DEBUG [GossipStage:1] 2023-08-10 18:39:33,066 StorageService.java:3097 - New node /127.0.0.2:7000 at token 4631817224944098254
DEBUG [GossipStage:1] 2023-08-10 18:39:33,066 StorageService.java:3097 - New node /127.0.0.2:7000 at token 5029140077292811045
DEBUG [GossipStage:1] 2023-08-10 18:39:33,066 StorageService.java:3097 - New node /127.0.0.2:7000 at token 6287560793238254133
DEBUG [GossipStage:1] 2023-08-10 18:39:33,066 StorageService.java:3097 - New node /127.0.0.2:7000 at token 7321861439913658500
DEBUG [GossipStage:1] 2023-08-10 18:39:33,066 StorageService.java:3097 - New node /127.0.0.2:7000 at token 7748147941194787890
DEBUG [GossipStage:1] 2023-08-10 18:39:33,066 StorageService.java:3097 - New node /127.0.0.2:7000 at token 9098349767769465773
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:33,080 ColumnFamilyStore.java:493 - Initializing system_auth.identity_to_role
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,083 DiskBoundaryManager.java:54 - Refreshing disk boundary cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.identity_to_role
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,084 DiskBoundaryManager.java:93 - Got local ranges [] (ringVersion = 6)
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,085 DiskBoundaryManager.java:57 - Updating boundaries from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; to DiskBoundaries{directories=[DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data0}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data1}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data2}], positions=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ringVersion=6, directoriesVersion=0} &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.identity_to_role
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:33,094 ColumnFamilyStore.java:493 - Initializing system_auth.network_permissions
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,095 DiskBoundaryManager.java:54 - Refreshing disk boundary cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.network_permissions
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,097 DiskBoundaryManager.java:93 - Got local ranges [] (ringVersion = 6)
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,098 DiskBoundaryManager.java:57 - Updating boundaries from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; to DiskBoundaries{directories=[DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data0}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data1}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data2}], positions=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ringVersion=6, directoriesVersion=0} &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.network_permissions
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:33,107 ColumnFamilyStore.java:493 - Initializing system_auth.resource_role_permissons_index
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,109 DiskBoundaryManager.java:54 - Refreshing disk boundary cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.resource_role_permissons_index
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,111 DiskBoundaryManager.java:93 - Got local ranges [] (ringVersion = 6)
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,111 DiskBoundaryManager.java:57 - Updating boundaries from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; to DiskBoundaries{directories=[DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data0}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data1}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data2}], positions=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ringVersion=6, directoriesVersion=0} &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.resource_role_permissons_index
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:33,121 ColumnFamilyStore.java:493 - Initializing system_auth.role_members
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,122 DiskBoundaryManager.java:54 - Refreshing disk boundary cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.role_members
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,124 DiskBoundaryManager.java:93 - Got local ranges [] (ringVersion = 6)
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,124 DiskBoundaryManager.java:57 - Updating boundaries from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; to DiskBoundaries{directories=[DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data0}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data1}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data2}], positions=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ringVersion=6, directoriesVersion=0} &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.role_members
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:33,135 ColumnFamilyStore.java:493 - Initializing system_auth.role_permissions
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,137 DiskBoundaryManager.java:54 - Refreshing disk boundary cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.role_permissions
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,140 DiskBoundaryManager.java:93 - Got local ranges [] (ringVersion = 6)
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,141 DiskBoundaryManager.java:57 - Updating boundaries from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; to DiskBoundaries{directories=[DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data0}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data1}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data2}], positions=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ringVersion=6, directoriesVersion=0} &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.role_permissions
INFO &#160;[MigrationStage:1] 2023-08-10 18:39:33,152 ColumnFamilyStore.java:493 - Initializing system_auth.roles
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,154 DiskBoundaryManager.java:54 - Refreshing disk boundary cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.roles
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,156 DiskBoundaryManager.java:93 - Got local ranges [] (ringVersion = 6)
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,156 DiskBoundaryManager.java:57 - Updating boundaries from &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; to DiskBoundaries{directories=[DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data0}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data1}, DataDirectory{location=/home/cassandra/cassandra/cassandra-dtest/tmp/dtest-3qsf1zsl/test/node3/data2}], positions=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ringVersion=6, directoriesVersion=0} &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth.roles
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,167 TokenMetadata.java:876 - Starting pending range calculation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,167 TokenMetadata.java:881 - Pending range calculation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth completed (took: 0ms)
DEBUG [GossipStage:1] 2023-08-10 18:39:33,167 MigrationCoordinator.java:428 - Reported schema d03783d7-b468-3c1a-82f1-8e30b2edde8b at endpoint /127.0.0.2:7000&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt; , can you take a look? You&apos;ve worked a lot on those issues in the past year or two.&lt;/p&gt;

&lt;p&gt;What would be a good way forward?&#160;&lt;/p&gt;</comment>
                            <comment id="17766173" author="edimitrova" created="Mon, 18 Sep 2023 00:51:58 +0000"  >&lt;p&gt;So, I can see from the logs that the metadata is still null. We throw in the PendingRangeCalculator:1, but then, in the meantime, MigrationStage:1 still calls the PendingCalculationRanges method from Schema#createKeyspace, and things continue smoothly:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,167 TokenMetadata.java:876 - Starting pending range calculation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth
DEBUG [MigrationStage:1] 2023-08-10 18:39:33,167 TokenMetadata.java:881 - Pending range calculation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; system_auth completed (took: 0ms)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The tests finished successfully. It is just the previous error is reported on teardown, if I didn&apos;t misread anything...&#160;&lt;/p&gt;

&lt;p&gt;This also reminds me a bit of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18636&quot; title=&quot;AssertionError: Unknown keyspace after dropping a keyspace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18636&quot;&gt;CASSANDRA-18636&lt;/a&gt;.&#160;&lt;/p&gt;</comment>
                            <comment id="17766950" author="edimitrova" created="Wed, 20 Sep 2023 00:20:09 +0000"  >&lt;p&gt;I found also this failure on trunk today:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-trunk-dtest-large-novnode/1245/jdk=jdk_17_latest,label=cassandra-dtest-large,split=2/testReport/junit/dtest-large-novnode.consistency_test/TestAvailability/test_network_topology_strategy_each_quorum/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/job/Cassandra-trunk-dtest-large-novnode/1245/jdk=jdk_17_latest,label=cassandra-dtest-large,split=2/testReport/junit/dtest-large-novnode.consistency_test/TestAvailability/test_network_topology_strategy_each_quorum/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Unfortunately, the ccm tar located &lt;a href=&quot;https://nightlies.apache.org/cassandra/trunk/Cassandra-trunk-dtest-large-novnode/1246/Cassandra-trunk-dtest-large-novnode/jdk=jdk_17_latest,label=cassandra-dtest-large,split=2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; is empty, so I cannot confirm 100% for sure whether it is the same issue. The only thing is the test actually passed again, there is just this teardown error.&lt;/p&gt;</comment>
                            <comment id="17767432" author="jlewandowski" created="Thu, 21 Sep 2023 07:34:13 +0000"  >&lt;p&gt;I&apos;ve found the issue, putting a sleep in this method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Update (or insert) &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; keyspace definition
     *
     * @param ksm The metadata about keyspace
     */
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void load(KeyspaceMetadata ksm)
    {
        Preconditions.checkArgument(!SchemaConstants.isLocalSystemKeyspace(ksm.name));
        KeyspaceMetadata previous = distributedKeyspaces.getNullable(ksm.name);

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (previous == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            loadNew(ksm);
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
            reload(previous, ksm);

        distributedKeyspaces = distributedKeyspaces.withAddedOrUpdated(ksm);
        Uninterruptibles.sleepUninterruptibly(100 , TimeUnit.MILLISECONDS);
        distributedAndLocalKeyspaces = distributedAndLocalKeyspaces.withAddedOrUpdated(ksm);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;makes it reliably reproducible, which means that it probably applies to 4.1 as well&lt;/p&gt;</comment>
                            <comment id="17774142" author="edimitrova" created="Wed, 11 Oct 2023 17:02:55 +0000"  >&lt;p&gt;+1 on the latest patch. For anyone who follows - the describe statement problem discovered while working on this issue was pulled in its ticket - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18921&quot; title=&quot;Describe statement may include inconsistent schema and schema version for paging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18921&quot;&gt;&lt;del&gt;CASSANDRA-18921&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Running final CI here (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt;&#160; has some issues with CircleCI):&#160;&lt;/p&gt;

&lt;p&gt;4.1: &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra?branch=18747-4.1-final&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra?branch=18747-4.1-final&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;5.0: &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra?branch=18747-5.0-final&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra?branch=18747-5.0-final&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;trunk: &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra?branch=18747-trunk-final&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra?branch=18747-trunk-final&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt;, please feel free to commit on clean CI runs.&lt;/p&gt;</comment>
                            <comment id="17774343" author="jlewandowski" created="Thu, 12 Oct 2023 06:59:30 +0000"  >&lt;p&gt;There are some failures, though most of them are infrastructure related; the one which is not, does not look like something related / pls confirm&lt;/p&gt;</comment>
                            <comment id="17774668" author="edimitrova" created="Thu, 12 Oct 2023 19:21:12 +0000"  >&lt;p&gt;Indeed, there are two failures on the 5.0 CI run but I feel both are random:&lt;/p&gt;
&lt;h5&gt;&lt;a name=&quot;testCompactionInvalidPartitionDeletionIdidnotfindaticket.Runningarepeatedrunonthecurrentcassandra5.0withoutthepatchhere.https%3A%2F%2Fapp.circleci....&quot;&gt;&lt;/a&gt;testCompactionInvalidPartitionDeletion - I did not find a ticket. Running a repeated run on the current cassandra-5.0 without the patch here. - &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/2540/workflows/64120a59-71fa-4dde-984a-d1cf8a4543fb/jobs/44327/parallel-runs/2?filterBy=ALL&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/2540/workflows/64120a59-71fa-4dde-984a-d1cf8a4543fb/jobs/44327/parallel-runs/2?filterBy=ALL&lt;/a&gt; ;&#160;&lt;/h5&gt;

&lt;p&gt;With the patch - &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/2541/workflows/00547b95-8790-4a73-997b-68d145a2eeef/jobs/44440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/2541/workflows/00547b95-8790-4a73-997b-68d145a2eeef/jobs/44440&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;testOneNetworkInterfaceProvisioning-.jdk11 - It does seem like the infra.&#160;&lt;/p&gt;

&lt;p&gt;While we may still want to look at any of them, I do not see a reason to block this patch from committing. I do not see how those can be triggered from this patch.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As discussed in the PR, we also have to open a ticket for the MigrationCoordinatorTest flaky test.&lt;/p&gt;</comment>
                            <comment id="17774828" author="blerer" created="Fri, 13 Oct 2023 08:51:40 +0000"  >&lt;p&gt;It seems to me that the proposed solution is going in the opposite direction of where it should go. The issue mainly comes from the fact that we have duplicated some information in a multithreaded code. Rather than making that logic more complex we should simplify it an remove the duplication. Looking at where those 2 variables are used and how they get used I really do not see the need for the &lt;tt&gt;distributedAndLocalKeyspaces&lt;/tt&gt; variable. Am I missing something?&lt;/p&gt;</comment>
                            <comment id="17774832" author="blerer" created="Fri, 13 Oct 2023 09:05:59 +0000"  >&lt;p&gt;I looked at the code of 4.0 and 4.1 and thinking a bit more about it, I do not understand why the keyspaces were split into several groups.&lt;br/&gt;
Some methods look also wrong. There seem to be some confusions between what is called distributed keyspaces, non-system keyspaces and local keyspaces.&lt;br/&gt;
It feels to me that we should revisit that code more carefully. &lt;/p&gt;</comment>
                            <comment id="17774834" author="jlewandowski" created="Fri, 13 Oct 2023 09:09:35 +0000"  >&lt;p&gt;Regarding the first comment, you are probably right, fresh look was needed indeed;&lt;/p&gt;

&lt;p&gt;Regarding the second question - if you mean local and distributed - because local are not synchronized across the cluster&lt;/p&gt;</comment>
                            <comment id="17774836" author="jlewandowski" created="Fri, 13 Oct 2023 09:11:13 +0000"  >&lt;p&gt;Some methods stayed there as they were previously.&lt;/p&gt;</comment>
                            <comment id="17775753" author="edimitrova" created="Mon, 16 Oct 2023 13:10:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;I looked at the code of 4.0 and 4.1 and thinking a bit more about it, I do not understand why the keyspaces were split into several groups.&lt;br/&gt;
Some methods look also wrong. There seem to be some confusions between what is called distributed keyspaces, non-system keyspaces and local keyspaces.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Indeed, good catch! Thank you! I was told the two variables were for optimization on the hot path, which is rewritten anyway with TCM in 5.0, but I didn&apos;t check it out of the current patch further myself. (I should have...)&lt;/p&gt;

&lt;p&gt;+1 on the latest patch; thanks for fixing everything,&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17777150" author="jlewandowski" created="Thu, 19 Oct 2023 09:24:57 +0000"  >&lt;p&gt;Few problems with testing...&lt;/p&gt;

&lt;p&gt;On 4.1, one junit test failed but I don&apos;t believe that is related:&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/977/workflows/f6f81939-5b1e-4e17-b756-bfb8791dc23d/jobs/38838/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/977/workflows/f6f81939-5b1e-4e17-b756-bfb8791dc23d/jobs/38838/tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On 5.0, it turned out that &lt;tt&gt;ShortPaxosSimulationTest&lt;/tt&gt; is failing. I&apos;ve retried both locally and on CI with &lt;tt&gt;cassandra-5.0&lt;/tt&gt; and it fails there as well:&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/1013/workflows/132ec030-5eae-4622-ad92-ffea76cbb5a4/jobs/39718&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/1013/workflows/132ec030-5eae-4622-ad92-ffea76cbb5a4/jobs/39718&lt;/a&gt;&lt;br/&gt;
Additionally, &lt;tt&gt;LeaveAndBootstrapTest&lt;/tt&gt; turned out to be flaky. I did some investigation and discovered that this particular test is very sensitive to the execution speed - when the test is executed a bit slower, it fails consistently in the same way (both &lt;tt&gt;cassandra-5.0&lt;/tt&gt; and this feature branch). The key temporal option in this case is either Gossiper delay/interval or quarantine delay. The failed runs were slower and Gossiper check state task was executed wiping some endpoint from the state map due to elapsed quarantine time. Thas is clearly visible in the logs. I&apos;m hoping to fix this issue by increasing the quarantine time so that it is less likely to elapse during the test.&lt;/p&gt;

&lt;p&gt;On trunk, all tests passed.&lt;/p&gt;</comment>
                            <comment id="17777157" author="jlewandowski" created="Thu, 19 Oct 2023 09:38:32 +0000"  >&lt;p&gt;Test links in the PRs&lt;/p&gt;</comment>
                            <comment id="17777863" author="edimitrova" created="Fri, 20 Oct 2023 16:41:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/977/workflows/f6f81939-5b1e-4e17-b756-bfb8791dc23d/jobs/38838/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/jacek-lewandowski/cassandra/977/workflows/f6f81939-5b1e-4e17-b756-bfb8791dc23d/jobs/38838/tests&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18447&quot; title=&quot;j11 flaky test: org.apache.cassandra.cql3.MemtableSizeTest#testTruncationReleasesLogSpace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18447&quot;&gt;CASSANDRA-18447&lt;/a&gt; - the jamm issue is the same technically... So not related;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;ShortPaxosSimulationTest&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18944&quot; title=&quot;Test failure: org.apache.cassandra.simulator.test.ShortPaxosSimulationTest.simulationTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18944&quot;&gt;&lt;del&gt;CASSANDRA-18944&lt;/del&gt;&lt;/a&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Additionally,&#160;&lt;tt&gt;LeaveAndBootstrapTest&lt;/tt&gt;&#160;turned out to be flaky&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18045&quot; title=&quot;Test failure: org.apache.cassandra.service.LeaveAndBootstrapTest.testSimultaneousMove&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18045&quot;&gt;CASSANDRA-18045&lt;/a&gt;, we can post your investigations there so someone can solve the problem?&lt;/p&gt;</comment>
                            <comment id="17780491" author="dcapwell" created="Fri, 27 Oct 2023 17:29:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt; do you have a jvm test upgrade build result for this patch?  I rebased and was trying to merge &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18952&quot; title=&quot;Add metrics and logging to repair retries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18952&quot;&gt;&lt;del&gt;CASSANDRA-18952&lt;/del&gt;&lt;/a&gt; and now it&apos;s failing at org.apache.cassandra.distributed.upgrade.MixedModeRepairTest#testRepairDuringMajorUpgrade.  When I run the test I see the following error causing repair to fail&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO  [node1_Repair-Task:1] 2023-10-27 10:25:54,600 SubstituteLogger.java:169 - ERROR 17:25:54 Repair e22ac8f0-74ed-11ee-b538-b1617eaf5e43 failed:
java.lang.NoSuchMethodError: &lt;span class=&quot;code-quote&quot;&gt;&apos;com.google.common.collect.ImmutableSet org.apache.cassandra.schema.Schema.getKeyspaces()&apos;&lt;/span&gt;
	at org.apache.cassandra.metrics.CompactionMetrics$1.getValue(CompactionMetrics.java:75)
	at org.apache.cassandra.metrics.CompactionMetrics$1.getValue(CompactionMetrics.java:70)
	at org.apache.cassandra.db.compaction.CompactionManager.getPendingTasks(CompactionManager.java:2199)
	at org.apache.cassandra.service.ActiveRepairService.verifyCompactionsPendingThreshold(ActiveRepairService.java:622)
	at org.apache.cassandra.service.ActiveRepairService.prepareForRepair(ActiveRepairService.java:635)
	at org.apache.cassandra.repair.RepairCoordinator.prepare(RepairCoordinator.java:430)
	at org.apache.cassandra.repair.RepairCoordinator.runMayThrow(RepairCoordinator.java:288)
	at org.apache.cassandra.repair.RepairCoordinator.run(RepairCoordinator.java:257)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17780494" author="dcapwell" created="Fri, 27 Oct 2023 17:45:25 +0000"  >&lt;p&gt;Ok weird, it passes in Jenkins but not Circle &lt;a href=&quot;https://ci-cassandra.apache.org/view/Cassandra%205.0/job/Cassandra-5.0-jvm-dtest-upgrade/97/jdk=jdk_11_latest,label=cassandra,split=6/testReport/org.apache.cassandra.distributed.upgrade/MixedModeRepairTest/testRepairDuringMajorUpgrade__jdk11_arch_x86_64_python2_7/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/view/Cassandra%205.0/job/Cassandra-5.0-jvm-dtest-upgrade/97/jdk=jdk_11_latest,label=cassandra,split=6/testReport/org.apache.cassandra.distributed.upgrade/MixedModeRepairTest/testRepairDuringMajorUpgrade__jdk11_arch_x86_64_python2_7/&lt;/a&gt;. &lt;a href=&quot;https://app.circleci.com/pipelines/github/dcapwell/cassandra/2327/workflows/c52543ec-6147-4cc2-9694-f58a129da702/jobs/37368/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/dcapwell/cassandra/2327/workflows/c52543ec-6147-4cc2-9694-f58a129da702/jobs/37368/tests&lt;/a&gt;.  The error makes no sense as this isn&apos;t reflection or JMX... so why a signature change matters isn&apos;t clear to me...&lt;/p&gt;</comment>
                            <comment id="17780501" author="dcapwell" created="Fri, 27 Oct 2023 18:23:11 +0000"  >&lt;p&gt;ok maybe a cache issue... I can&apos;t see the SHA circle used... but if I rebuild the jars in circle and rerun against my same SHA; the test passes...&lt;/p&gt;

&lt;p&gt;sorry to bother!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13554992">CASSANDRA-18949</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13555636">CASSANDRA-18963</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                            <outwardlinks description="Testing discovered">
                                        <issuelink>
            <issuekey id="13553630">CASSANDRA-18921</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="Discovered while testing">
                                        <issuelink>
            <issuekey id="13545353">CASSANDRA-18708</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jlewandowski]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313826" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Change Category</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13006"><![CDATA[Quality Assurance]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jqns:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
        <customfieldvalue><![CDATA[bereng]]></customfieldvalue>
        <customfieldvalue><![CDATA[e.dimitrova]]></customfieldvalue>
        <customfieldvalue><![CDATA[jjordan]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12352689">4.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/ac71d0f56efda081cf3c602eae8897b64cf84dac&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/ac71d0f56efda081cf3c602eae8897b64cf84dac&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;run regression tests&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>