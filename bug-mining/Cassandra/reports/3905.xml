<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:58:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10581] Update cassandra.yaml comments to reflect memory_allocator deprecation, remove in 3.0</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10581</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Looks like in 2.2+ changing the &lt;tt&gt;memory_allocator&lt;/tt&gt; field in cassandra.yaml has no effect:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/0d2ec11c7e0abfb84d872289af6d3ac386cf381f#diff-b66584c9ce7b64019b5db5a531deeda1R207&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/0d2ec11c7e0abfb84d872289af6d3ac386cf381f#diff-b66584c9ce7b64019b5db5a531deeda1R207&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The instructions in comments on how to use jemalloc haven&apos;t been updated to reflect this change. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt;, is that an accurate assessment?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; How do we want to handle the deprecation more generally? Warn on 2.2, remove in 3.0?&lt;/p&gt;

&lt;p&gt;EDIT: I described this in a way that isn&apos;t very clear to those unfamiliar with Robert&apos;s change. To be clear: You can still use JEMAlloc with Cassandra. The &lt;tt&gt;memory_allocator&lt;/tt&gt; option was deprecated in favor of automatically detecting if JEMAlloc is installed, and, if so, using it. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12907471">CASSANDRA-10581</key>
            <summary>Update cassandra.yaml comments to reflect memory_allocator deprecation, remove in 3.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="snazy">Robert Stupp</assignee>
                                    <reporter username="mambocab">Jim Witschey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Oct 2015 16:31:39 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:52 +0000</updated>
                            <resolved>Wed, 28 Oct 2015 19:17:21 +0000</resolved>
                                        <fixVersion>2.2.4</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14971321" author="iamaleksey" created="Fri, 23 Oct 2015 16:34:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;How do we want to handle the deprecation more generally? Warn on 2.2, remove in 3.0?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yep.&lt;/p&gt;</comment>
                            <comment id="14971348" author="mambocab" created="Fri, 23 Oct 2015 16:52:11 +0000"  >&lt;p&gt;This should also be looked at and updated to reflect the new behavior:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/blob/0d2ec11c7e0abfb84d872289af6d3ac386cf381f/conf/cassandra-env.sh#L311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/0d2ec11c7e0abfb84d872289af6d3ac386cf381f/conf/cassandra-env.sh#L311&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14972504" author="snazy" created="Sat, 24 Oct 2015 09:36:32 +0000"  >&lt;p&gt;Attached patch(es) update &lt;tt&gt;NEWS.txt&lt;/tt&gt;, remove superfluous lines in &lt;tt&gt;cassandra-env.sh&lt;/tt&gt;. For 2.2: log a deprecation warning, if &lt;tt&gt;memory_allocator&lt;/tt&gt; is used. For 3.0: remove &lt;tt&gt;memory_allocator&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14978730" author="mambocab" created="Wed, 28 Oct 2015 16:46:42 +0000"  >&lt;p&gt;The documentation changes look good to me. If it&apos;s not already logged somewhere that I missed it, could you add some kind of logging indicating when Cassandra used JEMAlloc? As is, it&apos;s difficult to determine if it&apos;s actually used, as far as I can tell.&lt;/p&gt;</comment>
                            <comment id="14979027" author="snazy" created="Wed, 28 Oct 2015 19:01:45 +0000"  >&lt;p&gt;Yes, it&apos;s difficult to include a check whether jemalloc is actually used. The startup code in &lt;tt&gt;cassandra-env.sh&lt;/tt&gt; preloads the library, which effectively &quot;links&quot; jemalloc between the java runtime and OS &lt;tt&gt;malloc&lt;/tt&gt;/&lt;tt&gt;free&lt;/tt&gt; - i.e. it&apos;s basically &quot;invisible&quot; whether jemalloc is used or not.&lt;/p&gt;

&lt;p&gt;I&apos;ve pushed commits for 2.2 + 3.0 with some logging to &lt;tt&gt;cassandra-env.sh&lt;/tt&gt; where preloading happens. Is this what you think of?&lt;/p&gt;</comment>
                            <comment id="14979047" author="mambocab" created="Wed, 28 Oct 2015 19:05:50 +0000"  >&lt;p&gt;Yep, that&apos;s about what I had in mind, if that&apos;s the best visibility we can get. I&apos;m +1.&lt;/p&gt;</comment>
                            <comment id="14979068" author="snazy" created="Wed, 28 Oct 2015 19:17:21 +0000"  >&lt;p&gt;Yes, that&apos;s the best what we can get without building really over-engineered but still unreliable stuff to get a log message.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Committed as 83fcc926eb6e5f8667f31dfec3605d7358e0cfd0 to 2.2 and merged to 3.0, trunk.&lt;/p&gt;</comment>
                            <comment id="14985400" author="slebresne" created="Mon, 2 Nov 2015 15:35:57 +0000"  >&lt;p&gt;Are we convinced adding a new warning at every startup if you don&apos;t have JEMalloc in a minor release (2.2) is a good idea? Won&apos;t this freak out people, especially since there is no real mention of that new warning in the news file (the only mention is the deprecation of the yaml option)?&lt;/p&gt;
</comment>
                            <comment id="14985422" author="mambocab" created="Mon, 2 Nov 2015 15:52:42 +0000"  >&lt;p&gt;It&apos;s a visibility issue &amp;#8211; outside of some kind of logging at startup, there&apos;s no real feedback that you&apos;re successfully using JEMAlloc, unless there&apos;s something I&apos;ve missed.&lt;/p&gt;

&lt;p&gt;I hadn&apos;t though about the minor release part of it, though. Adding a warning is probably too much, I agree.&lt;/p&gt;</comment>
                            <comment id="14985435" author="slebresne" created="Mon, 2 Nov 2015 15:57:58 +0000"  >&lt;p&gt;I&apos;m all for visibility, but it would a lot better to have in the log file imo. Maybe we can set some custom environment variable based on our detection of JEMalloc, or pass some system option to the binary, so that we can do such logging.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12771590">CASSANDRA-8714</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[snazy]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ng3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mambocab</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mambocab]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>