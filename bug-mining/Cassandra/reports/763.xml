<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:19:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2304] sstable2json dies with &quot;Too many open files&quot;, regardless of ulimit</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2304</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Running sstable2json on the attached sstable eventually results in the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOError: java.io.FileNotFoundException: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/CommentSortsCache-f-9764-Data.db (Too many open files)
        at org.apache.cassandra.io.util.BufferedSegmentedFile.getSegment(BufferedSegmentedFile.java:68)
        at org.apache.cassandra.io.sstable.SSTableReader.getFileDataInput(SSTableReader.java:567)
        at org.apache.cassandra.db.columniterator.SSTableSliceIterator.&amp;lt;init&amp;gt;(SSTableSliceIterator.java:49)
        at org.apache.cassandra.db.filter.SliceQueryFilter.getSSTableColumnIterator(SliceQueryFilter.java:68)
        at org.apache.cassandra.db.filter.QueryFilter.getSSTableColumnIterator(QueryFilter.java:80)
        at org.apache.cassandra.tools.SSTableExport.serializeRow(SSTableExport.java:187)
        at org.apache.cassandra.tools.SSTableExport.export(SSTableExport.java:355)
        at org.apache.cassandra.tools.SSTableExport.export(SSTableExport.java:377)
        at org.apache.cassandra.tools.SSTableExport.export(SSTableExport.java:390)
        at org.apache.cassandra.tools.SSTableExport.main(SSTableExport.java:448)
Caused by: java.io.FileNotFoundException: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/CommentSortsCache-f-9764-Data.db (Too many open files)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.&amp;lt;init&amp;gt;(RandomAccessFile.java:233)
        at org.apache.cassandra.io.util.BufferedRandomAccessFile.&amp;lt;init&amp;gt;(BufferedRandomAccessFile.java:111)
        at org.apache.cassandra.io.util.BufferedRandomAccessFile.&amp;lt;init&amp;gt;(BufferedRandomAccessFile.java:106)
        at org.apache.cassandra.io.util.BufferedRandomAccessFile.&amp;lt;init&amp;gt;(BufferedRandomAccessFile.java:91)
        at org.apache.cassandra.io.util.BufferedSegmentedFile.getSegment(BufferedSegmentedFile.java:62)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set my ulimit -n to 60000 and got the same result. Leaking file descriptors?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12500973">CASSANDRA-2304</key>
            <summary>sstable2json dies with &quot;Too many open files&quot;, regardless of ulimit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="alienth">Jason Harvey</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Mar 2011 00:54:22 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:04 +0000</updated>
                            <resolved>Thu, 10 Mar 2011 17:13:27 +0000</resolved>
                                        <fixVersion>0.7.4</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13004914" author="alienth" created="Thu, 10 Mar 2011 01:06:08 +0000"  >&lt;p&gt;Sstable which causes sstable2json to die. Grabbed from an 0.7.3 node.&lt;/p&gt;</comment>
                            <comment id="13004916" author="alienth" created="Thu, 10 Mar 2011 01:07:36 +0000"  >&lt;p&gt;Output from lsof. Thousands of lines of the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java      1766       root 1080r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1081r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1082r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1083r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1084r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1085r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1086r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1087r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1088r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1089r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1090r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1091r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1092r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1093r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1094r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
java      1766       root 1095r      REG              251,0 11809597   32374948 /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/reddit/Hide-f-734-Data.db
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13005139" author="jbellis" created="Thu, 10 Mar 2011 16:38:02 +0000"  >&lt;p&gt;This is a bug with non-mmap&apos;d I/O.&lt;/p&gt;</comment>
                            <comment id="13005140" author="jbellis" created="Thu, 10 Mar 2011 16:38:48 +0000"  >&lt;p&gt;patch to close column iterator and only do one pass per row&lt;/p&gt;</comment>
                            <comment id="13005157" author="xedin" created="Thu, 10 Mar 2011 16:56:03 +0000"  >&lt;p&gt;with number of the exported columns properly incremented. LGTM.&lt;/p&gt;</comment>
                            <comment id="13005168" author="jbellis" created="Thu, 10 Mar 2011 17:13:27 +0000"  >&lt;p&gt;committed v2&lt;/p&gt;</comment>
                            <comment id="13005198" author="hudson" created="Thu, 10 Mar 2011 17:40:56 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #370 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.7/370/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.7/370/&lt;/a&gt;)&lt;br/&gt;
    fix fd leak in sstable2json with non-mmap&apos;d i/o&lt;br/&gt;
patch by jbellis; reviewed by Pavel Yaskevich for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2304&quot; title=&quot;sstable2json dies with &amp;quot;Too many open files&amp;quot;, regardless of ulimit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2304&quot;&gt;&lt;del&gt;CASSANDRA-2304&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12473282" name="2304.txt" size="4079" author="jbellis" created="Thu, 10 Mar 2011 16:38:48 +0000"/>
                            <attachment id="12473288" name="CASSANDRA-2304-v2.patch" size="4637" author="xedin" created="Thu, 10 Mar 2011 16:56:03 +0000"/>
                            <attachment id="12473227" name="sstable.tar.bz2" size="3155753" author="alienth" created="Thu, 10 Mar 2011 01:06:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gal3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93145</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>xedin</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>