<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:24:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-17623] Frozen maps may be serialized unsorted, causing inability to query later</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-17623</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7859&quot; title=&quot;Extend freezing to collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7859&quot;&gt;&lt;del&gt;CASSANDRA-7859&lt;/del&gt;&lt;/a&gt; introduced the ability to use frozen collections as parts of primary keys. This &lt;ins&gt;requires&lt;/ins&gt; all frozen maps to be persisted with their entries sorted by the map keys. If the map is &lt;ins&gt;not&lt;/ins&gt; sorted correctly, it becomes impossible to project all of the map values out of the map using the map projection/selection syntax. For example, the select below would fail if the map was not sorted correctly and the higher-valued key was persisted first:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; test.test (&lt;span class=&quot;code-keyword&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;text&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;c&lt;/span&gt; frozen&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;text&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;text&lt;/span&gt;&amp;gt;&amp;gt;, &lt;span class=&quot;code-keyword&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;KEY&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;k&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;c&lt;/span&gt;));
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; test.test (&lt;span class=&quot;code-keyword&quot;&gt;k&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;c&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;&apos;&lt;/span&gt;, {&lt;span class=&quot;code-quote&quot;&gt;&apos;z&apos;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&apos;second_value&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;&apos;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&apos;first_value&apos;&lt;/span&gt;});
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;k&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;c&lt;/span&gt;[&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;&apos;&lt;/span&gt;] &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; test.test &lt;span class=&quot;code-keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;k&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;-- &lt;span class=&quot;code-keyword&quot;&gt;c&lt;/span&gt;[&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;&apos;&lt;/span&gt;] would &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;NULL&lt;/span&gt; here&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Additionally, if you attempted to select just that row by using the complete map value in a WHERE clause, which is also supported, it would return no rows unless the map provided by the query processor just happened to be sorted the same way as the persisted value.&lt;/p&gt;

&lt;p&gt;However, there is a bug in Maps.java where we don&apos;t actually use a SortedMap in &lt;tt&gt;Maps.Value#fromSerialized&lt;/tt&gt;, which manifests if a client sends an unsorted map as a bound parameter to a query on insert or select. In either case, the map may not be sorted correctly, leading to either invalid data being persisted to disk (in the INSERT case) or the query not being able to be executed/returning 0 rows even though a row &lt;em&gt;should&lt;/em&gt; exist (SELECT).&lt;/p&gt;

&lt;p&gt;This bug affects any usage of parameterized queries (tested with the DataStax driver, and was originally discovered when using the CQLSSTableWriter code to write data locally).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13444698">CASSANDRA-17623</key>
            <summary>Frozen maps may be serialized unsorted, causing inability to query later</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="drohrer">Doug Rohrer</assignee>
                                    <reporter username="drohrer">Doug Rohrer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 May 2022 20:09:58 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:55 +0000</updated>
                            <resolved>Fri, 20 May 2022 11:04:07 +0000</resolved>
                                        <fixVersion>3.0.28</fixVersion>
                    <fixVersion>3.11.14</fixVersion>
                    <fixVersion>4.0.5</fixVersion>
                    <fixVersion>4.1-alpha1</fixVersion>
                    <fixVersion>4.1</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>CQL/Semantics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="12600">3.5h</timespent>
                                <comments>
                            <comment id="17536719" author="drohrer" created="Fri, 13 May 2022 15:16:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/13/workflows/99c3468f-574e-4781-8632-ec70168ec23f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Java 11 tests in CirclCI&lt;/a&gt;:  are green...&lt;/p&gt;

&lt;p&gt;More complete &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/13/workflows/5cc795e2-8966-4203-8b99-7fc73a74d026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Java 8 workflow&lt;/a&gt; has a few failures, but none look related, and the few unit tests I checked pass locally&lt;/p&gt;</comment>
                            <comment id="17536740" author="maedhroz" created="Fri, 13 May 2022 15:52:43 +0000"  >&lt;p&gt;I&apos;m guessing we&apos;ll want to fix this on at least 4.0, 4.1, and trunk.&lt;/p&gt;</comment>
                            <comment id="17536859" author="drohrer" created="Fri, 13 May 2022 20:05:46 +0000"  >&lt;p&gt;It goes back as far as 3.0 (confirmed by adding just the new unit tests), so it feels like we should also be backporting to 3.0 and 3.11 given it at least &lt;em&gt;looks&lt;/em&gt; like a data loss bug (even if the data is &lt;em&gt;there&lt;/em&gt;, you may not be able to read it the way you&apos;d expect, although the map key slicing stuff was introduced in 4.0, selecting by map value would still theoretically be supported in 3.0 I believe)&lt;/p&gt;</comment>
                            <comment id="17537632" author="maedhroz" created="Mon, 16 May 2022 16:24:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=drohrer&quot; class=&quot;user-hover&quot; rel=&quot;drohrer&quot;&gt;drohrer&lt;/a&gt; I don&apos;t think 3.0 is supported now, so probably just 3.11 if you really want to go pre-4.0.&lt;/p&gt;</comment>
                            <comment id="17537633" author="brandon.williams" created="Mon, 16 May 2022 16:26:18 +0000"  >&lt;p&gt;We could probably do one more 3.0 last gasp release, though.&lt;/p&gt;</comment>
                            <comment id="17537637" author="edimitrova" created="Mon, 16 May 2022 16:31:41 +0000"  >&lt;p&gt;I think there is some misunderstanding, according to our website this is the last agreement:&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;ApacheCassandra3.0&quot;&gt;&lt;/a&gt;Apache Cassandra 3.0&lt;/h4&gt;
&lt;h6&gt;&lt;a name=&quot;Releasedon20220208&quot;&gt;&lt;/a&gt;Released on 2022-02-08&lt;/h6&gt;
&lt;h6&gt;&lt;a name=&quot;Maintaineduntil4.2.0release%28MayJuly2023%29&quot;&gt;&lt;/a&gt;Maintained until 4.2.0 release (May-July 2023)&lt;/h6&gt;</comment>
                            <comment id="17537655" author="maedhroz" created="Mon, 16 May 2022 16:51:38 +0000"  >&lt;p&gt;Apologies. We made a special dispensation for 3.0.&lt;/p&gt;</comment>
                            <comment id="17537658" author="edimitrova" created="Mon, 16 May 2022 16:56:29 +0000"  >&lt;p&gt;Yes, unfortunately, we will suffer with more branches this time for the greater good &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17537805" author="maedhroz" created="Mon, 16 May 2022 21:23:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17538425" author="drohrer" created="Tue, 17 May 2022 19:19:43 +0000"  >&lt;p&gt;Added PRs for all branches (3.0, 3.11, 4.0, 4.1) plus Circle links for each.&lt;/p&gt;</comment>
                            <comment id="17538721" author="adelapena" created="Wed, 18 May 2022 10:33:42 +0000"  >&lt;p&gt;It seems that Circle is not properly printing the test results for the provided runs, which makes it difficult to know what tests have failed. Trying again with midres pre-commit workflows:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;PR&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1636&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0  &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1566/workflows/8fdd00f6-3771-4479-8667-873238cd983b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11 &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1563/workflows/d3aa9a48-a877-47d4-9dde-05d5cfc47fde&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1634&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0  &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1567/workflows/12090435-5ed4-45f0-ab18-60ed860dd305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1567/workflows/f3465751-41d0-4643-8cbb-5893b83401dd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1633&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1  &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1564/workflows/e8dbd50a-d574-4ef8-a741-795a93cd3e85&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1564/workflows/31dc3bd6-0006-47f0-af4e-5cd568be89be&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1621&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1565/workflows/b9ad62b4-e1f9-425f-9808-2a4488b3aa1a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1565/workflows/4af37b70-e43d-4c67-8711-151055ba3285&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17538735" author="adelapena" created="Wed, 18 May 2022 10:58:31 +0000"  >&lt;p&gt;The new tests &lt;tt&gt;testInsertingMapDataWithParameterizedQueriesIsKeyOrderIndependentWithSelectSlice&lt;/tt&gt; and &lt;tt&gt;testInsertingSetDataWithParameterizedQueriesIsKeyOrderIndependentWithSelectSlice&lt;/tt&gt; fail in 3.0 and 3.11 because those branches don&apos;t allow selecting map nor set elements. That feature was introduced in 4.0 by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7396&quot; title=&quot;Allow selecting Map values and Set elements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7396&quot;&gt;&lt;del&gt;CASSANDRA-7396&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17538750" author="adelapena" created="Wed, 18 May 2022 11:15:01 +0000"  >&lt;p&gt;Some of the new tests added to &lt;tt&gt;CQLSSTableWriterTest&lt;/tt&gt; consistently fail in 3.0, both locally and &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1566/workflows/8fdd00f6-3771-4479-8667-873238cd983b/jobs/16619&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;on CI&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17538785" author="drohrer" created="Wed, 18 May 2022 12:17:35 +0000"  >&lt;p&gt;Sorry for the test breakage - I was having trouble getting IntelliJ to actually run tests on the 3.X branches yesterday evening so I pushed to let Circle run them... I&apos;ve managed to get things running again this morning, and have fixed up the tests in both 3.0 and 3.11 by removing the ones that aren&apos;t supported and fixing the missing &lt;tt&gt;assert dataDir.mkdirs()&lt;/tt&gt;&#160;calls in the 3.0 tests, which weren&apos;t needed in 3.11 or later as the test sets them up in a &lt;tt&gt;@Before&lt;/tt&gt; block.&lt;/p&gt;</comment>
                            <comment id="17538805" author="adelapena" created="Wed, 18 May 2022 12:42:01 +0000"  >&lt;p&gt;No worries, here is a new CI run for 3.0 and 3.11, including some repeated runs of &lt;tt&gt;CQLSSTableWriterTest&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;PR&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1636&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0  &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1569/workflows/30de5a88-d34c-42a0-a419-c52015ff5c3b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11 &lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/1570/workflows/157cf06e-a9c7-4f5f-b607-2d493fc2d017&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17538972" author="adelapena" created="Wed, 18 May 2022 17:17:02 +0000"  >&lt;p&gt;CI results look good to me, +1. All the test failures can be reproduced in the unpatched branches, and most of them are well-known. I have created tickets for those failures that didn&apos;t have one yet:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;testScrubCorruptedCounterRow&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17314&quot; title=&quot;Test Failure: org.apache.cassandra.db.ScrubTest.testScrubCorruptedCounterRow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17314&quot;&gt;&lt;del&gt;CASSANDRA-17314&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;test_force_repair_range_async&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17594&quot; title=&quot;Fix flaky python-tests due to connection getting closed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17594&quot;&gt;&lt;del&gt;CASSANDRA-17594&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;test_failure_during_validation&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17594&quot; title=&quot;Fix flaky python-tests due to connection getting closed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17594&quot;&gt;&lt;del&gt;CASSANDRA-17594&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;test_dead_sync_initiator&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17594&quot; title=&quot;Fix flaky python-tests due to connection getting closed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17594&quot;&gt;&lt;del&gt;CASSANDRA-17594&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;test_multi_partition_consistent_reads_after_write&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17594&quot; title=&quot;Fix flaky python-tests due to connection getting closed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17594&quot;&gt;&lt;del&gt;CASSANDRA-17594&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;test_contention_many_threads&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17594&quot; title=&quot;Fix flaky python-tests due to connection getting closed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17594&quot;&gt;&lt;del&gt;CASSANDRA-17594&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;replaceAliveHost&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17594&quot; title=&quot;Fix flaky python-tests due to connection getting closed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17594&quot;&gt;&lt;del&gt;CASSANDRA-17594&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;test_user_defined_compaction&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17587&quot; title=&quot;Flaky compaction_test.py::TestCompaction:: test_user_defined_compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17587&quot;&gt;&lt;del&gt;CASSANDRA-17587&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;testSimpleStrategy&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17636&quot; title=&quot;Test Failure: org.apache.cassandra.distributed.upgrade.MixedModeFrom3ReplicationTest.testSimpleStrategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17636&quot;&gt;&lt;del&gt;CASSANDRA-17636&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;test_compaction_throughput&lt;/tt&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17637&quot; title=&quot;Test failure: compaction_test.py::TestCompaction::test_compaction_throughput&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17637&quot;&gt;&lt;del&gt;CASSANDRA-17637&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17539439" author="adelapena" created="Thu, 19 May 2022 10:04:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frankgh&quot; class=&quot;user-hover&quot; rel=&quot;frankgh&quot;&gt;frankgh&lt;/a&gt; are we ready to commit?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=drohrer&quot; class=&quot;user-hover&quot; rel=&quot;drohrer&quot;&gt;drohrer&lt;/a&gt; is the list of three authors of this ticket correct?&lt;/p&gt;</comment>
                            <comment id="17539505" author="drohrer" created="Thu, 19 May 2022 12:17:34 +0000"  >&lt;p&gt;I was the primary author - Yifan figured out that it affected more than just the CQLSSTableWriter path and added the test - Francisco and Yifan both paired with me for a few hours working on making sure the fix was right, improving things like making all of the Map code require a SortedMap implementation vs. just fixing the one line that fixed the bug, etc.&lt;/p&gt;

&lt;p&gt;So yeah, I think so, but not sure how we&apos;d normally credit that work?&lt;/p&gt;</comment>
                            <comment id="17539519" author="adelapena" created="Thu, 19 May 2022 12:29:28 +0000"  >&lt;p&gt;I&apos;d say that you give credit to whoever you think should be an author, provided that they are happy with it. I was just asking for preparing the commit message, in case some reviewer or previous assignee was accidentally included in the list of authors.&lt;/p&gt;</comment>
                            <comment id="17539521" author="drohrer" created="Thu, 19 May 2022 12:31:19 +0000"  >&lt;p&gt;Then yeah, the authors list is right - they both made significant contributions to the patch.&lt;/p&gt;</comment>
                            <comment id="17540058" author="adelapena" created="Fri, 20 May 2022 11:01:44 +0000"  >&lt;p&gt;Committed to 3.0 as &lt;a href=&quot;https://github.com/apache/cassandra/commit/ffc4c89c3df7ad0ae73ebefdcb7e15a2790c0a52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ffc4c89c3df7ad0ae73ebefdcb7e15a2790c0a52&lt;/a&gt; and merged to &lt;a href=&quot;https://github.com/apache/cassandra/commit/0e1d068d9237de39b53992522eba4b40afb0e72b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;, &lt;a href=&quot;https://github.com/apache/cassandra/commit/5cf6db30f6b907e573c20b4f7b2958fb7e8995e1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;, &lt;a href=&quot;https://github.com/apache/cassandra/commit/c1d163abad7279c7d8bb4e76bb39de47c90bbec7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/cassandra/commit/56ce8d1f7f90fa9dd9d1b0e3507dab0cd2dec0cf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[drohrer]]></customfieldvalue>
        <customfieldvalue><![CDATA[frankgh]]></customfieldvalue>
        <customfieldvalue><![CDATA[ycai]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12986" cascade-level="1"><![CDATA[Recoverable Corruption / Loss]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12966"><![CDATA[Challenging]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12bi0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
        <customfieldvalue><![CDATA[maedhroz]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12328951">2.1.3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/ffc4c89c3df7ad0ae73ebefdcb7e15a2790c0a52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/ffc4c89c3df7ad0ae73ebefdcb7e15a2790c0a52&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Unit tests at multiple levels added to test.&lt;/p&gt;

&lt;p&gt;Github PRs/Circle runs:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Trunk:&#160;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1621&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/1621&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Circle:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/18/workflows/d33b2827-b970-4fc2-a56e-4ed68a532005&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8_tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/18/workflows/4631f123-ffde-4151-833c-ecd0b9378f3f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;4.1: &lt;a href=&quot;https://github.com/apache/cassandra/pull/1633&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/1633&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Circle:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/19/workflows/deb9a03f-53e5-47be-8f6a-a4e60db6e375&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8_tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/19/workflows/ca3763ea-bbb9-42c5-bfc7-3291969f04f0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;4.0: &lt;a href=&quot;https://github.com/apache/cassandra/pull/1634&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/1634&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Circle&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/20/workflows/3a596abf-d173-44a2-b172-e7e74aaa9c3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8_tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/20/workflows/a4532032-ef90-42ba-8b13-21b68d0825de&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;3.11: &lt;a href=&quot;https://github.com/apache/cassandra/pull/1635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/1635&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Circle: &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/22/workflows/eb51d3db-c196-4031-acc6-b36deb060dc7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8_tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;3.0: &lt;a href=&quot;https://github.com/apache/cassandra/pull/1636&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/1636&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Circle: &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/23/workflows/4f6428c2-a4f9-4bee-80d6-22519f0b5c75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8_tests&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>