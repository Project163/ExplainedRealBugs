<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:31:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3946] BulkRecordWriter shouldn&apos;t stream any empty data/index files that might be created at end of flush</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3946</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;If by chance, we flush sstables during BulkRecordWriter (we have seen it happen), I want to make sure we don&apos;t try to stream them.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12543638">CASSANDRA-3946</key>
            <summary>BulkRecordWriter shouldn&apos;t stream any empty data/index files that might be created at end of flush</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yukim">Yuki Morishita</assignee>
                                    <reporter username="lenn0x">Chris Goffinet</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Feb 2012 08:15:01 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:39 +0000</updated>
                            <resolved>Tue, 17 Apr 2012 21:27:20 +0000</resolved>
                                        <fixVersion>1.0.10</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13213667" author="jbellis" created="Wed, 22 Feb 2012 14:49:11 +0000"  >&lt;p&gt;I&apos;m not sure I understand &amp;#8211; is it trying to stream a sstable that&apos;s in the process of being written?  Or did you actually get zero-length files created?  The latter is Not Supposed To Happen.&lt;/p&gt;</comment>
                            <comment id="13246538" author="jbellis" created="Wed, 4 Apr 2012 18:19:21 +0000"  >&lt;p&gt;Sounds like the right fix here is to make BRW not output zero-length sstables.&lt;/p&gt;</comment>
                            <comment id="13246543" author="brandon.williams" created="Wed, 4 Apr 2012 18:22:32 +0000"  >&lt;p&gt;I&apos;m not convinced that having the loader skip empty files is right yet.  Why are empty files being created?&lt;/p&gt;</comment>
                            <comment id="13253753" author="jbellis" created="Fri, 13 Apr 2012 21:08:37 +0000"  >&lt;p&gt;Yuki, does anything look suspicious in BulkRecordWriter for zero-length file creation?&lt;/p&gt;</comment>
                            <comment id="13253757" author="brandon.williams" created="Fri, 13 Apr 2012 21:20:14 +0000"  >&lt;p&gt;I suspect if there is a problem here it&apos;s actually in UnsortedSimpleSSTableWriter.&lt;/p&gt;</comment>
                            <comment id="13255872" author="yukim" created="Tue, 17 Apr 2012 19:45:16 +0000"  >&lt;p&gt;The only way bulk writer writes 0 size sstable is when bad thing happens during writing.&lt;br/&gt;
Attached patch makes sure writer get aborted so that incomplete files are removed when exception happend during writes. In order to do this, I have to let SSTableWriter create &quot;temp&quot; file, but it should be OK since closeAndOpenReader renames file.&lt;/p&gt;</comment>
                            <comment id="13255883" author="jbellis" created="Tue, 17 Apr 2012 20:01:44 +0000"  >&lt;p&gt;LGTM.  Could you also post a version against 1.0, Yuki?&lt;/p&gt;</comment>
                            <comment id="13255908" author="yukim" created="Tue, 17 Apr 2012 20:24:30 +0000"  >&lt;p&gt;Patch for 1.0 branch attached.&lt;/p&gt;</comment>
                            <comment id="13255963" author="jbellis" created="Tue, 17 Apr 2012 21:27:20 +0000"  >&lt;p&gt;committed, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12523009" name="0001-Abort-SSTableWriter-when-exception-occured.patch" size="3595" author="yukim" created="Tue, 17 Apr 2012 19:45:16 +0000"/>
                            <attachment id="12515552" name="0001-CASSANDRA-3946-BulkRecordWriter-shouldn-t-stream-any.patch" size="1637" author="lenn0x" created="Wed, 22 Feb 2012 08:24:47 +0000"/>
                            <attachment id="12523016" name="3946-1.0.txt" size="2995" author="yukim" created="Tue, 17 Apr 2012 20:24:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yukim]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gq4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>