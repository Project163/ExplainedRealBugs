<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:26:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-15458] CQL: Unable to escape single quote in a map&lt;int,text&gt; attribute</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-15458</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;Overview&quot;&gt;&lt;/a&gt;Overview&lt;/h3&gt;

&lt;p&gt;For&#160;&lt;tt&gt;text&lt;/tt&gt;&#160;attributes, CQL allows escaping single quote&#160;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/cassandra-user/201108.mbox/%3C20110803152250.294300@gmx.net%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;using additional single quote&lt;/a&gt;. But applying the same syntax for a&#160;&lt;tt&gt;map&amp;lt;int,text&amp;gt;&lt;/tt&gt;&#160;attribute does not work. Inconsistent behavior was observed between&#160;&lt;tt&gt;text&lt;/tt&gt;&#160;datatype and&#160;&lt;tt&gt;map&amp;lt;int,text&amp;gt;&lt;/tt&gt; datatype.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;CQLsemanticproposal&quot;&gt;&lt;/a&gt;CQL semantic proposal&lt;/h3&gt;

&lt;p&gt;Cassandra (CQL) should apply same escaping&#160;semantics on &lt;tt&gt;text&lt;/tt&gt; and text-within-map &lt;tt&gt;map&amp;lt;int,text&amp;gt;&lt;/tt&gt; datatypes.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Reproducingthebug%3A&quot;&gt;&lt;/a&gt;Reproducing the bug:&lt;/h3&gt;

&lt;p&gt;CREATE query:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE TABLE university.test (id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, data map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, text&amp;gt;, PRIMARY KEY (id));&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;INSERT query:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
insert into university.test (id, data) values(1, {1:&lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;m newb&apos;&lt;/span&gt;});&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;On running the aforementioned INSERT query, Cassandra inserts and returns&#160;{&lt;tt&gt;1: &apos;I&apos;&apos;m newb&apos;&lt;/tt&gt;}&#160;while the expected result is&#160;{&lt;tt&gt;1: &apos;I&apos;m newb&apos;&lt;/tt&gt;}&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Technicaldetails%C2%A0&quot;&gt;&lt;/a&gt;Technical details&#160;&lt;/h3&gt;

&lt;p&gt;OS: CentOS 7&lt;/p&gt;

&lt;p&gt;Kernel: Linux 3.10.0-1062.9.1.el7.x86_64&lt;/p&gt;

&lt;p&gt;Cassandra version:&#160;3.11.5&lt;/p&gt;

&lt;p&gt;Screenshot: &lt;a href=&quot;https://i.stack.imgur.com/PLAan.png&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Output after SELECT query&lt;/a&gt;&lt;br/&gt;
 &#160;&lt;br/&gt;
&lt;ins&gt;Additional information for newcomers:&lt;/ins&gt;&lt;/p&gt;

&lt;p&gt;The issue seems to come from the ANTLR Lexer logic for &lt;tt&gt;STRING_LITERAL&lt;/tt&gt;. A unit test should also be added in &lt;tt&gt;SelectTest&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13275256">CASSANDRA-15458</key>
            <summary>CQL: Unable to escape single quote in a map&lt;int,text&gt; attribute</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="yziadeh">Yaman Ziadeh</assignee>
                                    <reporter username="singh-abhijeet">Abhijeet Singh</reporter>
                        <labels>
                            <label>AdventCalendar2021</label>
                            <label>lhf</label>
                    </labels>
                <created>Wed, 18 Dec 2019 12:43:40 +0000</created>
                <updated>Mon, 23 Jan 2023 10:10:41 +0000</updated>
                            <resolved>Tue, 17 Jan 2023 20:31:24 +0000</resolved>
                                                        <component>CQL/Interpreter</component>
                    <component>CQL/Semantics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17506863" author="JIRAUSER285315" created="Tue, 15 Mar 2022 11:35:24 +0000"  >&lt;p&gt;I&apos;ve started looking at the lexer and didn&apos;t found any faults. Created a unittest and it passes... Tried reproducing in ccm and indeed there seems to be some kind of a bug.&lt;/p&gt;

&lt;p&gt;Added debug logs to UpdateStatement class to make sure that the values are coming in correctly and they&apos;re:&lt;/p&gt;

&lt;p&gt;t1:&lt;/p&gt;

&lt;p&gt;1,&apos;I&apos;m newb&lt;/p&gt;

&lt;p&gt;t2&lt;/p&gt;

&lt;p&gt;1,{1: &apos;I&apos;m newb&apos;}&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE KEYSPACE test WITH replication = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NetworkTopologyStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;datacenter1&apos;&lt;/span&gt;: 3};
CREATE TABLE test.t1 (id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, data text, PRIMARY KEY (id));
CREATE TABLE test.t2 (id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, data map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, text&amp;gt;, PRIMARY KEY (id));
INSERT INTO test.t1 (id, data) values(1, &lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;m newb&apos;&lt;/span&gt;);
INSERT INTO test.t2 (id, data) values(1, {1:&lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;m newb&apos;&lt;/span&gt;});
SELECT data from test.t1;&#160;data
----------
&#160;I&apos;m newb
SELECT data from test.t2;&#160;data
------------------
&#160;{1: &lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;m newb&apos;&lt;/span&gt;}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; do you have any ideas where to look further? I&apos;m kinda stuck right now&lt;/p&gt;</comment>
                            <comment id="17507423" author="JIRAUSER285315" created="Wed, 16 Mar 2022 08:35:25 +0000"  >&lt;p&gt;I&apos;ve continued searching and found where the issue is, it&apos;s in pylib/cqlshlib/formatting.py.&lt;/p&gt;

&lt;p&gt;When map is formatted quote=True is sent to the format function and when text is formatted quote=False is sent. I.e changing quote=False in the format_value_map will produce the same results as for text.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT * FROM test.t1;
 id | data
----+----------
&#160; 1 | I&apos;m newb

SELECT * FROM test.t2;
 id | data
----+---------------
&#160; 1 | {1: I&apos;m newb} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So the question arises here, do we want to quote or not quote? I guess we want to have the same behavior for text as well as text in map.&lt;/p&gt;</comment>
                            <comment id="17507451" author="blerer" created="Wed, 16 Mar 2022 09:50:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;I guess we want to have the same behavior for text as well as text in map.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, you are right. We should have the same behavior.&lt;/p&gt;

&lt;p&gt;Nice work in finding the root cause of the problem &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  &lt;/p&gt;</comment>
                            <comment id="17508714" author="JIRAUSER285315" created="Fri, 18 Mar 2022 10:48:34 +0000"  >&lt;p&gt;While looking at the python tests i found why there&apos;s a difference. See: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6172&quot; title=&quot;COPY TO command doesn&amp;#39;t escape single quote in collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6172&quot;&gt;&lt;del&gt;CASSANDRA-6172&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve tested unquoting both maps and other collections and ran some tests locally with ccm. The error mentioned in the ticket above is not reproducible (atleast not with what was stated in the ticket).&lt;/p&gt;

&lt;p&gt;Also noticed that some of the types in a UDTs are quoted but not all, which feels strange as well.&lt;/p&gt;

&lt;p&gt;It&apos;s a pretty drastic change but if we want to be consistent we should keep everything unquoted (since everything is unquoted by default except when the values are in a collection, or if values are in UDT).&lt;/p&gt;

&lt;p&gt;What do you think Benjamin?&#160;&lt;/p&gt;</comment>
                            <comment id="17654193" author="JIRAUSER298541" created="Tue, 3 Jan 2023 22:15:00 +0000"  >&lt;p&gt;Created a PR (&lt;a href=&quot;https://github.com/apache/cassandra/pull/2063)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2063)&lt;/a&gt; to standardize all formatting in pylib/cqlshlib/formatting.py to be unquoted (quote=False) and escaped. Previously, collections formatting was not consistent with text formatting as mentioned above. With these proposed changes, retrieved text, map, set, list, tuple, and UDT data will be escaped and unquoted.&#160;&lt;/p&gt;

&lt;p&gt;For example,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE KEYSPACE test WITH replication = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NetworkTopologyStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;datacenter1&apos;&lt;/span&gt;: 3};
USE test;
CREATE TABLE t1 (id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, data map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, text&amp;gt;, PRIMARY KET (id));
INSERT INTO t1 (id, data) values (1, &lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;m newb&apos;&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When fetching Map data from table t1, this would have been the output prior to these changes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 id | data
----+---------------
&#160; 1 | {1: &lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;m newb&apos;&lt;/span&gt;} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now, the data will be escaped and unquoted as such:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;id | data
----+---------------
&#160; 1 | {1: I&apos;m newb} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Previously for Sets:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 id | data
----+------------
&#160; 1 | {&lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;m newb&apos;&lt;/span&gt;} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and now:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;id | data
----+------------
&#160; 1 | {I&apos;m newb}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Previously for UDTs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE TYPE random (data text);
CREATE TABLE t5 (id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, data random, PRIMARY KEY(id));
INSERT INTO t5 (id, data) values (1, {data: &lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;m newb&apos;&lt;/span&gt;});
SELECT * FROM t5;

&#160;id | data
----+------------------
&#160; 1 | {data: &lt;span class=&quot;code-quote&quot;&gt;&apos;I&apos;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;m newb&apos;&lt;/span&gt;} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and now:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;id | data
----+------------------
&#160; 1 | {data: I&apos;m newb} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let me know what you think!&lt;/p&gt;




&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17654556" author="paulo" created="Wed, 4 Jan 2023 16:59:57 +0000"  >&lt;p&gt;Thanks for looking into this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yziadeh&quot; class=&quot;user-hover&quot; rel=&quot;yziadeh&quot;&gt;yziadeh&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t seem like this is a problem at the parser level, as shown by the server unit tests, but just a cqlsh display setting.&lt;/p&gt;

&lt;p&gt;When reviewing this I realized that the example shown in the ticket description might not be incorrect:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT data from test.t1; data
----------
 I&apos;m newb

SELECT data from test.t2; data
------------------
 {1: &apos;I&apos;&apos;m newb&apos;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If we were to standardize quoting across simple text types vs complex types with text on cqlsh, we would have the following options:&lt;/p&gt;

&lt;p&gt;a) Quote simple text fields:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT data from test.t1; data
----------
 &apos;I&apos;&apos;m newb&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;b) Unquote complex types.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT data from test.t2; data
------------------
 {1: I&apos;m newb}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The problem with a) is that this would change the display of simple text fields on CQLSH, what could cause compatibility problems.&lt;/p&gt;

&lt;p&gt;The problem with b) is that it makes the presentation more ambiguous, for instance in the example above we don&apos;t know if the key &apos;1&apos; on {&lt;tt&gt;1: I&apos;m newb&lt;/tt&gt;} is a text or number without looking at the schema, while {&lt;tt&gt;1: &apos;I&apos;&apos;m newb&apos;&lt;/tt&gt;} makes it immediately visible that the key &apos;1&apos; is a number.&lt;/p&gt;

&lt;p&gt;I belive this is working as intended, despite the confusion. I propose we commit just the tests without changing the behavior.&lt;/p&gt;

&lt;p&gt;What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefan.miklosovic&quot; class=&quot;user-hover&quot; rel=&quot;stefan.miklosovic&quot;&gt;stefan.miklosovic&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17654567" author="brandon.williams" created="Wed, 4 Jan 2023 17:39:59 +0000"  >&lt;p&gt;I agree that neither a) or b) is very desirable, so just committing the tests makes sense to me.&lt;/p&gt;</comment>
                            <comment id="17654629" author="JIRAUSER298541" created="Wed, 4 Jan 2023 20:44:44 +0000"  >&lt;p&gt;Makes sense, I updated the tests to reflect current behavior and reverted pylib/cqlshlib/formatting.py changes.&lt;/p&gt;</comment>
                            <comment id="17655151" author="paulo" created="Thu, 5 Jan 2023 22:27:52 +0000"  >&lt;p&gt;Submitted CI run for &lt;a href=&quot;https://github.com/yziadeh/cassandra/tree/CASSANDRA-18035&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt; with tests:&lt;br/&gt;
*&#160;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2159/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2159/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17676272" author="paulo" created="Thu, 12 Jan 2023 17:19:37 +0000"  >&lt;p&gt;cancelling patch as there seems to some failures on &lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2159/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TestCqlshCompletion&lt;/a&gt; due to creation of new table&lt;/p&gt;</comment>
                            <comment id="17676287" author="JIRAUSER298541" created="Thu, 12 Jan 2023 18:36:19 +0000"  >&lt;p&gt;The tests that failed were all to do with auto completion, they can be found here: pylib/cqlshlib/test/test_cqlsh_completion.py.&#160;&lt;/p&gt;

&lt;p&gt;Whenever new tables or types are added to pylib/cqlshlib/test/test_keyspace_init.cql, their name must be added to the appropriate completion tests. In this case, I fixed the broken tests by firstly renaming the new table &apos;t1&apos; to a more standard name &apos;escape_quotes&apos; and the new type &apos;random&apos; to &apos;quote_udt&apos;, then adding them to completion tests test_complete_in_create_type, test_complete_in_alter_type, and test_complete_in_alter_table respectively.&#160;&lt;/p&gt;</comment>
                            <comment id="17677958" author="paulo" created="Tue, 17 Jan 2023 20:10:33 +0000"  >&lt;p&gt;I noticed this issue is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10263&quot; title=&quot;Insert in Cassandra in a collection, values with single quote&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10263&quot;&gt;&lt;del&gt;CASSANDRA-10263&lt;/del&gt;&lt;/a&gt; which was closed as not a problem. Since this seems to be a recurrent confusion I created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18170&quot; title=&quot;Document cqlsh single quote escaping behavior on complex vs simple types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18170&quot;&gt;&lt;del&gt;CASSANDRA-18170&lt;/del&gt;&lt;/a&gt; to document this behavior.&lt;/p&gt;

&lt;p&gt;I squashed &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yziadeh&quot; class=&quot;user-hover&quot; rel=&quot;yziadeh&quot;&gt;yziadeh&lt;/a&gt;&apos;s tests validating the quoting behavior into this commit: &lt;a href=&quot;https://github.com/pauloricardomg/cassandra/commit/437acae1e80f12e02e317168402874c64c606188&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/pauloricardomg/cassandra/commit/437acae1e80f12e02e317168402874c64c606188&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CI apparently looks good: &lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2201/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2201/&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2201/testReport/org.apache.cassandra.cql3.validation.operations/SelectTest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SelectTest&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2201/testReport/cqlshlib.python3.jdk8.cython.test.test_cqlsh_completion/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;test_cqlsh_completion&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/2201/testReport/cqlshlib.python3.jdk8.cython.test.test_cqlsh_output/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;test_cqlsh_output&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; ok to commit the tests and close this as not a problem?&lt;/p&gt;</comment>
                            <comment id="17677964" author="brandon.williams" created="Tue, 17 Jan 2023 20:13:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;ok to commit the tests and close this as not a problem?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;LGTM, +1.&lt;/p&gt;</comment>
                            <comment id="17677971" author="paulo" created="Tue, 17 Jan 2023 20:30:38 +0000"  >&lt;p&gt;Thanks Brandon&lt;/p&gt;

&lt;p&gt;Tests committed to trunk as &lt;a href=&quot;https://github.com/apache/cassandra/commit/1528798a5bb36187cf2b952b5b5a8b0982d262fb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1528798a5bb36187cf2b952b5b5a8b0982d262fb&lt;/a&gt;, will close as Not a Problem.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12861646">CASSANDRA-10263</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13519947">CASSANDRA-18170</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13420811">CASSANDRA-17238</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12989103" name="cass-screen.png" size="9973" author="singh-abhijeet" created="Wed, 18 Dec 2019 12:41:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yziadeh]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12314420" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Mentor</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>paulo</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09sw8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[paulo]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Unit &amp;amp; cqlsh tests.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>