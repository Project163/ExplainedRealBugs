<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:43:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6811] nodetool no longer shows node joining</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6811</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When we added effective ownership output to nodetool ring/status, we accidentally began excluding joining nodes because we iterate the ownership maps instead of the the endpoint to token map when printing the output, and the joining nodes don&apos;t have any ownership.  The simplest thing to do is probably iterate the token map instead, and not output any ownership info for joining nodes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12699255">CASSANDRA-6811</key>
            <summary>nodetool no longer shows node joining</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vijay2win@yahoo.com">Vijay</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Mar 2014 20:14:26 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:52 +0000</updated>
                            <resolved>Wed, 12 Mar 2014 04:18:35 +0000</resolved>
                                        <fixVersion>1.2.16</fixVersion>
                    <fixVersion>2.0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13925021" author="vijay2win@yahoo.com" created="Sat, 8 Mar 2014 21:36:54 +0000"  >&lt;p&gt;Just to clarify we have this information as a part of &quot;nodetool status&quot;, we might want to display the same information with 0% Owns? or potentially what it will own after the transient state.&lt;/p&gt;</comment>
                            <comment id="13925053" author="brandon.williams" created="Sat, 8 Mar 2014 23:48:37 +0000"  >&lt;p&gt;Here&apos;s a patch that illustrates what I mean and fixes &apos;ring&apos; output.  &apos;status&apos; is a bit more involved, but considering how long we&apos;ve done this I&apos;m fine with not getting fancy about inferring ownership on joining nodes.&lt;/p&gt;</comment>
                            <comment id="13925064" author="brandon.williams" created="Sun, 9 Mar 2014 00:17:05 +0000"  >&lt;p&gt;The easiest way to test this is to put a node into write survey mode &lt;tt&gt;-Dcassandra.write_survey_mode=true&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="13925321" author="vijay2win@yahoo.com" created="Sun, 9 Mar 2014 20:41:08 +0000"  >&lt;p&gt;Thanks, +1 and committed...&lt;/p&gt;

&lt;p&gt;Inlined the comparison and replaced the empty string with &quot;?&quot;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Note: Ownership information does not include topology; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; complete information, specify a keyspace

Datacenter: datacenter1
==========
Address         Rack        Status State   Load            Owns                Token                                       

17.198.227.158  rack1       Up     Joining 9.44 KB         ?                   -7564491331177403445                        
17.198.227.157  rack1       Up     Normal  14.03 KB        100.00%             -2195150324932625854                        

-bash-4.1$ ./apache-cassandra-1.2.15-SNAPSHOT/bin/nodetool ring
Note: Ownership information does not include topology; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; complete information, specify a keyspace

Datacenter: datacenter1
==========
Address         Rack        Status State   Load            Owns                Token                                       
                                                                               -2195150324932625854                        
17.198.227.158  rack1       Up     Normal  10.77 KB        70.89%              -7564491331177403445                        
17.198.227.157  rack1       Up     Normal  14.03 KB        29.11%              -2195150324932625854                        

-bash-4.1$ ./apache-cassandra-1.2.15-SNAPSHOT/bin/nodetool ring
Note: Ownership information does not include topology; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; complete information, specify a keyspace

Datacenter: datacenter1
==========
Address         Rack        Status State   Load            Owns                Token                                       
                                                                               -2195150324932625854                        
17.198.227.158  rack1       Up     Leaving 10.77 KB        70.89%              -7564491331177403445                        
17.198.227.157  rack1       Up     Normal  14.03 KB        29.11%              -2195150324932625854                       
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13926117" author="brandon.williams" created="Mon, 10 Mar 2014 19:51:58 +0000"  >&lt;p&gt;We shouldn&apos;t resolve this until we fix &apos;status&apos; too.&lt;/p&gt;</comment>
                            <comment id="13930174" author="vijay2win@yahoo.com" created="Tue, 11 Mar 2014 09:56:27 +0000"  >&lt;p&gt;Sorry, I misunderstood the comment thinking nodetool status doesn&apos;t need a fix...&lt;br/&gt;
Please see the attached, actually it fixes the joining status for Multi DC setup. (&lt;a href=&quot;http://pastebin.com/QUqcPJen&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pastebin.com/QUqcPJen&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;NOTE: &lt;br/&gt;
I did a little bit of refactoring to reuse the code, hope it is ok.&lt;br/&gt;
Effective ownership for nodes might be broken before and after this patch, since every line shows the host ownership not the line items ownership.&lt;/p&gt;</comment>
                            <comment id="13930717" author="brandon.williams" created="Tue, 11 Mar 2014 18:26:11 +0000"  >&lt;p&gt;LGTM, and more efficient by not making a jmx call for every node just to get the first token. +1&lt;/p&gt;</comment>
                            <comment id="13931368" author="vijay2win@yahoo.com" created="Wed, 12 Mar 2014 04:18:35 +0000"  >&lt;p&gt;Committed, Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12713446">CASSANDRA-7204</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12702558">CASSANDRA-6891</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12633881" name="0001-CASSANDRA-6811-v2.patch" size="13778" author="vijay2win@yahoo.com" created="Tue, 11 Mar 2014 09:56:27 +0000"/>
                            <attachment id="12633570" name="ringfix.txt" size="1785" author="brandon.williams" created="Sat, 8 Mar 2014 23:48:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[vijay2win@yahoo.com]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377602</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1t2dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12319262">1.2.0 beta 1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>