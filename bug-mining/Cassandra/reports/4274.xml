<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:02:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11657] LongLeveledCompactionStrategyTest broken since CASSANDRA-10099</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11657</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Seems &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10099&quot; title=&quot;Improve concurrency in CompactionStrategyManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10099&quot;&gt;&lt;del&gt;CASSANDRA-10099&lt;/del&gt;&lt;/a&gt; broke LongLeveledCompactionStrategyTest&lt;/p&gt;</description>
                <environment></environment>
        <key id="12962510">CASSANDRA-11657</key>
            <summary>LongLeveledCompactionStrategyTest broken since CASSANDRA-10099</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="marcuse">Marcus Eriksson</reporter>
                        <labels>
                            <label>lcs</label>
                    </labels>
                <created>Tue, 26 Apr 2016 07:38:22 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:34 +0000</updated>
                            <resolved>Fri, 13 May 2016 07:13:55 +0000</resolved>
                                        <fixVersion>3.7</fixVersion>
                                    <component>Legacy/Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15257723" author="krummas" created="Tue, 26 Apr 2016 08:17:27 +0000"  >&lt;p&gt;patch to get the compaction task the &apos;correct&apos; way from compaction strategy manager, to make sure we have the proper synchronization&lt;br/&gt;
&lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/11657&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/11657&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;tests (I&apos;ve been running it in a loop locally without failures as well):&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-11657-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-11657-testall/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-11657-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-11657-dtest/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15258801" author="yukim" created="Tue, 26 Apr 2016 19:54:34 +0000"  >&lt;p&gt;hmm, I don&apos;t see LongLeveledCompactionStrategyTest failure in the latest trunk.&lt;br/&gt;
What do you see when the test fails?&lt;/p&gt;</comment>
                            <comment id="15258810" author="krummas" created="Tue, 26 Apr 2016 19:58:42 +0000"  >&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/view/trunk/job/trunk_testall/lastCompletedBuild/testReport/org.apache.cassandra.db.compaction/LongLeveledCompactionStrategyTest/history/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/trunk/job/trunk_testall/lastCompletedBuild/testReport/org.apache.cassandra.db.compaction/LongLeveledCompactionStrategyTest/history/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;it fails with the last written key &amp;gt;= current key error&lt;/p&gt;</comment>
                            <comment id="15271378" author="yukim" created="Wed, 4 May 2016 20:24:50 +0000"  >&lt;p&gt;I still am not sure what&apos;s causing that error (and I still cannot reproduce in local).&lt;br/&gt;
Looking at the code change around &lt;tt&gt;LongLeveledCompactionStrategyTest&lt;/tt&gt;, background task is disabled and &lt;tt&gt;CompactionTask&lt;/tt&gt; is created sequentially.&lt;/p&gt;
</comment>
                            <comment id="15280149" author="krummas" created="Wed, 11 May 2016 13:57:36 +0000"  >&lt;p&gt;Tried to reproduce this today by running &lt;tt&gt;testParallelLeveledCompaction&lt;/tt&gt; in a loop, never failed, then I realized that the new &lt;tt&gt;testLeveledScanner&lt;/tt&gt; breaks the leveled manifest and we can&apos;t get compaction tasks after that (the sstable is in the wrong level and we can&apos;t remove it from the manifest then: &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/compaction/LeveledManifest.java#L489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/compaction/LeveledManifest.java#L489&lt;/a&gt;). This gets getNextBackgroundTask stuck in a loop since we try marking a non-existing sstable as compacting.&lt;/p&gt;

&lt;p&gt;I have no idea why this test failed before &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9935&quot; title=&quot;Repair fails with RuntimeException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9935&quot;&gt;&lt;del&gt;CASSANDRA-9935&lt;/del&gt;&lt;/a&gt; but I cant reproduce that anymore.&lt;/p&gt;

&lt;p&gt;Patch to run on separate tables here: &lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/11657-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/11657-2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15281967" author="yukim" created="Thu, 12 May 2016 20:03:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15282487" author="krummas" created="Fri, 13 May 2016 07:13:55 +0000"  >&lt;p&gt;committed, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wqif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>yukim</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yukim]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>