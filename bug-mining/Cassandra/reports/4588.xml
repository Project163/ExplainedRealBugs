<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:05:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12620] Resurrected rows with expired TTL on update to 3.x</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12620</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We had the below table on C* 2.x (dse 4.8.4, we assume was 2.1.15.1423 according to documentation), and were entering TTLs at write-time using the DataStax C# Driver (using the POCO mapper).&lt;/p&gt;

&lt;p&gt;Upon upgrade to 3.0.8.1293 (DSE 5.0.2), we are seeing a lot of rows that:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;should have been TTL&apos;d&lt;/li&gt;
	&lt;li&gt;have no non-primary-key column data&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE applicationservices.aggregate_bucket_event_v3 (
    bucket_type &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    bucket_id text,
    date timestamp,
    aggregate_id text,
    event_type &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    event_id text,
    entities list&amp;lt;frozen&amp;lt;tuple&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, text&amp;gt;&amp;gt;&amp;gt;,
    identity_sid text,
    PRIMARY KEY ((bucket_type, bucket_id), date, aggregate_id, event_type, event_id)
) WITH CLUSTERING ORDER BY (date DESC, aggregate_id ASC, event_type ASC, event_id ASC)
    AND bloom_filter_fp_chance = 0.1
    AND caching = {&lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;ALL&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;}
    AND comment = &apos;&apos;
    AND compaction = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.db.compaction.LeveledCompactionStrategy&apos;&lt;/span&gt;}
    AND compression = {&lt;span class=&quot;code-quote&quot;&gt;&apos;chunk_length_in_kb&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;64&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.io.compress.LZ4Compressor&apos;&lt;/span&gt;}
    AND crc_check_chance = 1.0
    AND dclocal_read_repair_chance = 0.1
    AND default_time_to_live = 0
    AND gc_grace_seconds = 864000
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = &lt;span class=&quot;code-quote&quot;&gt;&apos;99PERCENTILE&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
    &lt;span class=&quot;code-quote&quot;&gt;&quot;partition&quot;&lt;/span&gt; : {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;26492&quot;&lt;/span&gt; ],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 54397932
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;rows&quot;&lt;/span&gt; : [
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 54397961,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;clustering&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-09-07 23:33Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;3651664&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;773665449947099136&quot;&lt;/span&gt; ],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-09-07T23:34:09.758Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ttl&quot;&lt;/span&gt; : 172741, &lt;span class=&quot;code-quote&quot;&gt;&quot;expires_at&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-09-09T23:33:10Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;expired&quot;&lt;/span&gt; : &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; },
        &lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt; : [
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;identity_sid&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;p_tw_zahidana&quot;&lt;/span&gt; },
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;entities&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;marked_deleted&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-09-07T23:34:09.757999Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-09-07T23:34:09Z&quot;&lt;/span&gt; } },
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;entities&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;936e17e1-7553-11e6-9b92-29a33b5827c3&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;0:https\\:&lt;span class=&quot;code-comment&quot;&gt;//www.youtube.com/watch?v=pwAJAssv6As&quot;&lt;/span&gt; },
&lt;/span&gt;          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;entities&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;936e17e2-7553-11e6-9b92-29a33b5827c3&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2:youtube&quot;&lt;/span&gt; }
        ]
      },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;,

   },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 54397177,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;clustering&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-17 10:00Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;6387376&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;765850666296225792&quot;&lt;/span&gt; ],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-17T11:26:15.917001Z&quot;&lt;/span&gt; },
        &lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt; : [ ]
      },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 54397227,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;clustering&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-17 07:00Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;6387376&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;765805367347601409&quot;&lt;/span&gt; ],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-17T08:11:17.587Z&quot;&lt;/span&gt; },
        &lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt; : [ ]
      },
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 54397276,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;clustering&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-17 04:00Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;6387376&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;765760069858365441&quot;&lt;/span&gt; ],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-17T05:58:11.228Z&quot;&lt;/span&gt; },
        &lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt; : [ ]
      },
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13003422">CASSANDRA-12620</key>
            <summary>Resurrected rows with expired TTL on update to 3.x</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blerer">Benjamin Lerer</assignee>
                                    <reporter username="csauve">Collin Sauve</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Sep 2016 02:56:45 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:20 +0000</updated>
                            <resolved>Fri, 16 Dec 2016 12:05:36 +0000</resolved>
                                        <fixVersion>3.0.11</fixVersion>
                    <fixVersion>3.10</fixVersion>
                                    <component>Legacy/Local Write-Read Paths</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15472553" author="csauve" created="Thu, 8 Sep 2016 02:58:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; could you have a look?&lt;/p&gt;</comment>
                            <comment id="15472809" author="csauve" created="Thu, 8 Sep 2016 05:15:45 +0000"  >&lt;p&gt;Here&apos;s another table that is exhibiting this behaviour, but does not have the &quot;DESC+ASC&quot; clustering as discussed.&lt;/p&gt;

&lt;p&gt;This data was inserted using the Spark connector &lt;tt&gt;saveToCassandra&lt;/tt&gt; with &lt;tt&gt;WriteConf(ttl = TTLOption.constant(Duration.standardDays(2)))&lt;/tt&gt; (it also has a default ttl of 2 days on the table definition)&lt;/p&gt;

&lt;p&gt;As in the initial example, this data is never explicitly deleted and only TTLd.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE applicationservices.aggregate_bucket_event_analysis_v3 (
    bucket_type &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    bucket_id text,
    processed_date timestamp,
    results list&amp;lt;frozen&amp;lt;udt_aggregate_bucket_event_analysis_v3_result&amp;gt;&amp;gt;,
    PRIMARY KEY ((bucket_type, bucket_id), processed_date)
) WITH CLUSTERING ORDER BY (processed_date DESC)
    AND bloom_filter_fp_chance = 0.01
    AND caching = {&lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;ALL&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;}
    AND comment = &apos;&apos;
    AND compaction = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;max_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;32&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;min_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;}
    AND compression = {&lt;span class=&quot;code-quote&quot;&gt;&apos;chunk_length_in_kb&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;64&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.io.compress.LZ4Compressor&apos;&lt;/span&gt;}
    AND crc_check_chance = 1.0
    AND dclocal_read_repair_chance = 0.1
    AND default_time_to_live = 172800
    AND gc_grace_seconds = 864000
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = &lt;span class=&quot;code-quote&quot;&gt;&apos;99PERCENTILE&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;partition&quot;&lt;/span&gt; : {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;26316&quot;&lt;/span&gt; ],
      &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 18119
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;rows&quot;&lt;/span&gt; : [
		&lt;span class=&quot;code-comment&quot;&gt;//.....
&lt;/span&gt;		{
			&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;,
			&lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 25035,
			&lt;span class=&quot;code-quote&quot;&gt;&quot;clustering&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-16 14:00Z&quot;&lt;/span&gt; ],
			&lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-16T14:00:23.927005Z&quot;&lt;/span&gt; },
			&lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt; : [ ]
		},
		{
			&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;,
			&lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 25054,
			&lt;span class=&quot;code-quote&quot;&gt;&quot;clustering&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-16 12:00Z&quot;&lt;/span&gt; ],
			&lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-16T12:00:13.880002Z&quot;&lt;/span&gt; },
			&lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt; : [ ]
		},
		{
			&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;,
			&lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 25073,
			&lt;span class=&quot;code-quote&quot;&gt;&quot;clustering&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-16 10:00Z&quot;&lt;/span&gt; ],
			&lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-08-16T10:00:32.998006Z&quot;&lt;/span&gt; },
			&lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt; : [ ]
		},	
		&lt;span class=&quot;code-comment&quot;&gt;//.....&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15472816" author="csauve" created="Thu, 8 Sep 2016 05:17:21 +0000"  >&lt;p&gt;If needed, for above, the UDTs are:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh:applicationservices&amp;gt; describe type udt_aggregate_bucket_event_analysis_v3_result;

CREATE TYPE applicationservices.udt_aggregate_bucket_event_analysis_v3_result (
    number_of_uses &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    entity_type &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    entity_value text,
    event_details frozen&amp;lt;list&amp;lt;frozen&amp;lt;udt_aggregate_bucket_event_analysis_v3_details&amp;gt;&amp;gt;&amp;gt;
);

cqlsh:applicationservices&amp;gt; describe type udt_aggregate_bucket_event_analysis_v3_details;

CREATE TYPE applicationservices.udt_aggregate_bucket_event_analysis_v3_details (
    aggregate_id text,
    identity_sid text,
    event_type &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    event_id text,
    event_date timestamp
);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15525525" author="blerer" created="Tue, 27 Sep 2016 08:51:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=csauve&quot; class=&quot;user-hover&quot; rel=&quot;csauve&quot;&gt;csauve&lt;/a&gt; I did not manage to reproduce the problem. So guess, that I did something different that you.&lt;br/&gt;
Here is what I did:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;On the latest 2.1: I created the &lt;tt&gt;aggregate_bucket_event_v3&lt;/tt&gt; table&lt;/li&gt;
	&lt;li&gt;Inserted a couple of dummy rows with TTL.&lt;/li&gt;
	&lt;li&gt;Waited for the TTL to expire.&lt;/li&gt;
	&lt;li&gt;Flushed the memtables to disk with nodetool&lt;/li&gt;
	&lt;li&gt;Stopped the server&lt;/li&gt;
	&lt;li&gt;Removed the commitlog and saved_cache directory&lt;/li&gt;
	&lt;li&gt;Started the 3.0 server&lt;/li&gt;
	&lt;li&gt;upgraded the SSTables with node tools&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Did you do something differently? Do you have the same problems for all your rows that have expired?&lt;/p&gt;</comment>
                            <comment id="15526192" author="mguissine" created="Tue, 27 Sep 2016 13:52:25 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; &lt;br/&gt;
Fist of all we had 3-node DSE cluster. The upgrade procedure was:&lt;/p&gt;

&lt;p&gt;1. Disable OpsCenter repair service and Spark job-server and workers &lt;br/&gt;
2. On the node being upgraded&lt;br/&gt;
    a. Drain the node using nodetool&lt;br/&gt;
    b. Stop DSE&lt;br/&gt;
    c. Upgrade to 3.0&lt;br/&gt;
    d. Start DSE &lt;br/&gt;
    e. upgrade SSTables using nodetool&lt;br/&gt;
3. Repeat for all nodes in the cluster&lt;/p&gt;

&lt;p&gt;Note that upgradesstables stack a few times and we had to re-run it. More than one table was affected and many rows in those tables. &lt;/p&gt;</comment>
                            <comment id="15595123" author="blerer" created="Fri, 21 Oct 2016 13:45:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mguissine&quot; class=&quot;user-hover&quot; rel=&quot;mguissine&quot;&gt;mguissine&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=csauve&quot; class=&quot;user-hover&quot; rel=&quot;csauve&quot;&gt;csauve&lt;/a&gt; could you give me the original content of one of the expired rows that was resurrected ?&lt;/p&gt;

&lt;p&gt;I start to wonder if the problem is not specific to some data. &lt;/p&gt;</comment>
                            <comment id="15602304" author="mguissine" created="Mon, 24 Oct 2016 15:25:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; Unfortunately we don&apos;t have backups of the data from pre-upgrade, those have been purged a while back. &lt;/p&gt;</comment>
                            <comment id="15722517" author="bric3" created="Mon, 5 Dec 2016 15:21:25 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;We just had the same problem, upgrading from Cassandra 2.1.13 / DSE 4.8.6 to Cassandra 3.0.10 / DSE 5.0.4. The problem has been identified on 3 different environments.&lt;/p&gt;

&lt;p&gt;Dead / tombstoned rows with an expired TTL show up after the upgrade. The thing is only the primary key is non null, all other fields are null. We only insert non null values using TTL that have various TTL from 60s to 1day.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from ttl_entries where key=&lt;span class=&quot;code-quote&quot;&gt;&apos;d7c10084-724c-4117-9927-b927a972203b&apos;&lt;/span&gt;;

key | field1 | field2 | field3 | field4 | field5 | field6 | field7 | field8
--------------------------------------+----------+-----------+-----------+----------+----------+--------------+--------+-----------
d7c10084-724c-4117-9927-b927a972203b | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Here&apos;s an &lt;tt&gt;sstabledump&lt;/tt&gt; of one of the impacted row. Note that the &lt;tt&gt;liveness_info&lt;/tt&gt; is missing TTL informations:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;sstabledump row d7c10084-724c-4117-9927-b927a972203b&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;partition&quot;&lt;/span&gt; : { 
    &lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;d7c10084-724c-4117-9927-b927a972203b&quot;&lt;/span&gt; ], 
    &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 6557684 
  }, 
  &lt;span class=&quot;code-quote&quot;&gt;&quot;rows&quot;&lt;/span&gt; : [ 
    { 
      &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;, 
      &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 6557734, 
      &lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06.237Z&quot;&lt;/span&gt; }, 
      &lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt; : [ 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field2&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field3&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field4&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field5&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field6&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field8&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;marked_deleted&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06.236999Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_01&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_02&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_03&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_04&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_05&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_06&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_07&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_08&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_09&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_10&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_11&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_12&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_13&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_14&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_15&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_16&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_17&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_18&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_19&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_20&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_21&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_22&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_23&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_24&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } }, 
          { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUE_25&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-25T02:24:06Z&quot;&lt;/span&gt; } } 
      ] 
    } 
  ] 
},
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Data inserted after the upgrade with TTL have correct TTL metadata:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-29T09:43:24.953Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ttl&quot;&lt;/span&gt; : 3600, &lt;span class=&quot;code-quote&quot;&gt;&quot;expires_at&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-29T10:43:24Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;expired&quot;&lt;/span&gt; : &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s the describe table.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;table description after the upgrade&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE ttl_entries (
    key text PRIMARY KEY,
    field1 text,
    field2 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    field3 text,
    field4 bigint,
    field5 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    field6 text,
    field7 set&amp;lt;text&amp;gt;,
    field8 text
) WITH bloom_filter_fp_chance = 0.01
    AND caching = {&lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;ALL&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;}
    AND compaction = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;max_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;32&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;min_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;}
    AND compression = {&lt;span class=&quot;code-quote&quot;&gt;&apos;chunk_length_in_kb&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;64&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.io.compress.SnappyCompressor&apos;&lt;/span&gt;}
    AND crc_check_chance = 1.0
    AND dclocal_read_repair_chance = 0.0
    AND default_time_to_live = 0
    AND gc_grace_seconds = 864000
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.1
    AND speculative_retry = &lt;span class=&quot;code-quote&quot;&gt;&apos;99PERCENTILE&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Our upgrade procedure :&lt;/p&gt;

&lt;p&gt;For each node before upgrading&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;nodetool repair -pr&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Then on each node &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;nodetool drain&lt;/li&gt;
	&lt;li&gt;stop the node&lt;/li&gt;
	&lt;li&gt;change files config&lt;/li&gt;
	&lt;li&gt;link to new binaries&lt;/li&gt;
	&lt;li&gt;start the nodes&lt;/li&gt;
	&lt;li&gt;nodetool upgradesstables&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Note: code snippet have been edited to remove sensible data (field names and values)&lt;/p&gt;

&lt;p&gt;PS : I think the title should be edited to indicates that it&apos;s rows with &lt;em&gt;expired TTL&lt;/em&gt; that shows up.&lt;/p&gt;</comment>
                            <comment id="15722542" author="blerer" created="Mon, 5 Dec 2016 15:29:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bric3&quot; class=&quot;user-hover&quot; rel=&quot;bric3&quot;&gt;bric3&lt;/a&gt; do you have a dump of the original data (before upgrade)?&lt;/p&gt;</comment>
                            <comment id="15722612" author="bric3" created="Mon, 5 Dec 2016 15:58:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; We have rollbacked an environment. I&apos;m not sure I can upload the dump (maybe in private). But here&apos;s another primary key that is &lt;b&gt;expired&lt;/b&gt; before and after the upgrade :&lt;/p&gt;

&lt;p&gt;For information 1479813209 : Tue, 22 Nov 2016 11:13:29 GMT&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;sstable2json / DSE 4.8.6 / Cassandra 2.1.13&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1c5598b3-70de-4ba5-a9ec-a57a61d3f494&quot;&lt;/span&gt;,
 &lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;,1479813209,1479813209820000,&quot;&lt;/span&gt;d&quot;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field1&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field2&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field3&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field4&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field5&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:_&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;scopes:!&quot;&lt;/span&gt;,1479813209819999,&lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;,1479813209],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f4150504c49434154494f4e&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f434154414c4f475f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f434154414c4f475f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f435245444954535f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f435245444954535f5452414e53414354494f4e535f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f435245444954535f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f454e41424c494e475f5041434b&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f464f524249445f4d534953444e5f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f464f524249445f4d534953444e5f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f484f54425f434845434b&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f484f54425f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f484f54425f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f4f464645525f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f4f464645525f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f5041434b5f50524943494e475f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f5041434b5f50524943494e475f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f504152544e45525f50524f564953494f4e494e475f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f504152544e45525f50524f564953494f4e494e475f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f50524f4d4f54494f4e5f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f50524f4d4f54494f4e5f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f5245504f52545f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f53434f5045535f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f534d535f53454e44&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f555345525f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f555345525f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f56414c49444154494f4e5f53454e44&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:41444d494e5f564f4943455f44455354494e4154494f4e5f42554e444c45535f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:415554485f41444d494e5f434c49454e545f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:415554485f41444d494e5f434c49454e545f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:415554485f41444d494e5f47524f55505f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:415554485f41444d494e5f47524f55505f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:415554485f41444d494e5f555345525f52454144&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field7:415554485f41444d494e5f555345525f5752495445&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field6&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;],
           [&lt;span class=&quot;code-quote&quot;&gt;&quot;field8&quot;&lt;/span&gt;,1479813209,1479813209820000,&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;]]},
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;sstabledump / DSE 5.0.4 / Cassandra 3.0.10&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;partition&quot;&lt;/span&gt; : {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;1c5598b3-70de-4ba5-a9ec-a57a61d3f494&quot;&lt;/span&gt; ],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 0
  },
  &lt;span class=&quot;code-quote&quot;&gt;&quot;rows&quot;&lt;/span&gt; : [
    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;row&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;position&quot;&lt;/span&gt; : 50,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;liveness_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;tstamp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29.820Z&quot;&lt;/span&gt; },
      &lt;span class=&quot;code-quote&quot;&gt;&quot;cells&quot;&lt;/span&gt; : [
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field2&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field3&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field4&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field5&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field6&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field8&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;marked_deleted&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29.819999Z&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_APPLICATION&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_CATALOG_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_CATALOG_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_CREDITS_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_CREDITS_TRANSACTIONS_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_CREDITS_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_ENABLING_PACK&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_FORBID_MSISDN_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_FORBID_MSISDN_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_HOTB_CHECK&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_HOTB_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_HOTB_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_OFFER_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; }
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_OFFER_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_PACK_PRICING_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_PACK_PRICING_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_PARTNER_PROVISIONING_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_PARTNER_PROVISIONING_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_PROMOTION_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_PROMOTION_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_REPORT_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_SCOPES_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_SMS_SEND&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_USER_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_USER_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_VALIDATION_SEND&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;ADMIN_VOICE_DESTINATION_BUNDLES_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;AUTH_ADMIN_CLIENT_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;AUTH_ADMIN_CLIENT_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;AUTH_ADMIN_GROUP_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;AUTH_ADMIN_GROUP_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;AUTH_ADMIN_USER_READ&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } },
        { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;field7&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt; : [ &lt;span class=&quot;code-quote&quot;&gt;&quot;AUTH_ADMIN_USER_WRITE&quot;&lt;/span&gt; ], &lt;span class=&quot;code-quote&quot;&gt;&quot;deletion_info&quot;&lt;/span&gt; : { &lt;span class=&quot;code-quote&quot;&gt;&quot;local_delete_time&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;2016-11-22T11:13:29Z&quot;&lt;/span&gt; } }
      ]
    }
  ]
},
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;&lt;b&gt;Edit:&lt;/b&gt; the sstable2json has been done &lt;b&gt;after&lt;/b&gt; a repair.&lt;/p&gt;</comment>
                            <comment id="15722709" author="bric3" created="Mon, 5 Dec 2016 16:45:25 +0000"  >&lt;p&gt;Not sure but the liveness info looks wrong, it seems the conversion for the the &lt;em&gt;ka&lt;/em&gt; format to the new &lt;em&gt;mc&lt;/em&gt; format &lt;em&gt;forgot&lt;/em&gt; to report the expired / delete row.&lt;/p&gt;

&lt;p&gt;If I read it correctly &lt;tt&gt;&quot;cells&quot;: [[&quot;&quot;,1479813209,1479813209820000,&quot;d&quot;],&lt;/tt&gt; is the row marker, and it shows the row has the status deleted. However the upgraded entry don&apos;t show this deleted status (&lt;tt&gt;&quot;liveness_info&quot; : { &quot;tstamp&quot; : &quot;2016-11-22T11:13:29.820Z&quot; },&lt;/tt&gt;).&lt;/p&gt;
</comment>
                            <comment id="15724737" author="blerer" created="Tue, 6 Dec 2016 07:57:58 +0000"  >&lt;p&gt;Thanks for all the information. I will focus on this problem this week.&lt;/p&gt;</comment>
                            <comment id="15725619" author="bric3" created="Tue, 6 Dec 2016 14:21:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; If you&apos;ll need db files we&apos;ll have to discuss privately &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15725691" author="blerer" created="Tue, 6 Dec 2016 14:43:00 +0000"  >&lt;p&gt;Thanks for the offer. I will try with the information you gave me and tell you if I need more.   &lt;/p&gt;</comment>
                            <comment id="15725860" author="bric3" created="Tue, 6 Dec 2016 15:46:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; Actually investigating a bit more we&apos;ve found out that the issue may not be related to the upgradesstables.&lt;/p&gt;

&lt;p&gt;We&apos;ve managed to reproduce the issue with our dataset on 3 nodes (RF = 3). Here&apos;s the scenario &lt;b&gt;without upgrading sstables&lt;/b&gt;:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;all nodes are on DSE 4.8.6 / Cassandra 2.1.13 =&amp;gt; select only show valid and live data.&lt;/li&gt;
	&lt;li&gt;on a single node
	&lt;ul&gt;
		&lt;li&gt;nodetool drain&lt;/li&gt;
		&lt;li&gt;stop the node&lt;/li&gt;
		&lt;li&gt;change files config&lt;/li&gt;
		&lt;li&gt;link to new binaries (5.0.4)&lt;/li&gt;
		&lt;li&gt;start the node&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;now select show dead / expired rows&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Could it be related to how cassandra reads or translate the old sstable format (in our case &lt;tt&gt;ka&lt;/tt&gt;)&lt;/p&gt;</comment>
                            <comment id="15751054" author="blerer" created="Thu, 15 Dec 2016 10:47:28 +0000"  >&lt;p&gt;Sorry, for the delay. It tooks me some time and a certain amount of back and forth between the &lt;tt&gt;2.1&lt;/tt&gt; and &lt;tt&gt;3.0&lt;/tt&gt; code base to fully understand the problem.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bric3&quot; class=&quot;user-hover&quot; rel=&quot;bric3&quot;&gt;bric3&lt;/a&gt; Thanks for the SSTables they helped a lot.&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;2.1&lt;/tt&gt; when a row is created with a &lt;tt&gt;TTL&lt;/tt&gt; the row marker cell is created as an &lt;tt&gt;ExpiringCell&lt;/tt&gt; but when the row is compacted if the &lt;tt&gt;TTL&lt;/tt&gt; has expired the cell will be converted into a &lt;tt&gt;DeletedCell&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;3.0&lt;/tt&gt; the code used to read the post 3.0 format was only expecting an &lt;tt&gt;ExpiringCell&lt;/tt&gt; for rows with &lt;tt&gt;TTL&lt;/tt&gt; and was ignoring the local deletion time of the &lt;tt&gt;DeletedCell&lt;/tt&gt;. Due to that the row was not marked as deleted anymore.&lt;/p&gt;

&lt;p&gt;As the problem was in the code used to deserialize the post 3.0 format it was not necessary to run &lt;tt&gt;upgradesstables&lt;/tt&gt; to see the problem.&lt;/p&gt;

&lt;p&gt;I originally could not reproduce the problem because I did not think of running a compaction before upgrading (SizeTieredCompaction).&lt;/p&gt;

&lt;p&gt;I pushed a patch &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blerer:12620-3.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;


</comment>
                            <comment id="15751089" author="slebresne" created="Thu, 15 Dec 2016 11:07:13 +0000"  >&lt;p&gt;Not sure this is the proper fix (as in, it&apos;s likely fine for anyone that isn&apos;t doing wacky things, but it doesn&apos;t stricly respect backward compatibility).&lt;/p&gt;

&lt;p&gt;In 2.x, I believe we never delete a row marker explicitely, so it can only be a tombstone due to TTLs. But a row marker expiring does not absolutely guarantee the whole row is gone. Consider the following example (which is weird, for sure, but possible):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE TABLE t (k int PRIMARY KEY, v1 int, v2 int);
UPDATE t USING TIMESTAMP 0 SET v1 = 1 WHERE k = 0;
INSERT INTO t(k, v2) VALUES (0, 2) USING TIMESTAMP 1 AND TTL 3;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When the 2nd insert expires, we&apos;ll still have a row with &lt;tt&gt;v1=1&lt;/tt&gt; (though no row marker internally), and this both in 2.x and 3.x. With this patch however, we might end up generating a row deletion with timestamp 1, which &lt;em&gt;would&lt;/em&gt; delete the first UPDATE, which is stricly speaking incorrect (for the CQL semantic).&lt;/p&gt;

&lt;p&gt;Long story short, a deleted row marker is not equivalent to a row deletion, it just mean there is no row marker, and as the equivalent in 3.x of a row marker is the primary key liveness info, all we want here is make sure we don&apos;t have one. In other words, I believe the proper patch is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    assert !cell.value.hasRemaining();
-   builder.addPrimaryKeyLivenessInfo(LivenessInfo.create(cell.timestamp, cell.ttl, cell.localDeletionTime));
+   if (!cell.isTombstone())
+       builder.addPrimaryKeyLivenessInfo(LivenessInfo.create(cell.timestamp, cell.ttl, cell.localDeletionTime));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15751327" author="blerer" created="Thu, 15 Dec 2016 13:09:46 +0000"  >&lt;p&gt;Thanks for the review.&lt;br/&gt;
I updated my &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...blerer:12620-3.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt; with your change and tested it. It work perfectly including the usecase that was not working with my original fix.&lt;/p&gt;

&lt;p&gt;I will run the upgrade tests and post the results once I got them.&lt;/p&gt;</comment>
                            <comment id="15751349" author="slebresne" created="Thu, 15 Dec 2016 13:16:44 +0000"  >&lt;p&gt;Thanks, +1 assuming the tests are clean (nit: I don&apos;t think you need the &lt;tt&gt;Row.Deletion&lt;/tt&gt; import anymore).&lt;/p&gt;</comment>
                            <comment id="15754133" author="blerer" created="Fri, 16 Dec 2016 11:06:34 +0000"  >&lt;p&gt;The upgrade tests results are &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/blerer/job/blerer-12620-3.0-upgrade-upgrade/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. I checked the failing tests and they were already failing before the change.&lt;/p&gt;</comment>
                            <comment id="15754252" author="blerer" created="Fri, 16 Dec 2016 12:05:36 +0000"  >&lt;p&gt;Committed into 3.0 at c612cd8d7dbd24888c216ad53f974686b88dd601 and merged into 3.11, 3.X and trunk&lt;/p&gt;</comment>
                            <comment id="15754315" author="bric3" created="Fri, 16 Dec 2016 12:37:52 +0000"  >&lt;p&gt;Interesting, we didn&apos;t think about running &lt;tt&gt;nodetool compact&lt;/tt&gt; just &lt;tt&gt;nodetool repair&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;For self information purpose where are the sources of the tests run the jenksin instance ?&lt;/p&gt;</comment>
                            <comment id="15760611" author="blerer" created="Mon, 19 Dec 2016 08:58:28 +0000"  >&lt;p&gt;The upgrade test are part of the Dtests &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/tree/master/upgrade_tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. They are run for all the possible upgrade paths.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13049952">CASSANDRA-13320</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33da7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>