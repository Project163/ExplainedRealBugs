<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:05:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12945] Resolve unit testing without JCE security libraries installed</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12945</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Running unit tests can fail on encryption-related tests if you don&apos;t have something like the Oracle JCE libraries installed in your jdk. We can&apos;t redistribute the Oracle JCE due to export laws, then we&apos;d need to somehow get it into the &amp;lt;jdk&amp;gt;/jre/lib/security.&lt;/p&gt;

&lt;p&gt;One possibility is to ignore encryption-related tests if there is no encryption lib available. Another is to ship something like bouncycastle.jar in the test directory.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13022519">CASSANDRA-12945</key>
            <summary>Resolve unit testing without JCE security libraries installed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spod">Stefan Podkowinski</assignee>
                                    <reporter username="jasobrown">Jason Brown</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Nov 2016 15:02:37 +0000</created>
                <updated>Fri, 15 May 2020 08:04:45 +0000</updated>
                            <resolved>Mon, 28 Nov 2016 13:23:10 +0000</resolved>
                                        <fixVersion>3.10</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15689528" author="spodxx@gmail.com" created="Wed, 23 Nov 2016 09:32:47 +0000"  >&lt;p&gt;Are there any reasons not to use shorter keys in &lt;tt&gt;test/conf/cassandra.keystore&lt;/tt&gt; for the sake of compatibility? I&apos;ve tried some of the unit tests that would fail without mentioned JCE using 128 bit keys instead and they seem to work fine.&lt;/p&gt;</comment>
                            <comment id="15690234" author="jasobrown" created="Wed, 23 Nov 2016 14:25:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spodxx%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;spodxx@gmail.com&quot;&gt;spodxx@gmail.com&lt;/a&gt; wfm. What cipher/padding did you use?&lt;/p&gt;</comment>
                            <comment id="15690319" author="spodxx@gmail.com" created="Wed, 23 Nov 2016 14:58:58 +0000"  >&lt;p&gt;What I did was&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Replace export restricted JCE files with standard, weak policy files&lt;/li&gt;
	&lt;li&gt;Clone your 9633 branch and run e.g, &lt;tt&gt;EncryptingCompressorTest&lt;/tt&gt; just to get an &lt;tt&gt;java.security.InvalidKeyException: Illegal key size&lt;/tt&gt; error&lt;/li&gt;
	&lt;li&gt;Create a new keystore with 128 bit key sizes: &lt;tt&gt;keytool -genseckey -alias &apos;testing:1&apos; -keyalg AES -keysize 128 -storetype jceks -keystore mykeystore.jks&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Replace &lt;tt&gt;cassandra.keystore&lt;/tt&gt; with new keystore and verify that tests pass&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;From my understanding, the export restricted JCE policies will only unlock stronger cipher versions. I&apos;d be curious to know how this would break unit tests.&lt;/p&gt;</comment>
                            <comment id="15690362" author="jasobrown" created="Wed, 23 Nov 2016 15:12:16 +0000"  >&lt;p&gt;The unit tests current break as I think I created the current test key with AES256, which, I believe, is only unlocked with the updated JCE policies (as you correctly point out). I like this solution, so if you want to create a patch/branch, I&apos;ll review and we can get this one done.&lt;/p&gt;</comment>
                            <comment id="15695794" author="spodxx@gmail.com" created="Fri, 25 Nov 2016 12:50:57 +0000"  >&lt;p&gt;Tests after recreating the keystore with 128bit keys seems to work fine with the stock JDK without JCE strong ciphers. Keys have been generated as described in my comment above. I just had to recreate the legacy commit log files, as they seem to have been encrypted with the replaced keys. &lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.X&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12945-3.X&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12945-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12945-3.X-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12945-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12945-3.X-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12945-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;*see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12875&quot; title=&quot;testall failure in org.apache.cassandra.net.MessagingServiceTest.testDCLatency-compression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12875&quot;&gt;&lt;del&gt;CASSANDRA-12875&lt;/del&gt;&lt;/a&gt; for failed test&lt;/p&gt;</comment>
                            <comment id="15701944" author="jasobrown" created="Mon, 28 Nov 2016 13:22:21 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;committed as sha 554d53664c87b4611b72e570e99ec008fe00aa32. Thanks!&lt;/p&gt;</comment>
                            <comment id="15706244" author="jasobrown" created="Tue, 29 Nov 2016 19:11:39 +0000"  >&lt;p&gt;backported to cassandra-3.11 as c4cb915eaf18569266e9e5223c1a3029431b00dc&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12850396">CASSANDRA-9945</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12840509" name="12945-3.X.patch" size="3000606" author="spod" created="Fri, 25 Nov 2016 12:53:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[spod]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36mwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jasobrown</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jasobrown]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>