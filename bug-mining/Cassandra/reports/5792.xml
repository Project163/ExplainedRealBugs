<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:21:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14325] Java executable check succeeds despite no java on PATH</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14325</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The check -z $JAVA on line 102 of bin/cassandra currently always succeeds if JAVA_HOME is not set since in this case JAVA gets set directly to &apos;java&apos;. The error message &quot;&lt;em&gt;Unable to find java executable. Check JAVA_HOME and PATH environment variables.&lt;/em&gt;&quot; will never be echoed on a PATH misconfiguration. If java isn&apos;t on the PATH the failure will instead&#160;occur&#160;on line 95 of cassandra-env.sh at the java version check.&lt;/p&gt;

&lt;p&gt;It would be better to check consistently for the java executable in one place in bin/cassandra. Also we don&apos;t want users to mistakenly think they have a java version problem when they in fact have a PATH problem.&lt;/p&gt;

&lt;p&gt;See proposed patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13146284">CASSANDRA-14325</key>
            <summary>Java executable check succeeds despite no java on PATH</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="polo-language">Angelo Polo</assignee>
                                    <reporter username="polo-language">Angelo Polo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2018 16:19:09 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:53 +0000</updated>
                            <resolved>Fri, 16 Jul 2021 13:00:07 +0000</resolved>
                                        <fixVersion>3.0.25</fixVersion>
                    <fixVersion>3.11.11</fixVersion>
                    <fixVersion>4.0.1</fixVersion>
                                    <component>Local/Startup and Shutdown</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17369099" author="brandon.williams" created="Thu, 24 Jun 2021 21:59:41 +0000"  >&lt;p&gt;Looks good to me, +1.&lt;/p&gt;</comment>
                            <comment id="17376785" author="azotcsit" created="Wed, 7 Jul 2021 18:38:30 +0000"  >&lt;p&gt;The patch looks good to me, however, I have two small comments:&lt;br/&gt;
 1. Even though the patch&apos;s logic seems to be working perfectly well, I feel the same can be achieved in a bit more compact way:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/bin/cassandra.in.sh b/bin/cassandra.in.sh
index 58b4dd2896..5d13cdae70 100644
--- a/bin/cassandra.in.sh
+++ b/bin/cassandra.in.sh
@@ -95,7 +95,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ -n &lt;span class=&quot;code-quote&quot;&gt;&quot;$JAVA_HOME&quot;&lt;/span&gt; ]; then
         fi
     done
 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
-    JAVA=java
+    JAVA=`command -v java 2&amp;gt; /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;`
 fi
 
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ -z $JAVA ] ; then
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If there is no &lt;em&gt;java&lt;/em&gt; executable available then &lt;em&gt;JAVA&lt;/em&gt; variable will be empty and &lt;em&gt;if [ -z $JAVA ]&lt;/em&gt;&#160;condition will match to trigger the error.&lt;/p&gt;

&lt;p&gt;2. I can see two more similar scripts and I believe they need to be updated as well:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
redhat/cassandra.in.sh
tools/bin/cassandra.in.sh
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;PS:&lt;br/&gt;
I&apos;m not a project committer. I&apos;ve just chimed in after seeing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&apos;s email seeking for reviewers.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17377196" author="blerer" created="Thu, 8 Jul 2021 08:13:42 +0000"  >&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=azotcsit&quot; class=&quot;user-hover&quot; rel=&quot;azotcsit&quot;&gt;azotcsit&lt;/a&gt;. Any review comment will help us to move faster.&lt;/p&gt;</comment>
                            <comment id="17381407" author="polo-language" created="Thu, 15 Jul 2021 15:18:30 +0000"  >&lt;p&gt;That&apos;s a nice simplification. I&apos;ve attached patches for all three files.&lt;/p&gt;</comment>
                            <comment id="17381409" author="brandon.williams" created="Thu, 15 Jul 2021 15:21:14 +0000"  >&lt;p&gt;LGTM, +1.&lt;/p&gt;</comment>
                            <comment id="17381430" author="azotcsit" created="Thu, 15 Jul 2021 15:47:21 +0000"  >&lt;p&gt;+1 (non-binding)&lt;/p&gt;</comment>
                            <comment id="17381431" author="edimitrova" created="Thu, 15 Jul 2021 15:52:07 +0000"  >&lt;p&gt;+1, thank you. I am also adding &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=azotcsit&quot; class=&quot;user-hover&quot; rel=&quot;azotcsit&quot;&gt;azotcsit&lt;/a&gt;&#160;as a reviewer as he also did a pass and gave valuable feedback.&lt;/p&gt;</comment>
                            <comment id="17381435" author="edimitrova" created="Thu, 15 Jul 2021 15:56:00 +0000"  >&lt;p&gt;And seems our comments crashed, thanks again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17381447" author="brandon.williams" created="Thu, 15 Jul 2021 16:07:24 +0000"  >&lt;p&gt;These seem to only to apply to 4.0 and up.  Were you still interested in fixing this in 3.0 and 3.11?&lt;/p&gt;</comment>
                            <comment id="17381960" author="polo-language" created="Fri, 16 Jul 2021 10:19:56 +0000"  >&lt;p&gt;Patches for trunk/4.0 and 3.11/3.0 attached.&lt;/p&gt;</comment>
                            <comment id="17382059" author="brandon.williams" created="Fri, 16 Jul 2021 13:00:21 +0000"  >&lt;p&gt;Committed, thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13030719" name="3.x.patch" size="604" author="polo-language" created="Fri, 16 Jul 2021 10:18:41 +0000"/>
                            <attachment id="13030720" name="trunk.patch" size="948" author="polo-language" created="Fri, 16 Jul 2021 10:18:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[polo-language]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ri1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[azotcsit]]></customfieldvalue>
        <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
        <customfieldvalue><![CDATA[e.dimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348835">NA</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/75ddf76801a7b603f9da5fcee0dc72bacc5843c6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/75ddf76801a7b603f9da5fcee0dc72bacc5843c6&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>