<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:11:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13396] Cassandra 3.10: ClassCastException in ThreadAwareSecurityManager</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13396</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://www.mail-archive.com/user@cassandra.apache.org/msg51603.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/user@cassandra.apache.org/msg51603.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13060689">CASSANDRA-13396</key>
            <summary>Cassandra 3.10: ClassCastException in ThreadAwareSecurityManager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehubert">Eric Hubert</assignee>
                                    <reporter username="appodictic">Edward Capriolo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Mar 2017 14:08:19 +0000</created>
                <updated>Thu, 9 Oct 2025 04:44:07 +0000</updated>
                            <resolved>Mon, 26 Mar 2018 11:27:21 +0000</resolved>
                                        <fixVersion>3.11.3</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>9</votes>
                                    <watches>25</watches>
                                                                                                                <comments>
                            <comment id="15950990" author="appodictic" created="Fri, 31 Mar 2017 14:19:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...edwardcapriolo:CASSANDRA-13396?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/compare/trunk...edwardcapriolo:CASSANDRA-13396?expand=1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15951018" author="snazy" created="Fri, 31 Mar 2017 14:34:26 +0000"  >&lt;p&gt;I&apos;m strongly -1 on this change.&lt;/p&gt;

&lt;p&gt;This change will cause weird and hard to catch follow-up issues (see the discussions and issues around that piece code), which &lt;em&gt;cannot&lt;/em&gt; be caught by neither unit nor dtests because it&apos;s an unsupported setup. We do not support embedding C* in a container (i.e. a JVM not controlled &quot;by us&quot;). IMO, supporting C* in such an environment will cause other issues. Technically, it&apos;s not a major bug - changed it to wish.&lt;/p&gt;</comment>
                            <comment id="15951052" author="appodictic" created="Fri, 31 Mar 2017 14:50:59 +0000"  >&lt;p&gt;How come everyone in Cassandra&apos;s first reaction is to -1 everything? &lt;/p&gt;

&lt;p&gt;The entire model of apache is &quot;I have an itch to scratch&quot;. This person WANTS to run Cassandra in a container it is an &quot;itch&quot;. The immediate opposition position should not be &quot;BUT DON&apos;T SCRATCH THAT ITCH&quot;, because I say so.&lt;/p&gt;
</comment>
                            <comment id="15951053" author="apassiou" created="Fri, 31 Mar 2017 14:51:40 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt;: OK but what if the cassandra daemon is not embedded anywhere but is simply running with a classpath containing several slf4j bindings?&lt;br/&gt;
It will still crash, right?&lt;/p&gt;

&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appodictic&quot; class=&quot;user-hover&quot; rel=&quot;appodictic&quot;&gt;appodictic&lt;/a&gt;: please don&apos;t over-react (and don&apos;t hijack my question), it&apos;s an open discussion &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15951057" author="appodictic" created="Fri, 31 Mar 2017 14:54:11 +0000"  >&lt;p&gt;LOL I just posted this tweet yesterday.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/edwardcapriolo/status/847484593041100800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://twitter.com/edwardcapriolo/status/847484593041100800&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What comedy cassandra is. No one even bothers to say &quot;how can we work together?&quot; or &quot;how can we wrote the code to make all users happy&quot; They just instantly drop a -1 on things. lol&lt;/p&gt;</comment>
                            <comment id="15951062" author="appodictic" created="Fri, 31 Mar 2017 14:56:21 +0000"  >&lt;p&gt;So funny that i litteraly wake up, go out of my way to fix an issue for someone, and even though everyone is Cassandra is too busy to reply to emails and help people they are Johnny on the spot to jump on Jira and -1 code.&lt;/p&gt;</comment>
                            <comment id="15951086" author="appodictic" created="Fri, 31 Mar 2017 15:03:24 +0000"  >&lt;p&gt;&quot;Open discussions&quot; in cassandra always start with the concept of &quot;its not my idea so -1&quot; which is the exact opposite of &quot;scratch an itch&quot;. &lt;/p&gt;

&lt;p&gt;&quot;We do not support embedding C* in a container&quot;&lt;/p&gt;

&lt;p&gt;Really? who says? where is it said? Who is &quot;we&quot;?&lt;/p&gt;</comment>
                            <comment id="15951093" author="snazy" created="Fri, 31 Mar 2017 15:10:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apassiou&quot; class=&quot;user-hover&quot; rel=&quot;apassiou&quot;&gt;apassiou&lt;/a&gt;, right, it&apos;s true for any other slf4j binding. &lt;br/&gt;
Reason is stuff like &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12535&quot; title=&quot;Prevent reloading of logback.xml from UDF sandbox&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12535&quot;&gt;&lt;del&gt;CASSANDRA-12535&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13173&quot; title=&quot;Reloading logback.xml does not work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13173&quot;&gt;&lt;del&gt;CASSANDRA-13173&lt;/del&gt;&lt;/a&gt;, which are hard to figure out and even harder to ensure its functionality in unit tests. That&apos;s why I&apos;m against such a change. We cannot foresee the consequences, because we have not tested other bindings. Even further, the performance implications of using another logger implementation are not determined. Believe me, it&apos;s not blindly shooting something down - I had a hard time to fix this issue and do not like to see it happen again. BTW: It&apos;s late in the afternoon over here, so it&apos;s not a too quick reaction early in the morning.&lt;/p&gt;</comment>
                            <comment id="15951102" author="appodictic" created="Fri, 31 Mar 2017 15:15:30 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Reason is stuff like &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12535&quot; title=&quot;Prevent reloading of logback.xml from UDF sandbox&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12535&quot;&gt;&lt;del&gt;CASSANDRA-12535&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13173&quot; title=&quot;Reloading logback.xml does not work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13173&quot;&gt;&lt;del&gt;CASSANDRA-13173&lt;/del&gt;&lt;/a&gt;, which are hard to figure out and even harder to ensure its functionality in unit tests. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So because someone made bugs in the past, which are &quot;hard to figure out&quot; and you can not &quot;foresee the consequences&quot; . Is this back to the future part 4?&lt;/p&gt;

&lt;p&gt;Please verify your claim of &quot;not supporting containers&quot; before finding other reasons to not like the idea of fixing an obvious problem.&lt;/p&gt;

</comment>
                            <comment id="15951110" author="appodictic" created="Fri, 31 Mar 2017 15:21:18 +0000"  >&lt;p&gt;So strange:&lt;/p&gt;

&lt;p&gt;No such statement about supporting containers seems to exist.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;edward@jackintosh cassandra&amp;#93;&lt;/span&gt;$ find . -type f | xargs grep containers&lt;br/&gt;
./src/java/org/apache/cassandra/db/ColumnFamilyStore.java:     * thread safety.  All we do is wipe the sstable containers clean, while leaving the actual&lt;br/&gt;
./src/java/org/apache/cassandra/index/sasi/disk/OnDiskIndexBuilder.java:        private final List&amp;lt;TokenTreeBuilder&amp;gt; containers = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
./src/java/org/apache/cassandra/index/sasi/disk/OnDiskIndexBuilder.java:                containers.add(keys);&lt;br/&gt;
./src/java/org/apache/cassandra/index/sasi/disk/OnDiskIndexBuilder.java:            if (containers.size() &amp;gt; 0)&lt;br/&gt;
./src/java/org/apache/cassandra/index/sasi/disk/OnDiskIndexBuilder.java:                for (TokenTreeBuilder tokens : containers)&lt;br/&gt;
./src/java/org/apache/cassandra/index/sasi/disk/OnDiskIndexBuilder.java:            containers.clear();&lt;br/&gt;
./conf/jvm.options:# This helps prevent soft faults in containers and makes&lt;br/&gt;
Binary file ./build/classes/main/org/apache/cassandra/index/sasi/disk/OnDiskIndexBuilder$MutableDataBlock.class matches&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;edward@jackintosh cassandra&amp;#93;&lt;/span&gt;$ find . -type f | xargs grep Containers&lt;/p&gt;

&lt;p&gt;Its almost as if people just make up things, and then when you corner them on their position being false they just pivot and make up a new reason not to like the idea.&lt;/p&gt;</comment>
                            <comment id="15951137" author="apassiou" created="Fri, 31 Mar 2017 15:31:37 +0000"  >&lt;p&gt;Edward, I appreciate that you wanted to help but please stop hijacking my question, or at least try to be constructive...&lt;/p&gt;

&lt;p&gt;I don&apos;t know what you or Robert have understood when I said &quot;container&quot; but in my case it&apos;s just an application (a plain Java main()) that instantiates a CassandraDaemon and sometimes other stuff. But one could also do it in a &quot;unit&quot; test (which is not really a unit bt more an automatic integration test).&lt;/p&gt;

&lt;p&gt;@Robert, I can understand your concerns about not-tested behavior of other bindings, then shouldn&apos;t it be stated in the docs that other bindings are not supported, and a more explicit error thrown?&lt;br/&gt;
But I don&apos;t think the performance impact is a good argument because logback and slf4j are configurable by themselves with configuration files it can have a very strong impact on the performance (log patterns, where you log to) even if one uses logback.&lt;/p&gt;</comment>
                            <comment id="15951181" author="snazy" created="Fri, 31 Mar 2017 15:57:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apassiou&quot; class=&quot;user-hover&quot; rel=&quot;apassiou&quot;&gt;apassiou&lt;/a&gt;, C* is meant to run as a standalone application using the dependencies that are in the &lt;tt&gt;lib/&lt;/tt&gt; folder. Any change to those dependencies and the way C* is started, is basically up to the person who changes the dependencies. We can of course talk about using a different logger implementation instead of logback and discuss the pros and cons. But that is IMO way beyond an &lt;tt&gt;instanceof&lt;/tt&gt; check.&lt;/p&gt;

&lt;p&gt;I&apos;m generally concerned about stability and hidden performance issues and a change to a (logger implementation) library, which is nearly everywhere in the hot code path. Mean, we use logback now for a really long time - but we have no test nor production experience running something else. One example: one thing that may happen is some hidden contention in that logger library causing weird outliers - people would complain that C* is slow but don&apos;t realize it&apos;s in this case because of that change. That&apos;s one reason why we are so careful with library updates especially in minor versions. All I&apos;m saying is, that getting &lt;em&gt;all&lt;/em&gt; the consequences of such a change is a lot of work.&lt;/p&gt;</comment>
                            <comment id="15951184" author="snazy" created="Fri, 31 Mar 2017 15:59:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;just an application (a plain Java main()) that instantiates a CassandraDaemon&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If that&apos;s just for testing, why not just use logback?&lt;/p&gt;</comment>
                            <comment id="15951215" author="appodictic" created="Fri, 31 Mar 2017 16:25:15 +0000"  >&lt;blockquote&gt;
&lt;p&gt;people would complain that C* is slow but don&apos;t realize it&apos;s in this case because of that change. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;First, its an obvious bug. The entire point of plug-gable logging implementations is so that you can replace them. &lt;/p&gt;

&lt;p&gt;Second, the only person being actually affected would be Anton, because effective no one else is changing logging implementations so no one else is hitting that block.&lt;/p&gt;

&lt;p&gt;For Anton (and anyone else) they would have to manually change the files in the lib folder and the configuration. So nothing is &apos;hidden&apos; to him. He/They make a change and they can report if there actually is a performance issue.  &lt;/p&gt;

&lt;p&gt;Because they can &quot;scratch their itch&quot; of running Cassandra in a container they might find new problems or they might make new opportunities. For example, they may find that some other implementation is actually better or faster. &lt;/p&gt;

&lt;p&gt;If anyone was actually trying to convince me that this bug is intentional, (which is almost laughable). The proper practice would be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!logger &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; XYZ){
  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;we only support XYZ &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; reasons ABC&quot;&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But instead we are attempting to pretend the opposite, that the bug is intentional and the correct thing to do is throw a ClassCastException. Which is a joke.&lt;/p&gt;</comment>
                            <comment id="15952014" author="jjirsa" created="Sat, 1 Apr 2017 04:37:38 +0000"  >&lt;p&gt;Seems pretty reasonable to me&lt;/p&gt;

&lt;p&gt;Certainly logback isn&apos;t the only performant slf4j logger available.&lt;/p&gt;</comment>
                            <comment id="15952024" author="jjirsa" created="Sat, 1 Apr 2017 04:56:28 +0000"  >&lt;p&gt;Changes back to bug, because even if the belief is that other loggers shouldn&apos;t be encouraged, we surely can do better than throwing a cast exception&lt;/p&gt;

&lt;p&gt;Given that log4j2 is likely faster than logback and has been suggested as far back as 2013 &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5883&quot; title=&quot;Switch to Logback&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5883&quot;&gt;&lt;del&gt;CASSANDRA-5883&lt;/del&gt;&lt;/a&gt; it seems like artificially forcing logback is a position that would need to be more rigorously defended - I&apos;m +1 on this change conceptually (but this is not a review).&lt;/p&gt;</comment>
                            <comment id="15952229" author="appodictic" created="Sat, 1 Apr 2017 13:52:03 +0000"  >&lt;p&gt;Rigorous defenses are in no short supply around here.&lt;/p&gt;

&lt;p&gt;I&apos;m sure someone next will argue that this was intended to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * The purpose of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;is
     */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;because the purpose code is soooo self documenting it describes itself. Want to fix it? No -1 the comment is perfect and heavily tested!&lt;/p&gt;</comment>
                            <comment id="15953111" author="blerer" created="Mon, 3 Apr 2017 08:09:51 +0000"  >&lt;p&gt;The problem that I see with this ticket is the following: &quot;Once we agree to allow people to use the loggers that they wish we somehow become responsible for the bugs that can show up&quot;.&lt;br/&gt;
As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt; point it up, some of those issues might be non trivial to figure out. Simply because when someone will open a bug he might not mention that he changed the logging library and we might end up wasting a lot of time to reproduce the problem.&lt;br/&gt;
Due to that, I tend to be in favor of Robert suggestion of not supporting it (years spend debugging crappy issues have made me somehow paranoiac).&lt;/p&gt;

&lt;p&gt;Now, I think it also make sense to allow people to use another logging library as long as they know that we do not fully support it.&lt;br/&gt;
My proposal woud be to log a warning at startup saying that the logging library that they use is not supported.&lt;/p&gt;</comment>
                            <comment id="15953121" author="spodxx@gmail.com" created="Mon, 3 Apr 2017 08:28:33 +0000"  >&lt;p&gt;I&apos;m leaning to go with the proposed patch with a warning message as suggested by Benjamin. But in any case, this needs to be documented. I&apos;d propose that any patch would also have to add a page &lt;a href=&quot;http://cassandra.apache.org/doc/latest/configuration/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; describing if and how logging can be customized and with a list of all relevant config files.&lt;/p&gt;</comment>
                            <comment id="15953164" author="snazy" created="Mon, 3 Apr 2017 09:11:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;add a page here describing if and how logging can be customized and with a list of all relevant config files&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;it also make sense to allow people to use another logging library&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Don&apos;t get me wrong, but documenting something that is not supported and has never seen CI does not sound good. It would give people just skimming that page the impression that other logging backends &lt;em&gt;are&lt;/em&gt; actually supported. Before we document that, we should have full CI for those backends in place - i.e. all utests and dtests for each backend - or &lt;em&gt;at least&lt;/em&gt; document something like &quot;the combination of C* version X.Y and [logger backend version Z] was CI-tested on X/Y/Z using this configuration&quot;. If we allow people to use other logging backends, there must be a way to tell them &quot;version X of Y should be good, because it has been CI tested&quot;.&lt;br/&gt;
Anyway, supporting another logging backend still sounds like a new feature to me.&lt;/p&gt;</comment>
                            <comment id="15953179" author="apassiou" created="Mon, 3 Apr 2017 09:25:20 +0000"  >&lt;p&gt;All I was asking for is avoid crashing, and I am concious that I am not in a standard use-case.&lt;br/&gt;
I am perfectly fine with a big warning in the log saying that using something other than logback is at my own risk + the the doc that states that nothing but logback is officially supported which makes you not responsible for any bug. &lt;/p&gt;

&lt;p&gt;Of course, as Benjamin says, there is still the risk of you investigating an issue without knowing that a different logger is used, but if you are really paranoid you can also imaging people configuring their logback in a very inefficient or wrong way and create crappy issues while being perfectly &quot;legal&quot;.&lt;/p&gt;</comment>
                            <comment id="15953184" author="spodxx@gmail.com" created="Mon, 3 Apr 2017 09:28:59 +0000"  >&lt;p&gt;I did not suggest to that we should support different loggers, just because we document Cassandra logging:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;add a page here describing *&lt;b&gt;if&lt;/b&gt;* and *&lt;b&gt;how&lt;/b&gt;* logging can be customized and with a list of all relevant config files&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We can as well state something like &quot;Using any logging library not shipped with Cassandra is NOT supported. Use at your own risk.&quot;. If that is the consensus of this discussion.&lt;/p&gt;</comment>
                            <comment id="15953197" author="snazy" created="Mon, 3 Apr 2017 09:40:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;I did not suggest to that we should support different loggers&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah, ok, got it wrong then. Adding a page about how to configure logback (and point to the logback docs) sounds good.&lt;/p&gt;</comment>
                            <comment id="15953198" author="slebresne" created="Mon, 3 Apr 2017 09:40:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;This change will cause weird and hard to catch follow-up issues (see the discussions and issues around that piece code)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So why isn&apos;t there &lt;b&gt;any&lt;/b&gt; comment around the code the patch updates to explain why this exists in the first place and why it&apos;s so important that it&apos;s here?&lt;/p&gt;
</comment>
                            <comment id="15953248" author="snazy" created="Mon, 3 Apr 2017 10:35:28 +0000"  >&lt;p&gt;Ninja&apos;d comments for this code.&lt;/p&gt;</comment>
                            <comment id="15953519" author="appodictic" created="Mon, 3 Apr 2017 13:56:26 +0000"  >&lt;p&gt;-1 on ninja fixes. &lt;/p&gt;</comment>
                            <comment id="15953520" author="appodictic" created="Mon, 3 Apr 2017 14:00:25 +0000"  >&lt;blockquote&gt;
&lt;p&gt;We can as well state something like &quot;Using any logging library not shipped with Cassandra is NOT supported. Use at your own risk.&quot;. If that is the consensus of this discussion.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;-1 The point of this Jira is not to create some new policy to avoid committing things. Fake blockers like &apos;this might cause a bug in the future&apos; are not a valid technical reason to reject something. If that is the case shutdown all development on everything. I appreciate the attempt to compromise, but this is not the right direction. &quot;Not supported&quot; puts this in a trigger like situation. It will create a policy that will stop active research. Anyone will be free to reject further development using the &quot;not supported&quot; argument regardless of how baseless it is. &lt;/p&gt;</comment>
                            <comment id="15953628" author="blerer" created="Mon, 3 Apr 2017 14:59:21 +0000"  >&lt;p&gt;We do not run any test with another logging library and I do not think that we plan to do it. Which, for me means that we do not officially support any other library. Warning the user about it seems normal to me. As a user I would prefer to know. &lt;/p&gt;</comment>
                            <comment id="15953719" author="jjirsa" created="Mon, 3 Apr 2017 16:15:58 +0000"  >&lt;p&gt;There are really three issues:&lt;/p&gt;

&lt;p&gt;1) The existing comments were clearly inadequate, and that&apos;s been ninja&apos;d into place. +1 on that. &lt;/p&gt;

&lt;p&gt;2) Throwing a ClassCastException is objectively wrong. The patch fixes that, and should be committed. &lt;/p&gt;

&lt;p&gt;3) As a side effect, the patch allows other loggers, almost all of which are untested. The assertion from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt; is that doing so is dangerous, specifically citing past bugs where other loggers which may do IO and cause sandbox access problems. That&apos;s a valid concern, and worth a logged warning in my opinion.&lt;/p&gt;

&lt;p&gt;Like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spodxx%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;spodxx@gmail.com&quot;&gt;spodxx@gmail.com&lt;/a&gt; (and I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;) suggest above, I think Ed&apos;s patch+warning makes sense to me.&lt;/p&gt;

&lt;p&gt;If someone wants to &quot;officially&quot; support another logger in order to remove the warning, then I think the burden is on them to open a proper ticket and demonstrate that it&apos;s sufficiently tested.&lt;/p&gt;</comment>
                            <comment id="15953853" author="appodictic" created="Mon, 3 Apr 2017 17:16:38 +0000"  >&lt;p&gt;1) ninja fix &lt;br/&gt;
How does meritocracy work when we spend globs of time striking down patches, while simultaneously &apos;ninja fixing&apos; stuff? Go make a patch and get it reviewed like everyone else. &lt;/p&gt;

&lt;p&gt;2) Agreed.&lt;/p&gt;

&lt;p&gt;3) What a backwards argument. The &quot;critical past bugs&quot; sited in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12535&quot; title=&quot;Prevent reloading of logback.xml from UDF sandbox&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12535&quot;&gt;&lt;del&gt;CASSANDRA-12535&lt;/del&gt;&lt;/a&gt; where caused by the person attempting to drop the -1 on this patch. This directly translates to &quot;No one can edit the buggy code I introduced because THEY might make bugs.&quot;  Consider throwing a GetOffMyLawn exception&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cassandra/commit/8f15eb1b717548816a9ee8314269d4d1e2ee7084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/8f15eb1b717548816a9ee8314269d4d1e2ee7084&lt;/a&gt;&lt;/p&gt;


</comment>
                            <comment id="15953970" author="jjirsa" created="Mon, 3 Apr 2017 18:37:49 +0000"  >&lt;blockquote&gt;
&lt;p&gt;How does meritocracy work when we spend globs of time striking down patches, while simultaneously &apos;ninja fixing&apos; stuff? Go make a patch and get it reviewed like everyone else.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The project has always allowed ninja fixing minor (especially non-code) things. Comments here are a net positive. There&apos;s no reason to fight about adding comments after the fact. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This directly translates to &quot;No one can edit the buggy code I introduced because THEY might make bugs.&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Logging a warning for users isn&apos;t the same as throwing an exception. It&apos;s not like we&apos;re talking about a system property here that requires explicit operator involvement to even run with another logger, it&apos;s logging a single warning message that bugs may happen and we haven&apos;t actively tested other configs. I don&apos;t think that&apos;s unreasonable, and it&apos;s not &quot;get off my lawn&quot;. This isn&apos;t an unreasonable compromise - we don&apos;t crash, but we give operators a chance to know that they&apos;re running an untested config. &lt;/p&gt;</comment>
                            <comment id="15953973" author="appodictic" created="Mon, 3 Apr 2017 18:40:16 +0000"  >&lt;p&gt;A true cassandra special. A patch with a dubious ClassCastException and a half finished comment passed a review, and now the next person who touches the code needs to &quot;sufficiently test&quot; to earn the &quot;officially supported&quot; designation only granted to committers that make untrue statements like &quot;We do not support embedding C* in a container &quot; and ninja fix stuff.&lt;/p&gt;</comment>
                            <comment id="15954031" author="appodictic" created="Mon, 3 Apr 2017 19:14:18 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Logging a warning for users isn&apos;t the same as throwing an exception. It&apos;s not like we&apos;re talking about a system property here that requires explicit operator involvement to even run with another logger, it&apos;s logging a single warning message that bugs may happen and we haven&apos;t actively tested other configs. I don&apos;t think that&apos;s unreasonable, and it&apos;s not &quot;get off my lawn&quot;. This isn&apos;t an unreasonable compromise - we don&apos;t crash, but we give operators a chance to know that they&apos;re running an untested config.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The &quot;get off my lawn&quot; is related to this entire process. It had not even checked who added the code originally. I did not quite understand why it got a -1 so fast. -1s are &quot;rare&quot; and kill the proposal dead.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.apache.org/foundation/voting.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/foundation/voting.html&lt;/a&gt;&lt;br/&gt;
For code-modification votes, +1 votes are in favour of the proposal, but -1 votes are vetos and kill the proposal dead until all vetoers withdraw their -1 votes.&lt;/p&gt;

&lt;p&gt;The original reasons given were &quot;This change will cause weird and hard to catch follow-up issues (see the discussions and issues around that piece code), which cannot be caught by neither unit nor dtests because it&apos;s an unsupported setup. We do not support embedding C* in a container (i.e. a JVM not controlled &quot;by us&quot;)&quot;&lt;/p&gt;

&lt;p&gt;Lets break this down:&lt;br/&gt;
1) &quot;This change will cause weird and hard to catch follow-up issues&quot;&lt;br/&gt;
Hard to quantify and the statement itself is a hypothesis. Can &quot;WILL CAUSE&quot; be proven? No.&lt;/p&gt;

&lt;p&gt;2) which cannot be caught by neither unit nor dtests because it&apos;s an unsupported setup&lt;br/&gt;
Even though we are SURE issues that &quot;WILL HAPPEN&quot; they &quot;CANNOT BE CAUGHT&quot; . Amazing how that logic works.&lt;/p&gt;

&lt;p&gt;3) We do not support embedding C* in a container&lt;br/&gt;
Untrue. How does one run the CDC daemon? Not a written rule anyway.&lt;/p&gt;

&lt;p&gt;If adding a single if statement to block of code and getting 3 completely ludicrous objections from the person who happened to write said code is not &quot;get off my lawn&quot; then I don&apos;t know what is.&lt;/p&gt;
</comment>
                            <comment id="15954044" author="appodictic" created="Mon, 3 Apr 2017 19:29:56 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The project has always allowed ninja fixing minor (especially non-code) things. Comments here are a net positive. There&apos;s no reason to fight about adding comments after the fact.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No. It is important. The -1 er is using his technical insight as a justification for his -1. The incomplete comment shows how much time he really spent working on the given code. No tests, no argument checking, and a half done comment.&lt;/p&gt;</comment>
                            <comment id="15954118" author="jjirsa" created="Mon, 3 Apr 2017 20:28:32 +0000"  >&lt;p&gt;Let&apos;s focus on the problems and solutions. &lt;/p&gt;

&lt;p&gt;There were missing and incomplete comments around a broken piece of code that fixed a very-hard-to-troubleshoot bug. We&apos;ve fixed the missing and incomplete comments, we still need to fix the broken code, and we can do so without ignoring the past very-hard-to-troubleshoot-bug. &lt;/p&gt;

&lt;p&gt;We have a patch that fixes the ClassCastException, which should be reviewed. We have a (non-binding) -1 on that review. One of the thing that 3 committers (including myself) seem to have suggested is at least adding a warning. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt; is that agreeable to you?&lt;/p&gt;

</comment>
                            <comment id="15954972" author="snazy" created="Tue, 4 Apr 2017 10:39:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjirsa&quot; class=&quot;user-hover&quot; rel=&quot;jjirsa&quot;&gt;jjirsa&lt;/a&gt;, can live with that - i.e. logging an explicit warning using a new &lt;tt&gt;StartupCheck&lt;/tt&gt; that also mentions that UDFs/UDAs might be broken, if a logger that&apos;s not logback is used.&lt;/p&gt;</comment>
                            <comment id="15955071" author="apassiou" created="Tue, 4 Apr 2017 12:20:22 +0000"  >&lt;p&gt;Happy to see that everybody seem to converge to a reasonable solution &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15996968" author="jjirsa" created="Thu, 4 May 2017 15:56:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eugenefedoto&quot; class=&quot;user-hover&quot; rel=&quot;eugenefedoto&quot;&gt;eugenefedoto&lt;/a&gt; - two quick notes&lt;/p&gt;

&lt;p&gt;1) In all three versions of your patch, we can&apos;t &lt;a href=&quot;https://github.com/eugenefedoto/cassandra/commit/5957dd84aaa239d62f40aa4bf5f3159bf7a300d7#diff-30a3dbf7d783cf329b5fb28a8b14332eR110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;throw&lt;/a&gt; in &lt;tt&gt;ThreadAwareSecurityManager.java&lt;/tt&gt; or we&apos;ll end up with the same problem we had before.&lt;/p&gt;

&lt;p&gt;2) In your &lt;a href=&quot;https://github.com/eugenefedoto/cassandra/commit/5957dd84aaa239d62f40aa4bf5f3159bf7a300d7#diff-a5df240149285ae528cdd3c41aa59360R419&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;StartupCheck&lt;/a&gt; , the second log line (on L419) isn&apos;t necessary.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt; - Eugene is a new contributor, I&apos;ve talked him through how to contribute offline via email, and probably shaped his approach (notably, the &lt;tt&gt;instanceof&lt;/tt&gt; check from Ed&apos;s patch isn&apos;t sufficient, because if logback has been removed from the classpath, we&apos;ll throw a &lt;tt&gt;NoClassDefFoundError&lt;/tt&gt; instead). Given that, do you want to review? &lt;/p&gt;</comment>
                            <comment id="15997073" author="eugenefedoto" created="Thu, 4 May 2017 16:58:36 +0000"  >&lt;p&gt;I made the &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13396?focusedCommentId=15996968&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15996968&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;suggested changes by Jeff&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16069133" author="gus_heck" created="Thu, 29 Jun 2017 22:37:57 +0000"  >&lt;p&gt;Looking forward to the resolution of this issue in any of the following ways:&lt;/p&gt;

&lt;p&gt;1) Don&apos;t load this security manager and policies if UDF&apos;s are configured to be disabled &lt;br/&gt;
2) Handle other possible loggers conditionally (log4j2 being my case)&lt;br/&gt;
3) Provide an option to run with insecure UDF&apos;s ( by not installing this security manager). Not everyone is exposing UDF&apos;s to folks they don&apos;t trust. In some use cases it might be a feature to be able to read system properties etc.&lt;/p&gt;

&lt;p&gt;Glancing at the discussion it sounds like this is heading towards a &quot;break UDF&apos;s but continue&quot; strategy, which will also work for me since I don&apos;t need UDF&apos;s but seems likely to trip folks.&lt;/p&gt;

&lt;p&gt;My exact itch is documented here: &lt;a href=&quot;https://github.com/nsoft/jesterj/issues/89&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nsoft/jesterj/issues/89&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If option 1 or 3 were available, that would greatly simplify my life, because this security manager installs policies in a class initializer and these policies assume a codePath with a url scheme of &quot;file&quot; but in my case the scheme is &quot;onejar&quot;... which forced me into lots of gyrations to force an early load and then un-set your policies so that the rest of my code could have permissions.&lt;/p&gt;</comment>
                            <comment id="16069141" author="gus_heck" created="Thu, 29 Jun 2017 22:43:53 +0000"  >&lt;p&gt;And yes I might be interested in providing a patch for 3 if folks seem in favor... 1 is probably beyond my knowledge of Cassandra, but a version of 3 dependent on a system property seems tractable.&lt;/p&gt;</comment>
                            <comment id="16069393" author="gus_heck" created="Fri, 30 Jun 2017 02:56:01 +0000"  >&lt;p&gt;After some IRC discussion, I&apos;ve been encouraged to submit a patch. Here&apos;s an implementation of my #3 suggestion above: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/nsoft/cassandra/commit/382a44c238b6d4bd7e3d8cc7bbd6710b0a7c5274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nsoft/cassandra/commit/382a44c238b6d4bd7e3d8cc7bbd6710b0a7c5274&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Though Github&apos;s diff has done a fabulous job of obfuscating it, the patch is very simple all I did was add a constant, and two conditions that read the system property represented by the constant and prevent this security manager and its policies from getting installed via the install() method if the system property has been set. &lt;/p&gt;

&lt;p&gt;Circle CI here: &lt;a href=&quot;https://circleci.com/gh/nsoft/cassandra/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://circleci.com/gh/nsoft/cassandra/2&lt;/a&gt; (still running as of this comment, but I expect it to pass) Ran tests locally and Installed a version with this patch in JesterJ and everything seems happy there.&lt;/p&gt;</comment>
                            <comment id="16075022" author="gus_heck" created="Wed, 5 Jul 2017 16:16:06 +0000"  >&lt;p&gt;FYI, Circle CI did pass. Any commentary or review would be appreciated. I won&apos;t be able to release without knowing what direction this issue is going.&lt;/p&gt;</comment>
                            <comment id="16147845" author="gus_heck" created="Wed, 30 Aug 2017 19:00:20 +0000"  >&lt;p&gt;Any one have a chance to look at my patch yet?&lt;/p&gt;</comment>
                            <comment id="16152569" author="ehubert" created="Mon, 4 Sep 2017 12:39:11 +0000"  >&lt;p&gt;We faced the same underlying issue after upgrading from Cassandra 3.9 to 3.11.0 when using Cassandra embedded for integration testing using JUnit. &lt;br/&gt;
As our application uses a different logging backend and we did not want to switch it and provide appropriate redundant configuration for logback, we excluded logback dependencies and only provided our implementation to also avoid any warnings about duplicate bindings. This setup worked fine with Cassandra 3.9, but fails with Cassandra &amp;gt;= 3.10; the server does not startup, because of the missing classes. So in this case any patch working with instanceof checks still attempting to load those classes without specific try/catch would obviously also fail. &lt;/p&gt;

&lt;p&gt;In addition to SMAwareReconfigureOnChangeFilter in org.apache.cassandra.cql3.functions.ThreadAwareSecurityManager.install() using multiple logback internals (added with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12535&quot; title=&quot;Prevent reloading of logback.xml from UDF sandbox&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12535&quot;&gt;&lt;del&gt;CASSANDRA-12535&lt;/del&gt;&lt;/a&gt;) I also found the change with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12509&quot; title=&quot;Shutdown process triggered twice during if the node is drained&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12509&quot;&gt;&lt;del&gt;CASSANDRA-12509&lt;/del&gt;&lt;/a&gt; adding ch.qos.logback.core.hook.DelayingShutdownHook in StorageService#initServer problematic.&lt;br/&gt;
Would it be an alternative to handle all access to the underlying logging implementation via reflection? &lt;br/&gt;
E.g. attempting to load logback classes and only if this does not fail, perform implementation specific actions via reflection (otherwise log a warning about missing logback presence, which can be ignored in integration test setups). We are mostly talking about one-time initialization, so the performance impact should be really negligible.&lt;br/&gt;
This solution would require users to properly exclude logback logging libs if they want to use other sf4j implementation bindings. Providing multiple logging implementations with sl4fj bindings anyway triggers a warning which should be handled.&lt;/p&gt;</comment>
                            <comment id="16155255" author="ostefano" created="Wed, 6 Sep 2017 12:00:53 +0000"  >&lt;p&gt;I had the very same issue when using the &lt;tt&gt;EmbeddedCassandra&lt;/tt&gt; from &lt;tt&gt;spark-cassandra-connector&lt;/tt&gt;. Moved to &lt;tt&gt;logback&lt;/tt&gt; fixes the issue. This was a bit annoying because I had to exclude all other sf4j implementations (there&apos;s no way afaik to force one implementation over another in case multiple ones are loaded). Anyway, anything but a ClassCastException is better option imho.&lt;/p&gt;</comment>
                            <comment id="16207595" author="fedefernandez" created="Tue, 17 Oct 2017 12:50:43 +0000"  >&lt;p&gt;I have the same problem while attempting to use an embedded Cassandra instance for integration tests in Scala projects. Sadly, I found another strange behavior in SBT that avoids me removing &lt;tt&gt;log4j-slf4j-impl&lt;/tt&gt; from the classpath (if someone is interested &lt;a href=&quot;https://github.com/sbt/sbt/issues/3645&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here is the ticket&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I&apos;m stuck in 3.9 version, so I&apos;m looking forward to a solution on this.&lt;/p&gt;</comment>
                            <comment id="16364298" author="claudenw" created="Wed, 14 Feb 2018 15:44:38 +0000"  >&lt;p&gt;It is unclear to me whether or not the proposed patch has been/will be accepted into the code base.&#160; What is the current thinking and if it is to be added when might that be?&lt;/p&gt;

&lt;p&gt;I have hit this issue when trying to run Cassandra in a unit test situation where I am testing an implementation of an SPI and am unable to convert product to logback.&lt;/p&gt;</comment>
                            <comment id="16364505" author="jasobrown" created="Wed, 14 Feb 2018 17:49:42 +0000"  >&lt;p&gt;OK, looks like this has drifted for long enough. I&apos;m gonna look at the patches and review for commit.&lt;/p&gt;

&lt;p&gt;UPDATE: I&apos;ll wait until &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14183&quot; title=&quot;CVE-2017-5929 Security vulnerability and redefine default log rotation policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14183&quot;&gt;&lt;del&gt;CASSANDRA-14183&lt;/del&gt;&lt;/a&gt; is committed before attacking this (as it touches logging, as well)&lt;/p&gt;</comment>
                            <comment id="16364749" author="ehubert" created="Wed, 14 Feb 2018 20:41:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt;, maybe you can have a glance on&#160;&lt;a href=&quot;#comment-16152569&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;my comment&lt;/a&gt; as well. I have not started working on a patch, because I did not receive any feedback on my suggestion on a conceptual level. I did not want to waste time working on an implementation without knowing of a chance of inclusion. Because we faced some issues in production which are either fixed in 3.11.1 or will be fixed in 3.11.2 we really would like to update, but this still blocks us.&lt;/p&gt;</comment>
                            <comment id="16364767" author="jasobrown" created="Wed, 14 Feb 2018 20:56:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehubert&quot; class=&quot;user-hover&quot; rel=&quot;ehubert&quot;&gt;ehubert&lt;/a&gt; 3.11.2 is up for vote &amp;amp; release this week, so this patch will not be included in that release. Do you have any test cases you can offer here? Please note that allowing other logging implementation seems to be used seems in scope, but will &lt;b&gt;not&lt;/b&gt;, in any way, be supported. I&apos;ll need to reread through all the commentary again to get the full scope of what people are really asking for, but I&apos;m at least willing to get this to completion.&lt;/p&gt;</comment>
                            <comment id="16364865" author="ehubert" created="Wed, 14 Feb 2018 22:18:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt;, fair enough. From what I read/understood the majority of users (if not all, definitely including us) facing this issue, wanted to use Cassandra as an embedded server (mostly for integration testing purposes) utilizing class org.apache.cassandra.service.CassandraDaemon - so no production deployment of a standalone server or cluster.&lt;/p&gt;

&lt;p&gt;While running in the same JVM alongside an application using slf4j with any slf4j supported backend != logback after upgrading to Cassandra 3.10 or later you are in trouble and no longer able to start the Cassandra server, although logging/logging performance are none of your (primary) goals/concerns.&lt;/p&gt;

&lt;p&gt;I doubt there are many users who want to configure a standalone single or multi-node Cassandra installation using a different logging backend to use this in production and have your support, but many users want to write automated integration/scenario tests of their own application interacting with Cassandra using an embedded Cassandra server in addition to plain unit tests using mocks without being forced to switch the logging backend chosen for their application for similar reasons you have. Therefore I see no conflict at all.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;An implementation could even somehow enforce the differentiation between embedded and standalone usage similar to &quot;runManaged&quot; in CassandraDeamon to only allow/support other logging backends (skip special logging backend specific configuration) when CassandraDeamon is used/configured differently than done from main() used by a standalone server installation, if this is really a concern you want to see addressed.&lt;/p&gt;

&lt;p&gt;Even in this case one should exchange nasty runtime exceptions or even JVM errors (ClassCastException or NoClassDefFoundError) with a dedicated error message:&lt;br/&gt;
&quot;When using a Cassandra standalone installation the only supported logging backend is logback.&quot;&lt;br/&gt;
For ClassCastException add something like &quot;slf4j is currently bound to a different logging framework. Please ensure your classpath only contains logback implementations!&quot;&lt;br/&gt;
For NoClassDefFoundError add something like &quot;No logback implementation was found. Please ensure your classpath contains the bundled logback implementation!&quot;&lt;br/&gt;
You can decide to abort the startup or have the same behavior as for the embedded case, but only providing a detailed error logging regarding the unsupported setup.&lt;/p&gt;

&lt;p&gt;For embedded use cases one could advice programmers to activate the CassandraDaemon differently (e.g. some parameter) and here I would propose to simply not execute all logback specific configuration logic - e.g. try loading specific logback classes via reflection, so in this mode logback could be easily replaced by any slf4j logging backend which the application currently uses without further adjustments.&lt;/p&gt;

&lt;p&gt;JUnit test cases might be a bit tricky, because I think they involve different classpath setups of the used test runner to simulate/trigger those type of issues.&lt;/p&gt;</comment>
                            <comment id="16365014" author="jasobrown" created="Thu, 15 Feb 2018 00:53:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehubert&quot; class=&quot;user-hover&quot; rel=&quot;ehubert&quot;&gt;ehubert&lt;/a&gt; Thank you. This use case summary was very helpful.&lt;/p&gt;</comment>
                            <comment id="16365192" author="claudenw" created="Thu, 15 Feb 2018 07:23:16 +0000"  >&lt;p&gt;+1 for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qb3rt&quot; class=&quot;user-hover&quot; rel=&quot;qb3rt&quot;&gt;qb3rt&lt;/a&gt; summary, it touches all the points I was going to make and then some.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16369594" author="gus_heck" created="Mon, 19 Feb 2018 23:02:30 +0000"  >&lt;p&gt;Though my embedded usage is not only for unit test, my choice of Cassandra relates more to the fact that you are Apache licensed, pure java and&#160;clustered rather than performance concerns. When there&apos;s a viable alternative I&apos;ll worry about whether or not you&apos;re faster... in the mean time, I&apos;m very happy to be responsible for (or take credit for) any performance variation from plugging in my&#160;preferred logging framework (log4j2). Please don&apos;t use performance worries as an excuse to not fix this. Generally +1 on Eric&apos;s summary also. I don&apos;t mind doing something extra to enable pluggable logging so that you can default to your supported config, so long as it doesn&apos;t impact&#160;the&#160;command line invocation of my project (i.e. requiring -D or -agentlib, etc).&lt;/p&gt;</comment>
                            <comment id="16406305" author="ehubert" created="Tue, 20 Mar 2018 13:17:13 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt;! Today, I took some time to prepare a patch against the Cassandra 3.11 branch which basically:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bundles all logback implementation specific functionality in one class (required a bit of code reorganization)&lt;/li&gt;
	&lt;li&gt;extracted an interface to be able to a) minimize use of reflection and b) be able to provide alternative implementations (the patch itself only provides a no-op fallback implementation)&lt;/li&gt;
	&lt;li&gt;load and instantiate logging-implementation specific extension according to used slf4j binding via reflection (Cassandra code only works on new interface which has no java class dependencies to specific implementations)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So far there are no new (integration) tests which likely would also require some classpath /&#160; ClassLoader magic.&lt;/p&gt;

&lt;p&gt;I tested the change using &quot;a neutral&quot; application use case by utilizing &lt;a href=&quot;https://github.com/jsevellec/cassandra-unit&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Cassandra Unit&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The &quot;test&quot; involved adjusting log4j config from Cassandra Unit test resources, changing the used cassandra-all version in parent pom, excluding logback deps from the pom and executing any of the tests.&lt;/p&gt;

&lt;p&gt;With stock Cassandra 3.11.2 we see:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-03-20 10:51:43,753 [pool-2-thread-1] ERROR cassandra.service.CassandraDaemon - Exception encountered during startup
java.lang.NoClassDefFoundError: ch/qos/logback/classic/Logger
&#160;&#160; &#160;at org.apache.cassandra.cql3.functions.ThreadAwareSecurityManager.install(ThreadAwareSecurityManager.java:92)
&#160;&#160; &#160;at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:192)
&#160;&#160; &#160;at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:602)
&#160;&#160; &#160;at org.cassandraunit.utils.EmbeddedCassandraServerHelper.lambda$startEmbeddedCassandra$1(EmbeddedCassandraServerHelper.java:144)
&#160;&#160; &#160;at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
&#160;&#160; &#160;at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
&#160;&#160; &#160;at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: java.lang.ClassNotFoundException: ch.qos.logback.classic.Logger
&#160;&#160; &#160;at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
&#160;&#160; &#160;at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:424)
&#160;&#160; &#160;at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338)
&#160;&#160; &#160;at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:357)
&#160;&#160; &#160;... 7 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Using the patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12915316/12915316_CASSANDRA-13396_ehubert_1.patch&quot; title=&quot;CASSANDRA-13396_ehubert_1.patch attached to CASSANDRA-13396&quot;&gt;CASSANDRA-13396_ehubert_1.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; I provided we have a successful server startup with a warning:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-03-20 13:47:32,688 [pool-2-thread-1] WARN  utils.logging.LoggingSupportFactory - You are using Cassandra with an unsupported deployment. The intended logging implementation library logback is not used by slf4j. Detected slf4j binding: org.slf4j.impl.Log4jLoggerFactory. You will not be able to dynamically manage log levels via JMX and may have performance or other issues.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please consider this as an initial patch suggestion to gather quick feedback on the approach! I&apos;m willing to adjust things according to your requirements or are happy if you like to tweak it to your requirements.&lt;/p&gt;

&lt;p&gt;Would be great to see this in Cassandra 3.11.3 if possible.&lt;/p&gt;</comment>
                            <comment id="16411069" author="ehubert" created="Fri, 23 Mar 2018 09:25:15 +0000"  >&lt;p&gt;Anyone with some feedback on my submitted patch? I may have some time tomorrow to incorporate feedback/make adjustments etc, but next week might become rather busy.&lt;/p&gt;</comment>
                            <comment id="16411576" author="claudenw" created="Fri, 23 Mar 2018 15:34:25 +0000"  >&lt;p&gt;Scanning through the solution it looks good to me.&#160; However, I have not merged it or tried it.&#160; I have no objections to applying it.&lt;/p&gt;</comment>
                            <comment id="16412142" author="jasobrown" created="Fri, 23 Mar 2018 21:51:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehubert&quot; class=&quot;user-hover&quot; rel=&quot;ehubert&quot;&gt;ehubert&lt;/a&gt; the attached &apos;patch&apos; file completely fails to apply to cassandra-3.11. Can you either push up a git patch or diff file, or just push your branch up to your github repo and share the link?&#160; Reading the code in the attachment now,,,,&lt;/p&gt;</comment>
                            <comment id="16412169" author="jasobrown" created="Fri, 23 Mar 2018 22:04:19 +0000"  >&lt;p&gt;Looks like you are using &lt;tt&gt;StaticLoggerBinder&lt;/tt&gt; to figure out which logging implementation to use. That seems &lt;a href=&quot;https://www.slf4j.org/faq.html#changesInVersion18&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;deprecated&lt;/a&gt;&#160;as of slf4j v1.8 (soon to be released), in lieu of some JIgsaw modularization. I have absolutely zero desire to investigate that modularization, wrt to cassandra as a whole. What are the alternatives here? Remaining on the current version of slf4j is certainly an option&lt;/p&gt;

&lt;p&gt;ftr, 3.11 uses slf4j 1.7.7&lt;/p&gt;</comment>
                            <comment id="16412205" author="ehubert" created="Fri, 23 Mar 2018 22:44:08 +0000"  >&lt;p&gt;Hi Jason! Sorry about the patch file. I now quickly recreated it from command line using git diff after pulling all updates from the 3.11 branch and attached it as  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12916000/12916000_CASSANDRA-13396_ehubert_2.patch&quot; title=&quot;CASSANDRA-13396_ehubert_2.patch attached to CASSANDRA-13396&quot;&gt;CASSANDRA-13396_ehubert_2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;br/&gt;
Regarding your question about alternatives to determine the logging implementation slf4j bound to when using slf4j &amp;gt;= 1.8 I do not think this will be much related to Jigsaw modularization (although I may be wrong). Looks like they make use of the long existing ServiceLoader JDK implementation (AFAIK since JDK6). I happily offer to investigate this. Other alternatives to simply do something similar by attempting to load specific implementation classes via reflection is by far not as elegant if you ask me.&lt;/p&gt;</comment>
                            <comment id="16412255" author="ehubert" created="Fri, 23 Mar 2018 23:34:53 +0000"  >&lt;p&gt;I&apos;m willing to test this out, but I think for slf4j &amp;gt;=1.8 we may need something like the following untested litte utility method to do the job of determining the binding&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; SLF4JServiceProvider determineSlf4jProvider() 
{
        ServiceLoader&amp;lt;SLF4JServiceProvider&amp;gt; serviceLoader = ServiceLoader.load(SLF4JServiceProvider.class);
        Iterator&amp;lt;SLF4JServiceProvider&amp;gt; serviceIterator = serviceLoader.iterator();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (serviceIterator.hasNext()) 
        {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; serviceIterator.next();
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NOPServiceProvider()
        }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or via reflection make org.slf4j.LoggerFactory#getProvider() accessible and call it&lt;br/&gt;
or provde an own class in package org.slf4j and wrap this static message call to this package-scoped method.&lt;/p&gt;

&lt;p&gt;Maybe this is all not necessary and one can directly work with public org.slf4j.LoggerFactory#getILoggerFactory() using the bound provider to return a implementation-specific factory. As said, I&apos;ll happily have a closer look at this. I&apos;m pretty sure something which can be addressed rather easily. The latter might even be somehow possible to use for a compatible implementation although returned implementation classes are very likely completely different for those slf4j versions.&lt;/p&gt;</comment>
                            <comment id="16412299" author="jasobrown" created="Sat, 24 Mar 2018 00:18:19 +0000"  >&lt;p&gt;hmm, yeah those aren&apos;t great options. I think we can stick with the &lt;tt&gt;StaticLoggerBinder&lt;/tt&gt; while we&apos;re still on slf4j &amp;lt; 1.8, to keep it simple. Maybe we can include a note for the future for when we do upgrade slf4j 1.8. wdyt?&lt;/p&gt;</comment>
                            <comment id="16412340" author="jasobrown" created="Sat, 24 Mar 2018 01:27:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehubert&quot; class=&quot;user-hover&quot; rel=&quot;ehubert&quot;&gt;ehubert&lt;/a&gt; I can successfully apply your patch now. I moved the logback jars out of the way, added slf4j-jdk14-1.7.7.jar into lib, and was able to bring up cassandra without problem with the patch. Got this message as output:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;WARNING: You are using Cassandra with an unsupported deployment. The intended logging implementation library logback is not used by slf4j. Detected slf4j binding: org.slf4j.impl.JDK14LoggerFactory. You will not be able to dynamically manage log levels via JMX and may have performance or other issues.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Thus the code went down the &lt;tt&gt;else&lt;/tt&gt; block.&lt;/p&gt;

&lt;p&gt;Review will continue ...&lt;/p&gt;</comment>
                            <comment id="16412701" author="ehubert" created="Sat, 24 Mar 2018 17:42:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt; thanks for your feedback, which helped me to adjust the logging implementation detection from using an slf4j implementation depended mechanism (&lt;tt&gt;StaticLoggerBinder&lt;/tt&gt;) instead just using what is available via its public API &lt;tt&gt;org.slf4j.LoggerFactory#getILoggerFactory()&lt;/tt&gt; which is totally sufficient for this purpose (see updated patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12916069/12916069_CASSANDRA-13396_ehubert_3.patch&quot; title=&quot;CASSANDRA-13396_ehubert_3.patch attached to CASSANDRA-13396&quot;&gt;CASSANDRA-13396_ehubert_3.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;).&lt;/p&gt;

&lt;p&gt;I now also tested some slf4j backend implemenations with different versions of slf4j:&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;slf4j 1.7.12 - JUL:&lt;/ins&gt;&lt;br/&gt;
 WARNING: You are using Cassandra with an unsupported deployment. The intended logging implementation library logback is not used by slf4j. Detected slf4j logger factory: org.slf4j.&lt;b&gt;impl&lt;/b&gt;.JDK14LoggerFactory. You will not be able to dynamically manage log levels via JMX and may have performance or other issues.&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;slf4j 1.7.12 - Logback 1.1.3 or 1.2.3:&lt;/ins&gt;&lt;br/&gt;
 No warning - successful Cassandra startup&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;slf4j 1.8.0-beta2 - JUL:&lt;/ins&gt;&lt;br/&gt;
 WARNING: You are using Cassandra with an unsupported deployment. The intended logging implementation library logback is not used by slf4j. Detected slf4j logger factory: org.slf4j.&lt;b&gt;jul&lt;/b&gt;.JDK14LoggerFactory. You will not be able to dynamically manage log levels via JMX and may have performance or other issues.&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;slf4j 1.8.0-beta2 - Logback 1.3.0-alpha4&lt;/ins&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;logback depencendy upgrade to 1.3.0 required - slf4j upgrade to 1.8.x should only be done once logback 1.3.x release is availabe&lt;/em&gt;&lt;br/&gt;
 No warning - successful Cassandra startup&lt;/p&gt;

&lt;p&gt;I did not test whether the logback-implementation specific code (with my patch centralized in&#160;&lt;tt&gt;org.apache.cassandra.utils.logging.LogbackLoggingSupport&lt;/tt&gt;) is still working properly after this library upgrade. I only tested implementation detection does not need to be adjusted when upgrading to the newer slf4j version.&lt;/p&gt;</comment>
                            <comment id="16412796" author="githubbot" created="Sat, 24 Mar 2018 21:13:45 +0000"  >&lt;p&gt;GitHub user e-hubert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/210&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13396&quot; title=&quot;Cassandra 3.10: ClassCastException in ThreadAwareSecurityManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13396&quot;&gt;&lt;del&gt;CASSANDRA-13396&lt;/del&gt;&lt;/a&gt;: &lt;/p&gt;

&lt;p&gt;    Centralize logback specific implementation and load/instantiate it via reflection&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/e-hubert/cassandra&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/e-hubert/cassandra&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13396&quot; title=&quot;Cassandra 3.10: ClassCastException in ThreadAwareSecurityManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13396&quot;&gt;&lt;del&gt;CASSANDRA-13396&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/210.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/210.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #210&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16413705" author="jasobrown" created="Mon, 26 Mar 2018 11:27:21 +0000"  >&lt;p&gt;In addition to pulling in the minor fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehubert&quot; class=&quot;user-hover&quot; rel=&quot;ehubert&quot;&gt;ehubert&lt;/a&gt; added over the weekend, I made some minor editorial changes, and committed as sha &lt;tt&gt;bd0804065daaa01ba478c0ed97f7411f1180eef9&lt;/tt&gt;. Thanks!&lt;/p&gt;</comment>
                            <comment id="16414012" author="githubbot" created="Mon, 26 Mar 2018 15:35:10 +0000"  >&lt;p&gt;Github user e-hubert commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/210&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Closing this pull request as thanks to @jasobrown those changes were pushed to 3.11 with some editorial changes.&lt;/p&gt;</comment>
                            <comment id="16414013" author="githubbot" created="Mon, 26 Mar 2018 15:35:11 +0000"  >&lt;p&gt;Github user e-hubert closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/210&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13062361">CASSANDRA-13424</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13109929">CASSANDRA-13961</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12915316" name="CASSANDRA-13396_ehubert_1.patch" size="27471" author="ehubert" created="Tue, 20 Mar 2018 12:57:39 +0000"/>
                            <attachment id="12916000" name="CASSANDRA-13396_ehubert_2.patch" size="45088" author="ehubert" created="Fri, 23 Mar 2018 22:30:36 +0000"/>
                            <attachment id="12916069" name="CASSANDRA-13396_ehubert_3.patch" size="27635" author="ehubert" created="Sat, 24 Mar 2018 17:31:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ehubert]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3d233:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jasobrown</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jasobrown]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>