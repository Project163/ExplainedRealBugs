<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:46:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7572] cassandra-env.sh fails to find Java version if JAVA_TOOL_OPTIONS in environment</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7572</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Parsing of Java version is done in cassandra-env.sh via&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java_ver_output=`&lt;span class=&quot;code-quote&quot;&gt;&quot;${JAVA:-java}&quot;&lt;/span&gt; -version 2&amp;gt;&amp;amp;1`

jvmver=`echo &lt;span class=&quot;code-quote&quot;&gt;&quot;$java_ver_output&quot;&lt;/span&gt; | awk -F&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;NR==1 {print $2}&apos;&lt;/span&gt;`
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This fails if the first line of output from `java -version` does not contain the version. When JAVA_TOOL_OPTIONS is set as the output is&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8&lt;br/&gt;
java version &quot;1.7.0_40&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_40-b43)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 24.0-b56, mixed mode)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Parsing this is not guaranteed to work as there is no contract for this output. The recommended way of dealing with this is via a Java application (which will have access to each of these pieces).&lt;/p&gt;

&lt;p&gt;If you want to keep with this model of doing things, you can apply a very small but hacky patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-jvmver=`echo &lt;span class=&quot;code-quote&quot;&gt;&quot;$java_ver_output&quot;&lt;/span&gt; | awk -F&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;NR==1 {print $2}&apos;&lt;/span&gt;`
+jvmver=`echo &lt;span class=&quot;code-quote&quot;&gt;&quot;$java_ver_output&quot;&lt;/span&gt; | grep &lt;span class=&quot;code-quote&quot;&gt;&apos;java version&apos;&lt;/span&gt; | awk -F&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;NR==1 {print $2}&apos;&lt;/span&gt;`
 JVM_VERSION=${jvmver%_*}
 JVM_PATCH_VERSION=${jvmver#*_}

@@ -100,7 +100,7 @@
 fi


-jvm=`echo &lt;span class=&quot;code-quote&quot;&gt;&quot;$java_ver_output&quot;&lt;/span&gt; | awk &lt;span class=&quot;code-quote&quot;&gt;&apos;NR==2 {print $1}&apos;&lt;/span&gt;`
+jvm=`echo &lt;span class=&quot;code-quote&quot;&gt;&quot;$java_ver_output&quot;&lt;/span&gt; | grep -A 1 &lt;span class=&quot;code-quote&quot;&gt;&apos;java version&apos;&lt;/span&gt; | awk &lt;span class=&quot;code-quote&quot;&gt;&apos;NR==2 {print $1}&apos;&lt;/span&gt;`
 &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$jvm&quot;&lt;/span&gt; in
     OpenJDK)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Otherwise, you need to write a java app, compiled for older versions, that returns this data via the java.specification.version and a combination of java.vm.name and java.vm.vendor.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux/darwin/etc&lt;/p&gt;</environment>
        <key id="12728275">CASSANDRA-7572</key>
            <summary>cassandra-env.sh fails to find Java version if JAVA_TOOL_OPTIONS in environment</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ramsperger">Gregory Ramsperger</assignee>
                                    <reporter username="ramsperger">Gregory Ramsperger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Jul 2014 21:16:00 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:40 +0000</updated>
                            <resolved>Mon, 21 Jul 2014 12:53:38 +0000</resolved>
                                        <fixVersion>2.0.10</fixVersion>
                    <fixVersion>2.1 rc5</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14068476" author="brandon.williams" created="Mon, 21 Jul 2014 12:53:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;Parsing this is not guaranteed to work as there is no contract for this output. The recommended way of dealing with this is via a Java application (which will have access to each of these pieces).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;While I totally agree with you on this point, we&apos;ve been using this method for years without any problem until now, so I committed the change with grep.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ramsperger]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406380</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xxjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406400</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324629">2.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>