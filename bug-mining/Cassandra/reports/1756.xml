<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:34:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4602] Stack Size on Sun JVM 1.6.0_33 must be at least 160k</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4602</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I started a fresh Cassandra 1.1.4 install with Sun JVM 1.6.35.&lt;/p&gt;

&lt;p&gt;On startup I got this in output.log&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;The stack size specified is too small, Specify at least 160k
Cannot create Java VM
Service exit with a return value of 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Remembering &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4275&quot; title=&quot;Oracle Java 1.7 u4 does not allow Xss128k&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4275&quot;&gt;&lt;del&gt;CASSANDRA-4275&lt;/del&gt;&lt;/a&gt; I monkeyed around and started the JVM with -Xss160k the same as Java 7. I then got&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [WRITE-/192.168.1.12] 2012-08-31 01:43:29,865 AbstractCassandraDaemon.java (line 134) Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[WRITE-/192.168.1.12,5,main]
java.lang.StackOverflowError
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(Unknown Source)
	at java.net.SocketOutputStream.write(Unknown Source)
	at java.io.BufferedOutputStream.flushBuffer(Unknown Source)
	at java.io.BufferedOutputStream.flush(Unknown Source)
	at java.io.DataOutputStream.flush(Unknown Source)
	at org.apache.cassandra.net.OutboundTcpConnection.writeConnected(OutboundTcpConnection.java:156)
	at org.apache.cassandra.net.OutboundTcpConnection.run(OutboundTcpConnection.java:126)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Same as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4442&quot; title=&quot;Stack size settings in cassandra-env.sh assume 64-bit x86&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4442&quot;&gt;&lt;del&gt;CASSANDRA-4442&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;At which point I dropped back to Java 6.33. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4457&quot; title=&quot;Find the cause for the need for a larger stack size with jdk 7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4457&quot;&gt;&lt;del&gt;CASSANDRA-4457&lt;/del&gt;&lt;/a&gt; bumped the stack size to 180 for java 7, should we also do this for Java 6.33+ ?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 10.04 &lt;br/&gt;
java version &quot;1.6.0_35&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_35-b10)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01, mixed mode)&lt;/p&gt;</environment>
        <key id="12605931">CASSANDRA-4602</key>
            <summary>Stack Size on Sun JVM 1.6.0_33 must be at least 160k</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="amorton">Aaron Morton</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Sep 2012 23:34:08 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:28 +0000</updated>
                            <resolved>Mon, 24 Sep 2012 19:50:04 +0000</resolved>
                                        <fixVersion>1.0.12</fixVersion>
                    <fixVersion>1.1.5</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13447239" author="jbellis" created="Mon, 3 Sep 2012 12:05:59 +0000"  >&lt;p&gt;Were you able to find anything in the release notes on this?  I couldn&apos;t.&lt;/p&gt;</comment>
                            <comment id="13447241" author="jbellis" created="Mon, 3 Sep 2012 12:08:09 +0000"  >&lt;p&gt;patch against 1.0 to change default to 160&lt;/p&gt;</comment>
                            <comment id="13447992" author="brandon.williams" created="Tue, 4 Sep 2012 19:40:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13448000" author="jbellis" created="Tue, 4 Sep 2012 19:55:07 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="13449551" author="omid" created="Thu, 6 Sep 2012 10:30:54 +0000"  >&lt;p&gt;Apparently this is due to HotSpot fix 7059899 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; on 1.6.0_34 that increased &quot;StackShadowPages&quot;&apos;s default to 20, since a change in socketWrite&apos;s native implementation required more stack space. Increased StackShadowPages might require increased stack size (-Xss) &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; so that upon a call to a native method, there would be at least &quot;StackShadowPages&quot; stack space available.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7059899&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7059899&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/crashes-137240.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.oracle.com/technetwork/java/javase/crashes-137240.html&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13449638" author="jbellis" created="Thu, 6 Sep 2012 13:23:45 +0000"  >&lt;p&gt;Thanks, Omid!&lt;/p&gt;</comment>
                            <comment id="13454718" author="zenek_kraweznik0" created="Thu, 13 Sep 2012 07:53:02 +0000"  >&lt;p&gt;cassandra 1.1.5&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;java -version&lt;br/&gt;
java version &quot;1.6.0_35&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_35-b10)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01, mixed mode)&lt;br/&gt;
#&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;ERROR 17:39:53,363 Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;Thrift:4040,5,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
        at java.net.SocketInputStream.socketRead0(Native Method)&lt;br/&gt;
        at java.net.SocketInputStream.read(Unknown Source)&lt;br/&gt;
        at java.io.BufferedInputStream.fill(Unknown Source)&lt;br/&gt;
        at java.io.BufferedInputStream.read1(Unknown Source)&lt;br/&gt;
        at java.io.BufferedInputStream.read(Unknown Source)&lt;br/&gt;
        at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:127)&lt;br/&gt;
        at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)&lt;br/&gt;
        at org.apache.thrift.transport.TFramedTransport.readFrame(TFramedTransport.java:129)&lt;br/&gt;
        at org.apache.thrift.transport.TFramedTransport.read(TFramedTransport.java:101)&lt;br/&gt;
        at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)&lt;br/&gt;
        at org.apache.thrift.protocol.TBinaryProtocol.readAll(TBinaryProtocol.java:378)&lt;br/&gt;
        at org.apache.thrift.protocol.TBinaryProtocol.readI32(TBinaryProtocol.java:297)&lt;br/&gt;
        at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:204)&lt;br/&gt;
        at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:22)&lt;br/&gt;
        at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:186)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&lt;br/&gt;
        at java.lang.Thread.run(Unknown Source)&lt;/p&gt;

&lt;p&gt;stack shoud be set to minimum 192k&lt;/p&gt;</comment>
                            <comment id="13462046" author="jbellis" created="Mon, 24 Sep 2012 19:50:04 +0000"  >&lt;p&gt;it looks like you are sending large-ish Thrift messages.  I&apos;m fine with saying that if you&apos;re going to do that, you need to push up the stack size manually.&lt;/p&gt;</comment>
                            <comment id="13464451" author="pmcfadin" created="Thu, 27 Sep 2012 05:12:02 +0000"  >&lt;p&gt;+1 on greater than 160. Just fixed a re-occurring StackOverflowError problem by bumping the stack size. Added this line to cassandra-env.sh:&lt;/p&gt;

&lt;p&gt;JVM_OPTS=&quot;$JVM_OPTS -Xss194k&quot;&lt;/p&gt;

&lt;p&gt;Same JRE as above. build 1.6.0_35-b10&lt;/p&gt;

&lt;p&gt;It was set to 160k but still threw exceptions.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12543538" name="4602.txt" size="455" author="jbellis" created="Mon, 3 Sep 2012 12:08:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b41j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62767</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>