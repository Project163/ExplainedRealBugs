<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:18:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1730] Fat clients are never removed</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1730</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After a failed bootstrap, these lines repeat infinitely:&lt;/p&gt;

&lt;p&gt; INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Timer-0&amp;#93;&lt;/span&gt; 2010-11-11 01:58:32,708 Gossiper.java (line 406) FatClient /10.104.73.164 has been silent for 3600000ms, removing from gossip&lt;br/&gt;
 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;GMFD:1&amp;#93;&lt;/span&gt; 2010-11-11 01:59:03,685 Gossiper.java (line 591) Node /10.104.73.164 is now part of the cluster&lt;/p&gt;

&lt;p&gt;Changing the IP on the node but using the same token causes a conflict, requiring either a full cluster restart or changing the token.  This is especially easy to run into in practice in a virtual environment such as ec2.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12479741">CASSANDRA-1730</key>
            <summary>Fat clients are never removed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Nov 2010 19:17:04 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:13 +0000</updated>
                            <resolved>Fri, 3 Dec 2010 21:05:20 +0000</resolved>
                                        <fixVersion>0.6.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12935004" author="jbellis" created="Tue, 23 Nov 2010 19:50:53 +0000"  >&lt;p&gt;is this related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1518&quot; title=&quot;remember ring state between restarts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1518&quot;&gt;&lt;del&gt;CASSANDRA-1518&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="12935006" author="brandon.williams" created="Tue, 23 Nov 2010 19:53:32 +0000"  >&lt;p&gt;I don&apos;t think so since this was encountered on 0.6&lt;/p&gt;</comment>
                            <comment id="12966653" author="brandon.williams" created="Fri, 3 Dec 2010 20:18:57 +0000"  >&lt;p&gt;The problem here is that node A removes the fat client, but node B&apos;s timeout hasn&apos;t been exceeded yet, so it still has it.  RING_DELAY elapses, and B propagates the fat client back to A, and when B does remove it A will do the inverse.  Part of the problem here appears to be that the FD is adaptive and RING_DELAY is static, and since both occurrences of this I know of have been on ec2, I suspect somehow the difference between all nodes marking the client as dead has exceeded RING_DELAY.  Since by way of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-644&quot; title=&quot;Provide way to remove nodes from gossip entirely&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-644&quot;&gt;&lt;del&gt;CASSANDRA-644&lt;/del&gt;&lt;/a&gt; the 1h timeout for fatclients appears to have been chosen arbitrarily, I think we should reduce this to RING_DELAY / 2, giving justRemovedEndpoints plenty of leeway to prevent re-gossiping the fatclient to other nodes that have already removed it and evicted it from jRE.  Trivial patch attached. &lt;/p&gt;</comment>
                            <comment id="12966654" author="jbellis" created="Fri, 3 Dec 2010 20:22:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12966672" author="brandon.williams" created="Fri, 3 Dec 2010 21:05:20 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="12966692" author="hudson" created="Fri, 3 Dec 2010 22:01:24 +0000"  >&lt;p&gt;Integrated in Cassandra-0.6 #16 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.6/16/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.6/16/&lt;/a&gt;)&lt;br/&gt;
    Reduce FatClient timeout to RING_DELAY / 2.  Patch by brandonwilliams, reviewed by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1730&quot; title=&quot;Fat clients are never removed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1730&quot;&gt;&lt;del&gt;CASSANDRA-1730&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12968948" author="hudson" created="Tue, 7 Dec 2010 20:30:52 +0000"  >&lt;p&gt;Integrated in Cassandra #615 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra/615/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra/615/&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="12970399" author="hudson" created="Sat, 11 Dec 2010 07:35:12 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #70 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.7/70/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.7/70/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12465270" name="1730.txt" size="860" author="brandon.williams" created="Fri, 3 Dec 2010 20:18:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20278</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g71b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92570</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>