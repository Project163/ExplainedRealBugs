<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:01:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11033] Prevent logging in sandboxed state</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11033</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;logback will re-read its configuration file regularly. So it is possible that logback tries to reload the configuration while we log from a sandboxed UDF, which will fail due to the restricted access privileges for UDFs. UDAs are also affected as these use UDFs.&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=doanduyhai&quot; class=&quot;user-hover&quot; rel=&quot;doanduyhai&quot;&gt;doanduyhai&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12932519">CASSANDRA-11033</key>
            <summary>Prevent logging in sandboxed state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="snazy">Robert Stupp</assignee>
                                    <reporter username="snazy">Robert Stupp</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jan 2016 20:30:08 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:44 +0000</updated>
                            <resolved>Fri, 19 Feb 2016 09:35:30 +0000</resolved>
                                        <fixVersion>3.0.4</fixVersion>
                    <fixVersion>3.4</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15107455" author="snazy" created="Tue, 19 Jan 2016 21:18:34 +0000"  >&lt;p&gt;As a workaround it should work to set &lt;tt&gt;scan=&quot;false&quot;&lt;/tt&gt; in &lt;tt&gt;logbook.xml&lt;/tt&gt;: &lt;tt&gt;&amp;lt;configuration scan=&quot;false&quot;&amp;gt;&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15107501" author="doanduyhai" created="Tue, 19 Jan 2016 21:36:53 +0000"  >&lt;p&gt;Ok, good to know and to document. Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt; for the good catch, it&apos;s pretty tricky&lt;/p&gt;</comment>
                            <comment id="15110882" author="snazy" created="Thu, 21 Jan 2016 16:47:42 +0000"  >&lt;p&gt;I can reproduce this locally by reducing the scan-period for logback config to 1ms.&lt;br/&gt;
The &quot;problematic&quot; part in the call stack is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	at com.datastax.driver.core.CodecRegistry.lookupCodec(CodecRegistry.java:495)
	at com.datastax.driver.core.CodecRegistry.codecFor(CodecRegistry.java:426)
	at org.apache.cassandra.cql3.functions.UDHelper.codecFor(UDHelper.java:61)
	at org.apache.cassandra.cql3.functions.UDHelper.deserialize(UDHelper.java:140)
	at org.apache.cassandra.cql3.functions.UDFunction.compose(UDFunction.java:486)
	at org.apache.cassandra.cql3.functions.JavaUDF.compose(JavaUDF.java:47)
	at org.apache.cassandra.cql3.udf.gen.pcql_test_keyspace2efunction_1_11014011_4.Ccql_test_keyspace2efunction_1_4916142_5.executeImpl(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.cassandra.cql3.udf.gen.pcql_test_keyspace2efunction_1_11014011_4;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That&apos;s not very hard to fix - can get around these &lt;tt&gt;codecFor()&lt;/tt&gt; calls in the sandboxed code path.&lt;/p&gt;</comment>
                            <comment id="15111001" author="snazy" created="Thu, 21 Jan 2016 17:54:40 +0000"  >&lt;p&gt;Migrated from &lt;tt&gt;DataType&lt;/tt&gt; to &lt;tt&gt;TypeCodec&lt;/tt&gt; which has the advantage, that there are logger calls in the sandbox&apos;s code path. The included unit (which set&apos;s logback&apos;s scan interval to 1ms for the duration of that test) test failed for &lt;tt&gt;DataType&lt;/tt&gt; and succeeds for &lt;tt&gt;TypeCodec&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Patch attached, waiting for cassci now.&lt;/p&gt;</comment>
                            <comment id="15112073" author="snazy" created="Fri, 22 Jan 2016 07:58:01 +0000"  >&lt;p&gt;utests + dtests look good so far.&lt;/p&gt;</comment>
                            <comment id="15152859" author="thobbs" created="Thu, 18 Feb 2016 19:00:43 +0000"  >&lt;p&gt;+1 on the code changes, but can you also do a CI run on a trunk version of the branch before committing?&lt;/p&gt;</comment>
                            <comment id="15152878" author="snazy" created="Thu, 18 Feb 2016 19:05:36 +0000"  >&lt;p&gt;Thanks!&lt;br/&gt;
Will rebase and run CI against 3.0 + trunk before commit.&lt;/p&gt;</comment>
                            <comment id="15153979" author="snazy" created="Fri, 19 Feb 2016 09:35:30 +0000"  >&lt;p&gt;Tests look fine (nothing related to the patch).&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Committed as a76a8efcc7665068434fc105e174e22ede0ee5be to 3.0 and merged to trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12999793">CASSANDRA-12535</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[snazy]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rpcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>