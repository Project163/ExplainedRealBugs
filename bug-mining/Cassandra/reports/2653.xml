<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:43:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5897] GossipingPropertyFileSnitch does not auto-reload local rack/dc</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5897</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;With the property file snitch, I can change the rack and dc of a node in cassandra-topology.properties from DC1/RAC1 to DC2/RAC2 while the server is running and that configuration is reloaded a short time later.&lt;/p&gt;

&lt;p&gt;With the gossiping property file snitch, I change the cassandra-rackdc.properties when the server is running from DC1/RAC1 to DC2/RAC2 while the server is running and it never reloads.  It requires a restart.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12664029">CASSANDRA-5897</key>
            <summary>GossipingPropertyFileSnitch does not auto-reload local rack/dc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daniels">Daniel Shelepov</assignee>
                                    <reporter username="jeromatron">Jeremy Hanna</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Aug 2013 09:38:09 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:07 +0000</updated>
                            <resolved>Thu, 6 Mar 2014 17:29:36 +0000</resolved>
                                        <fixVersion>2.1 rc2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13911221" author="daniels" created="Tue, 25 Feb 2014 04:13:58 +0000"  >&lt;p&gt;I&apos;ll see if I can make this work.  Should be relatively straightforward.&lt;/p&gt;</comment>
                            <comment id="13912545" author="daniels" created="Wed, 26 Feb 2014 05:44:19 +0000"  >&lt;p&gt;Here is my stab at a fix for this issue.  Pretty much just following update listening logic that is already implemented in PropertyFileSnitch.&lt;/p&gt;
</comment>
                            <comment id="13913484" author="thobbs" created="Wed, 26 Feb 2014 20:47:05 +0000"  >&lt;p&gt;Thanks, Daniel!&lt;/p&gt;

&lt;p&gt;Overall this looks pretty good.  I would still check if the dc, rack, or preferLocal have changed before invalidating cached rings and gossiping.  Although ResourceWatch only triggers a reload if the mod time on the file goes up, that doesn&apos;t necessarily mean the dc or rack have changed.&lt;/p&gt;

&lt;p&gt;And a couple of nitpicks:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;You don&apos;t need curly braces for single-line &quot;if&quot; statements&lt;/li&gt;
	&lt;li&gt;Name the constant &lt;tt&gt;DEFAULT_REFRESH_PERIOD_IN_SECONDS&lt;/tt&gt; instead of &lt;tt&gt;DEFAULT_REFRESH_PERIOD_IN_S&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Although this case should be rare, I would log at error instead of debug if there&apos;s a ConfigurationException setting up the watcher.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13914169" author="daniels" created="Thu, 27 Feb 2014 07:37:01 +0000"  >&lt;p&gt;Addressed CR feedback.  Note that I have previously omitted a couple of new test files from the patch (looks like git instruction on &lt;a href=&quot;http://wiki.apache.org/cassandra/HowToContribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/cassandra/HowToContribute&lt;/a&gt; might be slightly off).&lt;/p&gt;</comment>
                            <comment id="13914171" author="daniels" created="Thu, 27 Feb 2014 07:41:47 +0000"  >&lt;p&gt;One more amendment:  elevating log level on configuration exception&lt;/p&gt;</comment>
                            <comment id="13916102" author="thobbs" created="Fri, 28 Feb 2014 17:59:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;looks like git instruction on &lt;a href=&quot;http://wiki.apache.org/cassandra/HowToContribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/cassandra/HowToContribute&lt;/a&gt; might be slightly off&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You&apos;re right.  I&apos;ll get that fixed, thanks.&lt;/p&gt;

&lt;p&gt;v3 is almost good to go, it just needs some minor cleanup on the test file:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Remove unused imports&lt;/li&gt;
	&lt;li&gt;The docstring for testBasic isn&apos;t really useful.  I would just delete it and name the method &quot;testAutoReloadConfig&quot; or something similar.&lt;/li&gt;
	&lt;li&gt;You can shorten the reload period and sleep to 1 and 1.5 seconds, respectively.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13917632" author="daniels" created="Mon, 3 Mar 2014 00:10:24 +0000"  >&lt;p&gt;addressed test issues&lt;/p&gt;</comment>
                            <comment id="13920029" author="thobbs" created="Tue, 4 Mar 2014 21:17:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13922785" author="thobbs" created="Thu, 6 Mar 2014 17:29:36 +0000"  >&lt;p&gt;Comitted&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12631475" name="trunk-5897-v2.txt" size="13148" author="daniels" created="Thu, 27 Feb 2014 07:37:01 +0000"/>
                            <attachment id="12631476" name="trunk-5897-v3.txt" size="13896" author="daniels" created="Thu, 27 Feb 2014 07:41:47 +0000"/>
                            <attachment id="12632166" name="trunk-5897-v4.txt" size="13628" author="daniels" created="Mon, 3 Mar 2014 00:10:24 +0000"/>
                            <attachment id="12631156" name="trunk-5897.txt" size="9181" author="daniels" created="Wed, 26 Feb 2014 05:42:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[daniels]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344030</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nbuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344332</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324449">1.2.6</customfieldvalue>
    <customfieldvalue id="12324159">2.1 rc3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>