<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:04:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12237] Cassandra stress graphing is broken</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12237</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Cassandra stress relies on a tmp file with the stress output so it can parse it and put it the the graph html.&lt;/p&gt;

&lt;p&gt;However the contents of this file is now broken:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Sleeping 2s...Sleeping 2s...
Sleeping 2s...
Warming up WRITE with 50000 iterations...Warming up WRITE with 50000 iterations...
Warming up WRITE with 50000 iterations...
Running WRITE with 500 threads 10 secondsRunning WRITE with 500 threads 10 seconds
Running WRITE with 500 threads 10 seconds

...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is as we create a &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MultiPrintStream&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; that inherits from &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;PrintWriter&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and then delegate the call to super as well as a list of other PrintWriters&lt;/p&gt;

&lt;p&gt;The call to super for println comes back into our print method so every line gets logged multiple times as we do the for (PrintStream s: newStreams) many times.&lt;/p&gt;

&lt;p&gt;We can change this to use composition and use our own interface if we want to use a composite for logging the results&lt;/p&gt;

&lt;p&gt;This results in the parsing of this file not quite working and the aggregate stats not working in produced graphs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12990817">CASSANDRA-12237</key>
            <summary>Cassandra stress graphing is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chbatey">Christopher Batey</assignee>
                                    <reporter username="chbatey">Christopher Batey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jul 2016 15:49:39 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:02 +0000</updated>
                            <resolved>Fri, 16 Sep 2016 10:23:35 +0000</resolved>
                                        <fixVersion>3.10</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15385861" author="chbatey" created="Wed, 20 Jul 2016 13:33:18 +0000"  >&lt;p&gt;Branch here: &lt;a href=&quot;https://github.com/chbatey/cassandra-1/tree/stress-graph-logging&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/chbatey/cassandra-1/tree/stress-graph-logging&lt;/a&gt; &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The temporary results log contained each line three times&lt;/li&gt;
	&lt;li&gt;None of the aggregate metrics showed up due to name changes in the logs/stats&lt;br/&gt;
json                                                                                                                                                                                                                                                                                                                                                                       &lt;/li&gt;
	&lt;li&gt;Auto run results were all the same color as the graph code was looking for a&lt;br/&gt;
log line that the user hadn&apos;t specified a thread count was no long there (all                                                                                                                                                                                                                                                                                              &lt;br/&gt;
results ended up with the same name)                                                                                                                                                                                                                                                                                                                                       &lt;/li&gt;
	&lt;li&gt;Only the first aggregates were shown for a multi run&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15395970" author="jmckenzie" created="Wed, 27 Jul 2016 16:51:28 +0000"  >&lt;p&gt;Sorry for the delay on review. Can confirm it&apos;s busted, can confirm your fix(es) appear to work. I should have a review for you by mid next week as I&apos;m out for a few days here.&lt;/p&gt;

&lt;p&gt;Thankfully, this is in a section of the code-base that doesn&apos;t change that often so there&apos;s low risk of atrophy.&lt;/p&gt;</comment>
                            <comment id="15439197" author="chbatey" created="Fri, 26 Aug 2016 14:59:01 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt; any update on a review? Hoping to stop using my branch of stress&lt;/p&gt;</comment>
                            <comment id="15453878" author="jkni" created="Thu, 1 Sep 2016 00:40:08 +0000"  >&lt;p&gt;+1 after some minor nits. Thanks for the patch!&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the test &lt;tt&gt;delegatesToAdditionalPrintStrams()&lt;/tt&gt; should be &lt;tt&gt;delegatesToAdditionalPrintStreams()&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;You have a comment starting with &quot;as far as I can tell this is always true&quot;. The false branch will be taken when settings.rate.minThreads is less than or equal to 0. While you are correct in the case that minthreads is set, when a fixed thread count is given to the rate option, minthreads will be set to -1 and the false branch will be taken.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15454458" author="chbatey" created="Thu, 1 Sep 2016 06:15:28 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve updated the commit to remove the comment and change the test name.&lt;/p&gt;</comment>
                            <comment id="15455650" author="jkni" created="Thu, 1 Sep 2016 14:48:18 +0000"  >&lt;p&gt;Note to committer: the patch applied should be from the latest commit on the GitHub branch linked above rather than the older attached patch.&lt;/p&gt;</comment>
                            <comment id="15455693" author="chbatey" created="Thu, 1 Sep 2016 15:02:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt; I have removed the patch just in case. I also rebased as the print settings heavily conflicted.&lt;/p&gt;</comment>
                            <comment id="15456229" author="iamaleksey" created="Thu, 1 Sep 2016 18:20:21 +0000"  >&lt;p&gt;Can you please fix the braces/newlines style in &lt;tt&gt;StressAction&lt;/tt&gt;, have the last commit add a CHANGES.txt entry, and proper commit message, in accordance with the standard? (including &apos;reviewed by&apos; line)? Thanks.&lt;/p&gt;</comment>
                            <comment id="15458257" author="chbatey" created="Fri, 2 Sep 2016 11:21:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; Updated the commit msg, CHANGES.txt and StressAction.&lt;/p&gt;</comment>
                            <comment id="15459027" author="jkni" created="Fri, 2 Sep 2016 16:52:02 +0000"  >&lt;p&gt;One more nit - the braces should be dropped in &lt;a href=&quot;https://github.com/chbatey/cassandra-1/commit/24ded4c6ba0769c0047297df4f740a7641794b9b#diff-fd2f2d2364937fcb1c0d73c8314f1418R65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this conditional&lt;/a&gt; in accordance with the code style. The rest of the changes look good.&lt;/p&gt;

&lt;p&gt;Sorry for not catching these in the first pass of review - that&apos;s my fault.&lt;/p&gt;</comment>
                            <comment id="15459409" author="chbatey" created="Fri, 2 Sep 2016 19:43:51 +0000"  >&lt;p&gt;Fixed&lt;/p&gt;</comment>
                            <comment id="15489993" author="slebresne" created="Wed, 14 Sep 2016 09:53:25 +0000"  >&lt;p&gt;Sorry for the delay in committing this but I was about to and there is now a bunch of merge conflict and I don&apos;t feel too confident with either the patch or the stress code. Would you mind rebasing?&lt;/p&gt;</comment>
                            <comment id="15491148" author="chbatey" created="Wed, 14 Sep 2016 18:36:25 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt; i have rebased the branch&lt;/p&gt;</comment>
                            <comment id="15492839" author="slebresne" created="Thu, 15 Sep 2016 09:16:41 +0000"  >&lt;p&gt;Are you sure you didn&apos;t forgot to push the rebase the github? The link above (&lt;a href=&quot;https://github.com/chbatey/cassandra-1/tree/stress-graph-logging&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/chbatey/cassandra-1/tree/stress-graph-logging&lt;/a&gt;) still shows the commit being based on trunk from the beginning of the month.&lt;/p&gt;</comment>
                            <comment id="15495642" author="chbatey" created="Fri, 16 Sep 2016 07:30:49 +0000"  >&lt;p&gt;Doh! Now it is &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15495944" author="slebresne" created="Fri, 16 Sep 2016 10:23:35 +0000"  >&lt;p&gt;Committed then, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[chbatey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i317jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jkni</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jkni]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>