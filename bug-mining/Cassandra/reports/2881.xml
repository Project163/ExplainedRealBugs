<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:45:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7365] some compactions do not works under windows (file in use during rename)</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7365</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;compaction do not works under windows due to file rename fails: (Pro&lt;br/&gt;
es nem&#223; p&#176;&#221;stup k souboru, nebo&#321; jej pr&#223;v&#253; vyu&#215;&#221;v&#223; jin&#345; proces = process can not access file because its in use by another process). Not all compactions are broken. compactions done during server startup on system tables works fine.&lt;/p&gt;

&lt;p&gt;INFO  18:30:27 Completed flushing c:\cassandra-2.1\data\system\compactions_in_progress-55080ab05d9c388690a4acb25fe1f77b\system-compactions_in_progress-ka-6-Dat.db (42 bytes) for commitlog position ReplayPosition(segmentId=1402165543361, psition=8024611)&lt;br/&gt;
ERROR 18:30:27 Exception in thread hread&lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:5,1,RMI Runtime&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.RuntimeException: Failed to rename c:\cassandra-2.1\data\test\sipdb-5&lt;br/&gt;
f51090ee6511e3815625991ef2b954\test-sipdb-tmp-ka-7-Index.db to c:\cassandra-2.1&lt;br/&gt;
data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka-7-Index.db&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:167) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:151) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.j&lt;br/&gt;
va:512) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.j&lt;br/&gt;
va:504) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.close(SSTableWriter.ja&lt;br/&gt;
a:479) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SST&lt;br/&gt;
bleWriter.java:427) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SST&lt;br/&gt;
bleWriter.java:422) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewrit&lt;br/&gt;
r.java:312) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewrit&lt;br/&gt;
r.java:306) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionTask.runWith(Compaction&lt;br/&gt;
ask.java:188) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.DiskAwareRunnable.runMayThrow(DiskAware&lt;br/&gt;
unnable.java:48) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:&lt;br/&gt;
8) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(Co&lt;br/&gt;
pactionTask.java:74) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(Ab&lt;br/&gt;
tractCompactionTask.java:59) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompa&lt;br/&gt;
tionTask.run(CompactionManager.java:235) ~[apache-cassandra-2.1.0-rc1.jar:2.1.0&lt;br/&gt;
rc1]&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:4&lt;br/&gt;
1) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[na:1.7.0_&lt;br/&gt;
0]&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor&lt;br/&gt;
java:1145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecuto&lt;br/&gt;
.java:615) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.nio.file.FileSystemException: c:\cassandra-2.1\data\test\sipdb-&lt;br/&gt;
8f51090ee6511e3815625991ef2b954\test-sipdb-tmp-ka-7-Index.db -&amp;gt; c:\cassandra-2.&lt;br/&gt;
\data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka-7-Index.db: Pro&lt;br/&gt;
es nem&#223; p&#176;&#221;stup k souboru, nebo&#321; jej pr&#223;v&#253; vyu&#215;&#221;v&#223; jin&#345; proces.&lt;/p&gt;

&lt;p&gt;        at sun.nio.fs.WindowsException.translateToIOException(WindowsException.&lt;br/&gt;
ava:86) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.ja&lt;br/&gt;
a:97) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:301) ~[na:1.7.0&lt;br/&gt;
60]&lt;br/&gt;
        at sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.&lt;br/&gt;
ava:287) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.nio.file.Files.move(Files.java:1347) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.atomicMoveWithFallback(FileUt&lt;br/&gt;
ls.java:181) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:163) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        ... 19 common frames omitted&lt;br/&gt;
INFO  18:30:27 Compacting [SSTableReader(path=&apos;c:\cassandra-2.1\data\system\com&lt;br/&gt;
actions_in_progress-55080ab05d9c388690a4acb25fe1f77b\system-compactions_in_prog&lt;br/&gt;
ess-ka-3-Data.db&apos;), SSTableReader(path=&apos;c:\cassandra-2.1\data\system\compaction&lt;br/&gt;
_in_progress-55080ab05d9c388690a4acb25fe1f77b\system-compactions_in_progress-ka&lt;br/&gt;
5-Data.db&apos;), SSTableReader(path=&apos;c:\cassandra-2.1\data\system\compactions_in_pr&lt;br/&gt;
gress-55080ab05d9c388690a4acb25fe1f77b\system-compactions_in_progress-ka-4-Data&lt;br/&gt;
db&apos;), SSTableReader(path=&apos;c:\cassandra-2.1\data\system\compactions_in_progress-&lt;br/&gt;
5080ab05d9c388690a4acb25fe1f77b\system-compactions_in_progress-ka-6-Data.db&apos;)]&lt;br/&gt;
ERROR 18:30:27 Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:5,1,RMI Runtime&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.RuntimeException: Failed to rename c:\cassandra-2.1\data\test\sipdb-5&lt;br/&gt;
f51090ee6511e3815625991ef2b954\test-sipdb-tmp-ka-7-Index.db to c:\cassandra-2.1&lt;br/&gt;
data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka-7-Index.db&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:167) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:151) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.j&lt;br/&gt;
va:512) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.j&lt;br/&gt;
va:504) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.close(SSTableWriter.ja&lt;br/&gt;
a:479) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SST&lt;br/&gt;
bleWriter.java:427) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SST&lt;br/&gt;
bleWriter.java:422) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewrit&lt;br/&gt;
r.java:312) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewrit&lt;br/&gt;
r.java:306) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionTask.runWith(Compaction&lt;br/&gt;
ask.java:188) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.DiskAwareRunnable.runMayThrow(DiskAware&lt;br/&gt;
unnable.java:48) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:&lt;br/&gt;
8) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(Co&lt;br/&gt;
pactionTask.java:74) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(Ab&lt;br/&gt;
tractCompactionTask.java:59) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompa&lt;br/&gt;
tionTask.run(CompactionManager.java:235) ~[apache-cassandra-2.1.0-rc1.jar:2.1.0&lt;br/&gt;
rc1]&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:4&lt;br/&gt;
1) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[na:1.7.0_&lt;br/&gt;
0]&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor&lt;br/&gt;
java:1145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecuto&lt;br/&gt;
.java:615) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.nio.file.FileSystemException: c:\cassandra-2.1\data\test\sipdb-&lt;br/&gt;
8f51090ee6511e3815625991ef2b954\test-sipdb-tmp-ka-7-Index.db -&amp;gt; c:\cassandra-2.&lt;br/&gt;
\data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka-7-Index.db: Pro&lt;br/&gt;
es nem&#223; p&#176;&#221;stup k souboru, nebo&#321; jej pr&#223;v&#253; vyu&#215;&#221;v&#223; jin&#345; proces.&lt;/p&gt;

&lt;p&gt;        at sun.nio.fs.WindowsException.translateToIOException(WindowsException.&lt;br/&gt;
ava:86) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.ja&lt;br/&gt;
a:97) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:301) ~[na:1.7.0&lt;br/&gt;
60]&lt;br/&gt;
        at sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.&lt;br/&gt;
ava:287) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.nio.file.Files.move(Files.java:1347) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.atomicMoveWithFallback(FileUt&lt;br/&gt;
ls.java:181) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:163) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        ... 19 common frames omitted&lt;br/&gt;
INFO  18:30:27 Compacted 4 sstables to [].  423 bytes to 0 (~0% of original) in&lt;br/&gt;
39ms = 0,000000MB/s.  4 total partitions merged to 0.  Partition merge counts w&lt;br/&gt;
re &lt;/p&gt;
{2:2, }
&lt;p&gt;INFO  18:30:45 Enqueuing flush of compactions_in_progress: 1345 (0%) on-heap, 0&lt;br/&gt;
(0%) off-heap&lt;br/&gt;
INFO  18:30:45 Writing Memtable-compactions_in_progress@15659113(153 serialized&lt;br/&gt;
bytes, 10 ops, 0%/0% of on/off-heap limit)&lt;br/&gt;
INFO  18:30:45 Completed flushing c:\cassandra-2.1\data\system\compactions_in_p&lt;br/&gt;
ogress-55080ab05d9c388690a4acb25fe1f77b\system-compactions_in_progress-ka-8-Dat&lt;br/&gt;
.db (173 bytes) for commitlog position ReplayPosition(segmentId=1402165543361,&lt;br/&gt;
osition=8025407)&lt;br/&gt;
INFO  18:30:45 Compacting [SSTableReader(path=&apos;c:\cassandra-2.1\data\test\sipdb&lt;br/&gt;
58f51090ee6511e3815625991ef2b954\test-sipdb-ka-3-Data.db&apos;), SSTableReader(path=&lt;br/&gt;
c:\cassandra-2.1\data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka&lt;br/&gt;
1-Data.db&apos;), SSTableReader(path=&apos;c:\cassandra-2.1\data\test\sipdb-58f51090ee651&lt;br/&gt;
e3815625991ef2b954\test-sipdb-ka-4-Data.db&apos;), SSTableReader(path=&apos;c:\cassandra-&lt;br/&gt;
.1\data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka-2-Data.db&apos;),&lt;br/&gt;
STableReader(path=&apos;c:\cassandra-2.1\data\test\sipdb-58f51090ee6511e3815625991ef&lt;br/&gt;
b954\test-sipdb-ka-6-Data.db&apos;)]&lt;br/&gt;
ERROR 18:31:41 Unable to delete c:\cassandra-2.1\data\test\sipdb-58f51090ee6511&lt;br/&gt;
3815625991ef2b954\test-sipdb-ka-8-Data.db (it will be removed on server restart&lt;br/&gt;
 we&apos;ll also retry after GC)&lt;br/&gt;
ERROR 18:31:41 Missing component: c:\cassandra-2.1\data\test\sipdb-58f51090ee65&lt;br/&gt;
1e3815625991ef2b954\test-sipdb-tmp-ka-8-Digest.sha1&lt;br/&gt;
ERROR 18:31:41 Missing component: c:\cassandra-2.1\data\test\sipdb-58f51090ee65&lt;br/&gt;
1e3815625991ef2b954\test-sipdb-tmp-ka-8-Summary.db&lt;br/&gt;
ERROR 18:31:41 Missing component: c:\cassandra-2.1\data\test\sipdb-58f51090ee65&lt;br/&gt;
1e3815625991ef2b954\test-sipdb-tmp-ka-8-Statistics.db&lt;br/&gt;
INFO  18:31:41 Enqueuing flush of compactions_in_progress: 148 (0%) on-heap, 0&lt;br/&gt;
0%) off-heap&lt;br/&gt;
INFO  18:31:41 Writing Memtable-compactions_in_progress@6888852(0 serialized by&lt;br/&gt;
es, 1 ops, 0%/0% of on/off-heap limit)&lt;br/&gt;
INFO  18:31:41 Completed flushing c:\cassandra-2.1\data\system\compactions_in_p&lt;br/&gt;
ogress-55080ab05d9c388690a4acb25fe1f77b\system-compactions_in_progress-ka-9-Dat&lt;br/&gt;
.db (42 bytes) for commitlog position ReplayPosition(segmentId=1402165543361, p&lt;br/&gt;
sition=8025563)&lt;br/&gt;
ERROR 18:31:41 Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:6,1,RMI Runtime&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.RuntimeException: Failed to rename c:\cassandra-2.1\data\test\sipdb-5&lt;br/&gt;
f51090ee6511e3815625991ef2b954\test-sipdb-tmp-ka-8-Index.db to c:\cassandra-2.1&lt;br/&gt;
data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka-8-Index.db&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:167) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:151) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.j&lt;br/&gt;
va:512) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.j&lt;br/&gt;
va:504) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.close(SSTableWriter.ja&lt;br/&gt;
a:479) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SST&lt;br/&gt;
bleWriter.java:427) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SST&lt;br/&gt;
bleWriter.java:422) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewrit&lt;br/&gt;
r.java:312) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewrit&lt;br/&gt;
r.java:306) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionTask.runWith(Compaction&lt;br/&gt;
ask.java:188) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.DiskAwareRunnable.runMayThrow(DiskAware&lt;br/&gt;
unnable.java:48) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:&lt;br/&gt;
8) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(Co&lt;br/&gt;
pactionTask.java:74) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(Ab&lt;br/&gt;
tractCompactionTask.java:59) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompa&lt;br/&gt;
tionTask.run(CompactionManager.java:235) ~[apache-cassandra-2.1.0-rc1.jar:2.1.0&lt;br/&gt;
rc1]&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:4&lt;br/&gt;
1) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[na:1.7.0_&lt;br/&gt;
0]&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor&lt;br/&gt;
java:1145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecuto&lt;br/&gt;
.java:615) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.nio.file.FileSystemException: c:\cassandra-2.1\data\test\sipdb-&lt;br/&gt;
8f51090ee6511e3815625991ef2b954\test-sipdb-tmp-ka-8-Index.db -&amp;gt; c:\cassandra-2.&lt;br/&gt;
\data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka-8-Index.db: Pro&lt;br/&gt;
es nem&#223; p&#176;&#221;stup k souboru, nebo&#321; jej pr&#223;v&#253; vyu&#215;&#221;v&#223; jin&#345; proces.&lt;/p&gt;

&lt;p&gt;        at sun.nio.fs.WindowsException.translateToIOException(WindowsException.&lt;br/&gt;
ava:86) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.ja&lt;br/&gt;
a:97) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:301) ~[na:1.7.0&lt;br/&gt;
60]&lt;br/&gt;
        at sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.&lt;br/&gt;
ava:287) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.nio.file.Files.move(Files.java:1347) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.atomicMoveWithFallback(FileUt&lt;br/&gt;
ls.java:181) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:163) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        ... 19 common frames omitted&lt;br/&gt;
ERROR 18:31:41 Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:6,1,RMI Runtime&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.RuntimeException: Failed to rename c:\cassandra-2.1\data\test\sipdb-5&lt;br/&gt;
f51090ee6511e3815625991ef2b954\test-sipdb-tmp-ka-8-Index.db to c:\cassandra-2.1&lt;br/&gt;
data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka-8-Index.db&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:167) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:151) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.j&lt;br/&gt;
va:512) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.j&lt;br/&gt;
va:504) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.close(SSTableWriter.ja&lt;br/&gt;
a:479) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SST&lt;br/&gt;
bleWriter.java:427) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SST&lt;br/&gt;
bleWriter.java:422) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewrit&lt;br/&gt;
r.java:312) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewrit&lt;br/&gt;
r.java:306) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionTask.runWith(Compaction&lt;br/&gt;
ask.java:188) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.DiskAwareRunnable.runMayThrow(DiskAware&lt;br/&gt;
unnable.java:48) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:&lt;br/&gt;
8) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(Co&lt;br/&gt;
pactionTask.java:74) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(Ab&lt;br/&gt;
tractCompactionTask.java:59) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompa&lt;br/&gt;
tionTask.run(CompactionManager.java:235) ~[apache-cassandra-2.1.0-rc1.jar:2.1.0&lt;br/&gt;
rc1]&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:4&lt;br/&gt;
1) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[na:1.7.0_&lt;br/&gt;
0]&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor&lt;br/&gt;
java:1145) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecuto&lt;br/&gt;
.java:615) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: java.nio.file.FileSystemException: c:\cassandra-2.1\data\test\sipdb-&lt;br/&gt;
8f51090ee6511e3815625991ef2b954\test-sipdb-tmp-ka-8-Index.db -&amp;gt; c:\cassandra-2.&lt;br/&gt;
\data\test\sipdb-58f51090ee6511e3815625991ef2b954\test-sipdb-ka-8-Index.db: Pro&lt;br/&gt;
es nem&#223; p&#176;&#221;stup k souboru, nebo&#321; jej pr&#223;v&#253; vyu&#215;&#221;v&#223; jin&#345; proces.&lt;/p&gt;

&lt;p&gt;        at sun.nio.fs.WindowsException.translateToIOException(WindowsException.&lt;br/&gt;
ava:86) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.ja&lt;br/&gt;
a:97) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:301) ~[na:1.7.0&lt;br/&gt;
60]&lt;br/&gt;
        at sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.&lt;br/&gt;
ava:287) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.nio.file.Files.move(Files.java:1347) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.7.0_60&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.atomicMoveWithFallback(FileUt&lt;br/&gt;
ls.java:181) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.j&lt;br/&gt;
va:163) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.0-rc1.jar:2.1.0-rc1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        ... 19 common frames omitted&lt;/p&gt;</description>
                <environment>&lt;p&gt;jdk7, cassandra-2.1rc1, os windows 32 bit&lt;/p&gt;</environment>
        <key id="12719029">CASSANDRA-7365</key>
            <summary>some compactions do not works under windows (file in use during rename)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmckenzie">Josh McKenzie</assignee>
                                    <reporter username="hsn">Radim Kolar</reporter>
                        <labels>
                            <label>Windows</label>
                    </labels>
                <created>Sat, 7 Jun 2014 19:11:35 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:07 +0000</updated>
                            <resolved>Thu, 12 Jun 2014 19:58:49 +0000</resolved>
                                        <fixVersion>2.1 rc2</fixVersion>
                                    <component>Legacy/Local Write-Read Paths</component>
                    <component>Local/Compaction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14025259" author="jmckenzie" created="Mon, 9 Jun 2014 15:09:32 +0000"  >&lt;p&gt;Could you attach your conf/cassandra.yaml file from this node and a compressed copy of your full system.log file from this node as well?  Also - does this consistently happen every time you run a compaction against this Keyspace or just intermittently?&lt;/p&gt;</comment>
                            <comment id="14025621" author="hsn" created="Mon, 9 Jun 2014 19:36:33 +0000"  >&lt;p&gt;every time against that keyspace&lt;/p&gt;</comment>
                            <comment id="14026497" author="jmckenzie" created="Tue, 10 Jun 2014 14:28:27 +0000"  >&lt;p&gt;Thanks Radim - I was specifically looking to see what your indexAccessMode was set to on your node - looks like it was standard so not memory-mapped where we have known issues on Windows (see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6993&quot; title=&quot;Windows: remove mmap&amp;#39;ed I/O for index files and force standard file access&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6993&quot;&gt;&lt;del&gt;CASSANDRA-6993&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4050&quot; title=&quot;Rewrite RandomAccessReader to use FileChannel / nio to address Windows file access violations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4050&quot;&gt;&lt;del&gt;CASSANDRA-4050&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I&apos;ve reproduced this error on rc-1 with a simple write stress, forcing disk_access_mode to standard:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;reproduction&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [CompactionExecutor:1] 2014-06-10 09:22:41,405 CassandraDaemon.java:166 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[CompactionExecutor:1,1,main]
java.lang.RuntimeException: Failed to rename \&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;\lib\cassandra\data\Keyspace1\Standard1-654f28c0f0aa11e39dd391f9d8b074f2\Keyspace1-Standard1-tmp-ka-7-Index.db to \&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;\lib\cassandra\data\Keyspace1\Standard1-654f28c0f0aa11e39dd391f9d8b074f2\Keyspace1-Standard1-ka-7-Index.db
    at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:167) ~[main/:na]
    at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:151) ~[main/:na]
    at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.java:512) ~[main/:na]
    at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.java:504) ~[main/:na]
    at org.apache.cassandra.io.sstable.SSTableWriter.close(SSTableWriter.java:479) ~[main/:na]
    at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SSTableWriter.java:427) ~[main/:na]
    at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SSTableWriter.java:422) ~[main/:na]
    at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewriter.java:312) ~[main/:na]
    at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewriter.java:306) ~[main/:na]
    at org.apache.cassandra.db.compaction.CompactionTask.runWith(CompactionTask.java:188) ~[main/:na]
 ...
Caused by: java.nio.file.FileSystemException: \&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;\lib\cassandra\data\Keyspace1\Standard1-654f28c0f0aa11e39dd391f9d8b074f2\Keyspace1-Standard1-tmp-ka-7-Index.db -&amp;gt; \&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;\lib\cassandra\data\Keyspace1\Standard1-654f28c0f0aa11e39dd391f9d8b074f2\Keyspace1-Standard1-ka-7-Index.db: The process cannot access the file because it is being used by another process.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I haven&apos;t seen this issue prior to rc1 so I&apos;ll dig back a bit and try to find out when a regression was introduced.&lt;/p&gt;</comment>
                            <comment id="14027347" author="jmckenzie" created="Wed, 11 Jun 2014 02:16:46 +0000"  >&lt;p&gt;Tracked down error introduction to commit 4e95953f29d89a441dfe06d3f0393ed7dd8586df, &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6916&quot; title=&quot;Preemptive opening of compaction result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6916&quot;&gt;&lt;del&gt;CASSANDRA-6916&lt;/del&gt;&lt;/a&gt;.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt; - This isn&apos;t causing any issues on trunk (3.x versions) with Windows but on 2.X, renaming files is only safe if all references / handles to it are closed out.  I&apos;m going to have to chew on the new logic of the SSTableRewriter a bit to see how best to work around it on Windows - have any immediate ideas?&lt;/p&gt;</comment>
                            <comment id="14027350" author="benedict" created="Wed, 11 Jun 2014 02:20:22 +0000"  >&lt;p&gt;Simplest thing is to disable the feature on Windows&lt;/p&gt;</comment>
                            <comment id="14028733" author="jmckenzie" created="Thu, 12 Jun 2014 02:00:18 +0000"  >&lt;p&gt;I&apos;m w/Benedict - I think it makes the most sense to disable this feature for the 2.1 release of Cassandra and re-enable it for 3.0 when our file I/O supports it.&lt;/p&gt;

&lt;p&gt;Attaching a simple v1 that bypasses the maybeReopenEarly() if not on Unix.  Seems to fix the issue w/my local testing - it&apos;s at a 100% reproduction rate without it, and 0 for about 5 runs of 10M on reproduction with it.&lt;/p&gt;</comment>
                            <comment id="14029708" author="jbellis" created="Thu, 12 Jun 2014 19:58:49 +0000"  >&lt;p&gt;LGTM, committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12649981" name="7365_v1.txt" size="1077" author="joshuamckenzie" created="Thu, 12 Jun 2014 02:00:18 +0000"/>
                            <attachment id="12649440" name="cassandra.yaml" size="33758" author="hsn" created="Mon, 9 Jun 2014 19:33:23 +0000"/>
                            <attachment id="12649441" name="system.log" size="198109" author="hsn" created="Mon, 9 Jun 2014 19:34:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jmckenzie]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>397228</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1we0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>397355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326658">2.1 rc1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>