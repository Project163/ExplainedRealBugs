<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:34:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4568] countPendingHints JMX operation is returning garbage for the key</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4568</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;countPendingHints JMX operation should return a map from key: endpoint IP address to value: number of pending hints. It is returning garbage for the key (looks like binary data concerning the hint itself). The value looks correct.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;p&gt;1) Set up a two-node cluster. &lt;/p&gt;

&lt;p&gt;2) Disable gossip on the second node.  &lt;/p&gt;

&lt;p&gt;`nodetool ring` output from node 1:&lt;/p&gt;

&lt;p&gt;Address         DC          Rack        Status State   Load            Effective-Ownership Token                                       &lt;br/&gt;
                                                                                           85070591730234615865843651857942052864      &lt;br/&gt;
192.168.1.162   datacenter1 rack1       Up     Normal  21.46 KB        100.00%             0                                           &lt;br/&gt;
192.168.1.130   datacenter1 rack1       Down   Normal  6.67 KB         100.00%             85070591730234615865843651857942052864      &lt;/p&gt;


&lt;p&gt;3) While the second node is still down, create a keyspace with RF=2 and a CF within this keyspace. Then insert two records into the CF:&lt;/p&gt;

&lt;p&gt;Connected to Test Cluster at 192.168.1.162:9160.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;cqlsh 2.2.0 | Cassandra 1.1.2 | CQL spec 2.0.0 | Thrift protocol 19.32.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
Use HELP for help.&lt;br/&gt;
cqlsh&amp;gt; create KEYSPACE demo WITH strategy_class = &apos;SimpleStrategy&apos; AND strategy_options:replication_factor = 2;&lt;br/&gt;
cqlsh&amp;gt; use demo;&lt;br/&gt;
cqlsh:demo&amp;gt; create table users (username varchar primary key, password varchar);&lt;br/&gt;
cqlsh:demo&amp;gt; insert into users (username, password) values (scott, tiger);&lt;br/&gt;
cqlsh:demo&amp;gt; insert into users (username, password) values (root, password);&lt;/p&gt;

&lt;p&gt;4) Use a JMX client to execute the countPendingHints operation:&lt;/p&gt;

&lt;p&gt;jblangston:~ jblangston$ java -jar cmdline-jmxclient-0.10.3.jar - localhost:7199 org.apache.cassandra.db:type=HintedHandoffManager countPendingHints&lt;/p&gt;

&lt;p&gt;08/22/2012 14:21:37 -0500 org.archive.jmx.Client countPendingHints: &lt;/p&gt;
{@B^h ??	?[b??scottdemoscott?????password?&#2014;HtigerdemoF
?P??	?[b??rootdemoroot?????password?&#2014;?Wpassworddemo=2}

&lt;p&gt;5) Notice the output.  The value (2) is correct but the key is garbage instead of an endpoint IP address.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12604476">CASSANDRA-4568</key>
            <summary>countPendingHints JMX operation is returning garbage for the key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="jblangston@datastax.com">J.B. Langston</reporter>
                        <labels>
                            <label>datastax_qa</label>
                    </labels>
                <created>Wed, 22 Aug 2012 19:29:28 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:29 +0000</updated>
                            <resolved>Tue, 28 Aug 2012 14:32:42 +0000</resolved>
                                        <fixVersion>1.0.12</fixVersion>
                    <fixVersion>1.1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13441370" author="brandon.williams" created="Fri, 24 Aug 2012 18:32:27 +0000"  >&lt;p&gt;Patch to correctly display the token.&lt;/p&gt;</comment>
                            <comment id="13441495" author="jbellis" created="Fri, 24 Aug 2012 20:56:20 +0000"  >&lt;p&gt;why not just use r.key.token?&lt;/p&gt;

&lt;p&gt;+1 otherwise.&lt;/p&gt;</comment>
                            <comment id="13443194" author="jbellis" created="Tue, 28 Aug 2012 14:32:42 +0000"  >&lt;p&gt;Went ahead and committed w/ that change because open issues for 1.0.12 damage my calm.&lt;/p&gt;

&lt;p&gt;Note on the issue description: Since 1.0.0 (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2045&quot; title=&quot;Simplify HH to decrease read load when nodes come back&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2045&quot;&gt;&lt;del&gt;CASSANDRA-2045&lt;/del&gt;&lt;/a&gt;) the row key for hints is the token of the &lt;span class=&quot;error&quot;&gt;&amp;#91;v&amp;#93;&lt;/span&gt;node owning the hints, not the ip address.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12542310" name="4568.txt" size="944" author="brandon.williams" created="Fri, 24 Aug 2012 18:32:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256254</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gx7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96812</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>