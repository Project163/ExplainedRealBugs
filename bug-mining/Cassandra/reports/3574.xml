<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:54:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8568] Extend Transactional API to sstable lifecycle management</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8568</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;DataTracker has become a bit of a quagmire, and not at all obvious to interface with, with many subtly different modifiers. I suspect it is still subtly broken, especially around error recovery.&lt;/p&gt;

&lt;p&gt;I propose piggy-backing on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7705&quot; title=&quot;Safer Resource Management&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7705&quot;&gt;&lt;del&gt;CASSANDRA-7705&lt;/del&gt;&lt;/a&gt; to offer RAII (and GC-enforced, for those situations where a try/finally block isn&apos;t possible) objects that have transactional behaviour, and with few simple declarative methods that can be composed simply to provide all of the functionality we currently need.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8399&quot; title=&quot;Reference Counter exception when dropping user type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8399&quot;&gt;&lt;del&gt;CASSANDRA-8399&lt;/del&gt;&lt;/a&gt; for context&lt;/p&gt;</description>
                <environment></environment>
        <key id="12765085">CASSANDRA-8568</key>
            <summary>Extend Transactional API to sstable lifecycle management</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="benedict">Benedict Elliott Smith</assignee>
                                    <reporter username="benedict">Benedict Elliott Smith</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Jan 2015 09:56:44 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:24 +0000</updated>
                            <resolved>Fri, 22 May 2015 08:47:18 +0000</resolved>
                                        <fixVersion>2.2.0 rc1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14267011" author="jbellis" created="Tue, 6 Jan 2015 23:58:42 +0000"  >&lt;p&gt;ISTR &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; also creating a ticket for this but I can&apos;t find it.  Imagination?&lt;/p&gt;</comment>
                            <comment id="14267554" author="krummas" created="Wed, 7 Jan 2015 11:54:47 +0000"  >&lt;p&gt;I linked &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8506&quot; title=&quot;Improve management of DataTracker, esp. compacting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8506&quot;&gt;&lt;del&gt;CASSANDRA-8506&lt;/del&gt;&lt;/a&gt; which I bet will be fixed here&lt;/p&gt;

&lt;p&gt;I also tried to put some lipstick on the pig in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7852&quot; title=&quot;Refactor/document how we track live size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7852&quot;&gt;&lt;del&gt;CASSANDRA-7852&lt;/del&gt;&lt;/a&gt; but this sounds like the proper fix&lt;/p&gt;</comment>
                            <comment id="14363092" author="benedict" created="Mon, 16 Mar 2015 11:29:57 +0000"  >&lt;p&gt;This is up &lt;a href=&quot;https://github.com/belliottsmith/cassandra/tree/8568&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. I&apos;m working on integrating ByteMan tests into it, though, to ensure it always results in a safe application state regardless of other program behaviour.&lt;/p&gt;</comment>
                            <comment id="14363151" author="krummas" created="Mon, 16 Mar 2015 12:50:53 +0000"  >&lt;p&gt;is this for 3.0 or 2.1?&lt;/p&gt;</comment>
                            <comment id="14363159" author="benedict" created="Mon, 16 Mar 2015 12:53:21 +0000"  >&lt;p&gt;Very good question. I&apos;m torn, personally, since this should be much more robust - especially once I get fault injection testing working. But it&apos;s definitely a non-trivial change.&lt;/p&gt;</comment>
                            <comment id="14363176" author="slebresne" created="Mon, 16 Mar 2015 13:15:25 +0000"  >&lt;p&gt;That&apos;s rather clearly not 2.1 material to me.&lt;/p&gt;</comment>
                            <comment id="14363184" author="benedict" created="Mon, 16 Mar 2015 13:28:25 +0000"  >&lt;p&gt;Yep, I would agree with you 100% were it not for the recent problems. And I still lean in that direction, since this is a complex change. My concern is only if we haven&apos;t fully addressed the existing problems, because our testing as it stands doesn&apos;t seem able to elicit them. So anything that both improves testing and robustness in this area has a compelling reason for inclusion, if not a sufficient one.&lt;/p&gt;</comment>
                            <comment id="14363302" author="jbellis" created="Mon, 16 Mar 2015 14:57:12 +0000"  >&lt;p&gt;Can we get stability benefits in 2.1 by committing to 3.0 and backporting fixes as it exposes problems?&lt;/p&gt;</comment>
                            <comment id="14363327" author="benedict" created="Mon, 16 Mar 2015 15:17:00 +0000"  >&lt;p&gt;Doubtful. For one we only really see problems once deployed to the wild, so that won&apos;t likely help us until 3.0 is being widely used. But afaict the problems we&apos;re seeing are mostly down to either:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;fiddliness of the current abstraction (lots of different methods that need to be interleaved in non-obvious ways), so this patch will either fix them and so give us no information, or have a different fix for the problem (and different set of problems, and in either case not help us safely reason about the old way); or&lt;/li&gt;
	&lt;li&gt;problematic rollback of changes - which really involves backporting this whole patch to address&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The current code has been predicated on the assumption there are no problems, and it&apos;s reached a level of complexity where that is an unsafe assumption, and it cannot safely handle when this assumption is broken. As a result of #2 we cannot safely fault injection test, because it cannot safely deal with arbitrary failures (at best it copes with system failures, but not programming failures - in fact the assertions dotted around the code at the moment ironically make it more brittle than less).&lt;/p&gt;</comment>
                            <comment id="14363960" author="benedict" created="Mon, 16 Mar 2015 21:14:29 +0000"  >&lt;p&gt;I&apos;ve force pushed an update to my repository that fixes a couple of minor bugs, and introduces a FaultInjectionTestRunner based on ByteMan. It is a work in progress, with the goal state being complete coverage of all possible interleavings of different pathways. Right now it is testing a majority of simple single failures that can occur during an online SSTableRewriter action. I intend to extend this to the complete set of single failures in the normal path (if a failure point can be hit multiple times, I intend also ensure each possible time is tried, to test all intermediate states), and also failures during recovery.&lt;/p&gt;

&lt;p&gt;My hope is we can roll the new FaultInjectionTestRunner out into a number of other places in the codebase as well.&lt;/p&gt;</comment>
                            <comment id="14364352" author="benedict" created="Tue, 17 Mar 2015 01:08:38 +0000"  >&lt;p&gt;What I will try to do for 2.1 is to backport the Byteman tests to just cover the set of failures we might encounter under normal operation.&lt;/p&gt;</comment>
                            <comment id="14365266" author="jbellis" created="Tue, 17 Mar 2015 15:03:18 +0000"  >&lt;p&gt;SGTM.&lt;/p&gt;</comment>
                            <comment id="14366487" author="benedict" created="Wed, 18 Mar 2015 02:05:51 +0000"  >&lt;p&gt;Improvements to Byteman testing can be a follow up ticket, which I&apos;ll get to in a week or two. It&apos;s ready for review as stands, although I would prefer &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8984&quot; title=&quot;Introduce Transactional API for behaviours that can corrupt system state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8984&quot;&gt;&lt;del&gt;CASSANDRA-8984&lt;/del&gt;&lt;/a&gt; take priority.&lt;/p&gt;</comment>
                            <comment id="14366525" author="jbellis" created="Wed, 18 Mar 2015 02:41:14 +0000"  >&lt;p&gt;(I assigned Josh to review 8984 and Marcus this one, under the assumption that they can be done in parallel.  If not, let&apos;s give both to Marcus.)&lt;/p&gt;</comment>
                            <comment id="14366532" author="benedict" created="Wed, 18 Mar 2015 02:44:54 +0000"  >&lt;p&gt;They can. They touch related code, and I will have to rebase this against the result of 8984 before commit which will result in a small follow up corroborative review, but the main body of work is independent.&lt;/p&gt;</comment>
                            <comment id="14381637" author="krummas" created="Thu, 26 Mar 2015 09:52:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt; could you rebase? And there seems to be some merge problems in build.xml&lt;/p&gt;</comment>
                            <comment id="14381773" author="benedict" created="Thu, 26 Mar 2015 12:05:54 +0000"  >&lt;p&gt;Yep, will do. I&apos;m rebasing &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8984&quot; title=&quot;Introduce Transactional API for behaviours that can corrupt system state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8984&quot;&gt;&lt;del&gt;CASSANDRA-8984&lt;/del&gt;&lt;/a&gt; onto trunk, and then will rebase this onto that, since it&apos;s likely that will be committed soon(ish).&lt;/p&gt;</comment>
                            <comment id="14517305" author="benedict" created="Tue, 28 Apr 2015 16:11:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt;: I&apos;ve rebased against 8984-alt and force pushed. There are some failing unit tests but these are all broken against trunk, and appear to be due to embedded Cassandra and singletons. I&apos;ll rebase again once they&apos;re fixed, but since 8984-alt is agreed except for testing you should be good to begin review at your leisure.&lt;/p&gt;</comment>
                            <comment id="14545192" author="krummas" created="Fri, 15 May 2015 09:08:27 +0000"  >&lt;ul&gt;
	&lt;li&gt;the commit / finish relation in SSTRW is a bit confusing - sometimes we finish the SSTRW (in CompactionTask), and sometimes we don&apos;t (CompactionManager#antiCompactGroup).&lt;/li&gt;
	&lt;li&gt;in Tracker: Throwable apply(Function&amp;lt;View, View&amp;gt; function, Throwable accumulate) - catch Throwable instead of Exception?&lt;/li&gt;
	&lt;li&gt;Tests for Transaction.java - I know we test it indirectly via other tests, but having specific tests helps future refactorings etc&lt;/li&gt;
	&lt;li&gt;java.lang.NoClassDefFoundError: org/apache/mina/util/IdentityHashSet on startup - guess you forgot git add;ing a new .jar in lib/?&lt;/li&gt;
	&lt;li&gt;Fault injection tests:
	&lt;ul&gt;
		&lt;li&gt;no way to run them?&lt;/li&gt;
		&lt;li&gt;no documentation of the &quot;scripting language&quot;&lt;/li&gt;
		&lt;li&gt;we probably need tests for the byteman script parsing/fault generation&lt;/li&gt;
		&lt;li&gt;no comments in FaultInjectionTestRunner&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;nits;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;new dependency &amp;lt;dependency groupId=&quot;org.slf4j&quot; artifactId=&quot;slf4j-log4j12&quot; version=&quot;1.7.2&quot;/&amp;gt; - required by byteman? Should probably be 1.7.7 as thats the slf4j we use elsewhere&lt;/li&gt;
	&lt;li&gt;Unused buildIntervalTree in Tracker&lt;/li&gt;
	&lt;li&gt;Unused notifySSTablesChanged(Collection&amp;lt;SSTableReader&amp;gt; removed, Collection&amp;lt;SSTableReader&amp;gt; added, OperationType compactionType) in Tracker&lt;/li&gt;
	&lt;li&gt;Unused logger in Tracker (we should probably debug-log some stuff)&lt;/li&gt;
	&lt;li&gt;more comments in Helpers (esp filter_in and filter_out as it is not obvious from the names of the methods what they do)&lt;/li&gt;
	&lt;li&gt;underscores in method names in Helpers - not really consistent with either our code base or guavas&lt;/li&gt;
	&lt;li&gt;Why rename DataTracker to Tracker? People know what DataTracker is, feels like renaming is unnecessary here&lt;/li&gt;
	&lt;li&gt;Class called Transaction which only involves sstables/compaction, rename? (DataTrackerTransaction might be a bit long, but would tell us what it does)&lt;/li&gt;
	&lt;li&gt;Convert //-method-comments to /** */ ones in Helpers and Transaction&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14545214" author="benedict" created="Fri, 15 May 2015 09:35:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;the commit / finish relation in SSTRW is a bit confusing - sometimes we finish the SSTRW (in CompactionTask), and sometimes we don&apos;t (CompactionManager#antiCompactGroup).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;antiCompactGroup is a particularly weird case, and I&apos;ve put some comments in to clarify this one in particular. Let me know if there&apos;s still confusion in any of the other places.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;in Tracker: Throwable apply(Function&amp;lt;View, View&amp;gt; function, Throwable accumulate) - catch Throwable instead of Exception?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, thanks - fixed&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;java.lang.NoClassDefFoundError: org/apache/mina/util/IdentityHashSet on startup - guess you forgot git add;ing a new .jar in lib/?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This was a mistake: it&apos;s included on the build path and I accidentally included it, forgetting JDK only had IdentityHashMap. It had already broken dtests and a fix is already up (though we should probably fix build.xml to let that break unit tests too)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Fault injection tests&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think these need splitting out into a separate ticket, probably &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9165&quot; title=&quot;improve error pathway test coverage, including fault injection testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9165&quot;&gt;CASSANDRA-9165&lt;/a&gt;, and I probably should have clarified that I did not expect them to be committed with this review. They are a non-trivial undertaking in their own right to get done properly, and there probably isn&apos;t time to do them justice. I just wanted to get some minimal tooling to manually verify the new code works in these scenarios (which can be run in IDEA as a JUnit task).&lt;/p&gt;

&lt;p&gt;I&apos;ll address your nits and some unit tests for Transaction itself shortly, if that all sounds good to you.&lt;/p&gt;</comment>
                            <comment id="14545221" author="krummas" created="Fri, 15 May 2015 09:40:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ll address your nits and some unit tests for Transaction itself shortly, if that all sounds good to you.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;it does&lt;/p&gt;</comment>
                            <comment id="14550461" author="benedict" created="Tue, 19 May 2015 13:48:08 +0000"  >&lt;p&gt;I&apos;ve uploaded two branches for cassci &lt;a href=&quot;https://github.com/belliottsmith/cassandra/tree/8568-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;for 2.2&lt;/a&gt; and &lt;a href=&quot;https://github.com/belliottsmith/cassandra/tree/8568-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;, but the merge was clean so nothing to worry about from a review perspective. The rebase was also nearly 100% clean (just a couple of methods that were introduced, that had to have a couple of arguments updated).&lt;/p&gt;

&lt;p&gt;I&apos;ve fixed all of your nits bar 1: the naming. I&apos;m not by any means wed to the naming I&apos;ve used, but I think prefixing every class with DataTracker is a bit ugly. My intention was for the package to fully identify their domain, but I agree Transaction could perhaps be called LifecycleTransaction (or something) to make it clearer). &lt;/p&gt;

&lt;p&gt;We can certainly rollback Tracker to DataTracker, but since we now have a lifecycle.View (no longer DataTracker.View), unless we also prefix that (or move it back to an inner class - which I would be against: we have too many monolithic classes in the codebase) I&apos;m not sure it improves clarity, and I&apos;m personally in favour of reducing the number of characters where possible (especially since &quot;Data&quot; is a bit vacuous in a database). I don&apos;t mind you making the final call on the names since I don&apos;t have very strong feelings about them, but wanted to put across my rationale. &lt;/p&gt;

&lt;p&gt;Perhaps we can throw up a bikeshedding bat signal and get some other views? (This sentence is meant to do that, if you&apos;re watching)&lt;/p&gt;

&lt;p&gt;I&apos;ve squashed all of the already reviewed commits. In the &lt;a href=&quot;https://github.com/belliottsmith/cassandra/tree/8568-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 branch&lt;/a&gt; the new work is separated into commits:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;addressing your clarification/nits concerns&lt;/li&gt;
	&lt;li&gt;making a minor tweak to Transactional so that cleanup can be post- or pre- abort; I realised that this was a potential mistake in the rebase onto that functionality, since we want to ensure the compacting set always contains the readers right up until the last moment.&lt;/li&gt;
	&lt;li&gt;a trivial TODO, introducing a UniqueIdentifier for SSTableReader, that permits our leak detection to kick in earlier around a lifecycle Transaction&lt;/li&gt;
	&lt;li&gt;new tests
	&lt;ul&gt;
		&lt;li&gt;Since we&apos;re in a New World Order, I opted to introduce tests for every piece of code I modified, not just the brand new functionality, so this may be a bit of a slog to review, and I&apos;m sorry about that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
		&lt;li&gt;One of the old functionality tests spotted an inconsistency in the usage of View.getOldestMemtable(), so I have removed this method and used a more suitable mechanism in the two callers&lt;/li&gt;
		&lt;li&gt;There is a failing test covering old functionality that was too large to sneak in along with the test coverage, and I will file a follow-up bug to address it. It&apos;s not clear to me if it is at all serious or not, but it looks like it might be.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14553848" author="krummas" created="Thu, 21 May 2015 08:14:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;LifecycleTransaction&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes, lets atleast do that. Regarding DataTracker -&amp;gt; Tracker, I guess it is fine, but then everything mentioning DataTracker should be changed (for example cfs.getDataTracker())&lt;/p&gt;

&lt;p&gt;comments for updated branch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;have you created a ticket for the failing ViewTest#testSSTablesInBounds() ? (I guess this is the old-functionality-test you mention that is failing?)&lt;/li&gt;
	&lt;li&gt;TrackerTest#testDropSSTables() seems to be failing due to the deleting task being run before asserting the sizes (reducing the totalDiskSpaceUsed)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;other than that, this looks good to me&lt;/p&gt;</comment>
                            <comment id="14553948" author="benedict" created="Thu, 21 May 2015 09:11:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;TrackerTest#testDropSSTables() seems to be failing due to the deleting task being run before asserting the sizes (reducing the totalDiskSpaceUsed)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s a shame; I&apos;d hoped that since that had to wait for a thread to spin up we&apos;d be fine (it always passes on my box). I&apos;ve introduced an artificial blocking mechanism, and have uploaded to cassci to vet.&lt;/p&gt;

&lt;p&gt;I&apos;ve fixed the DataTracker references, and updated the LifecycleTransaction name. I will file a JIRA for testSSTablesInBounds shortly (this is indeed the new test of old behaviour that I was expecting to fail)&lt;/p&gt;</comment>
                            <comment id="14554156" author="krummas" created="Thu, 21 May 2015 11:38:43 +0000"  >&lt;p&gt;Just small nit that only happens when running unit tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NullPointerException: name cannot be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at javax.management.ObjectName.construct(ObjectName.java:421) ~[na:1.8.0_45]
	at javax.management.ObjectName.&amp;lt;init&amp;gt;(ObjectName.java:1382) ~[na:1.8.0_45]
	at org.apache.cassandra.db.ColumnFamilyStore.unregisterMBean(ColumnFamilyStore.java:448) ~[Cassandra/:na]
	at org.apache.cassandra.db.ColumnFamilyStore.invalidate(ColumnFamilyStore.java:419) ~[Cassandra/:na]
	at org.apache.cassandra.db.lifecycle.TrackerTest.testDropSSTables(TrackerTest.java:193) [Cassandra/:na]
	at org.apache.cassandra.db.lifecycle.TrackerTest.testDropSSTables(TrackerTest.java:177) [Cassandra/:na]
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;other than that, I&apos;m +1 once cassci finishes the tests&lt;/p&gt;</comment>
                            <comment id="14554205" author="benedict" created="Thu, 21 May 2015 12:31:26 +0000"  >&lt;p&gt;I&apos;ve uploaded a minor update that suppresses it. Personally I had a slight preference to leave the production code unchanged here, since the warning message would be filtered out during an ant test run, but I&apos;m pretty on the fence and it is minor, so you have the options there to choose from &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll then rebase again against trunk and run cassci on them all before merging to 2.2/trunk.&lt;/p&gt;

&lt;p&gt;Thanks for reviewing!&lt;/p&gt;</comment>
                            <comment id="14554218" author="krummas" created="Thu, 21 May 2015 12:45:33 +0000"  >&lt;p&gt;I ran the tests from within intellij and saw the NPE and figured it could be confusing/time wasting if someone sees it in the future and digs into why it occurs, so I&apos;d say keep it suppressed.&lt;/p&gt;</comment>
                            <comment id="14555847" author="benedict" created="Fri, 22 May 2015 08:47:19 +0000"  >&lt;p&gt;Great. Committed. Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12773467">CASSANDRA-8764</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12641718">CASSANDRA-5449</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12762393">CASSANDRA-8506</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[benedict]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23zfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>marcuse</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>