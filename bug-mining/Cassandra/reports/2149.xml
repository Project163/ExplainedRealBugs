<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:38:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5511] Clean up backwards compatibility complexity for 2.0</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5511</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We&apos;ve supported rolling upgrades (network-compatible for read/write operations) for several releases, but both 1.0 -&amp;gt; 1.1 and 1.1 -&amp;gt; 1.2 required being on a recent release of the immediately prior major series for this to work as desired.&lt;/p&gt;

&lt;p&gt;Meanwhile, we still support reading sstables at least back to 0.6 and possibly even earlier.  This makes dealing with changes to the sstable quite challenging; the recently written-and-reverted &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5487&quot; title=&quot;Promote row-level tombstones to index file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5487&quot;&gt;&lt;del&gt;CASSANDRA-5487&lt;/del&gt;&lt;/a&gt; comes to mind.&lt;/p&gt;

&lt;p&gt;2.0 is a good place to drop support for sstables older than 1.2.5.  Our experience with network compatibility demonstrates that this is not an unreasonable burden to impose, and the major version number change suggests that this is a logical time to make such a change.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12644273">CASSANDRA-5511</key>
            <summary>Clean up backwards compatibility complexity for 2.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Apr 2013 03:37:53 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:13 +0000</updated>
                            <resolved>Fri, 26 Apr 2013 19:07:52 +0000</resolved>
                                        <fixVersion>2.0 beta 1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13640070" author="jbellis" created="Wed, 24 Apr 2013 04:43:13 +0000"  >&lt;p&gt;Work-in-progress pushed to &lt;a href=&quot;https://github.com/jbellis/cassandra/commits/5511&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jbellis/cassandra/commits/5511&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Stuck on two things:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Not sure how &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; generated the test sstable for LegacyLeveledManifestTest; need to generate a new one at version ic&lt;/li&gt;
	&lt;li&gt;Wanted to clean up messages too, but not sure why SuperColumns.java hardcodes VERSION_10.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13640141" author="krummas" created="Wed, 24 Apr 2013 06:08:46 +0000"  >&lt;p&gt;iirc i created a throwaway unit test that does a few RMs with a breakpoint to stop SchemaLoader from removing the sstable, then copied it into the legacy dir&lt;/p&gt;

&lt;p&gt;want me to do it again for ic?&lt;/p&gt;</comment>
                            <comment id="13640143" author="krummas" created="Wed, 24 Apr 2013 06:12:36 +0000"  >&lt;p&gt;does this mean we will support upgrading 1.2 -&amp;gt; 2.1? would be nice if we required 2.0 as well, to get rid of the deprecated json leveled manifest code&lt;/p&gt;</comment>
                            <comment id="13640160" author="slebresne" created="Wed, 24 Apr 2013 06:35:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;not sure why SuperColumns.java hardcodes VERSION_10&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That was an admittedly clumsy way to have just the DeletionTime of the DeletionInfo serialized (i.e. without serializing the range tombstones part at all (that should be empty anyway)). This can be replaced by a direct call to the DeletionTime serializer. &lt;/p&gt;</comment>
                            <comment id="13640385" author="jbellis" created="Wed, 24 Apr 2013 12:33:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;want me to do it again for ic?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That would be great.  (Ideally I&apos;d like to leave the code to generate it commented out like we do with LegacySSTableTest.)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;does this mean we will support upgrading 1.2 -&amp;gt; 2.1?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I guess we can see how much it bugs us by then. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13640941" author="krummas" created="Wed, 24 Apr 2013 20:54:08 +0000"  >&lt;p&gt;adds an ignored test to 1.2 that generates sstables and refactors the test in trunk&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;apply 1.2-patch&lt;/li&gt;
	&lt;li&gt;merge 1.2 -&amp;gt; trunk&lt;/li&gt;
	&lt;li&gt;apply trunk-patch&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;if the patches look ok, i can do the git-gymnastics (ie, they can be applied on current trunk/1.2 without breaking anything)&lt;/p&gt;</comment>
                            <comment id="13641881" author="jbellis" created="Thu, 25 Apr 2013 15:10:09 +0000"  >&lt;p&gt;Updates pushed to &lt;a href=&quot;https://github.com/jbellis/cassandra/commits/5511-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jbellis/cassandra/commits/5511-2&lt;/a&gt;.  Done except for LLMT, I think.&lt;/p&gt;</comment>
                            <comment id="13641890" author="jbellis" created="Thu, 25 Apr 2013 15:24:54 +0000"  >&lt;p&gt;Oops, missed Marcus&apos;s update somehow.  Will have a look.&lt;/p&gt;</comment>
                            <comment id="13641907" author="jbellis" created="Thu, 25 Apr 2013 15:52:29 +0000"  >&lt;p&gt;Marcus&apos;s patches LGTM.&lt;/p&gt;</comment>
                            <comment id="13642128" author="jbellis" created="Thu, 25 Apr 2013 19:41:54 +0000"  >&lt;p&gt;Rebased and pushed to &lt;a href=&quot;https://github.com/jbellis/cassandra/commits/5511-3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jbellis/cassandra/commits/5511-3&lt;/a&gt;.  Tests pass.&lt;/p&gt;</comment>
                            <comment id="13642705" author="krummas" created="Fri, 26 Apr 2013 09:32:39 +0000"  >&lt;ul&gt;
	&lt;li&gt;we can remove Directories.sstablesNeedMigration(...) (and related)&lt;/li&gt;
	&lt;li&gt;remove DefsTable.fixSchemaNanoTimestamps()&lt;/li&gt;
	&lt;li&gt;SystemTable.upgradeSystemData() can be cleaned up (LocationInfo is gone in 1.2 right?)&lt;/li&gt;
	&lt;li&gt;Remove SystemTable.OLD_STATUS_CF and SystemTable.OLD_HINTS_CF&lt;/li&gt;
	&lt;li&gt;CFMetaData has a bunch of @Deprecated fields that can probably be removed.&lt;/li&gt;
	&lt;li&gt;Nit: remove sstable.decorateKey(..) and use sstable.partitioner.decorateKey(...) everywhere&lt;/li&gt;
	&lt;li&gt;why keep _SHA in FilterFactory.Type? (couldnt find any .ordinal() use)&lt;/li&gt;
	&lt;li&gt;Do we use MURMUR2 anywhere?&lt;/li&gt;
	&lt;li&gt;I guess we can remove everything testing &quot;version &amp;lt; MessagingService.VERSION_12&quot; (or throw appropriate exceptions etc)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13642981" author="jbellis" created="Fri, 26 Apr 2013 16:08:10 +0000"  >&lt;p&gt;Pushed commits to address above, thanks!&lt;/p&gt;</comment>
                            <comment id="13643052" author="krummas" created="Fri, 26 Apr 2013 17:27:50 +0000"  >&lt;p&gt;lgtm!&lt;/p&gt;</comment>
                            <comment id="13643143" author="jbellis" created="Fri, 26 Apr 2013 19:07:52 +0000"  >&lt;p&gt;committed!&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;121 files changed, 370 insertions&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/add.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, 2257 deletions&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/forbidden.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/tt&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12580377" name="CASSANDRA-5511-on_1.2.patch" size="3995" author="marcuse" created="Wed, 24 Apr 2013 20:54:08 +0000"/>
                            <attachment id="12580376" name="CASSANDRA-5511-on_trunk.patch" size="21263" author="marcuse" created="Wed, 24 Apr 2013 20:54:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 30 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k0c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>marcuse</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>