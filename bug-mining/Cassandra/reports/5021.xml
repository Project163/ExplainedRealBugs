<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:11:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14426] cassandra-stress throws NPE if insert section isn&apos;t specified in user profile</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14426</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When user profile file is used, and insert section isn&apos;t specified, then cassandra-stress is using default values instead.&lt;/p&gt;

&lt;p&gt;Since support for LWTs was added, absence of the insert section lead to throwing of NullPointerException when generating inserts:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
	at org.apache.cassandra.stress.StressProfile.getInsert(StressProfile.java:546)
	at org.apache.cassandra.stress.StressProfile.printSettings(StressProfile.java:126)
	at org.apache.cassandra.stress.settings.StressSettings.lambda$printSettings$1(StressSettings.java:311)
	at java.util.LinkedHashMap.forEach(LinkedHashMap.java:684)
	at org.apache.cassandra.stress.settings.StressSettings.printSettings(StressSettings.java:311)
	at org.apache.cassandra.stress.Stress.run(Stress.java:108)
	at org.apache.cassandra.stress.Stress.main(Stress.java:63)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fix is trivial, and will be provided as PR&lt;/p&gt;</description>
                <environment></environment>
        <key id="13155923">CASSANDRA-14426</key>
            <summary>cassandra-stress throws NPE if insert section isn&apos;t specified in user profile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alexott">Alex Ott</assignee>
                                    <reporter username="alexott">Alex Ott</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Apr 2018 18:02:51 +0000</created>
                <updated>Fri, 15 May 2020 08:02:05 +0000</updated>
                            <resolved>Sat, 28 Apr 2018 21:04:27 +0000</resolved>
                                        <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Tool/stress</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16457726" author="githubbot" created="Sat, 28 Apr 2018 18:05:19 +0000"  >&lt;p&gt;GitHub user alexott opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/221&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14426&quot; title=&quot;cassandra-stress throws NPE if insert section isn&amp;#39;t specified in user profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14426&quot;&gt;&lt;del&gt;CASSANDRA-14426&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This commit fixes NPE when the `insert` section is missing from user-defined profile&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/alexott/cassandra&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/alexott/cassandra&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14426&quot; title=&quot;cassandra-stress throws NPE if insert section isn&amp;#39;t specified in user profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14426&quot;&gt;&lt;del&gt;CASSANDRA-14426&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/221.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/221.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #221&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 403e463a81333dec232d353feb28f31611e4bb08&lt;br/&gt;
Author: Alex Ott &amp;lt;alexott@...&amp;gt;&lt;br/&gt;
Date:   2018-04-28T18:04:13Z&lt;/p&gt;

&lt;p&gt;    fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14426&quot; title=&quot;cassandra-stress throws NPE if insert section isn&amp;#39;t specified in user profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14426&quot;&gt;&lt;del&gt;CASSANDRA-14426&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This commit fixes NPE when the `insert` section is missing from user-defined profile&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16457728" author="jjirsa" created="Sat, 28 Apr 2018 18:09:30 +0000"  >&lt;p&gt;Is trunk/4.x sufficient?&lt;/p&gt;</comment>
                            <comment id="16457729" author="alexott" created="Sat, 28 Apr 2018 18:12:35 +0000"  >&lt;p&gt;Yes, I think that trunk is sufficient - this is more edge case...&lt;/p&gt;</comment>
                            <comment id="16457737" author="jjirsa" created="Sat, 28 Apr 2018 18:21:07 +0000"  >&lt;p&gt;Appreciate the debugging and the fix. I think your fix is fine, but I&apos;d like to change it a bit to move the:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (insert == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            insert = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
        lowerCase(insert);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From below the &lt;tt&gt;if (!isKeyOnlyTable)&lt;/tt&gt; if/else block to above, making your check irrelevant.  Are you OK with that change? &lt;/p&gt;</comment>
                            <comment id="16457738" author="jjirsa" created="Sat, 28 Apr 2018 18:22:16 +0000"  >&lt;p&gt;Explicitly, this is what I propose (and I&apos;m happy to do it on commit for you):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/tools/stress/src/org/apache/cassandra/stress/StressProfile.java b/tools/stress/src/org/apache/cassandra/stress/StressProfile.java
index 6c44ff298a..2338873a8d 100644
--- a/tools/stress/src/org/apache/cassandra/stress/StressProfile.java
+++ b/tools/stress/src/org/apache/cassandra/stress/StressProfile.java
@@ -499,6 +499,10 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;StressProfile &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable
                         }
                     }

+                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (insert == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
+                        insert = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
+                    lowerCase(insert);
+
                     &lt;span class=&quot;code-comment&quot;&gt;//Non PK Columns
&lt;/span&gt;                     StringBuilder sb = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringBuilder();
                     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isKeyOnlyTable)
@@ -543,7 +547,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;StressProfile &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable

                         &lt;span class=&quot;code-comment&quot;&gt;//Put PK predicates at the end
&lt;/span&gt;                         sb.append(pred);
-                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (insert != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; insert.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&quot;condition&quot;&lt;/span&gt;))
+                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (insert.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&quot;condition&quot;&lt;/span&gt;))
                         {
                             sb.append(&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + insert.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;condition&quot;&lt;/span&gt;));
                             insert.remove(&lt;span class=&quot;code-quote&quot;&gt;&quot;condition&quot;&lt;/span&gt;);
@@ -563,10 +567,6 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;StressProfile &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable
                         sb.append(&lt;span class=&quot;code-quote&quot;&gt;&quot;) &quot;&lt;/span&gt;).append(&lt;span class=&quot;code-quote&quot;&gt;&quot;values(&quot;&lt;/span&gt;).append(value).append(&lt;span class=&quot;code-quote&quot;&gt;&apos;)&apos;&lt;/span&gt;);
                     }

-                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (insert == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
-                        insert = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
-                    lowerCase(insert);
-
                     partitions = select(settings.insert.batchsize, &lt;span class=&quot;code-quote&quot;&gt;&quot;partitions&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fixed(1)&quot;&lt;/span&gt;, insert, OptionDistribution.BUILDER);
                     selectchance = select(settings.insert.selectRatio, &lt;span class=&quot;code-quote&quot;&gt;&quot;select&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fixed(1)/1&quot;&lt;/span&gt;, insert, OptionRatioDistribution.BUILDER);
                     rowPopulation = select(settings.insert.rowPopulationRatio, &lt;span class=&quot;code-quote&quot;&gt;&quot;row-population&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fixed(1)/1&quot;&lt;/span&gt;, insert, OptionRatioDistribution.BUILDER);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16457800" author="githubbot" created="Sat, 28 Apr 2018 21:04:02 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/221&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16457801" author="jjirsa" created="Sat, 28 Apr 2018 21:04:27 +0000"  >&lt;p&gt;Going to assume you&apos;re ok with my changes (if you&apos;re not, let me know), committed as &lt;tt&gt;71a27ee2b93a47e177edc16571f91bb5d592899e&lt;/tt&gt; &lt;/p&gt;</comment>
                            <comment id="16457810" author="alexott" created="Sat, 28 Apr 2018 21:12:29 +0000"  >&lt;p&gt;Thank you Jeff!&lt;br/&gt;
Your solution is more generic - I simply wasn&apos;t sure that it would be a good style to introduce some kind of &quot;defaults&quot; there.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[alexott]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t55z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jjirsa</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jjirsa]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>