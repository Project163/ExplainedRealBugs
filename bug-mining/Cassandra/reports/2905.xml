<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:46:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6766] allow now() -&gt; uuid compatibility</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6766</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Bad Request: Type error: cannot assign result of function now (type timeuuid) to id (type uuid)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12697050">CASSANDRA-6766</key>
            <summary>allow now() -&gt; uuid compatibility</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thobbs">Tom Hobbs</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                            <label>cql</label>
                    </labels>
                <created>Tue, 25 Feb 2014 01:56:58 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:53 +0000</updated>
                            <resolved>Fri, 20 Jun 2014 17:02:01 +0000</resolved>
                                        <fixVersion>2.0.9</fixVersion>
                    <fixVersion>2.1 rc2</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13917979" author="slebresne" created="Mon, 3 Mar 2014 11:45:38 +0000"  >&lt;p&gt;I&apos;ll remark that because the code for functions is relatively generic, we can&apos;t just special this for now() (nor should we really). Meaning that what we need here is to introduce a bit of subtyping in the type system and make timeuuid a subtype of uuid. Which in itself if probably not that hard, but mentioning it because it&apos;s still probably a bit more involved than what the ticket title imply.&lt;/p&gt;</comment>
                            <comment id="14018218" author="thobbs" created="Wed, 4 Jun 2014 21:29:10 +0000"  >&lt;p&gt;Couldn&apos;t we just use &lt;tt&gt;AbstractType.isValueCompatibleWith()&lt;/tt&gt;?  It looks like some of the types don&apos;t properly implement this (e.g. UUIDType does not return true for TimeUUIDType), but that can be fixed here.&lt;/p&gt;</comment>
                            <comment id="14018509" author="slebresne" created="Thu, 5 Jun 2014 06:08:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;Couldn&apos;t we just use AbstractType.isValueCompatibleWith()?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Absolutely. That method declares a subtyping relation really &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14036098" author="thobbs" created="Wed, 18 Jun 2014 18:29:27 +0000"  >&lt;p&gt;6766.txt (and a &lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-6766&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;) adjusts &lt;tt&gt;isValueCompatibleWith()&lt;/tt&gt; for a few types and uses it in place of type equality checks for assignment.&lt;/p&gt;

&lt;p&gt;ReversedType makes the &lt;tt&gt;isValueCompatibleWith()&lt;/tt&gt; logic a little hairy.  Besides getting rid of ReversedType or assuming that &lt;tt&gt;isValueCompatibleWith()&lt;/tt&gt; will always be called on the receiver&apos;s type (and not the value to be received), I&apos;m not sure what else we can do.&lt;/p&gt;</comment>
                            <comment id="14037350" author="slebresne" created="Thu, 19 Jun 2014 14:07:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;ReversedType makes the isValueCompatibleWith() logic a little hairy.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why can&apos;t we just add a ReversedType.isValueCompatibleWith override that calls isValueCompatibleWith on the base type?&lt;/p&gt;</comment>
                            <comment id="14037454" author="thobbs" created="Thu, 19 Jun 2014 16:01:55 +0000"  >&lt;p&gt;Because you have to assume that you&apos;re always calling &lt;tt&gt;someReversedTypeInstance.isValueCompatibleWith(someOtherType)&lt;/tt&gt; (i.e., &lt;tt&gt;LongType.instance.isValueCompatibleWith(ReversedType.getInstance(LongType.instance))&lt;/tt&gt; would return false).  With the current usage, that would work, but it seems very prone to bugs.&lt;/p&gt;</comment>
                            <comment id="14037477" author="slebresne" created="Thu, 19 Jun 2014 16:29:55 +0000"  >&lt;p&gt;Fair enough, Then what about splitting into 2 methods: the real &lt;tt&gt;isValueCompatibleWith&lt;/tt&gt; in AbstractType would check if the argument is ReversedType and if so, would &quot;unwrap&quot; it, and otherwise would call an auxiliary &lt;tt&gt;isValueCompatibleWithInternal&lt;/tt&gt; which is the one the subclasses would override. Not absolutely sublime, but at least deal with ReversedType in one place versus doing it in very override of isValueCompatibleWith. &lt;/p&gt;</comment>
                            <comment id="14037505" author="thobbs" created="Thu, 19 Jun 2014 16:50:19 +0000"  >&lt;p&gt;Seems reasonable to me.&lt;/p&gt;</comment>
                            <comment id="14037557" author="thobbs" created="Thu, 19 Jun 2014 17:26:51 +0000"  >&lt;p&gt;v2 patch unwraps ReversedType arguments and subclasses now implement &lt;tt&gt;isValueCompatibleWithInternal()&lt;/tt&gt;.  The branch is also updated.&lt;/p&gt;</comment>
                            <comment id="14038771" author="slebresne" created="Fri, 20 Jun 2014 13:22:42 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14039029" author="thobbs" created="Fri, 20 Jun 2014 17:02:01 +0000"  >&lt;p&gt;Thanks, committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651453" name="6766-v2.txt" size="18798" author="thobbs" created="Thu, 19 Jun 2014 17:26:51 +0000"/>
                            <attachment id="12651206" name="6766.txt" size="20300" author="thobbs" created="Wed, 18 Jun 2014 18:29:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375524</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1spm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375820</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>