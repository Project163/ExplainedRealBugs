<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:13:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14410] tablehistograms with non-existent table gives an exception</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14410</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;nodetool tablehistograms with non-existent table gives a crazy exception. It should give a nice error message like &quot;Table acdc.abba doesn&apos;t exist&quot; or something like that.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ nodetool tablehistograms acdc.abba
error: org.apache.cassandra.metrics:type=Table,keyspace=acdc,scope=abba,name=EstimatedPartitionSizeHistogram
-- StackTrace --
javax.management.InstanceNotFoundException: org.apache.cassandra.metrics:type=Table,keyspace=acdc,scope=abba,name=EstimatedPartitionSizeHistogram
&#160;&#160; &#160;at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1095)
&#160;&#160; &#160;at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:643)
&#160;&#160; &#160;at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:678)
&#160;&#160; &#160;at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1445)
&#160;&#160; &#160;at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)
&#160;&#160; &#160;at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)
&#160;&#160; &#160;at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)
&#160;&#160; &#160;at javax.management.remote.rmi.RMIConnectionImpl.getAttribute(RMIConnectionImpl.java:639)
&#160;&#160; &#160;at sun.reflect.GeneratedMethodAccessor297.invoke(Unknown Source)
&#160;&#160; &#160;at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#160;&#160; &#160;at java.lang.reflect.Method.invoke(Method.java:498)
&#160;&#160; &#160;at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:324)
&#160;&#160; &#160;at sun.rmi.transport.Transport$1.run(Transport.java:200)
&#160;&#160; &#160;at sun.rmi.transport.Transport$1.run(Transport.java:197)
&#160;&#160; &#160;at java.security.AccessController.doPrivileged(Native Method)
&#160;&#160; &#160;at sun.rmi.transport.Transport.serviceCall(Transport.java:196)
&#160;&#160; &#160;at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)
&#160;&#160; &#160;at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)
&#160;&#160; &#160;at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)
&#160;&#160; &#160;at java.security.AccessController.doPrivileged(Native Method)
&#160;&#160; &#160;at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)
&#160;&#160; &#160;at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
&#160;&#160; &#160;at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
&#160;&#160; &#160;at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&#160;&#160; &#160;at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:283)
&#160;&#160; &#160;at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:260)
&#160;&#160; &#160;at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:161)
&#160;&#160; &#160;at com.sun.jmx.remote.internal.PRef.invoke(Unknown Source)
&#160;&#160; &#160;at javax.management.remote.rmi.RMIConnectionImpl_Stub.getAttribute(Unknown Source)
&#160;&#160; &#160;at javax.management.remote.rmi.RMIConnector$RemoteMBeanServerConnection.getAttribute(RMIConnector.java:903)
&#160;&#160; &#160;at javax.management.MBeanServerInvocationHandler.invoke(MBeanServerInvocationHandler.java:273)
&#160;&#160; &#160;at com.sun.proxy.$Proxy20.getValue(Unknown Source)
&#160;&#160; &#160;at org.apache.cassandra.tools.NodeProbe.getColumnFamilyMetric(NodeProbe.java:1334)
&#160;&#160; &#160;at org.apache.cassandra.tools.nodetool.TableHistograms.execute(TableHistograms.java:62)
&#160;&#160; &#160;at org.apache.cassandra.tools.NodeTool$NodeToolCmd.run(NodeTool.java:254)
&#160;&#160; &#160;at org.apache.cassandra.tools.NodeTool.main(NodeTool.java:168)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13154339">CASSANDRA-14410</key>
            <summary>tablehistograms with non-existent table gives an exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hkroger">Hannu Kr&#246;ger</assignee>
                                    <reporter username="hkroger">Hannu Kr&#246;ger</reporter>
                        <labels>
                            <label>lhf</label>
                    </labels>
                <created>Sun, 22 Apr 2018 19:47:42 +0000</created>
                <updated>Fri, 27 May 2022 19:25:12 +0000</updated>
                            <resolved>Thu, 8 Aug 2019 18:06:47 +0000</resolved>
                                        <fixVersion>4.1-alpha1</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16451608" author="hkroger" created="Wed, 25 Apr 2018 03:59:43 +0000"  >&lt;p&gt;Branch on top of cassandra-3.11 with a fix: &lt;a href=&quot;https://github.com/hkroger/cassandra/tree/CASSANDRA-14410&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hkroger/cassandra/tree/CASSANDRA-14410&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16451655" author="cnlwsu" created="Wed, 25 Apr 2018 04:37:24 +0000"  >&lt;p&gt;Can you make a trunk version? This logic has changed a little since your branch with allowing entire keyspace or all tables to be printed out.&lt;/p&gt;</comment>
                            <comment id="16451663" author="hkroger" created="Wed, 25 Apr 2018 04:57:30 +0000"  >&lt;p&gt;Based on what I see in the trunk version is that you can now run tablehistograms also without arguments and then it displays histograms for all tables. But what I didn&apos;t see is the option to limit it to just one keyspace.&lt;/p&gt;

&lt;p&gt;Anyways: Here is the same thing on top of trunk: &lt;a href=&quot;https://github.com/hkroger/cassandra/tree/CASSANDRA-14410-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hkroger/cassandra/tree/CASSANDRA-14410-trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16451676" author="cnlwsu" created="Wed, 25 Apr 2018 05:33:36 +0000"  >&lt;p&gt;You are missing the case where args.size() == 1 and keyspace.table is passed instead of &quot;keyspace table&quot;.&lt;/p&gt;

&lt;p&gt;nitpick: &lt;tt&gt;Collections.singletonList(table)&lt;/tt&gt; instead of &lt;tt&gt;new ArrayList&amp;lt;String&amp;gt;(Arrays.asList(table))&lt;/tt&gt; (I realize this is from previous not added by your patch)&lt;/p&gt;</comment>
                            <comment id="16452580" author="hkroger" created="Wed, 25 Apr 2018 16:19:15 +0000"  >&lt;p&gt;ah, right. I changed that a bit now.&lt;/p&gt;</comment>
                            <comment id="16452581" author="cnlwsu" created="Wed, 25 Apr 2018 16:23:18 +0000"  >&lt;p&gt;+1 from me&lt;/p&gt;</comment>
                            <comment id="16710618" author="cnlwsu" created="Wed, 5 Dec 2018 20:52:31 +0000"  >&lt;p&gt;if want this in 3.11 can you update that branch as well with fixes for args.size()==1 ?&lt;/p&gt;</comment>
                            <comment id="16712167" author="hkroger" created="Fri, 7 Dec 2018 00:21:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnlwsu&quot; class=&quot;user-hover&quot; rel=&quot;cnlwsu&quot;&gt;cnlwsu&lt;/a&gt; Did that now. I also improved the error message layout a bit.&lt;/p&gt;

&lt;p&gt;In both branches the error looks like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
nodetool: Unknown table system.peers1
See &lt;span class=&quot;code-quote&quot;&gt;&apos;nodetool help&apos;&lt;/span&gt; or &lt;span class=&quot;code-quote&quot;&gt;&apos;nodetool help &amp;lt;command&amp;gt;&apos;&lt;/span&gt;.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13223581">CASSANDRA-15060</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[hkroger]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3svhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12339157">3.11.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>cnlwsu</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[cnlwsu]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12336842">4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/d6c049f0835f137fc07711ec5cf9adc323347c65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/d6c049f0835f137fc07711ec5cf9adc323347c65&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>