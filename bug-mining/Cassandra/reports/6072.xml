<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:25:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-17530] Paxos v2 Linearizability Violation</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-17530</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&#65279;The version of Paxos introduced recently had a subtle mistake that introduced a linearizability flaw that has been detected by the simulator, and also a flaw with the simulator has been found that may erroneously report a linearizability violation.&lt;/p&gt;

&lt;p&gt;The true linearizability fault is quite simple: fast read permissions were erroneously being escalated to promises when an incomplete proposal was discovered. This was likely due in part to the naming of the state &lt;tt&gt;FOUND_INCOMPLETE_ACCEPTED&lt;/tt&gt; which does not communicate that the ballot will be used to re-propose this proposal using the promises we have obtained. The fix is to yield &lt;tt&gt;SUPERSEDED&lt;/tt&gt; if &lt;tt&gt;!haveOnlyPromises&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The false linearizability fault was triggered when two different competing incomplete proposals were reproposed multiple times, with the winning proposal being the one with the lower original ballot, and the proposal with the higher ballot having been successfully proposed to a majority of nodes but across multiple different ballots (so that no single ballot reached a majority), while the most recently successful ballot (at a minority) was the older original ballot. The range movement validation logic looked only at the original ballot, and since it saw the higher original ballot as having reached a majority perceived that it should have become persistent, when in fact the older ballot did so.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13438193">CASSANDRA-17530</key>
            <summary>Paxos v2 Linearizability Violation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="benedict">Benedict Elliott Smith</assignee>
                                    <reporter username="benedict">Benedict Elliott Smith</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Apr 2022 14:23:04 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:46 +0000</updated>
                            <resolved>Tue, 18 Oct 2022 15:14:23 +0000</resolved>
                                        <fixVersion>4.1-beta1</fixVersion>
                    <fixVersion>4.1</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>Consistency/Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17518169" author="benedict" created="Wed, 6 Apr 2022 14:25:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1553&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17524472" author="bdeggleston" created="Tue, 19 Apr 2022 18:09:28 +0000"  >&lt;p&gt;Looks good, +1&lt;/p&gt;</comment>
                            <comment id="17556594" author="edimitrova" created="Tue, 21 Jun 2022 01:32:21 +0000"  >&lt;p&gt;Triaging the 4.1 blockers and stumbled into this one. It seems a bit old already. I believe it will need rebase and patches for both 4.1 and trunk plus CI runs. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17559901" author="dcapwell" created="Tue, 28 Jun 2022 18:13:29 +0000"  >&lt;p&gt;finished my review, think the paxos/simulator changes LGTM, my only comments are related to the CircleCI configs.  If you switch the executor I am +1 (other comments are nits)&lt;/p&gt;</comment>
                            <comment id="17565434" author="benedict" created="Tue, 12 Jul 2022 11:27:23 +0000"  >&lt;p&gt;CircleCI: [java8&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/belliottsmith/cassandra/307/workflows/4e71f806-e4eb-4869-aac1-d01d8a7a5bfe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/belliottsmith/cassandra/307/workflows/4e71f806-e4eb-4869-aac1-d01d8a7a5bfe&lt;/a&gt;] &lt;a href=&quot;https://app.circleci.com/pipelines/github/belliottsmith/cassandra/307/workflows/f3c2d1f4-f821-48dd-943c-1e6c6cb7df44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;One unrelated failure, merging.&lt;/p&gt;</comment>
                            <comment id="17566870" author="benedict" created="Thu, 14 Jul 2022 14:42:02 +0000"  >&lt;p&gt;Caleb noted a dtest failure resulting from this ticket. I have opened a PR to address this, as it&apos;s a one line change, and fairly soon in follow-up: &lt;a href=&quot;https://github.com/apache/cassandra/pull/1733&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/1733&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve flagged Sam, David and Blake as potential reviewers, but if anyone has the time it should be very easy for anyone to +1.&lt;/p&gt;</comment>
                            <comment id="17567262" author="edimitrova" created="Fri, 15 Jul 2022 14:22:32 +0000"  >&lt;p&gt;I think this was already committed? Probably just forgot to close the ticket?&lt;/p&gt;

&lt;p&gt;I was about to review it but then I noticed the commit.&lt;/p&gt;

&lt;p&gt;Side note: the CircleCI patch files need to be recreated to get rid of the offset warnings we currently see when we apply MIDRES or HIGHRES.&lt;/p&gt;

&lt;p&gt;This can be done using the following script:&lt;/p&gt;

&lt;p&gt;#. apply old patches (with hunk messages)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
patch -o config-2_1.yml.MIDRES config-2_1.yml config-2_1.yml.mid_res.patch
patch -o config-2_1.yml.HIGHRES config-2_1.yml config-2_1.yml.high_res.patch&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;#. generate new patches&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff -u config-2_1.yml config-2_1.yml.HIGHRES &amp;gt; config-2_1.yml.high_res.patch
diff -u config-2_1.yml config-2_1.yml.MIDRES &amp;gt; config-2_1.yml.mid_res.patch&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;#. verify that the new patches generate the same files and cleanup&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./generate.sh -a&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The last step should confirm for you only the patch files are new but the MIDRES and HIGHRES were not changed.&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17619644" author="blerer" created="Tue, 18 Oct 2022 15:14:23 +0000"  >&lt;p&gt;Committed into 4.1at 067121da63c2a8ead48aeb9a4241af5306b14a37 and merged into trunk&lt;/p&gt;</comment>
                            <comment id="17637314" author="michaelsembwever" created="Tue, 22 Nov 2022 15:16:30 +0000"  >&lt;p&gt;Was there a &lt;tt&gt;CHANGES.txt&lt;/tt&gt; entry for this? (There are runtime classes touched here&#8230;)&lt;/p&gt;</comment>
                            <comment id="17637326" author="benedict" created="Tue, 22 Nov 2022 15:35:59 +0000"  >&lt;p&gt;I don&apos;t think the bug didn&apos;t make it into any release, so was there any change to note?&lt;/p&gt;</comment>
                            <comment id="17637345" author="michaelsembwever" created="Tue, 22 Nov 2022 16:02:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think the bug didn&apos;t make it into any release, so was there any change to note?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Was it not in &lt;tt&gt;4.1-alpha1&lt;/tt&gt; ? (or have i misunderstood the since field?)&lt;/p&gt;</comment>
                            <comment id="17637364" author="benedict" created="Tue, 22 Nov 2022 16:59:56 +0000"  >&lt;p&gt;It wasn&apos;t when the patch was prepared, but it looks like it was merged shortly after alpha.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[benedict]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="13161" cascade-level="1"><![CDATA[Unrecoverable Corruption / Loss]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12972"><![CDATA[Fuzz Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z117yw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bdeggleston]]></customfieldvalue>
        <customfieldvalue><![CDATA[dcapwell]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12351787">4.1-alpha1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/067121da63c2a8ead48aeb9a4241af5306b14a37&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/067121da63c2a8ead48aeb9a4241af5306b14a37&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;simulator now included ind tests&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>