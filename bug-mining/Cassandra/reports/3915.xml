<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:59:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10590] LegacySSTableTest fails after CASSANDRA-10360</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10590</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;LegacySSTableTest fails reading pre-3.0 sstables (versions &lt;tt&gt;jb&lt;/tt&gt;, &lt;tt&gt;ka&lt;/tt&gt;, &lt;tt&gt;la&lt;/tt&gt;) with clustering keys and counters.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.0_testall/205/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;First failing 3.0 testall build&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12907728">CASSANDRA-10590</key>
            <summary>LegacySSTableTest fails after CASSANDRA-10360</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="snazy">Robert Stupp</reporter>
                        <labels>
                    </labels>
                <created>Sun, 25 Oct 2015 10:54:21 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:52 +0000</updated>
                            <resolved>Thu, 5 Nov 2015 10:17:18 +0000</resolved>
                                        <fixVersion>3.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14978473" author="slebresne" created="Wed, 28 Oct 2015 14:10:08 +0000"  >&lt;p&gt;That&apos;s definitively my bad for missing that test, sorry. The issue has to do with the fact that the legacy deserializer &lt;tt&gt;hasNext()&lt;/tt&gt; method deserialize the full row upfront, and the fact that a row can span multiple index block (again, in the legacy case). The patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10360&quot; title=&quot;UnsupportedOperationException when compacting system.size_estimates after 2.1 -&amp;gt; 2.2 -&amp;gt; 3.0 upgrade&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10360&quot;&gt;&lt;del&gt;CASSANDRA-10360&lt;/del&gt;&lt;/a&gt; accounted for that but missed one part, so that we were potentially stopping reading early because a call to &lt;tt&gt;hasNext()&lt;/tt&gt; put us on an index block where we knew not row we were interested in could start, but that made us mistakenly skip the next row (the one read in the &lt;tt&gt;hasNext()&lt;/tt&gt; call). Anyway, pushed a patch to fix this &lt;a href=&quot;https://github.com/pcmanus/cassandra/commits/10590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14989708" author="blambov" created="Wed, 4 Nov 2015 15:28:46 +0000"  >&lt;p&gt;The code looks good.&lt;/p&gt;

&lt;p&gt;CI tests don&apos;t appear to have run, could you start them and commit if they are clean?&lt;/p&gt;</comment>
                            <comment id="14989900" author="slebresne" created="Wed, 4 Nov 2015 16:55:42 +0000"  >&lt;p&gt;Yes sorry, my webhook was busted for a few days last week and forgot to get back to that one. Tests will be available here: &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/pcmanus/job/pcmanus-10590-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; and &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/pcmanus/job/pcmanus-10590-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14991461" author="slebresne" created="Thu, 5 Nov 2015 10:17:18 +0000"  >&lt;p&gt;So the unit test run show that the &lt;tt&gt;LegacySSTableTest&lt;/tt&gt; is fixed and there is no new failure. Unfortunately, dtests are pretty broken on the 3.0 branch right now, so that run doesn&apos;t really tell us much. But tbh, I doubt this would break much dtest because the sad truth is that pending the resolution of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10563&quot; title=&quot;Integrate new upgrade test into dtest upgrade suite&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10563&quot;&gt;&lt;del&gt;CASSANDRA-10563&lt;/del&gt;&lt;/a&gt;, I don&apos;t think we have any test ran on CI that exercise reading legacy sstable (and it&apos;s relatively easy to convince oneself that the patch only affect that path).&lt;/p&gt;

&lt;p&gt;So anyway, I don&apos;t want to block that fix so committed. I did ran the tests from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10563&quot; title=&quot;Integrate new upgrade test into dtest upgrade suite&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10563&quot;&gt;&lt;del&gt;CASSANDRA-10563&lt;/del&gt;&lt;/a&gt; twice locally on the final branch before pushing it and all tests are passing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nhon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>blambov</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blambov]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>