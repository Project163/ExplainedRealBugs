<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:18:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16226] COMPACT STORAGE SSTables created before 3.0 are not correctly skipped by timestamp due to missing primary key liveness info</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16226</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This was discovered while tracking down a spike in the number of  SSTables per read for a COMPACT STORAGE table after a 2.1 -&amp;gt; 3.0 upgrade. Before 3.0, there is no direct analog of 3.0&apos;s primary key liveness info. When we upgrade 2.1 COMPACT STORAGE SSTables to the mf format, we simply don&apos;t write row timestamps, even if the original mutations were INSERTs. On read, when we look at SSTables in order from newest to oldest max timestamp, we expect to have this primary key liveness information to determine whether we can skip older SSTables after finding completely populated rows.&lt;/p&gt;

&lt;p&gt;ex. I have three SSTables in a COMPACT STORAGE table with max timestamps 1000, 2000, and 3000. There are many rows in a particular partition, making filtering on the min and max clustering effectively a no-op. All data is inserted, and there are no partial updates. A fully specified row with timestamp 2500 exists in the SSTable with a max timestamp of 3000. With a proper row timestamp in hand, we can easily ignore the SSTables w/ max timestamps of 1000 and 2000. Without it, we read 3 SSTables instead of 1, which likely means a significant performance regression. &lt;/p&gt;

&lt;p&gt;The following test illustrates this difference in behavior between 2.1 and 3.0:&lt;br/&gt;
&lt;a href=&quot;https://github.com/maedhroz/cassandra/commit/84ce9242bedd735ca79d4f06007d127de6a82800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/maedhroz/cassandra/commit/84ce9242bedd735ca79d4f06007d127de6a82800&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A solution here might be as simple as having &lt;tt&gt;SinglePartitionReadCommand#canRemoveRow()&lt;/tt&gt; only inspect primary key liveness information for non-compact/CQL tables. Tombstones seem to be handled at a level above that anyway. (One potential problem with that is whether or not the distinction will continue to exist in 4.0, and dropping compact storage from a table doesn&apos;t magically make pk liveness information appear.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13336991">CASSANDRA-16226</key>
            <summary>COMPACT STORAGE SSTables created before 3.0 are not correctly skipped by timestamp due to missing primary key liveness info</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="maedhroz">Caleb Rackliffe</assignee>
                                    <reporter username="maedhroz">Caleb Rackliffe</reporter>
                        <labels>
                            <label>perfomance</label>
                            <label>upgrade</label>
                    </labels>
                <created>Fri, 23 Oct 2020 21:48:12 +0000</created>
                <updated>Wed, 16 Mar 2022 15:16:11 +0000</updated>
                            <resolved>Thu, 7 Jan 2021 23:19:30 +0000</resolved>
                                        <fixVersion>2.2.20</fixVersion>
                    <fixVersion>3.0.24</fixVersion>
                    <fixVersion>3.11.10</fixVersion>
                    <fixVersion>4.0-rc1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Local Write-Read Paths</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="20400">5h 40m</timespent>
                                <comments>
                            <comment id="17221100" author="kornelpal" created="Tue, 27 Oct 2020 03:13:24 +0000"  >&lt;p&gt;If I understand correctly, only upgraded tables are affected, so new tables (or even INSERTs to upgraded tables?) are not affected. Could the migration code be fixed so that row timestamps are properly generated? While the proposed solution improves performance for migrated tables, also seems to take away the performance benefits of max timestamps from COMPACT STORAGE tables. Fixing the issue for newly upgraded and rebuilt tables and recommending &lt;tt&gt;nodetool upgradesstables -a&lt;/tt&gt; for fixing the performance issue on already migrated tables might result in even better performance improvements.&lt;/p&gt;</comment>
                            <comment id="17221542" author="maedhroz" created="Tue, 27 Oct 2020 16:15:10 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kornelpal&quot; class=&quot;user-hover&quot; rel=&quot;kornelpal&quot;&gt;kornelpal&lt;/a&gt;. Take a look at &lt;tt&gt;UpdateStatement#addUpdateForKey()&lt;/tt&gt;...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;// We update the row timestamp (ex-row marker) only on INSERT (#6782)
// Further, COMPACT tables semantic differs from &quot;CQL3&quot; ones in that a row exists only if it has
// a non-null column, so we don&apos;t want to set the row timestamp for them.
if (type.isInsert() &amp;amp;&amp;amp; cfm.isCQLTable())
    params.addPrimaryKeyLivenessInfo();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...and &lt;tt&gt;LegacyLayout&lt;/tt&gt;...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;else if (column.isPrimaryKeyColumn() &amp;amp;&amp;amp; metadata.isCQLTable())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;COMPACT tables will never have primary key liveness info, even if those tables are created in 3.0+, so running &lt;tt&gt;upgradesstables&lt;/tt&gt; doesn&apos;t help (at least as far as I can tell). The patch I&apos;ve posted simply restores the way this optimization worked for COMPACT tables before the 3.0 storage engine rewrite.&lt;/p&gt;</comment>
                            <comment id="17221547" author="maedhroz" created="Tue, 27 Oct 2020 16:20:34 +0000"  >&lt;p&gt;I do need to test this w/ &lt;tt&gt;DROP COMPACT STORAGE&lt;/tt&gt; though...&lt;/p&gt;</comment>
                            <comment id="17221593" author="maedhroz" created="Tue, 27 Oct 2020 17:27:56 +0000"  >&lt;p&gt;There is a problem the current patch does not address, and that&apos;s dropping compact storage when you&apos;ve already written SSTables. &lt;tt&gt;DROP COMPACT STORAGE&lt;/tt&gt; doesn&apos;t leave any indication on individual SSTables as to whether the table overall was COMPACT when they were written. Therefore, &lt;tt&gt;isCQLTable()&lt;/tt&gt; can be true after the drop, and we&apos;re back in the same situation. Also, &lt;tt&gt;upgradesstables&lt;/tt&gt; has to be run before &lt;tt&gt;DROP COMPACT STORAGE&lt;/tt&gt; can be run, so there is no source of liveness information either way.&lt;/p&gt;</comment>
                            <comment id="17221596" author="kornelpal" created="Tue, 27 Oct 2020 17:30:13 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt; for the details, now I understand that this is not an upgrade issue. I don&apos;t have any more concerns about your patch, and thank you for fixing this performance issue.&lt;/p&gt;</comment>
                            <comment id="17221620" author="maedhroz" created="Tue, 27 Oct 2020 18:00:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcuse&quot; class=&quot;user-hover&quot; rel=&quot;marcuse&quot;&gt;marcuse&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jwest&quot; class=&quot;user-hover&quot; rel=&quot;jwest&quot;&gt;jwest&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; What might make sense (and I need to coordinate with you) is whether we could solve the above problem with a simple flag at the SSTable level that indicates whether empty primary key liveness info is valid. If we write this in &lt;tt&gt;upgradesstables&lt;/tt&gt; and then require its presence before running &lt;tt&gt;DROP COMPACT STORAGE&lt;/tt&gt;, I think we would have the guardrails necessary to make it basically impossible for people to accidentally re-introduce this regression. (This would be coupled, of course, with changing the current patch to look at that flag, not the table level &lt;tt&gt;isCQLTable()&lt;/tt&gt;.)&lt;/p&gt;</comment>
                            <comment id="17230788" author="maedhroz" created="Thu, 12 Nov 2020 17:05:59 +0000"  >&lt;p&gt;With the now-committed &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16217&quot; title=&quot;Minimal 4.0 COMPACT STORAGE backport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16217&quot;&gt;&lt;del&gt;CASSANDRA-16217&lt;/del&gt;&lt;/a&gt; bringing back &lt;tt&gt;isCQLTable()&lt;/tt&gt;, the patch currently posted for this issue is perhaps &lt;em&gt;more&lt;/em&gt; defensible. However, the problems around &lt;tt&gt;DROP COMPACT STORAGE&lt;/tt&gt; persist and will have to be dealt with.&lt;/p&gt;</comment>
                            <comment id="17232100" author="kornelpal" created="Sat, 14 Nov 2020 18:21:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt;, since &lt;tt&gt;COMPACT STORAGE&lt;/tt&gt; support was reintroduced to 4.0, would it make sense to implement the fix for 3.0+ and document the performance degradation as one more of the already many undesirable side effects of &lt;tt&gt;DROP COMPACT STORAGE&lt;/tt&gt;? &lt;tt&gt;isCQLTable()&lt;/tt&gt; will be true after that, and then rebuilding the SSTables (compaction, scrub or upgradesstables) will fix the performance issues.&lt;/p&gt;

&lt;p&gt;I did some more research and I don&apos;t think that the temporary performance issue after &lt;tt&gt;DROP COMPACT STORAGE&lt;/tt&gt; can be fixed without tracking the dropped status. On another note, I think that the current implementation of &lt;tt&gt;DROP COMPACT STORAGE&lt;/tt&gt; is of very limited use. Ideally it should record that compact storage was dropped and later rebuild the SSTable using a new structure that is functionally equivalent to the old compact behavior, avoiding the issues described in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16217&quot; title=&quot;Minimal 4.0 COMPACT STORAGE backport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16217&quot;&gt;&lt;del&gt;CASSANDRA-16217&lt;/del&gt;&lt;/a&gt;. Unfortunately I am not sure how much effort such a change was.&lt;/p&gt;

&lt;p&gt;Other &lt;tt&gt;ALTER TABLE&lt;/tt&gt; operations such as dropping a column, changing bloom_filter_fp_chance or compression options already require the SSTables to be rebuilt (by compaction, scrub or upgradesstables) to take effect. This would be the first of those operations to cause a temporary performance degradation however. Considering even this, I believe that fixing the compact table performance issue and dealing with the side effects of &lt;tt&gt;DROP COMPACT STORAGE&lt;/tt&gt; as part of the larger effort of removing compact storage support would benefit the community by facilitating upgrade to 3.0+ from 2.x.&lt;/p&gt;</comment>
                            <comment id="17233168" author="maedhroz" created="Tue, 17 Nov 2020 00:15:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think that the temporary performance issue after DROP COMPACT STORAGE can be fixed without tracking the dropped status.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Before going too much farther here, I should probably lay out one more time how the concept of an empty row differs between compact and non-compact tables and how that affects the way they interact with the read path optimizations for skipping SSTables.&lt;/p&gt;

&lt;p&gt;For compact tables, there is no concept of primary key liveness. When a row has no live cells, it is simply empty. For a non-compact table, it is possible to have a live row that happens to have no live cells. Imagine the following example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INSERT INTO foo (partitionKey, clustering, value) VALUES (0, 1, 1)
DELETE value FROM foo WHERE partitionKey = 0 AND clustering = 1
SELECT * FROM foo WHERE partitionKey = 1 AND clustering = 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With compact storage, this SELECT will return nothing/zero rows. With a non-compact table, this will return a single row &lt;tt&gt;(0, 1, null)&lt;/tt&gt;. Any solution for this Jira should preserve this behavior, i.e. when DROP COMPACT STORAGE runs, we should start returning the second result, and all existing non-compact tables should keep the same behavior as well.&lt;/p&gt;

&lt;p&gt;Right now, I&apos;m working on a solution that a.) preserves this behavior, b.) requires no changes to the SSTable format, and c.) fixes the performance regression originally reported in this Jira, in addition to one or two that don&apos;t actually relate to compact tables. I&apos;ll hopefully have a rough patch in the next day or so.&lt;/p&gt;</comment>
                            <comment id="17233274" author="kornelpal" created="Tue, 17 Nov 2020 05:46:07 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt; for the example, now I understand that the simple fix for the performance issue would also result in a behavior change. In this case I think that you need to apply the same special behavior when the NO_COMPACT client option is set, not just when DROP COMPACT STORAGE was issued.&lt;/p&gt;</comment>
                            <comment id="17233742" author="maedhroz" created="Tue, 17 Nov 2020 17:09:03 +0000"  >&lt;p&gt;I&apos;ve posted (the 3.0 version of) an alternative solution here, which should merge up cleanly, given &lt;tt&gt;TableMetadata#isCQLTable()&lt;/tt&gt; is still present on trunk after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16217&quot; title=&quot;Minimal 4.0 COMPACT STORAGE backport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16217&quot;&gt;&lt;del&gt;CASSANDRA-16217&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://github.com/apache/cassandra/pull/823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/823&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(CircleCI is having difficulty with the unit tests, but there is an ex-unit test run &lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/155/workflows/cc54c092-cac1-4144-b9be-577ea4c8a78e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; and a default config unit test run &lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/158/workflows/12cd707a-2fdd-4b9f-b512-b5f060a63dbf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.)&lt;/p&gt;

&lt;p&gt;My goals w/ this patch were the following:&lt;/p&gt;

&lt;p&gt;1.) Maintain the empty row semantics of tables that have either always been compact or always been non-compact (see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16226?focusedCommentId=17233168&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17233168&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;previous&lt;/a&gt; comment), and preserve as much of them as possible after dropping compact storage, given the historical limitations of the compact format.&lt;/p&gt;

&lt;p&gt;2.) Either improve/reduce or leave unchanged the number of SSTables read in all cases for tables that have never been compact.&lt;/p&gt;

&lt;p&gt;3.) Fix the regression around the number of SSTables read in the original description of this issue for compact tables, and avoid having the regression re-introduced when and if compact storage is dropped.&lt;/p&gt;

&lt;p&gt;4.) Avoid creating a new SSTable format or burdening operators with running &lt;tt&gt;upgradesstables&lt;/tt&gt; again to make all of this above work.&lt;/p&gt;

&lt;p&gt;Although there are some issues w/ the unit tests on CI, the relevant local tests are looking clean, including &lt;tt&gt;operations.DeleteTest&lt;/tt&gt; and &lt;tt&gt;operations.UpgradeTest&lt;/tt&gt;, which verify item #1 above, and the other points are by and large satisfied. For point #2, there was actually a case where pure non-compact tables appeared to be reading too many SSTables w/ updates present (although that &lt;a href=&quot;https://github.com/apache/cassandra/pull/823/files?file-filters%5B%5D=.java#r524809272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;needs to be reviewed&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;One drawback of this approach is that when a compact table with existing SSTables has compact storage dropped, those SSTables still do not contain primary key liveness info, and therefore may continue to return zero rows rather than rows w/ primary keys and null regular columns. (Data written after the drop will, of course, have liveness info, and so mixed behavior is possible.) I&apos;ve discussed a few ideas w/ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jwest&quot; class=&quot;user-hover&quot; rel=&quot;jwest&quot;&gt;jwest&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; around this, and I&apos;m not convinced any of them would be valuable. (Keep in mind that applications written against compact storage tables will already be handling this case, and good documentation will help even further.)&lt;/p&gt;

&lt;p&gt;The first is having enough information, either via a sequence number or a new piece of metadata, to identify whether an SSTable was created while a table was still compact. Having this data might be useful in some other way, but it still does not insert primary key liveness info into pre-drop SSTables. DELETE and UPDATE operations never have primary key liveness information attached to them, even for pure non-compact tables, so an insert pre-drop in one SSTable, followed by a delete in a post-drop SSTable, will still translate to the absence of a row rather than a row with null regular cells.&lt;/p&gt;

&lt;p&gt;The second broad idea is to somehow insert primary key liveness information into pre-drop SSTables, but this is problematic for at least a couple reasons. If we make it a prerequisite for running DROP COMPACT STORAGE, it means physically rewriting SSTables. (To be fair, this may not be a huge additional burden for those still on 2.x, who would have to do this anyway.) The other oddity is that there doesn&apos;t appear to be any existing procedure for synthesizing primary key liveness info. In the non-compact world, it is carried only by INSERT operations, not UPDATE or DELETE operations. It&apos;s not clear to me how we would determine where to add it during a &lt;tt&gt;runsstableupgrade&lt;/tt&gt; run, particularly how we would know the difference between INSERT and UPDATE starting with just a compact SSTable on disk.&lt;/p&gt;

&lt;p&gt;To summarize, I think tables that are purely compact or non-compact should be handled pretty well w/ this patch (and will strictly git all the goals above, where applicable). The interesting case is the mixed compact/non-compact SSTable set caused by dropping compact storage. In this case, I think it makes reasonable trade-offs and avoids all the major pain points for operators. Whatever direction we go, the official docs around compact storage are going to need updating.&lt;/p&gt;</comment>
                            <comment id="17247972" author="ifesdjeen" created="Fri, 11 Dec 2020 15:39:26 +0000"  >&lt;p&gt;+1 on the patch. The only change I&apos;d like to suggest is to add tests for tombstones, since previously we weren&apos;t taking them into consideration. &lt;/p&gt;

&lt;p&gt;Two nits (pre-existing):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/823/files#diff-b4515f390c3b40e1f64feda8fd8746647b43cda26f8019ec96fc2dd4320fa96cR1040&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; &quot;more recent that&quot; should be &quot;more recent than&quot;.&lt;/li&gt;
	&lt;li&gt;should we consider renaming &lt;tt&gt;canRemoveRow&lt;/tt&gt;? The name is slightly confusing, since the idea here is basically to reduce number of clustering keys to perform search upon. I&apos;m sure this made complete sense to whoever was writing it at first, but out of context this name was a bit hard to parse.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="17248213" author="maedhroz" created="Fri, 11 Dec 2020 22:10:17 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;add tests for tombstones, since previously we weren&apos;t taking them into consideration&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Indeed, although there is some coverage of this logic across &lt;tt&gt;SSTablesIteratedTest&lt;/tt&gt;, &lt;tt&gt;DeleteTest&lt;/tt&gt;, and &lt;tt&gt;UpgradeTest&lt;/tt&gt;. It might be useful to have a test or two around the number of SSTables hit with range tombstones in &lt;tt&gt;SSTablesIteratedTest&lt;/tt&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;should be &quot;more recent than&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;should we consider renaming canRemoveRow?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I settled on &lt;tt&gt;isRowComplete()&lt;/tt&gt;, which at least describes what the method tells us, and &lt;em&gt;not&lt;/em&gt; what it tells use we can do as a result.&lt;/p&gt;

&lt;p&gt;New commit with the changes above is &lt;a href=&quot;https://github.com/apache/cassandra/pull/823/commits/b71d830ebbe2e5726de2c18b03179ca2b8a74023&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;...and just to have everything in one place for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;: &lt;a href=&quot;https://github.com/apache/cassandra/pull/823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 patch&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/171/workflows/4781de11-c5e2-40b1-967c-0e96728f843b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/169/workflows/93ea354c-cd12-48a5-a0ec-d88ca1a0dc86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI Unit Tests Only&lt;/a&gt;. (For some reason, the HIGHRES configuration isn&apos;t handling the unit tests properly.)&lt;/p&gt;

&lt;p&gt;I&apos;ll post the 3.11 and 4.0 branches, which I expect not to deviate much (if at all) from the 3.0 diff, once we&apos;ve got a second +1.&lt;/p&gt;</comment>
                            <comment id="17249721" author="michaelsembwever" created="Tue, 15 Dec 2020 14:31:27 +0000"  >&lt;p&gt;ci-cassandra.a.o run &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/264/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;br/&gt;
Failures look erroneous. Maybe the 3.0 patch needs a rebase? (e.g. compare it to 3.0 latest &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-3.0/lastSuccessfulBuild/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;results&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17249780" author="maedhroz" created="Tue, 15 Dec 2020 16:33:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt; I&apos;ve rebased the 3.0 patch.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;TestCqlshOutput&lt;/tt&gt; errors look like some oddities around unexpected single-quotes, parentheses, and dashes in their output, so those should be unrelated. &lt;tt&gt;TestOfflineTools&lt;/tt&gt; is flaky in the base branch. Finally, the failing in-jvm tests area all passing in the above CircleCI runs.&lt;/p&gt;</comment>
                            <comment id="17249782" author="maedhroz" created="Tue, 15 Dec 2020 16:37:49 +0000"  >&lt;p&gt;Also, it looks like we aren&apos;t even running the &lt;tt&gt;TestCqlshOutput&lt;/tt&gt; tests against &lt;tt&gt;cassandra-3.0&lt;/tt&gt;? (i.e. 8,246 tests for my branch and 8,030 for the base branch?)&lt;/p&gt;</comment>
                            <comment id="17249839" author="maedhroz" created="Tue, 15 Dec 2020 18:04:13 +0000"  >&lt;p&gt;Pushed up the 3.11 and trunk patches...&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/172/workflows/2cd5f868-d9ec-44e2-97d0-ea2a809f2533&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Circle j8&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;n/a&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/853&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/174/workflows/e5fc06b8-3acc-4a7f-bb66-f0c3bea52272&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Circle j8&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;n/a&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/854&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/175/workflows/e6adf785-c421-4d0b-a0a9-6fe90f313952&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Circle j8&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/175/workflows/0ada7c16-9c60-45d5-8c32-770ee0194a0f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Circle j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17249957" author="michaelsembwever" created="Tue, 15 Dec 2020 21:34:10 +0000"  >&lt;p&gt;ci-cassandra.a.o runs for the above:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/266/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/267/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/268/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17250483" author="maedhroz" created="Wed, 16 Dec 2020 17:32:55 +0000"  >&lt;p&gt;Summarizing the &lt;tt&gt;ci-cassandra&lt;/tt&gt; runs...&lt;/p&gt;

&lt;p&gt;For the 3.0 and 3.11 patches, there&apos;s no test failure that&apos;s not also present (assuming it&apos;s even run) in the recent history for &lt;tt&gt;cassandra-3.0&lt;/tt&gt; and &lt;tt&gt;cassandra-3.11&lt;/tt&gt;, respectively.&lt;/p&gt;

&lt;p&gt;For the trunk patch, there is &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/268/testReport/org.apache.cassandra.net/ProxyHandlerConnectionsTest/testExpireSomeFromBatch_compression/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;one failure&lt;/a&gt; that isn&apos;t in the recent history, &lt;tt&gt;ProxyHandlerConnectionsTest.testExpireSomeFromBatch&lt;/tt&gt; w/ compression, but it looks both completely unrelated and accompanied by failures in the normal and cdc versions on trunk.&lt;/p&gt;

&lt;p&gt;It looks like &lt;tt&gt;ProxyHandlerConnectionsTest&lt;/tt&gt; needs a test fixing Jira...&lt;/p&gt;

&lt;p&gt;UPDATE:&#160;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16358&quot; title=&quot;Minor Flakiness in ProxyHandlerConnectionsTest#testExpireSomeFromBatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16358&quot;&gt;&lt;del&gt;CASSANDRA-16358&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17251275" author="maedhroz" created="Thu, 17 Dec 2020 18:43:08 +0000"  >&lt;p&gt;I&apos;ve added a few more tests in the wake of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;&apos;s review in the 3.0 branch and addressed the concerns raised. If those discussions are resolved, I&apos;ll begin the process of updating the 3.11 and trunk PRs...&lt;/p&gt;</comment>
                            <comment id="17251356" author="michaelsembwever" created="Thu, 17 Dec 2020 21:49:44 +0000"  >&lt;p&gt;+1 to the 3.0 patch. Will the failure to invalidate the prepared statement cache when dropping compact storage in trunk be addressed in a separate ticket?&lt;/p&gt;</comment>
                            <comment id="17251357" author="maedhroz" created="Thu, 17 Dec 2020 21:53:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;Will the failure to invalidate the prepared statement cache when dropping compact storage in trunk be addressed in a separate ticket?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16361&quot; title=&quot;DROP COMPACT STORAGE should invalidate prepared statements still using CompactTableMetadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16361&quot;&gt;&lt;del&gt;CASSANDRA-16361&lt;/del&gt;&lt;/a&gt;. (UPDATE: A patch is now available there.)&lt;/p&gt;</comment>
                            <comment id="17251375" author="maedhroz" created="Thu, 17 Dec 2020 22:35:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt; There are actually a couple changes I want to make to the docs around compact storage, as I mentioned in the Documentation Plan above. Would it be best to include that only in the trunk patch? A separate Jira altogether?&lt;/p&gt;</comment>
                            <comment id="17251574" author="michaelsembwever" created="Fri, 18 Dec 2020 07:50:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;There are actually a couple changes I want to make to the docs around compact storage, as I mentioned in the Documentation Plan above. Would it be best to include that only in the trunk patch? A separate Jira altogether?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;3.11 (if doc exists there) and trunk, this jira, please.&lt;/p&gt;</comment>
                            <comment id="17251846" author="maedhroz" created="Fri, 18 Dec 2020 16:17:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; I&apos;ve made the minor adjustment to the docs in the 3.11 branch &lt;a href=&quot;https://github.com/apache/cassandra/pull/853/commits/1de49337f1ed93bbf023d0b25add179922fd9341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="17251860" author="michaelsembwever" created="Fri, 18 Dec 2020 16:44:16 +0000"  >&lt;p&gt;&amp;gt; I&apos;ve made the minor adjustment to the docs in the 3.11 branch here. Let me know what you think.&lt;/p&gt;

&lt;p&gt;LGTM!&lt;/p&gt;</comment>
                            <comment id="17258690" author="maedhroz" created="Tue, 5 Jan 2021 06:24:08 +0000"  >&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16361&quot; title=&quot;DROP COMPACT STORAGE should invalidate prepared statements still using CompactTableMetadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16361&quot;&gt;&lt;del&gt;CASSANDRA-16361&lt;/del&gt;&lt;/a&gt; resolved, it looks like all that&apos;s left here is to rebase things and get the trunk patch up-to-date. I&apos;ll take care of that tomorrow...&lt;/p&gt;</comment>
                            <comment id="17259381" author="maedhroz" created="Wed, 6 Jan 2021 03:24:08 +0000"  >&lt;p&gt;The three branches are now squashed, Circle settings removed, etc.&lt;/p&gt;</comment>
                            <comment id="17260876" author="michaelsembwever" created="Thu, 7 Jan 2021 23:19:30 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/f8500ee911343eb8826f9c44bb6db2ab780f6327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;f8500ee911343eb8826f9c44bb6db2ab780f6327&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17260886" author="maedhroz" created="Thu, 7 Jan 2021 23:49:46 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13378842">CASSANDRA-16671</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13291509">CASSANDRA-15640</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13379113">CASSANDRA-16675</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13336338">CASSANDRA-16217</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[maedhroz]]></customfieldvalue>
        <customfieldvalue><![CDATA[mck]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12984" cascade-level=""><![CDATA[Degradation]]></customfieldvalue>
                                <customfieldvalue key="12997" cascade-level="1"><![CDATA[Performance Bug/Regression]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0jyuw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ifesdjeen]]></customfieldvalue>
        <customfieldvalue><![CDATA[mck]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332361">3.0 alpha 1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/f8500ee911343eb8826f9c44bb6db2ab780f6327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/f8500ee911343eb8826f9c44bb6db2ab780f6327&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;The patch includes a series of new tests in &lt;tt&gt;SSTablesIteratedTest&lt;/tt&gt; that verify expected numbers of SSTables read for several query types across compact and non-compact tables. They should serve as reasonable documentation and guardrails against further regression.&lt;/p&gt;

&lt;p&gt;The official &lt;a href=&quot;https://cassandra.apache.org/doc/latest/cql/appendices.html#appendix-c-dropping-compact-storage&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;docs on compact storage&lt;/a&gt; and the in-tree docs (in &lt;tt&gt;ddl.rst&lt;/tt&gt;)will need some rework as well, both to indicate that it will live on in 4.0, and to take into account the concerns in this issue.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>