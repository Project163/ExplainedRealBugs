<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:17:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16063] Fix user experience when upgrading to 4.0 with compact tables</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16063</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The code to handle compact tables has been removed from 4.0, and the intended upgrade path to 4.0 for users having compact tables on 3.x is that they must execute &lt;tt&gt;ALTER ... DROP COMPACT STORAGE&lt;/tt&gt; on all of their compact tables &lt;b&gt;before&lt;/b&gt; attempting the upgrade.&lt;/p&gt;

&lt;p&gt;Obviously, some users won&apos;t read the upgrade instructions (or miss a table) and may try upgrading despite still having compact tables. If they do so, the intent is that the node will &lt;em&gt;not&lt;/em&gt; start, with a message clearly indicating the pre-upgrade step the user has missed. The user will then downgrade back the node(s) to 3.x, run the proper &lt;tt&gt;ALTER ... DROP COMPACT STORAGE&lt;/tt&gt;, and then upgrade again.&lt;/p&gt;

&lt;p&gt;But while 4.0 does currently fail startup when finding any compact tables with a decent message, I believe the check is done too late during startup.&lt;/p&gt;

&lt;p&gt;Namely, that check is done as we read the tables schema, so within &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/service/CassandraDaemon.java#L241&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;Schema.instance.loadFromDisk()&lt;/tt&gt;&lt;/a&gt;.  But by then, we&apos;ve &lt;em&gt;at least&lt;/em&gt; called &lt;tt&gt;SystemKeyspace.persistLocalMetadata()&lt;/tt&gt;} and &lt;tt&gt;SystemKeyspaceMigrator40.migrate()&lt;/tt&gt;, which will get into the commit log, and even possibly flush new &lt;tt&gt;na&lt;/tt&gt; format sstables. As a results, a user might not be able to seemlessly restart the node on 3.x (to drop compact storage on the appropriate tables).&lt;/p&gt;

&lt;p&gt;Basically, we should make sure the check for compact tables done at 4.0 startup is done as a &lt;tt&gt;StartupCheck&lt;/tt&gt;, before the node does anything.&lt;/p&gt;

&lt;p&gt;We should also add a test for this (checking that if you try upgrading to 4.0 with compact storage, you can downgrade back with no intervention whatsoever).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13323784">CASSANDRA-16063</key>
            <summary>Fix user experience when upgrading to 4.0 with compact tables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="edimitrova">Ekaterina Dimitrova</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Aug 2020 15:09:23 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:57 +0000</updated>
                            <resolved>Tue, 13 Oct 2020 15:51:28 +0000</resolved>
                                        <fixVersion>3.0.23</fixVersion>
                    <fixVersion>3.11.9</fixVersion>
                    <fixVersion>4.0-beta3</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17181413" author="jrwest" created="Thu, 20 Aug 2020 19:54:40 +0000"  >&lt;p&gt;Another concern I have with the existing approach is if users run upgrade sstables as part of their upgrade process instead of letting the node do it while online. We should ensure the check is there as well. &lt;/p&gt;</comment>
                            <comment id="17181414" author="brandon.williams" created="Thu, 20 Aug 2020 19:58:53 +0000"  >&lt;p&gt;I agree and would even say that running upgradesstables as part of the upgrade process is the normal case, not the exception.&lt;/p&gt;</comment>
                            <comment id="17182149" author="edimitrova" created="Fri, 21 Aug 2020 21:09:31 +0000"  >&lt;p&gt;&lt;del&gt;I suggest we open a separate ticket and keep the work incremental?&lt;/del&gt;&lt;br/&gt;
&lt;b&gt;EDIT:&lt;/b&gt; I&apos;ll make it part of this patch, it will be just a simple check, preventing users from being able to do the drop of compact storage on non-upgraded nodes. &lt;/p&gt;</comment>
                            <comment id="17186245" author="edimitrova" created="Fri, 28 Aug 2020 04:20:57 +0000"  >&lt;p&gt;These are the four branches I worked on for this patch:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/tree/CASSANDRA-16063-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;C* 3.0&lt;/a&gt;&#160;| &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/tree/CASSANDRA-16063-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;C* 3.11&lt;/a&gt; | &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/tree/CASSANDRA-16063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk &lt;/a&gt; | &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra-dtest/tree/CASSANDRA-16063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DTests&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;4 things have been done:&lt;br/&gt;
 1) Check SSTables for latest version before dropping compact storage commits - &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/9ff9130808c751c9253bdecaa27c453bb5e7a71c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt; and &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/c0c43e90644b28b9b363fa7aba55adbf95dd5bd7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;br/&gt;
 2) Allow skipping commit log replay was not failing on descriptor errors, this was corrected on all branches in order to support our strategy from the next point.&lt;br/&gt;
 &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/dd6207e6639576a8090ea5930f46c3cf2a4a5971&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt; | &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/ad6f1f9d5106b07a001a847a63bb4b3068b0c599&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt; | &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/62affe6e9e5dc654ba729a97d136e16c37f392fd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;br/&gt;
 3) Move compact storage validation earlier in startup process with detailed &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/c4835158f2815ab90bf6fdb907e95861984f2c72#diff-2220885f2835194f87cce0d27ac87c73R915&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;instructions&lt;/a&gt; to the users &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/c4835158f2815ab90bf6fdb907e95861984f2c72&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With this change we no longer write out sstable data (only a CL segment).&lt;/p&gt;

&lt;p&gt;4) Two upgrade test created &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra-dtest/commits/CASSANDRA-16063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;br/&gt;
 Trunk CI run:&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/338/workflows/324e7e64-097e-4cb3-8521-d5c4eacaca9c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Java 8&lt;/a&gt; and &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/338/workflows/559d91f6-d80a-4eb9-8211-7220db8618a5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Java 11&lt;/a&gt; CI runs did not show anything disturbing. The failures presented look related to the latest timeouts and incremental repair failures which are tackled by the community this week. I will check tomorrow whether any of them requires a new ticket to be raised.&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt; do you mind to make a review, please? Also, I need the upgrade tests to be pushed in Jenkins as they did not appear in CircleCI and I have some troubles to run them locally. Do you mind to help me with that too? (I have no access there)&lt;/p&gt;

&lt;p&gt;&lt;em&gt;About the order of commits, I would say:&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;1st the tests; Then 1) -&amp;gt; 2) -&amp;gt; 3)&lt;/em&gt;&lt;/p&gt;</comment>
                            <comment id="17186530" author="slebresne" created="Fri, 28 Aug 2020 13:16:14 +0000"  >&lt;p&gt;Happy to review (early next week most likely).&lt;/p&gt;

&lt;p&gt;One question before checking the code though: you mentions that with this change, we still write a CL segment. Why is that and have you look at how we could avoid it? Because if we still write the CL on 4.0 before erroring out, I assume this CL gets replayed once the user restart the node on 3.0 (to run DROP COMPACT STORAGE)? If so, how are we 100% confident what is replayed will not create problems?&lt;/p&gt;</comment>
                            <comment id="17187616" author="slebresne" created="Mon, 31 Aug 2020 10:04:02 +0000"  >&lt;p&gt;Ok, I hadn&apos;t understood the strategy you described, and in particular why skipping errors during commit replay was part of this.&lt;/p&gt;

&lt;p&gt;&#160;To rephrase, in case that helps other people as dense as me, the strategy implemented by the current patches is that if a users starts 4.0 with some compact tables, the server will not start but may (will?) write some CL segments. The user is then asked to restart on 3.x with a special startup flag that makes it so that if replaying those 4.0 CL segments fails, the server ignores those errors.&lt;/p&gt;

&lt;p&gt;But as mentioned in my previous comment, this is not an ideal experience (it also makes it harder to convince oneself that it is safe). Ideally, users should not have to pass special flags when restarting 3.x. So back to my question above, what is technically preventing us to do that startup check before any CL segment is written?&lt;/p&gt;</comment>
                            <comment id="17193653" author="edimitrova" created="Thu, 10 Sep 2020 14:37:49 +0000"  >&lt;p&gt;As we talked on Slack, the startup checks happen after the&#160;&lt;a href=&quot;#L214&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CommitLog.instance.start()&lt;/a&gt;&#160;(where a new empty segment is created) but before processing the old ones. So with this patch we had to get rid of the empty segment.&lt;/p&gt;

&lt;p&gt;As suggested by you, I will double check today why as part of&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15295&quot; title=&quot;Running into deadlock when do CommitLog initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15295&quot;&gt;&lt;del&gt;CASSANDRA-15295&lt;/del&gt;&lt;/a&gt;,&#160;&lt;a href=&quot;#L214&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CommitLog.instance.start()&lt;/a&gt;&#160;was set before the startup checks and not after them and try to work it out in favor of getting rid of the flag and&#160;guarantee downgrade is gonna be seamless for the user in all cases.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17193913" author="edimitrova" created="Thu, 10 Sep 2020 23:58:10 +0000"  >&lt;p&gt;So the reason for the&#160; &lt;a href=&quot;#L214&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CommitLog.instance.start()&lt;/a&gt;&#160;being set before the startup checks are&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
checkSystemKeyspaceState,
checkDatacenter,
checkRack,
checkLegacyAuthTables&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and the following dependency:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;In order to read from the table, we have to first create a &lt;tt&gt;ColumnFamilyStore.&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ColumnFamilyStore&lt;/tt&gt;, in order to function &quot;normally&quot;, has to create a memtable.&lt;/li&gt;
	&lt;li&gt;In order to create Memtable, we have to get a current position from commit log.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17201519" author="edimitrova" created="Thu, 24 Sep 2020 13:27:23 +0000"  >&lt;p&gt;Detailed code review showed the error I was getting as not being related. Empty segments should be skipped on startup.&lt;/p&gt;

&lt;p&gt;I recreated my test environment. Managed to fix my issues with running the upgrade tests locally.&lt;/p&gt;

&lt;p&gt;No flag is needed.&lt;/p&gt;

&lt;p&gt;This is how the solution works now:&lt;/p&gt;

&lt;p&gt;These are the four branches I worked on for this patch:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/tree/CASSANDRA-16063-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;C* 3.0&lt;/a&gt;&#160;| &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/tree/CASSANDRA-16063-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;C* 3.11&lt;/a&gt; | &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/tree/CASSANDRA-16063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk &lt;/a&gt;| &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra-dtest/tree/CASSANDRA-16063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DTests&lt;/a&gt;&#160;&lt;br/&gt;
 1) Check SSTables for latest version before dropping compact storage commits - &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/9ff9130808c751c9253bdecaa27c453bb5e7a71c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt; and &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/c0c43e90644b28b9b363fa7aba55adbf95dd5bd7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;br/&gt;
 2) Move compact storage &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/1a8b3ea2823d8424e2018c686fb2d6e5d67270f7#diff-a5df240149285ae528cdd3c41aa59360R104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;validation &lt;/a&gt;&#160;earlier in the startup process.&lt;/p&gt;

&lt;p&gt;4) Two new upgrade tests created and an old one was fixed&#160;&lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra-dtest/commits/CASSANDRA-16063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Trunk CI run:&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/349/workflows/04bccc52-4e3e-41e2-9c04-93501ea4ce77&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Java 8&lt;/a&gt; and &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/349/workflows/04bccc52-4e3e-41e2-9c04-93501ea4ce77&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Java 11&lt;/a&gt; CI runs did not show any new issues introduced. &#160;The two failing tests already have opened corresponding tickets:&lt;br/&gt;
 &lt;em&gt;test_tracing_does_not_interfere_with_digest_calculation - cql_tracing_test.TestCqlTracing - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14157&quot; title=&quot;[DTEST] [TRUNK] test_tracing_does_not_interfere_with_digest_calculation - cql_tracing_test.TestCqlTracing failed once : AssertionError: assert 0 == 1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14157&quot;&gt;&lt;del&gt;CASSANDRA-14157&lt;/del&gt;&lt;/a&gt;&lt;/em&gt;&lt;br/&gt;
 &lt;em&gt;testMessagePurging - org.apache.cassandra.net.ConnectionTest - &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15958&quot; title=&quot;org.apache.cassandra.net.ConnectionTest testMessagePurging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15958&quot;&gt;&lt;del&gt;CASSANDRA-15958&lt;/del&gt;&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Attached is the log of the upgrade tests successfully passing&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;&#160;do you have time to review it again? Or maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;&#160;can help here?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17202313" author="adelapena" created="Fri, 25 Sep 2020 17:13:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; I&apos;ll be happy to take a look next week.&lt;/p&gt;</comment>
                            <comment id="17203861" author="adelapena" created="Tue, 29 Sep 2020 11:15:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; are there PRs for those branches? I only see &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/pull/54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this one&lt;/a&gt; for trunk.&lt;/p&gt;</comment>
                            <comment id="17203885" author="edimitrova" created="Tue, 29 Sep 2020 12:09:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I just rebased all branches.&lt;/p&gt;

&lt;p&gt;PRs as follow:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/pull/54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;| &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/pull/56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&#160;| &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra-dtest/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtetsts&lt;/a&gt;&lt;br/&gt;
 No PR for 3.11 as it is a merge from 3.0&lt;/p&gt;</comment>
                            <comment id="17203976" author="slebresne" created="Tue, 29 Sep 2020 14:24:52 +0000"  >&lt;p&gt;I don&apos;t the time to test the patch thoroughly right now, but from a code review point of view, this lgtm.&lt;/p&gt;</comment>
                            <comment id="17205623" author="adelapena" created="Thu, 1 Oct 2020 15:41:56 +0000"  >&lt;p&gt;I have left a few very minor suggestions on the PRs. The only thing that worries me is that, if I&apos;m understanding it correctly, the verification of the SSTables before dropping `COMPACT STORAGE` at the cluster-level is done only in the local node, while there could be other nodes with old sstable versions.&lt;/p&gt;</comment>
                            <comment id="17209556" author="edimitrova" created="Wed, 7 Oct 2020 13:59:11 +0000"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;&apos;s point is correct. I was checking yesterday for a way to collect the global information but I didn&apos;t find an implemented already way. Also, additional test was added to handle this topic.&lt;/p&gt;

&lt;p&gt;From what we talked with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;&#160;and other engineers, probably our best bet will be to use Gossip?&lt;/p&gt;

&lt;p&gt;Before I start any implementation, I decided first to update the ticket and confirm the approach.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;&#160;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;&#160;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcuse&quot; class=&quot;user-hover&quot; rel=&quot;marcuse&quot;&gt;marcuse&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt;, any thoughts here? Or anyone else?&#160;&lt;/p&gt;

&lt;p&gt;Maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jwest&quot; class=&quot;user-hover&quot; rel=&quot;jwest&quot;&gt;jwest&lt;/a&gt;&#160;had some idea as they raised the upgrade of SSTables topic as part of this ticket &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;

&lt;p&gt;To summarize, in order to enforce users to upgrade their SSTables before using ALTER DROP COMPACT STORAGE, we need to be able to check globally which nodes we need to update. It seems there is no current implementation to collect this knowledge. So Gossip?&lt;/p&gt;</comment>
                            <comment id="17209574" author="brandon.williams" created="Wed, 7 Oct 2020 14:15:24 +0000"  >&lt;p&gt;Gossip is a really big hammer for this nail, and in general not a good fit.  Also, how do we handle nodes that are down?  Since a schema change is two-pronged, first trying an rpc call to every machine, and then using gossip as a fallback, we should probably do the same here: make an rpc call to every node to determine if the change is ok, and if any node is not up or the check doesn&apos;t succeed, everything fails.  If the operator wants to really drop these, they need to satisfy the same conditions as say, truncate, and have all nodes available.&lt;/p&gt;</comment>
                            <comment id="17209591" author="slebresne" created="Wed, 7 Oct 2020 14:38:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;Before I start any implementation, I decided first to update the ticket and confirm the approach.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15897&quot; title=&quot;Dropping compact storage with 2.1-sstables on disk make them unreadable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15897&quot;&gt;&lt;del&gt;CASSANDRA-15897&lt;/del&gt;&lt;/a&gt; is open to implement &lt;em&gt;exactly&lt;/em&gt; that problem. I suggest we commit the fix on this ticket as is and leave the issue of cluster-wide detection to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15897&quot; title=&quot;Dropping compact storage with 2.1-sstables on disk make them unreadable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15897&quot;&gt;&lt;del&gt;CASSANDRA-15897&lt;/del&gt;&lt;/a&gt;. We did discuss options there some time ago, and kind of settled on Gossip-based at the time, so &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; is not going to be happy. I do have an almost ready branch for that Gossip approach btw (which, I won&apos;t deny, is a bit involved), and while I don&apos;t have time to get this to the finish line right now, I can share my branch (tomorrow most likely) and you can decide whether to use that or not.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;how do we handle nodes that are down?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fwiw, my existing branch for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15897&quot; title=&quot;Dropping compact storage with 2.1-sstables on disk make them unreadable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15897&quot;&gt;&lt;del&gt;CASSANDRA-15897&lt;/del&gt;&lt;/a&gt; make nodes share the sstables version they have in use. If a node is down, other nodes simply rely on the last information they got from that node, which should work pretty well in practice.&lt;/p&gt;</comment>
                            <comment id="17209600" author="edimitrova" created="Wed, 7 Oct 2020 14:52:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;, thanks a lot for reminding me of that one! Looks like I even commented on it but as I looked at that more than a month ago I totally forgot about it and that it will handle this...&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;But on the bright side, these are good news that this is already on its way. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;

&lt;p&gt;I will rebase and wrap up the code here for commit and submit a final CI run.&lt;/p&gt;

&lt;p&gt;Thanks both &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17209602" author="edimitrova" created="Wed, 7 Oct 2020 14:56:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;, please, ping me on the other ticket when you push the branch you mentioned and I will be happy to take a look and finish whatever is left there.&lt;/p&gt;</comment>
                            <comment id="17209615" author="brandon.williams" created="Wed, 7 Oct 2020 15:16:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;Gossip-based at the time, so Brandon Williams is not going to be happy&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It can definitely work, so that&apos;s fine.  You&apos;re just going to leave a scar in AppicationState to forever remind of us of your transgression. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Really though, it&apos;s fine, it&apos;s certainly a big enough hammer to get the job done.&lt;/p&gt;</comment>
                            <comment id="17209988" author="edimitrova" created="Thu, 8 Oct 2020 03:54:00 +0000"  >&lt;p&gt;Branches rebased and wrapped for final review.&lt;/p&gt;

&lt;p&gt;PRs as follow:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/pull/54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;| &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/pull/56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&#160;| &lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra-dtest/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtetsts&lt;/a&gt;&lt;br/&gt;
No PR for 3.11 as it is a merge from 3.0&lt;/p&gt;

&lt;p&gt;CI:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/388/workflows/c8714c4c-7b68-4d3a-a8b9-e0708d69b13b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JAVA8 &lt;/a&gt; | &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/388/workflows/885828f4-9f47-4f3e-91d0-65c110c0db7e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JAVA 11&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;testHaveVersion3Nodes - org.apache.cassandra.gms.GossiperTest&lt;/em&gt; -&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16148&quot; title=&quot;Test failures caused by merging CASSANDRA-15833&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16148&quot;&gt;&lt;del&gt;CASSANDRA-16148&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;test_alter_rf_and_run_read_repair - read_repair_test.TestReadRepair -&lt;/em&gt;&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16148&quot; title=&quot;Test failures caused by merging CASSANDRA-15833&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16148&quot;&gt;&lt;del&gt;CASSANDRA-16148&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;test_atomic_writes&lt;span class=&quot;error&quot;&gt;&amp;#91;blocking&amp;#93;&lt;/span&gt; - read_repair_test.TestReadRepairGuarantees -&lt;/em&gt; &#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16148&quot; title=&quot;Test failures caused by merging CASSANDRA-15833&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16148&quot;&gt;&lt;del&gt;CASSANDRA-16148&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;test_compression_cql_options - compression_test.TestCompression - not related but have to find/file a ticket; I will do it tomorrow&lt;/p&gt;

&lt;p&gt;test_multiple_ranges_repair - repair_tests.repair_test.TestRepair -&#160;not related but have to find/file a ticket; I will do it tomorrow&lt;/p&gt;

&lt;p&gt;corruptionCausesFailure - org.apache.cassandra.transport.frame.checksum.ChecksummingTransformerTest - &#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15313&quot; title=&quot;Fix flaky - ChecksummingTransformerTest - org.apache.cassandra.transport.frame.checksum.ChecksummingTransformerTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15313&quot;&gt;&lt;del&gt;CASSANDRA-15313&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17210230" author="adelapena" created="Thu, 8 Oct 2020 13:49:22 +0000"  >&lt;p&gt;Looks good to me, +1. I have just left a couple of trivial suggestions about duplicated CHANGES.txt entries and docstring properties. As for the specific test for the problem discussed above, since we are not going to wait for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15897&quot; title=&quot;Dropping compact storage with 2.1-sstables on disk make them unreadable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15897&quot;&gt;&lt;del&gt;CASSANDRA-15897&lt;/del&gt;&lt;/a&gt;, I would slightly prefer to leave it annotated with &lt;tt&gt;@pytest.mark.skip(reason=&apos;awaiting &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15897&quot; title=&quot;Dropping compact storage with 2.1-sstables on disk make them unreadable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15897&quot;&gt;&lt;del&gt;CASSANDRA-15897&lt;/del&gt;&lt;/a&gt;&apos;)&lt;/tt&gt; instead of just removing it, but we can easily re-add it in 15897.&lt;/p&gt;</comment>
                            <comment id="17210517" author="edimitrova" created="Thu, 8 Oct 2020 23:30:48 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I believe all your comments were addressed.&lt;/p&gt;

&lt;p&gt;I only didn&apos;t return the test as I noticed that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;&#160;created In-jvm test as part of his work for&#160; &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15897&quot; title=&quot;Dropping compact storage with 2.1-sstables on disk make them unreadable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15897&quot;&gt;&lt;del&gt;CASSANDRA-15897&lt;/del&gt;&lt;/a&gt;. &#160;&lt;/p&gt;

&lt;p&gt;My suggestion is to not add it back for now and continue that work in the other ticket. I am almost 99% sure we will utilize his test at the end.&lt;/p&gt;</comment>
                            <comment id="17211027" author="adelapena" created="Fri, 9 Oct 2020 14:10:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;My suggestion is to not add it back for now and continue that work in the other ticket. I am almost 99% sure we will utilize his test at the end.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Fine with me.&lt;/p&gt;

&lt;p&gt;Running a final round of CI upgrade tests before commit:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest-upgrade/6/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest-upgrade/7/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest-upgrade/8/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17212431" author="adelapena" created="Mon, 12 Oct 2020 14:41:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;&#160;there are a lot of failures the CI run of upgrade tests but I&apos;d say they are not related, do you agree? Are we ready to commit?&lt;/p&gt;</comment>
                            <comment id="17212710" author="edimitrova" created="Mon, 12 Oct 2020 22:29:01 +0000"  >&lt;p&gt;Thank you&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Indeed, these are the failures we already know about. I don&apos;t see the compact storage related tests in the list of failures. Also, I ran all tests several times locally. I believe the patch is ready for commit.&#160;&lt;/p&gt;</comment>
                            <comment id="17213187" author="adelapena" created="Tue, 13 Oct 2020 15:48:40 +0000"  >&lt;p&gt;Committed to cassandra-3.0 as &lt;a href=&quot;https://github.com/apache/cassandra/commit/0700dfa0bc26d0758df898101bb595d3ec8d7def&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;0700dfa0bc26d0758df898101bb595d3ec8d7def&lt;/a&gt; and merged up to &lt;a href=&quot;https://github.com/apache/cassandra/commit/45982f5617565f31e7d634ca9d1d2b6b55c3b775&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cassandra-3.11&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/cassandra/commit/d890b7a5f14108bf60fbd52f94eefb53aaab1e18&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Dtests committed as &lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/1c8e5bcd5040af279205cd69bb5276ed854540e6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1c8e5bcd5040af279205cd69bb5276ed854540e6&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13313024">CASSANDRA-15897</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13012075" name="Compact_storage_upgrade_tests.txt" size="5362" author="e.dimitrova" created="Thu, 24 Sep 2020 13:27:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[edimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hyeo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
        <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333891">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/0700dfa0bc26d0758df898101bb595d3ec8d7def&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/0700dfa0bc26d0758df898101bb595d3ec8d7def&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16063?focusedCommentId=17201519&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17201519&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-16063?focusedCommentId=17201519&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17201519&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>