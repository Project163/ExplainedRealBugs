<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:59:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10835] CqlInputFormat  creates too small splits for map Hadoop tasks</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10835</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;CqlInputFormat use number of rows in C* version &amp;lt; 2.2 to define split size&lt;br/&gt;
The default split size was 64K rows.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; DEFAULT_SPLIT_SIZE = 64 * 1024;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The doc:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;* You can also configure the number of rows per InputSplit with
 *   ConfigHelper.setInputSplitSize. The &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; split size is 64k rows.
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;New split algorithm assumes that SPLIT size is in bytes, so it creates really small map hadoop tasks by default (or with old configs).&lt;/p&gt;

&lt;p&gt;There two way to fix it:&lt;br/&gt;
1. Update the doc and increase default value to something like 16MB&lt;br/&gt;
2. Make the C* to be compatible with older version.&lt;/p&gt;

&lt;p&gt;I like the second options, as it will not surprise people who upgrade from old versions. I do not expect a lot of new user that will use Hadoop.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12920491">CASSANDRA-10835</key>
            <summary>CqlInputFormat  creates too small splits for map Hadoop tasks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="artem.aliev">Artem Aliev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Dec 2015 17:15:38 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:59 +0000</updated>
                            <resolved>Thu, 10 Dec 2015 17:44:50 +0000</resolved>
                                        <fixVersion>2.2.5</fixVersion>
                    <fixVersion>3.0.3</fixVersion>
                    <fixVersion>3.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15049020" author="artem.aliev" created="Wed, 9 Dec 2015 17:30:20 +0000"  >&lt;p&gt;Make C* to be compatible with older versions&lt;/p&gt;</comment>
                            <comment id="15049335" author="JIRAUSER308715" created="Wed, 9 Dec 2015 20:25:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;Make the C* to be compatible with older version.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;d go with that one.  Putting it back the way things used to be will cause the least confusion going forward, otherwise people with existing jobs are going to start seeing crazy stuff happening in them.&lt;/p&gt;

&lt;p&gt;If we want something defined in MB then we should make a new config option that has &quot;inMB&quot; in the name or something, and then document which one takes precedence.&lt;/p&gt;</comment>
                            <comment id="15049381" author="jmckenzie" created="Wed, 9 Dec 2015 21:07:52 +0000"  >&lt;p&gt;+1 to both revert and, if so inclined, add 2nd option w/params in MB.&lt;/p&gt;

&lt;p&gt;If we go with both, I think the new / MB-based param should supersede but be disabled by default.&lt;/p&gt;</comment>
                            <comment id="15050388" author="artem.aliev" created="Thu, 10 Dec 2015 09:05:03 +0000"  >&lt;p&gt;I like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt; idea. See new patches (v2) for 3.0 and 2.2 branches&lt;br/&gt;
MB-based param was added, if it is not set the old algorithm is used.&lt;/p&gt;</comment>
                            <comment id="15051324" author="jmckenzie" created="Thu, 10 Dec 2015 17:44:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=cassandra.git;a=commit;h=4f3e47bf9edbfefec2f85ecd915ac8fbbc81de8b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Committed&lt;/a&gt; and merged up.&lt;/p&gt;

&lt;p&gt;For reference, there were some formatting issues I tidied up on commit:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Unused imports in AbstractColumnFamilyInputFormat.java&lt;/li&gt;
	&lt;li&gt;Ternary operator formatting&lt;/li&gt;
	&lt;li&gt;JavaDoc comment consistency on ConfigHelper (some params missing, some verbiage)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15089456" author="vovodroid" created="Fri, 8 Jan 2016 16:29:09 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;in branch &lt;b&gt;3.0.2 commit SHA a5c731b5&lt;/b&gt; CHANGES.txt contains&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Merged from 2.2:
 * Fix regression on split size in CqlInputFormat (CASSANDRA-10835)
 * Better handling of SSL connection errors inter-node (CASSANDRA-10816)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but I don&apos;t see changes from cassandra-3.0.1-10835-2.txt in the branch nor in commit neither in current code. Did I miss something?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12776766" name="cassandra-2.2-10835-2.txt" size="6416" author="artem.aliev" created="Thu, 10 Dec 2015 09:05:03 +0000"/>
                            <attachment id="12776767" name="cassandra-3.0.1-10835-2.txt" size="5829" author="artem.aliev" created="Thu, 10 Dec 2015 09:05:03 +0000"/>
                            <attachment id="12776605" name="cassandra-3.0.1-10835.txt" size="2041" author="artem.aliev" created="Wed, 9 Dec 2015 17:30:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2po67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332983">2.2.0</customfieldvalue>
    <customfieldvalue id="12333891">3.0.0</customfieldvalue>
    <customfieldvalue id="12334152">3.0.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>joshuamckenzie</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[joshuamckenzie]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332983">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>