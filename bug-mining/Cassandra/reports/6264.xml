<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:27:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18658] Microbench tests fail on JDK11</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18658</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When I run&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant microbench -Dbenchmark.name=ReadWriteTest&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;using jdk8 on ds-trunk, it finishes successfully, but when I run it on jdk11 on ds-trunk, I get this error.&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.IllegalAccessException: access to &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; member failed: jdk.internal.ref.Cleaner.clean[Ljava.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;@5189c629/invokeVirtual, from org.apache.cassandra.io.util.FileUtils (unnamed module @6cbf4322)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We suspect that ant target does not use the jvmargs as other test targets do.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13543038">CASSANDRA-18658</key>
            <summary>Microbench tests fail on JDK11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marianne-manaog">Marianne Lyne Manaog</assignee>
                                    <reporter username="marianne-manaog">Marianne Lyne Manaog</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Jul 2023 16:03:36 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:59 +0000</updated>
                            <resolved>Mon, 17 Jul 2023 16:41:43 +0000</resolved>
                                        <fixVersion>4.0.12</fixVersion>
                    <fixVersion>4.1.3</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>CI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17742110" author="JIRAUSER297594" created="Tue, 11 Jul 2023 17:17:08 +0000"  >&lt;p&gt;I implemented a fix in &lt;a href=&quot;https://github.com/datastax/cassandra/pull/681&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this PR&lt;/a&gt; and attached evidence before and after the fix.&lt;/p&gt;</comment>
                            <comment id="17742111" author="brandon.williams" created="Tue, 11 Jul 2023 17:18:06 +0000"  >&lt;p&gt;LGTM and I don&apos;t think we need CI.  This PR is not against a branch we have but this is simple to cherry-pick on commit. +1&lt;/p&gt;</comment>
                            <comment id="17742125" author="edimitrova" created="Tue, 11 Jul 2023 18:03:47 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
This PR is not against a branch we have, but &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is simple to cherry-pick on commit.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That branch is on top of 4.0, not trunk, where many changes were made in build.xml lately, many around JDK and args.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marianne-manaog&quot; class=&quot;user-hover&quot; rel=&quot;marianne-manaog&quot;&gt;marianne-manaog&lt;/a&gt;, please create PR and test against OSS C* trunk? Also, I suggest adding the&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;jvmarg line=&lt;span class=&quot;code-quote&quot;&gt;&quot;${java17-jvmargs}&quot;&lt;/span&gt;/&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;too.&lt;/p&gt;

&lt;p&gt;Thank you in advance.&lt;/p&gt;

&lt;p&gt;Looking at build.xml, we might want to add also:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;jvmarg line=&lt;span class=&quot;code-quote&quot;&gt;&quot;${_std-test-jvmargs11}&quot;&lt;/span&gt; /&amp;gt;
&amp;lt;jvmarg line=&lt;span class=&quot;code-quote&quot;&gt;&quot;${_std-test-jvmargs17}&quot;&lt;/span&gt; /&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And, if we want it to still work with J8, J11, and J17, we might need to add at the end also&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;jvmarg line=&lt;span class=&quot;code-quote&quot;&gt;&quot;${test.jvm.args}&quot;&lt;/span&gt; /&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We should test the patch with all three JDKs at this point&lt;/p&gt;</comment>
                            <comment id="17742392" author="JIRAUSER297594" created="Wed, 12 Jul 2023 12:02:10 +0000"  >&lt;p&gt;Thank you for your reviews, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have addressed Ekaterina&apos;s comments on &lt;a href=&quot;https://github.com/apache/cassandra/pull/2483&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this PR&lt;/a&gt; and I have attached screenshots for each jdk before and after this fix.&lt;/p&gt;</comment>
                            <comment id="17742449" author="brandon.williams" created="Wed, 12 Jul 2023 14:43:14 +0000"  >&lt;p&gt;I checked j8, j11, j17.  +1&lt;/p&gt;</comment>
                            <comment id="17742905" author="edimitrova" created="Thu, 13 Jul 2023 17:47:29 +0000"  >&lt;p&gt;+1. I did not run the tests, but I saw the screenshots. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marianne-manaog&quot; class=&quot;user-hover&quot; rel=&quot;marianne-manaog&quot;&gt;marianne-manaog&lt;/a&gt;&#160;!&lt;/p&gt;</comment>
                            <comment id="17742908" author="edimitrova" created="Thu, 13 Jul 2023 17:48:28 +0000"  >&lt;p&gt;Oh wait, do we target only trunk? The ticket fixversion says also 4.0 and 4.1. Also, I think there we use different name for the arguments AKA different patch?&lt;/p&gt;</comment>
                            <comment id="17742912" author="brandon.williams" created="Thu, 13 Jul 2023 17:58:09 +0000"  >&lt;p&gt;I think you&apos;re right, we need this in 4.0 and 4.1 as well.&lt;/p&gt;</comment>
                            <comment id="17743194" author="brandon.williams" created="Fri, 14 Jul 2023 15:24:48 +0000"  >&lt;p&gt;For 4.0 and 4.1 we just need to blindly add the j11 jvmargs since they are defined conditionally.  &lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18658-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;, merged to &lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18658-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17743196" author="JIRAUSER297594" created="Fri, 14 Jul 2023 15:28:58 +0000"  >&lt;p&gt;For the 4.0 and 4.1 do they need to run all jdks (8, 11, 17)? I am doing 4.1 and jdk11 passed but not yet on jdk8 and jdk17 (build keeps failing).&#160;&lt;/p&gt;</comment>
                            <comment id="17743199" author="brandon.williams" created="Fri, 14 Jul 2023 15:35:22 +0000"  >&lt;p&gt;only 5.0 supports jdk17.  I tested 8 and 11 on them.&lt;/p&gt;</comment>
                            <comment id="17743319" author="JIRAUSER297594" created="Fri, 14 Jul 2023 23:04:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Here&lt;/a&gt; is the link to the PR for 4.0 and &lt;a href=&quot;https://github.com/apache/cassandra/pull/2491&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; for 4.1.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;cc&apos;ing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17743462" author="edimitrova" created="Sat, 15 Jul 2023 21:55:14 +0000"  >&lt;p&gt;+1, thank you for the fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marianne-manaog&quot; class=&quot;user-hover&quot; rel=&quot;marianne-manaog&quot;&gt;marianne-manaog&lt;/a&gt;&#160;!&lt;/p&gt;</comment>
                            <comment id="17743861" author="brandon.williams" created="Mon, 17 Jul 2023 16:06:42 +0000"  >&lt;p&gt;For 4.0 should we not also add &quot;test-jvmargs&quot;?  I can add that on commit if we agree.&lt;/p&gt;</comment>
                            <comment id="17743869" author="edimitrova" created="Mon, 17 Jul 2023 16:21:28 +0000"  >&lt;p&gt;Good catch; we absolutely should. I looked at the test-run target where those are missing, too... we should probably&#160;open a ticket to update that target, too (or create an argument which is a concatenation of all those and use it in all targets... but I guess we can do that only on trunk...)&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I can add that to the commit if we agree.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Please do; thanks in advance.&lt;/p&gt;</comment>
                            <comment id="17743884" author="brandon.williams" created="Mon, 17 Jul 2023 16:41:43 +0000"  >&lt;p&gt;Committed, thanks folks!&lt;/p&gt;</comment>
                            <comment id="17744143" author="JIRAUSER297594" created="Tue, 18 Jul 2023 09:44:39 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13061285" name="jdk11-fail.png" size="280778" author="marianne-manaog" created="Wed, 12 Jul 2023 12:02:55 +0000"/>
                            <attachment id="13061346" name="jdk11-pass-cass-4.0.png" size="294535" author="marianne-manaog" created="Fri, 14 Jul 2023 23:05:29 +0000"/>
                            <attachment id="13061347" name="jdk11-pass-cass-4.1.png" size="251804" author="marianne-manaog" created="Fri, 14 Jul 2023 23:05:29 +0000"/>
                            <attachment id="13061286" name="jdk11-pass.png" size="262244" author="marianne-manaog" created="Wed, 12 Jul 2023 12:02:55 +0000"/>
                            <attachment id="13061287" name="jdk17-fail.png" size="267339" author="marianne-manaog" created="Wed, 12 Jul 2023 12:02:55 +0000"/>
                            <attachment id="13061288" name="jdk17-pass.png" size="264812" author="marianne-manaog" created="Wed, 12 Jul 2023 12:02:55 +0000"/>
                            <attachment id="13061283" name="jdk8-fail.png" size="243446" author="marianne-manaog" created="Wed, 12 Jul 2023 12:02:55 +0000"/>
                            <attachment id="13061344" name="jdk8-pass-cass-4.0.png" size="279925" author="marianne-manaog" created="Fri, 14 Jul 2023 23:05:28 +0000"/>
                            <attachment id="13061345" name="jdk8-pass-cass-4.1.png" size="264900" author="marianne-manaog" created="Fri, 14 Jul 2023 23:05:28 +0000"/>
                            <attachment id="13061284" name="jdk8-pass.png" size="248421" author="marianne-manaog" created="Wed, 12 Jul 2023 12:02:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marianne-manaog]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12990" cascade-level="1"><![CDATA[Test Failure]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1j26g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
        <customfieldvalue><![CDATA[e.dimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348835">NA</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/a7bf85c4f363b8f34eaed33d3f04c6939a55f531&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/a7bf85c4f363b8f34eaed33d3f04c6939a55f531&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;check build&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>