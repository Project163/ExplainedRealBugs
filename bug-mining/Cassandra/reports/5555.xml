<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:18:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16288] Include test jars in dtest uber jar</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16288</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Add reflections and javassist jars to 4.0 (trunk) lib directory, since they&apos;re required for dtest uberjar.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13341621">CASSANDRA-16288</key>
            <summary>Include test jars in dtest uber jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ifesdjeen">Alex Petrov</assignee>
                                    <reporter username="ifesdjeen">Alex Petrov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Nov 2020 16:14:53 +0000</created>
                <updated>Thu, 19 Nov 2020 22:05:16 +0000</updated>
                            <resolved>Thu, 19 Nov 2020 22:05:16 +0000</resolved>
                                        <fixVersion>NA</fixVersion>
                                    <component>Test/dtest/java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17235573" author="ifesdjeen" created="Thu, 19 Nov 2020 16:22:23 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/ifesdjeen/cassandra/pull/new/CASSANDRA-16288-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17235659" author="dcapwell" created="Thu, 19 Nov 2020 18:54:41 +0000"  >&lt;p&gt;rather than add to libs, can we figure out why the uber jar isn&apos;t pulling in test dependencies properly?&lt;/p&gt;</comment>
                            <comment id="17235664" author="dcapwell" created="Thu, 19 Nov 2020 18:57:53 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;path id=&lt;span class=&quot;code-quote&quot;&gt;&quot;cassandra.classpath.test&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;file file=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.dir}/${&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt;.name}.jar&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;!-- we need the jar &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; tests and benchmarks (multi-version jar) --&amp;gt;
  &amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.lib}&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;**/*.jar&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;exclude name=&lt;span class=&quot;code-quote&quot;&gt;&quot;**/*-sources.jar&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;exclude name=&lt;span class=&quot;code-quote&quot;&gt;&quot;**/ant-*.jar&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/fileset&amp;gt;
  &amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.dir.lib}&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;**/*.jar&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;exclude name=&lt;span class=&quot;code-quote&quot;&gt;&quot;**/*-sources.jar&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;exclude name=&lt;span class=&quot;code-quote&quot;&gt;&quot;**/ant-*.jar&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/fileset&amp;gt;
&amp;lt;/path&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;vs&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;target name=&lt;span class=&quot;code-quote&quot;&gt;&quot;dtest-jar&quot;&lt;/span&gt; depends=&lt;span class=&quot;code-quote&quot;&gt;&quot;build-test, build&quot;&lt;/span&gt; description=&lt;span class=&quot;code-quote&quot;&gt;&quot;Create dtest-compatible jar, including all dependencies&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;jar jarfile=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.dir}/dtest-${base.version}.jar&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;zipgroupfileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.lib}&quot;&lt;/span&gt; includes=&lt;span class=&quot;code-quote&quot;&gt;&quot;*.jar&quot;&lt;/span&gt; excludes=&lt;span class=&quot;code-quote&quot;&gt;&quot;META-INF/*.SF&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.classes.main}&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${test.classes}&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${test.conf}&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/jar&amp;gt;
&amp;lt;/target&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looks like we are only adding the src jars not the test jars, can we include the test jars?&lt;/p&gt;</comment>
                            <comment id="17235667" author="dcapwell" created="Thu, 19 Nov 2020 19:02:31 +0000"  >&lt;p&gt;tested this patch&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/build.xml b/build.xml
index 58704ef656..94792f525d 100644
--- a/build.xml
+++ b/build.xml
@@ -2089,6 +2089,7 @@
   &amp;lt;target name=&lt;span class=&quot;code-quote&quot;&gt;&quot;dtest-jar&quot;&lt;/span&gt; depends=&lt;span class=&quot;code-quote&quot;&gt;&quot;build-test, build&quot;&lt;/span&gt; description=&lt;span class=&quot;code-quote&quot;&gt;&quot;Create dtest-compatible jar, including all dependencies&quot;&lt;/span&gt;&amp;gt;
       &amp;lt;jar jarfile=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.dir}/dtest-${base.version}.jar&quot;&lt;/span&gt;&amp;gt;
           &amp;lt;zipgroupfileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.lib}&quot;&lt;/span&gt; includes=&lt;span class=&quot;code-quote&quot;&gt;&quot;*.jar&quot;&lt;/span&gt; excludes=&lt;span class=&quot;code-quote&quot;&gt;&quot;META-INF/*.SF&quot;&lt;/span&gt;/&amp;gt;
+          &amp;lt;zipgroupfileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.dir.lib}/jars&quot;&lt;/span&gt; includes=&lt;span class=&quot;code-quote&quot;&gt;&quot;*.jar&quot;&lt;/span&gt; excludes=&lt;span class=&quot;code-quote&quot;&gt;&quot;META-INF/*.SF&quot;&lt;/span&gt;/&amp;gt;
           &amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${build.classes.main}&quot;&lt;/span&gt;/&amp;gt;
           &amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${test.classes}&quot;&lt;/span&gt;/&amp;gt;
           &amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${test.conf}&quot;&lt;/span&gt; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and got&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ jar -tf build/dtest-4.0-beta4.jar | grep Reflections
org/reflections/Reflections.class
org/reflections/ReflectionsException.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17235671" author="ifesdjeen" created="Thu, 19 Nov 2020 19:08:18 +0000"  >&lt;p&gt;Even better; +1, I think we should merge your suggested solution.&lt;/p&gt;</comment>
                            <comment id="17235704" author="dcapwell" created="Thu, 19 Nov 2020 19:46:03 +0000"  >&lt;p&gt;Starting commit&lt;/p&gt;

&lt;p&gt;CI Results (pending):&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Source&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Circle CI&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Jenkins&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/dcapwell/cassandra/tree/commit_remote_branch/CASSANDRA-16288-trunk-E7F2920C-4E5B-4B83-B252-63057FA88F0A&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/dcapwell/cassandra?branch=commit_remote_branch%2FCASSANDRA-16288-trunk-E7F2920C-4E5B-4B83-B252-63057FA88F0A&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/223/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17235731" author="dcapwell" created="Thu, 19 Nov 2020 20:24:20 +0000"  >&lt;p&gt;causes &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.cassandra.distributed.impl.IsolatedExecutor
	at java.net.URLClassLoader.findClass(URLClassLoader.java:382)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in upgrade tests, will look into it&lt;/p&gt;</comment>
                            <comment id="17235753" author="dcapwell" created="Thu, 19 Nov 2020 21:27:21 +0000"  >&lt;p&gt;there is a lot of jars in build/lib/jars and for some reason adding them causes the class to fail to load properly in the 4.0 class loader, I switched to only include the 2 jars &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; attempted to add to lib, this passed locally so pushed to trigger CI.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ifesdjeen]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="13660" cascade-level=""><![CDATA[Packaging]]></customfieldvalue>
                                <customfieldvalue key="13662" cascade-level="1"><![CDATA[Package Distribution]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0krew:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dcapwell]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348835">NA</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/2a135cad6d3e0e78aaeb60939161c951b262b2cc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/2a135cad6d3e0e78aaeb60939161c951b262b2cc&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;tested manually &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>