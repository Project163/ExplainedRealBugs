<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:13:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1030] fix contrib/word_count build in 0.7</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1030</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-44&quot; title=&quot;It is difficult to modify the set of ColumnFamliies in an existing cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-44&quot;&gt;&lt;del&gt;CASSANDRA-44&lt;/del&gt;&lt;/a&gt; broke word_count setup (see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1002&quot; title=&quot;Fat client example cannot find schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1002&quot;&gt;&lt;del&gt;CASSANDRA-1002&lt;/del&gt;&lt;/a&gt;) so &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-992&quot; title=&quot;fix contrib/word_count build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-992&quot;&gt;&lt;del&gt;CASSANDRA-992&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1029&quot; title=&quot;convert contrib/word_count to use thrift instead of fat client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1029&quot;&gt;&lt;del&gt;CASSANDRA-1029&lt;/del&gt;&lt;/a&gt; can&apos;t easily be applied to 0.7 as-is.  This ticket will port those to 0.7 and add schema setup.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12463154">CASSANDRA-1030</key>
            <summary>fix contrib/word_count build in 0.7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeromatron">Jeremy Hanna</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Apr 2010 21:38:53 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:24 +0000</updated>
                            <resolved>Thu, 6 May 2010 17:23:58 +0000</resolved>
                                        <fixVersion>0.7 beta 1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12862770" author="jeromatron" created="Fri, 30 Apr 2010 17:49:49 +0000"  >&lt;p&gt;Converted from using the fat client to using thrift rpc for the WordCountSetup.  Also fixed a few things that were amiss in the current hadoop stuff with @stuhood. Needs a patch for cassandra-1022 to be able to login on the wordcount itself.&lt;/p&gt;</comment>
                            <comment id="12863349" author="jbellis" created="Mon, 3 May 2010 13:50:32 +0000"  >&lt;p&gt;why do we still need the .yaml?&lt;/p&gt;</comment>
                            <comment id="12863351" author="gdusbabek" created="Mon, 3 May 2010 13:55:28 +0000"  >&lt;p&gt;I haven&apos;t reviewed the patch yet.&lt;/p&gt;</comment>
                            <comment id="12863362" author="johanoskarsson" created="Mon, 3 May 2010 14:30:56 +0000"  >&lt;p&gt;Had a quick look at but unfortunately the word count contrib does not compile for me with the patch applied. &lt;br/&gt;
The fix is trivial, but I can&apos;t seem to figure out the reason for changing the input format from SortedMap to a LinkedHashMap in the first place?&lt;/p&gt;</comment>
                            <comment id="12863373" author="jeromatron" created="Mon, 3 May 2010 15:19:32 +0000"  >&lt;p&gt;@johan: the reason why we changed from SortedMap to LinkedHashMap was that the TreeMap required a comparable object to instantiate (line 234 of ColumnFamilyRecordReader).  Stu suggested just changing it to the LHM so that it didn&apos;t require the comparable object.  I&apos;m wondering what it needed to compile - it had compiled fine for me.&lt;/p&gt;</comment>
                            <comment id="12863374" author="jeromatron" created="Mon, 3 May 2010 15:19:39 +0000"  >&lt;p&gt;@jonathan: I removed the need for the yaml file for the WordCountSetup class and tried to run it without it for the WordCount but it errored out.  I wasn&apos;t sure if that was just the way it had to be or if I could get rid of that.  I think this line (line 91) in WordCount needs to be updated to grab the dynamic mapping:&lt;/p&gt;

&lt;p&gt; this.columnName = context.getConfiguration().get(CONF_COLUMN_NAME);&lt;/p&gt;

&lt;p&gt;but I&apos;ll take another look.&lt;/p&gt;</comment>
                            <comment id="12863379" author="jeromatron" created="Mon, 3 May 2010 15:29:46 +0000"  >&lt;p&gt;I see the compilation problem after updating - it looks like the patch for cassandra-1022 has been committed.  That changes the args required for a thrift rpc client login.  I&apos;ll update the patch and see about getting rid of the dependency on the .yaml at the same time.&lt;/p&gt;</comment>
                            <comment id="12863383" author="jbellis" created="Mon, 3 May 2010 15:45:54 +0000"  >&lt;p&gt;&quot;context&quot; is the hadoop job context, nothing to do w/ our yaml.&lt;/p&gt;</comment>
                            <comment id="12863385" author="jeromatron" created="Mon, 3 May 2010 15:55:51 +0000"  >&lt;p&gt;@johan: sorry - not because it requires a comparator, but that LinkedHashMap maintains the insertion order.  That was the reason.&lt;/p&gt;

&lt;p&gt;@jonathan: right - sorry, yeah.  Was going to look at it and that was the first thing I skimmed that looked promising, but you&apos;re right.  Looking at it though.&lt;/p&gt;</comment>
                            <comment id="12863410" author="jeromatron" created="Mon, 3 May 2010 17:15:38 +0000"  >&lt;p&gt;@jonathan - I asked Johan about the error when the cassandra.yaml file is not present.  He said it looked like it&apos;s required because it gets the host address from the seed that&apos;s in the configuration file.  That&apos;s in the org.cassandra.hadoop... code - ColumnFamilyInputFormat line 196 for example.  Would you rather the host be configured by the client itself and remove the dependency on cassandra.yaml?&lt;/p&gt;</comment>
                            <comment id="12863467" author="jeromatron" created="Mon, 3 May 2010 18:48:13 +0000"  >&lt;p&gt;Updated the patch with compilation fix from cassandra-1022 changes. Also updated ColumnFamilyInputFormat to use LinkedHashMap in addition to the other places where SortedMap had been used.&lt;/p&gt;

&lt;p&gt;Waiting to find out if it would be good to have the client provide the host address or if we should still depend on cassandra.yaml for the seed to get to that.&lt;/p&gt;</comment>
                            <comment id="12863517" author="jbellis" created="Mon, 3 May 2010 21:17:03 +0000"  >&lt;p&gt;It looks like the main reason we use DatabaseDescriptor is to get comparator information so we can throw SortedMaps around.&lt;/p&gt;

&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1047&quot; title=&quot;Get hadoop ColumnFamily metadata from describe_keyspace instead of config file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1047&quot;&gt;&lt;del&gt;CASSANDRA-1047&lt;/del&gt;&lt;/a&gt; to clean this up.&lt;/p&gt;</comment>
                            <comment id="12863990" author="jeromatron" created="Tue, 4 May 2010 20:58:56 +0000"  >&lt;p&gt;Updated to make sure everything works in the wordcount - dynamically finds the comparator based on describing the keyspace itself.&lt;/p&gt;</comment>
                            <comment id="12864715" author="johanoskarsson" created="Thu, 6 May 2010 09:50:48 +0000"  >&lt;p&gt;The patch looks good, but I get unexpected output. In the setup code we insert just one &quot;word1&quot; in the text1 column. When the word count runs it finds two instances of &quot;word1&quot; in the text1 column. This could be due to other changes in trunk, but worth verifying it is not this patch.&lt;/p&gt;</comment>
                            <comment id="12864823" author="johanoskarsson" created="Thu, 6 May 2010 16:38:22 +0000"  >&lt;p&gt;The problem with the output is most likely this one &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1042&quot; title=&quot;ColumnFamilyRecordReader returns duplicate rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1042&quot;&gt;&lt;del&gt;CASSANDRA-1042&lt;/del&gt;&lt;/a&gt;, so will commit this patch as is&lt;/p&gt;</comment>
                            <comment id="12864834" author="jeromatron" created="Thu, 6 May 2010 17:02:06 +0000"  >&lt;p&gt;yeah - it looks like the output is the same on 0.6.0&apos;s word count as the trunk cassandra-1030 patch output.  so it would seem to be something external that is causing odd output - hopefully cassandra-1042 will fix that.&lt;/p&gt;</comment>
                            <comment id="12864846" author="johanoskarsson" created="Thu, 6 May 2010 17:23:58 +0000"  >&lt;p&gt;Committed to trunk. Thanks Jeremy!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12443632" name="1030.patch" size="37019" author="jeromatron" created="Tue, 4 May 2010 20:58:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jeromatron]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19965</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g2kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91847</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>