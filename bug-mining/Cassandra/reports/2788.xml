<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:44:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7112] ava.lang.ClassCastException: org.apache.cassandra.db.composites.CompoundComposite cannot be cast to org.apache.cassandra.db.composites.CellName</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7112</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This may be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6738&quot; title=&quot;java.lang.ClassCastException: org.apache.cassandra.db.composites.CompoundComposite cannot be cast to org.apache.cassandra.db.composites.CellName&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6738&quot;&gt;&lt;del&gt;CASSANDRA-6738&lt;/del&gt;&lt;/a&gt;, although the stacktraces show a pretty different path:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR 23:13:17 Error occurred during processing of message.
java.lang.ClassCastException: org.apache.cassandra.db.composites.CompoundComposite cannot be cast to org.apache.cassandra.db.composites.CellName
	at org.apache.cassandra.db.composites.AbstractCellNameType.cellFromByteBuffer(AbstractCellNameType.java:170) ~[main/:na]
	at org.apache.cassandra.thrift.ThriftValidation.validateColumnData(ThriftValidation.java:442) ~[main/:na]
	at org.apache.cassandra.thrift.ThriftValidation.validateColumnOrSuperColumn(ThriftValidation.java:318) ~[main/:na]
	at org.apache.cassandra.thrift.ThriftValidation.validateMutation(ThriftValidation.java:385) ~[main/:na]
	at org.apache.cassandra.thrift.CassandraServer.createMutationList(CassandraServer.java:849) ~[main/:na]
	at org.apache.cassandra.thrift.CassandraServer.batch_mutate(CassandraServer.java:964) ~[main/:na]
	at org.apache.cassandra.thrift.Cassandra$Processor$batch_mutate.getResult(Cassandra.java:3922) ~[thrift/:na]
	at org.apache.cassandra.thrift.Cassandra$Processor$batch_mutate.getResult(Cassandra.java:3906) ~[thrift/:na]
	at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39) ~[libthrift-0.9.1.jar:0.9.1]
	at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39) ~[libthrift-0.9.1.jar:0.9.1]
	at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:201) ~[main/:na]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_40]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_40]
	at java.lang.Thread.run(Thread.java:724) [na:1.7.0_40]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To reproduce, you can run this pycassa test:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;python setup.py nosetests -w tests/test_autopacking.py:TestComposites.test_static_composite_get_partial_composite
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The comparator is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CompositeType(LongType, IntegerType, ReversedType(TimeUUIDType),  LexicalUUIDType, AsciiType, UTF8Type, BytesType)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The insert that triggers the error only uses the first two components of the comparator:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cf.insert(&apos;key3&apos;, {(123123, 1): &apos;val&apos;})
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12711330">CASSANDRA-7112</key>
            <summary>ava.lang.ClassCastException: org.apache.cassandra.db.composites.CompoundComposite cannot be cast to org.apache.cassandra.db.composites.CellName</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="thobbs">Tom Hobbs</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Apr 2014 23:24:50 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:47 +0000</updated>
                            <resolved>Mon, 5 May 2014 07:31:53 +0000</resolved>
                                        <fixVersion>2.1 rc1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13984953" author="thobbs" created="Tue, 29 Apr 2014 23:27:22 +0000"  >&lt;p&gt;This also seems to be triggered by some of pycassa&apos;s super column family tests, e.g:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;python2.7 setup.py nosetests -w tests/test_columnfamily.py:TestSuperColumnFamily
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13984960" author="thobbs" created="Tue, 29 Apr 2014 23:33:17 +0000"  >&lt;p&gt;Besides that explicit error, several other super column tests are failing in interesting in different ways:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR: test_get_count_super_column (tests.test_columnfamily.TestSuperColumnFamily)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;/home/thobbs/pycassa/tests/test_columnfamily.py&quot;, line 572, in test_get_count_super_column
    assert_equal(scf.get_count(key, super_column=&apos;1&apos;, column_start=&apos;sub3&apos;),  1)
...
InvalidRequestException: InvalidRequestException(why=&apos;Not enough bytes&apos;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Other tests get bad column counts or are missing columns in results.  These might share the same cause, so I&apos;ll keep everything in this ticket for now.&lt;/p&gt;</comment>
                            <comment id="13987533" author="slebresne" created="Fri, 2 May 2014 09:21:58 +0000"  >&lt;p&gt;Attaching simple fix for the ClassCastException. As said on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-681&quot; title=&quot;Error deleting files during bootstrap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-681&quot;&gt;&lt;del&gt;CASSANDRA-681&lt;/del&gt;&lt;/a&gt;, this is an oversight of the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6738&quot; title=&quot;java.lang.ClassCastException: org.apache.cassandra.db.composites.CompoundComposite cannot be cast to org.apache.cassandra.db.composites.CellName&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6738&quot;&gt;&lt;del&gt;CASSANDRA-6738&lt;/del&gt;&lt;/a&gt; really.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to look at the super columns error later today. If it&apos;s a trivial fix, I&apos;ll just attach it here and we can make this ticket a &quot;Fix pycassa autopacking test&quot; ticket. If it&apos;s more complicated and takes longer to track it down, I&apos;ll span another ticket.&lt;/p&gt;</comment>
                            <comment id="13987599" author="slebresne" created="Fri, 2 May 2014 11:13:27 +0000"  >&lt;p&gt;Ok, the super columns problems are not complicated but they are relatively unrelated so I&apos;ve created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7138&quot; title=&quot;Thrift super columns filter conversion is broken on 2.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7138&quot;&gt;&lt;del&gt;CASSANDRA-7138&lt;/del&gt;&lt;/a&gt;. Patch here is ready for review.&lt;/p&gt;</comment>
                            <comment id="13988173" author="thobbs" created="Fri, 2 May 2014 20:15:28 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13989331" author="slebresne" created="Mon, 5 May 2014 07:31:53 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12743503">CASSANDRA-7990</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12643019" name="0002-CompoundDenseCellNameType-fix.txt" size="1605" author="slebresne" created="Fri, 2 May 2014 09:21:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v48f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326275">2.1 beta1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>