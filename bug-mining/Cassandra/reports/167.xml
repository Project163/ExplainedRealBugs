<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:11:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-385] intellibootstrap</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-385</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;ideally bootstrap mode should determine its new position on the ring by examining the Load of the existing nodes in the cluster.  (currently Load is just disk space used but making this pluggable is another ticket.)  having found the highest-load-node-that-is-not-participating-in-bootstrap, it should ask that node for a Token which would move half the keys over to the new node.&lt;/p&gt;

&lt;p&gt;This is easily computed since we have a periodic sampling of keys in memory of all the keys on disk, and even SSTable.getIndexedKeys that merges all such keys.  So pick the midpoint, and turn it into a token (these are decorated keys so that is always possible).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12433531">CASSANDRA-385</key>
            <summary>intellibootstrap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Aug 2009 03:59:47 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:34 +0000</updated>
                            <resolved>Wed, 7 Oct 2009 16:24:27 +0000</resolved>
                                        <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12745305" author="eweaver" created="Thu, 20 Aug 2009 04:38:14 +0000"  >&lt;p&gt;this would be super...would obviate the need for fancy LB for quite a while, at least for us.&lt;/p&gt;</comment>
                            <comment id="12759287" author="jbellis" created="Thu, 24 Sep 2009 22:19:25 +0000"  >&lt;p&gt;06&lt;br/&gt;
    get token on bootstrap that gives us half of the keys from the most heavily-loaded node.&lt;br/&gt;
    the &quot;splits&quot; list should also be useful for #342.&lt;/p&gt;

&lt;p&gt;05&lt;br/&gt;
    add getLoadMap jmx method; add load info to nodeprobe ring&lt;/p&gt;

&lt;p&gt;04&lt;br/&gt;
    use Strings instead of Endpoints in jmx methods. merge cluster info into ring.&lt;/p&gt;

&lt;p&gt;03&lt;br/&gt;
    move javadoc into mbean.  inline methods where wrapping is not necessary to satisfy Demeter&lt;/p&gt;

&lt;p&gt;02&lt;br/&gt;
    make LoadInfo a double instead of going from long -&amp;gt; string -&amp;gt; LoadInfo -&amp;gt; int&lt;/p&gt;

&lt;p&gt;01&lt;br/&gt;
    clean up loadinfo and SLB&lt;/p&gt;</comment>
                            <comment id="12762215" author="jbellis" created="Mon, 5 Oct 2009 15:36:16 +0000"  >&lt;p&gt;rebased&lt;/p&gt;</comment>
                            <comment id="12762274" author="sandeep_tata" created="Mon, 5 Oct 2009 17:14:11 +0000"  >&lt;p&gt;I get a build error. Perhaps a missing patch file in the set?&lt;/p&gt;

&lt;p&gt;build-project:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; apache-cassandra-incubating: /home/stata/cassandra/build.xml&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 246 source files to /home/stata/cassandra/build/classes&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /home/stata/cassandra/src/java/org/apache/cassandra/service/StorageService.java:1177: cannot find symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; symbol  : method undecorateKey(java.lang.String)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; location: interface org.apache.cassandra.dht.IPartitioner&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;             String key = partitioner_.undecorateKey(decoratedKeys.get(index));&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                      ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Note: Some input files use or override a deprecated API.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Note: Recompile with -Xlint:deprecation for details.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Note: Some input files use unchecked or unsafe operations.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Note: Recompile with -Xlint:unchecked for details.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 1 error&lt;/p&gt;</comment>
                            <comment id="12762291" author="jbellis" created="Mon, 5 Oct 2009 18:26:54 +0000"  >&lt;p&gt;oops.  rebased better. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12762810" author="urandom" created="Tue, 6 Oct 2009 23:01:24 +0000"  >&lt;p&gt;This looks good to me, but I do have one question/concern.&lt;/p&gt;

&lt;p&gt;Introduced in 0006-get-token-on-bootstrap-that-gives-us-half-of-the-keys.txt, when a node bootstraps and hasn&apos;t been assigned a token, it selects one via StorageService.getBootstrapTokenFrom which uses Thrift to retrieve it as a property. &lt;/p&gt;

&lt;p&gt;My concern is that this is the first time we&apos;ve used Thrift for anything that wasn&apos;t client oriented. Do we want to start now, or does it make sense to preserve that separation?&lt;/p&gt;

&lt;p&gt;If nothing else, sticking with this approach will mean that work is needed to improve how  the Thrift service is bound to interfaces, (currently configured via ThriftAddress), because there is only one option that is guaranteed safe with this patch applied (0.0.0.0).&lt;/p&gt;</comment>
                            <comment id="12762814" author="jbellis" created="Tue, 6 Oct 2009 23:38:13 +0000"  >&lt;p&gt;there&apos;s a couple motivations there:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;i believe this same method call will be a good fit for Hadoop asking for input splits, so it will still be client-facing as well.  the convention is safe, or will be &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;RPC is a better fit for this than messagingservice&apos;s callback-oriented approach, since we do want to block the bootstrap until getting an answer&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;how bad is the thriftAddress pain going to be?&lt;/p&gt;</comment>
                            <comment id="12763102" author="jbellis" created="Wed, 7 Oct 2009 15:53:01 +0000"  >&lt;p&gt;08&lt;br/&gt;
    rename getMessagingInstance -&amp;gt; instance; r/m unused methods from FBUtiltities&lt;/p&gt;

&lt;p&gt;07&lt;br/&gt;
    switch to messagingservice to get bootstrap token&lt;/p&gt;

&lt;p&gt;(will squash this into 06 for commit, but it&apos;s probably easy to review as a separate patch)&lt;/p&gt;</comment>
                            <comment id="12763107" author="urandom" created="Wed, 7 Oct 2009 16:12:29 +0000"  >&lt;p&gt;Looks good to me. +1&lt;/p&gt;</comment>
                            <comment id="12763110" author="jbellis" created="Wed, 7 Oct 2009 16:24:27 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="12763471" author="hudson" created="Thu, 8 Oct 2009 12:35:14 +0000"  >&lt;p&gt;Integrated in Cassandra #221 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/221/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/221/&lt;/a&gt;)&lt;br/&gt;
    rename getMessagingInstance -&amp;gt; instance; r/m unused methods from FBUtiltities&lt;br/&gt;
patch by jbellis; reviewed by Eric Evans for &lt;br/&gt;
get token on bootstrap that gives us half of the keys from the most heavily-loaded node. (the &quot;splits&quot; approach should also be useful for #342; adding it to Thrift is trivial)&lt;br/&gt;
patch by jbellis; reviewed by Eric Evans for &lt;br/&gt;
add getLoadMap jmx method; add load info to nodeprobe ring&lt;br/&gt;
patch by jbellis; reviewed by Eric Evans for &lt;br/&gt;
use Strings instead of Endpoints in jmx methods. merge cluster info into ring.&lt;br/&gt;
patch by jbellis; reviewed by Eric Evans for &lt;br/&gt;
move javadoc into mbean.  inline methods where wrapping is not necessary to satisfy Demeter&lt;br/&gt;
patch by jbellis; reviewed by Eric Evans for &lt;br/&gt;
make LoadInfo a double instead of going from long -&amp;gt; string -&amp;gt; LoadInfo -&amp;gt; int&lt;br/&gt;
patch by jbellis; reviewed by Eric Evans for &lt;br/&gt;
clean up loadinfo and SLB&lt;br/&gt;
patch by jbellis; reviewed by Eric Evans for &lt;/p&gt;</comment>
                            <comment id="12764446" author="hudson" created="Sun, 11 Oct 2009 12:35:11 +0000"  >&lt;p&gt;Integrated in Cassandra #224 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/224/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/224/&lt;/a&gt;)&lt;br/&gt;
    add AutoBootstrap config option&lt;br/&gt;
patch by jbellis.  reviewed by goffinet for &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12421532" name="0007-switch-to-messagingservice-to-get-bootstrap-token.patch" size="7532" author="jbellis" created="Wed, 7 Oct 2009 15:52:05 +0000"/>
                            <attachment id="12421534" name="0008-rename-getMessagingInstance-instance-r-m-unused.patch" size="41742" author="jbellis" created="Wed, 7 Oct 2009 15:52:16 +0000"/>
                            <attachment id="12421310" name="ASF.LICENSE.NOT.GRANTED--0001-CASSANDRA-385-clean-up-loadinfo-and-SLB.txt" size="5134" author="jbellis" created="Mon, 5 Oct 2009 18:26:39 +0000"/>
                            <attachment id="12421311" name="ASF.LICENSE.NOT.GRANTED--0002-make-LoadInfo-a-double-instead-of-going-from-long-s.txt" size="12628" author="jbellis" created="Mon, 5 Oct 2009 18:26:39 +0000"/>
                            <attachment id="12421312" name="ASF.LICENSE.NOT.GRANTED--0003-move-javadoc-into-mbean.-inline-methods-where-wrappin.txt" size="8598" author="jbellis" created="Mon, 5 Oct 2009 18:26:39 +0000"/>
                            <attachment id="12421313" name="ASF.LICENSE.NOT.GRANTED--0004-use-Strings-instead-of-Endpoints-in-jmx-methods.-merge.txt" size="13054" author="jbellis" created="Mon, 5 Oct 2009 18:26:39 +0000"/>
                            <attachment id="12421314" name="ASF.LICENSE.NOT.GRANTED--0005-add-getLoadMap-jmx-method-add-load-info-to-nodeprobe.txt" size="6287" author="jbellis" created="Mon, 5 Oct 2009 18:26:39 +0000"/>
                            <attachment id="12421315" name="ASF.LICENSE.NOT.GRANTED--0006-get-token-on-bootstrap-that-gives-us-half-of-the-keys.txt" size="18103" author="jbellis" created="Mon, 5 Oct 2009 18:26:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fylz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91205</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>