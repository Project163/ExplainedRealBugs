<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:12:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14936] Anticompaction should throw exceptions on errors, not just log them</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14936</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Anticompaction currently catches any exceptions and just logs them instead of rethrowing, this can cause us to overstream and leave sstables unrepaired.&lt;/p&gt;

&lt;p&gt;This was made more likely to happen with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14397&quot; title=&quot;Stop compactions quicker when compacting wide partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14397&quot;&gt;&lt;del&gt;CASSANDRA-14397&lt;/del&gt;&lt;/a&gt; (before that anticompactions could not be stopped at all).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13204474">CASSANDRA-14936</key>
            <summary>Anticompaction should throw exceptions on errors, not just log them</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="marcuse">Marcus Eriksson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Dec 2018 13:06:11 +0000</created>
                <updated>Fri, 15 May 2020 08:06:08 +0000</updated>
                            <resolved>Wed, 19 Dec 2018 17:52:33 +0000</resolved>
                                        <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Local/Compaction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16721424" author="krummas" created="Fri, 14 Dec 2018 13:51:22 +0000"  >&lt;p&gt;patch: &lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/14936&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/14936&lt;/a&gt;&lt;br/&gt;
tests: &lt;a href=&quot;https://circleci.com/workflow-run/bf69001c-756b-4c43-a754-652066dca07f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://circleci.com/workflow-run/bf69001c-756b-4c43-a754-652066dca07f&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note that this also makes anticompactions unstoppable again to make sure that starting a conflicting AC fails by timing out when trying to cancel compactions. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14935&quot; title=&quot;PendingAntiCompaction should be more judicious in the compactions it cancels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14935&quot;&gt;&lt;del&gt;CASSANDRA-14935&lt;/del&gt;&lt;/a&gt; will improve this behaviour by failing immediately if any conflicting AC is active and make them stoppable again.&lt;/p&gt;</comment>
                            <comment id="16721438" author="krummas" created="Fri, 14 Dec 2018 14:03:27 +0000"  >&lt;p&gt;cancelling patch - we need to abort any non-finished transactions as well&lt;/p&gt;</comment>
                            <comment id="16721496" author="krummas" created="Fri, 14 Dec 2018 15:02:16 +0000"  >&lt;p&gt;nope, missed that the transaction is closed &lt;a href=&quot;https://github.com/apache/cassandra/blob/a41b861fa4d4acfbcce13dd62b1e8f48be22f8ed/src/java/org/apache/cassandra/db/compaction/CompactionManager.java#L751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;pushed a byteman test which makes sure we don&apos;t have any compacting sstables after a failed AC&lt;/p&gt;</comment>
                            <comment id="16723464" author="bdeggleston" created="Mon, 17 Dec 2018 23:25:21 +0000"  >&lt;p&gt;This addresses this ticket fine, but it seems like there&apos;s some stuff related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14935&quot; title=&quot;PendingAntiCompaction should be more judicious in the compactions it cancels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14935&quot;&gt;&lt;del&gt;CASSANDRA-14935&lt;/del&gt;&lt;/a&gt; in here as well. Could you put that in a separate branch?&lt;/p&gt;</comment>
                            <comment id="16723776" author="krummas" created="Tue, 18 Dec 2018 07:28:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;there&apos;s some stuff related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14935&quot; title=&quot;PendingAntiCompaction should be more judicious in the compactions it cancels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14935&quot;&gt;&lt;del&gt;CASSANDRA-14935&lt;/del&gt;&lt;/a&gt; in here as well&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Do you mean making anticompaction unstoppable? I added that to avoid cancelling ongoing anticompactions until we have &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14935&quot; title=&quot;PendingAntiCompaction should be more judicious in the compactions it cancels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14935&quot;&gt;&lt;del&gt;CASSANDRA-14935&lt;/del&gt;&lt;/a&gt; finished, it might be unnecessary since we should fix 14935 soon anyway, so I could remove those parts&lt;/p&gt;</comment>
                            <comment id="16724180" author="bdeggleston" created="Tue, 18 Dec 2018 15:50:20 +0000"  >&lt;p&gt;Ah ok I guess that part is complete. +1 then&lt;/p&gt;</comment>
                            <comment id="16725072" author="krummas" created="Wed, 19 Dec 2018 14:55:52 +0000"  >&lt;p&gt;while fixing this up for commit I realised that we would be running the PendingAntiCompactionTests twice with the Byteman tests I added&lt;/p&gt;

&lt;p&gt;tiny refactor: &lt;a href=&quot;https://github.com/krummas/cassandra/commit/87c87a6a5554cfc82bc4fd10ea1d6dc5e67a20b2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commit/87c87a6a5554cfc82bc4fd10ea1d6dc5e67a20b2&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://circleci.com/workflow-run/7e383aaf-e96a-42d2-bbf9-866ced074df7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://circleci.com/workflow-run/7e383aaf-e96a-42d2-bbf9-866ced074df7&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdeggleston&quot; class=&quot;user-hover&quot; rel=&quot;bdeggleston&quot;&gt;bdeggleston&lt;/a&gt; could you just sanity check that before I commit?&lt;/p&gt;</comment>
                            <comment id="16725146" author="bdeggleston" created="Wed, 19 Dec 2018 16:14:13 +0000"  >&lt;p&gt;looks good to me&lt;/p&gt;</comment>
                            <comment id="16725229" author="krummas" created="Wed, 19 Dec 2018 17:52:33 +0000"  >&lt;p&gt;and committed as &lt;tt&gt;0a79f9f5c970dcb8265814cd5dc361eb2d4bec6b&lt;/tt&gt;, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12986" cascade-level="1"><![CDATA[Recoverable Corruption / Loss]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12966"><![CDATA[Challenging]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12977"><![CDATA[Adhoc Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01iyw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>bdeggleston</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bdeggleston]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>