<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:34:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-20664] Endless loop on reading commitlogs when it should ignore replay errors</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-20664</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Hi,&lt;br/&gt;
We&apos;re using Cassandra 4.1.8 and specify the option &lt;em&gt;-Dcassandra.commitlog.ignorereplayerrors=true&lt;/em&gt;, however we see an endless loop on starting Cassandra when there are corrupt commit log files found.&lt;/p&gt;

&lt;p&gt;The stacktrace which is printed over and over again is:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO &#160;[main] 2025-05-19 19:25:22,658 UTC CommitLogReader.java:257 - Finished reading /data/cassandra/commitlog/CommitLog-7-1745459535901.log
INFO &#160;[main] 2025-05-19 19:25:23,614 UTC CommitLogReader.java:257 - Finished reading /data/cassandra/commitlog/CommitLog-7-1745459535902.log
ERROR [main] 2025-05-19 19:25:24,572 UTC CommitLogReplayer.java:501 - Ignoring commit log replay error
org.apache.cassandra.db.commitlog.CommitLogReadHandler$CommitLogReadException: Mutation checksum failure at 60807439 in Next section at 60745241 in CommitLog-7-1745459535903.log
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readSection(CommitLogReader.java:387)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readCommitLogSegment(CommitLogReader.java:244)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readCommitLogSegment(CommitLogReader.java:147)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReplayer.replayFiles(CommitLogReplayer.java:200)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLog.recoverFiles(CommitLog.java:223)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLog.recoverSegmentsOnDisk(CommitLog.java:204)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:353)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:744)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:878)
ERROR [main] 2025-05-19 19:25:24,572 UTC CommitLogReplayer.java:501 - Ignoring commit log replay error
org.apache.cassandra.db.commitlog.CommitLogReadHandler$CommitLogReadException: Mutation size checksum failure at 60838538 in Next section at 60745241 in CommitLog-7-1745459535903.log
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readSection(CommitLogReader.java:356)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readCommitLogSegment(CommitLogReader.java:244)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readCommitLogSegment(CommitLogReader.java:147)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReplayer.replayFiles(CommitLogReplayer.java:200)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLog.recoverFiles(CommitLog.java:223)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLog.recoverSegmentsOnDisk(CommitLog.java:204)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:353)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:744)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:878)
ERROR [main] 2025-05-19 19:25:24,573 UTC CommitLogReplayer.java:501 - Ignoring commit log replay error
org.apache.cassandra.db.commitlog.CommitLogReadHandler$CommitLogReadException: Encountered bad header at position 60865611 of commit log /data/cassandra/commitlog/CommitLog-7-1745459535903.log, with invalid CRC. The end of segment marker should be zero.
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogSegmentReader$SegmentIterator.computeNext(CommitLogSegmentReader.java:127)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogSegmentReader$SegmentIterator.computeNext(CommitLogSegmentReader.java:98)
&#160; &#160; at com.google.common.collect.AbstractIterator.tryToComputeNext(AbstractIterator.java:141)
&#160; &#160; at com.google.common.collect.AbstractIterator.hasNext(AbstractIterator.java:136)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readCommitLogSegment(CommitLogReader.java:233)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readCommitLogSegment(CommitLogReader.java:147)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReplayer.replayFiles(CommitLogReplayer.java:200)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLog.recoverFiles(CommitLog.java:223)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLog.recoverSegmentsOnDisk(CommitLog.java:204)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:353)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:744)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:878)
ERROR [main] 2025-05-19 19:25:24,573 UTC CommitLogReplayer.java:501 - Ignoring commit log replay error
org.apache.cassandra.db.commitlog.CommitLogReadHandler$CommitLogReadException: Encountered bad header at position 60865611 of commit log /data/cassandra/commitlog/CommitLog-7-1745459535903.log, with invalid CRC. The end of segment marker should be zero.
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogSegmentReader$SegmentIterator.computeNext(CommitLogSegmentReader.java:127)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogSegmentReader$SegmentIterator.computeNext(CommitLogSegmentReader.java:98)
&#160; &#160; at com.google.common.collect.AbstractIterator.tryToComputeNext(AbstractIterator.java:141)
&#160; &#160; at com.google.common.collect.AbstractIterator.hasNext(AbstractIterator.java:136)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readCommitLogSegment(CommitLogReader.java:233)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReader.readCommitLogSegment(CommitLogReader.java:147)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLogReplayer.replayFiles(CommitLogReplayer.java:200)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLog.recoverFiles(CommitLog.java:223)
&#160; &#160; at org.apache.cassandra.db.commitlog.CommitLog.recoverSegmentsOnDisk(CommitLog.java:204)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:353)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:744)
&#160; &#160; at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:878)
ERROR [main] 2025-05-19 19:25:24,573 UTC CommitLogReplayer.java:501 - Ignoring commit log replay error &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This prevents the Cassandra startup on this node and it writes 50 MB to the &lt;em&gt;system.log&lt;/em&gt; in about 2 seconds.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13618651">CASSANDRA-20664</key>
            <summary>Endless loop on reading commitlogs when it should ignore replay errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dnk">Dmitry Konstantinov</assignee>
                                    <reporter username="christophschnepf">Christoph Schnepf</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 May 2025 12:18:42 +0000</created>
                <updated>Thu, 31 Jul 2025 09:36:46 +0000</updated>
                            <resolved>Thu, 31 Jul 2025 09:31:01 +0000</resolved>
                                        <fixVersion>4.1.10</fixVersion>
                    <fixVersion>5.0.5</fixVersion>
                    <fixVersion>5.1</fixVersion>
                                    <component>Local/Commit Log</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="13200">3h 40m</timespent>
                                <comments>
                            <comment id="17952841" author="dnk" created="Tue, 20 May 2025 12:26:50 +0000"  >&lt;p&gt;I have faced this issue as well, my coworker has a patch for it, I will ask him to share it to review and merge ...&lt;/p&gt;</comment>
                            <comment id="17955625" author="JIRAUSER306570" created="Mon, 2 Jun 2025 09:29:20 +0000"  >&lt;p&gt;Good to hear that, thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dnk&quot; class=&quot;user-hover&quot; rel=&quot;dnk&quot;&gt;dnk&lt;/a&gt; ! Please keep me posted.&lt;/p&gt;</comment>
                            <comment id="17983446" author="JIRAUSER309871" created="Thu, 19 Jun 2025 06:13:55 +0000"  >&lt;p&gt;Hi team,&lt;br/&gt;
I&apos;ve started work on this ticket. Local dev environment is ready, branch &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-20664&quot; title=&quot;Endless loop on reading commitlogs when it should ignore replay errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-20664&quot;&gt;&lt;del&gt;CASSANDRA-20664&lt;/del&gt;&lt;/a&gt;-dev&lt;/tt&gt; created, and Ant build initiated.&#160;&lt;/p&gt;</comment>
                            <comment id="17984971" author="JIRAUSER309871" created="Fri, 20 Jun 2025 13:42:58 +0000"  >&lt;p&gt;After testing and validating the latest Cassandra run using `./bin/cassandra -f`, I can confirm that the previously encountered issue with infinite commitlog replay and stuck startup is no longer occurring.&lt;/p&gt;

&lt;p&gt;The logs indicate that all components are functioning normally:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Commitlog segments are being read and flushed without error.&lt;/li&gt;
	&lt;li&gt;Memtable flushes and SSTable compactions are executing as expected.&lt;/li&gt;
	&lt;li&gt;Schema changes (CREATE KEYSPACE and CREATE TABLE) are being successfully applied and committed.&lt;/li&gt;
	&lt;li&gt;No unexpected loops, warnings, or stack traces are observed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Hence, the issue appears to be resolved. I will continue to monitor further executions to ensure consistency, but as of now, Cassandra is running stable on the latest configuration.&lt;/p&gt;</comment>
                            <comment id="17985238" author="JIRAUSER306570" created="Mon, 23 Jun 2025 06:48:31 +0000"  >&lt;p&gt;Thanks for the analysis. I guess you tested trunk? Was there a bigger change? Can we fix this for Cassandra 4.x as well please?&lt;/p&gt;</comment>
                            <comment id="17985669" author="JIRAUSER309871" created="Mon, 23 Jun 2025 16:34:55 +0000"  >&lt;p&gt;I&#8217;ve completed the verification using a custom build from the latest code base with the applied fix:&lt;br/&gt;
1.Cassandra starts cleanly without encountering the infinite commit log replay loop or startup issues.&lt;br/&gt;
2.Verified connectivity via cqlsh (connected to 5.1-SNAPSHOT), executed schema creation and data insertion, and performed a clean restart.&lt;br/&gt;
3.Logs indicate normal startup, with no errors or unexpected behaviour.&lt;/p&gt;

&lt;p&gt;Conclusion: The issue appears to be fully resolved.&lt;/p&gt;

&lt;p&gt;I will now raise a pull request with the fix against the trunk branch and proceed to get it merged. Once done, I&#8217;ll prepare a back port for the 4.1 branch as well.&lt;/p&gt;</comment>
                            <comment id="17985703" author="JIRAUSER309871" created="Mon, 23 Jun 2025 19:31:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=christophschnepf&quot; class=&quot;user-hover&quot; rel=&quot;christophschnepf&quot;&gt;christophschnepf&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I&apos;ve opened a PR to fix the issue described in this ticket:&lt;/p&gt;

&lt;p&gt;&#128279; PR: &lt;a href=&quot;https://github.com/apache/cassandra/pull/4207&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4207&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Summary of the fix:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Handled replay errors in `CommitLogReadHandler.java` to prevent infinite loops on unreadable commit log entries.&lt;/li&gt;
	&lt;li&gt;Updated `CommitLogReader.java` to integrate improved error handling at a higher level.&lt;/li&gt;
	&lt;li&gt;Verified the fix by building Cassandra locally and confirming the issue no longer occurs.&lt;/li&gt;
	&lt;li&gt;Committed clean changes from a dedicated feature branch (`&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-20664&quot; title=&quot;Endless loop on reading commitlogs when it should ignore replay errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-20664&quot;&gt;&lt;del&gt;CASSANDRA-20664&lt;/del&gt;&lt;/a&gt;-fix`).&lt;/li&gt;
	&lt;li&gt;Ready to backport to 4.x branches after review and merge.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Kindly review the PR when convenient. Happy to address any feedback.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17986335" author="JIRAUSER309871" created="Thu, 26 Jun 2025 11:58:48 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=christophschnepf&quot; class=&quot;user-hover&quot; rel=&quot;christophschnepf&quot;&gt;christophschnepf&lt;/a&gt;&lt;br/&gt;
The development work for this ticket is now complete from my end. The issue of the endless loop during commit log replay has been resolved.&lt;br/&gt;
All relevant changes have been pushed, and PR #4207 is updated with the fix and corresponding tests.&lt;/p&gt;

&lt;p&gt;Kindly review the PR at your convenience and let me know if any further updates are needed.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="17986914" author="JIRAUSER306570" created="Mon, 30 Jun 2025 12:40:14 +0000"  >&lt;p&gt;Thank you for your work on this topic and the fast fix. Unfortunately I do not know the Cassandra code well enough for a meaningful review. However, I see that there are already comments and questions on the PR.&lt;/p&gt;</comment>
                            <comment id="17986972" author="JIRAUSER309871" created="Mon, 30 Jun 2025 14:48:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=christophschnepf&quot; class=&quot;user-hover&quot; rel=&quot;christophschnepf&quot;&gt;christophschnepf&lt;/a&gt;&lt;br/&gt;
Thank you for taking the time to check the PR. I understand if you&apos;re not deeply familiar with the Cassandra code, I appreciate your note.&lt;br/&gt;
I&apos;ve seen the comments and questions on the PR and will review and address them accordingly. Please let me know if there&apos;s anything specific you&apos;d like me to clarify or update.&lt;/p&gt;</comment>
                            <comment id="17986983" author="JIRAUSER309871" created="Mon, 30 Jun 2025 15:14:26 +0000"  >&lt;p&gt;Implemented the fix for the issue described in this ticket, Verified the fix locally by building Cassandra and performing relevant tests , everything is working as expected,Please review the patch and share feedback. I&#8217;m open to suggestions or changes.&lt;/p&gt;</comment>
                            <comment id="17987154" author="JIRAUSER309871" created="Tue, 1 Jul 2025 09:14:30 +0000"  >&lt;p&gt;The PR has been successfully merged by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt;n. Marking this as Resolved from my side. Please let me know if anything else is needed.&lt;/p&gt;</comment>
                            <comment id="17987158" author="JIRAUSER306570" created="Tue, 1 Jul 2025 09:27:04 +0000"  >&lt;p&gt;To me this looks like the additional PR (&lt;a href=&quot;https://github.com/apache/cassandra/pull/4170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4170&lt;/a&gt;) was deleted, and not merged.&lt;/p&gt;

&lt;p&gt;And I guess we would need &lt;a href=&quot;https://github.com/apache/cassandra/pull/4207?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4207?&lt;/a&gt; &lt;br/&gt;
Plus: would this be backported to 4.1 then as well?&lt;/p&gt;</comment>
                            <comment id="17987163" author="JIRAUSER309871" created="Tue, 1 Jul 2025 09:41:00 +0000"  >&lt;p&gt;You&apos;re right ,PR #4170 was closed and not merged.&lt;br/&gt;
I have created a new PR with the updated fix: &lt;a href=&quot;https://github.com/apache/cassandra/pull/4207?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4207?&lt;/a&gt;,&lt;br/&gt;
Once this is merged into trunk, I&#8217;ll be happy to prepare a clean backport for the 4.1 branch as well.&lt;/p&gt;</comment>
                            <comment id="18010360" author="dnk" created="Mon, 28 Jul 2025 11:13:23 +0000"  >&lt;p&gt;MR for 4.1: &lt;a href=&quot;https://github.com/apache/cassandra/pull/4276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4276&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="18010981" author="dnk" created="Wed, 30 Jul 2025 17:23:58 +0000"  >&lt;p&gt;Test results for 4.1: &lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch-before-5/2690/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch-before-5/2690/testReport/&lt;/a&gt;&lt;br/&gt;
there is only one failure: dtest-upgrade.upgrade_tests.cql_tests.TestCQLNodes3RF3_Upgrade_indev_4_0_x_To_indev_4_1_x.test_multi_list_set (from dtest-upgrade_jdk1_python_cython_x86_64)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
failed on teardown with &lt;span class=&quot;code-quote&quot;&gt;&quot;Unexpected error found in node logs (see stdout &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; full details). Errors: [[node1] &lt;span class=&quot;code-quote&quot;&gt;&apos;WARN  [epollEventLoopGroup-5-3] 2025-07-30 12:17:26,748 PreV5Handlers.java:261 - Unknown exception in client networking\nio.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe&apos;&lt;/span&gt;, [node1] &lt;span class=&quot;code-quote&quot;&gt;&apos;WARN  [epollEventLoopGroup-5-3] 2025-07-30 12:17:26,751 PreV5Handlers.java:261 - Unknown exception in client networking\nio.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe&apos;&lt;/span&gt;]&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which looks like env issue and not related to the changes.&lt;/p&gt;</comment>
                            <comment id="18011052" author="dnk" created="Wed, 30 Jul 2025 22:18:30 +0000"  >&lt;p&gt;MRs:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;4.1:&#160;&lt;a href=&quot;https://github.com/apache/cassandra/pull/4276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4276&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;5.0: &lt;a href=&quot;https://github.com/apache/cassandra/pull/4284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4284&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;trunk: &lt;a href=&quot;https://github.com/apache/cassandra/pull/4283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4283&lt;/a&gt;&#160;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;CI results for 5.0:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13077800/13077800_5.0_ci_summary.htm&quot; title=&quot;5.0_ci_summary.htm attached to CASSANDRA-20664&quot;&gt;5.0_ci_summary.htm&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13077799/13077799_5.0_results_details.tar.xz&quot; title=&quot;5.0_results_details.tar.xz attached to CASSANDRA-20664&quot;&gt;5.0_results_details.tar.xz&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;1 flaky test: transport.AuthMessageSizeLimitTest&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;CI results for trunk:&#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13077802/13077802_trunk_ci_summary.htm&quot; title=&quot;trunk_ci_summary.htm attached to CASSANDRA-20664&quot;&gt;trunk_ci_summary.htm&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13077801/13077801_trunk_results_details.tar.xz&quot; title=&quot;trunk_results_details.tar.xz attached to CASSANDRA-20664&quot;&gt;trunk_results_details.tar.xz&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;4 failures, all of the were observed before and not related to the changed logic&lt;br/&gt;
Tests / test jdk11 16/16 / org.apache.cassandra.db.virtual.AccordDebugKeyspaceTest.patchJournalVestigialTest-_jdk11_x86_64&lt;br/&gt;
Tests / test-latest jdk11 16/16 / org.apache.cassandra.db.virtual.AccordDebugKeyspaceTest.patchJournalVestigialTest-latest_jdk11_x86_64&lt;br/&gt;
Tests / jvm-dtest jdk11 3/12 / org.apache.cassandra.distributed.test.SSTableLoaderEncryptionOptionsTest.bulkLoaderSuccessfullyStreamsOverSslWithDeprecatedSslStoragePort-_jdk11_x86_64&lt;br/&gt;
Tests / simulator-dtest jdk11 / org.apache.cassandra.simulator.test.AccordHarrySimulationTest.test-_jdk11_x86_64&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="18011057" author="dnk" created="Wed, 30 Jul 2025 22:46:56 +0000"  >&lt;p&gt;so, tests are good for commit, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt; could you please take a look at:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;5.0:&#160;&lt;a href=&quot;https://github.com/apache/cassandra/pull/4284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4284&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;trunk:&#160;&lt;a href=&quot;https://github.com/apache/cassandra/pull/4283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/4283&lt;/a&gt;&#160;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;the logic there is the same, the only difference compared to 4.1 is the way how commitlog.ignorereplayerrorssystem property is configured via WithProperties&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13077800" name="5.0_ci_summary.htm" size="1016966" author="dnk" created="Wed, 30 Jul 2025 21:51:11 +0000"/>
                            <attachment id="13077799" name="5.0_results_details.tar.xz" size="1350528" author="dnk" created="Wed, 30 Jul 2025 21:51:11 +0000"/>
                            <attachment id="13077802" name="trunk_ci_summary.htm" size="1291788" author="dnk" created="Wed, 30 Jul 2025 22:42:27 +0000"/>
                            <attachment id="13077801" name="trunk_results_details.tar.xz" size="1876260" author="dnk" created="Wed, 30 Jul 2025 22:42:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dnk]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12983" cascade-level=""><![CDATA[Availability]]></customfieldvalue>
                                <customfieldvalue key="12994" cascade-level="1"><![CDATA[Unavailable]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1vxzk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12352689">4.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/b4210acd3da4d51620a22b20a50ac3bd189cfe42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/b4210acd3da4d51620a22b20a50ac3bd189cfe42&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Unit tests are added to test the case when sync blocks are corrupted&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>