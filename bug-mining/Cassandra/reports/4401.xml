<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:04:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12312] Restore JVM metric export for metric reporters</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12312</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;JVM instrumentation as part of dropwizard metrics has been moved to a separate &lt;tt&gt;metrics-jvm&lt;/tt&gt; artifact in metrics-v3.0. After &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5657&quot; title=&quot;Upgrade metrics lib and remove deprecated metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5657&quot;&gt;&lt;del&gt;CASSANDRA-5657&lt;/del&gt;&lt;/a&gt;, no jvm related metrics will be exported to any reporter configured via &lt;tt&gt;metrics-reporter-config&lt;/tt&gt;, as this isn&apos;t part of &lt;tt&gt;metrics-core&lt;/tt&gt; anymore. As memory and GC stats are essential for monitoring Cassandra, this turns out to be a blocker for us for upgrading to 2.2.&lt;/p&gt;

&lt;p&gt;I&apos;ve included a patch that would add the now separate &lt;tt&gt;metrics-jvm&lt;/tt&gt; package and enables some of the provided metrics on startup in case a metrics reporter is used (&lt;tt&gt;-Dcassandra.metricsReporterConfigFile&lt;/tt&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12992838">CASSANDRA-12312</key>
            <summary>Restore JVM metric export for metric reporters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spod">Stefan Podkowinski</assignee>
                                    <reporter username="spod">Stefan Podkowinski</reporter>
                        <labels>
                            <label>lhf</label>
                    </labels>
                <created>Wed, 27 Jul 2016 07:43:00 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:24 +0000</updated>
                            <resolved>Fri, 5 Aug 2016 15:56:26 +0000</resolved>
                                        <fixVersion>2.2.8</fixVersion>
                    <fixVersion>3.0.9</fixVersion>
                    <fixVersion>3.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15395221" author="spodxx@gmail.com" created="Wed, 27 Jul 2016 08:23:18 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;2.2&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12312-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12312-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12312-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12312-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12312-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12312-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12312-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12312-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12312-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15402358" author="tjake" created="Mon, 1 Aug 2016 16:29:32 +0000"  >&lt;p&gt;Looks great, would you mind adding the new metrics to the &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/doc/source/operating/metrics.rst&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;docs&lt;/a&gt;?&lt;/p&gt;
</comment>
                            <comment id="15405731" author="spodxx@gmail.com" created="Wed, 3 Aug 2016 11:08:52 +0000"  >&lt;p&gt;I&apos;ve now included documentation on the added metrics in the trunk patch. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tjake&quot; class=&quot;user-hover&quot; rel=&quot;tjake&quot;&gt;tjake&lt;/a&gt;, what do you think about including metrics on thread states based on &lt;a href=&quot;https://github.com/dropwizard/metrics/blob/3.1-maintenance/metrics-jvm/src/main/java/com/codahale/metrics/jvm/ThreadStatesGaugeSet.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ThreadStatesGaugeSet.java&lt;/a&gt;? I haven&apos;t included them so far as I&apos;m not really sure if it makes sense to report these numbers as part of a performance monitoring, except maybe the number of runnable threads. But I wonder if it&apos;s really worth to constantly poll these values and how expensive that would be. &lt;/p&gt;</comment>
                            <comment id="15406184" author="tjake" created="Wed, 3 Aug 2016 16:40:50 +0000"  >&lt;p&gt;Great thanks,  I&apos;ll commit this soon.&lt;/p&gt;</comment>
                            <comment id="15406188" author="tjake" created="Wed, 3 Aug 2016 16:41:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;what do you think about including metrics on thread states based on ThreadStatesGaugeSet.java?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this might be overkill since we can use jstack for the same.  It doesn&apos;t seem valuable to see all this info all the time.&lt;/p&gt;</comment>
                            <comment id="15409607" author="tjake" created="Fri, 5 Aug 2016 15:56:27 +0000"  >&lt;p&gt;Committed thank you!&lt;/p&gt;</comment>
                            <comment id="15416984" author="spodxx@gmail.com" created="Thu, 11 Aug 2016 10:15:06 +0000"  >&lt;p&gt;What happened to the metrics.rst update? I can&apos;t find it in the actual commit of yours.&lt;/p&gt;</comment>
                            <comment id="15417466" author="tjake" created="Thu, 11 Aug 2016 15:45:43 +0000"  >&lt;p&gt;It was added as part of the &lt;a href=&quot;https://github.com/apache/cassandra/commit/aab33f1170c8dd53935910cead3df0a1d3deb61a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.9 merge&lt;/a&gt; (since our docs are on 3.8+) &lt;/p&gt;</comment>
                            <comment id="15417664" author="spodxx@gmail.com" created="Thu, 11 Aug 2016 17:50:12 +0000"  >&lt;p&gt;I find it somehow confusing to see the commits for the code changes in each branch just as expected, but not for the documentation changes, which are now part of the merge commit. It&apos;s a bit unfortunate that the author information is lost in merge commits, so I&apos;m wondering what the correct way to contribute patches for the documentation would be to avoid this situation in the future. &lt;/p&gt;</comment>
                            <comment id="15417677" author="tjake" created="Thu, 11 Aug 2016 17:56:20 +0000"  >&lt;p&gt;I guess creating a separate ticket for docs would have been better.   But since this is 2.2 base patch and the docs are only on 3.x it made the merge tricky.&lt;/p&gt;

&lt;p&gt;In general we merge from lowest branch forward see &lt;a href=&quot;https://wiki.apache.org/cassandra/HowToContribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.apache.org/cassandra/HowToContribute&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12653470">CASSANDRA-5657</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12820388" name="12312-2.2.patch" size="55080" author="spod" created="Wed, 27 Jul 2016 08:20:55 +0000"/>
                            <attachment id="12820389" name="12312-3.0.patch" size="54369" author="spod" created="Wed, 27 Jul 2016 08:20:55 +0000"/>
                            <attachment id="12821812" name="12312-trunk.patch" size="58744" author="spod" created="Wed, 3 Aug 2016 11:01:20 +0000"/>
                            <attachment id="12820391" name="metrics-jvm-3.1.0.jar.asc" size="473" author="spod" created="Wed, 27 Jul 2016 08:20:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[spod]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31k0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tjake</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[tjake]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>