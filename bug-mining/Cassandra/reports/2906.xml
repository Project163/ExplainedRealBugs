<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:46:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7399] cqlsh: describe table shows wrong data type for CompositeType</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7399</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;tt&gt;DESCRIBE&lt;/tt&gt; for &lt;tt&gt;CompositeType&lt;/tt&gt; produces wrong output.&lt;/p&gt;

&lt;p&gt;Currently:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE TABLE compo.comp (
    id int PRIMARY KEY,
    comp &apos;org.apache.cassandra.db.marshal.CompositeType&apos;&amp;lt;int, text&amp;gt;
)...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Correct:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE TABLE compo.comp (
    id int PRIMARY KEY,
    comp &apos;org.apache.cassandra.db.marshal.CompositeType(Int32Type,UTF8Type)&apos;
)...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Means:&lt;br/&gt;
1. use normal brackets instead of &lt;tt&gt;&amp;lt;&amp;gt;&lt;/tt&gt;&lt;br/&gt;
1. use C* type names instead of CQL3 names&lt;br/&gt;
1. move types inside quoted&lt;/p&gt;</description>
                <environment></environment>
        <key id="12721287">CASSANDRA-7399</key>
            <summary>cqlsh: describe table shows wrong data type for CompositeType</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mishail">Mikhail Stepura</assignee>
                                    <reporter username="snazy">Robert Stupp</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Jun 2014 09:18:06 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:42 +0000</updated>
                            <resolved>Wed, 25 Jun 2014 14:57:27 +0000</resolved>
                                        <fixVersion>1.2.17</fixVersion>
                    <fixVersion>2.0.9</fixVersion>
                    <fixVersion>2.1 rc2</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14031818" author="snazy" created="Sun, 15 Jun 2014 09:20:17 +0000"  >&lt;p&gt;Same for &lt;tt&gt;DynamicCompositeType&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE TABLE compo.foo2 (
    id int PRIMARY KEY,
    comp &apos;org.apache.cassandra.db.marshal.DynamicCompositeType&apos;&amp;lt;&apos;a=&amp;gt;org.apache.cassandra.db.marshal.Int32Type&apos;, &apos;b=&amp;gt;org.apache.cassandra.db.marshal.UTF8Type&apos;&amp;gt;
)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should be:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE TABLE compo.foo2 (
    id int PRIMARY KEY,
    comp &apos;org.apache.cassandra.db.marshal.DynamicCompositeType(a=&amp;gt;org.apache.cassandra.db.marshal.Int32Type, b=&amp;gt;org.apache.cassandra.db.marshal.UTF8Type)&apos;
)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14038474" author="mishail" created="Fri, 20 Jun 2014 05:28:26 +0000"  >&lt;p&gt;The problem here is that CQL drivers (cassandra-dbapi2 for 1.2/2.0 and python-driver for 2.1) are trying to figure out a CQL-like representation for a Composite types, which probably doesn&apos;t make sense.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching monkey patches for both drivers to override that behavior and always return fully-qualified names for Composites.&lt;/p&gt;</comment>
                            <comment id="14038476" author="mishail" created="Fri, 20 Jun 2014 05:29:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt; could you please review?&lt;/p&gt;</comment>
                            <comment id="14039007" author="thobbs" created="Fri, 20 Jun 2014 16:39:53 +0000"  >&lt;p&gt;The 2.1 patch looks good.&lt;/p&gt;

&lt;p&gt;With the 1.2 patch, DynamicCompositeType can&apos;t be parsed (it doesn&apos;t like the &quot;=&amp;gt;&quot; bits).  I&apos;m not sure if we care enough about DynamicComposite type to fix this for 1.2 and 2.0, but if so, we need to patch the bundled cqltypes.py to change:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;casstype_scanner = re.Scanner((                                                   
    (r&lt;span class=&quot;code-quote&quot;&gt;&apos;[()]&apos;&lt;/span&gt;, lambda s, t: t),                                                    
    (r&lt;span class=&quot;code-quote&quot;&gt;&apos;[a-zA-Z0-9_.:]+&apos;&lt;/span&gt;, lambda s, t: t),                                         
    (r&lt;span class=&quot;code-quote&quot;&gt;&apos;[\s,]&apos;&lt;/span&gt;, None),                                     
))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;casstype_scanner = re.Scanner((                                                   
    (r&lt;span class=&quot;code-quote&quot;&gt;&apos;[()]&apos;&lt;/span&gt;, lambda s, t: t),                                                    
    (r&lt;span class=&quot;code-quote&quot;&gt;&apos;[a-zA-Z0-9_.:=&amp;gt;]+&apos;&lt;/span&gt;, lambda s, t: t),                                         
    (r&lt;span class=&quot;code-quote&quot;&gt;&apos;[\s,]&apos;&lt;/span&gt;, None),                                     
))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14040405" author="mishail" created="Mon, 23 Jun 2014 04:21:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt; even if we&apos;ll change the scanner, there is still no DynamicCompositeType in cassandra-dbapi2 driver (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6402&quot; title=&quot;cannot query using DynamicCompositeType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6402&quot;&gt;&lt;del&gt;CASSANDRA-6402&lt;/del&gt;&lt;/a&gt;)...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; WDYT? Should we add DynamicCompositeType support for cqlsh 1.2/2.0 ?&lt;/p&gt;</comment>
                            <comment id="14040432" author="iamaleksey" created="Mon, 23 Jun 2014 05:27:29 +0000"  >&lt;p&gt;Don&apos;t care much about DCT. +1 to not fixing it.&lt;/p&gt;</comment>
                            <comment id="14040875" author="slebresne" created="Mon, 23 Jun 2014 15:51:41 +0000"  >&lt;p&gt;I took the liberty to commit the 2.1 patch as I want to start a vote for rc2. Can I let you guys commit the 1.2 version and merge up?&lt;/p&gt;</comment>
                            <comment id="14042316" author="thobbs" created="Tue, 24 Jun 2014 16:19:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mishail&quot; class=&quot;user-hover&quot; rel=&quot;mishail&quot;&gt;mishail&lt;/a&gt; +1 to committing the current 1.2 patch, then.&lt;/p&gt;</comment>
                            <comment id="14043574" author="thobbs" created="Wed, 25 Jun 2014 14:57:27 +0000"  >&lt;p&gt;Committed the 1.2 patch as well so that we can release 1.2.17 and 2.0.9.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12680900">CASSANDRA-6402</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12651619" name="CASSANDRA-1.2-7399.patch" size="799" author="mishail" created="Fri, 20 Jun 2014 05:28:26 +0000"/>
                            <attachment id="12651620" name="CASSANDRA-2.1-7399.patch" size="980" author="mishail" created="Fri, 20 Jun 2014 05:28:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mishail]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399483</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wrr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326174">1.2.16</customfieldvalue>
    <customfieldvalue id="12326712">2.0.8</customfieldvalue>
    <customfieldvalue id="12326658">2.1 rc1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>