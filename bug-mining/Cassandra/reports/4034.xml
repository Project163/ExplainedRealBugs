<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:00:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10910] Materialized view remained rows</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10910</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I&apos;ve created a table and a materialized view.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; CREATE TABLE test (id text PRIMARY KEY, key text, value &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
&amp;gt; CREATE MATERIALIZED VIEW test_view AS SELECT * FROM test WHERE key IS NOT NULL PRIMARY KEY(key, id);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve put a value into the table:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; update test set key=&lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt;, value=1 where id=&lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;;
&amp;gt; select * from test; select * from test_view ;

 id | key | value
----+-----+-------
 id | key |     1

(1 rows)

 key | id | value
-----+----+-------
 key | id |     1

(1 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve updated the value without specified the key of the materialized view:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; update test set value=2 where id=&lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;;
&amp;gt; select * from test; select * from test_view ;

 id | key | value
----+-----+-------
 id | key |     2

(1 rows)

 key | id | value
-----+----+-------
 key | id |     2

(1 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It works as I think...&lt;/p&gt;

&lt;p&gt;...but I&apos;ve updated the key of the materialized view:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; update test set key=&lt;span class=&quot;code-quote&quot;&gt;&apos;newKey&apos;&lt;/span&gt; where id=&lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;;
&amp;gt; select * from test; select * from test_view ;

 id | key    | value
----+--------+-------
 id | newKey |     2

(1 rows)

 key    | id | value
--------+----+-------
    key | id |     2
 newKey | id |     2

(2 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...I&apos;ve updated the value of the row:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; update test set key=&lt;span class=&quot;code-quote&quot;&gt;&apos;newKey&apos;&lt;/span&gt;, value=3 where id=&lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;;
&amp;gt; select * from test; select * from test_view ;

 id | key    | value
----+--------+-------
 id | newKey |     3

(1 rows)

 key    | id | value
--------+----+-------
    key | id |     2
 newKey | id |     3

(2 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...I&apos;ve deleted the row by the id key:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; delete from test where id=&lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;;
&amp;gt; select * from test; select * from test_view ;

 id | key | value
----+-----+-------

(0 rows)

 key | id | value
-----+----+-------
 key | id |     2

(1 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is it a bug?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Cassandra 3.0.0&lt;/p&gt;</environment>
        <key id="12923414">CASSANDRA-10910</key>
            <summary>Materialized view remained rows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="carlyeks">Carl Yeksigian</assignee>
                                    <reporter username="gabor.auth">G&#225;bor Auth</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Dec 2015 12:40:09 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:46 +0000</updated>
                            <resolved>Fri, 19 Feb 2016 21:04:04 +0000</resolved>
                                        <fixVersion>3.0.3</fixVersion>
                    <fixVersion>3.3</fixVersion>
                                    <component>Feature/Materialized Views</component>
                    <component>Legacy/Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15066522" author="carlyeks" created="Mon, 21 Dec 2015 15:01:16 +0000"  >&lt;p&gt;I can reproduce this bug on a single machine, so it isn&apos;t a latent consistency issue.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to diagnose.&lt;/p&gt;</comment>
                            <comment id="15067716" author="gabor.auth" created="Tue, 22 Dec 2015 07:59:07 +0000"  >&lt;p&gt;Another test case about the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; create table test (id text primary key, key text, value &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
&amp;gt; create MATERIALIZED VIEW test_by_key as SELECT * from test where key is not &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; primary key (key, id);
&amp;gt; update test set key=&lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt;, value=1 where id=&lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;;
&amp;gt; select * from test; select * from test_by_key ;

 id | key | value
----+-----+-------
 id | key |     1

(1 rows)

 key | id | value
-----+----+-------
 key | id |     1

(1 rows)
&amp;gt; update test set value=2 where id=&lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;;
&amp;gt; select * from test; select * from test_by_key ;

 id | key | value
----+-----+-------
 id | key |     2

(1 rows)

 key | id | value
-----+----+-------
 key | id |     2

(1 rows)
&amp;gt; update test set key=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; where id=&lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;;
&amp;gt; select * from test; select * from test_by_key ;

 id | key  | value
----+------+-------
 id | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; |     2

(1 rows)

 key | id | value
-----+----+-------
     | id |     2
 key | id |     2

(2 rows)
&amp;gt; delete from test where id=&lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;;
&amp;gt; select * from test; select * from test_by_key ;

 id | key | value
----+-----+-------

(0 rows)

 key | id | value
-----+----+-------
     | id |     2
 key | id |     2

(2 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15076084" author="gabor.auth" created="Thu, 31 Dec 2015 18:56:37 +0000"  >&lt;p&gt;Any idea or workaround? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15081453" author="carlyeks" created="Mon, 4 Jan 2016 17:47:04 +0000"  >&lt;p&gt;It looks like this issue is because of problems we have with the timestamps that we are using for the view. We had been using the lowest value, so we would be generating a tombstone for a time before the &lt;tt&gt;key&lt;/tt&gt; value had been updated. This affected views which included multiple regular columns.&lt;/p&gt;

&lt;p&gt;I&apos;ve pushed a fix, and am currently running CI on it.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/carlyeks/cassandra/tree/ticket/10910/3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/carlyeks/cassandra/tree/ticket/10910/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10910-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10910-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10910-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10910-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15081484" author="tjake" created="Mon, 4 Jan 2016 18:00:34 +0000"  >&lt;p&gt;I&apos;m wondering how this will affect the shadowable tombstone logic.  Can you modify that dtest to include this update?&lt;/p&gt;</comment>
                            <comment id="15081690" author="carlyeks" created="Mon, 4 Jan 2016 20:01:31 +0000"  >&lt;p&gt;I pushed &lt;a href=&quot;https://github.com/carlyeks/cassandra-dtest/tree/10910&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a new dtest branch&lt;/a&gt; which includes a change to the shadowable tombstone that demonstrates this issue.&lt;/p&gt;</comment>
                            <comment id="15083192" author="tjake" created="Tue, 5 Jan 2016 15:05:53 +0000"  >&lt;p&gt;The test runs look good,  I&apos;m clear on the logic.&lt;/p&gt;

&lt;p&gt;I think this comment is wrong though &lt;a href=&quot;https://github.com/carlyeks/cassandra/commit/1058108ce8b3a37a60ad312e961687d65d2cc170#diff-599a621b60aab69c0e8946d523743215R304&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/carlyeks/cassandra/commit/1058108ce8b3a37a60ad312e961687d65d2cc170#diff-599a621b60aab69c0e8946d523743215R304&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It says timestamp should use&quot;max but you seem to be fetching the min.&lt;/p&gt;</comment>
                            <comment id="15083771" author="carlyeks" created="Tue, 5 Jan 2016 20:59:45 +0000"  >&lt;p&gt;Actually, the comment is right, but the ttl and deletion time&apos;s were using the wrong comparators. I&apos;ve pushed a commit which just changes some of the wording.&lt;/p&gt;

&lt;p&gt;When we write the column which is not part of the view&apos;s primary key, we use a timestamp which is further ahead than the view&apos;s primary key&apos;s timestamp as it copies the timestamp of the regular column, not the view&apos;s primary key. But, when we generate the timestamp for the tombstone, we currently take the min of the timestamp of the columns included in the view&apos;s primary key, which would not properly tombstone the value of the other regular column, as it will have that future timestamp. To fix that, we need to take the max timestamp in order to generate a tombstone which does cover that regular column&apos;s value.&lt;/p&gt;</comment>
                            <comment id="15085720" author="carlyeks" created="Wed, 6 Jan 2016 15:55:09 +0000"  >&lt;p&gt;I&apos;ve rerun the tests with the latest changes, and the runs look OK, with just some CI flapping.&lt;/p&gt;</comment>
                            <comment id="15085792" author="tjake" created="Wed, 6 Jan 2016 16:40:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15085836" author="carlyeks" created="Wed, 6 Jan 2016 17:01:39 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://git1-us-west.apache.org/repos/asf?p=cassandra.git;a=commit;h=70c08ece563731cd546d24541f225c888f4d02f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;70c08e&lt;/tt&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15092678" author="gabor.auth" created="Mon, 11 Jan 2016 21:07:55 +0000"  >&lt;p&gt;Thank you! What is the planned release date of the 3.0.3 version? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15154040" author="gabor.auth" created="Fri, 19 Feb 2016 10:15:08 +0000"  >&lt;p&gt;I&apos;ve upgraded to datastax-ddc-3.3.0 and... here is a materialized view:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; DESCRIBE MATERIALIZED VIEW unit_by_transport ;

CREATE MATERIALIZED VIEW unit_by_transport AS
    SELECT *
    FROM unit
    WHERE transportid IS NOT NULL AND type IS NOT NULL
    PRIMARY KEY (transportid, id)
    WITH CLUSTERING ORDER BY (id ASC)
    AND bloom_filter_fp_chance = 0.01
    AND caching = {&lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;ALL&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;}
    AND comment = &apos;&apos;
    AND compaction = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;max_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;32&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;min_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;}
    AND compression = {&lt;span class=&quot;code-quote&quot;&gt;&apos;chunk_length_in_kb&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;64&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.io.compress.LZ4Compressor&apos;&lt;/span&gt;}
    AND crc_check_chance = 1.0
    AND dclocal_read_repair_chance = 0.1
    AND default_time_to_live = 0
    AND gc_grace_seconds = 864000
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = &lt;span class=&quot;code-quote&quot;&gt;&apos;99PERCENTILE&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I cannot reproduce this but sometimes and somehow happened the same issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; SELECT transportid, id, type FROM unit_by_transport WHERE transportid=24f90d20-d61f-11e5-9d3c-8fc3ad6906e2 and id=99c05a70-d686-11e5-a169-97287061d5d1;

 transportid                          | id                                   | type
--------------------------------------+--------------------------------------+------
 24f90d20-d61f-11e5-9d3c-8fc3ad6906e2 | 99c05a70-d686-11e5-a169-97287061d5d1 | &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;

(1 rows)

&amp;gt; SELECT transportid, id, type FROM unit WHERE id=99c05a70-d686-11e5-a169-97287061d5d1;

 transportid | id | type
-------------+----+------

(0 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Any idea behind this behavior? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15154760" author="carlyeks" created="Fri, 19 Feb 2016 19:53:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gabor.auth&quot; class=&quot;user-hover&quot; rel=&quot;gabor.auth&quot;&gt;gabor.auth&lt;/a&gt;: what consistency level is this at? Can you do the same query at a higher CL, or repair the view and see whether the inconsistency persists?&lt;/p&gt;</comment>
                            <comment id="15154787" author="gabor.auth" created="Fri, 19 Feb 2016 20:05:52 +0000"  >&lt;p&gt;&quot;Consistency level set to ALL.&quot;&lt;/p&gt;

&lt;p&gt;It was the highest CL... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;How can I repair the materialized view? I&apos;ve started a full repair now:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[2016-02-19 20:03:45,096] Starting repair command #211, repairing keyspace test20160215 with repair options (parallelism: parallel, primary range: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, incremental: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, job threads: 1, ColumnFamilies: [], dataCenters: [], hosts: [], # of ranges: 216)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Finished:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; /home/cassandra/datastax-ddc-3.3.0/bin/nodetool repair -full test20160215
[...]
[2016-02-19 20:26:32,057] Repair command #1 finished in 4 minutes 46 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Same issue with ALL consistency level... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15154856" author="carlyeks" created="Fri, 19 Feb 2016 20:59:20 +0000"  >&lt;p&gt;Can you try tracing the query and post the result?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TRACING ON;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15154861" author="carlyeks" created="Fri, 19 Feb 2016 21:04:04 +0000"  >&lt;p&gt;Actually, since there has been a fix released for the more basic issue (this one isn&apos;t as easily reproducible), let&apos;s create a new ticket to track it.&lt;/p&gt;</comment>
                            <comment id="15154865" author="gabor.auth" created="Fri, 19 Feb 2016 21:07:50 +0000"  >&lt;p&gt;I cannot reproduce it from console.&lt;/p&gt;

&lt;p&gt;I&apos;m using the cluster through the Datastax Java Driver, the &quot;TRACING ON;&quot; is the rs.getExecutionInfo() or something else?&lt;/p&gt;</comment>
                            <comment id="15154872" author="gabor.auth" created="Fri, 19 Feb 2016 21:11:56 +0000"  >&lt;p&gt;Ok!  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11198&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-11198&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[carlyeks]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q5nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tjake</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[tjake]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>