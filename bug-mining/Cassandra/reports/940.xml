<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:21:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2649] work-around schema disagreements from cqlsh</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2649</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;It is handy to be able to put CQL statements in a flat-file and load them by redirecting to &lt;tt&gt;cqlsh&lt;/tt&gt; stdin, but this can fail on a cluster when executing statements that modify schema.&lt;/p&gt;

&lt;p&gt;The attached patch works around this problem by retrying up to 3 times, with a progressive delay after each attempt.  A better solution would probably be to compare schema versions, but this seems to work well enough, and is better than &lt;em&gt;not&lt;/em&gt; handling it at all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12507173">CASSANDRA-2649</key>
            <summary>work-around schema disagreements from cqlsh</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="urandom">Eric Evans</assignee>
                                    <reporter username="urandom">Eric Evans</reporter>
                        <labels>
                            <label>cql</label>
                    </labels>
                <created>Fri, 13 May 2011 20:16:50 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:59 +0000</updated>
                            <resolved>Tue, 7 Jun 2011 03:15:03 +0000</resolved>
                                        <fixVersion>0.8.0</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13037052" author="jbellis" created="Fri, 20 May 2011 20:05:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;A better solution would probably be to compare schema versions&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed.  Why not just do that?  describe_schema_versions makes it extremely easy.&lt;/p&gt;</comment>
                            <comment id="13037138" author="urandom" created="Fri, 20 May 2011 22:51:09 +0000"  >&lt;p&gt;Well, because this currently employs no use of the thrift RPC API, (so it would be much more invasive to implement).&lt;/p&gt;

&lt;p&gt;Also, after having some time to think about this, I&apos;m not sure it would be that much better.  You&apos;d still need to wait and retry between each disagreement.  The only advantage would be access to the actual versions for error reporting (and considering the nature of cqlsh, it&apos;s arguably not the right audience for that level of detail anyway).&lt;/p&gt;</comment>
                            <comment id="13037998" author="jbellis" created="Mon, 23 May 2011 15:43:01 +0000"  >&lt;p&gt;The right thing to do is wait for agreement after each schema change. Relying on integrityerror is broken since inserts will just fail.  using describe_schema_versions let&apos;s this be 100% correct instead of hoping you slept long enough before proceeding.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;this currently employs no use of the thrift RPC API&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;since cql is built on thrift, it wouldn&apos;t be difficult to use the thrift method until there is a &quot;native&quot; replacement.&lt;/p&gt;
</comment>
                            <comment id="13038187" author="jbellis" created="Mon, 23 May 2011 20:17:57 +0000"  >&lt;p&gt;Let&apos;s create a ticket to do this &quot;right&quot; for 0.8.1, but this patch is definitely a minimally inasive improvement on the existing multiple-schema-changes-are-guaranteed-to-hose-cqlsh status quo, so +1 for 0.8.0.&lt;/p&gt;</comment>
                            <comment id="13038237" author="hudson" created="Mon, 23 May 2011 21:18:23 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #129 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Cassandra-0.8/129/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/Cassandra-0.8/129/&lt;/a&gt;)&lt;br/&gt;
    work-around schema disagreements&lt;/p&gt;

&lt;p&gt;Patch by eevans; review by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2649&quot; title=&quot;work-around schema disagreements from cqlsh&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2649&quot;&gt;&lt;del&gt;CASSANDRA-2649&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;eevans : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1126736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1126736&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/drivers/py/cqlsh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12479162" name="ASF.LICENSE.NOT.GRANTED--v1-0001-CASSANDRA-2649-try-to-work-around-schema-disagreement-.txt" size="1160" author="urandom" created="Fri, 13 May 2011 20:17:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20752</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gcmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93476</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>