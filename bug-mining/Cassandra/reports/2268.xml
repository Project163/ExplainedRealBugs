<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:39:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5698] cqlsh should support collections in COPY FROM</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5698</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Concrete operation is as follows.&lt;br/&gt;
--------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;--------&lt;/b&gt;&lt;br/&gt;
(1)map type&apos;s export/import&lt;br/&gt;
&amp;lt;export&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@castor bin&amp;#93;&lt;/span&gt;# ./cqlsh&lt;br/&gt;
Connected to Test Cluster at localhost:9160.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;cqlsh 3.0.2 | Cassandra 1.2.5 | CQL spec 3.0.0 | Thrift protocol 19.36.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
Use HELP for help.&lt;br/&gt;
cqlsh&amp;gt; create keyspace maptestks with replication  = &lt;/p&gt;
{ &apos;class&apos; : &apos;SimpleStrategy&apos;, &apos;replication_factor&apos; : &apos;1&apos; }
&lt;p&gt;;&lt;br/&gt;
cqlsh&amp;gt; use maptestks;&lt;br/&gt;
cqlsh:maptestks&amp;gt; create table maptestcf (rowkey varchar PRIMARY KEY, targetmap map&amp;lt;varchar,varchar&amp;gt;);&lt;br/&gt;
cqlsh:maptestks&amp;gt; insert into maptestcf (rowkey, targetmap) values (&apos;rowkey&apos;,&lt;/p&gt;
{&apos;mapkey&apos;:&apos;mapvalue&apos;}
&lt;p&gt;);&lt;br/&gt;
cqlsh:maptestks&amp;gt; select * from maptestcf;&lt;/p&gt;

&lt;p&gt; rowkey | targetmap&lt;br/&gt;
-------&lt;del&gt;+&lt;/del&gt;-------------------&lt;br/&gt;
 rowkey | &lt;/p&gt;
{mapkey: mapvalue}
&lt;p&gt;cqlsh:maptestks&amp;gt;  copy maptestcf to &apos;maptestcf-20130619.txt&apos;;&lt;br/&gt;
1 rows exported in 0.008 seconds.&lt;br/&gt;
cqlsh:maptestks&amp;gt; exit;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@castor bin&amp;#93;&lt;/span&gt;# cat maptestcf-20130619.txt&lt;br/&gt;
rowkey,&lt;/p&gt;
{mapkey: mapvalue}
&lt;p&gt;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&amp;lt;------------------------(a)&lt;br/&gt;
&amp;lt;import&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@castor bin&amp;#93;&lt;/span&gt;# ./cqlsh&lt;br/&gt;
Connected to Test Cluster at localhost:9160.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;cqlsh 3.0.2 | Cassandra 1.2.5 | CQL spec 3.0.0 | Thrift protocol 19.36.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
Use HELP for help.&lt;br/&gt;
cqlsh&amp;gt; create keyspace mapimptestks with replication  = &lt;/p&gt;
{ &apos;class&apos; : &apos;SimpleStrategy&apos;, &apos;replication_factor&apos; : &apos;1&apos; }
&lt;p&gt;;&lt;br/&gt;
cqlsh&amp;gt; use mapimptestks;&lt;br/&gt;
cqlsh:mapimptestks&amp;gt; create table mapimptestcf (rowkey varchar PRIMARY KEY, targetmap map&amp;lt;varchar,varchar&amp;gt;);&lt;/p&gt;

&lt;p&gt;cqlsh:mapimptestks&amp;gt; copy mapimptestcf from &apos; maptestcf-20130619.txt &apos;;&lt;br/&gt;
Bad Request: line 1:83 no viable alternative at input &apos;}&apos;&lt;br/&gt;
Aborting import at record #0 (line 1). Previously-inserted values still present.&lt;br/&gt;
0 rows imported in 0.025 seconds.&lt;br/&gt;
--------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;--------&lt;/b&gt;&lt;br/&gt;
(2)list type&apos;s export/import&lt;br/&gt;
&amp;lt;export&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@castor bin&amp;#93;&lt;/span&gt;#./cqlsh&lt;br/&gt;
Connected to Test Cluster at localhost:9160.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;cqlsh 3.0.2 | Cassandra 1.2.5 | CQL spec 3.0.0 | Thrift protocol 19.36.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
Use HELP for help.&lt;br/&gt;
cqlsh&amp;gt; create keyspace listtestks with replication  = &lt;/p&gt;
{ &apos;class&apos; : &apos;SimpleStrategy&apos;, &apos;replication_factor&apos; : &apos;1&apos; }
&lt;p&gt;;&lt;br/&gt;
cqlsh&amp;gt; use listtestks;&lt;br/&gt;
cqlsh:listtestks&amp;gt; create table listtestcf (rowkey varchar PRIMARY KEY, value list&amp;lt;varchar&amp;gt;);&lt;br/&gt;
cqlsh:listtestks&amp;gt; insert into listtestcf (rowkey,value) values (&apos;rowkey&apos;,&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;value1&amp;#39;,&amp;#39;value2&amp;#39;&amp;#93;&lt;/span&gt;);&lt;br/&gt;
cqlsh:listtestks&amp;gt; select * from listtestcf;&lt;/p&gt;

&lt;p&gt; rowkey | value&lt;br/&gt;
-------&lt;del&gt;+&lt;/del&gt;-----------------&lt;br/&gt;
 rowkey | &lt;span class=&quot;error&quot;&gt;&amp;#91;value1, value2&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;cqlsh:listtestks&amp;gt; copy listtestcf to &apos;listtestcf-20130619.txt&apos;;&lt;br/&gt;
1 rows exported in 0.014 seconds.&lt;br/&gt;
cqlsh:listtestks&amp;gt; exit;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@castor bin&amp;#93;&lt;/span&gt;# cat listtestcf-20130619.txt&lt;br/&gt;
rowkey,&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;value1, value2&amp;#93;&lt;/span&gt;&quot;&lt;br/&gt;
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&amp;lt;------------------------(b)&lt;br/&gt;
&amp;lt;export&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@castor bin&amp;#93;&lt;/span&gt;# ./cqlsh&lt;br/&gt;
Connected to Test Cluster at localhost:9160.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;cqlsh 3.0.2 | Cassandra 1.2.5 | CQL spec 3.0.0 | Thrift protocol 19.36.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
Use HELP for help.&lt;br/&gt;
cqlsh&amp;gt; create keyspace listimptestks with replication  = &lt;/p&gt;
{ &apos;class&apos; : &apos;SimpleStrategy&apos;, &apos;replication_factor&apos; : &apos;1&apos; }
&lt;p&gt;;&lt;br/&gt;
cqlsh&amp;gt; use listimptestks;&lt;br/&gt;
cqlsh:listimptestks&amp;gt; create table listimptestcf (rowkey varchar PRIMARY KEY, value list&amp;lt;varchar&amp;gt;);&lt;br/&gt;
cqlsh:listimptestks&amp;gt; copy listimptestcf from &apos; listtestcf-20130619.txt &apos;;&lt;br/&gt;
Bad Request: line 1:79 no viable alternative at input &apos;]&apos;&lt;br/&gt;
Aborting import at record #0 (line 1). Previously-inserted values still present.&lt;br/&gt;
0 rows imported in 0.030 seconds.&lt;br/&gt;
--------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;--------&lt;/b&gt;&lt;br/&gt;
Reference: (correct, or error, in another dimension)&lt;/p&gt;

&lt;p&gt;Manually, I have rewritten the export file.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@castor bin&amp;#93;&lt;/span&gt;# cat nlisttestcf-20130619.txt&lt;br/&gt;
rowkey,&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;value1&amp;#39;,&amp;#39; value2&amp;#39;&amp;#93;&lt;/span&gt;&quot;&lt;/p&gt;

&lt;p&gt;....&lt;br/&gt;
cqlsh:listimptestks&amp;gt; copy listimptestcf from &apos;nlisttestcf-20130619.txt&apos;;&lt;br/&gt;
1 rows imported in 0.035 seconds.&lt;/p&gt;

&lt;p&gt;cqlsh:listimptestks&amp;gt; select * from implisttestcf;&lt;br/&gt;
 rowkey | value&lt;br/&gt;
-------&lt;del&gt;+&lt;/del&gt;-----------------&lt;br/&gt;
 rowkey | &lt;span class=&quot;error&quot;&gt;&amp;#91;value1, value2&amp;#93;&lt;/span&gt;&lt;br/&gt;
cqlsh:implisttestks&amp;gt; exit;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@castor bin&amp;#93;&lt;/span&gt;# cat nmaptestcf-20130619.txt&lt;br/&gt;
rowkey,&#8221;&lt;/p&gt;
{&apos;mapkey&apos;: &apos;mapvalue&apos;}
&lt;p&gt;&#8221;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@castor bin&amp;#93;&lt;/span&gt;# ./cqlsh&lt;br/&gt;
Connected to Test Cluster at localhost:9160.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;cqlsh 3.0.2 | Cassandra 1.2.5 | CQL spec 3.0.0 | Thrift protocol 19.36.0&amp;#93;&lt;/span&gt;&lt;br/&gt;
Use HELP for help.&lt;br/&gt;
cqlsh&amp;gt; use  mapimptestks;&lt;br/&gt;
cqlsh:mapimptestks&amp;gt; copy mapimptestcf from &apos;nmaptestcf-20130619.txt&apos;;&lt;br/&gt;
1 rows imported in 0.023 seconds.&lt;br/&gt;
cqlsh:mapimptestks&amp;gt; select * from mapimptestcf;&lt;/p&gt;

&lt;p&gt; rowkey | targetmap&lt;br/&gt;
-------&lt;del&gt;+&lt;/del&gt;-------------------&lt;br/&gt;
 rowkey | &lt;/p&gt;
{mapkey: mapvalue}

&lt;p&gt;(It appears to be as normal processing.)&lt;br/&gt;
--------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/b&gt;&lt;/del&gt;-------&lt;del&gt;&lt;b&gt;&lt;/del&gt;--------&lt;/b&gt;&lt;br/&gt;
Please confirm from the operation described above.&lt;br/&gt;
Comparing the above (a) and (b), in the data format of export file, &lt;br/&gt;
only the presence or absence of (&quot;), &lt;br/&gt;
it suggests a lack of consistency of the treatment&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Using the Copy of cqlsh, the data included the &#8220;{&#8220; and &#8220;[&#8220; (= CollectionType) case,&lt;br/&gt;
I think in the export / import process, data integrity is compromised.&lt;/p&gt;</environment>
        <key id="12654636">CASSANDRA-5698</key>
            <summary>cqlsh should support collections in COPY FROM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="kisehireoshi">Hiroshi Kise</reporter>
                        <labels>
                            <label>collections</label>
                            <label>cqlsh</label>
                    </labels>
                <created>Tue, 25 Jun 2013 01:12:27 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:10 +0000</updated>
                            <resolved>Thu, 25 Jul 2013 18:48:13 +0000</resolved>
                                        <fixVersion>1.2.8</fixVersion>
                    <fixVersion>2.0 rc1</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13692790" author="iamaleksey" created="Tue, 25 Jun 2013 06:47:14 +0000"  >&lt;p&gt;Nothing is compromised, but collections import isn&apos;t supported by cqlsh, yet, if either keys or values require quoting (ascii, text(varchar), timestamp, and inet types).&lt;/p&gt;</comment>
                            <comment id="13692801" author="jbellis" created="Tue, 25 Jun 2013 07:07:16 +0000"  >&lt;p&gt;Should we tag it 2.0.1 instead of closing?  Seems reasonably important for COPY to be feature-complete to me.&lt;/p&gt;</comment>
                            <comment id="13692804" author="iamaleksey" created="Tue, 25 Jun 2013 07:12:43 +0000"  >&lt;p&gt;As you wish&lt;/p&gt;</comment>
                            <comment id="13719745" author="brandon.williams" created="Thu, 25 Jul 2013 16:22:22 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13719897" author="iamaleksey" created="Thu, 25 Jul 2013 18:48:13 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12655086">CASSANDRA-5710</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12593424" name="5698.txt" size="3606" author="aleksey" created="Sun, 21 Jul 2013 17:49:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lrs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335237</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>