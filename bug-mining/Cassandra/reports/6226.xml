<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:27:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18105] TRUNCATED data come back after a restart or upgrade</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18105</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When we use the TRUNCATE command to delete all data in the table, the deleted data come back after a node restart or upgrade. This problem happens at the latest releases (2.2.19, 3.0.28, or 4.0.7)&lt;/p&gt;
&lt;h1&gt;&lt;a name=&quot;Stepstoreproduce&quot;&gt;&lt;/a&gt;Steps to reproduce&lt;/h1&gt;
&lt;h2&gt;&lt;a name=&quot;Toreproduceitatrelease%283.0.28or4.0.7%29&quot;&gt;&lt;/a&gt;To reproduce it at release (3.0.28 or 4.0.7)&lt;/h2&gt;

&lt;p&gt;Start up a single Cassandra node. Using the default configuration and execute the following cqlsh commands.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE KEYSPACE IF NOT EXISTS ks WITH REPLICATION = { &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt; : 1 };
CREATE TABLE &#160;ks.tb (c3 TEXT,c4 TEXT,c2 INT,c1 TEXT, PRIMARY KEY (c1, c2, c3 ));
INSERT INTO ks.tb (c3, c1, c2) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;val1&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;val2&apos;&lt;/span&gt;,1);
CREATE INDEX IF NOT EXISTS tb ON ks.tb ( c3);
TRUNCATE TABLE ks.tb;
DROP INDEX IF EXISTS ks.tb; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Execute a read command&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cqlsh&amp;gt; SELECT c2 FROM ks.tb; 

 c2
----

(0 rows) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then, we flush the node and kill the Cassandra daemon by&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/nodetool flush
pgrep -f cassandra | xargs kill -9 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We restart the node. When the node has started, perform the same read, and the deleted data comes back again.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cqlsh&amp;gt; SELECT c2 FROM ks.tb;&#160;

 c2
----
&#160; 1

(1 rows) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a name=&quot;Toreproduceitatrelease%282.2.19%29&quot;&gt;&lt;/a&gt;To reproduce it at release (2.2.19)&lt;/h2&gt;

&lt;p&gt;We don&apos;t need to kill the Cassandra daemon. Use bin/nodetool stopdaemon is enough. The other steps are the same as reproducing it at 4.0.7 or 3.0.28.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/nodetool -h ::FFFF:127.0.0.1 flush&#160;
bin/nodetool -h ::FFFF:127.0.0.1 stopdaemon&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have put the full log to reproduce it for release 4.0.7 and 2.2.19 in the comments.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13510849">CASSANDRA-18105</key>
            <summary>TRUNCATED data come back after a restart or upgrade</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smiklosovic">Stefan Miklosovic</assignee>
                                    <reporter username="kehan5800">Ke Han</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Dec 2022 00:03:52 +0000</created>
                <updated>Tue, 12 Sep 2023 13:02:32 +0000</updated>
                            <resolved>Wed, 26 Apr 2023 11:52:37 +0000</resolved>
                                        <fixVersion>3.0.29</fixVersion>
                    <fixVersion>3.11.15</fixVersion>
                    <fixVersion>4.0.10</fixVersion>
                    <fixVersion>4.1.2</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>Feature/2i Index</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="8400">2h 20m</timespent>
                                <comments>
                            <comment id="17645065" author="maedhroz" created="Fri, 9 Dec 2022 04:09:53 +0000"  >&lt;p&gt;Does this only manifest when there is an index present?&lt;/p&gt;</comment>
                            <comment id="17645096" author="JIRAUSER289562" created="Fri, 9 Dec 2022 06:19:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt; Thanks for the reply. Yes. The index is necessary to trigger it.&#160;&lt;/p&gt;</comment>
                            <comment id="17645112" author="maxwellguo" created="Fri, 9 Dec 2022 06:57:38 +0000"  >&lt;p&gt;for 4.0.7 I tried &#65292;but failed. I can not reproduce it &lt;/p&gt;</comment>
                            <comment id="17645132" author="JIRAUSER289562" created="Fri, 9 Dec 2022 07:31:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt;&#160;Could you try 3.0.28 or 2.2.19? I just reproduced at those two versions.&lt;/p&gt;</comment>
                            <comment id="17645346" author="brandon.williams" created="Fri, 9 Dec 2022 15:33:00 +0000"  >&lt;p&gt;This doesn&apos;t reproduce against 3.0 head.  I&apos;m not going to hunt down java7 to attempt 2.2 since I don&apos;t have any reason to believe it will reproduce there either.&lt;/p&gt;</comment>
                            <comment id="17645389" author="JIRAUSER289562" created="Fri, 9 Dec 2022 16:45:01 +0000"  >&lt;p&gt;Thanks so much for the reply! &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt; . I am sorry for one mistake I made about the reproduce procedure. To reproduce it at 3.0.28 or 4.0.7, we need to kill the Cassandra process after the flush. But for 2.2.19, we can perform a normal shutdown by &lt;tt&gt;bin/nodetool stopdaemon&lt;/tt&gt;. Here&apos;s the detailed log on how I reproduced it.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;To reproduce it at 4.0.7 or 3.0.28&lt;/b&gt; (Both Java8), after flushing the node, I stop Cassandra process by &lt;tt&gt;pgrep -f cassandra | xargs kill -9&lt;/tt&gt;. Then I directly restart the Cassandra. The deleted data shows again. Here&apos;s the full log I got to reproduce it at 4.0.7 release.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#10140; &#160;apache-cassandra-4.0.7 bin/cassandra
&#10140; &#160;apache-cassandra-4.0.7 CompilerOracle: dontinline org/apache/cassandra/db/Columns$Serializer.deserializeLargeSubset (Lorg/apache/cassandra/io/util/DataInputPlus;Lorg/apache/cassandra/db/Columns;I)Lorg/apache/cassandra/db/Columns;
......

&#10140; &#160;apache-cassandra-4.0.7 bin/cqlsh
Connected to Test Cluster at 127.0.0.1:9042
[cqlsh 6.0.0 | Cassandra 4.0.7 | CQL spec 3.4.5 | Native protocol v5]
Use HELP &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; help.
cqlsh&amp;gt; CREATE KEYSPACE IF NOT EXISTS ks WITH REPLICATION = { &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt; : 1 };
cqlsh&amp;gt; CREATE TABLE &#160;ks.tb (c3 TEXT,c4 TEXT,c2 INT,c1 TEXT, PRIMARY KEY (c1, c2, c3 ));
cqlsh&amp;gt; INSERT INTO ks.tb (c3, c1, c2) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;val1&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;val2&apos;&lt;/span&gt;,1);
cqlsh&amp;gt; CREATE INDEX IF NOT EXISTS tb ON ks.tb ( c3);
cqlsh&amp;gt; TRUNCATE TABLE ks.tb;
cqlsh&amp;gt; DROP INDEX IF EXISTS ks.tb;&#160;
cqlsh&amp;gt; SELECT c2 FROM ks.tb;&#160;
&#160;c2
----

(0 rows)
&#10140; &#160;apache-cassandra-4.0.7 bin/nodetool flush
&#10140; &#160;apache-cassandra-4.0.7 pgrep -f cassandra | xargs kill -9
&#10140; &#160;apache-cassandra-4.0.7 bin/cassandra
&#10140; &#160;apache-cassandra-4.0.7 CompilerOracle: dontinline org/apache/cassandra/db/Columns$Serializer.deserializeLargeSubset (Lorg/apache/cassandra/io/util/DataInputPlus;Lorg/apache/cassandra/db/Columns;I)Lorg/apache/cassandra/db/Columns;
......

&#10140; &#160;apache-cassandra-4.0.7 bin/cqlsh
Connected to Test Cluster at 127.0.0.1:9042
[cqlsh 6.0.0 | Cassandra 4.0.7 | CQL spec 3.4.5 | Native protocol v5]
Use HELP &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; help.
cqlsh&amp;gt; SELECT c2 FROM ks.tb;&#160;
&#160;c2
----
&#160; 1

(1 rows) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;To reproduce it at 2.2.19&lt;/b&gt; (Java8). We can stop the Cassandra daemon normally to trigger it. Here&apos;s the full log I got for 2.2.19.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#10140; &#160;apache-cassandra-2.2.19 bin/cassandra
&#10140; &#160;apache-cassandra-2.2.19 OpenJDK 64-Bit Server VM warning: Cannot open file bin/../logs/gc.log due to No such file or directoryCompilerOracle: inline org/apache/cassandra/db/AbstractNativeCell.compareTo (Lorg/apache/cassandra/db/composites/Composite;)I
......

&#10140; &#160;apache-cassandra-2.2.19 bin/cqlsh
Connected to Test Cluster at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 2.2.19 | CQL spec 3.3.1 | Native protocol v4]
Use HELP &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; help.
cqlsh&amp;gt; CREATE KEYSPACE IF NOT EXISTS ks WITH REPLICATION = { &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt; : 1 };
cqlsh&amp;gt; CREATE TABLE &#160;ks.tb (c3 TEXT,c4 TEXT,c2 INT,c1 TEXT, PRIMARY KEY (c1, c2, c3 ));
cqlsh&amp;gt; INSERT INTO ks.tb (c3, c1, c2) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;val1&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;val2&apos;&lt;/span&gt;,1);
cqlsh&amp;gt; CREATE INDEX IF NOT EXISTS tb ON ks.tb ( c3);
cqlsh&amp;gt; TRUNCATE TABLE ks.tb;
cqlsh&amp;gt; DROP INDEX IF EXISTS ks.tb;&#160;
cqlsh&amp;gt; SELECT c2 FROM ks.tb;
 c2
----

(0 rows)

&#10140;&#160; apache-cassandra-2.2.19 bin/nodetool -h ::FFFF:127.0.0.1 flush&#160; &#160; &#160;
&#10140; &#160;apache-cassandra-2.2.19 bin/nodetool -h ::FFFF:127.0.0.1 stopdaemon
Cassandra has shutdown.
error: Connection refused (Connection refused)
-- StackTrace --
java.net.ConnectException: Connection refused (Connection refused)
&#160; &#160; at java.net.PlainSocketImpl.socketConnect(Native Method)
&#160; &#160; at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
&#160; &#160; at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
&#160; &#160; at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
&#160; &#160; at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
&#160; &#160; at java.net.Socket.connect(Socket.java:607)
&#160; &#160; at java.net.Socket.connect(Socket.java:556)
&#160; &#160; at java.net.Socket.&amp;lt;init&amp;gt;(Socket.java:452)
&#160; &#160; at java.net.Socket.&amp;lt;init&amp;gt;(Socket.java:229)
&#160; &#160; at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
&#160; &#160; at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:148)
&#160; &#160; at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:617)
&#160; &#160; at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
&#160; &#160; at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
&#160; &#160; at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:132)
&#160; &#160; at com.sun.jmx.remote.internal.PRef.invoke(Unknown Source)
&#160; &#160; at javax.management.remote.rmi.RMIConnectionImpl_Stub.close(Unknown Source)
&#160; &#160; at javax.management.remote.rmi.RMIConnector.close(RMIConnector.java:505)
&#160; &#160; at javax.management.remote.rmi.RMIConnector.close(RMIConnector.java:445)
&#160; &#160; at org.apache.cassandra.tools.NodeProbe.close(NodeProbe.java:243)
&#160; &#160; at org.apache.cassandra.tools.NodeTool$NodeToolCmd.runInternal(NodeTool.java:286)
&#160; &#160; at org.apache.cassandra.tools.NodeTool$NodeToolCmd.run(NodeTool.java:268)
&#160; &#160; at org.apache.cassandra.tools.NodeTool.execute(NodeTool.java:174)
&#160; &#160; at org.apache.cassandra.tools.NodeTool.main(NodeTool.java:56)
&#160; &#160;&#160;
&#10140; &#160;apache-cassandra-2.2.19 bin/cassandra
Starting up...

&#10140; &#160;apache-cassandra-2.2.19 bin/cqlsh
Connected to Test Cluster at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 2.2.19 | CQL spec 3.3.1 | Native protocol v4]
Use HELP &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; help.
cqlsh&amp;gt; SELECT c2 FROM ks.tb;
 c2
----
&#160; 1

(1 rows) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17645403" author="brandon.williams" created="Fri, 9 Dec 2022 17:00:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kehan5800&quot; class=&quot;user-hover&quot; rel=&quot;kehan5800&quot;&gt;kehan5800&lt;/a&gt;, that indeed reproduces, and I confirmed it requires the 2i to occur.&lt;/p&gt;</comment>
                            <comment id="17645570" author="maxwellguo" created="Sat, 10 Dec 2022 08:25:20 +0000"  >&lt;p&gt;I reproduce it too&#65292; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandonwilliams&quot; class=&quot;user-hover&quot; rel=&quot;brandonwilliams&quot;&gt;brandonwilliams&lt;/a&gt;  I think I can take a look at this issue &lt;/p&gt;</comment>
                            <comment id="17711457" author="smiklosovic" created="Wed, 12 Apr 2023 15:53:49 +0000"  >&lt;p&gt;I try to take a look at this as no progress was done since the last year. &lt;/p&gt;</comment>
                            <comment id="17711468" author="maxwellguo" created="Wed, 12 Apr 2023 16:17:12 +0000"  >&lt;p&gt;I have found out the reason that time as the data still exist in commitlog and the lowbond of commitlog have changed as index been created&#65288;The description may not be clear because it is too long&#65289;.That time I just discard the commitlog &#8216;s data at truncate stage&#65292;And this problem is solved&#12290;At that time, as the patch is not ready and I was busy with other things temporarily, so this issue did not progress further. And thank you for your help &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt;  I think I can help to do some review latter&lt;/p&gt;</comment>
                            <comment id="17711483" author="maedhroz" created="Wed, 12 Apr 2023 16:54:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maxwellguo&quot; class=&quot;user-hover&quot; rel=&quot;maxwellguo&quot;&gt;maxwellguo&lt;/a&gt; Does it also not reproduce if the index is created before the INSERT?&lt;/p&gt;</comment>
                            <comment id="17711661" author="maxwellguo" created="Thu, 13 Apr 2023 03:39:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt;It seems can also reproduce .&lt;/p&gt;</comment>
                            <comment id="17714175" author="smiklosovic" created="Wed, 19 Apr 2023 15:31:05 +0000"  >&lt;p&gt;Together with great help of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt; we found the problem. Basically, upon dropping of an index, it will eventually call (1) but the problem is that id of index is same as id of the base table. So it will remove the record from the truncate_at map in system.local for the base table. So TRUNCATE will put that record there but next DROP of index will remove it from there.&lt;/p&gt;

&lt;p&gt;If you notice, index has same id as base table because of this (2)&lt;/p&gt;

&lt;p&gt;It was said to me that there is some reason behind the sharing of the id between base table and the index but we should probably revisit this decision. I am personally not sure why it is done like that.&lt;/p&gt;

&lt;p&gt;The fix consists of simple check to not remove the trucated_at entry when table metadata is of an index:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!metadata.get().isIndex())
            SystemKeyspace.removeTruncationRecord(metadata.id);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It is also worth to mention that this is not happening without restarting the node because upon restart, the commit log is replayed and it will look into this table to see if a table was truncated so it will not replay the mutations. However, since there is no such record in that truncated_at map for that table anymore as DROP INDEX removed it, it will just replay it all so data will resurrect.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;(1) &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/ColumnFamilyStore.java#L695&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/ColumnFamilyStore.java#L695&lt;/a&gt;&lt;br/&gt;
(2) &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/index/internal/CassandraIndex.java#L739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/index/internal/CassandraIndex.java#L739&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17714244" author="maedhroz" created="Wed, 19 Apr 2023 18:01:15 +0000"  >&lt;p&gt;Good find. I think this confirms that SAI wouldn&apos;t have been affected.&lt;/p&gt;

&lt;p&gt;Let me know if you need a reviewer.&lt;/p&gt;</comment>
                            <comment id="17714500" author="smiklosovic" created="Thu, 20 Apr 2023 09:12:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt;&#160; would you mind to take a look at this?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/2286/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2286/files&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I expect the patch to be exactly same for all branches. I just do not want to make all of them and starting to build it if you expect the changes be somehow different. I ll provide it all once reviewed.&lt;/p&gt;</comment>
                            <comment id="17714503" author="maxwellguo" created="Thu, 20 Apr 2023 09:23:41 +0000"  >&lt;p&gt;+1 on this path, and left one comment.&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17714813" author="maedhroz" created="Fri, 21 Apr 2023 03:50:30 +0000"  >&lt;p&gt;I&apos;ll take look tomorrow.&lt;/p&gt;</comment>
                            <comment id="17715126" author="maedhroz" created="Fri, 21 Apr 2023 18:34:34 +0000"  >&lt;p&gt;LGTM, w/ a couple small nits left inline.&lt;/p&gt;

&lt;p&gt;Just let me know when the other branches are up...&lt;/p&gt;</comment>
                            <comment id="17715680" author="smiklosovic" created="Mon, 24 Apr 2023 09:41:20 +0000"  >&lt;p&gt;PRs&lt;/p&gt;

&lt;p&gt;3.0 &lt;a href=&quot;https://github.com/apache/cassandra/pull/2286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2286&lt;/a&gt;&lt;br/&gt;
3.11 &lt;a href=&quot;https://github.com/apache/cassandra/pull/2289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2289&lt;/a&gt;&lt;br/&gt;
4.0 &lt;a href=&quot;https://github.com/apache/cassandra/pull/2290&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2290&lt;/a&gt;&lt;br/&gt;
4.1 &lt;a href=&quot;https://github.com/apache/cassandra/pull/2291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2291&lt;/a&gt;&lt;br/&gt;
trunk &lt;a href=&quot;https://github.com/apache/cassandra/pull/2292&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2292&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tests are more or less same as suggested on the PR for 3.0, however, for 3.11, I noticed that there is a bug for materialized view. I left out that MV test.&lt;/p&gt;

&lt;p&gt;The error for MV test in 3.11 branch is that it is not possible to drop a materialized view (yeah, really). It will be visible if one takes the test in 3.0 patch and tries it in 3.11 branch. It will end up throwing this:&lt;/p&gt;

&lt;p&gt;This is thrown really just for 3.11 branch. 4.0+ branches are not affected. Nor 3.0 is. Just 3.11.&lt;/p&gt;

&lt;p&gt;Since this patch is dealing with indices primarily and it has nothing to do with MVs as such, I do not think that spending more time on fixing this bug is necessary.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.util.concurrent.ExecutionException: org.apache.cassandra.db.KeyspaceNotDefinedException: Keyspace system_distributed does not exist
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:192)
	at org.apache.cassandra.utils.FBUtilities.waitOnFuture(FBUtilities.java:438)
	... 11 more
Caused by: org.apache.cassandra.db.KeyspaceNotDefinedException: Keyspace system_distributed does not exist
	at org.apache.cassandra.thrift.ThriftValidation.validateKeyspace(ThriftValidation.java:85)
	at org.apache.cassandra.thrift.ThriftValidation.validateColumnFamilyWithCompactMode(ThriftValidation.java:114)
	at org.apache.cassandra.cql3.statements.ModificationStatement$Parsed.prepare(ModificationStatement.java:822)
	at org.apache.cassandra.cql3.statements.ModificationStatement$Parsed.prepare(ModificationStatement.java:816)
	at org.apache.cassandra.cql3.QueryProcessor.getStatement(QueryProcessor.java:680)
	at org.apache.cassandra.cql3.QueryProcessor.parseStatement(QueryProcessor.java:279)
	at org.apache.cassandra.cql3.QueryProcessor.prepareInternal(QueryProcessor.java:324)
	at org.apache.cassandra.cql3.QueryProcessor.executeInternal(QueryProcessor.java:332)
	at org.apache.cassandra.repair.SystemDistributedKeyspace.setViewRemoved(SystemDistributedKeyspace.java:307)
	at org.apache.cassandra.db.view.ViewManager.removeView(ViewManager.java:175)
	at org.apache.cassandra.db.view.ViewManager.reload(ViewManager.java:119)
	at org.apache.cassandra.config.Schema.dropView(Schema.java:772)
	at org.apache.cassandra.schema.SchemaKeyspace.lambda$updateKeyspace$23(SchemaKeyspace.java:1480)
	at java.util.HashMap$Values.forEach(HashMap.java:982)
	at java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1082)
	at org.apache.cassandra.schema.SchemaKeyspace.updateKeyspace(SchemaKeyspace.java:1480)
	at org.apache.cassandra.schema.SchemaKeyspace.mergeSchema(SchemaKeyspace.java:1451)
	at org.apache.cassandra.schema.SchemaKeyspace.mergeSchema(SchemaKeyspace.java:1413)
	at org.apache.cassandra.schema.SchemaKeyspace.mergeSchemaAndAnnounceVersion(SchemaKeyspace.java:1390)
	at org.apache.cassandra.service.MigrationManager$1.runMayThrow(MigrationManager.java:464)
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17715853" author="smiklosovic" created="Mon, 24 Apr 2023 14:23:18 +0000"  >&lt;p&gt;I run the multiplexer but I am not able to run it successfully. It throws this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2118/workflows/1c5658d4-250e-4e5f-aedc-ad80c0127bde/jobs/24768/tests#failed-test-0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2118/workflows/1c5658d4-250e-4e5f-aedc-ad80c0127bde/jobs/24768/tests#failed-test-0&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.cassandra.distributed.shared.ShutdownException: Uncaught exceptions were thrown during test
	at org.apache.cassandra.distributed.impl.AbstractCluster.checkAndResetUncaughtExceptions(AbstractCluster.java:748)
	at org.apache.cassandra.distributed.impl.AbstractCluster.close(AbstractCluster.java:734)
	at org.apache.cassandra.distributed.test.IndexAndMVDroppingTest.shutdown(IndexAndMVDroppingTest.java:65)
	Suppressed: java.lang.RuntimeException: java.util.concurrent.ExecutionException: org.apache.cassandra.db.compaction.CompactionInterruptedException: Compaction interrupted: Secondary index build@5bb59060-e29a-11ed-bded-33234da21547(distributed_test_keyspace, tb1, 8/8)bytes
		at org.apache.cassandra.utils.FBUtilities.waitOnFuture(FBUtilities.java:442)
		at org.apache.cassandra.index.internal.CassandraIndex.buildBlocking(CassandraIndex.java:731)
		at org.apache.cassandra.index.internal.CassandraIndex.lambda$getBuildIndexTask$5(CassandraIndex.java:701)
		at java.util.concurrent.FutureTask.run(FutureTask.java:266)
		at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
		at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
		at org.apache.cassandra.concurrent.NamedThreadFactory.lambda$threadLocalDeallocator$0(NamedThreadFactory.java:84)
		at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:750)
	Caused by: java.util.concurrent.ExecutionException: org.apache.cassandra.db.compaction.CompactionInterruptedException: Compaction interrupted: Secondary index build@5bb59060-e29a-11ed-bded-33234da21547(distributed_test_keyspace, tb1, 8/8)bytes
		at java.util.concurrent.FutureTask.report(FutureTask.java:122)
		at java.util.concurrent.FutureTask.get(FutureTask.java:192)
		at org.apache.cassandra.utils.FBUtilities.waitOnFuture(FBUtilities.java:438)
	Caused by: org.apache.cassandra.db.compaction.CompactionInterruptedException: Compaction interrupted: Secondary index build@5bb59060-e29a-11ed-bded-33234da21547(distributed_test_keyspace, tb1, 8/8)bytes
		at org.apache.cassandra.index.internal.CollatedViewIndexBuilder.build(CollatedViewIndexBuilder.java:69)
		at org.apache.cassandra.db.compaction.CompactionManager$14.run(CompactionManager.java:1744)
		at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am not completely sure why this is happening. I tried to disable automatic compaction but it throws it like 3 times out of 500.&lt;/p&gt;

&lt;p&gt;3.11 PR is here &lt;a href=&quot;https://github.com/apache/cassandra/pull/2289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2289&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In general, I have quite bad feeling about 3.11 branch. I can try this on 4.0 to see if it happens there too. &lt;/p&gt;</comment>
                            <comment id="17715908" author="maedhroz" created="Mon, 24 Apr 2023 16:39:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt; It looks like that&apos;s just the initial index build (which runs via &lt;tt&gt;CompactionManager&lt;/tt&gt;), not a &quot;real&quot; compaction. I think we could avoid this by waiting for the initial index build to complete (in addition to avoiding auto-compaction). In 3.0, the closest thing we have to doing this is probably &lt;tt&gt;CQLTester#waitForIndex()&lt;/tt&gt;. Let me know if you want to talk about that further.&lt;/p&gt;</comment>
                            <comment id="17715909" author="maedhroz" created="Mon, 24 Apr 2023 16:44:46 +0000"  >&lt;p&gt;&lt;tt&gt;CassandraIndexTest.TestScript&lt;/tt&gt; also does this.&lt;/p&gt;</comment>
                            <comment id="17715912" author="maedhroz" created="Mon, 24 Apr 2023 16:58:51 +0000"  >&lt;p&gt;I&apos;m also fine w/ side-stepping the MV issue for now and leaving that test out of the patch, btw&lt;/p&gt;</comment>
                            <comment id="17716287" author="smiklosovic" created="Tue, 25 Apr 2023 14:07:15 +0000"  >&lt;p&gt;Thanks, that helped.&lt;/p&gt;

&lt;p&gt;3.0 &lt;a href=&quot;https://github.com/apache/cassandra/pull/2286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2286&lt;/a&gt;&lt;br/&gt;
3.11 &lt;a href=&quot;https://github.com/apache/cassandra/pull/2289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2289&lt;/a&gt;&lt;br/&gt;
4.0 &lt;a href=&quot;https://github.com/apache/cassandra/pull/2290&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2290&lt;/a&gt;&lt;br/&gt;
4.1 &lt;a href=&quot;https://github.com/apache/cassandra/pull/2291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2291&lt;/a&gt;&lt;br/&gt;
trunk &lt;a href=&quot;https://github.com/apache/cassandra/pull/2292&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2292&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;builds:&lt;/p&gt;

&lt;p&gt;3.0 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2129/workflows/1252eca4-bbdd-426f-87b0-a93fbbc38723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2129/workflows/1252eca4-bbdd-426f-87b0-a93fbbc38723&lt;/a&gt;&lt;br/&gt;
3.11 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2130/workflows/4c174ddb-23bd-4a3e-b57a-9a72b52b2245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2130/workflows/4c174ddb-23bd-4a3e-b57a-9a72b52b2245&lt;/a&gt;&lt;br/&gt;
4.0 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2131/workflows/d0753f31-82b7-4986-a4d3-f082cbe45047&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2131/workflows/d0753f31-82b7-4986-a4d3-f082cbe45047&lt;/a&gt;&lt;br/&gt;
4.1 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2132/workflows/c09cdd14-0f6b-40a0-a88b-aed766a88e4b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2132/workflows/c09cdd14-0f6b-40a0-a88b-aed766a88e4b&lt;/a&gt;&lt;br/&gt;
trunk &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2133/workflows/6215ee32-7e4c-40e2-8363-ca1069395cc0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2133/workflows/6215ee32-7e4c-40e2-8363-ca1069395cc0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am running multiplexer like 1000x and it seem to be stable.&lt;/p&gt;

&lt;p&gt;When one looks closer into what tests are failing for 3.0 / 3.11, they are unrelated and they have something in common with &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;gt;       configured_strategy = CONFIG.getoption(&lt;span class=&quot;code-quote&quot;&gt;&quot;--upgrade-version-selection&quot;&lt;/span&gt;).upper()
E       AttributeError: &lt;span class=&quot;code-quote&quot;&gt;&apos;NoneType&apos;&lt;/span&gt; object has no attribute &lt;span class=&quot;code-quote&quot;&gt;&apos;getoption&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is out of scope of this ticket. I think that these tests are using some old way of doing things and it backfired here.&lt;/p&gt;</comment>
                            <comment id="17716366" author="maedhroz" created="Tue, 25 Apr 2023 17:04:20 +0000"  >&lt;p&gt;Approved all the PRs. Glad the index wait seems to have stabilized things.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12986" cascade-level="1"><![CDATA[Recoverable Corruption / Loss]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1dkjk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[maedhroz]]></customfieldvalue>
        <customfieldvalue><![CDATA[maxwellguo]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333891">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/4f348786bd6d72f4402134a29ddb3355b1fade61&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/4f348786bd6d72f4402134a29ddb3355b1fade61&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;CI and units&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>