<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:33:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-20172] Accord: Fix various bugs, improve burn test reliability</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-20172</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fix notifying unmanaged after update redundant before/bootstrap&lt;/li&gt;
	&lt;li&gt;Do not infer invalid if we have a single round of replies with minKnown not decided and maxKnown erased - in this case store the knowledge for next request.&lt;/li&gt;
	&lt;li&gt;Fix SyncPoint topology selection&lt;/li&gt;
	&lt;li&gt;Fix CheckStatusOkFull.with(InvalidIf)&lt;/li&gt;
	&lt;li&gt;Fix NotifyWaitingOn&lt;/li&gt;
	&lt;li&gt;ExecuteTxn should only contact latest topology for follow-up requests&lt;/li&gt;
	&lt;li&gt;DurableBefore.min should not go backwards on new epoch topology, journal replay was not correctly handling PreApplied, partialTxn can be null if not owned&lt;/li&gt;
	&lt;li&gt;Fix notify pre-bootstrap that arrives post-bootstrap&lt;/li&gt;
	&lt;li&gt;Avoid GC race condition on Propagate where we can incorrectly infer a shard is stale&lt;/li&gt;
	&lt;li&gt;Ensure redundantBefore on previously-owned range does not imply redundant before for overlapping queries on still-owned range&lt;/li&gt;
	&lt;li&gt;Ensure we don&apos;t mark stale unless all of the quorum we contacted had erased, else we may have raced with the agreement and erase&lt;/li&gt;
	&lt;li&gt;Fix Invalidate when no route found for FetchData does not report to all requested local epochs&lt;/li&gt;
	&lt;li&gt;Fix WAS_OWNED_RETIRED without durableBefore at Universal can lead to assertions with RX that we permit to execute but that have not yet&lt;/li&gt;
	&lt;li&gt;Fix initialiseWaitingOn can in some cases transitively notify the command we&apos;re updating via maybeCleanup of dependencies, but the command isn&apos;t yet updated so isn&apos;t ready&lt;/li&gt;
	&lt;li&gt;Fix encountering a command that is pre-bootstrap, and for which we have locally &apos;applied&apos; a supserseding RX, so that we do not know its outcome locally (so we do not cleanup the command), but also it must have been decided - and we should&lt;br/&gt;
 not respond with future dependencies.&lt;/li&gt;
	&lt;li&gt;Epoch failures on CoordinatePreAccept should trigger the CoordinatePreAccept failure handler&lt;/li&gt;
	&lt;li&gt;Use the shard bound rather than GC bound for fallback dependency&lt;/li&gt;
	&lt;li&gt;LatestDeps should be sliced to actual route, so as not to use both PreAccepted AND Stable deps as though Stable&lt;/li&gt;
	&lt;li&gt;Fix various callback issues with node.withEpoch and Recover/Propose.isDone&lt;/li&gt;
	&lt;li&gt;RecoverWithRoute can encounter a partially truncated transaction where the Deps for one shard are not committed. Must fetch LatestDeps.&lt;/li&gt;
	&lt;li&gt;Tighten LatestDeps semantics for Recover&lt;/li&gt;
	&lt;li&gt;CommandsForKey: do not restore pruned as APPLIED&lt;/li&gt;
	&lt;li&gt;Ensure prune points execute in the epoch in which they are declared&lt;/li&gt;
	&lt;li&gt;must merge all fast path votes including those from earlier epochs that may have witnessed a later transaction&lt;/li&gt;
	&lt;li&gt;Recoveries that know the transaction is committed a priori should skip the Accept phase&lt;/li&gt;
	&lt;li&gt;Maintain GC behaviour for redundant commands that are pre-bootstrap&lt;/li&gt;
	&lt;li&gt;don&apos;t apply ERASE to CommandsForKey to avoid breaking pruning&lt;/li&gt;
	&lt;li&gt;Introduce clearBefore to ProgressLog to more consistently handle cleaning up redundant transactions (and avoid triggering burn test invariants)&lt;/li&gt;
	&lt;li&gt;don&apos;t replay journal of a bootstrapping node in burn test&lt;/li&gt;
	&lt;li&gt;Recover, Accept or Commit reply from epoch that has been retired should be treated as Success rather than Redundant&lt;/li&gt;
	&lt;li&gt;Distinguish completely REDUNDANT+PRE_BOOTSTRAP from partially GC_BEFORE and REDUNDANT+PRE_BOOTSTRAP - latter can make stronger inferences based on the GC_BEFORE intersection (could perhaps be treated as simply GC_BEFORE)&lt;/li&gt;
	&lt;li&gt;RX must register historical transactions with CFK&lt;/li&gt;
	&lt;li&gt;CommandStore.bootstrapper must wait for coordinate sync via same mechanism as sync()&lt;/li&gt;
	&lt;li&gt;Don&apos;t start topology change for shard where all replicas are already bootstrapping&lt;/li&gt;
	&lt;li&gt;Reify executes et al in StoreParticipants&lt;/li&gt;
	&lt;li&gt;LocalListeners txn listener reentry may erase the entry entirely&lt;/li&gt;
	&lt;li&gt;use registerAt in AbstractRequest for expirations, use correct time for expiresAt in ListAgent&lt;/li&gt;
	&lt;li&gt;use txnId.epoch() for pruning, as must be before both txnId and executeAt of prune point for coordinating dependencies&lt;/li&gt;
	&lt;li&gt;compute accurate KnownMap when affected by bootstrap or staleness&lt;/li&gt;
	&lt;li&gt;upgradeTruncated should calculate Definition and Deps separately&lt;/li&gt;
	&lt;li&gt;Invalidate should not sort before Erased when calculating max reply or max knowledge reply&lt;/li&gt;
	&lt;li&gt;avoid another infinite loop at end of burn test&lt;/li&gt;
	&lt;li&gt;avoid another epoch loading edge case&lt;/li&gt;
	&lt;li&gt;pass through low/high epochs to ensure we propagate information to all waiting command stores&lt;/li&gt;
	&lt;li&gt;RX must adopt a non-pruned dependency that has a higher TxnId (if is itself behind prune point)&lt;/li&gt;
	&lt;li&gt;rejects should also be calculated on COMMITTED started before&lt;/li&gt;
	&lt;li&gt;remove Apply Factory wrapper for RX, redundant now we have CoordinationAdapters (and has faulty epoch logic)&lt;/li&gt;
	&lt;li&gt;for RX ensure we return maximum  writes for each epoch we intersect (same effectively as pruning logic)&lt;/li&gt;
	&lt;li&gt;rework updateUnmanaged to improve clarity&lt;/li&gt;
	&lt;li&gt;BeginRecovery constructor of LatestDeps should use touches() not owns() for compute localDeps&lt;/li&gt;
	&lt;li&gt;BeginRecovery superseding calculation was incorrectly treating startedBefore Committed and Accepted the same, when the point at which a dep should be known differs&lt;/li&gt;
	&lt;li&gt;Refactor Command visiting, porting C* integration to accord-core&lt;/li&gt;
	&lt;li&gt;RelationMultiMap Builder should resize keys and keyLimits independently&lt;/li&gt;
	&lt;li&gt;CommandsForKey Serialization moved to accord-core&lt;/li&gt;
	&lt;li&gt;losing ownership of range should trigger re-registration of unmanaged waiting on commit of a no-longer owned txn&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13603361">CASSANDRA-20172</key>
            <summary>Accord: Fix various bugs, improve burn test reliability</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="benedict">Benedict Elliott Smith</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Dec 2024 12:11:53 +0000</created>
                <updated>Sun, 29 Dec 2024 23:57:17 +0000</updated>
                            <resolved>Sun, 29 Dec 2024 23:57:17 +0000</resolved>
                                                        <component>Accord</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                            <attachment id="13073716" name="ci_summary.html" size="988477" author="benedict" created="Sun, 29 Dec 2024 23:57:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311120" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>CASSANDRA-17089</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1tc60:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>