<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:02:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11725] Check for unnecessary JMX port setting in env vars at startup</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11725</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10091&quot; title=&quot;Integrated JMX authn &amp;amp; authz&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10091&quot;&gt;&lt;del&gt;CASSANDRA-10091&lt;/del&gt;&lt;/a&gt;, C* expects to always be in control of initializing its JMX connector server. However, if  &lt;tt&gt;com.sun.management.jmxremote.port&lt;/tt&gt; is set when the JVM is started, the bootstrap agent takes over and sets up the server before any C* code runs. Because C* is then unable to bind the server it creates to the specified port, startup is halted and the root cause is somewhat unclear. &lt;/p&gt;

&lt;p&gt;We should add a check at startup so a more informative message can be provided. This would test for the presence of the system property which would differentiate from the case where some other process is already bound to the port. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12965524">CASSANDRA-11725</key>
            <summary>Check for unnecessary JMX port setting in env vars at startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="samt">Sam Tunnicliffe</assignee>
                                    <reporter username="samt">Sam Tunnicliffe</reporter>
                        <labels>
                            <label>lhf</label>
                    </labels>
                <created>Fri, 6 May 2016 07:27:36 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:33 +0000</updated>
                            <resolved>Tue, 10 May 2016 14:08:43 +0000</resolved>
                                        <fixVersion>3.6</fixVersion>
                                    <component>Local/Startup and Shutdown</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15276788" author="beobal" created="Mon, 9 May 2016 18:35:41 +0000"  >&lt;p&gt;I&apos;ve pushed a branch which adds a &lt;tt&gt;StartupCheck&lt;/tt&gt; that warns if &lt;tt&gt;com.sun.management.jmxremote.port&lt;/tt&gt; is set. &lt;/p&gt;

&lt;p&gt;As this issue also exposed the fact that a number of clients where relying on passing the JMX config directly via system properties, rather than using &lt;tt&gt;cassandra-env.sh&lt;/tt&gt;, I&apos;ve made startup more permissive to emulate previous behaviour. So, if the property is present, when it C* comes to init the JMX server it will log an additional warning and skip the setup. &lt;/p&gt;

&lt;p&gt;The additional warning is because at some point, we should remove this compatibility mode and go back to failing startup if the &lt;tt&gt;jmxremote.port&lt;/tt&gt; is set directly, but we&apos;ll the &lt;tt&gt;StartupCheck&lt;/tt&gt; should remain.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;testall&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;dtest&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/beobal/cassandra/tree/11725-3.6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;11725-3.6&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/beobal/job/beobal-11725-3.6-testall&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/beobal/job/beobal-11725-3.6-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15278098" author="tjake" created="Tue, 10 May 2016 13:37:36 +0000"  >&lt;p&gt;I&apos;m not sure you should be overriding &lt;tt&gt;java.rmi.server.hostname&lt;/tt&gt; since it might be bindable.  Perhaps you should attempt to bind to it and if it fails then override?&lt;/p&gt;

&lt;p&gt;I leave it up to you but this does fix the issue +1&lt;/p&gt;</comment>
                            <comment id="15278122" author="beobal" created="Tue, 10 May 2016 13:52:46 +0000"  >&lt;p&gt;Overriding it &lt;b&gt;only in the local-only case&lt;/b&gt; as the branch does now it the exact behaviour we had before &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10091&quot; title=&quot;Integrated JMX authn &amp;amp; authz&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10091&quot;&gt;&lt;del&gt;CASSANDRA-10091&lt;/del&gt;&lt;/a&gt;. &lt;br/&gt;
Trying to binding to that hostname is the wrong thing to do whatever, so I&apos;ve just removed that for non-local connections. Ultimately, we can bind to the broadcast address (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2967&quot; title=&quot;Only bind JMX to the same IP address that is being used in Cassandra&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2967&quot;&gt;&lt;del&gt;CASSANDRA-2967&lt;/del&gt;&lt;/a&gt;), but I&apos;ve left it binding to &lt;tt&gt;0.0.0.0&lt;/tt&gt; in the non-local case for now, just in case there are other tools/clients depending on that behaviour.&lt;/p&gt;</comment>
                            <comment id="15278145" author="beobal" created="Tue, 10 May 2016 14:08:43 +0000"  >&lt;p&gt;Thanks, committed to 3.6 in &lt;tt&gt;c17cbe1875a974a00822ffbfad716abde363c8da&lt;/tt&gt; and merged to 3.7 &amp;amp; trunk.&lt;/p&gt;</comment>
                            <comment id="15280329" author="mshuler" created="Wed, 11 May 2016 16:01:18 +0000"  >&lt;p&gt;Confirming this commit works for allowing public IP setting in &lt;tt&gt;java.rmi.server.hostname&lt;/tt&gt; on a cloud server that does not know its public IP. That bind was failing previously, but works out fine now. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x92f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tjake</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[tjake]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>