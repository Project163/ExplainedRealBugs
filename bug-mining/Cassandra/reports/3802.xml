<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:57:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10209] Missing role manager in cassandra.yaml causes unexpected behaviour</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10209</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;On upgrading to 2.2+, if the new &lt;tt&gt;role_manager&lt;/tt&gt; option is not added to &lt;tt&gt;cassandra.yaml&lt;/tt&gt;, an instance of the default &lt;tt&gt;CassandraRoleManager&lt;/tt&gt; is created during initialization of &lt;tt&gt;DatabaseDescriptor&lt;/tt&gt;. This is a problem as the set of role options supported by &lt;tt&gt;CRM&lt;/tt&gt; depends on the configured &lt;tt&gt;IAuthenticator&lt;/tt&gt;, which at that point in time is always &lt;tt&gt;AllowAllAuthenticator&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This StackOverflow post describes the problem; the configured authenticator is &lt;tt&gt;PasswordAuthenticator&lt;/tt&gt;, the role manager should allow roles to be created using the &lt;tt&gt;PASSWORD&lt;/tt&gt; option, but it does not.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/31820914/in-cassandra-2-2-unable-to-create-role-containing-password&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/31820914/in-cassandra-2-2-unable-to-create-role-containing-password&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The simple workaround is to ensure that yaml contains the role manager option&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;role_manager: CassandraRoleManager
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12859699">CASSANDRA-10209</key>
            <summary>Missing role manager in cassandra.yaml causes unexpected behaviour</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="samt">Sam Tunnicliffe</assignee>
                                    <reporter username="samt">Sam Tunnicliffe</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Aug 2015 19:19:40 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:58 +0000</updated>
                            <resolved>Tue, 8 Sep 2015 09:47:58 +0000</resolved>
                                        <fixVersion>2.2.2</fixVersion>
                    <fixVersion>3.0.0 rc1</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14717368" author="beobal" created="Thu, 27 Aug 2015 19:33:14 +0000"  >&lt;p&gt;Patches:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/beobal/cassandra/tree/10209-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 branch&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/beobal/cassandra/tree/10209-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 branch&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/beobal/cassandra/tree/10209-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk branch&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;CI Tests:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/beobal/job/beobal-10209-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 testall&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/beobal/job/beobal-10209-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 dtest&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/beobal/job/beobal-10209-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 testall&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/beobal/job/beobal-10209-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 dtest&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/beobal/job/beobal-10209-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk testall&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/beobal/job/beobal-10209-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk dtest&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14723458" author="jbellis" created="Mon, 31 Aug 2015 14:21:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;nit: I&apos;d reverse the order of the comparison to avoid a double negative (!= .. else)&lt;/p&gt;</comment>
                            <comment id="14723697" author="jbellis" created="Mon, 31 Aug 2015 17:05:16 +0000"  >&lt;p&gt;committed with that tweak (since Sam is out this week)&lt;/p&gt;</comment>
                            <comment id="14725586" author="mshuler" created="Tue, 1 Sep 2015 15:42:01 +0000"  >&lt;p&gt;This patch causes an NPE in CQLSSTableWriterClientTest. CI showed this commit as the regression, and I can repro - previous commit passes this test OK.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Testsuite: org.apache.cassandra.io.sstable.CQLSSTableWriterClientTest
    [junit] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.63 sec
    [junit] 
    [junit] Testcase: testWriterInClientMode(org.apache.cassandra.io.sstable.CQLSSTableWriterClientTest):       Caused an ERROR
    [junit] null
    [junit] java.lang.ExceptionInInitializerError
    [junit]     at org.apache.cassandra.io.sstable.CQLSSTableWriter$Builder.getStatement(CQLSSTableWriter.java:496)
    [junit]     at org.apache.cassandra.io.sstable.CQLSSTableWriter$Builder.forTable(CQLSSTableWriter.java:351)
    [junit]     at org.apache.cassandra.io.sstable.CQLSSTableWriterClientTest.testWriterInClientMode(CQLSSTableWriterClientTest.java:74)
    [junit] Caused by: java.lang.NullPointerException
    [junit]     at org.apache.cassandra.service.ClientState.&amp;lt;clinit&amp;gt;(ClientState.java:69)
    [junit] 
    [junit] 
    [junit] Test org.apache.cassandra.io.sstable.CQLSSTableWriterClientTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14727433" author="jbellis" created="Wed, 2 Sep 2015 14:37:28 +0000"  >&lt;p&gt;Reverted.&lt;/p&gt;

&lt;p&gt;Carl proposes this as a fix: &lt;a href=&quot;https://github.com/carlyeks/cassandra/commit/204f7bdd8ea0a18d5c642cb7d42104749b82a62b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/carlyeks/cassandra/commit/204f7bdd8ea0a18d5c642cb7d42104749b82a62b&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Which looks reasonable but I&apos;m not sure what other resources should be excluded from client mode, and I&apos;d rather not do it halfway.&lt;/p&gt;</comment>
                            <comment id="14733554" author="beobal" created="Mon, 7 Sep 2015 11:15:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m not sure what other resources should be excluded from client mode, and I&apos;d rather not do it halfway.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not sure I completely follow; it isn&apos;t that those resources are excluded from client mode, rather that when &lt;b&gt;not&lt;/b&gt; in client mode (and so cassandra.yaml isn&apos;t read), don&apos;t attempt to figure out which of the &lt;tt&gt;system_auth&lt;/tt&gt; tables are not modifiable. Which seems reasonable, as if an IAuthenticator/IAuthorizer/IRoleManager is set in the yaml, those won&apos;t be correct anyway.&lt;/p&gt;</comment>
                            <comment id="14733794" author="jbellis" created="Mon, 7 Sep 2015 14:42:00 +0000"  >&lt;p&gt;Do you want to recommit with Carl&apos;s patch then?&lt;/p&gt;</comment>
                            <comment id="14733815" author="beobal" created="Mon, 7 Sep 2015 15:05:03 +0000"  >&lt;p&gt;Sure, just wanted to check I wasn&apos;t misunderstanding what you meant&lt;/p&gt;</comment>
                            <comment id="14734527" author="beobal" created="Tue, 8 Sep 2015 09:47:40 +0000"  >&lt;p&gt;Committed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=carlyeks&quot; class=&quot;user-hover&quot; rel=&quot;carlyeks&quot;&gt;carlyeks&lt;/a&gt;&apos;s additions as &lt;tt&gt;0c0f1ff1b1051627f38a8bf6cb0776241586dfce&lt;/tt&gt;.&lt;br/&gt;
I notice that since the revert, &lt;tt&gt;UFTest.testTypesWithAndWithoutNulls&lt;/tt&gt; has been failing with a timeout. This is doubly weird given it was just a revert, plus the same test is fine on 3.0 &amp;amp; trunk. I&apos;ve also run being running &lt;tt&gt;UFTest&lt;/tt&gt; in a loop locally and seen no errors in 65 runs. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mshuler&quot; class=&quot;user-hover&quot; rel=&quot;mshuler&quot;&gt;mshuler&lt;/a&gt;, any ideas about the above? Also, another oddity is that &lt;tt&gt;CQLSSTableWriterClientTest&lt;/tt&gt; (where the offending test from 2.2 was moved to) never failed on 3.0 or trunk, even before the revert. I would have expected 3.0 to have hit the same NPE from &lt;a href=&quot;http://cassci.datastax.com/view/cassandra-3.0/job/cassandra-3.0_testall/90/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this build&lt;/a&gt;, and indeed running the test locally with that revision fails in exactly the expected way. &lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jgrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332983">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>