<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:22:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2968] AssertionError during compaction of CF with counter columns</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2968</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Having upgraded from 0.8.0 to 0.8.2 we ran nodetool compact and got&lt;/p&gt;

&lt;p&gt;Error occured during compaction&lt;br/&gt;
java.util.concurrent.ExecutionException: java.lang.AssertionError&lt;br/&gt;
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)&lt;br/&gt;
        at java.util.concurrent.FutureTask.get(FutureTask.java:83)&lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionManager.performMajor(CompactionManager.java:277)&lt;br/&gt;
        at org.apache.cassandra.db.ColumnFamilyStore.forceMajorCompaction(ColumnFamilyStore.java:1762)&lt;br/&gt;
        at org.apache.cassandra.service.StorageService.forceTableCompaction(StorageService.java:1358)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:93)&lt;br/&gt;
        at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:27)&lt;br/&gt;
        at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:208)&lt;br/&gt;
        at com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:120)&lt;br/&gt;
        at com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:262)&lt;br/&gt;
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)&lt;br/&gt;
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)&lt;br/&gt;
        at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1427)&lt;br/&gt;
        at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:72)&lt;br/&gt;
        at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1265)&lt;br/&gt;
        at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1360)&lt;br/&gt;
        at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:788)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)&lt;br/&gt;
        at sun.rmi.transport.Transport$1.run(Transport.java:159)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at sun.rmi.transport.Transport.serviceCall(Transport.java:155)&lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)&lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)&lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
Caused by: java.lang.AssertionError                                                                                                                                                                                                          &lt;br/&gt;
        at org.apache.cassandra.db.context.CounterContext.removeOldShards(CounterContext.java:593)                                                                                                                                           &lt;br/&gt;
        at org.apache.cassandra.db.CounterColumn.removeOldShards(CounterColumn.java:237)                                                                                                                                                     &lt;br/&gt;
        at org.apache.cassandra.db.CounterColumn.removeOldShards(CounterColumn.java:256)                                                                                                                                                     &lt;br/&gt;
        at org.apache.cassandra.db.compaction.PrecompactedRow.&amp;lt;init&amp;gt;(PrecompactedRow.java:88)                                                                                                                                                &lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionController.getCompactedRow(CompactionController.java:140)                                                                                                                            &lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionIterator.getReduced(CompactionIterator.java:123)                                                                                                                                     &lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionIterator.getReduced(CompactionIterator.java:43)                                                                                                                                      &lt;br/&gt;
        at org.apache.cassandra.utils.ReducingIterator.computeNext(ReducingIterator.java:74)                                                                                                                                                 &lt;br/&gt;
        at com.google.common.collect.AbstractIterator.tryToComputeNext(AbstractIterator.java:140)                                                                                                                                            &lt;br/&gt;
        at com.google.common.collect.AbstractIterator.hasNext(AbstractIterator.java:135)                                                                                                                                                     &lt;br/&gt;
        at org.apache.commons.collections.iterators.FilterIterator.setNextObject(FilterIterator.java:183)                                                                                                                                    &lt;br/&gt;
        at org.apache.commons.collections.iterators.FilterIterator.hasNext(FilterIterator.java:94)                                                                                                                                           &lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionManager.doCompactionWithoutSizeEstimation(CompactionManager.java:569)                                                                                                                &lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionManager.doCompaction(CompactionManager.java:506)                                                                                                                                     &lt;br/&gt;
        at org.apache.cassandra.db.compaction.CompactionManager$4.call(CompactionManager.java:319)                                                                                                                                           &lt;br/&gt;
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)                                                                                                                                                                &lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)                                                                                                                                                                          &lt;br/&gt;
        ... 3 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;CentOS release 5.6&lt;/p&gt;</environment>
        <key id="12515766">CASSANDRA-2968</key>
            <summary>AssertionError during compaction of CF with counter columns</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="tarasp">Taras Puchko</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jul 2011 12:00:40 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:54 +0000</updated>
                            <resolved>Tue, 2 Aug 2011 15:05:54 +0000</resolved>
                                        <fixVersion>0.8.3</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13073170" author="andrden" created="Sat, 30 Jul 2011 13:18:57 +0000"  >&lt;p&gt;Reproducible test case for this bug:&lt;/p&gt;

&lt;p&gt;create column family AffiliateActivity with default_validation_class=CounterColumnType&lt;br/&gt;
   and key_validation_class=LongType and comparator=AsciiType&lt;br/&gt;
   and memtable_throughput=30&lt;br/&gt;
   and memtable_operations=0.5&lt;br/&gt;
   and replicate_on_write=true;&lt;/p&gt;

&lt;p&gt;put AffiliateActivity-g-195-Data.db and AffiliateActivity-g-195-Index.db (attached) into cassandra 0.8.2 data directory for some keyspace, then run cassandra server to open the files and run nodetool scrub&lt;/p&gt;

&lt;p&gt;Those AffiliateActivity-g-195 data files were originally created with cassandra 0.8&lt;/p&gt;

&lt;p&gt;java.io.IOError: java.lang.AssertionError&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionManager.scrubOne(CompactionManager.java:775)&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionManager.doScrub(CompactionManager.java:631)&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionManager.access$600(CompactionManager.java:65)&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionManager$3.call(CompactionManager.java:251)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:679)&lt;br/&gt;
Caused by: java.lang.AssertionError&lt;br/&gt;
	at org.apache.cassandra.db.context.CounterContext.removeOldShards(CounterContext.java:593)&lt;br/&gt;
	at org.apache.cassandra.db.CounterColumn.removeOldShards(CounterColumn.java:237)&lt;br/&gt;
	at org.apache.cassandra.db.CounterColumn.removeOldShards(CounterColumn.java:256)&lt;br/&gt;
	at org.apache.cassandra.db.compaction.PrecompactedRow.&amp;lt;init&amp;gt;(PrecompactedRow.java:88)&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionController.getCompactedRow(CompactionController.java:140)&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionController.getCompactedRow(CompactionController.java:146)&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionManager.scrubOne(CompactionManager.java:719)&lt;br/&gt;
	... 8 more&lt;/p&gt;

</comment>
                            <comment id="13073184" author="andrden" created="Sat, 30 Jul 2011 14:41:52 +0000"  >&lt;p&gt;Debugger shows at the exception breakpoint in the test case described that&lt;br/&gt;
&quot;state.getCount()&quot;	-9132236803706623116	&lt;br/&gt;
&quot;state.getClock()&quot;	-9132236803706623116	&lt;/p&gt;

&lt;p&gt;and context.array() (exactly 100 bytes in size) is the following so the duplication is really there, &lt;br/&gt;
and this record in sstable is likely corrupted - but how come!&lt;/p&gt;

&lt;p&gt;000100012335e4a0b2c911e000006bb62b336af7 8143c702fe516b74 8143c702fe516b74&lt;br/&gt;
23d44780b2c911e00000f03fd2ec87ff000000000000b3c&lt;br/&gt;
0000000000000b3c025188750b2c911e0000058b7809d76fff082e59147f68e9cf082e59147f68e9c&lt;/p&gt;</comment>
                            <comment id="13073217" author="andrden" created="Sat, 30 Jul 2011 16:59:26 +0000"  >&lt;p&gt;yes, sstable likely corrupted but by which code? 0.8.0 or 0.8.2?&lt;/p&gt;

&lt;p&gt;sstable2json AffiliateActivity-g-195-Data.db&lt;br/&gt;
(first row is parsed ok, second has state.getCount()==state.getClock())&lt;/p&gt;

&lt;p&gt;....&lt;br/&gt;
&quot;00000000019d499f&quot;: [[&quot;clicks&quot;,&quot;000100012335e4a0b2c911e000006bb62b336af7000000000000285c000000000000285c23d44780b2c911e00000f03fd2ec87ff0000000000000002000000000000000225188750b&lt;br/&gt;
2c911e0000058b7809d76ff00000000000000690000000000000069&quot;,1311664683623,&quot;c&quot;,-9223372036854775808]],&lt;br/&gt;
&quot;0000000000748b45&quot;: [[&quot;clicks&quot;,&quot;000100012335e4a0b2c911e000006bb62b336af78143c702fe516b748143c702fe516b7423d44780b2c911e00000f03fd2ec87ff000000000000b3c0000000000000b3c025188750b&lt;br/&gt;
2c911e0000058b7809d76fff082e59147f68e9cf082e59147f68e9c&quot;,1311665756252,&quot;c&quot;,-9223372036854775808]],&lt;br/&gt;
....&lt;/p&gt;

&lt;p&gt;cassandra-cli:&lt;br/&gt;
get AffiliateActivity&lt;span class=&quot;error&quot;&gt;&amp;#91;27085215&amp;#93;&lt;/span&gt;;          &lt;br/&gt;
=&amp;gt; (counter=clicks, value=10439) - reasonable value&lt;/p&gt;

&lt;p&gt;get AffiliateActivity&lt;span class=&quot;error&quot;&gt;&amp;#91;7637829&amp;#93;&lt;/span&gt;; &lt;br/&gt;
=&amp;gt; (counter=clicks, value=8198429924508872144) - nonsense value&lt;/p&gt;
</comment>
                            <comment id="13073350" author="andrden" created="Sun, 31 Jul 2011 12:43:09 +0000"  >&lt;p&gt;actually 0.8.2 continues to write non-compactable sstables &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;AffiliateActivity-g-147-Data.db is a recent file written 3 days after upgrade from 0.8.0 to 0.8.2 and it cannot be even scrubbed&lt;/p&gt;

&lt;p&gt;The pattern I can see is that we have only every other sstable file left in data directory - AffiliateActivity-g-133, 135, 137, 139, 141, 143, 145, 147. Not quite sure - but it seems 1 compaction is done to new files - otherwise where are the even numbered ones? - but those files which resulted from first compaction are broken?&lt;/p&gt;

&lt;p&gt;Anyway that&apos;s purely 0.8.2 problem, not any upgrade issue&lt;/p&gt;</comment>
                            <comment id="13073369" author="ambroff" created="Sun, 31 Jul 2011 17:09:05 +0000"  >&lt;p&gt;For what it&apos;s worth I&apos;ve seen this same bug in 0.8.1.&lt;/p&gt;</comment>
                            <comment id="13073513" author="andrden" created="Mon, 1 Aug 2011 12:38:00 +0000"  >&lt;p&gt;no, I was wrong, compaction is not the culprit&lt;/p&gt;

&lt;p&gt;I ran nodetool flush and produced 3 new small sstables - strangely they are all numbered with odd numbers only 153 155 157 - but the point is a freshly made sstable with only 8 rows is already unreadable by compaction/scrub.&lt;/p&gt;

&lt;p&gt;Maybe header in counter binary value is not written or what...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
&lt;span class=&quot;code-quote&quot;&gt;&quot;0000000000cc71a4&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;clicks&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;000100002335e4a0b2c911e000006bb62b336af700000000000000010000000000000001&quot;&lt;/span&gt;,1312201208019,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,-9223372036854775808]],
&lt;span class=&quot;code-quote&quot;&gt;&quot;0000000000748b45&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;clicks&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;000100002335e4a0b2c911e000006bb62b336af7000000000000009f000000000000009f23d44780b2c911e00000f03fd2ec87ffa6cd8bac6eb8a32d2fd3c2059ade464925188750b2c911e0000058b7809d76ff9a8b961aed94ef799a8b961aed94ef79&quot;&lt;/span&gt;,1312201220709,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,-9223372036854775808]],
&lt;span class=&quot;code-quote&quot;&gt;&quot;00000000010a4465&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;clicks&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;00002335e4a0b2c911e000006bb62b336af700000000000045ad00000000000045ad23d44780b2c911e00000f03fd2ec87ff0000000000004bfd0000000001fae30325188750b2c911e0000058b7809d76ff000000000000038f000000000000038f&quot;&lt;/span&gt;,1312201219737,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,-9223372036854775808]],
&lt;span class=&quot;code-quote&quot;&gt;&quot;0000000001319592&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;clicks&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;000100002335e4a0b2c911e000006bb62b336af70000000000000001000000000000000123d44780b2c911e00000f03fd2ec87ffdf1636876c1c1bc2df1636876c1c1bc225188750b2c911e0000058b7809d76ff0876b1020dc02ac97f12b88d9f9df751&quot;&lt;/span&gt;,1312201215475,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,-9223372036854775808]],
&lt;span class=&quot;code-quote&quot;&gt;&quot;0000000001b9a53e&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;clicks&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;000100002335e4a0b2c911e000006bb62b336af700000000000000010000000000000001&quot;&lt;/span&gt;,1312201202338,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,-9223372036854775808]],
&lt;span class=&quot;code-quote&quot;&gt;&quot;00000000004dd84f&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;clicks&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;000100002335e4a0b2c911e000006bb62b336af70000000000000001000000000000000123d44780b2c911e00000f03fd2ec87ff000000000017d1550000000059fb2ad925188750b2c911e0000058b7809d76ff00000000000173bf00000000000173bf&quot;&lt;/span&gt;,1312201205636,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,-9223372036854775808]],
&lt;span class=&quot;code-quote&quot;&gt;&quot;0000000000d1d52f&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;clicks&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;000100002335e4a0b2c911e000006bb62b336af700000000000000020000000000000002&quot;&lt;/span&gt;,1312201210515,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,-9223372036854775808]],
&lt;span class=&quot;code-quote&quot;&gt;&quot;0000000001410d4a&quot;&lt;/span&gt;: [[&lt;span class=&quot;code-quote&quot;&gt;&quot;clicks&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;000100002335e4a0b2c911e000006bb62b336af700000000000000010000000000000001&quot;&lt;/span&gt;,1312201220365,&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;,-9223372036854775808]]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13073616" author="slebresne" created="Mon, 1 Aug 2011 17:22:37 +0000"  >&lt;p&gt;This is actually a pretty stupid bug (not that there is smart bug): the old NodeId for the local node were read from the system table in reversed order while they shouldn&apos;t. The wrong path was then taken based on that mistake. No data was lost due to that (i.e, the total value of the counters is preserved), but non-sensical counter context were created (hence triggering the assertion).&lt;/p&gt;

&lt;p&gt;Fixing the root cause is pretty straightforward. Fixing the nonsensical counter contexts is more subtle, but it is doable up to the fact that the local NodeId on the node(s) where the assertion is triggered will have to be renewed. Attaching a patch that does both (fixing root cause and repairing the bad data). Also add two unit tests, one for the root cause and one to check that the bad data repair code does what it is supposed to do.&lt;/p&gt;

&lt;p&gt;After applying that patch (or upgrading on a release shipping it), you will (potentially) need to restart the node with the -Dcassandra.renew_counter_id=true (compaction will still fail if you don&apos;t but with a message saying that you should restart with the startup flag).&lt;/p&gt;</comment>
                            <comment id="13076217" author="jbellis" created="Tue, 2 Aug 2011 14:17:42 +0000"  >&lt;p&gt;+1 w/ println removed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13076254" author="slebresne" created="Tue, 2 Aug 2011 15:05:54 +0000"  >&lt;p&gt;Committed (without println), thanks&lt;/p&gt;</comment>
                            <comment id="13076300" author="hudson" created="Tue, 2 Aug 2011 16:36:05 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #252 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra-0.8/252/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra-0.8/252/&lt;/a&gt;)&lt;br/&gt;
    Fix assertion error during compaction of counter CFs&lt;br/&gt;
patch by slebresne; reviewed by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2968&quot; title=&quot;AssertionError during compaction of CF with counter columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2968&quot;&gt;&lt;del&gt;CASSANDRA-2968&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;slebresne : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153156&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/db/compaction/LazilyCompactedRow.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/unit/org/apache/cassandra/SchemaLoader.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/db/SystemTable.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/utils/NodeId.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/db/context/CounterContext.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/db/compaction/PrecompactedRow.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/unit/org/apache/cassandra/db/CounterMutationTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12488422" name="2968.patch" size="14719" author="slebresne" created="Mon, 1 Aug 2011 17:22:37 +0000"/>
                            <attachment id="12488352" name="AffiliateActivity-g-147-Data.db" size="107464" author="andrden" created="Sun, 31 Jul 2011 12:43:09 +0000"/>
                            <attachment id="12488353" name="AffiliateActivity-g-147-Index.db" size="11880" author="andrden" created="Sun, 31 Jul 2011 12:43:09 +0000"/>
                            <attachment id="12488300" name="AffiliateActivity-g-195-Data.db" size="16766" author="andrden" created="Sat, 30 Jul 2011 13:18:57 +0000"/>
                            <attachment id="12488301" name="AffiliateActivity-g-195-Index.db" size="1836" author="andrden" created="Sat, 30 Jul 2011 13:18:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20918</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gekf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>