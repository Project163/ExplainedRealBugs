<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:55:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9643] Warn when an extra-large partition is compacted</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9643</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We used to log a warning when compacting an extra-large partition (CompactionController.getCompactedRow) but took that out as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6142&quot; title=&quot;Remove multithreaded compaction (and precompactedrow)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6142&quot;&gt;&lt;del&gt;CASSANDRA-6142&lt;/del&gt;&lt;/a&gt;.  Let&apos;s add back a warning.  (Perhaps in SSTW.append, since MetadataCollector.update doesn&apos;t know the partition key and we will want to include that in the log.)&lt;/p&gt;

&lt;p&gt;Size threshold should be configurable in cassandra.yaml and default to 100MB.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12840024">CASSANDRA-9643</key>
            <summary>Warn when an extra-large partition is compacted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefania">Stefania Alborghetti</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2015 03:29:11 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:07 +0000</updated>
                            <resolved>Thu, 2 Jul 2015 18:59:04 +0000</resolved>
                                        <fixVersion>2.1.8</fixVersion>
                    <fixVersion>2.2.0 rc2</fixVersion>
                                    <component>Local/Compaction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14600543" author="flightc" created="Thu, 25 Jun 2015 02:05:00 +0000"  >&lt;p&gt;The previous message format included the offending partition key (yep, that&apos;s a 43GB partition in production):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INFO CompactionController Compacting large row acmeKS/veryWideTable:key5678 (45262476248 bytes) incrementally
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It would be great if we could maintain this format since it makes it easy to identify the table and partition without having to trawl through the cfstats output.&lt;/p&gt;</comment>
                            <comment id="14611664" author="stefania" created="Thu, 2 Jul 2015 08:40:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; this is ready for review. &lt;/p&gt;

&lt;p&gt;The 2.1 patch doesn&apos;t apply on 2.2 and so I created a pre-merged 2.2 patch and likewise for 2.2 to trunk.&lt;/p&gt;

&lt;p&gt;CI is pending:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-9643-2.1-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-9643-2.1-dtest/lastCompletedBuild/testReport/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-9643-2.1-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-9643-2.1-testall/lastCompletedBuild/testReport/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-9643-2.2-dtest/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-9643-2.2-dtest/lastCompletedBuild/testReport/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-9643-2.2-testall/lastCompletedBuild/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/stef1927/job/stef1927-9643-2.2-testall/lastCompletedBuild/testReport/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14612339" author="jbellis" created="Thu, 2 Jul 2015 18:35:01 +0000"  >&lt;p&gt;Hmm, I can&apos;t apply 5fd93eb8b6e82c7e6ad2c24dedab424e1865b164 to current 2.1.  Can you rebase again?&lt;/p&gt;

&lt;p&gt;Nit: no distinction is made for compaction algorithm on large partitions anymore, suggest the following language:&lt;/p&gt;

&lt;p&gt;            logger.warn(&quot;Compacting large partition {}/{}:{} ({} bytes)&quot;, metadata.ksName, metadata.cfName, keyString, rowSize); &lt;/p&gt;</comment>
                            <comment id="14612340" author="jbellis" created="Thu, 2 Jul 2015 18:35:56 +0000"  >&lt;p&gt;Actually conflict is just with CHANGES, I will merge.&lt;/p&gt;</comment>
                            <comment id="14612381" author="jbellis" created="Thu, 2 Jul 2015 18:59:04 +0000"  >&lt;p&gt;committed w/ tweak to log format&lt;/p&gt;</comment>
                            <comment id="14612717" author="stefania" created="Fri, 3 Jul 2015 00:45:38 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="14620964" author="rcoli" created="Thu, 9 Jul 2015 18:10:06 +0000"  >&lt;p&gt;Just a quick comment to say &quot;thanks&quot; on behalf of operators and those in the &quot;support&quot; community; this message is very useful when dealing with people having problems with imperfect schema design.&lt;/p&gt;</comment>
                            <comment id="14790574" author="jbellis" created="Wed, 16 Sep 2015 15:41:13 +0000"  >&lt;p&gt;NB: for 2.2.2, changed warning text from &quot;Compacting large partition&quot; to &quot;Writing large partition&quot;, since this is (correctly) triggered on flush as well.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12771847">CASSANDRA-8720</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gez3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>