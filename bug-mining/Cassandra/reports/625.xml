<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:18:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1853] changing row cache save interval is reflected in &apos;describe keyspace&apos; on node it was submitted to, but not nodes it was propagated to</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1853</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This is minor unless it indicates a bigger issue. On our test cluster (running cassandra 0.7 branch from today) we noticed that on submission of a new row cache save period, such as:&lt;/p&gt;

&lt;p&gt;   update column family KeyValue with row_cache_save_period=3600;&lt;/p&gt;

&lt;p&gt;The change would be reflected in describe_keyspace() (describe keyspace ... in cassandra-cli) on the node to which the schema migration was submitted, but not on other nodes in the cluster.&lt;/p&gt;

&lt;p&gt;This in spite of the schema migration having propagated, judging by Schema&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;Last Migration&amp;#39;&amp;#93;&lt;/span&gt; being identical on all nodes. It is not n and of itself is not a big problem, but it does give the impression that the migrations have trouble propagating throughout the cluster even though they do.&lt;/p&gt;

&lt;p&gt;(I had a quick (only) look in the code paths of migration application and did not find any obvious special casing of the node that happens to be local. Filing bug instead, hoping someone knows off hand what the reason is.)&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12493092">CASSANDRA-1853</key>
            <summary>changing row cache save interval is reflected in &apos;describe keyspace&apos; on node it was submitted to, but not nodes it was propagated to</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gdusbabek">Gary Dusbabek</assignee>
                                    <reporter username="scode">Peter Schuller</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Dec 2010 17:19:10 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:11 +0000</updated>
                            <resolved>Tue, 21 Dec 2010 22:31:17 +0000</resolved>
                                        <fixVersion>0.7.0 rc 3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12970909" author="scode" created="Mon, 13 Dec 2010 17:30:06 +0000"  >&lt;p&gt;Forgot to say that restarting the nodes in question (that do not show the updated value) causes it to catch up in describe keyspace output.&lt;/p&gt;</comment>
                            <comment id="12972620" author="jbellis" created="Fri, 17 Dec 2010 19:49:27 +0000"  >&lt;p&gt;shouldn&apos;t applyModels be the One True Place to call CFMetaData.apply?  I&apos;d like to r/m the apply calls in the constructor and in CassandraServer to avoid confusion.&lt;/p&gt;</comment>
                            <comment id="12973358" author="jbellis" created="Mon, 20 Dec 2010 20:58:24 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;still have the apply in CassandraServer, is that redundant?&lt;/li&gt;
	&lt;li&gt;iirc (and maybe i do not) the original explanation for this patch was that the other nodes don&apos;t go through the constructor that calls apply.  how else are they getting a UCF object?  intellij says the no-op constructor is unused.  i feel like i&apos;m missing something important here.&lt;/li&gt;
	&lt;li&gt;brace placement&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12973610" author="gdusbabek" created="Tue, 21 Dec 2010 12:15:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;still have the apply in CassandraServer&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That apply() is on the Mutation, not a CFMetaData.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;how else are they getting a UCF object?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;They deserialize the one they are sent by inflate()ing it.  It uses the no-arg constructor.&lt;/p&gt;

&lt;p&gt;fixed the braces in v3.&lt;/p&gt;</comment>
                            <comment id="12973675" author="jbellis" created="Tue, 21 Dec 2010 14:34:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;That apply() is on the Mutation, not a CFMetaData.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m talking about this one:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        CFMetaData oldCfm = DatabaseDescriptor.getCFMetaData(...);
...
            oldCfm.apply(cf_def);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;&lt;p&gt;They deserialize the one they are sent by inflate()ing it. It uses the no-arg constructor.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;inflate calls the many-arg constructor.  I removed the no-arg constructor to experiment and &quot;ant clean test&quot; passes.&lt;/p&gt;</comment>
                            <comment id="12973676" author="jbellis" created="Tue, 21 Dec 2010 14:36:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m talking about this one&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;... that&apos;s in the &lt;em&gt;avro&lt;/em&gt; CassandraServer, btw.&lt;/p&gt;</comment>
                            <comment id="12973785" author="gdusbabek" created="Tue, 21 Dec 2010 17:37:30 +0000"  >&lt;p&gt;fixed the avro.CassandraServer problem.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;inflate calls the many-arg constructor. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think we&apos;re talking about different things. I referred to UCF.inflate().  Either way, CFM.apply() is only called on the active metadata in one place.&lt;/p&gt;

&lt;p&gt;v4 attached.&lt;/p&gt;</comment>
                            <comment id="12973806" author="jbellis" created="Tue, 21 Dec 2010 18:32:07 +0000"  >&lt;p&gt;I still don&apos;t see anything calling a no-arg UCF constructor, including UCF.subinflate (there is no UCF.inflate).&lt;/p&gt;

&lt;p&gt;The reason I am stuck on this is, if everyone was calling the arg-full UCF constructor, then apply must have been getting called, which means our bug diagnosis is wrong.&lt;/p&gt;</comment>
                            <comment id="12973938" author="jbellis" created="Tue, 21 Dec 2010 22:12:35 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; * Each &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;that &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Migration is required to implement a no arg constructor, which will be used to inflate the
 * object from it&apos;s serialized form.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;reflection ftw.&lt;/p&gt;

&lt;p&gt;+1 after fixing formatting of&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ConfigurationException ex) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12973946" author="gdusbabek" created="Tue, 21 Dec 2010 22:31:17 +0000"  >&lt;p&gt;committed.&lt;/p&gt;</comment>
                            <comment id="12973951" author="hudson" created="Tue, 21 Dec 2010 22:43:01 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #106 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.7/106/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.7/106/&lt;/a&gt;)&lt;br/&gt;
    apply CF metadata updates only at apply time. patch by gdusbabek, reviewed by jbellis. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1853&quot; title=&quot;changing row cache save interval is reflected in &amp;#39;describe keyspace&amp;#39; on node it was submitted to, but not nodes it was propagated to&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1853&quot;&gt;&lt;del&gt;CASSANDRA-1853&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12973968" author="hudson" created="Tue, 21 Dec 2010 23:14:44 +0000"  >&lt;p&gt;Integrated in Cassandra #637 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra/637/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra/637/&lt;/a&gt;)&lt;br/&gt;
    apply CF metadata updates only at apply time. patch by gdusbabek, reviewed by jbellis. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1853&quot; title=&quot;changing row cache save interval is reflected in &amp;#39;describe keyspace&amp;#39; on node it was submitted to, but not nodes it was propagated to&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1853&quot;&gt;&lt;del&gt;CASSANDRA-1853&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12466475" name="ASF.LICENSE.NOT.GRANTED--v1-0001-apply-CF-metadata-updates-on-replicas.txt" size="2886" author="gdusbabek" created="Fri, 17 Dec 2010 17:47:20 +0000"/>
                            <attachment id="12466635" name="ASF.LICENSE.NOT.GRANTED--v2-0001-apply-CF-metadata-updates-only-at-apply-time.txt" size="3994" author="gdusbabek" created="Mon, 20 Dec 2010 14:26:53 +0000"/>
                            <attachment id="12466704" name="ASF.LICENSE.NOT.GRANTED--v3-0001-apply-CF-metadata-updates-only-at-apply-time.txt" size="4014" author="gdusbabek" created="Tue, 21 Dec 2010 12:15:45 +0000"/>
                            <attachment id="12466742" name="ASF.LICENSE.NOT.GRANTED--v4-0001-apply-CF-metadata-updates-only-at-apply-time.txt" size="8524" author="gdusbabek" created="Tue, 21 Dec 2010 17:37:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[gdusbabek]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g7tb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92696</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>