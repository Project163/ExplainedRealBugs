<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:43:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6822] Never ending batch replay after dropping column family</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6822</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After dropping a column family, I got an infinite number of messages like this:&lt;/p&gt;

&lt;p&gt;WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 17:50:08,962 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;/p&gt;

&lt;p&gt;I say an infinite number but I only waited about 12 hours before I decided I had had enough and truncated system.batchlog.  So perhaps it would have gone away by itself.&lt;/p&gt;

&lt;p&gt;Presumably the batch replay is skipped but not discarded, so will keep on turning up forever.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Cassandra 2.0.5&lt;/p&gt;</environment>
        <key id="12699475">CASSANDRA-6822</key>
            <summary>Never ending batch replay after dropping column family</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="baldrick">Duncan Sands</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Mar 2014 18:25:45 +0000</created>
                <updated>Tue, 16 Mar 2021 05:05:53 +0000</updated>
                            <resolved>Tue, 1 Apr 2014 01:26:39 +0000</resolved>
                                        <fixVersion>1.2.17</fixVersion>
                    <fixVersion>2.0.7</fixVersion>
                    <fixVersion>2.1 beta2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="13939828" author="iamaleksey" created="Tue, 18 Mar 2014 21:27:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=baldrick&quot; class=&quot;user-hover&quot; rel=&quot;baldrick&quot;&gt;baldrick&lt;/a&gt; Right after that log line, BatchlogManager deleted the batch, for good. Those infinite messages of yours - were they LIKE this or exactly this? Have you seen the id in &apos;batch replay of &amp;lt;id&amp;gt;&apos; repeat itself?&lt;/p&gt;</comment>
                            <comment id="13940287" author="baldrick" created="Wed, 19 Mar 2014 08:22:12 +0000"  >&lt;p&gt;$ grep bc3916e0-a533-11e3-9c41-55f3810000b5 system.log*&lt;br/&gt;
system.log.10: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 17:32:44,430 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.10: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 17:50:08,962 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.11: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 17:16:01,702 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.12: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 16:42:30,661 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.12: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 16:59:16,837 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.13: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 16:25:31,578 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.14: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 15:51:00,713 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.14: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 16:08:35,048 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.15: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 15:34:07,253 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.16: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 15:17:12,570 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.17: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 14:43:43,369 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.17: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 15:00:26,634 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.18: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 14:26:15,338 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.19: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 13:52:49,399 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.19: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 14:09:32,664 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.20: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 13:36:07,128 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.21: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 13:02:31,492 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.21: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 13:19:24,696 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.22: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 12:45:49,411 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.23: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 12:12:25,315 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.23: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 12:29:07,386 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.24: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 11:55:43,479 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.25: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 11:22:18,243 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.25: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 11:39:00,615 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.26: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 11:05:36,232 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.27: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 10:48:51,143 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.28: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 10:15:20,859 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.28: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 10:32:02,376 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.29: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 09:58:36,394 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.30: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 09:25:13,257 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.30: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 09:41:54,872 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.31: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 09:08:30,446 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.32: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 08:34:58,201 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.32: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 08:51:45,261 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.33: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 08:18:16,738 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.34: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 07:44:51,637 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.34: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 08:01:33,711 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.35: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 07:28:10,182 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.36: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 06:54:47,093 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.36: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 07:11:28,734 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.37: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 06:38:05,595 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.38: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 06:21:24,169 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.39: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 05:48:01,066 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.39: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 06:04:42,562 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.40: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 05:31:19,390 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.41: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 05:14:37,967 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.42: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 04:40:06,539 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.43: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-07 04:22:46,869 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;br/&gt;
system.log.50: WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;BatchlogTasks:1&amp;#93;&lt;/span&gt; 2014-03-06 18:26:31,876 BatchlogManager.java (line 235) Skipped batch replay of bc3916e0-a533-11e3-9c41-55f3810000b5 due to org.apache.cassandra.db.UnknownColumnFamilyException: Couldn&apos;t find cfId=2fdad07d-0cc3-373a-8aa0-15837cd9bc6c&lt;/p&gt;</comment>
                            <comment id="13955959" author="iamaleksey" created="Tue, 1 Apr 2014 00:55:13 +0000"  >&lt;p&gt;Oh, well. BM#deleteBatch() uses millis for timestamps, so when batchlog is being replayed from the sstables, the replayed entries never go away.&lt;/p&gt;

&lt;p&gt;This path is rarely hit - normally after a successful delete SP#asyncRemoveFromBatchlog() would clean up the batchlog, and that properly uses micros.&lt;/p&gt;

&lt;p&gt;Furthermore, even in the unsuccessful case, if replaying a batch from the memtable, the entry will also go away b/c of this flush optimization - &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/Memtable.java#L357&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/db/Memtable.java#L357&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Still, I&apos;m surprised that this only surfaced now. Attaching a trivial patch that fixes the issue and modifies the unit test to flush the batchlog first.&lt;/p&gt;</comment>
                            <comment id="13955975" author="xedin" created="Tue, 1 Apr 2014 01:15:10 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13955985" author="iamaleksey" created="Tue, 1 Apr 2014 01:26:39 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                            <comment id="13959641" author="exabytes18" created="Fri, 4 Apr 2014 05:08:37 +0000"  >&lt;p&gt;FWIW, while it may be &quot;rarely hit&quot;, we start starting to see this too.&lt;/p&gt;</comment>
                            <comment id="13974810" author="crack2drop" created="Sat, 19 Apr 2014 10:13:12 +0000"  >&lt;p&gt;Does this occur in 2.0.3.&lt;/p&gt;</comment>
                            <comment id="13975142" author="iamaleksey" created="Sun, 20 Apr 2014 14:09:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=crack2drop&quot; class=&quot;user-hover&quot; rel=&quot;crack2drop&quot;&gt;crack2drop&lt;/a&gt; yes&lt;/p&gt;</comment>
                            <comment id="13975176" author="crack2drop" created="Sun, 20 Apr 2014 16:24:42 +0000"  >&lt;p&gt;Will this patch help in 2.0.3 ? Don&apos;t see that version tagged for release.&lt;/p&gt;

&lt;p&gt;Moreover , does this result in any data loss or long term impact if any ?&lt;/p&gt;</comment>
                            <comment id="13975270" author="iamaleksey" created="Sun, 20 Apr 2014 20:32:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=crack2drop&quot; class=&quot;user-hover&quot; rel=&quot;crack2drop&quot;&gt;crack2drop&lt;/a&gt; no, it doesn&apos;t result in data loss. You can apply the patch to 2.0.3. The fix is tagged for 2.0.7, if you look more carefully - so you should just upgrade to 2.0.7. Running 2.0.3 at this point as an actively bad idea.&lt;/p&gt;</comment>
                            <comment id="13975353" author="crack2drop" created="Mon, 21 Apr 2014 02:33:18 +0000"  >&lt;p&gt;Just one doubt. We have been running 2.0.3 for so long and have not found any external issue so far other than a private link failure causing a stall in operation. &lt;/p&gt;

&lt;p&gt;Can you tell how stable is 2.0.7? Up gradation can be done on the run right ?(by just bringing down the node running 2.0.3 by nodetool drain and starting off new one with updates in cassandra.yaml? Shall I transfer the SSTables directly from 2.0.3 to 2.0.7 or allow it to sync its data after starting? Am actually using vnodes.&lt;/p&gt;</comment>
                            <comment id="16169755" author="tjeubaoit" created="Mon, 18 Sep 2017 08:42:14 +0000"  >&lt;p&gt;It still occur in 3.11 after dropping materialized view &lt;/p&gt;</comment>
                            <comment id="17039598" author="surbhigupta01" created="Wed, 19 Feb 2020 00:55:19 +0000"  >&lt;p&gt;Yes, we saw the same issue in 3.11 when we had to drop a Materialized view . After dropping materialized view our whole cluster became unstable and nodes were showing down from each other.&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17302222" author="cam1982" created="Tue, 16 Mar 2021 05:05:53 +0000"  >&lt;p&gt;I aslo had this issue in 3.11 after dropping a materialized view. My workaround was to create table with cfId of the view. Eg.&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;CREATE TABLE myview (...) WITH ID=&amp;lt;cfId of view&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This allowed the batches to process. Then also had to set batchlog_replay_throttle_in_kb to 0 to allow it to catch up since constantly have new batches coming in.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12637967" name="6822.txt" size="1576" author="aleksey" created="Tue, 1 Apr 2014 00:49:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377822</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1t3qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>378114</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>xedin</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>