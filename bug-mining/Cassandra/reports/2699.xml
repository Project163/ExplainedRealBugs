<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:43:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6883] stress read fails with IOException &quot;Data returned was not validated&quot;</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6883</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I&apos;m working to do some basic testing of read/write with the new stress. First, I populate data using write like so:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;rhatch@whatup:~/git/cstar/cassandra$ tools/bin/cassandra-stress write n=1000000 CL=ONE -key dist=FIXED\(1\) -col n=UNIFORM\(1..100\) -schema replication\(factor=3\) -rate threads=50
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then I attempt a read test, and this happens:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;rhatch@whatup:~/git/cstar/cassandra$ tools/bin/cassandra-stress read n=1000000 CL=ONE -key dist=FIXED\(1\) -col n=UNIFORM\(1..100\) -schema replication\(factor=3\) -rate threads=50
Warming up READ with 50000 iterations...
INFO  19:38:14 New Cassandra host /127.0.0.3 added
INFO  19:38:14 New Cassandra host /127.0.0.2 added
Connected to cluster: test_stress
Datatacenter: datacenter1; Host: localhost/127.0.0.1; Rack: rack1
Datatacenter: datacenter1; Host: /127.0.0.2; Rack: rack1
Datatacenter: datacenter1; Host: /127.0.0.3; Rack: rack1
java.io.IOException: Operation [11055] x0 key 0000000001 (0x30303030303030303031) Data returned was not validated

	at org.apache.cassandra.stress.Operation.error(Operation.java:298)
	at org.apache.cassandra.stress.Operation.timeWithRetry(Operation.java:276)
	at org.apache.cassandra.stress.operations.ThriftReader.run(ThriftReader.java:46)
	at org.apache.cassandra.stress.StressAction$Consumer.run(StressAction.java:304)
Sleeping 2s...
Running READ with 50 threads  for 1000000 iterations
ops       ,    op/s,adj op/s,   key/s,    mean,     med,     .95,     .99,    .999,     max,   time,   stderr
11287     ,   11286,   11286,   11286,     4.7,     3.8,    11.9,    21.8,    34.0,    52.9,    1.0,  0.00000
23263     ,   11764,   11764,   11764,     4.3,     3.5,    10.4,    18.1,    29.8,    51.8,    2.0,  0.00000
35300     ,   11889,   11889,   11889,     4.2,     3.7,     9.6,    15.3,    27.3,    40.0,    3.0,  0.01467
47239     ,   11737,   11737,   11737,     4.3,     3.7,    10.1,    17.0,    26.9,    47.7,    4.0,  0.01289
59140     ,   11729,   11729,   11729,     4.3,     3.8,     9.6,    15.1,    25.7,    47.9,    5.1,  0.00979
java.io.IOException: Operation [66434] x0 key 0000000001 (0x30303030303030303031) Data returned was not validated

	at org.apache.cassandra.stress.Operation.error(Operation.java:298)
	at org.apache.cassandra.stress.Operation.timeWithRetry(Operation.java:276)
	at org.apache.cassandra.stress.operations.ThriftReader.run(ThriftReader.java:46)
	at org.apache.cassandra.stress.StressAction$Consumer.run(StressAction.java:304)
66584     ,   11952,   11952,   11952,     4.2,     3.6,     9.9,    15.7,    24.7,    64.9,    5.7,  0.00788
FAILURE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;ccm 3 node cluster, java 1.7.0_51&lt;br/&gt;
cassandra 2.1 branch &amp;#8211; 615612f61566&lt;/p&gt;</environment>
        <key id="12702239">CASSANDRA-6883</key>
            <summary>stress read fails with IOException &quot;Data returned was not validated&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="benedict">Benedict Elliott Smith</assignee>
                                    <reporter username="rhatch">Russ Hatch</reporter>
                        <labels>
                            <label>qa-resolved</label>
                    </labels>
                <created>Tue, 18 Mar 2014 19:57:18 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:51 +0000</updated>
                            <resolved>Fri, 21 Mar 2014 01:07:51 +0000</resolved>
                                        <fixVersion>2.1 beta2</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13939979" author="benedict" created="Tue, 18 Mar 2014 23:48:47 +0000"  >&lt;p&gt;Stress read expects all values to be populated, so before you perform a read on a random selection of columns &amp;#40;which &amp;#45;col n=UNIFORM&amp;#40;1..100&amp;#41; does&amp;#41; you need to do a stress write with &amp;#45;col n=FIXED&amp;#40;100&amp;#41; so that all 100 columns are present and populated with the correct data.&lt;/p&gt;

&lt;p&gt;Once this has been done, you can perform random writes or reads (or mixed workloads) to your heart&apos;s contentment&lt;/p&gt;</comment>
                            <comment id="13940008" author="rhatch" created="Wed, 19 Mar 2014 00:32:22 +0000"  >&lt;p&gt;Ok, it makes sense that the schema/data has to be present before the reads will work. But given the fact that before the read, I did a million row write with uniform distribution (over only 100 cells) it seems a strange that the read test would fail due to missing data.&lt;/p&gt;

&lt;p&gt;I ran my write as above in the description and noticed a weird coincidence. The write step creates a schema as expected:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cqlsh&amp;gt; desc TABLE &quot;Keyspace1&quot;.&quot;Standard1&quot;;

CREATE TABLE &quot;Keyspace1&quot;.&quot;Standard1&quot; (
    key blob PRIMARY KEY,
    &quot;C0&quot; blob,
....................................snip....................................
    &quot;C99&quot; blob
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but the last cell never gets populated in that table, it remains null. So I think maybe there&apos;s some kind of mismatch between how the uniform distribution is written vs how it is read back (off by one or something).&lt;/p&gt;</comment>
                            <comment id="13940392" author="benedict" created="Wed, 19 Mar 2014 11:00:20 +0000"  >&lt;p&gt;Yes: Looks like I was using inclusive bounds to construct the apache UniformRealDistribution, when its upper bound is exclusive.&lt;/p&gt;

&lt;p&gt;The reason it failed, however, is because the writer writes a random prefix of columns, whereas the reader reads a random subset of columns, for reasons I won&apos;t go into - this can be changed, but for now is probably not worth the effort.&lt;/p&gt;

&lt;p&gt;Attaching simply patch&lt;/p&gt;</comment>
                            <comment id="13942622" author="iamaleksey" created="Fri, 21 Mar 2014 01:07:51 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12635526" name="6883.txt" size="714" author="benedict" created="Wed, 19 Mar 2014 11:00:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[benedict]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tkmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324159">2.1 rc3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rhatch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>