<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:02:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11655] sstabledump doesn&apos;t print out tombstone information for deleted collection column</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11655</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Pretty trivial to reproduce.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;echo &quot;CREATE KEYSPACE IF NOT EXISTS testks WITH replication = {&apos;class&apos;: &apos;SimpleStrategy&apos;, &apos;replication_factor&apos;: &apos;1&apos;};&quot; | cqlsh
echo &quot;CREATE TABLE IF NOT EXISTS testks.testcf ( k int, c text, val0_int int, val1_set_of_int set&amp;lt;int&amp;gt;, PRIMARY KEY (k, c) );&quot; | cqlsh
echo &quot;INSERT INTO testks.testcf (k, c, val0_int, val1_set_of_int) VALUES (1, &apos;c1&apos;, 100, {1, 2, 3, 4, 5});&quot; | cqlsh
echo &quot;delete val1_set_of_int from testks.testcf where k=1 and c=&apos;c1&apos;;&quot; | cqlsh
echo &quot;select * from testks.testcf;&quot; | cqlsh
nodetool flush testks testcf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now if you run sstabledump (even after taking the &lt;a href=&quot;https://github.com/yukim/cassandra/tree/11654-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt; for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11654&quot; title=&quot;sstabledump is not able to properly print out SSTable that may contain historical (but &amp;quot;shadowed&amp;quot;) row tombstone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11654&quot;&gt;&lt;del&gt;CASSANDRA-11654&lt;/del&gt;&lt;/a&gt;) against the newly generated SSTable like the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;~/cassandra-trunk/tools/bin/sstabledump ma-1-big-Data.db
[
  {
    &quot;partition&quot; : {
      &quot;key&quot; : [ &quot;1&quot; ],
      &quot;position&quot; : 0
    },
    &quot;rows&quot; : [
      {
        &quot;type&quot; : &quot;row&quot;,
        &quot;position&quot; : 18,
        &quot;clustering&quot; : [ &quot;c1&quot; ],
        &quot;liveness_info&quot; : { &quot;tstamp&quot; : 1461645231352208 },
        &quot;cells&quot; : [
          { &quot;name&quot; : &quot;val0_int&quot;, &quot;value&quot; : &quot;100&quot; }
        ]
      }
    ]
  }
]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You will see that the collection-level Deletion Info is nowhere to be found, so you will not be able to know &quot;markedForDeleteAt&quot; or &quot;localDeletionTime&quot; for this collection tombstone.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12962482">CASSANDRA-11655</key>
            <summary>sstabledump doesn&apos;t print out tombstone information for deleted collection column</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cnlwsu">Chris Lohfink</assignee>
                                    <reporter username="weideng">Wei Deng</reporter>
                        <labels>
                            <label>Tools</label>
                    </labels>
                <created>Tue, 26 Apr 2016 04:52:12 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:35 +0000</updated>
                            <resolved>Fri, 29 Apr 2016 19:34:54 +0000</resolved>
                                        <fixVersion>3.0.6</fixVersion>
                    <fixVersion>3.6</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15258311" author="cnlwsu" created="Tue, 26 Apr 2016 15:44:13 +0000"  >&lt;p&gt;the row.cells didnt iterate over complex deletions so switched to go over all the column data instead. Also since this was a tombstone as well, I think I did the work for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11656&quot; title=&quot;sstabledump has inconsistency in deletion_time printout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11656&quot;&gt;&lt;del&gt;CASSANDRA-11656&lt;/del&gt;&lt;/a&gt; as well.&lt;/p&gt;</comment>
                            <comment id="15259033" author="weideng" created="Tue, 26 Apr 2016 22:05:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnlwsu&quot; class=&quot;user-hover&quot; rel=&quot;cnlwsu&quot;&gt;cnlwsu&lt;/a&gt; Could you please rebase and generate a new patch against latest trunk? It doesn&apos;t merge cleanly, likely due to conflict with Yuki&apos;s fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11654&quot; title=&quot;sstabledump is not able to properly print out SSTable that may contain historical (but &amp;quot;shadowed&amp;quot;) row tombstone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11654&quot;&gt;&lt;del&gt;CASSANDRA-11654&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15259035" author="weideng" created="Tue, 26 Apr 2016 22:07:06 +0000"  >&lt;p&gt;I manually merged locally and I can confirm it does print out collection tombstone now.&lt;/p&gt;</comment>
                            <comment id="15259926" author="cnlwsu" created="Wed, 27 Apr 2016 10:16:32 +0000"  >&lt;p&gt;merged with trunk and (per &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11656&quot; title=&quot;sstabledump has inconsistency in deletion_time printout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11656&quot;&gt;&lt;del&gt;CASSANDRA-11656&lt;/del&gt;&lt;/a&gt;) changed timestamps to always print consistent iso8691 string. Added a &lt;tt&gt;-t&lt;/tt&gt; option to print timestamps out like before.&lt;/p&gt;</comment>
                            <comment id="15263385" author="cnlwsu" created="Fri, 29 Apr 2016 01:40:00 +0000"  >&lt;p&gt;updated to include more precision in timestamps. &lt;a href=&quot;https://github.com/clohfink/cassandra/tree/11655-sstabledump-delete-updates&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt; and &lt;a href=&quot;https://github.com/clohfink/cassandra/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pull request&lt;/a&gt; for easier review there too if helps.&lt;/p&gt;</comment>
                            <comment id="15264233" author="weideng" created="Fri, 29 Apr 2016 15:55:33 +0000"  >&lt;p&gt;The latest v3 patch looks good to me.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15264612" author="yukim" created="Fri, 29 Apr 2016 19:34:54 +0000"  >&lt;p&gt;+1 as well.&lt;br/&gt;
Committed as &lt;tt&gt;620efdc8c4968e45994496b23cd7dcdfbccdad6d&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12962486">CASSANDRA-11656</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12800811" name="CASSANDRA-11655.patch" size="5461" author="cnlwsu" created="Tue, 26 Apr 2016 15:43:06 +0000"/>
                            <attachment id="12800990" name="trunk-11655v2.patch" size="13092" author="cnlwsu" created="Wed, 27 Apr 2016 10:15:13 +0000"/>
                            <attachment id="12801365" name="trunk-11655v3.patch" size="13218" author="cnlwsu" created="Fri, 29 Apr 2016 01:36:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[cnlwsu]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wqc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12334964">3.0.5</customfieldvalue>
    <customfieldvalue id="12335055">3.6</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>yukim</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yukim]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12334792">3.0.4</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>