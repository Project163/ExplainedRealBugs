<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:34:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4487] remove uses of SchemaDisagreementException</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4487</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Since we can handle concurrent schema changes now, there&apos;s no need to validateSchemaAgreement before modification now.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12601434">CASSANDRA-4487</key>
            <summary>remove uses of SchemaDisagreementException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xedin">Pavel Yaskevich</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Aug 2012 22:21:08 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:30 +0000</updated>
                            <resolved>Thu, 16 Aug 2012 22:56:30 +0000</resolved>
                                        <fixVersion>1.2.0 beta 1</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13430597" author="jbellis" created="Tue, 7 Aug 2012 20:32:32 +0000"  >&lt;p&gt;We actually want to leave SDE in the thrift interface (but remove throws declarations), so clients can support old C* versions easily.&lt;/p&gt;</comment>
                            <comment id="13430614" author="slebresne" created="Tue, 7 Aug 2012 20:48:02 +0000"  >&lt;p&gt;We might also want to keep the validateSchemaIsSettled for the thrift side, otherwise we&apos;re changing the semantic of the operation. I mean, it&apos;s fine for CQL3, but if we really want to be conservative on the thrift side .... (typically waiting on validateSchemaIsSettled means that you know you can start inserting data in your newly created CF). &lt;/p&gt;</comment>
                            <comment id="13430630" author="xedin" created="Tue, 7 Aug 2012 21:15:07 +0000"  >&lt;p&gt;So we want to limit the scope of the to CQL3?&lt;/p&gt;</comment>
                            <comment id="13430639" author="jbellis" created="Tue, 7 Aug 2012 21:32:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;typically waiting on validateSchemaIsSettled means that you know you can start inserting data in your newly created CF&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t understand &amp;#8211; we don&apos;t do that on the normal request path even in thrift, just for schema mutations.  &lt;/p&gt;</comment>
                            <comment id="13430643" author="xedin" created="Tue, 7 Aug 2012 21:38:16 +0000"  >&lt;p&gt;The thing I don&apos;t understand is how it&apos;s different for CQL3 comparing to Thrift/CQL, in either case if we to remove the check users won&apos;t be able to run any operations safely except to the localhost...&lt;/p&gt;</comment>
                            <comment id="13430657" author="slebresne" created="Tue, 7 Aug 2012 21:54:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;we don&apos;t do that on the normal request path even in thrift, just for schema mutations&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hum, I could have swear we did that for thrift but apparently not. However we do do it for CQL (that is both CQL2 and for CQL3). Maybe that just a relic of old time, I don&apos;t know.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;how it&apos;s different for CQL3 comparing to Thrift/CQL, in either case if we to remove the check users won&apos;t be able to run any operations safely except to the localhost&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the waiting for schema settled shouldn&apos;t be part of the request path, but should be done separately by clients if they want to. But if we were doing the wait in thrift, I would have suggested to keep it just for the sake of not changing the behavior. But anyway, if we don&apos;t do it, I guess there is no problem.&lt;/p&gt;</comment>
                            <comment id="13430668" author="xedin" created="Tue, 7 Aug 2012 22:04:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hum, I could have swear we did that for thrift but apparently not. However we do do it for CQL (that is both CQL2 and for CQL3). Maybe that just a relic of old time, I don&apos;t know.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It should be, because it only makes sense to check it for schema migrations.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think the waiting for schema settled shouldn&apos;t be part of the request path, but should be done separately by clients if they want to. But if we were doing the wait in thrift, I would have suggested to keep it just for the sake of not changing the behavior. But anyway, if we don&apos;t do it, I guess there is no problem.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure if that hurts that much to leave such validation on schema migration patch, definitely would avoid problems related to change contention or errors on the read/write patch with CL &amp;gt; ONE if things weren&apos;t settled properly. But I think if we are to remove checks we probably should remove all of them to keep behavior consistent.&lt;/p&gt;
</comment>
                            <comment id="13434965" author="xedin" created="Wed, 15 Aug 2012 11:08:01 +0000"  >&lt;p&gt;Attaching v2 which removes all schema agreement validation but leafs SDE in place for Thrift API backward compatibility.&lt;/p&gt;</comment>
                            <comment id="13436087" author="jbellis" created="Thu, 16 Aug 2012 16:45:51 +0000"  >&lt;p&gt;LGTM&lt;/p&gt;</comment>
                            <comment id="13436391" author="xedin" created="Thu, 16 Aug 2012 22:56:30 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12539572" name="0001-code-changes.patch" size="46153" author="xedin" created="Tue, 7 Aug 2012 13:47:25 +0000"/>
                            <attachment id="12539573" name="0002-re-generated-thrift.patch" size="92003" author="xedin" created="Tue, 7 Aug 2012 13:47:25 +0000"/>
                            <attachment id="12541035" name="CASSANDRA-4487-v2.patch" size="30243" author="xedin" created="Wed, 15 Aug 2012 11:08:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256194</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gwdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>