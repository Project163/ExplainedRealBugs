<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:05:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12858] testall failure in org.apache.cassandra.dht.Murmur3PartitionerTest.testSplitWrapping-compression</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12858</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;example failure:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.X_testall/49/testReport/org.apache.cassandra.dht/Murmur3PartitionerTest/testSplitWrapping_compression/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-3.X_testall/49/testReport/org.apache.cassandra.dht/Murmur3PartitionerTest/testSplitWrapping_compression/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

For 8833996864316961974,8833996864316961979: range did not contain &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; token:8833996864316961974
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Stacktrace

junit.framework.AssertionFailedError: For 8833996864316961974,8833996864316961979: range did not contain &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; token:8833996864316961974
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:138)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:150)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:148)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:150)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:148)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:150)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:150)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:150)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:150)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:148)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:148)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:150)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:150)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:148)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:148)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:148)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:148)
	at org.apache.cassandra.dht.PartitionerTestCase.assertSplit(PartitionerTestCase.java:129)
	at org.apache.cassandra.dht.Murmur3PartitionerTest.testSplitWrapping(Murmur3PartitionerTest.java:50)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13016174">CASSANDRA-12858</key>
            <summary>testall failure in org.apache.cassandra.dht.Murmur3PartitionerTest.testSplitWrapping-compression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dikanggu">Dikang Gu</assignee>
                                    <reporter username="sean.mccarthy">Sean McCarthy</reporter>
                        <labels>
                            <label>test-failure</label>
                            <label>testall</label>
                    </labels>
                <created>Fri, 28 Oct 2016 14:37:06 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:56 +0000</updated>
                            <resolved>Mon, 14 Nov 2016 21:57:44 +0000</resolved>
                                        <fixVersion>3.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15648800" author="jmckenzie" created="Tue, 8 Nov 2016 21:10:21 +0000"  >&lt;p&gt;Assigning to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dikanggu&quot; class=&quot;user-hover&quot; rel=&quot;dikanggu&quot;&gt;dikanggu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15648869" author="dikanggu" created="Tue, 8 Nov 2016 21:40:40 +0000"  >&lt;p&gt;looking.&lt;/p&gt;</comment>
                            <comment id="15648949" author="dikanggu" created="Tue, 8 Nov 2016 22:12:11 +0000"  >&lt;p&gt;Add a range limit of the ratio in test, to avoid generate very narrow token ranges: &lt;a href=&quot;https://github.com/DikangGu/cassandra/commit/e452ffa3ef617c9b0c9aaf2265975ec17159ebef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk_patch&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Will kick off a unit test.&lt;/p&gt;</comment>
                            <comment id="15652211" author="dikanggu" created="Wed, 9 Nov 2016 22:16:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/DikangGu/job/DikangGu-CASSANDRA-12858-trunk-ci-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unit test &lt;/a&gt;, the failure is irrelevant.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blambov&quot; class=&quot;user-hover&quot; rel=&quot;blambov&quot;&gt;blambov&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Stefania&quot; class=&quot;user-hover&quot; rel=&quot;stefania&quot;&gt;Stefania&lt;/a&gt;, do you mind to take a look at the fix?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="15654109" author="blambov" created="Thu, 10 Nov 2016 14:00:16 +0000"  >&lt;p&gt;This doesn&apos;t look like it&apos;s preventing the failure very well. A tight initial pair can result in the same problem even with 50% splits. Also, the equals test below can blow up due to truncation even if we make sure we avoid the lower end of the range.&lt;/p&gt;

&lt;p&gt;The change you did makes the failure much less probable, but I think we should eliminate the chance altogether. How about doing the recursive calls only until the interval size becomes smaller than, say &lt;tt&gt;Math.scalb(1, -48)&lt;/tt&gt; for Murmur and &lt;tt&gt;Math.scalb(1, -112)&lt;/tt&gt; for Random?&lt;/p&gt;</comment>
                            <comment id="15655276" author="dikanggu" created="Thu, 10 Nov 2016 21:55:18 +0000"  >&lt;p&gt;Other option is that I can stop the recursive call when left_token equals right_token, or the new_token equals left_token.&lt;/p&gt;</comment>
                            <comment id="15655460" author="dikanggu" created="Thu, 10 Nov 2016 23:00:20 +0000"  >&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="15656880" author="blambov" created="Fri, 11 Nov 2016 11:51:55 +0000"  >&lt;p&gt;I&apos;m afraid this can still blow up: consider difference of 4 and ratio of 0.37: there&apos;s no value that can be returned that is within 0.1 of the required ratio.&lt;/p&gt;</comment>
                            <comment id="15657680" author="dikanggu" created="Fri, 11 Nov 2016 18:04:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blambov&quot; class=&quot;user-hover&quot; rel=&quot;blambov&quot;&gt;blambov&lt;/a&gt;, makes sense, addressed comments.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/DikangGu/cassandra/commit/826bbf72f7d52ecae309942c0ac009b0b4d6531c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/DikangGu/job/DikangGu-CASSANDRA-12858-trunk-ci-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unit test&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15664082" author="blambov" created="Mon, 14 Nov 2016 14:37:28 +0000"  >&lt;p&gt;LGTM&lt;/p&gt;

&lt;p&gt;I will commit it shortly.&lt;/p&gt;</comment>
                            <comment id="15664891" author="blambov" created="Mon, 14 Nov 2016 20:16:23 +0000"  >&lt;p&gt;I understand you are a committer now? In this case the patch is ready for you to commit at your convenience.&lt;/p&gt;</comment>
                            <comment id="15665174" author="dikanggu" created="Mon, 14 Nov 2016 21:57:44 +0000"  >&lt;p&gt;committed as &lt;tt&gt;4fd05e5b5caa8403a1e3ba1318d5eed817c24ba9&lt;/tt&gt;, to trunk and 3.10&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dikanggu]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35jrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>blambov</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blambov]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>