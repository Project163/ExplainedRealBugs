<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:21:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2593] CQL: Errors when running unqualified &quot;select column&quot; statement (no where clause)</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2593</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;b&gt;Seed Data&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE KEYSPACE cqldb with strategy_class = &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.locator.SimpleStrategy&apos;&lt;/span&gt; and strategy_options:replication_factor=2;

USE cqldb;

CREATE COLUMNFAMILY users (KEY varchar PRIMARY KEY, password varchar, gender varchar, session_token varchar, state varchar, birth_year bigint);


INSERT INTO users (KEY, password) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;user0&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3&apos;&lt;/span&gt;);
INSERT INTO users (KEY, password, gender, state, birth_year) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3a&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;f&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;TX&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1968&apos;&lt;/span&gt;);
INSERT INTO users (KEY, password) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;user2&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3b&apos;&lt;/span&gt;);
INSERT INTO users (KEY, password) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;user3&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3c&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Query #1 - select varchar column&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; select state from users;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;state&apos;&lt;/span&gt;,u&lt;span class=&quot;code-quote&quot;&gt;&apos;TX&apos;&lt;/span&gt;
Exception: &lt;span class=&quot;code-quote&quot;&gt;&apos;NoneType&apos;&lt;/span&gt; object has no attribute &lt;span class=&quot;code-quote&quot;&gt;&apos;decode&apos;&lt;/span&gt;

cqlsh&amp;gt; select state from users where KEY=&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt;;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;state&apos;&lt;/span&gt;,u&lt;span class=&quot;code-quote&quot;&gt;&apos;TX&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Query #2 - select bigint column&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; select birth_year from users;
Exception: unpack requires a string argument of length 8

cqlsh&amp;gt; select birth_year from users where KEY=&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt;;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;birth_year&apos;&lt;/span&gt;,1968
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;A simple &apos;SELECT *&apos; with no WHERE clause works fine&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; select * from users;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;birth_year&apos;&lt;/span&gt;,1968 | u&lt;span class=&quot;code-quote&quot;&gt;&apos;gender&apos;&lt;/span&gt;,u&lt;span class=&quot;code-quote&quot;&gt;&apos;f&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;password&apos;&lt;/span&gt;,u&lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3a&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;state&apos;&lt;/span&gt;,u&lt;span class=&quot;code-quote&quot;&gt;&apos;TX&apos;&lt;/span&gt;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user0&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;password&apos;&lt;/span&gt;,u&lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3&apos;&lt;/span&gt;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user3&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;password&apos;&lt;/span&gt;,u&lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3c&apos;&lt;/span&gt;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user2&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;password&apos;&lt;/span&gt;,u&lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3b&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12505999">CASSANDRA-2593</key>
            <summary>CQL: Errors when running unqualified &quot;select column&quot; statement (no where clause)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xedin">Pavel Yaskevich</assignee>
                                    <reporter username="cdaw">Cathy Daw</reporter>
                        <labels>
                            <label>cql</label>
                    </labels>
                <created>Tue, 3 May 2011 00:49:16 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:00 +0000</updated>
                            <resolved>Tue, 3 May 2011 17:46:08 +0000</resolved>
                                        <fixVersion>0.8.0</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13028265" author="xedin" created="Tue, 3 May 2011 15:35:04 +0000"  >&lt;p&gt;branch: cassandra-0.8 (can be applied to trunk also). In the cql/decoders.py we skip a column with an empty value instead of trying to decode it. &lt;/p&gt;</comment>
                            <comment id="13028268" author="jbellis" created="Tue, 3 May 2011 15:43:07 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; len(row) &amp;lt; 2:
+                    &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt; # &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; there are no columns, we skip
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This looks unrelated to the empty column fix.  (It sort of looks like an attempt at addressing &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2548&quot; title=&quot;CQL: After running DELETE without specifying columns, the key is still returned in queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2548&quot;&gt;&lt;del&gt;CASSANDRA-2548&lt;/del&gt;&lt;/a&gt;.)&lt;/p&gt;</comment>
                            <comment id="13028270" author="xedin" created="Tue, 3 May 2011 15:47:04 +0000"  >&lt;p&gt;If there are no columns to show why should we show an empty key?&lt;/p&gt;</comment>
                            <comment id="13028278" author="jbellis" created="Tue, 3 May 2011 16:00:31 +0000"  >&lt;p&gt;Short answer, same reason Cathy linked over there: &lt;a href=&quot;http://wiki.apache.org/cassandra/FAQ#range_ghosts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/cassandra/FAQ#range_ghosts&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Longer answer, I plan to address on 2548.  For now let&apos;s fix the empty column bug.&lt;/p&gt;

&lt;p&gt;Can you add a test_cql.py test that catches the problem, to prevent a regression?&lt;/p&gt;</comment>
                            <comment id="13028287" author="xedin" created="Tue, 3 May 2011 16:10:07 +0000"  >&lt;p&gt;The thing is that when you do &quot;select name from users&quot; and only few of the rows have a &quot;name&quot; column, cqlsh will output all other keys as empty. If you want I can remove check from the CQLSH&lt;/p&gt;</comment>
                            <comment id="13028293" author="jbellis" created="Tue, 3 May 2011 16:20:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;The thing is that when you do &quot;select name from users&quot; and only few of the rows have a &quot;name&quot; column, cqlsh will output all other keys as empty.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right. (And this part, at least, &lt;b&gt;is&lt;/b&gt; intuitive to someone coming from SQL: if I have a null column, I still want to see the row included.)&lt;/p&gt;</comment>
                            <comment id="13028309" author="xedin" created="Tue, 3 May 2011 16:58:50 +0000"  >&lt;p&gt;removed check from CQLSH and added a test.&lt;/p&gt;</comment>
                            <comment id="13028339" author="jbellis" created="Tue, 3 May 2011 17:46:08 +0000"  >&lt;p&gt;committed, thanks!&lt;/p&gt;</comment>
                            <comment id="13028377" author="hudson" created="Tue, 3 May 2011 19:19:19 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #62 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Cassandra-0.8/62/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/Cassandra-0.8/62/&lt;/a&gt;)&lt;br/&gt;
    fix returning null column values in the python cql driver&lt;br/&gt;
patch by Pavel Yaskevich; reviewed by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2593&quot; title=&quot;CQL: Errors when running unqualified &amp;quot;select column&amp;quot; statement (no where clause)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2593&quot;&gt;&lt;del&gt;CASSANDRA-2593&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13028411" author="cdaw" created="Tue, 3 May 2011 20:30:00 +0000"  >&lt;p&gt;The patch works as expected:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; select state from users;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;state&apos;&lt;/span&gt;,u&lt;span class=&quot;code-quote&quot;&gt;&apos;TX&apos;&lt;/span&gt;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user0&apos;&lt;/span&gt;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user3&apos;&lt;/span&gt;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user2&apos;&lt;/span&gt;

cqlsh&amp;gt; select birth_year from users;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt; | u&lt;span class=&quot;code-quote&quot;&gt;&apos;birth_year&apos;&lt;/span&gt;,1968
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user0&apos;&lt;/span&gt;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user3&apos;&lt;/span&gt;
u&lt;span class=&quot;code-quote&quot;&gt;&apos;user2&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12478067" name="CASSANDRA-2593-v2.patch" size="2722" author="xedin" created="Tue, 3 May 2011 16:58:50 +0000"/>
                            <attachment id="12478060" name="CASSANDRA-2593.patch" size="1423" author="xedin" created="Tue, 3 May 2011 15:35:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20718</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gcan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93422</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>