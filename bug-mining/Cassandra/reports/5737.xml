<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:20:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16652] &quot;desc&quot; on cqlsh 6.0.0 not working with a Cassandra 3.x server</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16652</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The &quot;desc&quot; statement on cqlsh 6.0.0 shipped with Cassandra 4.0 RC1 is not working correctly when it&apos;s connected to a Cassandra 3.x server.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Ensure you have docker installed and running&lt;/li&gt;
	&lt;li&gt;Run the following docker commands to create and start a Cassandra 3.11 container
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
~ $ docker create --name cassandra3 cassandra:3.11.10
5d903e48e0661e39080198de5e8752356a5a666132211a500ea38af0fc2a0356
~ $ docker start cassandra3
cassandra3
~ $ docker exec -ti cassandra3 bash
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Inside the docker container, try the default cqlsh version, make sure everything is working correctly
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
root@5d903e48e066:/# cqlsh
Connected to Test Cluster at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 3.11.10 | CQL spec 3.4.4 | Native protocol v4]
Use HELP &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; help.
cqlsh&amp;gt; desc keyspaces;

system_traces  system_schema  system_auth  system  system_distributed

cqlsh&amp;gt; use system_auth;
cqlsh:system_auth&amp;gt; desc tables;

resource_role_permissons_index  role_permissions  role_members  roles

cqlsh:system_auth&amp;gt; select * from roles;

 role      | can_login | is_superuser | member_of | salted_hash
-----------+-----------+--------------+-----------+--------------------------------------------------------------
 cassandra |      True |         True |      &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; | $2a$10$8UNyioBF41/OZfcCa2aqXOHvXiNXArBHKaUUhMyPAFKpfN8byXonm

(1 rows)
cqlsh:system_auth&amp;gt; exit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Okay, everything worked as expected. Now install &lt;tt&gt;git&lt;/tt&gt; to clone the Cassandra 4.0 RC1 source code, and &lt;tt&gt;python3-six&lt;/tt&gt;, which is a dependency of cqlsh
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
root@5d903e48e066:/# apt-get update -qq &amp;amp;&amp;amp; apt-get install -qq git python3-six
...... [truncated]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Clone the Cassandra repository and checkout the cassandra-4.0-rc1 tag
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
root@5d903e48e066:/# git clone -b cassandra-4.0-rc1 --depth 1 https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/apache/cassandra.git cassandra-4.0-rc1
&lt;/span&gt;Cloning into &lt;span class=&quot;code-quote&quot;&gt;&apos;cassandra-4.0-rc1&apos;&lt;/span&gt;...
...... [truncated]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Run the cqlsh from the Git repository, and then repeat all the cqlsh statements above
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
root@5d903e48e066:/# cd cassandra-4.0-rc1/bin
root@5d903e48e066:/cassandra-4.0-rc1/bin# ./cqlsh
Connected to Test Cluster at 127.0.0.1:9042
[cqlsh 6.0.0 | Cassandra 3.11.10 | CQL spec 3.4.4 | Native protocol v4]
Use HELP &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; help.
cqlsh&amp;gt; desc keyspaces;

cqlsh&amp;gt; use system_auth;
cqlsh:system_auth&amp;gt; desc tables;

cqlsh:system_auth&amp;gt; select * from roles;

 role      | can_login | is_superuser | member_of | salted_hash
-----------+-----------+--------------+-----------+--------------------------------------------------------------
 cassandra |      True |         True |      &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; | $2a$10$8UNyioBF41/OZfcCa2aqXOHvXiNXArBHKaUUhMyPAFKpfN8byXonm

(1 rows)
cqlsh:system_auth&amp;gt; exit
root@5d903e48e066:/cassandra-4.0-rc1/bin#
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;desc&quot; did not work correctly, but &quot;use&quot; and &quot;select&quot; worked.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13376643">CASSANDRA-16652</key>
            <summary>&quot;desc&quot; on cqlsh 6.0.0 not working with a Cassandra 3.x server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="edimitrova">Ekaterina Dimitrova</assignee>
                                    <reporter username="Bowen Song">Bowen Song</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 May 2021 21:50:07 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:52 +0000</updated>
                            <resolved>Tue, 18 May 2021 16:11:20 +0000</resolved>
                                        <fixVersion>4.0-rc2</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>CQL/Interpreter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17339517" author="blerer" created="Wed, 5 May 2021 08:23:27 +0000"  >&lt;p&gt;Effectively &lt;tt&gt;DESCRIBE&lt;/tt&gt;|&lt;tt&gt;DESC&lt;/tt&gt; will not work properly because in 4.0 we moved to server side DESCRIBE (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14825&quot; title=&quot;Expose table schema for drivers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14825&quot;&gt;&lt;del&gt;CASSANDRA-14825&lt;/del&gt;&lt;/a&gt;) which do not exist in 3.11.&lt;br/&gt;
If we want to support that scenario we need to provide a fallback mechanism in cqlsh. That basically mean re-introducing the cqlsh code that was removed in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14825&quot; title=&quot;Expose table schema for drivers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14825&quot;&gt;&lt;del&gt;CASSANDRA-14825&lt;/del&gt;&lt;/a&gt;. &lt;br/&gt;
For the record, I am not fully sure that the output will be exactly the same and our current tests will not test that path (as they run only against the current version) &lt;br/&gt;
so we will need to introduce some upgrade tests that actually test the query that we test in &lt;tt&gt;DescribeStatementTest&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The other option is to not support that feature and warn the user in the upgrade section of the NEWS.txt.&lt;br/&gt;
I am probably not the best one to judge of how critical is this feature. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=clohfink&quot; class=&quot;user-hover&quot; rel=&quot;clohfink&quot;&gt;clohfink&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jolynch&quot; class=&quot;user-hover&quot; rel=&quot;jolynch&quot;&gt;jolynch&lt;/a&gt; as you are involved in managing big production clusters, I would like to hear you opinion about that ticket.  &lt;/p&gt;
</comment>
                            <comment id="17339631" author="brandon.williams" created="Wed, 5 May 2021 12:41:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;The other option is to not support that feature and warn the user in the upgrade section&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think it should be possible to detect it in cqlsh when it happens and warn the user there that it doesn&apos;t work as well.&lt;/p&gt;</comment>
                            <comment id="17339936" author="edimitrova" created="Wed, 5 May 2021 23:42:18 +0000"  >&lt;p&gt;Thank you both.&lt;/p&gt;

&lt;p&gt;So from what I here we have two options - backward compatibility or to add a proper warning in 4.0 to prevent further confusion.&lt;/p&gt;

&lt;p&gt;I am also interested as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; to hear what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnlwsu&quot; class=&quot;user-hover&quot; rel=&quot;cnlwsu&quot;&gt;cnlwsu&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jolynch&quot; class=&quot;user-hover&quot; rel=&quot;jolynch&quot;&gt;jolynch&lt;/a&gt; think.&#160;&lt;/p&gt;</comment>
                            <comment id="17342647" author="blerer" created="Tue, 11 May 2021 15:18:04 +0000"  >&lt;p&gt;+1 for warning on query the user and adding a warning in the upgrade section of the NEWS.txt.&lt;/p&gt;</comment>
                            <comment id="17343426" author="edimitrova" created="Wed, 12 May 2021 18:02:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/ekaterinadimitrova2/cassandra/commit/06c155420526a4744a8748d929fe237d5f2d1643&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Patch&lt;/a&gt;&lt;br/&gt;
 Green CI: &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/815/workflows/775c7bbf-8e9c-4ae7-bfb3-a0efeb474395&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Java 8 &lt;/a&gt; | &lt;a href=&quot;https://app.circleci.com/pipelines/github/ekaterinadimitrova2/cassandra/815/workflows/01eb71ac-d12c-4068-91fd-ec9f84dbf45c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Java 11 &lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17344064" author="aholmber" created="Thu, 13 May 2021 18:41:25 +0000"  >&lt;p&gt;Patch looks good. +1&lt;br/&gt;
Two very minor comments on the commit. &lt;/p&gt;</comment>
                            <comment id="17346351" author="edimitrova" created="Mon, 17 May 2021 18:17:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&#160;do you think you will have a bit of time to review this one, please?&#160;&lt;/p&gt;</comment>
                            <comment id="17346670" author="blerer" created="Tue, 18 May 2021 08:00:33 +0000"  >&lt;p&gt;The patch looks good to me. Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17347025" author="edimitrova" created="Tue, 18 May 2021 16:07:56 +0000"  >&lt;p&gt;Committed to 4.0 and trunk, thank you!&lt;/p&gt;

&lt;p&gt;2ca525b6b7..77a370c424&#160; cassandra-4.0 -&amp;gt; cassandra-4.0&lt;/p&gt;

&lt;p&gt;&#160;&#160; 5d2c2f5ee3..2e9ce1b88f&#160; trunk -&amp;gt; trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[edimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12988" cascade-level="1"><![CDATA[API / Semantic Implementation]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qq28:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aholmber]]></customfieldvalue>
        <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12349532">4.0-rc1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/77a370c424b767486d2484cc15965de6dc98b265&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/77a370c424b767486d2484cc15965de6dc98b265&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16652?focusedCommentId=17343426&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17343426&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-16652?focusedCommentId=17343426&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17343426&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>