<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:22:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3084] o.a.c.dht.Range.differenceToFetch() doesn&apos;t handle all cases correctly</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3084</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;It&apos;s possible that differenceToFetch is making implicit assumptions about the relationship between the two ranges, but the following cases are not handled correctly (the old range is (A, B], the new is (C, D]:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;--C--A-----B--D--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here, the result will be (C, A] and (D, B], instead of (C, A] and (B, D].&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;--C--A-----D--B--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result will be (C, D] instead of just (C, A].&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;--A--C-----D--B--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result will be (B, D] when nothing needs to be transfered.&lt;/p&gt;

&lt;p&gt;If there is some kind of implicit assumption that these cases won&apos;t arise, it either needs to be explicit (assertions, exceptions) or the cases need to be handled.  It should be easy to cover this with unit tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12520286">CASSANDRA-3084</key>
            <summary>o.a.c.dht.Range.differenceToFetch() doesn&apos;t handle all cases correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thobbs">Tom Hobbs</assignee>
                                    <reporter username="thobbs">Tom Hobbs</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Aug 2011 19:06:22 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:52 +0000</updated>
                            <resolved>Tue, 30 Aug 2011 05:50:57 +0000</resolved>
                                        <fixVersion>0.8.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13092993" author="thobbs" created="Mon, 29 Aug 2011 17:33:18 +0000"  >&lt;p&gt;3084.txt covers all cases of possible range differences.&lt;/p&gt;

&lt;p&gt;3084-unit-test.txt provides unit tests that fail before the patch.&lt;/p&gt;

&lt;p&gt;The logic is definitely a bit hairy here, so any thoughts on how to simplify it are welcome.&lt;/p&gt;</comment>
                            <comment id="13093042" author="stuhood" created="Mon, 29 Aug 2011 18:15:43 +0000"  >&lt;p&gt;Couldn&apos;t a bunch of difference cases be eliminated by taking advantage of the intersection implementation? The difference between ranges x and y would be &lt;tt&gt;z = x.intersect&amp;#40;y&amp;#41;; y.subtract(z)&lt;/tt&gt;, and I think a subtract method with a &quot;y must contain z&quot; precondition would be much easier to implement.&lt;/p&gt;</comment>
                            <comment id="13093117" author="thobbs" created="Mon, 29 Aug 2011 19:17:39 +0000"  >&lt;p&gt;Good idea!&lt;/p&gt;

&lt;p&gt;3084-v2.txt simplifies the logic by adding a subtractContained() method.&lt;/p&gt;</comment>
                            <comment id="13093442" author="stuhood" created="Tue, 30 Aug 2011 05:16:47 +0000"  >&lt;p&gt;+1 Awesome.&lt;br/&gt;
&lt;em&gt;nitpick: brackets should go on new lines in differenceToFetch&lt;/em&gt;&lt;/p&gt;</comment>
                            <comment id="13093455" author="jbellis" created="Tue, 30 Aug 2011 05:50:57 +0000"  >&lt;p&gt;committed with braces fixed.  thanks Tyler and Stu!&lt;/p&gt;</comment>
                            <comment id="13093464" author="hudson" created="Tue, 30 Aug 2011 06:15:16 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #300 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra-0.8/300/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra-0.8/300/&lt;/a&gt;)&lt;br/&gt;
    fix corner cases in Range.differenceToFetch&lt;br/&gt;
patch by Tyler Hobbs; reviewed by Stu Hood for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3084&quot; title=&quot;o.a.c.dht.Range.differenceToFetch() doesn&amp;#39;t handle all cases correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3084&quot;&gt;&lt;del&gt;CASSANDRA-3084&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;jbellis : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1163090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1163090&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/dht/Range.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/unit/org/apache/cassandra/dht/RangeTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12492101" name="3084-unit-test.txt" size="6536" author="thobbs" created="Mon, 29 Aug 2011 17:33:18 +0000"/>
                            <attachment id="12492114" name="3084-v2.txt" size="3467" author="thobbs" created="Mon, 29 Aug 2011 19:17:39 +0000"/>
                            <attachment id="12492102" name="3084.txt" size="3973" author="thobbs" created="Mon, 29 Aug 2011 17:33:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gfhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stuhood</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stuhood]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>