<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:39:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5800] Support pre-1.2 release CQL3 tables in CqlPagingRecordReader</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5800</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Pre-1.2 release CQL3 table stores the key in system.schema_columnfamilies key_alias column which is different from 1.2 release. We should support it in CqlPagingRecordReader as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12659618">CASSANDRA-5800</key>
            <summary>Support pre-1.2 release CQL3 tables in CqlPagingRecordReader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aleksey">Aleksey Yeschenko</assignee>
                                    <reporter username="alexliu68">Alex Liu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jul 2013 16:54:06 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:09 +0000</updated>
                            <resolved>Tue, 13 Aug 2013 21:30:49 +0000</resolved>
                                        <fixVersion>1.2.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13718583" author="alexliu68" created="Wed, 24 Jul 2013 17:06:16 +0000"  >&lt;p&gt;Patch on 1.2 branch is attached&lt;/p&gt;</comment>
                            <comment id="13719043" author="jbellis" created="Wed, 24 Jul 2013 23:52:24 +0000"  >&lt;p&gt;I don&apos;t understand what the goal is here.  CPRR is only part of 1.2.&lt;/p&gt;</comment>
                            <comment id="13719094" author="alexliu68" created="Thu, 25 Jul 2013 00:26:19 +0000"  >&lt;p&gt;If the user upgrades from pre-1.2 release to 1.2 release, any CQL3 table created from pre-1.2 release doesn&apos;t work for CqlPagingRecordReader because it stores the key name in key_alias column instead of key_aliases column. The fix helps the upgrading.&lt;/p&gt;</comment>
                            <comment id="13719129" author="jbellis" created="Thu, 25 Jul 2013 01:14:58 +0000"  >&lt;p&gt;Sounds like the right fix is to propagate the column rename e.g. in SystemTable.upgradeSystemData. Other parts of the system need that b/s the RR.&lt;/p&gt;</comment>
                            <comment id="13722877" author="alexliu68" created="Mon, 29 Jul 2013 19:29:31 +0000"  >&lt;p&gt;5800-2-1.2-branch.txt is attached to update the system.schema_columnfamilies settings for pre-1.2 CQL3 tables&lt;/p&gt;</comment>
                            <comment id="13735235" author="thobbs" created="Fri, 9 Aug 2013 20:23:36 +0000"  >&lt;p&gt;The patch looks good except for a minor nit: I would rename &lt;tt&gt;upgradeCQL3tables()&lt;/tt&gt; to &lt;tt&gt;migrateKeyAlias()&lt;/tt&gt;, or something along those lines.&lt;/p&gt;</comment>
                            <comment id="13735243" author="jbellis" created="Fri, 9 Aug 2013 20:25:50 +0000"  >&lt;p&gt;I&apos;ll tweak that on commit.&lt;/p&gt;</comment>
                            <comment id="13735295" author="jbellis" created="Fri, 9 Aug 2013 20:57:21 +0000"  >&lt;p&gt;Committed (to 1.2 only; 2.0 requires upgrading from 1.2.9 already)&lt;/p&gt;</comment>
                            <comment id="13735401" author="iamaleksey" created="Fri, 9 Aug 2013 22:22:02 +0000"  >&lt;p&gt;Huh, let me bikeshed a little as well:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;catching NPE there is bad, idiomatically we check row.has(String column) first instead&lt;/li&gt;
	&lt;li&gt;(key_alias != null &amp;amp;&amp;amp; key_aliases == null) is not comprehensive enough. if key_alias is null, we still want to set key_aliases (to &apos;[]&apos;). so it should be if (key_aliases == null) instead.&lt;/li&gt;
	&lt;li&gt;with the above in place, all the special-casing for key_aliases being null and all the references to key_alias should be dropped from the 2.0 codebase entirely, assuming that we already mandate 1.2.9 for upgraders&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13735415" author="iamaleksey" created="Fri, 9 Aug 2013 22:33:52 +0000"  >&lt;p&gt;Also, if you detect key_alias, you should probably ditch it after the transformation (do a DELETE key_alias etc.)&lt;/p&gt;</comment>
                            <comment id="13735491" author="iamaleksey" created="Fri, 9 Aug 2013 23:21:59 +0000"  >&lt;p&gt;Will attach a v3.&lt;/p&gt;</comment>
                            <comment id="13737011" author="thobbs" created="Mon, 12 Aug 2013 16:37:30 +0000"  >&lt;p&gt;Except for the cql3handling.py portion of the 2.0 patch (which you&apos;re already aware of), +1.&lt;/p&gt;</comment>
                            <comment id="13737071" author="iamaleksey" created="Mon, 12 Aug 2013 17:23:09 +0000"  >&lt;p&gt;Thanks, committed.&lt;/p&gt;</comment>
                            <comment id="13738364" author="iamaleksey" created="Tue, 13 Aug 2013 15:28:01 +0000"  >&lt;p&gt;The migration, currently, only runs on startup - and that doesn&apos;t cover the case of, for example, 1.2.8- &lt;del&gt;&amp;gt; 1.2.9+ -&amp;gt; 2.0 migration without a 1.2.9+ -&amp;gt; 1.2.9+ restart (you are going to have the 1.2.8&lt;/del&gt; schema rows carried verbatim into 2.0).&lt;/p&gt;

&lt;p&gt;We should perform this migration after each schema pull instead.&lt;/p&gt;</comment>
                            <comment id="13738856" author="iamaleksey" created="Tue, 13 Aug 2013 21:30:49 +0000"  >&lt;p&gt;Fixed by &lt;a href=&quot;https://github.com/apache/cassandra/commit/82081c7b4b2ad2d602374f0817abc4cfc2c86c98&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/82081c7b4b2ad2d602374f0817abc4cfc2c86c98&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12659666">CASSANDRA-5803</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12593980" name="5800-1.2-branch.txt" size="4796" author="alexliu68" created="Wed, 24 Jul 2013 17:06:16 +0000"/>
                            <attachment id="12594770" name="5800-2-1.2-branch.txt" size="1825" author="alexliu68" created="Mon, 29 Jul 2013 19:29:31 +0000"/>
                            <attachment id="12597448" name="5800-v3-1.2.txt" size="4502" author="aleksey" created="Mon, 12 Aug 2013 10:45:35 +0000"/>
                            <attachment id="12597449" name="5800-v3-2.0.txt" size="4615" author="aleksey" created="Mon, 12 Aug 2013 10:47:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mlxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>