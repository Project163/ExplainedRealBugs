<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:51:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8993] EffectiveIndexInterval calculation is incorrect</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8993</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I&apos;m not familiar enough with the calculation itself to understand why this is happening, but see discussion on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8851&quot; title=&quot;Uncaught exception on thread Thread[SharedPool-Worker-16,5,main] after upgrade to 2.1.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8851&quot;&gt;&lt;del&gt;CASSANDRA-8851&lt;/del&gt;&lt;/a&gt; for the background. I&apos;ve introduced a test case to look for this during downsampling, but it seems to pass just fine, so it may be an artefact of upgrading.&lt;/p&gt;

&lt;p&gt;The problem was, unfortunately, not manifesting directly because it would simply result in a failed lookup. This was only exposed when early opening used firstKeyBeyond, which does not use the effective interval, and provided the result to getPosition().&lt;/p&gt;

&lt;p&gt;I propose a simple fix that ensures a bug here cannot break correctness. Perhaps &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt; can follow up with an investigation as to how it actually went wrong?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12783196">CASSANDRA-8993</key>
            <summary>EffectiveIndexInterval calculation is incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="benedict">Benedict Elliott Smith</assignee>
                                    <reporter username="benedict">Benedict Elliott Smith</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Mar 2015 11:30:15 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:17 +0000</updated>
                            <resolved>Fri, 27 Mar 2015 15:10:23 +0000</resolved>
                                        <fixVersion>2.1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14368890" author="benedict" created="Thu, 19 Mar 2015 11:30:42 +0000"  >&lt;p&gt;Mitigation attached&lt;/p&gt;</comment>
                            <comment id="14369903" author="thobbs" created="Thu, 19 Mar 2015 18:55:26 +0000"  >&lt;p&gt;I&apos;m okay with the patch to mitigate incorrect calculations, but at the moment I&apos;m at a loss as to where the calculation is going wrong.  We have pretty thorough test coverage around downsampling (especially with the modifications to the test in your patch).  I can only guess that it may be some interaction between downsampling and early opening.  We don&apos;t have a way to reproduce yet, correct?  Do you think extending the SSTableRewriterTests with checks on &lt;tt&gt;getPosition(..., EQ)&lt;/tt&gt; and downsampling of index summaries would yield something?&lt;/p&gt;</comment>
                            <comment id="14369967" author="benedict" created="Thu, 19 Mar 2015 19:32:14 +0000"  >&lt;p&gt;Early opening doesn&apos;t touch the index or index summary contents. I&apos;ve reproduced the problem on the raw sstable directly with some hacky code to just open the index and summary directly. The sstable is a prior format, so it has never been successfully subjected to early opening or rewriting. You can download the files from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8851&quot; title=&quot;Uncaught exception on thread Thread[SharedPool-Worker-16,5,main] after upgrade to 2.1.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8851&quot;&gt;&lt;del&gt;CASSANDRA-8851&lt;/del&gt;&lt;/a&gt; yourself, and I can provide you with the gpg key.&lt;/p&gt;</comment>
                            <comment id="14369973" author="benedict" created="Thu, 19 Mar 2015 19:34:02 +0000"  >&lt;p&gt;Either way, I think it would be helpful to expand the current test coverage to include summaries after the serialization (under different de/serialization settings)&lt;/p&gt;</comment>
                            <comment id="14369998" author="benedict" created="Thu, 19 Mar 2015 19:58:28 +0000"  >&lt;p&gt;I have had another closer look. It seems that we&apos;re reading an interval of 128, when in fact it is 2048. Exactly why this is happening, I don&apos;t know. I&apos;ve tried to poll git to see where it&apos;s gone wrong, but it&apos;s probably more easily done by someone with knowledge of the history here.&lt;/p&gt;</comment>
                            <comment id="14370027" author="benedict" created="Thu, 19 Mar 2015 20:14:32 +0000"  >&lt;p&gt;I&apos;ve pushed the current mitigation, anyway&lt;/p&gt;</comment>
                            <comment id="14370087" author="thobbs" created="Thu, 19 Mar 2015 20:49:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;I have had another closer look. It seems that we&apos;re reading an interval of 128, when in fact it is 2048.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Are you referring to when we deserialize the index summary?  The default &lt;tt&gt;index_interval&lt;/tt&gt; in 2.0 was 128.  In 2.1, we use the old value of &lt;tt&gt;index_interval&lt;/tt&gt; for &lt;tt&gt;min_index_interval&lt;/tt&gt; and set &lt;tt&gt;max_index_interval&lt;/tt&gt; to 2048.  Unfortunately there was a bug in cqlsh in 2.1, so neither property is shown in the &lt;tt&gt;DESCRIBE&lt;/tt&gt; output.  I&apos;m assuming you inspected the serialized index summary and saw an (old) interval of 2048?&lt;/p&gt;</comment>
                            <comment id="14370092" author="benedict" created="Thu, 19 Mar 2015 20:53:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m assuming you inspected the serialized index summary and saw an (old) interval of 2048?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, I&apos;m using the summary to search the index, and logging how far I have to go to find the record I want. It ranges up to 2048 items. The value we deserialize is 128, so presumably it was serialized incorrectly, but I&apos;m really not at all familiar with this to know it isn&apos;t a conversion problem of some kind.&lt;/p&gt;</comment>
                            <comment id="14370150" author="thobbs" created="Thu, 19 Mar 2015 21:26:30 +0000"  >&lt;p&gt;Okay, I think I have an idea of what&apos;s happening.  The 2.0-format SSTable is loaded by 2.1 and is eventually downsampled.  This results in the summary being overwritten on disk (with every 2048th index entry).  However, we overwrite it with the old 2.0 format, which does &lt;em&gt;not&lt;/em&gt; include the sampling level.  Whenever the sstable and summary are reloaded (due to a restart, etc), there&apos;s no sampling level to read from the serialized summary, so it&apos;s assumed to be fully sampled (with every 128th index entry).  I&apos;m pretty sure that&apos;s what&apos;s leading to this mismatch.&lt;/p&gt;</comment>
                            <comment id="14370178" author="benedict" created="Thu, 19 Mar 2015 21:39:29 +0000"  >&lt;p&gt;Could we corroborate this using SSTableMetadata rowCount when deserializing?&lt;/p&gt;</comment>
                            <comment id="14370187" author="thobbs" created="Thu, 19 Mar 2015 21:45:56 +0000"  >&lt;p&gt;For the fix, we&apos;ll need to do two things. First, stop overwriting summaries when the sstable is not a 2.1 format.  Second, to recover from this bug, when we load sstables with the old format, we need to check the summary against the actual index to verify that it&apos;s at full sampling.  If not, trigger a rebuild of the summary.  Unfortunately, I think that will need to be done every time until the sstables have been converted to the new format.  We could avoid that by persisting a flag somewhere, but I don&apos;t think the additional complexity is worth the savings in startup time.&lt;/p&gt;

&lt;p&gt;I&apos;ll work on the patch for this.&lt;/p&gt;</comment>
                            <comment id="14370213" author="thobbs" created="Thu, 19 Mar 2015 22:01:23 +0000"  >&lt;p&gt;I don&apos;t think we actually track a row count for sstables anywhere (including SSTable/StatsMetadata), so we&apos;ll need to compare summary entries against index entries for the first 2048 index entries.&lt;/p&gt;</comment>
                            <comment id="14370218" author="benedict" created="Thu, 19 Mar 2015 22:05:19 +0000"  >&lt;p&gt;Huh, you&apos;re right, it&apos;s CQL rows we track. &lt;/p&gt;</comment>
                            <comment id="14377981" author="hachmann" created="Tue, 24 Mar 2015 15:02:28 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;as I do not completely understand the discussion in this ticket, I ask myself, if the attached patch might also be a cure for the NPEs reported for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8851&quot; title=&quot;Uncaught exception on thread Thread[SharedPool-Worker-16,5,main] after upgrade to 2.1.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8851&quot;&gt;&lt;del&gt;CASSANDRA-8851&lt;/del&gt;&lt;/a&gt;? &lt;/p&gt;

&lt;p&gt;Thank you + Kind regards!&lt;/p&gt;</comment>
                            <comment id="14377985" author="benedict" created="Tue, 24 Mar 2015 15:05:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Hachmann&quot; class=&quot;user-hover&quot; rel=&quot;Hachmann&quot;&gt;Hachmann&lt;/a&gt;: Yes, that&apos;s the expectation - I&apos;m as certain as I can be that this will prevent the underlying bug causing any problems. We would love for you to corroborate this in the wild, though, by deploying the patch if you can.&lt;/p&gt;</comment>
                            <comment id="14378661" author="thobbs" created="Tue, 24 Mar 2015 21:26:43 +0000"  >&lt;p&gt;The attached 8993-2.1.txt patch (and &lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-8993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;) avoids resampling index summaries for sstables of an older format.  On startup, it also checks all sstables with an old format to verify that the index summary was not downsampled, and if it was, rebuilds it at full sampling.&lt;/p&gt;

&lt;p&gt;I&apos;ve opened a &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/205&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest pull request&lt;/a&gt; to add support for interacting with JMX to enabling testing of this.  On top of that, I created a &lt;a href=&quot;https://github.com/thobbs/cassandra-dtest/tree/CASSANDRA-8993-test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;new dtest&lt;/a&gt; that tests the summary detection and rebuild as well as avoiding resampling of old-format sstables.&lt;/p&gt;</comment>
                            <comment id="14380252" author="benedict" created="Wed, 25 Mar 2015 17:08:15 +0000"  >&lt;ul&gt;
	&lt;li&gt;Might it be easier to filter the list of readers earlier, in &lt;tt&gt;redistributeSummaries(List&amp;lt;SSTableReader&amp;gt; compacting, List&amp;lt;SSTableReader&amp;gt; nonCompacting, long memoryPoolBytes)&lt;/tt&gt; ?&lt;/li&gt;
	&lt;li&gt;Could you clarify SSTableReader Line 875: why do we check BASE_SAMPLING_LEVEL entries?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14380553" author="thobbs" created="Wed, 25 Mar 2015 19:09:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;Might it be easier to filter the list of readers earlier&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, there&apos;s no good reason not to do this earlier, so I&apos;ve moved it to the suggested location.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Could you clarify SSTableReader Line 875: why do we check BASE_SAMPLING_LEVEL entries?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I meant to explain this a little better, thanks for catching that.  I&apos;ve improved the comment enough that it should hopefully clarify the reason.&lt;/p&gt;

&lt;p&gt;My &lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-8993&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt; has been updated in addition to the v2 patch.&lt;/p&gt;</comment>
                            <comment id="14381053" author="benedict" created="Wed, 25 Mar 2015 23:50:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;that it should hopefully clarify the reason.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unfortunately not, at least for me. I am afraid I don&apos;t really follow the Downsampling logic, and the comment actually confused me further. I tried to print out the various static method states in Downsampling to visualise them better, and it still doesn&apos;t make much sense to me, so I&apos;ll outline my confusion and we can decide either to help me understand, or to perhaps get &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; (the original reviewer iirc) to step in. I should note that, either way, I expect the test you&apos;ve introduced to be sound for solving this problem, so if this takes too long we can roll a version without further ceremony, but I think it may be an unnecessarily lengthy test on startup for old format files, which could be onerous. Of course the fact that I don&apos;t understand means my expectation could also be broken, negating the point of review.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Unfortunately, the first entry to be dropped is the entry at index (BASE_SAMPLING_LEVEL - 1), so we need to check a full set of BASE_SAMPLING_LEVEL entries.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If I print out the &quot;original indices&quot; and &quot;effective intervals&quot;, it seems that at the first downsampling level (64) alternating summary entries are dropped (and again for each extra level), up to dropping all but each 128th (beginning with zero), so the first half of the comment doesn&apos;t seem to match with the behaviour I see in a way I understand. If the behaviour matches what I see, and not the comment, then it seems we could safely just check the first two &quot;expected&quot; intervals and if they mismatch we&apos;ve downsampled and need to rebuild. This would translate into always just checking 2 * minIndexInterval records in the index, or 1/64th the data.&lt;/p&gt;

&lt;p&gt;Further confusion to understanding Downsampling as a whole stems from the permission of a -1 index into getEffectiveIndexIntervalAfterIndex without explanation, and the fact that every effective interval is the same despite there being multiple avenues for calculating it (it would be much clearer if it were just minIndexInterval * (BASE_SAMPLING_LEVEL / samplingLevel).&lt;/p&gt;

&lt;p&gt;I apologise if I&apos;m just being a bit dimwitted.&lt;/p&gt;</comment>
                            <comment id="14382302" author="thobbs" created="Thu, 26 Mar 2015 17:44:50 +0000"  >&lt;p&gt;I&apos;ll try to explain a bit about how downsampling works overall so that more people besides myself understand how it works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I can put whatever info is useful into comments for posterity.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If I print out the &quot;original indices&quot; and &quot;effective intervals&quot;, it seems that at the first downsampling level (64)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The sampling level after minimal downsampling is 127, not 64.  The sampling level can be anywhere between 1 and BASE_SAMPLING_LEVEL.  When a summary moves from sampling level 128 to level 127, it will drop one summary entry with an index between [0, 127], one entry between [127, 255], and so on for the rest of the summary.  The index to drop is determined by &lt;tt&gt;Downsampling.getSamplingPattern()&lt;/tt&gt;. The list of integers returned from &lt;tt&gt;Downsampling.getSamplingPattern(BASE_SAMPLING_LEVEL)&lt;/tt&gt; are the indexes that we&apos;ll drop for each round of downsampling.&lt;/p&gt;

&lt;p&gt;As an example, suppose BASE_SAMPLING_LEVEL is 16 instead of 128.  &lt;tt&gt;Downsampling.getSamplingPattern(16)&lt;/tt&gt; returns the following pattern:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;15, 7, 11, 3, 13, 5, 9, 1, 14, 6, 10, 2, 12, 4, 8, 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, when we move from sampling level 16 to 15, we&apos;ll drop the entry at index 15 (and repeat that for indexes 15 + (16 * 1), 15 + (16 * 2), 15 + (16 * 3), etc).  When we move from sampling level 15 to 14, we&apos;ll drop the entry at index 7 (and repeat as before, but take into account the fact that we&apos;ve already dropped the entry at index 15).  This pattern of dropping minimizes the maximum distance between remaining summary entries.&lt;/p&gt;

&lt;p&gt;Now, in practice, we will never move from sampling level 128 directly to level 127 because of IndexSummaryManager&apos;s &lt;tt&gt;DOWNSAMPLE_THRESHOLD&lt;/tt&gt;.  However, an index summary could go through multiple rounds of down and upsampling and arrive at level 127, so we need to be able to handle that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Further confusion to understanding Downsampling as a whole stems from the permission of a -1 index into getEffectiveIndexIntervalAfterIndex without explanation&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmm, yeah, looking at the code, I don&apos;t think we actually need to handle that.  I believe it is leftover logic from earlier in the development of the code when downsampling would remove the 0th index in an earlier round.  With the current code, the 0th index entry should always be present.  I&apos;ll make some changes to remove that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;and the fact that every effective interval is the same despite there being multiple avenues for calculating it&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure what you mean here. &lt;/p&gt;</comment>
                            <comment id="14382505" author="benedict" created="Thu, 26 Mar 2015 19:42:08 +0000"  >&lt;p&gt;OK, so it makes a lot more sense now that I realise the downsampling granularity can be so small - I was thrown by the &quot;BSL must be a power of two&quot; without an equivalent statement for the sampling itself, and in my head I just assumed it was all dealing with powers of 2 (so nothing technically wrong with the comments, just my interpretation of them). This also explains why the effective index intervals were always the same - with powers of 2 they would be. I wonder if we couldn&apos;t get a lot of the benefit of downsampling by sticking to powers of 2, as it might simplify the code significantly? The original indices, indices to skip, and effective intervals could each be implemented with approximately one simple statement. Not pushing for it, mind, just airing the question.&lt;/p&gt;

&lt;p&gt;Thanks for taking the time to explain, anyway, and with that clarification I am +1 the patch as stands.&lt;/p&gt;

&lt;p&gt;On the topic of the zero index always being present: I can vouch that this assumption breaks somewhere, because I assumed this to be the case when modifying IndexSummaryBuilder, and without a setNextSamplePosition(-minIndexInterval) it doesn&apos;t pass its test cases (i.e. initiating the first sample index deterministically to zero caused unit test failures). So we should perhaps track down where the logical flaw is, however minor it may be.&lt;/p&gt;</comment>
                            <comment id="14382831" author="thobbs" created="Thu, 26 Mar 2015 22:31:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;without a setNextSamplePosition(-minIndexInterval) it doesn&apos;t pass its test cases (i.e. initiating the first sample index deterministically to zero caused unit test failures)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I looked into this.  When I simply replaced the &lt;tt&gt;setNextSamplePosition(-minIndexInterval)&lt;/tt&gt; call with &lt;tt&gt;nextSamplePosition = 0&lt;/tt&gt;, I got failures in IndexSummaryManagerTest.  Perhaps that&apos;s what you were seeing?  It looks like the correct replacement for that line is:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;nextSamplePosition = 0;
indexIntervalMatches++;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;since we implicitly have an index interval match at 0.  With that code, the index summary related tests pass.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I wonder if we couldn&apos;t get a lot of the benefit of downsampling by sticking to powers of 2, as it might simplify the code significantly? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s true, it would simplify the code, we would just lose granularity in how the index summary memory pool is distributed.  I wouldn&apos;t be opposed to doing that, but I don&apos;t think it&apos;s a pressing issue yet.&lt;/p&gt;</comment>
                            <comment id="14382867" author="thobbs" created="Thu, 26 Mar 2015 22:47:10 +0000"  >&lt;p&gt;Since you +1&apos;ed the current patch, I went ahead and committed it as 7ff25f0d.  I can make a follow-up commit for the nextSamplePosition change if the proposed logic sounds correct to you.&lt;/p&gt;</comment>
                            <comment id="14383561" author="benedict" created="Fri, 27 Mar 2015 09:15:16 +0000"  >&lt;p&gt;I hate it when the explanation is simply that I&apos;m an idiot (or if I&apos;m charitable, that I forgot the reason). Given this explanation, I think either piece of code is as good as the other, so since it&apos;s your baby perhaps you can decide which you prefer?&lt;/p&gt;</comment>
                            <comment id="14383976" author="thobbs" created="Fri, 27 Mar 2015 15:11:06 +0000"  >&lt;p&gt;I&apos;m partial to the more explicit &lt;tt&gt;nextSamplePosition = 0&lt;/tt&gt;, so I&apos;ve committed that as f7856c22.  Thanks, I think that should wrap this ticket up.&lt;/p&gt;</comment>
                            <comment id="14386532" author="Hachmann" created="Mon, 30 Mar 2015 10:49:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I would like to thank you very much for the patch, as it helped us to fix the NPE as discussed in Cassandra-8851 and eliminate our pending compactions problem.&lt;/p&gt;

&lt;p&gt;Kind regards&lt;br/&gt;
Bj&#246;rn&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12707288" name="8993-2.1-v2.txt" size="9205" author="thobbs" created="Wed, 25 Mar 2015 19:07:53 +0000"/>
                            <attachment id="12707014" name="8993-2.1.txt" size="8082" author="thobbs" created="Tue, 24 Mar 2015 21:26:43 +0000"/>
                            <attachment id="12705569" name="8993.txt" size="3519" author="benedict" created="Thu, 19 Mar 2015 11:30:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[benedict]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26z0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>thobbs</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>