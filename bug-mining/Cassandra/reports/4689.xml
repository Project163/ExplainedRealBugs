<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:06:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13324] Outbound TCP connections ignore internode authenticator</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13324</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When creating an outbound connection pool and connecting from within andOutboundTcpConnection it doesn&apos;t check if internode authenticator will allow the connection. In practice this can cause a bunch of orphaned threads perpetually attempting to reconnect to an endpoint that is will never accept the connection.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13050599">CASSANDRA-13324</key>
            <summary>Outbound TCP connections ignore internode authenticator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aweisberg">Ariel Weisberg</assignee>
                                    <reporter username="aweisberg">Ariel Weisberg</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Mar 2017 15:49:42 +0000</created>
                <updated>Fri, 15 May 2020 08:01:35 +0000</updated>
                            <resolved>Mon, 27 Mar 2017 17:25:49 +0000</resolved>
                                        <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Streaming and Messaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15928274" author="aweisberg" created="Thu, 16 Mar 2017 15:30:27 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;code&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;utests&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;dtests&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...aweisberg:cassandra-13324-trunk?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13324-trunk-testall/6/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13324-trunk-dtest/5/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15929610" author="krummas" created="Fri, 17 Mar 2017 09:11:37 +0000"  >&lt;p&gt;+1 on the code - but seems the tests didn&apos;t run, I retriggered, feel free to commit if the tests look good&lt;/p&gt;</comment>
                            <comment id="15933481" author="aweisberg" created="Mon, 20 Mar 2017 20:29:37 +0000"  >&lt;p&gt;The tests found some bugs and I made a few small changes. I force pushed instead of adding a commit.&lt;/p&gt;

&lt;p&gt;It didn&apos;t compile because &lt;tt&gt;MessagingServiceTest&lt;/tt&gt; needed to pass in a &lt;tt&gt;MockBackpressureStrategy&lt;/tt&gt; to construct an &lt;tt&gt;OutboundTcpConnectionPool&lt;/tt&gt;. Also there were issues with &lt;tt&gt;DatabaseDescriptor.internodeAuthenticator&lt;/tt&gt; being null. Rather then add null checks I added made the config not nullable with a default of the allow all authenticator.&lt;/p&gt;</comment>
                            <comment id="15939297" author="aweisberg" created="Thu, 23 Mar 2017 22:06:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; can you review the last set of changes?&lt;/p&gt;</comment>
                            <comment id="15940188" author="krummas" created="Fri, 24 Mar 2017 11:42:04 +0000"  >&lt;p&gt;The new &lt;tt&gt;public static final IInternodeAuthenticator ALLOW_ALL&lt;/tt&gt; in &lt;tt&gt;IInternodeAuthenticator&lt;/tt&gt; should probably be removed as it is not used (alternative being to remove &lt;tt&gt;AllowAllInternodeAuthenticator.java&lt;/tt&gt;, but I guess people might be using that in config files)&lt;/p&gt;

&lt;p&gt;Feel free to do that on commit, +1&lt;/p&gt;</comment>
                            <comment id="15940995" author="aweisberg" created="Fri, 24 Mar 2017 19:28:28 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/732d1af866b91e5ba63e7e2a467d99d4cb90e11f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;732d1af866b91e5ba63e7e2a467d99d4cb90e11f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15941073" author="aweisberg" created="Fri, 24 Mar 2017 20:23:12 +0000"  >&lt;p&gt;&lt;tt&gt;MessagineService.getConnectionPool()&lt;/tt&gt; can now return null and there are callers not checking for null.&lt;/p&gt;</comment>
                            <comment id="15941214" author="aweisberg" created="Fri, 24 Mar 2017 21:50:03 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;code&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;utests&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;dtests&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...aweisberg:cassandra-13324-trunk-2?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13324-trunk-2-testall/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13324-trunk-2-dtest/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15941827" author="jjirsa" created="Sat, 25 Mar 2017 18:11:59 +0000"  >&lt;p&gt;Did you intend to change the behavior here: &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...aweisberg:cassandra-13324-trunk-2?expand=1#diff-af09288f448c37a525e831ee90ea49f9L539&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;getConnectionPool(expiredCallbackInfo.target).incrementTimeout() &lt;/a&gt; ? &lt;/p&gt;</comment>
                            <comment id="15942036" author="aweisberg" created="Sat, 25 Mar 2017 22:50:51 +0000"  >&lt;p&gt;Yes. It was double counting due to a merge error. It&apos;s incrementing already on the line above but with a null check.&lt;/p&gt;</comment>
                            <comment id="15942731" author="krummas" created="Mon, 27 Mar 2017 06:37:54 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15943683" author="aweisberg" created="Mon, 27 Mar 2017 17:25:44 +0000"  >&lt;p&gt;Merged additional changes in &lt;a href=&quot;https://github.com/apache/cassandra/commit/c86de2a9817aa45930afe181ae1891d2363393c7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;c86de2a9817aa45930afe181ae1891d2363393c7&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aweisberg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3bbtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>marcuse</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>