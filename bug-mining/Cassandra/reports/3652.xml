<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:55:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9743] Fix merging of rows in PartitionUpdate</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9743</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Something&apos;s not right with &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; when adding map or list entries. It breaks &lt;tt&gt;SELECT&lt;/tt&gt; queries that follow afterwards, inflating the resultset, and duplicating the rows multiple times.&lt;/p&gt;

&lt;p&gt;It manifests when a table has more than one collection, and we update them both with more than one item.&lt;/p&gt;

&lt;p&gt;Here is a gist with minimal reproducible code: &lt;a href=&quot;https://gist.github.com/iamaleksey/b6e9476fece029067729&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/iamaleksey/b6e9476fece029067729&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The bug is currently blocking &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6717&quot; title=&quot;Modernize schema tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6717&quot;&gt;&lt;del&gt;CASSANDRA-6717&lt;/del&gt;&lt;/a&gt; code for migration from old schema keyspace to a new one.&lt;/p&gt;

&lt;p&gt;P.S. I&apos;m assuming that the bug is in &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; because I couldn&apos;t reproduce in cqlsh. Could be that something&apos;s broken in the iterators, but trying to debug a cascade of them failed me.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12843003">CASSANDRA-9743</key>
            <summary>Fix merging of rows in PartitionUpdate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="aleksey">Aleksey Yeschenko</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jul 2015 21:39:15 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:05 +0000</updated>
                            <resolved>Tue, 7 Jul 2015 10:24:07 +0000</resolved>
                                        <fixVersion>3.0 alpha 1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14616336" author="slebresne" created="Tue, 7 Jul 2015 07:45:32 +0000"  >&lt;p&gt;&lt;tt&gt;PartitionUpdate&lt;/tt&gt; was not properly merging/moving rows when sorting them post updates. Attaching patch (that include the unit test). Note that I wouldn&apos;t worry on the details of how this all work since &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9705&quot; title=&quot;Simplify some of 8099&amp;#39;s concrete implementations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9705&quot;&gt;&lt;del&gt;CASSANDRA-9705&lt;/del&gt;&lt;/a&gt; is going to greatly simplify all this (it is arguably a bit over-complicated currently).&lt;/p&gt;</comment>
                            <comment id="14616460" author="iamaleksey" created="Tue, 7 Jul 2015 10:08:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14616477" author="slebresne" created="Tue, 7 Jul 2015 10:24:07 +0000"  >&lt;p&gt;Committed, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12743904" name="9743.txt" size="5599" author="slebresne" created="Tue, 7 Jul 2015 07:45:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gwn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>