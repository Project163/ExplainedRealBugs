<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:10:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-151] Exception after about 2000 inserts</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-151</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Wtih this client code and default configuration:&lt;/p&gt;

&lt;p&gt;int max = 100000;&lt;br/&gt;
Random random = new Random();&lt;br/&gt;
for (int a = 0; a &amp;lt; max; a  ) {&lt;br/&gt;
     System.out.println(a);&lt;br/&gt;
     client.insert(&quot;Table1&quot;, &quot;k1:&quot;   random.nextInt(Integer.MAX_VALUE), &quot;Super1:x&quot;, new byte[] &lt;/p&gt;
{ (byte) 1 }
&lt;p&gt;, 0);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;I get after about 2000 inserts&lt;/p&gt;

&lt;p&gt;DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-1-thread-1&amp;#93;&lt;/span&gt; 2009-05-07 20:04:30,942 StorageProxy.java (line 120) insert writing key k1:1355213513 to &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:7000&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;ROW-MUTATION-STAGE:4&amp;#93;&lt;/span&gt; 2009-05-07 20:04:30,942 RowMutationVerbHandler.java (line 99) Error in row mutation&lt;br/&gt;
java.io.EOFException&lt;br/&gt;
	at java.io.DataInputStream.readInt(Unknown Source)&lt;br/&gt;
	at org.apache.cassandra.db.SuperColumnSerializer.fillSuperColumn(SuperColumn.java:368)&lt;br/&gt;
	at org.apache.cassandra.db.SuperColumnSerializer.deserialize(SuperColumn.java:349)&lt;br/&gt;
	at org.apache.cassandra.db.SuperColumnSerializer.deserialize(SuperColumn.java:314)&lt;br/&gt;
	at org.apache.cassandra.db.ColumnFamily$ColumnFamilySerializer.deserialize(ColumnFamily.java:515)&lt;br/&gt;
	at org.apache.cassandra.db.ColumnFamily$ColumnFamilySerializer.deserialize(ColumnFamily.java:455)&lt;br/&gt;
	at org.apache.cassandra.db.RowMutationSerializer.defreezeTheMaps(RowMutation.java:374)&lt;br/&gt;
	at org.apache.cassandra.db.RowMutationSerializer.deserialize(RowMutation.java:384)&lt;br/&gt;
	at org.apache.cassandra.db.RowMutationSerializer.deserialize(RowMutation.java:337)&lt;br/&gt;
	at org.apache.cassandra.db.RowMutationVerbHandler.doVerb(RowMutationVerbHandler.java:69)&lt;br/&gt;
	at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:46)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&lt;br/&gt;
	at java.lang.Thread.run(Unknown Source)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424834">CASSANDRA-151</key>
            <summary>Exception after about 2000 inserts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="nk11">nk11</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 May 2009 17:13:36 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:38 +0000</updated>
                            <resolved>Mon, 11 May 2009 14:54:46 +0000</resolved>
                                                            <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12707005" author="nk11" created="Thu, 7 May 2009 17:17:29 +0000"  >&lt;p&gt;correction, I get it after much less, but at around 2000 inserts it freezes&lt;/p&gt;</comment>
                            <comment id="12707015" author="jbellis" created="Thu, 7 May 2009 17:27:21 +0000"  >&lt;p&gt;you need to specify three values for the column &quot;path&quot; in a supercolumn insert &amp;#8211; ColumnFamily:SuperColumn:subcolumn.  you are only specifying two (Super1:x).&lt;/p&gt;

&lt;p&gt;I will add a check for this on the server.&lt;/p&gt;</comment>
                            <comment id="12707026" author="nk11" created="Thu, 7 May 2009 18:25:04 +0000"  >&lt;p&gt;right... that was the exception, my fault.&lt;br/&gt;
the freeze is still there after the fix unfortunately. no exception in the logs this time&lt;/p&gt;</comment>
                            <comment id="12707046" author="jbellis" created="Thu, 7 May 2009 19:07:05 +0000"  >&lt;p&gt;the freeze is probably memory pressure like I said in IRC.  reduce your memtable settings to flush more often, or increase -Xmx in bin/cassandra.in. &lt;/p&gt;

&lt;p&gt;but first you should upgrade, i noticed your client code was out of date.&lt;/p&gt;</comment>
                            <comment id="12707059" author="nk11" created="Thu, 7 May 2009 19:30:14 +0000"  >&lt;p&gt;you were right, lowering the MemtableSizeInMB did it.&lt;/p&gt;</comment>
                            <comment id="12707074" author="jbellis" created="Thu, 7 May 2009 20:06:04 +0000"  >&lt;p&gt;more robust parameter checking for get_column&lt;/p&gt;</comment>
                            <comment id="12707169" author="junrao" created="Thu, 7 May 2009 22:52:42 +0000"  >&lt;p&gt;Patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="12708066" author="jbellis" created="Mon, 11 May 2009 14:54:46 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="12708854" author="hudson" created="Wed, 13 May 2009 09:26:39 +0000"  >&lt;p&gt;Integrated in Cassandra #73 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/73/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/73/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12407571" name="151.patch" size="4307" author="jbellis" created="Thu, 7 May 2009 20:06:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19570</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fx6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90974</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>