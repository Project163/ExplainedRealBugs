<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:22:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-17117] CQLSSTableWriter backwards compatibility fix for Date fields</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-17117</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;tt&gt;cassandra-all&lt;/tt&gt; library consumers of the CQLSSTableWriter class cannot easily create an appropriate instance of the &lt;tt&gt;LocalDate&lt;/tt&gt; class in order to write SSTables including dates, and the current implementation no longer accepts a &lt;tt&gt;int&lt;/tt&gt; value as a valid input as previous versions of the class would - we used to use &lt;tt&gt;((AbstractType)columnSpecification.type).decompose(value);&lt;/tt&gt; in order to serialize the value, but now we use the type codec&apos;s .serialize method. Unfortunately, this doesn&apos;t work when the consumer can&apos;t easily create the type needed (serialize, in the case of dates, takes a &lt;tt&gt;LocalDate&lt;/tt&gt; instance which is not easy to construct outside of Cassandra internal code).&lt;/p&gt;

&lt;p&gt;This can be worked around by catching the resulting &lt;tt&gt;ClassCastException&lt;/tt&gt; thrown from the &lt;tt&gt;serialize&lt;/tt&gt; call and falling back to the older &lt;tt&gt;decompose&lt;/tt&gt; implementation, which would maintain backwards-compatibility with other users of the CQLSSTableWriter in cases where they are passing integers for date fields, which used to work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13409875">CASSANDRA-17117</key>
            <summary>CQLSSTableWriter backwards compatibility fix for Date fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="drohrer">Doug Rohrer</assignee>
                                    <reporter username="drohrer">Doug Rohrer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Nov 2021 13:53:41 +0000</created>
                <updated>Fri, 27 May 2022 19:25:05 +0000</updated>
                            <resolved>Fri, 5 Nov 2021 08:27:47 +0000</resolved>
                                        <fixVersion>4.0.2</fixVersion>
                    <fixVersion>4.1-alpha1</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                    <component>Local/SSTable</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17438296" author="brandon.williams" created="Wed, 3 Nov 2021 21:01:10 +0000"  >&lt;p&gt;Not sure if you planned to add circle results, but I broke the circle config out into another commit and started jenkins CI:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-17117-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/1265/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/1265/badge/icon&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-17117-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/1264/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/1264/badge/icon&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17438303" author="drohrer" created="Wed, 3 Nov 2021 21:18:56 +0000"  >&lt;p&gt;Brandon:&lt;/p&gt;

&lt;p&gt;Thanks for doing that - I do have some Circle runs with just unit tests run at the moment (4.0 passed unit tests, trunk had a few unrelated failures). It looks like your 4.0 branch just didn&apos;t even start running unfortunately.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;4.0/jdk8 - &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/2/workflows/8ef3122d-1901-4099-a2cb-4ba56acd26b7/jobs/303&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/2/workflows/8ef3122d-1901-4099-a2cb-4ba56acd26b7/jobs/303&lt;/a&gt;&lt;br/&gt;
4.0 jdk11 - &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/2/workflows/e8061097-7f5c-4f12-a483-db4945d2c87c/jobs/301&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/2/workflows/e8061097-7f5c-4f12-a483-db4945d2c87c/jobs/301&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Trunk/jdk8 - &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/3/workflows/3c6d730f-c72d-4343-bcf5-d97f3ddd3196/jobs/308&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/3/workflows/3c6d730f-c72d-4343-bcf5-d97f3ddd3196/jobs/308&lt;/a&gt;&lt;br/&gt;
Trunk/jdk11 - &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/3/workflows/eb8566a6-0136-4f4e-b2c3-cd5d0bd6f0cb/jobs/307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/3/workflows/eb8566a6-0136-4f4e-b2c3-cd5d0bd6f0cb/jobs/307&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I can kick off the complete pre-commit Circle CI builds if that&apos;s useful at this point - just let me know.&lt;/p&gt;</comment>
                            <comment id="17438305" author="brandon.williams" created="Wed, 3 Nov 2021 21:23:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;It looks like your 4.0 branch just didn&apos;t even start&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I ninja-fixed that right before you commented. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I can kick off the complete pre-commit Circle CI builds if that&apos;s useful at this point - just let me know.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes please, more CI never hurts but things are a bit delicate right now so it&apos;s especially good to have.&lt;/p&gt;</comment>
                            <comment id="17438311" author="drohrer" created="Wed, 3 Nov 2021 21:37:41 +0000"  >&lt;p&gt;Here are all the workflows in Circle CI - I&apos;ve approved all of the pre-commit ones - will take time to work through the queue I&apos;m sure.&lt;/p&gt;

&lt;p&gt;Trunk &lt;br/&gt;
JDK11 - &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/3/workflows/581de388-4488-4789-8880-95d7faab7877&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/3/workflows/581de388-4488-4789-8880-95d7faab7877&lt;/a&gt;&lt;br/&gt;
JDK8 - &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/3/workflows/475b6807-199c-4cf0-a9e6-e2b63fc4e65d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/3/workflows/475b6807-199c-4cf0-a9e6-e2b63fc4e65d&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;4.0&lt;br/&gt;
JDK11 - &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/2/workflows/3efa087e-75e8-4794-99be-64c6475e3cab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/2/workflows/3efa087e-75e8-4794-99be-64c6475e3cab&lt;/a&gt;&lt;br/&gt;
JDK8 - &lt;a href=&quot;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/2/workflows/81e8a3ac-96ff-46a6-9c4c-0f5e68bdb276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/JeetKunDoug/cassandra/2/workflows/81e8a3ac-96ff-46a6-9c4c-0f5e68bdb276&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17438702" author="brandon.williams" created="Thu, 4 Nov 2021 12:59:25 +0000"  >&lt;p&gt;With the exception of the FullRepairCoordinatorTimeoutTest which is obviously not related, all the other failures appear known to me, so I think we&apos;re good. +1.&lt;/p&gt;</comment>
                            <comment id="17439077" author="beobal" created="Fri, 5 Nov 2021 08:27:21 +0000"  >&lt;p&gt;+1 LGTM too, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=drohrer&quot; class=&quot;user-hover&quot; rel=&quot;drohrer&quot;&gt;drohrer&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13035660" name="CASSANDRA-17117-4.0.patch" size="21628" author="drohrer" created="Wed, 3 Nov 2021 17:41:31 +0000"/>
                            <attachment id="13035665" name="CASSANDRA-17117-trunk.patch" size="21645" author="drohrer" created="Wed, 3 Nov 2021 20:30:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[drohrer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="13163" cascade-level=""><![CDATA[Code]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wew0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
        <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12350367">4.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/c96131035b309dcc8d716fb0a57ff9d46a8c5042&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/c96131035b309dcc8d716fb0a57ff9d46a8c5042&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Patches for 4.0 and trunk are attached - added an additional unit test to cover the backward-compatible and current cases to make sure both are still supported.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>