<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:28:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18778] Empty keystore_password no longer allowed on encryption_options</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18778</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18124&quot; title=&quot;Config parameter keystore_password should be nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18124&quot;&gt;&lt;del&gt;CASSANDRA-18124&lt;/del&gt;&lt;/a&gt; (introduced in 4.1.2 and 5.0) it is no longer possible to set an empty &lt;tt&gt;keystore_password&lt;/tt&gt; under &lt;tt&gt;client_encryption_options&lt;/tt&gt; or &lt;tt&gt;server_encryption_options&lt;/tt&gt; using the default implementation &lt;tt&gt;DefaultSslContextFactory&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;While keytool does not allow generating keystores with empty passwords, it does support reading them. It is not uncommon to use PKCS12 certificates generated by other tools (eg. openssl) that do not enforce passwords.&lt;/p&gt;

&lt;p&gt;The fix for this should be pretty straightforward, which should involve changing &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-4.1.2/src/java/org/apache/cassandra/security/FileBasedSslContextFactory.java#L128-L135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FileBasedSslContextFactory.validatePassword&lt;/a&gt; to only disallow null passwords (which would be consistent with previous versions). I will create pull requests against the relevant branches shortly.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception (org.apache.cassandra.exceptions.ConfigurationException) encountered during startup: Failed to initialize SSL
org.apache.cassandra.exceptions.ConfigurationException: Failed to initialize SSL
	at org.apache.cassandra.config.DatabaseDescriptor.applySslContext(DatabaseDescriptor.java:1155)
	at org.apache.cassandra.config.DatabaseDescriptor.applyAll(DatabaseDescriptor.java:390)
	at org.apache.cassandra.config.DatabaseDescriptor.daemonInitialization(DatabaseDescriptor.java:204)
	at org.apache.cassandra.config.DatabaseDescriptor.daemonInitialization(DatabaseDescriptor.java:188)
	at org.apache.cassandra.service.CassandraDaemon.applyConfig(CassandraDaemon.java:804)
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:747)
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:875)
Caused by: java.io.IOException: Failed to create SSL context using Native transport
	at org.apache.cassandra.security.SSLFactory.validateSslContext(SSLFactory.java:405)
	at org.apache.cassandra.config.DatabaseDescriptor.applySslContext(DatabaseDescriptor.java:1150)
	... 6 more
Caused by: java.lang.IllegalArgumentException: &apos;keystore_password&apos; must be specified
	at org.apache.cassandra.security.FileBasedSslContextFactory.validatePassword(FileBasedSslContextFactory.java:133)
	at org.apache.cassandra.security.FileBasedSslContextFactory.buildKeyManagerFactory(FileBasedSslContextFactory.java:151)
	at org.apache.cassandra.security.AbstractSslContextFactory.createNettySslContext(AbstractSslContextFactory.java:181)
	at org.apache.cassandra.security.SSLFactory.createNettySslContext(SSLFactory.java:168)
	at org.apache.cassandra.security.SSLFactory.validateSslContext(SSLFactory.java:355)
	... 7 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13547782">CASSANDRA-18778</key>
            <summary>Empty keystore_password no longer allowed on encryption_options</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrew.tolbert">Andy Tolbert</assignee>
                                    <reporter username="andrew.tolbert">Andy Tolbert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Aug 2023 20:53:00 +0000</created>
                <updated>Tue, 12 Sep 2023 13:02:58 +0000</updated>
                            <resolved>Mon, 28 Aug 2023 08:15:55 +0000</resolved>
                                        <fixVersion>4.1.4</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17756981" author="andrew.tolbert" created="Mon, 21 Aug 2023 16:05:11 +0000"  >&lt;p&gt;Isn&apos;t too much to the change needed for this, branches below.  Tentative branch pending review and ci test assistance from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jonmeredith&quot; class=&quot;user-hover&quot; rel=&quot;jonmeredith&quot;&gt;jonmeredith&lt;/a&gt; (thanks!)&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Source&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;cassandra-4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/tolbertam/cassandra/tree/C18778-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;cassandra-5.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/tolbertam/cassandra/tree/C18778-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/tolbertam/cassandra/tree/C18778-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17756990" author="smiklosovic" created="Mon, 21 Aug 2023 16:11:23 +0000"  >&lt;p&gt;hi&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maulin.vasavada&quot; class=&quot;user-hover&quot; rel=&quot;maulin.vasavada&quot;&gt;maulin.vasavada&lt;/a&gt;, I want to ask if this is OK with you too.&lt;/p&gt;</comment>
                            <comment id="17756997" author="andrew.tolbert" created="Mon, 21 Aug 2023 16:20:29 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; thanks, would appreciate additional eyes. &#160;I believe it may also be valid to pass a &lt;tt&gt;null&lt;/tt&gt; password to &lt;tt&gt;KeyStore.load&lt;/tt&gt; or &lt;tt&gt;KeyManagerFactory.init&lt;/tt&gt;, but Cassandra 4.0 also disallows null &lt;tt&gt;keystore_password&lt;/tt&gt; (but allows empty string) in config validation, so felt ok to keep doing the same for consistency:&lt;/p&gt;

&lt;p&gt;C* 4.0:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2023-08-11 19:37:43,595 ERROR [main] org.apache.cassandra.service.CassandraDaemon - Exception encountered during startup: Invalid yaml. Those properties [keystore_password] are not valid
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17757033" author="jonmeredith" created="Mon, 21 Aug 2023 17:29:24 +0000"  >&lt;p&gt;Running through CI&lt;/p&gt;

&lt;p&gt;CI Results (pending):&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Source&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Circle CI&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Jenkins&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;cassandra-4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/jonmeredith/cassandra/tree/commit_remote_branch/CASSANDRA-18778-cassandra-4.1-F8EF5D5E-1505-4998-83C2-77D5EF86AF6D&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jonmeredith/cassandra?branch=commit_remote_branch%2FCASSANDRA-18778-cassandra-4.1-F8EF5D5E-1505-4998-83C2-77D5EF86AF6D&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/2566/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;cassandra-5.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/jonmeredith/cassandra/tree/commit_remote_branch/CASSANDRA-18778-cassandra-5.0-F8EF5D5E-1505-4998-83C2-77D5EF86AF6D&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jonmeredith/cassandra?branch=commit_remote_branch%2FCASSANDRA-18778-cassandra-5.0-F8EF5D5E-1505-4998-83C2-77D5EF86AF6D&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-devbranch/2567/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/jonmeredith/cassandra/tree/commit_remote_branch/CASSANDRA-18778-trunk-F8EF5D5E-1505-4998-83C2-77D5EF86AF6D&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jonmeredith/cassandra?branch=commit_remote_branch%2FCASSANDRA-18778-trunk-F8EF5D5E-1505-4998-83C2-77D5EF86AF6D&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;build|unknown&amp;#93;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17757037" author="jonmeredith" created="Mon, 21 Aug 2023 17:39:10 +0000"  >&lt;p&gt;+1 from me, I don&apos;t think we considered existing deployments carefully enough when the check was upgraded from just null to empty string in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18124&quot; title=&quot;Config parameter keystore_password should be nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18124&quot;&gt;&lt;del&gt;CASSANDRA-18124&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17757041" author="andrew.tolbert" created="Mon, 21 Aug 2023 17:54:00 +0000"  >&lt;p&gt;I see some CI tests failing, I must have missed something on my patch...taking a look&lt;/p&gt;</comment>
                            <comment id="17757055" author="andrew.tolbert" created="Mon, 21 Aug 2023 18:31:16 +0000"  >&lt;p&gt;Must have missed staging something but pushed a tiny one-liner fix on each of my branches to fix the &lt;tt&gt;@Test&lt;/tt&gt; annotation&lt;/p&gt;</comment>
                            <comment id="17757650" author="smiklosovic" created="Tue, 22 Aug 2023 20:02:14 +0000"  >&lt;p&gt;Honestly, I have a hard time to understand this ticket. In  &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18124&quot; title=&quot;Config parameter keystore_password should be nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18124&quot;&gt;&lt;del&gt;CASSANDRA-18124&lt;/del&gt;&lt;/a&gt; we made it possible to have nullable password. But here I see&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (password == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;keystore_password&apos;&lt;/span&gt; must be specified&quot;&lt;/span&gt;);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That does not make sense to me. So the previous ticket was wrong?&lt;/p&gt;

&lt;p&gt;EDIT&lt;/p&gt;

&lt;p&gt;Ahaaa I get that ..&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; keystorePasswordEmpty = StringUtils.isEmpty(password);
        - &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (keystorePasswordEmpty)
        + &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (password == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isEmpty(CharSequence cs) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cs == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || cs.length() == 0;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, basically, the previous version was throwing exception if it was null OR empty.&lt;/p&gt;

&lt;p&gt;Now we throw if it is just null.&lt;/p&gt;

</comment>
                            <comment id="17757653" author="andrew.tolbert" created="Tue, 22 Aug 2023 20:14:56 +0000"  >&lt;p&gt;My understanding of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18124&quot; title=&quot;Config parameter keystore_password should be nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18124&quot;&gt;&lt;del&gt;CASSANDRA-18124&lt;/del&gt;&lt;/a&gt; was that it was oriented towards allowing &lt;tt&gt;keystore_password&lt;/tt&gt; to be nullable for the &lt;tt&gt;PEMBasedSslContextFactory&lt;/tt&gt;-based implementation to allow null/empty passwords, which it previously didn&apos;t.  A side effect of this change was also that the default &lt;tt&gt;FileBasedSslContextFactory&lt;/tt&gt; was changed to additionally validate the password to ensure it was non-null/empty&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.   This validation did not previously exist, and since &lt;tt&gt;KeyStore&lt;/tt&gt; does allow empty passwords, this could be a regression for someone upgrading from 4.0 to 4.1.2+ where empty password PKCS12 keystores were used.  It&apos;s probably not a common use case, but was something I encountered myself during testing.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: &lt;a href=&quot;https://github.com/apache/cassandra/commit/bd49f6ff265c8bfa64bf140328ae6736dc4a87bd#diff-559a53285872c51f496ae3319425977f741ae2f3a359c2da674403294e17297e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/bd49f6ff265c8bfa64bf140328ae6736dc4a87bd#diff-559a53285872c51f496ae3319425977f741ae2f3a359c2da674403294e17297e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17757655" author="andrew.tolbert" created="Tue, 22 Aug 2023 20:17:10 +0000"  >&lt;blockquote&gt;
&lt;p&gt;So, basically, the previous version was throwing exception if it was null OR empty.&lt;br/&gt;
Now we throw if it is just null.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yep!  That&apos;s what I am aiming for, which was the previous behavior I&apos;d observed in C* 4.0.  Technically &lt;tt&gt;null&lt;/tt&gt; could be allowed I suspect, but I figured for consistency it should behave the same way (use an empty string for &lt;tt&gt;keystore_password&lt;/tt&gt; when there is no password, fail when null)&lt;/p&gt;</comment>
                            <comment id="17757656" author="smiklosovic" created="Tue, 22 Aug 2023 20:18:30 +0000"  >&lt;p&gt;Ah right ... thank you for the explanation.&lt;/p&gt;

&lt;p&gt;pinging &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rtib&quot; class=&quot;user-hover&quot; rel=&quot;rtib&quot;&gt;rtib&lt;/a&gt; to raise awareness about this. Are you around to take a look / acknowledge this change?&lt;/p&gt;</comment>
                            <comment id="17758862" author="smiklosovic" created="Fri, 25 Aug 2023 07:34:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.tolbert&quot; class=&quot;user-hover&quot; rel=&quot;andrew.tolbert&quot;&gt;andrew.tolbert&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;as I am reading that patch ... what about truststores? Should not we apply same logic there?&lt;/p&gt;

&lt;p&gt;I built it all one more time on more recent branches:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3008/workflows/374c4d90-ff16-414f-b1e1-3dd7974bfd22&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1 j11&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3008/workflows/85477c44-162e-4fab-9d17-f0efd7af5fef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1 j8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3013/workflows/2bd35adf-87ea-4bf8-88d4-1005c80ce999&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0 j17&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3013/workflows/9d8d83dd-f283-4ec8-a9ff-43f410801ced&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0 j11&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3012/workflows/699cf0d5-fb26-4c76-8e46-48db627aaec6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk j17&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/3012/workflows/1dfba849-060f-4440-90ef-1349e937d2f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk j11&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17759060" author="andrew.tolbert" created="Fri, 25 Aug 2023 14:00:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;as I am reading that patch ... what about truststores? Should not we apply same logic there?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is a good question. It looks like there is no such validation on trust store password, and looks like its allowed to be null or empty, and there is an existing test for this (&lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/test/unit/org/apache/cassandra/security/FileBasedSslContextFactoryTest.java#L167-L179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testEmptyTrustStorePassword&lt;/a&gt;) so we should be covered well there.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I built it all one more time on more recent branches&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Awesome, thank you!&lt;/p&gt;</comment>
                            <comment id="17761971" author="rtib" created="Tue, 5 Sep 2023 07:06:30 +0000"  >&lt;p&gt;Hi, thanks for pinging. Sorry for the delayed response, I&apos;m just back from holidays.&lt;/p&gt;

&lt;p&gt;I&apos;ve just tested 5.0-alpha1 (take3) on my test cluster set up with PEMBasedSslContextFactory which has required &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18124&quot; title=&quot;Config parameter keystore_password should be nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18124&quot;&gt;&lt;del&gt;CASSANDRA-18124&lt;/del&gt;&lt;/a&gt;. The patch seems not inflicting with the features used there.&lt;/p&gt;

&lt;p&gt;LGTM&lt;/p&gt;</comment>
                            <comment id="17762263" author="maulin.vasavada" created="Wed, 6 Sep 2023 04:23:23 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.tolbert&quot; class=&quot;user-hover&quot; rel=&quot;andrew.tolbert&quot;&gt;andrew.tolbert&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smiklosovic&quot; class=&quot;user-hover&quot; rel=&quot;smiklosovic&quot;&gt;smiklosovic&lt;/a&gt; sorry I am late looking at this but I read the details here. Interestingly when we did &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18124&quot; title=&quot;Config parameter keystore_password should be nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18124&quot;&gt;&lt;del&gt;CASSANDRA-18124&lt;/del&gt;&lt;/a&gt; changes, we did talk about this exact issue- What to do with password check for the JKS based keystores- as you would be able to notice in that ticket,&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13062717/13062717_image-2023-09-05-21-13-06-602.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So at that point we decided to go with enforcing the JKS keystores to have the password. However, based on what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.tolbert&quot; class=&quot;user-hover&quot; rel=&quot;andrew.tolbert&quot;&gt;andrew.tolbert&lt;/a&gt; mentions here about PKCS12 keystores generated without a password via OpenSSL makes a valid case in terms of `What tools allow?`. In the Keytool/Java it clearly gives a warning when we read keystores without a password that the authenticity of the data can&apos;t be verified without the password and that made me think about the password&apos;s necessity for the JKS keystores. So while from the operational standpoint I would still think we should specify password for the keystore, if the tooling from OpenSSL allows passwordless keystore creation, we can make this exception to cover for it.&lt;/p&gt;

&lt;p&gt;For the Truststores, however I think we can live without password since it is just a collection of `public keys` and authenticity like keystore may be considered optional. That was the primary thinking that resulted into the state of code that we have prior to this change.&lt;/p&gt;

&lt;p&gt;One challenge, if I recollect it right, I ran into was- in the YAML file I could not simulate the `null` password because there was a default of `empty string` somewhere (most likely EncryptionOptions.java). Based on what I see in your changes that got merged- I see that you are testing for `null` case from the code and not from the YAML. Just something to double-click on and see if there is anything we need to do more. If practically YAML file makes it difficult to have a possibility of `null` password, the &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18124&quot; title=&quot;Config parameter keystore_password should be nullable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18124&quot;&gt;&lt;del&gt;CASSANDRA-18124&lt;/del&gt;&lt;/a&gt; should not create a backward incompatibility issue in my opinion.&lt;/p&gt;

&lt;p&gt;All-in-all, I don&apos;t mind having to support keystores without passwords and don&apos;t feel it may be worth requiring passwords for the truststores &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13062717" name="image-2023-09-05-21-13-06-602.png" size="188968" author="maulin.vasavada" created="Wed, 6 Sep 2023 04:13:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[andrew.tolbert]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="13163" cascade-level=""><![CDATA[Code]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jv2o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jonmeredith]]></customfieldvalue>
        <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12352689">4.1.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/b47bee42d3b15020fbae72b173e873fa57c8e0c8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/b47bee42d3b15020fbae72b173e873fa57c8e0c8&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;CI&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>