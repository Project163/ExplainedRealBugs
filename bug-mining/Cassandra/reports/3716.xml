<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:55:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9998] LEAK DETECTED with snapshot/sequential repairs</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9998</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/job/cassandra-2.1_dtest/lastCompletedBuild/testReport/repair_test/TestRepair/simple_sequential_repair_test/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-2.1_dtest/lastCompletedBuild/testReport/repair_test/TestRepair/simple_sequential_repair_test/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;does not happen if I add -par to the test&lt;/p&gt;</description>
                <environment></environment>
        <key id="12852551">CASSANDRA-9998</key>
            <summary>LEAK DETECTED with snapshot/sequential repairs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="marcuse">Marcus Eriksson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2015 11:10:41 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:01 +0000</updated>
                            <resolved>Fri, 7 Aug 2015 06:30:53 +0000</resolved>
                                        <fixVersion>2.1.9</fixVersion>
                    <fixVersion>2.2.1</fixVersion>
                    <fixVersion>3.0 beta 1</fixVersion>
                                    <component>Legacy/Streaming and Messaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14660028" author="krummas" created="Thu, 6 Aug 2015 13:45:59 +0000"  >&lt;p&gt;patch here: &lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/9998&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/9998&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;tests here eventually (first run is probably the old patch):&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9998-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9998-dtest/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9998-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9998-testall/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14661382" author="benedict" created="Fri, 7 Aug 2015 06:07:14 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14661395" author="krummas" created="Fri, 7 Aug 2015 06:30:53 +0000"  >&lt;p&gt;committed, thanks&lt;/p&gt;</comment>
                            <comment id="14711323" author="cburroughs" created="Tue, 25 Aug 2015 14:06:19 +0000"  >&lt;p&gt;I&apos;m running into this and trying to better understand the severity.  The messages certainly *&lt;b&gt;sound&lt;/b&gt;* very bad.  Can this lead to data loss or corruption?&lt;/p&gt;</comment>
                            <comment id="14711357" author="benedict" created="Tue, 25 Aug 2015 14:26:21 +0000"  >&lt;p&gt;No, this message indicates that everything is now fine, but there is a programmer error that caused a resource to not be released before it was GC&apos;d (and was then released on GC). I guess we should change the message that is printed to make clear to operators that there is no need to panic, but there is a need to visit JIRA and inform us of the message. This message indicates the possibility of otherwise available resources (including memory) being unusable for extended periods (i.e. until GC occurs)&lt;/p&gt;

&lt;p&gt;Could you doublecheck this is definitely the same instance of the message, and if not file a separate bug report? The basic message is potentially universal, as it covers any number of objects and uses across the codebase. If you could enable &lt;tt&gt;-Dcassandra.debugregcount=true&lt;/tt&gt;, and check the stack traces it produces are the same (or if you could apply this fix and confirm the errors disappear), I&apos;d appreciate it &lt;/p&gt;</comment>
                            <comment id="14713538" author="cburroughs" created="Wed, 26 Aug 2015 14:34:35 +0000"  >&lt;p&gt;I pushed this patch to one of our clusters and ran repair.  No LEAK messages appeared.&lt;/p&gt;</comment>
                            <comment id="14713540" author="benedict" created="Wed, 26 Aug 2015 14:35:46 +0000"  >&lt;p&gt;Great. Thanks!&lt;/p&gt;</comment>
                            <comment id="15892845" author="kuzminva" created="Thu, 2 Mar 2017 19:31:00 +0000"  >&lt;p&gt;I still observe it at Cassandra 2.2.5:&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;ValidationExecutor:29&amp;#93;&lt;/span&gt; 2017-02-13 00:10:38,903 CompactionManager.java:1086 - Cannot start multiple repair sessions over the same sstables&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;ValidationExecutor:29&amp;#93;&lt;/span&gt; 2017-02-13 00:10:38,903 Validator.java:246 - Failed creating a merkle tree for &lt;a href=&quot;#aea6e561-f180-11e6-9f5c-8fee5bd1c5f8 on logdb/tomcat_sessions, (5876725599440613959,5877112887947005799&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #aea6e561-f180-11e6-9f5c-8fee5bd1c5f8 on logdb/tomcat_sessions, (5876725599440613959,5877112887947005799&lt;/a&gt;], /10.145.144.71 (see log for details)&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;ValidationExecutor:29&amp;#93;&lt;/span&gt; 2017-02-13 00:10:38,904 CassandraDaemon.java:185 - Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;ValidationExecutor:29,1,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;Reference-Reaper:1&amp;#93;&lt;/span&gt; 2017-02-13 00:10:49,560 Ref.java:187 - LEAK DETECTED: a reference (org.apache.cassandra.utils.concurrent.Ref$State@1387fbb6) to class org.apache.cassandra.io.sstable.format.SSTableReader$InstanceTidier@1451583394:/storage/core/loginsight/cidata/cassandra/data/logdb/tomcat_sessions-2ef89820cc0711e6bc7253e2bf7d3086/la-357-big was not released before the reference was garbage collected&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;Reference-Reaper:1&amp;#93;&lt;/span&gt; 2017-02-13 00:10:49,561 Ref.java:187 - LEAK DETECTED: a reference (org.apache.cassandra.utils.concurrent.Ref$State@33992414) to class org.apache.cassandra.io.sstable.format.SSTableReader$InstanceTidier@1729712987:/storage/core/loginsight/cidata/cassandra/data/logdb/tomcat_sessions-2ef89820cc0711e6bc7253e2bf7d3086/la-356-big was not released before the reference was garbage collected&lt;/p&gt;

&lt;p&gt;Is it a new or patch wasn&apos;t applied to 2.2.5 version?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2iez3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>benedict</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[benedict]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>