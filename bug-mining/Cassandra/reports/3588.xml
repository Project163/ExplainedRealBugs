<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:54:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9501] ColumnFamilyStoreTest.testSliceByNamesCommandOldMetadata failing</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9501</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Testcase: testSliceByNamesCommandOldMetadata(org.apache.cassandra.db.ColumnFamilyStoreTest):        FAILED
    [junit] null
    [junit] junit.framework.AssertionFailedError
    [junit]     at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:171)
    [junit]     at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:166)
    [junit]     at org.apache.cassandra.io.sstable.format.SSTableWriter.rename(SSTableWriter.java:266)
    [junit]     at org.apache.cassandra.db.ColumnFamilyStore.loadNewSSTables(ColumnFamilyStore.java:766)
    [junit]     at org.apache.cassandra.db.ColumnFamilyStoreTest.testSliceByNamesCommandOldMetadata(ColumnFamilyStoreTest.java:1125)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12833492">CASSANDRA-9501</key>
            <summary>ColumnFamilyStoreTest.testSliceByNamesCommandOldMetadata failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="jmckenzie">Josh McKenzie</assignee>
                                    <reporter username="jmckenzie">Josh McKenzie</reporter>
                        <labels>
                            <label>test</label>
                    </labels>
                <created>Thu, 28 May 2015 16:53:39 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:07 +0000</updated>
                            <resolved>Thu, 24 Aug 2017 12:13:06 +0000</resolved>
                                        <fixVersion>2.2.x</fixVersion>
                                    <component>Legacy/Local Write-Read Paths</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14564921" author="jmckenzie" created="Fri, 29 May 2015 14:56:40 +0000"  >&lt;p&gt;v1 attached.&lt;/p&gt;

&lt;p&gt;Reproduced the problem on linux as well so it&apos;s not Windows-specific. Running the test in isolation doesn&apos;t produce the error, so I added a trivial truncate of the cfs used in this test and it resolves the error.&lt;/p&gt;</comment>
                            <comment id="14564940" author="jbellis" created="Fri, 29 May 2015 15:09:50 +0000"  >&lt;p&gt;That kind of puzzles me since it&apos;s already doing clearUnsafe, so there shouldn&apos;t be anything left to truncate after that ...&lt;/p&gt;</comment>
                            <comment id="14564982" author="jmckenzie" created="Fri, 29 May 2015 15:45:58 +0000"  >&lt;p&gt;I should have clarified - it&apos;s the blocking that I&apos;m using it for. I can also throw a sleep in there and the test passes so long as the cfs.clearUnsafe() call is allowed to finish before the test bulldozes forward and calls cfs.loadNewSSTables();&lt;/p&gt;</comment>
                            <comment id="14564996" author="jbellis" created="Fri, 29 May 2015 15:59:44 +0000"  >&lt;p&gt;Should we just make clearUnsafe blocking instead?&lt;/p&gt;</comment>
                            <comment id="14565054" author="jmckenzie" created="Fri, 29 May 2015 16:52:03 +0000"  >&lt;p&gt;I&apos;d rather not change clearUnsafe as there&apos;s 48 users of the method that may or may not be relying on its current behavior.&lt;/p&gt;

&lt;p&gt;We should just change the clearUnsafe to truncateBlocking in this failing test; the test should be run in isolation w/regards to the data on disk, metadata nuking, and reloading rather than have cruft leftover on disk from previous tests. clearUnsafe is the incorrect method to call in this context so rather than changing that, let&apos;s just call the correct method.&lt;/p&gt;

&lt;p&gt;Attached trivial v2.&lt;/p&gt;</comment>
                            <comment id="14565098" author="jbellis" created="Fri, 29 May 2015 17:23:40 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14565120" author="jmckenzie" created="Fri, 29 May 2015 17:40:46 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="14580946" author="aweisberg" created="Wed, 10 Jun 2015 18:51:50 +0000"  >&lt;p&gt;Still failing  &lt;a href=&quot;http://cassci.datastax.com/view/trunk/job/trunk_testall/147/testReport/junit/org.apache.cassandra.db/ColumnFamilyStoreTest/testSliceByNamesCommandOldMetadata_compression/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/trunk/job/trunk_testall/147/testReport/junit/org.apache.cassandra.db/ColumnFamilyStoreTest/testSliceByNamesCommandOldMetadata_compression/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Let me know if you want me to take it.&lt;/p&gt;</comment>
                            <comment id="14581032" author="jmckenzie" created="Wed, 10 Jun 2015 20:29:17 +0000"  >&lt;p&gt;Feel free - I&apos;m quite busy with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9418&quot; title=&quot;Fix dtests on 2.2 branch on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9418&quot;&gt;&lt;del&gt;CASSANDRA-9418&lt;/del&gt;&lt;/a&gt; so if you have bandwidth for this one that would be great.&lt;/p&gt;</comment>
                            <comment id="14581035" author="aweisberg" created="Wed, 10 Jun 2015 20:31:05 +0000"  >&lt;p&gt;The most frequently failing tests right now are the pig tests so I am going to go for those since that is best bang for buck stability wise. I&apos;ll update this if I start.&lt;/p&gt;</comment>
                            <comment id="14629916" author="jmckenzie" created="Thu, 16 Jul 2015 15:51:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aweisberg&quot; class=&quot;user-hover&quot; rel=&quot;aweisberg&quot;&gt;aweisberg&lt;/a&gt; Is this still a thing?&lt;/p&gt;</comment>
                            <comment id="15588638" author="sean.mccarthy" created="Wed, 19 Oct 2016 12:35:39 +0000"  >&lt;p&gt;This is still failing.&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/job/cassandra-2.2_testall/594/testReport/org.apache.cassandra.db/ColumnFamilyStoreTest/testSliceByNamesCommandOldMetadata_compression/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-2.2_testall/594/testReport/org.apache.cassandra.db/ColumnFamilyStoreTest/testSliceByNamesCommandOldMetadata_compression/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16139956" author="jmckenzie" created="Thu, 24 Aug 2017 12:13:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://cassci.datastax.com/view/cassandra-2.2/job/cassandra-2.2_utest/lastCompletedBuild/testReport/org.apache.cassandra.db/ColumnFamilyStoreTest/testSliceByNamesCommandOldMetadata/history/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Test is clean now&lt;/a&gt;. Closing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12833827">CASSANDRA-9511</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12834312">CASSANDRA-9524</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12736157" name="9501_v1.txt" size="685" author="joshuamckenzie" created="Fri, 29 May 2015 14:56:40 +0000"/>
                            <attachment id="12736183" name="9501_v2.txt" size="727" author="joshuamckenzie" created="Fri, 29 May 2015 16:52:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jmckenzie]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fbxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>