<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:26:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-17848] Fix incorrect resource name in LIST PERMISSION output</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-17848</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When producing the resource name, it seems to assume that the content in the `[]` is the function&apos;s input type, where it could also be part of the function name, as long as it is quoted. Here is an example to reproduce. In cqlsh,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;gt; CREATE FUNCTION test.&lt;span class=&quot;code-quote&quot;&gt;&quot;admin_created_udf[org.apache.cassandra.db.marshal.LongType]&quot;&lt;/span&gt;(input &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) RETURNS NULL ON NULL INPUT RETURNS &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; LANGUAGE java AS &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42;&apos;&lt;/span&gt;;

&amp;gt; LIST EXECUTE OF user;
 role  | username | resource                                | permission
-------+----------+-----------------------------------------+------------
 user  |    user  | &amp;lt;function test.admin_created_udf(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)&amp;gt; |    EXECUTE

(1 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The input should be &quot;int&quot;, but in the output, it says &quot;long&quot;. &lt;/p&gt;

&lt;p&gt;If the content enclosed by &quot;[]&quot; is not a valid class, the LIST PERMISSION request always fails for the user with &quot;ConfigurationException: Unable to find abstract-type class&quot;.&lt;/p&gt;

&lt;p&gt;The bug is discovered by Piotr Sarna.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13478058">CASSANDRA-17848</key>
            <summary>Fix incorrect resource name in LIST PERMISSION output</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yifanc">Yifan Cai</assignee>
                                    <reporter username="yifanc">Yifan Cai</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Aug 2022 17:20:40 +0000</created>
                <updated>Tue, 12 Sep 2023 13:03:05 +0000</updated>
                            <resolved>Tue, 6 Dec 2022 03:02:20 +0000</resolved>
                                        <fixVersion>3.0.29</fixVersion>
                    <fixVersion>3.11.15</fixVersion>
                    <fixVersion>4.0.8</fixVersion>
                    <fixVersion>4.1.1</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>CQL/Interpreter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17630665" author="yifanc" created="Tue, 8 Nov 2022 23:48:10 +0000"  >&lt;p&gt;The root cause of the confusing value for the &lt;tt&gt;resource&lt;/tt&gt; column is located at &lt;tt&gt;org.apache.cassandra.auth.FunctionResource#fromName&lt;/tt&gt;. The implementation assumes the special characters (i.e. /, [ and ]) are not used in the function name, and uses those characters to parse the encoded function name string read from role_permissions table. &lt;br/&gt;
However, quoted text is allowed as function names. It is permitted to have those characters in the function names, which breaks the parsing logic. &lt;/p&gt;

&lt;p&gt;In addition to the example in the description, it is allowed to create a function with `/` in the name, as long as it is quoted. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE FUNCTION cql_test_keyspace.&lt;span class=&quot;code-quote&quot;&gt;&quot;my/amazing/udf&quot;&lt;/span&gt;(input &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) RETURNS NULL ON NULL INPUT RETURNS &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; LANGUAGE java AS &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 42;&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Once the UDF is created, listing permission on the role breaks since `/` is used to determine if a resource is valid or not. &lt;/p&gt;</comment>
                            <comment id="17630674" author="yifanc" created="Wed, 9 Nov 2022 00:38:31 +0000"  >&lt;p&gt;Basically there are 2 possible solutions. &lt;br/&gt;
1. Reject at the UDF creation when its name contains any of the special character &apos;/&apos;, &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39; and &amp;#39;&amp;#93;&lt;/span&gt;&apos;. Those characters should be rarely needed as part of the function names. It requires to update the disallowed characters list when a new special character is introduced in the future. &lt;br/&gt;
2. Patch the &lt;tt&gt;FunctionResource#fromName&lt;/tt&gt; implementation to first locate the last `&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;` segment (as the function&apos;s argument list) and treat whatever appears before it as the function name. Sounds error-prone. &lt;/p&gt;

&lt;p&gt;I&apos;d lean towards the approach 1. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;bereng&lt;/a&gt;, wondering what is your preference since you both have touched the method in question. &lt;/p&gt;</comment>
                            <comment id="17630762" author="bereng" created="Wed, 9 Nov 2022 05:55:57 +0000"  >&lt;p&gt;#1 is the obvious preference. The problem is going to be with backwards compatibility. I think we can safely and reasonably argue this is a bug and an accident waiting to happen that needs fixing. It might impact some users obviously but then again, it&apos;s a bug in my eyes. Happy to hear more opinions.&lt;/p&gt;</comment>
                            <comment id="17630853" author="beobal" created="Wed, 9 Nov 2022 08:30:54 +0000"  >&lt;p&gt;I agree, we should apply more strict validation when creating functions/aggregates to prevent this from happening. Unfortunately though, I&apos;m afraid we also have to handle existing cases in the wild, so we may need to do (some of) both #1 and #2.&lt;/p&gt;

&lt;p&gt;If actually using functions with these problematic names works, perhaps we can localise a custom parsing implementation to `ListPermissionsStatement`, leave `FunctionResource#fromName` as it is and tighten up the naming rules going forward? &#160;On the other hand, if functions named this way are completely unusable, then backwards compatibility is not such an issue and #1 alone is probably sufficient.&lt;/p&gt;</comment>
                            <comment id="17631210" author="yifanc" created="Wed, 9 Nov 2022 18:29:53 +0000"  >&lt;p&gt;The issue is on listing the permissions only. It either parses the stored function name incorrectly or fails to parse. Invoking/using those functions are allowed. &lt;/p&gt;

&lt;p&gt;For example, the below SELECT statement runs just fine (and returns 42 as defined in the function body). &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT a, b, cql_test_keyspace.&lt;span class=&quot;code-quote&quot;&gt;&quot;admin_created_udf[org.apache.cassandra.db.marshal.LongType]&quot;&lt;/span&gt;(a, b) FROM cql_test_keyspace.tbl WHERE a = 1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If Cassandra no longer permits creating function with the disallowed characters, the existing function should not be affected. They can still be used like the above example. However, it does not fix the broken output form listing permissions. &lt;/p&gt;

&lt;p&gt;So, as Sam said, we need to do both #1 and #2. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;perhaps we can localise a custom parsing implementation to `ListPermissionsStatement`, leave `FunctionResource#fromName` as it is and tighten up the naming rules going forward?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think `FunctionResource#fromName` is the right place to have the parsing logic. Maybe I am missing something? &lt;/p&gt;</comment>
                            <comment id="17631375" author="yifanc" created="Thu, 10 Nov 2022 01:26:34 +0000"  >&lt;p&gt;The patch could be like this&#160;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1992&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/1992&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17631529" author="bereng" created="Thu, 10 Nov 2022 08:56:28 +0000"  >&lt;p&gt;I see you mentioned CI but maybe forgot to add the link to the run?&lt;/p&gt;</comment>
                            <comment id="17631893" author="yifanc" created="Thu, 10 Nov 2022 19:46:28 +0000"  >&lt;p&gt;I originally wanted to only post the patch.&lt;/p&gt;

&lt;p&gt;Here is the link to CI. &lt;a href=&quot;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=CASSANDRA-17848%2Ftrunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=CASSANDRA-17848%2Ftrunk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17635567" author="yifanc" created="Thu, 17 Nov 2022 23:29:54 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;bereng&lt;/a&gt;&#160;, can either of you review?&#160;&lt;/p&gt;</comment>
                            <comment id="17635671" author="bereng" created="Fri, 18 Nov 2022 06:11:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yifanc&quot; class=&quot;user-hover&quot; rel=&quot;yifanc&quot;&gt;yifanc&lt;/a&gt; I looked into it when you posted the PRs and at the first pass It looked ok. But I am busy atm with some perf testing. I have not forgotten, I am just doing other suff but will come back.&lt;/p&gt;</comment>
                            <comment id="17638687" author="beobal" created="Fri, 25 Nov 2022 15:58:34 +0000"  >&lt;p&gt;+1 modulo a typo in the tests (I left a comment on the PR). We should backport as far as 3.0, though I think that will be trivial.&lt;/p&gt;</comment>
                            <comment id="17639808" author="bereng" created="Mon, 28 Nov 2022 06:17:25 +0000"  >&lt;p&gt;I have been looking at this one also. I would only add we&apos;d need to run j11 CI as well, j8 is already green, but +1 otherwise.&lt;/p&gt;</comment>
                            <comment id="17640266" author="yifanc" created="Mon, 28 Nov 2022 21:23:13 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Source&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Circle CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;cassandra-3.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/yifan-c/cassandra/tree/commit_remote_branch/CASSANDRA-17848-cassandra-3.0-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=commit_remote_branch%2FCASSANDRA-17848-cassandra-3.0-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;cassandra-3.11&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/yifan-c/cassandra/tree/commit_remote_branch/CASSANDRA-17848-cassandra-3.11-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=commit_remote_branch%2FCASSANDRA-17848-cassandra-3.11-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;cassandra-4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/yifan-c/cassandra/tree/commit_remote_branch/CASSANDRA-17848-cassandra-4.0-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=commit_remote_branch%2FCASSANDRA-17848-cassandra-4.0-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;cassandra-4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/yifan-c/cassandra/tree/commit_remote_branch/CASSANDRA-17848-cassandra-4.1-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=commit_remote_branch%2FCASSANDRA-17848-cassandra-4.1-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/yifan-c/cassandra/tree/commit_remote_branch/CASSANDRA-17848-trunk-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=commit_remote_branch%2FCASSANDRA-17848-trunk-CC2B132A-B8D3-4BFC-9DCC-56A4CEABCA33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17640416" author="bereng" created="Tue, 29 Nov 2022 06:36:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yifanc&quot; class=&quot;user-hover&quot; rel=&quot;yifanc&quot;&gt;yifanc&lt;/a&gt; I moved it back to &apos;review in progress&apos;. AFAIK we only move it to &apos;ready to commit&apos; once we have reviewed all branches, all CI is green and you get the +1 for all branches.&lt;/p&gt;

&lt;p&gt;Regarding the circle runs it seems sthg went wrong failing most of your runs.&lt;/p&gt;</comment>
                            <comment id="17640846" author="yifanc" created="Tue, 29 Nov 2022 17:21:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;bereng&lt;/a&gt;, you are right. Thank you for updating the ticket state! I will take care of the CI runs. &lt;/p&gt;</comment>
                            <comment id="17641065" author="yifanc" created="Wed, 30 Nov 2022 05:13:58 +0000"  >&lt;p&gt;The CI runs of cssandra-4.1 and trunk based branches show green result.&lt;br/&gt;
The runs of the other branches have failures. Some of them are flaky, and some of them also appear in the Jenkins build results (on &lt;a href=&quot;https://ci-cassandra.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org&lt;/a&gt;). &lt;br/&gt;
All of the failures are not related with the changes added in this patch. Other pairs of eyes will appreciated! &lt;/p&gt;

&lt;p&gt;Regarding the changes, on the 4.x branches, they are identical. They are simply cherry-picked from the commits in the patch against trunk. &lt;br/&gt;
On the 3.x branches, minimal change was made to check the functions names during `prepare` of the statements, instead of in the `apply` method in the trunk patch. I&apos;d consider the commits are also identical to the original one. &lt;br/&gt;
cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;bereng&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17641110" author="bereng" created="Wed, 30 Nov 2022 07:21:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yifanc&quot; class=&quot;user-hover&quot; rel=&quot;yifanc&quot;&gt;yifanc&lt;/a&gt; 4.0 looks fishy I wouldn&apos;t expect so many failures at all. It&apos;s quite a stable branch and failures don&apos;t align at all with jenkins. Would it be ok to re-run or re-check all is ok? Also, why your circle runs don&apos;t show the &apos;pre-commit&apos; and &apos;separate&apos; group of tests the std circle files have? Otherwise I&apos;d have to checked no test has been missed.&lt;/p&gt;</comment>
                            <comment id="17641554" author="yifanc" created="Wed, 30 Nov 2022 20:54:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;bereng&lt;/a&gt;, sure thing! I re-run the tests for 4.0. The result looks much better. The prior errors were probably due to resources.&#160;&lt;/p&gt;

&lt;p&gt;The CircleCI config was modified a bit. It is the equivalent of &apos;pre-commit&apos;.&#160;&lt;/p&gt;</comment>
                            <comment id="17642440" author="bereng" created="Fri, 2 Dec 2022 10:43:54 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yifanc&quot; class=&quot;user-hover&quot; rel=&quot;yifanc&quot;&gt;yifanc&lt;/a&gt; The 4.0 CI run looks much better now. The compact storage failure is a known one. Also the PRs look ok.&lt;/p&gt;

&lt;p&gt;But checking your CI runs I see they are not equivalent to the &apos;pre-commit&apos; present in our circle files. You are missing all the j11 tests under the j8 section i.e. Could we stick to the provided circle file or are there any special needs you need to modify the file for? I am asking bc having to check the list of jobs matching the &apos;official&apos; circle file is an eye watering exercise.&lt;/p&gt;</comment>
                            <comment id="17642661" author="yifanc" created="Fri, 2 Dec 2022 19:05:12 +0000"  >&lt;p&gt;The circleCI config was modified for convenience and efficiency, e.g. no need to click to approve the workflows. Running j11 test with the j8 built artifacts is less concerning. However, I just restored the CI configs to the provided one in tree for all 4.x branches and triggered new runs.&#160;&lt;/p&gt;

&lt;p&gt;&amp;#8212; Update &amp;#8212;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;bereng&lt;/a&gt;, the results are mostly green.&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17643139" author="bereng" created="Mon, 5 Dec 2022 07:20:11 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yifanc&quot; class=&quot;user-hover&quot; rel=&quot;yifanc&quot;&gt;yifanc&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;thanks for resubmitting it. Iirc you only need one approval for the pre-commit workflow. It&apos;s mostly green but for a few in 4.1 and trunk which really sound like flakies to me. I would still open a ticket for the &lt;tt&gt;test_cleanup&lt;/tt&gt; one and any other one you might consider worth it. But otherwise LGTM +1.&lt;/p&gt;</comment>
                            <comment id="17643631" author="yifanc" created="Tue, 6 Dec 2022 03:02:20 +0000"  >&lt;p&gt;Committed in to cassandra-3.0 as &lt;a href=&quot;https://github.com/apache/cassandra/commit/473656c1d53edb998aa60d414221e397797de52b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;473656c1d53&lt;/a&gt; and merged up to trunk.&lt;/p&gt;</comment>
                            <comment id="17643950" author="yifanc" created="Tue, 6 Dec 2022 16:39:04 +0000"  >&lt;p&gt;Created a ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18098&quot; title=&quot;Test failure bootstrap_test.py::test_cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18098&quot;&gt;CASSANDRA-18098&lt;/a&gt; for `test_cleanup`&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yifanc]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12988" cascade-level="1"><![CDATA[API / Semantic Implementation]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z17yw8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bereng]]></customfieldvalue>
        <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333891">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/473656c1d53edb998aa60d414221e397797de52b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/473656c1d53edb998aa60d414221e397797de52b&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;unit test; ci&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>