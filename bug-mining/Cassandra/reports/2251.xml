<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:39:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5768] If a Seed can&apos;t be contacted, a new node comes up as a cluster of 1</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5768</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Setting up a new test cluster using  2.0.0-beta1 and I noticed the following behaviour with vnodes turned on.  &lt;/p&gt;

&lt;p&gt;I bring up one node all well and good.  however if I bring up a second node, that can&apos;t contact the first (the first being the seed for the second) after a short period of time, the second goes ahead and assumes it&apos;s the only node and bootstraps with all tokens.  &lt;/p&gt;

&lt;p&gt;NOTE also this email from Robert Coli &lt;br/&gt;
To: user@cassandra.apache.org&lt;br/&gt;
Obviously if you have defined a seed and cannot contact it, the node should not start as a cluster of one. I have a to-do list item to file a JIRA on the subject, but if you wanted to file and link us, that&apos;d be super. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;p&gt;Startup trace (from the can&apos;t contact the seed messages below).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://aep.appspot.com/display/ABcWltCES1srzPrj5CkS69-GB8o/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://aep.appspot.com/display/ABcWltCES1srzPrj5CkS69-GB8o/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12658249">CASSANDRA-5768</key>
            <summary>If a Seed can&apos;t be contacted, a new node comes up as a cluster of 1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="aecobley">Andy Cobley</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jul 2013 12:51:22 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:09 +0000</updated>
                            <resolved>Thu, 18 Jul 2013 21:18:53 +0000</resolved>
                                        <fixVersion>1.2.7</fixVersion>
                    <fixVersion>2.0 beta 2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13711295" author="brandon.williams" created="Wed, 17 Jul 2013 17:13:58 +0000"  >&lt;p&gt;It seems reasonable to me that we should ensure we&apos;ve contacted a seed during bootstrap when one has been set. Patch to check for this and refuse if it fails.&lt;/p&gt;</comment>
                            <comment id="13712030" author="jasobrown" created="Thu, 18 Jul 2013 05:33:32 +0000"  >&lt;p&gt;lgtm. One (incredibly minor) optimization in Gossiper.checkSeedContact() would be to check the boolean before checking the map for the seed ep, like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void checkSeedContact(InetAddress ep)
{
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!seedContacted &amp;amp;&amp;amp; seeds.contains(ep))
        seedContacted = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It could be that the effort of me writing this comment is greater than the grand sum of all processing time saved by this optimization, but what the hell &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;UPDATE: Thought about this some more, but what if you only have one seed in the cluster, and that node is starting up, I&apos;m not sure it will ever set the Gossiper.seedContacted to true as it&apos;s only in the GossipDigest*VerbHandlers where we call checkSeedContact(). Thus, the seed won&apos;t start up (unless I&apos;ve missed something).&lt;/p&gt;

&lt;p&gt;Perhaps in Gossiper.buildSeedsList() we can do this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void buildSeedsList()
{
    List&amp;lt;InetAddress&amp;gt; seeds = DatabaseDescriptor.getSeeds(); 
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (InetAddress seed : seeds)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (seed.equals(FBUtilities.getBroadcastAddress()) &amp;amp;&amp;amp; seeds.size == 1)
            seedContacted = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
            seeds.add(seed);
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(or something similar to this)&lt;/p&gt;

&lt;p&gt;This way if there&apos;s only one seed (and this node is it), it can still come up. Otherwise, if there are other seeds besides this one, maybe wait to set the seedContacted? (not sure about that, though).&lt;/p&gt;

</comment>
                            <comment id="13712031" author="jasobrown" created="Thu, 18 Jul 2013 05:35:51 +0000"  >&lt;p&gt;Also, is there any harm in adding this to 1.2? Seems rather innocuous, I think.&lt;/p&gt;</comment>
                            <comment id="13712133" author="aecobley" created="Thu, 18 Jul 2013 08:33:44 +0000"  >&lt;p&gt;I tried 5768.txt on cassandra-trunk.  It does halt cassandra if the seed can&apos;t be connected (with  java.lang.IllegalStateException: Unable to contact any seeds!)&lt;/p&gt;

&lt;p&gt;However it also halts with the same exception if seeds is set to 127.0.0.1 (the default in cassandra.yaml):&lt;/p&gt;

&lt;p&gt;seed_provider:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Addresses of hosts that are deemed contact points.&lt;/li&gt;
	&lt;li&gt;Cassandra nodes use this list of hosts to find each other and learn&lt;/li&gt;
	&lt;li&gt;the topology of the ring.  You must change this if you are running&lt;/li&gt;
	&lt;li&gt;multiple nodes!&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;class_name: org.apache.cassandra.locator.SimpleSeedProvider&lt;br/&gt;
      parameters:&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;seeds is actually a comma-delimited list of addresses.&lt;/li&gt;
	&lt;li&gt;Ex: &quot;&amp;lt;ip1&amp;gt;,&amp;lt;ip2&amp;gt;,&amp;lt;ip3&amp;gt;&quot;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;seeds: &quot;127.0.0.1&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So thats not correct I guess.&lt;/p&gt;</comment>
                            <comment id="13712146" author="aecobley" created="Thu, 18 Jul 2013 09:03:30 +0000"  >&lt;p&gt;Jason,&lt;/p&gt;

&lt;p&gt;You code for build list should read:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void buildSeedsList()
    {
        Set&amp;lt;InetAddress&amp;gt; seeds = DatabaseDescriptor.getSeeds();
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (InetAddress seed : seeds)
            {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (seed.equals(FBUtilities.getBroadcastAddress()) &amp;amp;&amp;amp; seeds.size() == 1)
                    seedContacted = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                    seeds.add(seed);
            }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Sadly that throws an exception at startup:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
ERROR 09:58:35,896 Exception encountered during startup
java.lang.UnsupportedOperationException
	at com.google.common.collect.ImmutableCollection.add(ImmutableCollection.java:92)
	at org.apache.cassandra.gms.Gossiper.buildSeedsList(Gossiper.java:1072)
	at org.apache.cassandra.gms.Gossiper.start(Gossiper.java:1046)
	at org.apache.cassandra.service.StorageService.joinTokenRing(StorageService.java:555)
	at org.apache.cassandra.service.StorageService.initServer(StorageService.java:527)
	at org.apache.cassandra.service.StorageService.initServer(StorageService.java:426)
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:354)
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:453)
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:496)
java.lang.UnsupportedOperationException
	at com.google.common.collect.ImmutableCollection.add(ImmutableCollection.java:92)
	at org.apache.cassandra.gms.Gossiper.buildSeedsList(Gossiper.java:1072)
	at org.apache.cassandra.gms.Gossiper.start(Gossiper.java:1046)
	at org.apache.cassandra.service.StorageService.joinTokenRing(StorageService.java:555)
	at org.apache.cassandra.service.StorageService.initServer(StorageService.java:527)
	at org.apache.cassandra.service.StorageService.initServer(StorageService.java:426)
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:354)
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:453)
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:496)
Exception encountered during startup: null
ERROR 09:58:35,933 Exception in thread Thread[StorageServiceShutdownHook,5,main]
java.lang.NullPointerException
	at org.apache.cassandra.service.StorageService.stopRPCServer(StorageService.java:310)
	at org.apache.cassandra.service.StorageService.shutdownClientServers(StorageService.java:359)
	at org.apache.cassandra.service.StorageService.access$000(StorageService.java:95)
	at org.apache.cassandra.service.StorageService$1.runMayThrow(StorageService.java:492)
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)
	at java.lang.Thread.run(Thread.java:724)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13712183" author="aecobley" created="Thu, 18 Jul 2013 09:53:02 +0000"  >&lt;p&gt;Jason,&lt;/p&gt;

&lt;p&gt;this code seems to work:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void buildSeedsList()
    {
	Set&amp;lt;InetAddress&amp;gt; tempseeds = DatabaseDescriptor.getSeeds();
       
	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (InetAddress seed : tempseeds)
	    {
		
		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (seed.equals(FBUtilities.getBroadcastAddress()) &amp;amp;&amp;amp; seeds.size() == 1){

		    seedContacted = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
		}&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;{
		    seeds.add(seed);
		}
	    }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This boots if localhost ip = seed ip&lt;br/&gt;
It throws an exception if localhost ip != seed ip and seed ip can not be contacted&lt;/p&gt;

&lt;p&gt;However if seed ip is the default 127.0.0.1 the code will throw a &quot;java.lang.IllegalStateException: Unable to contact any seeds!&quot; exception. I&apos;m not sure thats correct&lt;/p&gt;</comment>
                            <comment id="13712446" author="brandon.williams" created="Thu, 18 Jul 2013 16:23:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;This way if there&apos;s only one seed (and this node is it), it can still come up.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;A seed node can&apos;t bootstrap as it is, so this shouldn&apos;t be a problem.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also, is there any harm in adding this to 1.2? Seems rather innocuous, I think.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;When I started I thought it was going to be a bit riskier, but now that it&apos;s done I think 1.2 is fine.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aecobley&quot; class=&quot;user-hover&quot; rel=&quot;aecobley&quot;&gt;aecobley&lt;/a&gt; bq. However it also halts with the same exception if seeds is set to 127.0.0.1&lt;/p&gt;

&lt;p&gt;I can&apos;t reproduce this, and it doesn&apos;t make any sense to me (since seeds don&apos;t bootstrap)&lt;/p&gt;</comment>
                            <comment id="13712614" author="aecobley" created="Thu, 18 Jul 2013 18:32:19 +0000"  >&lt;p&gt;Yaml file at 127.0.0.1&lt;/p&gt;</comment>
                            <comment id="13712619" author="aecobley" created="Thu, 18 Jul 2013 18:34:30 +0000"  >&lt;p&gt;Brandon,&lt;br/&gt;
For info:&lt;/p&gt;

&lt;p&gt;With the code from 5678.txt, the code above and the attached yaml file and no other nodes in the cluster I&apos;m getting the following trace:&lt;/p&gt;


&lt;p&gt;sudo ./cassandra&lt;br/&gt;
xss =  -ea -javaagent:./../lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms1024M -Xmx1024M -Xmn256M -XX:+HeapDumpOnOutOfMemoryError&lt;br/&gt;
LifeintheAirAge:bin Administrator$ objc&lt;span class=&quot;error&quot;&gt;&amp;#91;2779&amp;#93;&lt;/span&gt;: Class JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.8.0.jdk/Contents/Home/bin/java and /Library/Java/JavaVirtualMachines/jdk1.8.0.jdk/Contents/Home/jre/lib/libinstrument.dylib. One of the two will be used. Which one is undefined.&lt;br/&gt;
 INFO 10:50:38,698 Logging initialized&lt;br/&gt;
 INFO 10:50:38,719 JVM vendor/version: Java HotSpot(TM) 64-Bit Server VM/1.8.0-ea&lt;br/&gt;
 INFO 10:50:38,719 Heap size: 1046937600/1046937600&lt;br/&gt;
 INFO 10:50:38,720 Classpath: ./../conf:./../build/classes/main:./../build/classes/thrift:./../lib/antlr-3.2.jar:./../lib/commons-cli-1.1.jar:./../lib/commons-codec-1.2.jar:./../lib/commons-lang-2.6.jar:./../lib/compress-lzf-0.8.4.jar:./../lib/concurrentlinkedhashmap-lru-1.3.jar:./../lib/disruptor-3.0.1.jar:./../lib/guava-13.0.1.jar:./../lib/high-scale-lib-1.1.2.jar:./../lib/jackson-core-asl-1.9.2.jar:./../lib/jackson-mapper-asl-1.9.2.jar:./../lib/jamm-0.2.5.jar:./../lib/jbcrypt-0.3m.jar:./../lib/jline-1.0.jar:./../lib/json-simple-1.1.jar:./../lib/libthrift-0.9.0.jar:./../lib/log4j-1.2.16.jar:./../lib/lz4-1.1.0.jar:./../lib/metrics-core-2.0.3.jar:./../lib/netty-3.5.9.Final.jar:./../lib/servlet-api-2.5-20081211.jar:./../lib/slf4j-api-1.7.2.jar:./../lib/slf4j-log4j12-1.7.2.jar:./../lib/snakeyaml-1.11.jar:./../lib/snappy-java-1.0.5.jar:./../lib/snaptree-0.1.jar:./../lib/thrift-server-0.2.jar:./../lib/jamm-0.2.5.jar&lt;br/&gt;
 INFO 10:50:38,721 JNA not found. Native methods will be disabled.&lt;br/&gt;
 INFO 10:50:38,739 Loading settings from &lt;a href=&quot;file:/Users/Administrator/Documents/raspberry/cassandra2/test/cassandra-trunk/conf/cassandra.yaml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/Users/Administrator/Documents/raspberry/cassandra2/test/cassandra-trunk/conf/cassandra.yaml&lt;/a&gt;&lt;br/&gt;
 INFO 10:50:39,159 Data files directories: &lt;span class=&quot;error&quot;&gt;&amp;#91;/var/lib/cassandra/data&amp;#93;&lt;/span&gt;&lt;br/&gt;
 INFO 10:50:39,159 Commit log directory: /var/lib/cassandra/commitlog&lt;br/&gt;
 INFO 10:50:39,160 DiskAccessMode &apos;auto&apos; determined to be mmap, indexAccessMode is mmap&lt;br/&gt;
 INFO 10:50:39,160 disk_failure_policy is stop&lt;br/&gt;
 INFO 10:50:39,165 Global memtable threshold is enabled at 332MB&lt;br/&gt;
 INFO 10:50:39,298 Not using multi-threaded compaction&lt;br/&gt;
 INFO 10:50:39,547 Initializing key cache with capacity of 49 MBs.&lt;br/&gt;
 INFO 10:50:39,560 Scheduling key cache save to each 14400 seconds (going to save all keys).&lt;br/&gt;
 INFO 10:50:39,562 Initializing row cache with capacity of 0 MBs&lt;br/&gt;
 INFO 10:50:39,570 Scheduling row cache save to each 0 seconds (going to save all keys).&lt;br/&gt;
 INFO 10:50:39,977 Couldn&apos;t detect any schema definitions in local storage.&lt;br/&gt;
 INFO 10:50:39,977 To create keyspaces and column families, see &apos;help create keyspace&apos; in cqlsh.&lt;br/&gt;
 INFO 10:50:40,064 Enqueuing flush of Memtable-local@1164440413(149/149 serialized/live bytes, 6 ops)&lt;br/&gt;
 INFO 10:50:40,066 Writing Memtable-local@1164440413(149/149 serialized/live bytes, 6 ops)&lt;br/&gt;
 INFO 10:50:40,109 Completed flushing /var/lib/cassandra/data/system/local/system-local-ja-1-Data.db (178 bytes) for commitlog position ReplayPosition(segmentId=1374141039946, position=417)&lt;br/&gt;
 INFO 10:50:40,129 No commitlog files found; skipping replay&lt;br/&gt;
 INFO 10:50:40,466 Cassandra version: 2.0.0-beta1-SNAPSHOT&lt;br/&gt;
 INFO 10:50:40,467 Thrift API version: 19.37.0&lt;br/&gt;
 INFO 10:50:40,473 CQL supported versions: 2.0.0,3.1.0 (default: 3.1.0)&lt;br/&gt;
 INFO 10:50:40,509 Loading persisted ring state&lt;br/&gt;
 INFO 10:50:40,512 Starting up server gossip&lt;br/&gt;
 WARN 10:50:40,534 No host ID found, created 8e0fac5a-b8c6-4a6b-b476-de794fb4b85c (Note: This should happen exactly once per node).&lt;br/&gt;
 INFO 10:50:40,539 Enqueuing flush of Memtable-local@366873404(300/300 serialized/live bytes, 11 ops)&lt;br/&gt;
 INFO 10:50:40,540 Writing Memtable-local@366873404(300/300 serialized/live bytes, 11 ops)&lt;br/&gt;
 INFO 10:50:40,552 Completed flushing /var/lib/cassandra/data/system/local/system-local-ja-2-Data.db (293 bytes) for commitlog position ReplayPosition(segmentId=1374141039946, position=81742)&lt;br/&gt;
Broadcast: /134.36.9.8&lt;br/&gt;
Size of seeds0&lt;br/&gt;
Seed : 127.0.0.1&lt;br/&gt;
 INFO 10:50:40,605 Starting Messaging Service on port 7000&lt;br/&gt;
 INFO 10:50:40,647 Enqueuing flush of Memtable-local@210156003(86/86 serialized/live bytes, 4 ops)&lt;br/&gt;
 INFO 10:50:40,647 Writing Memtable-local@210156003(86/86 serialized/live bytes, 4 ops)&lt;br/&gt;
 INFO 10:50:40,657 Completed flushing /var/lib/cassandra/data/system/local/system-local-ja-3-Data.db (118 bytes) for commitlog position ReplayPosition(segmentId=1374141039946, position=82003)&lt;br/&gt;
 INFO 10:50:40,659 JOINING: waiting for ring information&lt;br/&gt;
 INFO 10:50:41,582 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:50:46,585 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:50:46,585 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:50:51,586 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:50:51,587 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:50:56,589 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:50:56,590 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:01,591 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:01,593 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:06,594 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:06,595 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:10,713 JOINING: schema complete, ready to bootstrap&lt;br/&gt;
 INFO 10:51:10,716 JOINING: getting bootstrap token&lt;br/&gt;
 INFO 10:51:10,766 Enqueuing flush of Memtable-local@1819776360(10114/10114 serialized/live bytes, 257 ops)&lt;br/&gt;
 INFO 10:51:10,767 Writing Memtable-local@1819776360(10114/10114 serialized/live bytes, 257 ops)&lt;br/&gt;
 INFO 10:51:10,797 Completed flushing /var/lib/cassandra/data/system/local/system-local-ja-4-Data.db (5290 bytes) for commitlog position ReplayPosition(segmentId=1374141039946, position=94018)&lt;br/&gt;
 INFO 10:51:10,813 Compacting &lt;span class=&quot;error&quot;&gt;&amp;#91;SSTableReader(path=&amp;#39;/var/lib/cassandra/data/system/local/system-local-ja-2-Data.db&amp;#39;), SSTableReader(path=&amp;#39;/var/lib/cassandra/data/system/local/system-local-ja-1-Data.db&amp;#39;), SSTableReader(path=&amp;#39;/var/lib/cassandra/data/system/local/system-local-ja-3-Data.db&amp;#39;), SSTableReader(path=&amp;#39;/var/lib/cassandra/data/system/local/system-local-ja-4-Data.db&amp;#39;)&amp;#93;&lt;/span&gt;&lt;br/&gt;
 INFO 10:51:10,814 JOINING: sleeping 30000 ms for pending range setup&lt;br/&gt;
 INFO 10:51:10,864 Compacted 4 sstables to &lt;span class=&quot;error&quot;&gt;&amp;#91;/var/lib/cassandra/data/system/local/system-local-ja-5,&amp;#93;&lt;/span&gt;.  5,879 bytes to 5,718 (~97% of original) in 46ms = 0.118546MB/s.  4 total rows, 1 unique.  Row merge counts were &lt;/p&gt;
{1:0, 2:0, 3:0, 4:1, }
&lt;p&gt; INFO 10:51:11,597 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:11,598 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:16,598 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:16,599 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:21,600 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:21,601 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:26,602 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:26,604 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:31,605 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:31,606 Handshaking version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:36,607 Cannot handshake version with /127.0.0.1&lt;br/&gt;
 INFO 10:51:36,609 Handshaking version with /127.0.0.1&lt;br/&gt;
ERROR 10:51:40,816 Exception encountered during startup&lt;br/&gt;
java.lang.IllegalStateException: Unable to contact any seeds!&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.bootstrap(StorageService.java:897)&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.joinTokenRing(StorageService.java:668)&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.initServer(StorageService.java:527)&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.initServer(StorageService.java:426)&lt;br/&gt;
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:354)&lt;br/&gt;
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:453)&lt;br/&gt;
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:496)&lt;br/&gt;
java.lang.IllegalStateException: Unable to contact any seeds!&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.bootstrap(StorageService.java:897)&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.joinTokenRing(StorageService.java:668)&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.initServer(StorageService.java:527)&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.initServer(StorageService.java:426)&lt;br/&gt;
	at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:354)&lt;br/&gt;
	at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:453)&lt;br/&gt;
	at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:496)&lt;br/&gt;
Exception encountered during startup: Unable to contact any seeds!&lt;br/&gt;
ERROR 10:51:40,822 Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;StorageServiceShutdownHook,5,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.stopRPCServer(StorageService.java:310)&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.shutdownClientServers(StorageService.java:359)&lt;br/&gt;
	at org.apache.cassandra.service.StorageService.access$000(StorageService.java:95)&lt;br/&gt;
	at org.apache.cassandra.service.StorageService$1.runMayThrow(StorageService.java:492)&lt;br/&gt;
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:724)&lt;/p&gt;</comment>
                            <comment id="13712624" author="brandon.williams" created="Thu, 18 Jul 2013 18:35:40 +0000"  >&lt;p&gt;Your seed is 127.0.0.1, but your listen_address is something else.  So the behavior is actually correct, since it can&apos;t contact 127.0.0.1 since you&apos;re not listening there.&lt;/p&gt;</comment>
                            <comment id="13712636" author="aecobley" created="Thu, 18 Jul 2013 18:41:57 +0000"  >&lt;p&gt;Brandon,  you&apos;re right of course !  Apologies&lt;/p&gt;</comment>
                            <comment id="13712857" author="jasobrown" created="Thu, 18 Jul 2013 21:08:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;A seed node can&apos;t bootstrap as it is, so this shouldn&apos;t be a problem&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ahh, crap, forgot about that. Then on the whole, the original patch lgtm. You might want to consider setting seedContacted to true in buildSeedsList() to optimize the lookup in checkSeedContact(), but that&apos;s a minor optimization and shouldn&apos;t stop us from moving forward on this.&lt;/p&gt;</comment>
                            <comment id="13712868" author="brandon.williams" created="Thu, 18 Jul 2013 21:18:53 +0000"  >&lt;p&gt;Committed with the !seedContacted check, but skipped the buildSeedsList() optimization since I couldn&apos;t figure out how if we&apos;re a seed we&apos;d bootstrap (and if we do, as you say, it should be minor.)&lt;/p&gt;</comment>
                            <comment id="13718931" author="rcoli" created="Wed, 24 Jul 2013 22:21:40 +0000"  >&lt;p&gt;This comment is not particularly substantive, I just want to express my enthusiasm for this behavior being fixed. YAY! This formerly very confusing-to-noobs behavior will now be much less potentially confusing. Thanks to the reporter and to the contributors of the patch! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12592799" name="5768.txt" size="3798" author="brandon.williams" created="Wed, 17 Jul 2013 17:13:58 +0000"/>
                            <attachment id="12593026" name="cassandra.yaml" size="30187" author="aecobley" created="Thu, 18 Jul 2013 18:32:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mdif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338763</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jasobrown</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jasobrown]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>