<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:51:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8535] java.lang.RuntimeException: Failed to rename XXX to YYY</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8535</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.RuntimeException: Failed to rename build\test\cassandra\data;0\system\schema_keyspaces-b0f2235744583cdb9631c43e59ce3676\system-schema_keyspaces-tmp-ka-5-Index.db to build\test\cassandra\data;0\system\schema_keyspaces-b0f2235744583cdb9631c43e59ce3676\system-schema_keyspaces-ka-5-Index.db
	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:170) ~[main/:na]
	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:154) ~[main/:na]
	at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.java:569) ~[main/:na]
	at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.java:561) ~[main/:na]
	at org.apache.cassandra.io.sstable.SSTableWriter.close(SSTableWriter.java:535) ~[main/:na]
	at org.apache.cassandra.io.sstable.SSTableWriter.finish(SSTableWriter.java:470) ~[main/:na]
	at org.apache.cassandra.io.sstable.SSTableRewriter.finishAndMaybeThrow(SSTableRewriter.java:349) ~[main/:na]
	at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewriter.java:324) ~[main/:na]
	at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewriter.java:304) ~[main/:na]
	at org.apache.cassandra.db.compaction.CompactionTask.runMayThrow(CompactionTask.java:200) ~[main/:na]
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28) ~[main/:na]
	at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:75) ~[main/:na]
	at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(AbstractCompactionTask.java:59) ~[main/:na]
	at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompactionTask.run(CompactionManager.java:226) ~[main/:na]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) ~[na:1.7.0_45]
	at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[na:1.7.0_45]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) ~[na:1.7.0_45]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_45]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744) [na:1.7.0_45]
Caused by: java.nio.file.FileSystemException: build\test\cassandra\data;0\system\schema_keyspaces-b0f2235744583cdb9631c43e59ce3676\system-schema_keyspaces-tmp-ka-5-Index.db -&amp;gt; build\test\cassandra\data;0\system\schema_keyspaces-b0f2235744583cdb9631c43e59ce3676\system-schema_keyspaces-ka-5-Index.db: The process cannot access the file because it is being used by another process.

	at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:86) ~[na:1.7.0_45]
	at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97) ~[na:1.7.0_45]
	at sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:301) ~[na:1.7.0_45]
	at sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.java:287) ~[na:1.7.0_45]
	at java.nio.file.Files.move(Files.java:1345) ~[na:1.7.0_45]
	at org.apache.cassandra.io.util.FileUtils.atomicMoveWithFallback(FileUtils.java:184) ~[main/:na]
	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:166) ~[main/:na]
	... 18 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows 2008 X64&lt;/p&gt;</environment>
        <key id="12763538">CASSANDRA-8535</key>
            <summary>java.lang.RuntimeException: Failed to rename XXX to YYY</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmckenzie">Josh McKenzie</assignee>
                                    <reporter username="shalupov">Leonid Shalupov</reporter>
                        <labels>
                            <label>Windows</label>
                    </labels>
                <created>Tue, 23 Dec 2014 20:04:28 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:07 +0000</updated>
                            <resolved>Fri, 13 Mar 2015 18:08:33 +0000</resolved>
                                        <fixVersion>2.1.5</fixVersion>
                                    <component>Legacy/Local Write-Read Paths</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="14257449" author="shalupov" created="Tue, 23 Dec 2014 20:11:27 +0000"  >&lt;p&gt;Background: after experiencing various issues like &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8019&quot; title=&quot;Windows Unit tests and Dtests erroring due to sstable deleting task error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8019&quot;&gt;&lt;del&gt;CASSANDRA-8019&lt;/del&gt;&lt;/a&gt; on 2.1.1 we decided to try latest cassandra-2.1 branch.&lt;/p&gt;

&lt;p&gt;It failed with exception I quoted in description.&lt;/p&gt;

&lt;p&gt;This time I&apos;ve set up continuous integration for Cassandra on our server: &lt;a href=&quot;https://teamcity.jetbrains.com/project.html?projectId=ApacheCassandra&amp;amp;guest=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://teamcity.jetbrains.com/project.html?projectId=ApacheCassandra&amp;amp;guest=1&lt;/a&gt; to reproduce it&lt;br/&gt;
(feel free to use it, just write me)&lt;/p&gt;

&lt;p&gt;I run &quot;ant test-all&quot; there and nothing more.&lt;/p&gt;

&lt;p&gt;And build failed with this exception: &lt;a href=&quot;https://teamcity.jetbrains.com/viewLog.html?tab=buildLog&amp;amp;buildTypeId=ApacheCassandra_TestsWindows&amp;amp;buildId=365436&amp;amp;guest=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://teamcity.jetbrains.com/viewLog.html?tab=buildLog&amp;amp;buildTypeId=ApacheCassandra_TestsWindows&amp;amp;buildId=365436&amp;amp;guest=1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14257453" author="iamaleksey" created="Tue, 23 Dec 2014 20:12:11 +0000"  >&lt;p&gt;Could you at least mention the name of the failed test?&lt;/p&gt;

&lt;p&gt;Otherwise there really isn&apos;t much we can do about it.&lt;/p&gt;</comment>
                            <comment id="14257469" author="shalupov" created="Tue, 23 Dec 2014 20:25:45 +0000"  >&lt;p&gt;It failed with org.apache.cassandra.cache.AutoSavingCacheTest testSerializeAndLoadKeyCache test first, then org.apache.cassandra.config.DefsTest dropKS and followed by many others.&lt;/p&gt;

&lt;p&gt;Please read the log, it&apos;s filled with them: &lt;a href=&quot;https://teamcity.jetbrains.com/downloadBuildLog.html?buildId=365436&amp;amp;guest=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://teamcity.jetbrains.com/downloadBuildLog.html?buildId=365436&amp;amp;guest=1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14261297" author="jmckenzie" created="Tue, 30 Dec 2014 17:47:02 +0000"  >&lt;p&gt;There are a large number of tests that will currently error out on the 2.1 branch due to the RandomAccessReader (see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4050&quot; title=&quot;Rewrite RandomAccessReader to use FileChannel / nio to address Windows file access violations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4050&quot;&gt;&lt;del&gt;CASSANDRA-4050&lt;/del&gt;&lt;/a&gt;).  Are you having problems running a Cassandra cluster or is this ticket about failing unit tests on the 2.1 branch?&lt;/p&gt;

&lt;p&gt;Regardless, we&apos;re still sorting out some issues with the CompactionTask that show up on Windows only right now due to file system sharing violations (see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8399&quot; title=&quot;Reference Counter exception when dropping user type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8399&quot;&gt;&lt;del&gt;CASSANDRA-8399&lt;/del&gt;&lt;/a&gt;).  If you run with the v2 from that ticket (which is not the Correct solution, mind you, but should alleviate the current symptoms) it should address most of these &quot;Unable to delete&quot; and/or rename issues with unit tests.&lt;/p&gt;

&lt;p&gt;Let me know if you still reproduce this error w/v2 from that ticket - my guess is that this is a duplicate but I&apos;d prefer confirmation before closing out.&lt;/p&gt;</comment>
                            <comment id="14264791" author="shalupov" created="Mon, 5 Jan 2015 17:23:12 +0000"  >&lt;p&gt;This ticket is about both of them, I see the issue easily reproduced in production and in tests.&lt;br/&gt;
It&apos;s far easier to reproduce the issue in tests, so I published the stack trace from there.&lt;/p&gt;

&lt;p&gt;I&apos;ve applied &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12689356/8399_v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12689356/8399_v2.txt&lt;/a&gt;, tests are still failing (right from the start, I do not need to wait).&lt;/p&gt;

&lt;p&gt;What else can I do? It would be nice to get it fixed in 2.1 (not 3.0)&lt;/p&gt;</comment>
                            <comment id="14269712" author="jmckenzie" created="Thu, 8 Jan 2015 17:30:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalupov&quot; class=&quot;user-hover&quot; rel=&quot;shalupov&quot;&gt;shalupov&lt;/a&gt; Is this occurring on the same systems as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8544&quot; title=&quot;Cassandra could not start with NPE in ColumnFamilyStore.removeUnfinishedCompactionLeftovers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8544&quot;&gt;&lt;del&gt;CASSANDRA-8544&lt;/del&gt;&lt;/a&gt;?  If so, do you still see &quot;failed to rename&quot; errors while running a cluster after disabling A/V and Windows Search or adding exclusions for Cassandra in those services?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8551&quot; title=&quot;Windows - Failure to rename file during compaction - unit test only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8551&quot;&gt;&lt;del&gt;CASSANDRA-8551&lt;/del&gt;&lt;/a&gt; was created shortly after this ticket, specifically dealing with a renaming issue in compaction on Windows on the 2.1 branch during unit-tests.  If your problem proves to be test-only after addressing A/V and search, I&apos;d prefer to close this as duplicate so as not to cloud the issue as 8551 is more limited in scope.&lt;/p&gt;</comment>
                            <comment id="14273734" author="shalupov" created="Mon, 12 Jan 2015 16:21:46 +0000"  >&lt;p&gt;Nope, it&apos;s not about 8544. 8544 is on our current production, 2.1.1.&lt;br/&gt;
This bug is in 2.1-branch, after 2.1.1.&lt;/p&gt;

&lt;p&gt;I&apos;ve seen it in production, so it&apos;s not test-only. I&apos;ll try to reproduce it and report.&lt;/p&gt;</comment>
                            <comment id="14277358" author="jmckenzie" created="Wed, 14 Jan 2015 18:15:13 +0000"  >&lt;p&gt;Looks like the problem is in the logic for SSTableRewriter on Windows.  During finishAndMaybeThrow, we switchWriter(...) which closes our SSTableWriter (ifile and dfile) and opens a reader to the file.  Shortly after, we attempt to close the SSTableWriter again, this time with the finishType to attempt a rename.  Problem is, we now have an SSTR with that ifile and dfile open on tmpfiles so the rename fails.&lt;/p&gt;

&lt;p&gt;This doesn&apos;t happen on trunk as we&apos;re using FileChannels and nio in RandomAccessReader instead of RandomAccessFile, meaning we can safely rename files with open handles.  I&apos;ll see if I can&apos;t get a Windows-specific workaround for SSTableRewriter in for this ticket for 2.1; isolating the fix to windows means I&apos;m comfortable with it being on the 2.1 branch and we&apos;ll need it on 3.0 for mmap support anyway.&lt;/p&gt;</comment>
                            <comment id="14278643" author="maximp" created="Thu, 15 Jan 2015 12:56:06 +0000"  >&lt;p&gt;Joshua,&lt;/p&gt;

&lt;p&gt;Just in case: I&apos;ve managed to reproduce this exception in Windows 7 with the latest cassandra shapshot build.&lt;br/&gt;
No A/V in the system, windows search does not index cassandra directory.&lt;br/&gt;
I can try the fix as soon as it is ready.&lt;/p&gt;</comment>
                            <comment id="14284268" author="jmckenzie" created="Tue, 20 Jan 2015 19:28:29 +0000"  >&lt;p&gt;Attaching a patch as a follow up to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7365&quot; title=&quot;some compactions do not works under windows (file in use during rename)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7365&quot;&gt;&lt;del&gt;CASSANDRA-7365&lt;/del&gt;&lt;/a&gt; to fully skip &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6916&quot; title=&quot;Preemptive opening of compaction result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6916&quot;&gt;&lt;del&gt;CASSANDRA-6916&lt;/del&gt;&lt;/a&gt; on Windows for the 2.1 branch.  The problem is as I mentioned above - we open a reader during &lt;tt&gt;switchWriter&lt;/tt&gt; then attempt to rename the files that are open during &lt;tt&gt;finishAndMaybeThrow&lt;/tt&gt;.  Attached patch adds some logic to switchWriter that&apos;s Windows specific as well as a &lt;tt&gt;finishAndMaybeThrowWindows&lt;/tt&gt;.  Running unit tests w/this change, I still see a few renameWithConfirm errors but they&apos;re constrained to the rename operation attempted in &lt;tt&gt;loadNewSSTables&lt;/tt&gt; and I&apos;ll tackle that separately.&lt;/p&gt;

&lt;p&gt;We&apos;ll need these code-paths to work with mmap&apos;ed I/O on Windows even on 3.0 so it makes sense to put them in now, and it&apos;s a Windows-only path so risk is low enough that I&apos;d like to get it into the 2.1 branch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalupov&quot; class=&quot;user-hover&quot; rel=&quot;shalupov&quot;&gt;shalupov&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maximp&quot; class=&quot;user-hover&quot; rel=&quot;maximp&quot;&gt;maximp&lt;/a&gt; - If either (or both!) of you could try out the attached patch it&apos;d be a big help.  Thanks for the assistance with this.&lt;/p&gt;</comment>
                            <comment id="14291760" author="maximp" created="Mon, 26 Jan 2015 12:13:10 +0000"  >&lt;p&gt;Hi Joshua,&lt;/p&gt;

&lt;p&gt;Yes, it looks better now. Before that I got the &lt;tt&gt;FileSystemException&lt;/tt&gt; very quickly, now I don&apos;t see it, at least after right from the start. I will keep running to check it in long term.&lt;br/&gt;
There is a new one, that you might be interested in, since &lt;tt&gt;SSTableRewriter&lt;/tt&gt; was patched:&lt;br/&gt;
2015-01-15T16:23:47,760 &lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:6&amp;#93;&lt;/span&gt; ERROR o.a.c.service.CassandraDaemon - Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:6,1,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.AssertionError: null&lt;br/&gt;
	at org.apache.cassandra.io.sstable.IndexSummaryBuilder.build(IndexSummaryBuilder.java:133) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.io.sstable.IndexSummaryBuilder.build(IndexSummaryBuilder.java:128) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.io.sstable.SSTableWriter.finish(SSTableWriter.java:476) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.io.sstable.SSTableWriter.closeAndOpenReader(SSTableWriter.java:459) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.io.sstable.SSTableRewriter.finishAndMaybeThrowWindows(SSTableRewriter.java:394) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.io.sstable.SSTableRewriter.finishAndMaybeThrow(SSTableRewriter.java:353) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewriter.java:341) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.io.sstable.SSTableRewriter.finish(SSTableRewriter.java:321) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionTask.runMayThrow(CompactionTask.java:213) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:76) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(AbstractCompactionTask.java:59) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompactionTask.run(CompactionManager.java:227) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_25&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_25&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_25&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_25&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_25&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Also I see {{DecoderException}}s, which I previously assumed to be caused by other errors, like one in this issue. Now it looks like a separate issue:&lt;/p&gt;

&lt;p&gt;2015-01-15T16:03:25,613 &lt;span class=&quot;error&quot;&gt;&amp;#91;SharedPool-Worker-3&amp;#93;&lt;/span&gt; ERROR o.apache.cassandra.transport.Message - Unexpected exception during request; channel = &lt;span class=&quot;error&quot;&gt;&amp;#91;id: 0x9a614ce6, /127.0.0.1:51881 =&amp;gt; /127.0.0.1:10030&amp;#93;&lt;/span&gt;&lt;br/&gt;
io.netty.handler.codec.DecoderException: org.apache.cassandra.transport.ProtocolException: Invalid or unsupported protocol version: 71&lt;br/&gt;
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:280) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:149) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:333) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:319) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:787) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:130) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:511) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:468) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:382) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:354) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:137) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_25&amp;#93;&lt;/span&gt;&lt;br/&gt;
Caused by: org.apache.cassandra.transport.ProtocolException: Invalid or unsupported protocol version: 71&lt;br/&gt;
	at org.apache.cassandra.transport.Frame$Decoder.decode(Frame.java:184) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.1.jar:2.1.2-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:249) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;netty-all-4.0.23.Final.jar:4.0.23.Final&amp;#93;&lt;/span&gt;&lt;br/&gt;
	... 12 common frames omitted&lt;/p&gt;

&lt;p&gt;Should I file a new issue for that? Or may be it can be resolved quickly? Thanks!&lt;/p&gt;</comment>
                            <comment id="14292168" author="jmckenzie" created="Mon, 26 Jan 2015 18:09:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maximp&quot; class=&quot;user-hover&quot; rel=&quot;maximp&quot;&gt;maximp&lt;/a&gt; Separate tickets, but before you do that - have you run a &lt;a href=&quot;http://www.datastax.com/documentation/cassandra/2.0/cassandra/tools/toolsScrub.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;nodetool scrub&lt;/a&gt; against the offending keyspace?  the Index summary build failure is an assertion that it doesn&apos;t have any keys to write.  We could (probably should) move that assertion to earlier when the List is created to better indicate the failed path than during the build() call - please create a separate ticket for that stack and try out the scrub and report back on there.&lt;/p&gt;

&lt;p&gt;As for your 2nd exception, looks like you have mismatched C* nodes trying to speak to one another.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Frame exception&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (version &amp;gt; Server.CURRENT_VERSION)
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ProtocolException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Invalid or unsupported protocol version: &quot;&lt;/span&gt; + version);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14293933" author="jmckenzie" created="Tue, 27 Jan 2015 18:34:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt;: Either of you care to take review on this?  It should be pretty trivial.&lt;/p&gt;

&lt;p&gt;I expect this code to morph into a check for platform + mmap&apos;ed indexAccessMode for 3.1 when re-instating memory mapped I/O on Windows so the logic isn&apos;t throwaway thankfully.&lt;/p&gt;</comment>
                            <comment id="14293985" author="maximp" created="Tue, 27 Jan 2015 19:06:45 +0000"  >&lt;p&gt;Joshua, no, I haven&apos;t run a scrub. There were several more exceptions, like that one. Let&apos;s discuss in a separate issue.&lt;br/&gt;
But I did not see &lt;tt&gt;FileSystemException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I think the second exception is not relevant now, I have an idea, what might have caused it. Seems it is not Cassandra fault.&lt;/p&gt;</comment>
                            <comment id="14305506" author="blerer" created="Wed, 4 Feb 2015 17:00:30 +0000"  >&lt;p&gt;This issue is preventing me to run the DTests on my windows machine. &lt;br/&gt;
It will be nice if somebody was willing to review the patch.&lt;/p&gt;</comment>
                            <comment id="14305589" author="krummas" created="Wed, 4 Feb 2015 17:43:29 +0000"  >&lt;p&gt;oops, missed this one, I&apos;ll review it tomorrow &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14305698" author="jmckenzie" created="Wed, 4 Feb 2015 18:40:01 +0000"  >&lt;p&gt;No worries - wasn&apos;t really pressing before as we&apos;re beta on Windows on 2.1.&lt;/p&gt;</comment>
                            <comment id="14305702" author="philipthompson" created="Wed, 4 Feb 2015 18:41:18 +0000"  >&lt;p&gt;Is this a regression from 2.1.2? Beta or not that is not very desirable.&lt;/p&gt;</comment>
                            <comment id="14305725" author="JoshuaMcKenzie" created="Wed, 4 Feb 2015 18:54:54 +0000"  >&lt;p&gt;Not pressing is not the same as desirable.  We have our hands full with a variety of other early re-open related efforts right now that impact all systems that trumped this ticket.&lt;/p&gt;

&lt;p&gt;I haven&apos;t dug into when this started showing up though I don&apos;t recall seeing it in earlier 2.1 iterations.  There&apos;s been quite a bit of change in the code surrounding this area since 2.1 release so it&apos;s distinctly possible it&apos;s a regression.&lt;/p&gt;</comment>
                            <comment id="14308741" author="krummas" created="Fri, 6 Feb 2015 07:13:44 +0000"  >&lt;p&gt;It looks to me like this would break leveled compaction (we use switchWriter to create a new sstable when we have written sstable_size_in_mb into an sstable)&lt;/p&gt;</comment>
                            <comment id="14309812" author="jmckenzie" created="Fri, 6 Feb 2015 20:18:28 +0000"  >&lt;p&gt;v2 attached.  New patch closes out writers with FinishType.NORMAL in switchWriter and stores the resultant reader.  We then use that list of readers in finishAndMaybeThrow rather than finalizing and building a list at that time.&lt;/p&gt;

&lt;p&gt;Both changes are Windows-only, obviously.&lt;/p&gt;</comment>
                            <comment id="14314267" author="krummas" created="Tue, 10 Feb 2015 15:02:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;and with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8766&quot; title=&quot;SSTableRewriter opens all sstables as early before completing the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8766&quot;&gt;&lt;del&gt;CASSANDRA-8766&lt;/del&gt;&lt;/a&gt; in mind, we should probably do it this way always&lt;/p&gt;</comment>
                            <comment id="14315011" author="jmckenzie" created="Tue, 10 Feb 2015 21:46:08 +0000"  >&lt;p&gt;I&apos;ll hold off on committing this until we&apos;ve decided what we want to do with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8766&quot; title=&quot;SSTableRewriter opens all sstables as early before completing the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8766&quot;&gt;&lt;del&gt;CASSANDRA-8766&lt;/del&gt;&lt;/a&gt;; there&apos;s a reasonable chance that a fix on that ticket will supercede this one&apos;s changes.  No sense committing this just to be refactored on that ticket as it wouldn&apos;t make it in until 2.1.4 anyway.&lt;/p&gt;</comment>
                            <comment id="14319978" author="maximp" created="Fri, 13 Feb 2015 11:40:53 +0000"  >&lt;p&gt;It&apos;ll be very disappointing for us, if the fix is postponed until 2.1.4.&lt;br/&gt;
I understand that quick fixes are undesirable, but we are so eager to see it working on Windows, and this issue is one of the most frequent we see.&lt;/p&gt;</comment>
                            <comment id="14320018" author="iamaleksey" created="Fri, 13 Feb 2015 12:35:49 +0000"  >&lt;p&gt;You can apply the patch manually or run off cassandra-2.1 branch until 2.1.4 is officially released.&lt;/p&gt;</comment>
                            <comment id="14320044" author="maximp" created="Fri, 13 Feb 2015 12:56:27 +0000"  >&lt;p&gt;We can build and go on with our own distributive, but I don&apos;t feel like it&apos;s a good way to go, because of any other issues that can crop up later. Besides difficulties with reproducing and figuring out whether the patch had an effect, I don&apos;t think these issues will get any priority. It sounds like last resort.&lt;br/&gt;
But I will try the second patch, no problem here.&lt;/p&gt;</comment>
                            <comment id="14349462" author="jmckenzie" created="Thu, 5 Mar 2015 21:10:10 +0000"  >&lt;p&gt;v3 attached that should disable the switchWriter early re-open on all platforms if the feature is disabled in the yaml and forces the preemptive interval to max on Windows to bypass early re-open.&lt;/p&gt;</comment>
                            <comment id="14360653" author="krummas" created="Fri, 13 Mar 2015 17:05:23 +0000"  >&lt;p&gt;+1 on v3&lt;/p&gt;</comment>
                            <comment id="14360830" author="jmckenzie" created="Fri, 13 Mar 2015 18:08:33 +0000"  >&lt;p&gt;Committed - thanks!&lt;/p&gt;</comment>
                            <comment id="14589583" author="maximp" created="Wed, 17 Jun 2015 10:11:53 +0000"  >&lt;p&gt;I&apos;m afraid this issue has to be reopened. I&apos;ve got this in 2.1.6:&lt;/p&gt;

&lt;p&gt;2015-06-15T17:31:44,797 &lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:1&amp;#93;&lt;/span&gt; ERROR o.a.c.service.CassandraDaemon - Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;CompactionExecutor:1,1,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.RuntimeException: Failed to rename E:\Upsource\Upsource_2.0.262_new_cassandra\data\cassandra\data\upsource\content-f13ce210136211e59a87137398728adc\upsource-content-tmp-ka-18-Index.db to E:\Upsource\Upsource_2.0.262_new_cassandra\&lt;br/&gt;
data\cassandra\data\upsource\content-f13ce210136211e59a87137398728adc\upsource-content-ka-18-Index.db&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:170) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.6.jar:2.1.6&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:154) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.6.jar:2.1.6&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.java:541) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.6.jar:2.1.6&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.java:533) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;apache-cassandra-2.1.6.jar:2.1.6&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Can provide the full stacktrace if needed, but it looks the same as in the issue:&lt;/p&gt;

&lt;p&gt;Caused by: java.nio.file.FileSystemException: E:\Upsource\Upsource_2.0.262_new_cassandra\data\cassandra\data\upsource\uniqueidhistory_t-eef64d70136211e59a87137398728adc\upsource-uniqueidhistory_t-tmplink-ka-23-Index.db: The process cannot access the file because it is being used by another process.&lt;/p&gt;

&lt;p&gt;I can add that we&apos;ve been running Cassandra build on 879691dd revision and it worked fine on Windows under same load. So it looks like one of the last changes in 2.1 branch broke it again.&lt;/p&gt;</comment>
                            <comment id="14589635" author="andie78" created="Wed, 17 Jun 2015 11:11:53 +0000"  >&lt;p&gt;On Windows 7, files and directories cannot be renamed, if they&apos;re still open, so we need to close them before:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;src/java/org/apache/cassandra/io/sstable/SSTableWriter.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Pair&amp;lt;Descriptor, StatsMetadata&amp;gt; close(FinishType type, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; repairedAt)
        ....
        Descriptor descriptor = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.descriptor;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (type.isFinal)
        {
            dataFile.writeFullChecksum(descriptor);
            writeMetadata(descriptor, metadataComponents);
            &lt;span class=&quot;code-comment&quot;&gt;// save the table of components
&lt;/span&gt;            SSTable.appendTOC(descriptor, components);
+++	    dataFile.close();
            descriptor = rename(descriptor, components);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m using Win7-32bit and got the same stack trace. So 32bit or 64bit is not the issue.&lt;/p&gt;</comment>
                            <comment id="14593219" author="andie78" created="Fri, 19 Jun 2015 08:54:59 +0000"  >&lt;p&gt;It is not helping always. In some circumstances it&apos;s crashing again.&lt;/p&gt;</comment>
                            <comment id="14593421" author="andie78" created="Fri, 19 Jun 2015 13:33:40 +0000"  >&lt;p&gt;I try to fix it with 2 finalizers. One in SequentialWriter and one in RandomAccessReader. Latter helped in C* 2.0.x. One node I run w/ both finalizers and file-trace + referenceCount and one I use only the SequentialWriter-finalizer.&lt;/p&gt;</comment>
                            <comment id="14593529" author="jmckenzie" created="Fri, 19 Jun 2015 15:39:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maximp&quot; class=&quot;user-hover&quot; rel=&quot;maximp&quot;&gt;maximp&lt;/a&gt;: What was the node doing at the time you saw that error? Did you run a major compaction or repair on it around that time or was it just during normal operations?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Andie78&quot; class=&quot;user-hover&quot; rel=&quot;Andie78&quot;&gt;Andie78&lt;/a&gt;: Back-porting specific finalizers into the 2.0 branch isn&apos;t an option at this time. If you want Windows support you&apos;re really going to need to run the latest from the 2.1 line or preferably 2.2 when it releases (it&apos;s in RC phases now).&lt;/p&gt;</comment>
                            <comment id="14593561" author="andie78" created="Fri, 19 Jun 2015 16:01:02 +0000"  >&lt;p&gt;I used my (necessary) finalizer-patch from 2.0 in 2.1.7-tentative (today cloned) as well. 2.1.6-release crashes but 2.1.7 of today seems to work now with the finalizer(s). At Monday I will check the file-traces and look for exceptions.&lt;/p&gt;

&lt;p&gt;Actually it looks like, 2.1.6/7 needs only a finalizer in SequentialWriter to work w/o crash in windows. Monday I know more after some time w/ my patch.&lt;br/&gt;
Has 2.2 improved io-resource-management or why should it be better for windows now? For my belief, cassandra has leaks in filehandles and windows seems to be strict compared to linux. Why else finalizers help?&lt;/p&gt;</comment>
                            <comment id="14593720" author="jmckenzie" created="Fri, 19 Jun 2015 18:07:39 +0000"  >&lt;p&gt;The various file access violations on Windows stem from early implementation details within Java regarding their choice of flags on their older I/O API&apos;s when they call NtCreateFile. I&apos;ve rewritten our on-disk readers and writers to use nio which uses the FILE_SHARE_DELETE flag (see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4050&quot; title=&quot;Rewrite RandomAccessReader to use FileChannel / nio to address Windows file access violations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4050&quot;&gt;&lt;del&gt;CASSANDRA-4050&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8709&quot; title=&quot;Convert SequentialWriter from using RandomAccessFile to nio channel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8709&quot;&gt;&lt;del&gt;CASSANDRA-8709&lt;/del&gt;&lt;/a&gt;) so from 2.2 onward, we can rename files and delete them without having to close the original file handle first. This is of particular importance due to the way early re-open currently works on the 2.2 branch, though early re-open should be skipped on Windows as I mentioned above.&lt;/p&gt;

&lt;p&gt;We&apos;ve had a couple of regressions slip in where early re-open was incorrectly re-applied to all platforms even if it was disabled to due some side-effects of changes in SSTableRewriter; my expectation is that such changes may sneak back into either SSTRW or SequentialWriter if we&apos;re not careful on the 2.1 due to the complexity therein.&lt;/p&gt;

&lt;p&gt;I haven&apos;t had a chance to look into this ticket yet and it&apos;s not very high on my priority list because it&apos;s a class of problems that should be completely eliminated by 2.2.&lt;/p&gt;</comment>
                            <comment id="14595952" author="ilya.komolkin" created="Mon, 22 Jun 2015 14:05:50 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Joshua McKenzie added a comment - 2 days ago&lt;br/&gt;
Maxim Podkolzine: What was the node doing at the time you saw that error? Did you run a major compaction or repair on it around that time or was it just during normal operations?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Please check out the info.log attached for the activity in cassandra.&lt;br/&gt;
There are 2 &quot;Failed to rename&quot; exceptions:&lt;br/&gt;
at 2015-06-15T19:02:46,158 and 2015-06-15T19:08:55,130&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12764439">CASSANDRA-8551</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12758325">CASSANDRA-8390</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12703231">CASSANDRA-6916</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12773525">CASSANDRA-8766</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12693366" name="8535_v1.txt" size="4489" author="joshuamckenzie" created="Tue, 20 Jan 2015 19:28:29 +0000"/>
                            <attachment id="12697112" name="8535_v2.txt" size="3521" author="joshuamckenzie" created="Fri, 6 Feb 2015 20:18:28 +0000"/>
                            <attachment id="12702906" name="8535_v3.txt" size="3759" author="joshuamckenzie" created="Thu, 5 Mar 2015 21:10:10 +0000"/>
                            <attachment id="12741035" name="info.log" size="8236720" author="ilya.komolkin" created="Mon, 22 Jun 2015 13:59:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jmckenzie]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23qkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12328951">2.1.3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>marcuse</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>