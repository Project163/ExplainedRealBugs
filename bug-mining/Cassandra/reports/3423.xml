<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:51:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8722] Auth MBean needs to be registered</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8722</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7968&quot; title=&quot;permissions_validity_in_ms should be settable via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7968&quot;&gt;&lt;del&gt;CASSANDRA-7968&lt;/del&gt;&lt;/a&gt; we created this bean but forgot to register it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  This also makes &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7977&quot; title=&quot;Allow invalidating permissions cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7977&quot;&gt;&lt;del&gt;CASSANDRA-7977&lt;/del&gt;&lt;/a&gt; unusable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12771865">CASSANDRA-8722</key>
            <summary>Auth MBean needs to be registered</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Feb 2015 22:41:56 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:22 +0000</updated>
                            <resolved>Fri, 13 Mar 2015 16:02:18 +0000</resolved>
                                        <fixVersion>2.1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14309277" author="brandon.williams" created="Fri, 6 Feb 2015 15:12:33 +0000"  >&lt;p&gt;Patch to rework both of these after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8194&quot; title=&quot;Reading from Auth table should not be in the request path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8194&quot;&gt;&lt;del&gt;CASSANDRA-8194&lt;/del&gt;&lt;/a&gt;, and register the mbean.&lt;/p&gt;</comment>
                            <comment id="14328573" author="iamaleksey" created="Fri, 20 Feb 2015 05:25:40 +0000"  >&lt;p&gt;Can&apos;t pass a class to registerMBean, so this doesn&apos;t work :\&lt;/p&gt;

&lt;p&gt;I suggest you to rename AuthMBean to PermissionsCacheMBean, and have PermissionsCache implement it, then register in the constructror (it&apos;s a singleton, so it&apos;s fine).&lt;/p&gt;

&lt;p&gt;Also, some nits:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;redundant &apos;this&apos; in updateCache()&lt;/li&gt;
	&lt;li&gt;should add 
{get,set}
&lt;p&gt;PermissionsUpdateInterval() to the mbean, for symmetry, too&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14338750" author="brandon.williams" created="Thu, 26 Feb 2015 17:33:52 +0000"  >&lt;p&gt;v2 pushes everything into PermissionsCache, registers the MBean, and fixes the nits.&lt;/p&gt;</comment>
                            <comment id="14340976" author="iamaleksey" created="Fri, 27 Feb 2015 22:57:06 +0000"  >&lt;p&gt;Shouldn&apos;t need validityPeriod/updateInterval/maxEntries fields in PermissionsCache, should just fetch those directly from DD.getWhatever().&lt;/p&gt;

&lt;p&gt;Config.&lt;/p&gt;
{permissions_validity_in_ms, permissions_cache_max_entries, permissions_update_interval_in_ms}
&lt;p&gt; should be made volatile&lt;/p&gt;

&lt;p&gt;Nits:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I&apos;d prefer PermissionsCacheMBean#invalidatePermissions() to be renamed to PermissionsCacheMBean#invalidate(), and remove &apos;Permissions&apos; from every other methods in there. It&apos;s already in the interface/mbean name, and is redundant.&lt;/li&gt;
	&lt;li&gt;DatabaseDescriptor import in PermissionsCache is in teh wrong place.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;LGTM otherwise.&lt;/p&gt;</comment>
                            <comment id="14347185" author="brandon.williams" created="Wed, 4 Mar 2015 17:19:24 +0000"  >&lt;p&gt;Makes sense, attached.&lt;/p&gt;</comment>
                            <comment id="14350010" author="iamaleksey" created="Fri, 6 Mar 2015 06:04:57 +0000"  >&lt;p&gt;v3 LGTM, though I haven&apos;t verified if it actually works. A small test would be nice to have, too.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=philipthompson&quot; class=&quot;user-hover&quot; rel=&quot;philipthompson&quot;&gt;philipthompson&lt;/a&gt; May I ask you to verify that the mbean does what it&apos;s supposed to do? I don&apos;t know if we do/can test JMX directly in dtests, but if not, a manual test would do, too.&lt;/p&gt;</comment>
                            <comment id="14359599" author="philipthompson" created="Thu, 12 Mar 2015 23:17:10 +0000"  >&lt;p&gt;Sorry, just got to this. The patch doesn&apos;t apply to trunk, FYI. Running with this on 2.1-HEAD, altering permissions_validity and the update rate did affect how long permissions lasted (I couldn&apos;t test with perfect granularity manually). Using invalidate did cause the real permissions to be checked as well. +1&lt;/p&gt;</comment>
                            <comment id="14359624" author="iamaleksey" created="Thu, 12 Mar 2015 23:37:50 +0000"  >&lt;p&gt;Thanks Philip.&lt;/p&gt;

&lt;p&gt;It&apos;s 2.1-based, so naturally doesn&apos;t apply to trunk. Originally we thought to not commit it to trunk at all, but there is a very good chance that &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7715&quot; title=&quot;Add a credentials cache to the PasswordAuthenticator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7715&quot;&gt;&lt;del&gt;CASSANDRA-7715&lt;/del&gt;&lt;/a&gt; will not happen in 3.0. Meaning that this patch will have to go into 3.0, too, and we&apos;d have to do the same thing for the RolesCache.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; Can you do the same for RolesCache for trunk, in a new ticket?&lt;/p&gt;</comment>
                            <comment id="14360540" author="brandon.williams" created="Fri, 13 Mar 2015 16:02:18 +0000"  >&lt;p&gt;Committed to 2.1, created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8967&quot; title=&quot;Allow RolesCache to be invalidated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8967&quot;&gt;&lt;del&gt;CASSANDRA-8967&lt;/del&gt;&lt;/a&gt; for RolesCache.&lt;/p&gt;</comment>
                            <comment id="14538124" author="aweisberg" created="Mon, 11 May 2015 16:29:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; IMO this doesn&apos;t meet our definition of done. The original functionality depending on the bean being registered had no tests and that is still the case? It would be a problem for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8697&quot; title=&quot;remove unused yaml setting: commitlog_periodic_queue_size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8697&quot;&gt;&lt;del&gt;CASSANDRA-8697&lt;/del&gt;&lt;/a&gt; as well.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12742614">CASSANDRA-7977</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12742320">CASSANDRA-7968</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12781840">CASSANDRA-8967</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12701136" name="8722-v2.txt" size="7696" author="brandon.williams" created="Thu, 26 Feb 2015 18:08:59 +0000"/>
                            <attachment id="12702841" name="8722-v3.txt" size="9736" author="brandon.williams" created="Thu, 5 Mar 2015 16:12:15 +0000"/>
                            <attachment id="12697273" name="8722.txt" size="7898" author="brandon.williams" created="Sat, 7 Feb 2015 17:34:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i253hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327942">2.0.11</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>