<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:27:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18543] Waiting for gossip to settle does not wait for live endpoints</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18543</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When a node starts it will get endpoint states (via shadow round) but have all nodes marked as down. The problem is the wait to settle only checks the size of endpoint states is stable before starting Native transport. Once native transport starts it will receive queries and fail consistency levels such as LOCAL_QUORUM since it still thinks nodes are down.&lt;/p&gt;

&lt;p&gt;This is problem for a number of large clusters for our customers. The cluster has quorum but due to this issue a node restart is causing a bunch of query errors.&lt;/p&gt;

&lt;p&gt;My initial solution to this was to only check live endpoints size in addition to size of endpoint states. This worked but I noticed in testing this fix that there also a lot of duplication of checking the same node (via Echo messages) for liveness. So the patch also removes this duplication of checking node is UP in markAlive.&lt;/p&gt;

&lt;p&gt;The final problem I found while testing is sometimes could still not see a change in live endpoints due to only 1 second polling, so the patch allows for overridding the settle parameters. I could not reliability reproduce this but think its worth providing a way to override these hardcoded values.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13537232">CASSANDRA-18543</key>
            <summary>Waiting for gossip to settle does not wait for live endpoints</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smiklosovic">Stefan Miklosovic</assignee>
                                    <reporter username="cam1982">Cameron Zemek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 May 2023 00:36:39 +0000</created>
                <updated>Sun, 4 Aug 2024 23:10:41 +0000</updated>
                            <resolved>Thu, 15 Jun 2023 13:58:27 +0000</resolved>
                                        <fixVersion>3.11.16</fixVersion>
                    <fixVersion>4.0.11</fixVersion>
                    <fixVersion>4.1.3</fixVersion>
                    <fixVersion>5.0-alpha1</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>Cluster/Gossip</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17725142" author="cam1982" created="Tue, 23 May 2023 00:39:47 +0000"  >&lt;p&gt;Another potential solution might be to allow shadow round to allow marking nodes as alive (ie UP). That is if you are just starting up and talk to another seed who has view of state of cluster, why can it not just use that as initial state for alive state?&lt;/p&gt;</comment>
                            <comment id="17727180" author="smiklosovic" created="Mon, 29 May 2023 18:57:12 +0000"  >&lt;p&gt;4.0 &lt;a href=&quot;https://github.com/apache/cassandra/pull/2361/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/2361/files&lt;/a&gt;&lt;br/&gt;
j11 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2328/workflows/c193288a-7c33-4507-bd92-c7d859c380a2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2328/workflows/c193288a-7c33-4507-bd92-c7d859c380a2&lt;/a&gt;&lt;br/&gt;
j8&#160;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2328/workflows/bd9a4ef4-0156-428e-8b77-701f5affcccf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2328/workflows/bd9a4ef4-0156-428e-8b77-701f5affcccf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17730674" author="brandon.williams" created="Thu, 8 Jun 2023 19:04:32 +0000"  >&lt;p&gt;I think this looks good and we&apos;re ready for the other branches.&lt;/p&gt;</comment>
                            <comment id="17731479" author="smiklosovic" created="Mon, 12 Jun 2023 07:47:14 +0000"  >&lt;p&gt;builds:&lt;/p&gt;

&lt;p&gt;3.11 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2423/workflows/26a6636a-3b8a-4ccd-9d18-192f8945d42a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2423/workflows/26a6636a-3b8a-4ccd-9d18-192f8945d42a&lt;/a&gt;&lt;br/&gt;
4.0 j11 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2328/workflows/c193288a-7c33-4507-bd92-c7d859c380a2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2328/workflows/c193288a-7c33-4507-bd92-c7d859c380a2&lt;/a&gt;&lt;br/&gt;
4.0 j8 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2328/workflows/bd9a4ef4-0156-428e-8b77-701f5affcccf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2328/workflows/bd9a4ef4-0156-428e-8b77-701f5affcccf&lt;/a&gt;&lt;br/&gt;
4.1 j11 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2416/workflows/b308293d-082e-4700-89cc-e0f1971c82cb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2416/workflows/b308293d-082e-4700-89cc-e0f1971c82cb&lt;/a&gt;&lt;br/&gt;
4.1 j8 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2416/workflows/ae61881c-eb8d-4572-92e5-3070ac560f4e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2416/workflows/ae61881c-eb8d-4572-92e5-3070ac560f4e&lt;/a&gt;&lt;br/&gt;
trunk j11 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2417/workflows/56e01f19-4b96-46e2-bdc7-b3d731bab2ab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2417/workflows/56e01f19-4b96-46e2-bdc7-b3d731bab2ab&lt;/a&gt;&lt;br/&gt;
trunk j8 &lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2417/workflows/c66ecba4-cfc7-4ccc-87e2-85079db8700d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/2417/workflows/c66ecba4-cfc7-4ccc-87e2-85079db8700d&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;branches:&lt;br/&gt;
3.11 &lt;a href=&quot;https://github.com/instaclustr/cassandra/commits/CASSANDRA-18543-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/instaclustr/cassandra/commits/CASSANDRA-18543-3.11&lt;/a&gt;&lt;br/&gt;
4.0 &lt;a href=&quot;https://github.com/instaclustr/cassandra/commits/CASSANDRA-18543-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/instaclustr/cassandra/commits/CASSANDRA-18543-4.0&lt;/a&gt;&lt;br/&gt;
4.1 &lt;a href=&quot;https://github.com/instaclustr/cassandra/commits/CASSANDRA-18543-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/instaclustr/cassandra/commits/CASSANDRA-18543-4.1&lt;/a&gt;&lt;br/&gt;
trunk: &lt;a href=&quot;https://github.com/instaclustr/cassandra/commits/CASSANDRA-18543-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/instaclustr/cassandra/commits/CASSANDRA-18543-trunk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17732548" author="brandon.williams" created="Wed, 14 Jun 2023 13:52:46 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17816202" author="JIRAUSER287854" created="Fri, 9 Feb 2024 19:58:10 +0000"  >&lt;p&gt;Hi Everyone,&#160;&lt;/p&gt;

&lt;p&gt;Do you have any idea if this is an old bug in Cassandra or if it just happens in a specific version of Cassandra ( &amp;gt; 3.11.4 )?&#160;&lt;/p&gt;

&lt;p&gt;I&apos;m asking because we upgraded our production clusters from 3.11.4 to 3.11.15 and we started getting &quot; Unable to contact any seeds! &quot; error when replacing dead node.&#160;&lt;br/&gt;
We have not experienced this issue on Cassandra 3.11.4.&#160;&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Mohammad&lt;/p&gt;</comment>
                            <comment id="17870881" author="cam1982" created="Sun, 4 Aug 2024 23:10:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Aburadeh&quot; class=&quot;user-hover&quot; rel=&quot;Aburadeh&quot;&gt;Aburadeh&lt;/a&gt; can you refer to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19580&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-19580&lt;/a&gt; to see if that is what you are running into.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13058534" name="gossip.patch" size="5610" author="cam1982" created="Thu, 25 May 2023 12:24:26 +0000"/>
                            <attachment id="13058533" name="gossip4.patch" size="5959" author="cam1982" created="Thu, 25 May 2023 12:24:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12983" cascade-level=""><![CDATA[Availability]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1i2i0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348835">NA</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/64d953fdcac91715898454a3cb04d932910a70b7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/64d953fdcac91715898454a3cb04d932910a70b7&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;CI&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>