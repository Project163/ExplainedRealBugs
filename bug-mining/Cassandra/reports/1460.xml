<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:29:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3371] Cassandra inferred schema and actual data don&apos;t match</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3371</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;It&apos;s looking like there may be a mismatch between the schema that&apos;s being reported by the latest CassandraStorage.java, and the data that&apos;s actually returned. Here&apos;s an example:&lt;/p&gt;

&lt;p&gt;rows = LOAD &apos;cassandra://Frap/PhotoVotes&apos; USING CassandraStorage();&lt;br/&gt;
DESCRIBE rows;&lt;br/&gt;
rows: {key: chararray,columns: {(name: chararray,value: bytearray,photo_owner: chararray,value_photo_owner: bytearray,pid: chararray,value_pid: bytearray,matched_string: chararray,value_matched_string: bytearray,src_big: chararray,value_src_big: bytearray,time: chararray,value_time: bytearray,vote_type: chararray,value_vote_type: bytearray,voter: chararray,value_voter: bytearray)}}&lt;br/&gt;
DUMP rows;&lt;br/&gt;
(691831038_1317937188.48955,&lt;/p&gt;
{(photo_owner,1596090180),(pid,6855155124568798560),(matched_string,),(src_big,),(time,Thu Oct 06 14:39:48 -0700 2011),(vote_type,album_dislike),(voter,691831038)}
&lt;p&gt;)&lt;/p&gt;

&lt;p&gt;getSchema() is reporting the columns as an inner bag of tuples, each of which contains 16 values. In fact, getNext() seems to return an inner bag containing 7 tuples, each of which contains two values. &lt;/p&gt;

&lt;p&gt;It appears that things got out of sync with this change:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc/cassandra/branches/cassandra-0.8/contrib/pig/src/java/org/apache/cassandra/hadoop/pig/CassandraStorage.java?r1=1177083&amp;amp;r2=1177082&amp;amp;pathrev=1177083&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/cassandra/branches/cassandra-0.8/contrib/pig/src/java/org/apache/cassandra/hadoop/pig/CassandraStorage.java?r1=1177083&amp;amp;r2=1177082&amp;amp;pathrev=1177083&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See more discussion at:&lt;br/&gt;
&lt;a href=&quot;http://cassandra-user-incubator-apache-org.3065146.n2.nabble.com/pig-cassandra-problem-quot-Incompatible-field-schema-quot-error-tc6882703.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassandra-user-incubator-apache-org.3065146.n2.nabble.com/pig-cassandra-problem-quot-Incompatible-field-schema-quot-error-tc6882703.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527421">CASSANDRA-3371</key>
            <summary>Cassandra inferred schema and actual data don&apos;t match</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="petewarden">Pete Warden</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2011 10:25:03 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:48 +0000</updated>
                            <resolved>Mon, 13 Feb 2012 23:45:18 +0000</resolved>
                                        <fixVersion>1.0.8</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13128995" author="brandon.williams" created="Mon, 17 Oct 2011 16:45:47 +0000"  >&lt;p&gt;Pete, can you attach this patch as a file?  It&apos;s difficult to read in the description.&lt;/p&gt;</comment>
                            <comment id="13129175" author="petewarden" created="Mon, 17 Oct 2011 20:49:17 +0000"  >&lt;p&gt;Messy patch to implement matching schema and data return in CassandraLoader.&lt;/p&gt;</comment>
                            <comment id="13129182" author="petewarden" created="Mon, 17 Oct 2011 20:55:45 +0000"  >&lt;p&gt;I&apos;ve attached the patch as a file (couldn&apos;t see how when creating the ticket). It&apos;s definitely not ready for prime-time, but hopefully should get across the idea of what I&apos;m going for. Some notes:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I think the Hex handling has changed between top-of-tree and the 0.8.7 version I&apos;m on, so the diff includes some reversions so I can compile it against my older version. This shouldn&apos;t be in any final version of the patch.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;It has been a long time since I last wrote Java code, so my changes are probably very non-idiomatic.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I don&apos;t attempt to handle super-columns in getNext(). Looking at the original getSchema() code, it looks like that case might be unhandled anyway? I see &apos;if (cfDef.column_type.equals(&quot;Super&quot;)) return null;&apos; near the top.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13129186" author="petewarden" created="Mon, 17 Oct 2011 20:57:19 +0000"  >&lt;p&gt;And for completeness, here&apos;s the definition of the column family in the examples above:&lt;/p&gt;


&lt;p&gt;create column family PhotoVotes with&lt;br/&gt;
  comparator = UTF8Type and&lt;br/&gt;
  column_metadata =&lt;br/&gt;
  [&lt;br/&gt;
    &lt;/p&gt;
{column_name: voter, validation_class: UTF8Type, index_type: KEYS}
&lt;p&gt;,&lt;br/&gt;
    &lt;/p&gt;
{column_name: vote_type, validation_class: UTF8Type}
&lt;p&gt;,&lt;br/&gt;
    &lt;/p&gt;
{column_name: photo_owner, validation_class: UTF8Type, index_type: KEYS}
&lt;p&gt;,&lt;br/&gt;
    &lt;/p&gt;
{column_name: src_big, validation_class: UTF8Type}
&lt;p&gt;,&lt;br/&gt;
    &lt;/p&gt;
{column_name: pid, validation_class: UTF8Type, index_type: KEYS}
&lt;p&gt;,&lt;br/&gt;
    &lt;/p&gt;
{column_name: matched_string, validation_class: UTF8Type}
&lt;p&gt;,&lt;br/&gt;
    &lt;/p&gt;
{column_name: time, validation_class: UTF8Type}
&lt;p&gt;,&lt;br/&gt;
  ];&lt;/p&gt;</comment>
                            <comment id="13130982" author="brandon.williams" created="Wed, 19 Oct 2011 20:46:33 +0000"  >&lt;p&gt;This approach has many problems, such as column name and key collisions.  Instead, what we need to is wrap the column/value pairs in their own tuple and then insert these into an outer tuple that goes in the bag, causing the schema the match our actual output.  v2 does this.&lt;/p&gt;</comment>
                            <comment id="13130990" author="petewarden" created="Wed, 19 Oct 2011 20:54:47 +0000"  >&lt;p&gt;Is there a reason the columns can&apos;t at least go into a map? As things stand, it&apos;s painfully hard to do the natural row.column.value lookup in a script. Or to put it as a concrete example, I can currently do this:&lt;/p&gt;

&lt;p&gt;all_votes = LOAD &apos;cassandra://Frap/PhotoVotes&apos; USING CassandraStorage();&lt;br/&gt;
album_votes = FILTER all_votes BY ((vote_type EQ &apos;album_like&apos;) OR (vote_type EQ &apos;album_dislike&apos;));&lt;/p&gt;

&lt;p&gt;What does this example look like with your approach?&lt;/p&gt;</comment>
                            <comment id="13131540" author="brandon.williams" created="Thu, 20 Oct 2011 12:03:48 +0000"  >&lt;p&gt;I had what I thought would be a good idea to accomodate this: I&apos;d alias the tuples themselves after the index names, allowing you to do something like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;album_votes = FILTER all_votes BY (columns.vote_type.value EQ &apos;album_like&apos;) OR (columns.vote_type.value EQ &apos;album_dislike&apos;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s not that easy, however.  When you dereference a bag, it automatically dereferences the tuple inside it (programmatically, a bag can only have one tuple, but that tuple can contain anything, and thus the automatic deref to mask this from the user.)  Unfortunately, it appears to also deref any other tuples inside as well, so you end up in a situation where &apos;columns.$0&apos; returns the column name, and weird aliasing issues like &apos;columns.&amp;lt;first index name&amp;gt;&apos; also returns the column name and the second index returns the value, with the rest being null.&lt;/p&gt;

&lt;p&gt;To get around this, I thought I&apos;d nest each tuple inside another bag.  This of course results in a crazy looking schema:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;votes: {key: bytearray,columns: {(matched_string: {(name: chararray,value: chararray)},photo_owner: {(name: chararray,value: chararray)},pid: {(name: chararray,value: chararray)},src_big: {(name: chararray,value: chararray)},time: {(name: chararray,value: chararray)},vote_type: {(name: chararray,value: chararray)},voter: {(name: chararray,value: chararray)})}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but if it still derefs as elegantly, it won&apos;t be too bad.  The problem here is that it still can&apos;t deref correctly, you end up with nonsensical parsing errors such as:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR 1200: Pig script failed to parse: 
&amp;lt;file photo.pig, line 5, column 8&amp;gt; pig script failed to validate: org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1128: Cannot find field name in matched_string:bag{:tuple(name:chararray,value:chararray)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;even though the &apos;name&apos; alias is clearly there and &apos;matched_string&apos; was already being deref&apos;d.&lt;/p&gt;

&lt;p&gt;So I decided to just get rid of the all the bags, and instead did a tuple of tuples.  This worked!  But the problem here is that a tuple has to fit into memory, where a bag can spill to disk if it is very large.  Currently this won&apos;t be an issue since we have to fit the entire row into memory via thrift anyway, but in the future when we have large row support the contract may have to change again.  Maybe this is the best option though since right now it Just Works and nothing else is viable.&lt;/p&gt;

&lt;p&gt;While going through all this I noticed two other problems we currently have.  We need to put the indexed columns at the beginning so they can match the schema (since any amount of non-indexed columns may fall between them in sorting order) and the default validator is always being used due to a bad lookup.  These are trivial to solve, however.  v3 fixes these issues and takes the &apos;tuple of tuples&apos; approach, for better or worse.&lt;/p&gt;</comment>
                            <comment id="13131541" author="brandon.williams" created="Thu, 20 Oct 2011 12:09:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is there a reason the columns can&apos;t at least go into a map? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Maps only support string keys as far as I know (and also have the unspillable problem.)&lt;/p&gt;</comment>
                            <comment id="13132096" author="petewarden" created="Thu, 20 Oct 2011 22:02:37 +0000"  >&lt;p&gt;Thanks Brandon, sounds very promising, excited to try it out.&lt;/p&gt;</comment>
                            <comment id="13132342" author="petewarden" created="Fri, 21 Oct 2011 05:28:01 +0000"  >&lt;p&gt;Works like a charm, thanks again Brandon.&lt;/p&gt;</comment>
                            <comment id="13147282" author="jeromatron" created="Wed, 9 Nov 2011 20:58:35 +0000"  >&lt;p&gt;Brandon, Jacob Perkins, and Jeremy (me) had a long discussion about how to address this as well as other issues with CassandraStorage.  We came down to a list of 3-4 things that if implemented would resolve the problem with pig 0.9 as well as make CassandraStorage much more usable.&lt;/p&gt;

&lt;p&gt;1. Fix schema so that this ticket&apos;s problem is resolved - this goes along with #2.&lt;/p&gt;

&lt;p&gt;2. have the default return value from CassandraStorage be (key, column, value) as is thought of for transposing wide rows.  If in the constructor, something like pygmalion&apos;s FromCassandraBag is specified, then return that.  See pygmalion&apos;s doc for that.&lt;/p&gt;

&lt;p&gt;3. Inspect what is passed in for the output and if it conforms to pygmalion&apos;s ToCassandraBag - namely a key and a bunch of columns, it will introspect the pig schema and use those pig variable names for the column names.&lt;/p&gt;

&lt;p&gt;4. Optionally handle the uniqueness case with some kind of context/random identifier so that multiple CassandraStorage instances writing out don&apos;t get confused with the schema.&lt;/p&gt;</comment>
                            <comment id="13148753" author="petewarden" created="Fri, 11 Nov 2011 21:31:42 +0000"  >&lt;p&gt;Thanks for digging into this. To help me understand better, do you have a concrete example of how the example script I mentioned would look? With Brandon&apos;s current solution it&apos;s like this:&lt;/p&gt;

&lt;p&gt;all_votes = LOAD &apos;cassandra://Frap/PhotoVotes&apos; USING CassandraStorage();&lt;br/&gt;
album_votes = FILTER all_votes BY ((columns.vote_type.value EQ &apos;album_like&apos;) OR (columns.vote_type.value EQ &apos;album_dislike&apos;));&lt;/p&gt;

&lt;p&gt;This is very usable, and my only concern would be that alternative solutions wouldn&apos;t make this common use case as easy.&lt;/p&gt;</comment>
                            <comment id="13150651" author="jeromatron" created="Tue, 15 Nov 2011 18:16:22 +0000"  >&lt;p&gt;I think with the pygmalion style of specification, it might require a bit more on the load, but less on the filter.  The columns var wouldn&apos;t be needed on the filter, for example.  It would just look like the pygmalion examples except you wouldn&apos;t need FromCassandraBag, you would specify that in &quot;USING CassandraStorage(&apos;vote_type&apos;)&quot;&lt;/p&gt;

&lt;p&gt;So I think it would just be:&lt;br/&gt;
all_votes = LOAD &apos;cassandra://Frap/PhotoVotes&apos; USING CassandraStorage(&apos;vote_type&apos;); &amp;#8211; you can add any additional columns&lt;br/&gt;
album_votes = FILTER all_votes BY (vote_type EQ &apos;album_like&apos;) OR (vote_type EQ &apos;album_dislike&apos;);&lt;/p&gt;

&lt;p&gt;You can add other columns as you need them in the CassandraStorage section.&lt;/p&gt;</comment>
                            <comment id="13151476" author="petewarden" created="Wed, 16 Nov 2011 20:14:29 +0000"  >&lt;p&gt;That makes sense, and looks very approachable, thanks. I&apos;ll keep an eye on the comments here so I can give it a try as soon as a prototype is available. Thanks again Brandon, Jacob and Jeremy for your hard work on this one.&lt;/p&gt;</comment>
                            <comment id="13161252" author="verbal" created="Thu, 1 Dec 2011 22:28:10 +0000"  >&lt;p&gt;I&apos;ve been following this thread and am actively trying to use CassandraStorage. Before I found this thread, I tried a bunch of stuff on my own with varying degrees of success. My most pressing issue right now is regarding rows with different columns. I do not believe the Pig schema that gets generated supports that. Please advise. Thanks!&lt;/p&gt;</comment>
                            <comment id="13189334" author="brandon.williams" created="Thu, 19 Jan 2012 19:44:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;1. Fix schema so that this ticket&apos;s problem is resolved&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;v4 does this, however it&apos;s not quite all of what we want.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;2. have the default return value from CassandraStorage be (key, column, value) as is thought of for transposing wide rows&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;After thinking about this more, that&apos;s the wrong way to approach that, because if you DO want to work within the row, now you have to do an expensive group to get back what we had before &amp;#8211; a nest structure &amp;#8211; where breaking that structure up into (k, c, v) is extremely cheap if that&apos;s what you want.  So ultimately, we need to stick with a bag for spillage, and thus keep the existing schema.  v4 does this.&lt;/p&gt;

&lt;p&gt;v4 also names the &lt;b&gt;values&lt;/b&gt; of indexed/validated columns after their name, which is more pygmalion-style, since you&apos;ll always want to filter the value, not the name.&lt;/p&gt;

&lt;p&gt;The problem, however, is strange parsing problems again:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR 1200: Pig script failed to parse: 
&amp;lt;file foo.pig, line 3, column 7&amp;gt; pig script failed to validate: org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1128: Cannot find field owner_id in :tuple(name:chararray,owner_id:chararray)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The seems related to the fact that schema-wise, a bag can only contain a single tuple - but that tuple can then contain any number of items.  Apparently this is only a hard requirement in 0.9 or later, but I tested it up to trunk so it doesn&apos;t look like it&apos;s going anywhere.&lt;/p&gt;

&lt;p&gt;In practice, however, getNext doesn&apos;t actually return this &apos;container&apos; tuple.  If you do you get casting errors.&lt;/p&gt;

&lt;p&gt;I&apos;m not really sure how we can fix this, and finding other examples of LoadMetadata implemented with bags are hard to come by.&lt;/p&gt;
</comment>
                            <comment id="13197202" author="brandon.williams" created="Tue, 31 Jan 2012 20:58:07 +0000"  >&lt;p&gt;I resolved &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2485&quot; title=&quot;Unable to find alias in a bag with nested schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2485&quot;&gt;&lt;del&gt;PIG-2485&lt;/del&gt;&lt;/a&gt; as invalid.  You can read the explanation there, but I&apos;ll go ahead and summarize: a bag&apos;s schema can only contain one tuple because it is assumed that all tuples in the bag have the same schema.  Obviously this won&apos;t be true in Cassandra since we allow any column to have any schema that you like.  However, after talking with Dmitriy Ryaboy, I have a plan.  We got good results out of tuple-of-tuples, but this won&apos;t work with wide rows.  Another thing it won&apos;t work with is small rows where some columns have metadata, and some do not, because when you define a tuple-of-tuples that is a hard constraint; you can&apos;t define 4 and then return 20.  So what I propose is that we change the output format to be a tuple-of-tuples for all columns that have metadata, and then a bag with the rest of the columns with a single schema (the default comparator/validator.)  This will work for both static and wide rows, unless you manage to define metadata on so many columns in a wide row that they themselves qualify as wide.&lt;/p&gt;

&lt;p&gt;To give an example, let&apos;s continue with what Pete started with a slight modification:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create column family PhotoVotes with
comparator = UTF8Type and
column_metadata =
[
{column_name: voter, validation_class: UTF8Type, index_type: KEYS},
{column_name: vote_type, validation_class: UTF8Type},
{column_name: photo_owner, validation_class: UTF8Type, index_type: KEYS},
{column_name: src_big, validation_class: UTF8Type},
{column_name: pid, validation_class: UTF8Type, index_type: KEYS},
{column_name: matched_string, validation_class: UTF8Type},
{column_name: time, validation_class: LongType},
];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Loading this from pig produces a schema like:&lt;br/&gt;
(key: bytearray,matched_string: (name: chararray,value: chararray),photo_owner: (name: chararray,value: chararray),pid: (name: chararray,value: chararray),src_big: (name: chararray,value: chararray),time: (name: chararray,value: long),vote_type: (name: chararray,value: chararray),voter: (name: chararray,value: chararray),columns: &lt;/p&gt;
{(name: chararray,value: bytearray)}
&lt;p&gt;)&lt;/p&gt;

&lt;p&gt;This should allow you do things like:&lt;/p&gt;

&lt;p&gt;FILTER rows by vote_type.value eq &apos;album_like&apos;&lt;/p&gt;

&lt;p&gt;Note that the &lt;b&gt;tuple&lt;/b&gt; is named after the index, and inside the tuple we still have &apos;name&apos; and &apos;value&apos;.  This is because if we don&apos;t have the name accessible, this is going to be hard to store later (and schema introspection is a bit more magic than I&apos;d care to use.)&lt;/p&gt;</comment>
                            <comment id="13197203" author="brandon.williams" created="Tue, 31 Jan 2012 20:59:13 +0000"  >&lt;p&gt;v5 implements this schema.  No work on the putNext side of things yet since I haven&apos;t quite decided how to handle that.&lt;/p&gt;</comment>
                            <comment id="13197321" author="brandon.williams" created="Tue, 31 Jan 2012 22:18:13 +0000"  >&lt;p&gt;Rebased v5 after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3251&quot; title=&quot;CassandraStorage uses comparator for both super column names and sub column names.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3251&quot;&gt;&lt;del&gt;CASSANDRA-3251&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13203450" author="jalkanen" created="Wed, 8 Feb 2012 10:35:04 +0000"  >&lt;p&gt;This issue also affects 1.0.7. Banged my head against the wall for an hour or so before I found this issue. The patch does not apply cleanly on 1.0.7 either :-/&lt;/p&gt;</comment>
                            <comment id="13203618" author="brandon.williams" created="Wed, 8 Feb 2012 14:01:44 +0000"  >&lt;p&gt;New patches build upon v5 and adds output storage to match.  The catch, however, is that either the tuples (indexed/validated columns) or the bag (unknown columns) are optional, so if you are dealing with narrow output, you can just make a tuple like (key, (name,value), (name,value)) and that will work.&lt;/p&gt;</comment>
                            <comment id="13207234" author="brandon.williams" created="Mon, 13 Feb 2012 21:37:36 +0000"  >&lt;p&gt;v6 is rebased and contains minor cleanups, smoke_test contains a file to be replayed by the cli and a pig script to exercise loading/storing every cassandra type.&lt;/p&gt;</comment>
                            <comment id="13207307" author="xedin" created="Mon, 13 Feb 2012 22:58:05 +0000"  >&lt;p&gt;+1 on the v6 with cleanup patch attached - replaced ArrayList, HashMap with interfaces, added generic description to reader/writer so no more blind casts, changed thrift &lt;/p&gt;
{Super}
&lt;p&gt;Column to user setX(...) methods and removed whitespaces. &lt;/p&gt;</comment>
                            <comment id="13207353" author="brandon.williams" created="Mon, 13 Feb 2012 23:45:18 +0000"  >&lt;p&gt;Committed w/cleanup patch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12539212">PIG-2485</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12538404">CASSANDRA-3745</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12513811" name="0001-Rework-pig-schema.txt" size="8850" author="brandon.williams" created="Wed, 8 Feb 2012 14:01:44 +0000"/>
                            <attachment id="12513812" name="0002-Output-support-to-match-input.txt" size="9922" author="brandon.williams" created="Wed, 8 Feb 2012 14:01:44 +0000"/>
                            <attachment id="12499755" name="3371-v2.txt" size="4709" author="brandon.williams" created="Wed, 19 Oct 2011 20:46:33 +0000"/>
                            <attachment id="12499851" name="3371-v3.txt" size="9080" author="brandon.williams" created="Thu, 20 Oct 2011 12:03:48 +0000"/>
                            <attachment id="12511156" name="3371-v4.txt" size="6710" author="brandon.williams" created="Thu, 19 Jan 2012 19:34:18 +0000"/>
                            <attachment id="12512674" name="3371-v5-rebased.txt" size="8665" author="brandon.williams" created="Tue, 31 Jan 2012 22:18:13 +0000"/>
                            <attachment id="12512626" name="3371-v5.txt" size="8574" author="brandon.williams" created="Tue, 31 Jan 2012 20:59:13 +0000"/>
                            <attachment id="12514413" name="3371-v6-cleanup.patch" size="7164" author="xedin" created="Mon, 13 Feb 2012 22:58:05 +0000"/>
                            <attachment id="12514398" name="3371-v6.txt" size="17832" author="brandon.williams" created="Mon, 13 Feb 2012 21:37:36 +0000"/>
                            <attachment id="12499429" name="pig.diff" size="6991" author="petewarden" created="Mon, 17 Oct 2011 20:49:16 +0000"/>
                            <attachment id="12514399" name="smoke_test.txt" size="4139" author="brandon.williams" created="Mon, 13 Feb 2012 21:37:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gj2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>xedin</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>