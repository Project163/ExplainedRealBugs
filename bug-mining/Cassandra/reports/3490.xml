<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:52:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9180] Failed bootstrap/replace attempts persist entries in system.peers</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9180</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;In working on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8336&quot; title=&quot;Add shutdown gossip state to prevent timeouts during rolling restarts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8336&quot;&gt;&lt;del&gt;CASSANDRA-8336&lt;/del&gt;&lt;/a&gt;, I discovered vanilla C* has this problem.  Just start a bootstrap or replace and kill it during the ring info gathering phase. System.peers, the gift that keeps on giving.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12820593">CASSANDRA-9180</key>
            <summary>Failed bootstrap/replace attempts persist entries in system.peers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Apr 2015 18:14:19 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:14 +0000</updated>
                            <resolved>Tue, 14 Apr 2015 17:47:05 +0000</resolved>
                                        <fixVersion>2.0.15</fixVersion>
                    <fixVersion>2.1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14492948" author="brandon.williams" created="Mon, 13 Apr 2015 19:40:15 +0000"  >&lt;p&gt;Traced this back to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6053&quot; title=&quot;system.peers table not updated after decommissioning nodes in C* 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6053&quot;&gt;&lt;del&gt;CASSANDRA-6053&lt;/del&gt;&lt;/a&gt;, at least for bootstrapping.  We don&apos;t look at the STATUS, so in the switch statement in SS.onChange when any non-STATUS state changes (which is guaranteed to happen) we persist the peer.  Why replacing is also affected I&apos;m not sure, since we check for dead state and bail out, but my guess is STATUS isn&apos;t the first state processed and the check doesn&apos;t know the state so it fails.&lt;/p&gt;</comment>
                            <comment id="14492950" author="brandon.williams" created="Mon, 13 Apr 2015 19:42:27 +0000"  >&lt;p&gt;Actually, this originates from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4351&quot; title=&quot;Consider storing more informations on peers in system tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4351&quot;&gt;&lt;del&gt;CASSANDRA-4351&lt;/del&gt;&lt;/a&gt;, which explains why it happens on 2.0.0.&lt;/p&gt;</comment>
                            <comment id="14493034" author="brandon.williams" created="Mon, 13 Apr 2015 20:43:06 +0000"  >&lt;p&gt;Simple fix to check if the node is a ring member before updating.  We still need to bail on dead states first though due to replace.&lt;/p&gt;</comment>
                            <comment id="14494420" author="slebresne" created="Tue, 14 Apr 2015 17:17:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14494472" author="brandon.williams" created="Tue, 14 Apr 2015 17:47:05 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="14538143" author="aweisberg" created="Mon, 11 May 2015 16:38:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; can you update &lt;a href=&quot;https://docs.google.com/document/d/1kccPqxEAoYQpT0gXnp20MYQUDmjOrakAeQhf6vkqjGo/edit?pli=1#heading=h.zd5nw0kl2ypi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;kitchen sink doc&lt;/a&gt; with a description of any inconvenient windows you can think of to kill a node during bootstrap? We can have the harness kill nodes based on time or based on log messages.&lt;/p&gt;

&lt;p&gt;Or maybe that is the wrong way to go about addressing bugs stemming from stale or broken state related to cluster membership and connectivity. Just thinking of how we can make it work more consistently.&lt;/p&gt;</comment>
                            <comment id="14539986" author="brandon.williams" created="Tue, 12 May 2015 15:08:37 +0000"  >&lt;p&gt;As linked, I think &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8252&quot; title=&quot;dtests that involve topology changes should verify system.peers on all nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8252&quot;&gt;CASSANDRA-8252&lt;/a&gt; is the best way to handle these types of things.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12752778">CASSANDRA-8252</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12725037" name="9081.txt" size="2728" author="brandon.williams" created="Mon, 13 Apr 2015 20:43:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d6v3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324629">2.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>