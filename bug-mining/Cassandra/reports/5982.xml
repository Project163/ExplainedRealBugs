<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:24:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-17467] Timestamp issue with Cassandra 4.0.3 with Timezone value</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-17467</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Hello Team ,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Facing one issue related to the timestamp type in cassandra 4.0.3 version . This is not repro in 3.11.x and works fine in 3.11.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;when i have table with timestamp as fields :&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;CREATE TABLE timetest (&lt;/p&gt;

&lt;p&gt;&#160; &#160; id int PRIMARY KEY,&lt;/p&gt;

&lt;p&gt;&#160; &#160; enddate timestamp,&lt;/p&gt;

&lt;p&gt;&#160; &#160; startdate timestamp&lt;/p&gt;

&lt;p&gt;)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Now when try to insert the record like :&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;INSERT INTO timetest (id,startdate,enddate) VALUES (1 ,&apos;2022-03-20 12:48:56 +0530&apos;,&apos;2022-03-20 12:48:56 +0530&apos;)&lt;/p&gt;

&lt;p&gt;I am receiving&#160;error:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&quot;&lt;font color=&quot;#de350b&quot;&gt;InvalidRequest&lt;/font&gt;: Error from server: code=2200 &lt;span class=&quot;error&quot;&gt;&amp;#91;Invalid query&amp;#93;&lt;/span&gt; message=&quot;Unable to parse a date/time from &apos;2022-03-20 12:48:56 +0530&apos;&quot;.&lt;/p&gt;

&lt;p&gt;&#160;**&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;This works fine on 3.11 but fails&#160;on 4.x.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;same issue if we query the record:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;select * from timetest where id = 1 and enddate = &apos;2022-03-20 12:48:56 +0530&apos;;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#de350b&quot;&gt;InvalidRequest&lt;/font&gt;: Error from server: code=2200 &lt;span class=&quot;error&quot;&gt;&amp;#91;Invalid query&amp;#93;&lt;/span&gt; message=&quot;Unable to parse a date/time from &apos;2022-03-20 12:48:56 +0530&apos;&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#ffab00&quot;&gt;&lt;b&gt;If we change the timestamp value and remove the extra space which is present before the timezone value then it works fine in 4.x&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;if we change timestamp value From {&apos;2022-03-20 12:48:&lt;font color=&quot;#de350b&quot;&gt;56 +0530&lt;/font&gt;&apos;}&#160; To&#160; &#160; {&apos;2022-03-20 12:48:&lt;font color=&quot;#ffab00&quot;&gt;56+0530&lt;/font&gt;&#8217;} then 4.0.3 accept this value otherwise not. but 3.11 was accepting both the values.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This is causing a challenge for upgrading from 3.11 to 4.x.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Seeking help on this issue and any fix / workaround or suitable Cassandra version which is higher than 3.11 but lesser then 4.0.3 which can be used to fix this issue asap.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13434980">CASSANDRA-17467</key>
            <summary>Timestamp issue with Cassandra 4.0.3 with Timezone value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="anandbil">Anand B</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Mar 2022 19:28:37 +0000</created>
                <updated>Fri, 27 May 2022 19:25:04 +0000</updated>
                            <resolved>Wed, 23 Mar 2022 14:30:32 +0000</resolved>
                                        <fixVersion>4.0.4</fixVersion>
                    <fixVersion>4.1-alpha1</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                    <component>CQL/Syntax</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17510125" author="brandon.williams" created="Mon, 21 Mar 2022 22:23:28 +0000"  >&lt;p&gt;It looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15976&quot; title=&quot;Incorrect parsing of the timestamp with less than 3 digits in the milliseconds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15976&quot;&gt;&lt;del&gt;CASSANDRA-15976&lt;/del&gt;&lt;/a&gt; is what broke this.&lt;/p&gt;</comment>
                            <comment id="17510249" author="JIRAUSER286890" created="Tue, 22 Mar 2022 06:22:56 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; for updates.&lt;/p&gt;

&lt;p&gt;This issue is impacting our upgrade from 3.11 to 4.x.&lt;/p&gt;

&lt;p&gt;any tentative timeline when can fix for this be available ? it will help us plan-out our&#160; next steps accordingly&lt;/p&gt;</comment>
                            <comment id="17510452" author="brandon.williams" created="Tue, 22 Mar 2022 12:16:41 +0000"  >&lt;p&gt;I intend for any fix to be available in 4.0.4.&lt;/p&gt;</comment>
                            <comment id="17510824" author="JIRAUSER286890" created="Tue, 22 Mar 2022 18:43:54 +0000"  >&lt;p&gt;Thanks&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Any tentative timeline , when 4.0.4 release will be out ?&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This will help us to plan accordingly.&lt;/p&gt;</comment>
                            <comment id="17510825" author="brandon.williams" created="Tue, 22 Mar 2022 18:45:31 +0000"  >&lt;p&gt;Release times cannot be predicted in the project, but I will push for one when this is completed.&lt;/p&gt;</comment>
                            <comment id="17510914" author="brandon.williams" created="Tue, 22 Mar 2022 22:07:20 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15976&quot; title=&quot;Incorrect parsing of the timestamp with less than 3 digits in the milliseconds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15976&quot;&gt;&lt;del&gt;CASSANDRA-15976&lt;/del&gt;&lt;/a&gt;, we switched from using &lt;a href=&quot;https://docs.oracle.com/javase/10/docs/api/java/text/SimpleDateFormat.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SimpleDateFormat&lt;/a&gt; to &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DateTimeFormatter&lt;/a&gt; which have &lt;em&gt;nearly&lt;/em&gt; identical formats.  Previously this case was caught by the &apos;yyyy-MM-dd HH:mm:ss z&apos; SDF pattern, but &apos;z&apos; in DTF format does not cover this and instead needs the &apos;X&apos; identifier.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-17467-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/405/workflows/1bab3bb5-abf9-4a0e-9ff0-c40288b27038&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; , &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/405/workflows/cd5d68ca-c145-4be8-a057-3aca3c350b56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-17467-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/404/workflows/693a48ec-0e75-461d-9ec2-4ed272470622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt; , &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/404/workflows/25b0fc44-4770-4cc0-bf82-c76651419818&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17511051" author="bereng" created="Wed, 23 Mar 2022 06:46:27 +0000"  >&lt;p&gt;The 4.0/j11 dtests CI seems it had some env issue. But the same tests under j8 passed so it looks like a circle glitch. The RepairJob junit failure passes locally.&lt;/p&gt;

&lt;p&gt;I have left a &lt;a href=&quot;https://github.com/driftx/cassandra/commit/6c9957b5519a692103f7e48a0fdf8f0184d7d191#diff-0bfa363b41fc597e25157684be7ed5e0a68b82a278075796b4464bbf3d762503R130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;comment&lt;/a&gt; on the PR that can be addressed on commit.&lt;/p&gt;

&lt;p&gt;LGTM once we confirm it was a circle glitch. +1.&lt;/p&gt;</comment>
                            <comment id="17511207" author="brandon.williams" created="Wed, 23 Mar 2022 12:03:09 +0000"  >&lt;p&gt;I added your tests and I guess the best way to confirm it&apos;s a glitch is run it again: j11 on &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/406/workflows/661b130a-cf10-483a-96a7-ee499c850dde&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt; and &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/407/workflows/1e476e43-7439-4717-a404-12657f3d0a45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;.  I will check those in a bit and commit if they look good.&lt;/p&gt;</comment>
                            <comment id="17511253" author="bereng" created="Wed, 23 Mar 2022 13:19:07 +0000"  >&lt;p&gt;Yeah LGTM now. +1.&lt;/p&gt;</comment>
                            <comment id="17511281" author="brandon.williams" created="Wed, 23 Mar 2022 14:30:32 +0000"  >&lt;p&gt;Committed, thanks!&lt;/p&gt;</comment>
                            <comment id="17511431" author="JIRAUSER286890" created="Wed, 23 Mar 2022 18:46:51 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; for quick resolution on this issue.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;How can this fix be up-taken and applied to environment so that it can be verified&#160; if this resolve the raised&#160; issue and allow to upgrade from 3.x to 4.x.&lt;/p&gt;

&lt;p&gt;do one need to wait till 4.0.4 is out or build can be provided along with this fix&#160; for user&apos;s consumption so that&#160; upgrade can resume ?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17511439" author="brandon.williams" created="Wed, 23 Mar 2022 18:51:20 +0000"  >&lt;p&gt;We don&apos;t provide non-release builds generally but given that everything is opensource there is nothing to stop you from building it yourself, otherwise it will be in 4.0.4.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13319100">CASSANDRA-15976</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10op4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bereng]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348609">4.0-beta2</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/4f5feac0dffe2e8b4ae1cb32670e4902fab11ccc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/4f5feac0dffe2e8b4ae1cb32670e4902fab11ccc&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;run CI&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>