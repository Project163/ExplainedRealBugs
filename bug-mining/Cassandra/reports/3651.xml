<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:55:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9647] Tables created by cassandra-stress are omitted in DESCRIBE KEYSPACE</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9647</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9374&quot; title=&quot;Remove thrift dependency in stress schema creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9374&quot;&gt;&lt;del&gt;CASSANDRA-9374&lt;/del&gt;&lt;/a&gt; modified cassandra-stress to only use CQL for creating its schema. This seems to work, as I&apos;m testing on a cluster with start_rpc:false.&lt;/p&gt;

&lt;p&gt;However, when I try to run a DESCRIBE on the schema it omits the tables, complaining that they were created with a &quot;legacy API&quot;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; DESCRIBE KEYSPACE keyspace1 ;

CREATE KEYSPACE keyspace1 WITH replication = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;}  AND durable_writes = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

/*
Warning: Table keyspace1.counter1 omitted because it has constructs not compatible with CQL (was created via legacy API).

Approximate structure, &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; reference:
(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; should not be used to reproduce &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; schema)

CREATE TABLE keyspace1.counter1 (
    key blob PRIMARY KEY,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C0&quot;&lt;/span&gt; counter,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C1&quot;&lt;/span&gt; counter,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C2&quot;&lt;/span&gt; counter,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C3&quot;&lt;/span&gt; counter,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C4&quot;&lt;/span&gt; counter
) WITH COMPACT STORAGE
    AND bloom_filter_fp_chance = 0.01
    AND caching = &lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;keys&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;ALL&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;rows_per_partition&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;NONE&quot;&lt;/span&gt;}&apos;&lt;/span&gt;
    AND comment = &apos;&apos;
    AND compaction = {&lt;span class=&quot;code-quote&quot;&gt;&apos;min_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;max_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;32&apos;&lt;/span&gt;}
    AND compression = {}
    AND dclocal_read_repair_chance = 0.1
    AND default_time_to_live = 0
    AND gc_grace_seconds = 864000
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = &lt;span class=&quot;code-quote&quot;&gt;&apos;99.0PERCENTILE&apos;&lt;/span&gt;;
*/

/*
Warning: Table keyspace1.standard1 omitted because it has constructs not compatible with CQL (was created via legacy API).

Approximate structure, &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; reference:
(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; should not be used to reproduce &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; schema)

CREATE TABLE keyspace1.standard1 (
    key blob PRIMARY KEY,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C0&quot;&lt;/span&gt; blob,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C1&quot;&lt;/span&gt; blob,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C2&quot;&lt;/span&gt; blob,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C3&quot;&lt;/span&gt; blob,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;C4&quot;&lt;/span&gt; blob
) WITH COMPACT STORAGE
    AND bloom_filter_fp_chance = 0.01
    AND caching = &lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;keys&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;ALL&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;rows_per_partition&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;NONE&quot;&lt;/span&gt;}&apos;&lt;/span&gt;
    AND comment = &apos;&apos;
    AND compaction = {&lt;span class=&quot;code-quote&quot;&gt;&apos;min_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;max_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;32&apos;&lt;/span&gt;}
    AND compression = {}
    AND dclocal_read_repair_chance = 0.1
    AND default_time_to_live = 0
    AND gc_grace_seconds = 864000
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = &lt;span class=&quot;code-quote&quot;&gt;&apos;99.0PERCENTILE&apos;&lt;/span&gt;;
*/

cqlsh&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that it attempts to describe them anyway, but they are commented out and shouldn&apos;t be used to restore from.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.githubusercontent.com/EnigmaCurry/e779055c8debf6de8ef9/raw/a894e99725b6df599f3ce1db5012dd6d069b1339/gistfile1.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;This is the ccm workflow I used to test this&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12840326">CASSANDRA-9647</key>
            <summary>Tables created by cassandra-stress are omitted in DESCRIBE KEYSPACE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thobbs">Tom Hobbs</assignee>
                                    <reporter username="enigmacurry">Ryan McGuire</reporter>
                        <labels>
                            <label>cqlsh</label>
                            <label>stress</label>
                    </labels>
                <created>Wed, 24 Jun 2015 20:43:53 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:06 +0000</updated>
                            <resolved>Mon, 6 Jul 2015 16:33:17 +0000</resolved>
                                        <fixVersion>2.2.0 rc2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14608580" author="tjake" created="Tue, 30 Jun 2015 16:08:12 +0000"  >&lt;p&gt;I can&apos;t even find this error message via grep?  I imagine there is a check for if all types are blob and compact storage is true then show this message.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt; do you know where this error message lives? and if we should even fix this?&lt;/p&gt;</comment>
                            <comment id="14608595" author="thobbs" created="Tue, 30 Jun 2015 16:15:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tjake&quot; class=&quot;user-hover&quot; rel=&quot;tjake&quot;&gt;tjake&lt;/a&gt; it&apos;s coming from the python driver.  It looks like that logic was intended to display that message when there are clustering columns and more than one non-clustering column defined, but it&apos;s not quite right.&lt;/p&gt;

&lt;p&gt;We do need to fix this, or this will show up with everybody&apos;s &quot;static&quot; compact tables.&lt;/p&gt;</comment>
                            <comment id="14608659" author="thobbs" created="Tue, 30 Jun 2015 17:01:15 +0000"  >&lt;p&gt;Python driver ticket: &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-360&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://datastax-oss.atlassian.net/browse/PYTHON-360&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14612427" author="jbellis" created="Thu, 2 Jul 2015 19:52:15 +0000"  >&lt;p&gt;(PYTHON-360 is committed.)&lt;/p&gt;</comment>
                            <comment id="14613248" author="thobbs" created="Fri, 3 Jul 2015 15:28:43 +0000"  >&lt;p&gt;Pending test runs:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-9647-2.1-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.1 testall&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-9647-2.1-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.1 dtest&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-9647-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 testall&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-9647-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 dtest&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14615277" author="tjake" created="Mon, 6 Jul 2015 16:33:17 +0000"  >&lt;p&gt;Looks good, committed&lt;/p&gt;</comment>
                            <comment id="14617361" author="thobbs" created="Tue, 7 Jul 2015 20:45:50 +0000"  >&lt;p&gt;For future reference, this was the version of the driver that was committed: &lt;a href=&quot;https://github.com/datastax/python-driver/commit/9f69d53af28cc81ed8511c2d1691eb6cc110126d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/datastax/python-driver/commit/9f69d53af28cc81ed8511c2d1691eb6cc110126d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ggfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332829">2.1.8</customfieldvalue>
    <customfieldvalue id="12332370">2.2.0 rc1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tjake</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[tjake]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>