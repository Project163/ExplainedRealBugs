<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:02:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11602] Materialized View Does Not Have Static Columns</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11602</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;blockquote&gt;
&lt;p&gt;CREATE TABLE &quot;team&quot; (teamname text, manager text, location text static, PRIMARY KEY ((teamname), manager));&lt;/p&gt;

&lt;p&gt;INSERT INTO team (teamname, manager, location) VALUES (&apos;Red Bull1&apos;, &apos;Ricciardo11&apos;, &apos;Australian&apos;);&lt;br/&gt;
INSERT INTO team (teamname, manager, location) VALUES (&apos;Red Bull2&apos;, &apos;Ricciardo12&apos;, &apos;Australian&apos;);&lt;br/&gt;
INSERT INTO team (teamname, manager, location) VALUES (&apos;Red Bull2&apos;, &apos;Ricciardo13&apos;, &apos;Australian&apos;);&lt;/p&gt;

&lt;p&gt;select * From team;&lt;/p&gt;

&lt;p&gt;CREATE MATERIALIZED VIEW IF NOT EXISTS &quot;teamMV&quot; AS SELECT &quot;teamname&quot;, &quot;manager&quot;, &quot;location&quot; FROM &quot;team&quot; WHERE &quot;teamname&quot; IS NOT NULL AND &quot;manager&quot; is NOT NULL AND &quot;location&quot; is NOT NULL PRIMARY KEY(&quot;manager&quot;, &quot;teamname&quot;);  &lt;/p&gt;

&lt;p&gt;select * from &quot;teamMV&quot;;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The teamMV does not have &quot;location&quot; column. Static columns are not getting created in MV.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12959881">CASSANDRA-11602</key>
            <summary>Materialized View Does Not Have Static Columns</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="carlyeks">Carl Yeksigian</assignee>
                                    <reporter username="Ravishankar_Rajendran@yahoo.com">Ravishankar Rajendran</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Apr 2016 03:10:37 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:35 +0000</updated>
                            <resolved>Mon, 2 May 2016 20:24:46 +0000</resolved>
                                        <fixVersion>3.0.6</fixVersion>
                    <fixVersion>3.6</fixVersion>
                                    <component>Feature/Materialized Views</component>
                    <component>Legacy/Coordination</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15247426" author="slebresne" created="Tue, 19 Apr 2016 09:26:15 +0000"  >&lt;p&gt;I completely agree that we shouldn&apos;t accept that create MV statement and silently ignore the static column, and that&apos;s certainly an oversight, but I also don&apos;t think we have a good way to handle static column in MVs.&lt;/p&gt;

&lt;p&gt;That is, if we were to include them, each MV entry would have to ship with its own copy of the static value and so any update that modify a static column would have to read the whole partition to figure out all the corresponding MV entries and modify them. Which would be so inefficient that I can&apos;t really see much case where that would be useful. But on the other, I do easily see how that inefficiency could easily suprise/bite users. So unless/until someone has a smarter idea on how to handle static columns, I think we should just reject create statement for MV that would include them.&lt;/p&gt;</comment>
                            <comment id="15248002" author="ravishankar_rajendran@yahoo.com" created="Tue, 19 Apr 2016 15:41:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;  Logically all tables in C* are materialized views .i.e. tables cannot have foreign keys and are modeled based on queries. That is what is a View in RDBMS world. All that the C* MVs do is; it automates denormalization. Essentially MVs in C* must be similar to tables in all behaviors. MVs in C* must be nothing but tables that can automate denormalization.&lt;/p&gt;

&lt;p&gt;MVs must solve for static columns. MVs with no support to static column will be very disappointing for developers. Static columns are a boon for developers and performance engineers. Static columns + MV is like a holy grail.&lt;/p&gt;

&lt;p&gt;If I can manually denormalize data between two tables with static columns. I should be able to do the same with a table + MV. We must add support for static columns in MV.&lt;/p&gt;</comment>
                            <comment id="15248086" author="babu.giridhar@gmail.com" created="Tue, 19 Apr 2016 16:20:08 +0000"  >&lt;p&gt;Adding static columns in MVs will help developers to maximum use of materialized views &lt;/p&gt;</comment>
                            <comment id="15256383" author="ravishankar_rajendran@yahoo.com" created="Mon, 25 Apr 2016 14:03:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=carlyeks&quot; class=&quot;user-hover&quot; rel=&quot;carlyeks&quot;&gt;carlyeks&lt;/a&gt;, any updates on this? Whats the plan?&lt;/p&gt;</comment>
                            <comment id="15262385" author="carlyeks" created="Thu, 28 Apr 2016 15:56:29 +0000"  >&lt;p&gt;I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt; that the performance of static columns in MV would be surprising to users, specifically needing to read an entire partition; even if we do decide to add support, we would want to wait until after &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11475&quot; title=&quot;MV code refactor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11475&quot;&gt;&lt;del&gt;CASSANDRA-11475&lt;/del&gt;&lt;/a&gt; is committed.&lt;/p&gt;

&lt;p&gt;Previously, it looks like we warned if the static column was explicitly selected, and silently dropped if it was included in a &lt;tt&gt;SELECT *&lt;/tt&gt; for the view. I changed that to throw an exception if a static column is explicitly selected, and to warn if it is dropped when using a &lt;tt&gt;SELECT *&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 3.0 &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; trunk &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/carlyeks/cassandra/tree/ticket/11602/3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  &lt;a href=&quot;https://github.com/carlyeks/cassandra/tree/ticket/11602/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-11602-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-11602-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-11602-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-11602-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15264120" author="slebresne" created="Fri, 29 Apr 2016 14:27:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;and to warn if it is dropped when using a &lt;tt&gt;SELECT *&lt;/tt&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;d actually be in favor of rejecting that too. First because silently ignoring columns is bound to surprise/confuse user, and this whether users gets the warning or not. If they don&apos;t get it it&apos;s confusing, but if they get it, it&apos;s a bit scary for new comer as they won&apos;t know if they are doing something wrong or not. Second, because if we ever do find a way to include static columns, we&apos;d have a breaking change here since user would have been used to them being ignored. And third, because the only argument for allowing that is the minor convenience of not having to list columns manually, but if you do so you&apos;re getting a client warning which is annoying/distracting, so you&apos;ll kind of end up listing columns manually anyway. &lt;/p&gt;</comment>
                            <comment id="15264137" author="carlyeks" created="Fri, 29 Apr 2016 14:45:49 +0000"  >&lt;p&gt;Good point; I&apos;ll update the ticket to exclude those as well.&lt;/p&gt;</comment>
                            <comment id="15264260" author="ravishankar_rajendran@yahoo.com" created="Fri, 29 Apr 2016 16:08:45 +0000"  >&lt;p&gt;Guys,&lt;/p&gt;

&lt;p&gt;Denormalization and Static Columns are the backbone of Cassandra Data Model. If you cannot do static columns in MV, that means there is something fundamentally wrong in the base design. &lt;/p&gt;

&lt;p&gt;With Static Columns an application gets an option to run one UPDATE CQL instead of a million UPDATE CQL. The fundamental requirement of an MV is denormalization, which must include static columns too.&lt;/p&gt;

&lt;p&gt;By handicapping application developers get the right thing, we are only driving away people from using Cassandra. &lt;/p&gt;

&lt;p&gt;By the way &quot;the new comer&quot; wont be scary. He will be happy that finally MV does what it really promises. &lt;/p&gt;

&lt;p&gt;-Ravi&lt;/p&gt;</comment>
                            <comment id="15265585" author="ravishankar_rajendran@yahoo.com" created="Sun, 1 May 2016 03:06:07 +0000"  >&lt;p&gt;Any response?&lt;/p&gt;

&lt;p&gt;-Ravi&lt;/p&gt;</comment>
                            <comment id="15266249" author="slebresne" created="Mon, 2 May 2016 09:00:41 +0000"  >&lt;p&gt;Fix lgtm, +1, but on commit I&apos;d pull out some&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;boolean includeDef = included.isEmpty() || included.contains(identifier);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;since that test is used twice in a row and the variable name will act as additional documentation I feel.&lt;/p&gt;</comment>
                            <comment id="15266251" author="slebresne" created="Mon, 2 May 2016 09:07:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Any response?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We appreciate your input, but as we said, we have currently no way to implement this in a non &lt;em&gt;very&lt;/em&gt; inefficient way, and our experience is that something that inefficient deserves C* more that it helps because no-one will end up using it due to the awful performance but people will get burnt by it first.&lt;/p&gt;

&lt;p&gt;If you disagree or have some idea on how to make this efficient, you are welcome to provide a patch as well as sufficient benchmark evidence that it performs acceptably.&lt;/p&gt;</comment>
                            <comment id="15266650" author="ravishankar_rajendran@yahoo.com" created="Mon, 2 May 2016 14:04:39 +0000"  >&lt;p&gt;I do not recommend having anything inefficient. My claim is that, if it is inefficient, then there is something fundamentally wrong in the design.&lt;br/&gt;
We cannot keep building on deaign that does not help create efficient code.&lt;/p&gt;</comment>
                            <comment id="15266656" author="slebresne" created="Mon, 2 May 2016 14:12:32 +0000"  >&lt;p&gt;Sure. We&apos;ll be eagerly waiting on your better and not fundamentally wrong design. In the meantime though, let&apos;s start by using this ticket to fix the validation.&lt;/p&gt;</comment>
                            <comment id="15266727" author="ravishankar_rajendran@yahoo.com" created="Mon, 2 May 2016 14:56:45 +0000"  >&lt;p&gt;Really? Is Sarcasm the only response you had? Cant customers find and report design faults? Or is it only allowed to code contributors? Anyway, now that I know there is not going to be any rational arguments in the conversation, I am choosing to quit. Thanks. &lt;/p&gt;</comment>
                            <comment id="15267429" author="carlyeks" created="Mon, 2 May 2016 20:24:46 +0000"  >&lt;p&gt;Thanks for the review, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;. The validation has been committed in &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=cassandra.git;a=commit;h=6d725afaef5bc8604cf775ff2498f21530c0288c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;6d725af&lt;/a&gt;, with pulling that variable out.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[carlyeks]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wauf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>