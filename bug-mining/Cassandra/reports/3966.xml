<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:59:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10755] PreparedStatement is the same id for different Japanese katakana characters with same length</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10755</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;String q1 = &quot;UPDATE table SET value=&apos;&#12479;&#12491;&#12515;&#12450;&apos; WHERE key=? AND key2=?&quot;;&lt;br/&gt;
String q2 = &quot;UPDATE table SET value=&apos;&#12515;&#12450;&#12479;&#12491;&apos; WHERE key=? AND key2=?&quot;;&lt;/p&gt;

&lt;p&gt;when using  session.prepare().&lt;/p&gt;

&lt;p&gt;q1 and q2 will return the prepared-statement with the same prepared ID, but the query in prepared-statement is correct.&lt;/p&gt;

&lt;p&gt;So if I update using q1 first, all later q2 will not be able to update.( It&apos;s means , it still updates q1)&lt;/p&gt;

&lt;p&gt;Please note that the Japanese katakana is the same length in q1 and q2.&lt;br/&gt;
I know it&apos;s a bad use case for putting value into prepared-query itself. &lt;/p&gt;

&lt;p&gt;Is it related to how Cassandra cache prepared statement?&lt;/p&gt;</description>
                <environment>&lt;p&gt;cassandra-2.1.8, java driver 2.1.5, ubuntu 14.04&lt;/p&gt;</environment>
        <key id="12915220">CASSANDRA-10755</key>
            <summary>PreparedStatement is the same id for different Japanese katakana characters with same length</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spod">Stefan Podkowinski</assignee>
                                    <reporter username="jasonstack">Zhao Yang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2015 03:25:44 +0000</created>
                <updated>Wed, 6 Nov 2019 21:58:13 +0000</updated>
                            <resolved>Thu, 26 Nov 2015 10:13:39 +0000</resolved>
                                        <fixVersion>2.1.12</fixVersion>
                    <fixVersion>2.2.4</fixVersion>
                    <fixVersion>3.0.1</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15021643" author="jasonstack" created="Mon, 23 Nov 2015 07:18:51 +0000"  >&lt;p&gt;Because C* instance is started with &quot;file.encoding=ANSI_X3.4-1968&quot; , UTF8 can solve it&lt;/p&gt;</comment>
                            <comment id="15022437" author="spodxx@gmail.com" created="Mon, 23 Nov 2015 16:49:34 +0000"  >&lt;p&gt;Although the use-case might not be very common, the result of this behavior is pretty bad as the server will return a different prepared statement from the cache based on the wrong digest. You could end up executing a different statements compared to what has been passed to prepare(). I&apos;ve added a fix that will prevent MD5Digest to rely on the default character set, which should always be avoided anyway. &lt;/p&gt;</comment>
                            <comment id="15028472" author="slebresne" created="Thu, 26 Nov 2015 10:13:39 +0000"  >&lt;p&gt;+1, committed, thanks.&lt;/p&gt;

&lt;p&gt;For the record, I will note that this could potentially change the ID of some prepared statement for user whose default charset is not UTF8/ASCII. However, this ticket proves that there is problem with such default charset anyway and we need to fix it, and besides, changing the ID of a statement shouldn&apos;t really have much consequence on update: if you update a node, you&apos;re restarting it and that means every statements have to be re-prepared anyway. The only issue might theoretically be if a client driver makes a strong assumption that the same statement cannot have 2 differents IDs at the same time, but no driver does that to the best of my knowledge and I can&apos;t imagine why one would want to spend time on such check in the first place.  Still, labelling &lt;tt&gt;client-impacting&lt;/tt&gt; for driver authors to double check they don&apos;t make such assumptions.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12905414">CASSANDRA-10539</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[spod]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13101"><![CDATA[Clients]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ornz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>