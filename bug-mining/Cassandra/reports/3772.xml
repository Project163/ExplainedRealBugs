<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:57:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9142] DC Local repair or -hosts should only be allowed with -full repair</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9142</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We should not let users mix incremental repair with dc local repair or -host or any repair which does not include all replicas. &lt;/p&gt;

&lt;p&gt;This will currently cause stables on some replicas to be marked as repaired. The next incremental repair will not work on same set of data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12819506">CASSANDRA-9142</key>
            <summary>DC Local repair or -hosts should only be allowed with -full repair</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="kohlisankalp">Sankalp Kohli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Apr 2015 00:04:46 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:15 +0000</updated>
                            <resolved>Tue, 25 Aug 2015 17:08:26 +0000</resolved>
                                        <fixVersion>2.2.1</fixVersion>
                    <fixVersion>3.0 beta 2</fixVersion>
                                    <component>Legacy/Streaming and Messaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14518696" author="jbellis" created="Wed, 29 Apr 2015 04:20:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; to review&lt;/p&gt;</comment>
                            <comment id="14519271" author="krummas" created="Wed, 29 Apr 2015 12:37:27 +0000"  >&lt;p&gt;good point, but on trunk we anticompact and mark sstables as repaired even after -full repairs - we always send the AnticompactionRequest and we need to do that to make sure the neighbors remove the parent repair sessions&lt;/p&gt;

&lt;p&gt;We should probably add a &quot;dont anticompact&quot;-flag to AnticompactionRequest or send empty successfulRanges which will have the same effect.&lt;/p&gt;

&lt;p&gt;On 2.1 it should be enough to just disallow invoking nodetool with -inc with any of the local params &lt;/p&gt;</comment>
                            <comment id="14539664" author="krummas" created="Tue, 12 May 2015 11:14:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kohlisankalp&quot; class=&quot;user-hover&quot; rel=&quot;kohlisankalp&quot;&gt;kohlisankalp&lt;/a&gt; do you have time to do this or should I do it?&lt;/p&gt;</comment>
                            <comment id="14540345" author="kohlisankalp" created="Tue, 12 May 2015 17:54:19 +0000"  >&lt;p&gt;you can take it and I can review it. &lt;/p&gt;</comment>
                            <comment id="14570801" author="krummas" created="Wed, 3 Jun 2015 13:25:50 +0000"  >&lt;p&gt;patch for 2.2+ here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/krummas/cassandra/tree/marcuse/9142-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/tree/marcuse/9142-2.2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;renamed the &apos;successfulRanges&apos; to &apos;globallySuccessfulRanges&apos; as it felt wrong sending empty list in AnticompactionRequest since we still actually have successful ranges, but not ranges that were successful globally&lt;/p&gt;

&lt;p&gt;tests:&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9142-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9142-2.2-dtest/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9142-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9142-2.2-testall/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;new dtests:&lt;br/&gt;
&lt;a href=&quot;https://github.com/krummas/cassandra-dtest/commits/marcuse/9142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra-dtest/commits/marcuse/9142&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14579831" author="kohlisankalp" created="Wed, 10 Jun 2015 01:24:22 +0000"  >&lt;p&gt;I think we should also mark the stables streamed as non repaired? &lt;/p&gt;</comment>
                            <comment id="14581598" author="krummas" created="Thu, 11 Jun 2015 07:43:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;mark the stables streamed as non repaired?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes, nice catch&lt;/p&gt;

&lt;p&gt;force pushed a new version to &lt;a href=&quot;https://github.com/krummas/cassandra/tree/marcuse/9142-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/tree/marcuse/9142-2.2&lt;/a&gt; - this means we need to state in the PrepareMessage whether it is a global repair or not, and we don&apos;t anticompact if it is a non-global repair&lt;/p&gt;</comment>
                            <comment id="14637965" author="kohlisankalp" created="Thu, 23 Jul 2015 00:22:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14647548" author="krummas" created="Thu, 30 Jul 2015 12:23:19 +0000"  >&lt;p&gt;since we missed 2.2.0, I will need to make sure we don&apos;t send the flag to nodes that don&apos;t support it, stand by for new patch&lt;/p&gt;</comment>
                            <comment id="14648936" author="krummas" created="Fri, 31 Jul 2015 08:40:18 +0000"  >&lt;p&gt;Pushed a new commit to  &lt;a href=&quot;https://github.com/krummas/cassandra/tree/marcuse/9142-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/tree/marcuse/9142-2.2&lt;/a&gt; which introduces a new message type to indicate if the repair is global. This was the simplest way to keep it backwards compatible. We should probably go back to using a flag in 3.0&lt;/p&gt;</comment>
                            <comment id="14704766" author="krummas" created="Thu, 20 Aug 2015 12:27:01 +0000"  >&lt;p&gt;ping on this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kohlisankalp&quot; class=&quot;user-hover&quot; rel=&quot;kohlisankalp&quot;&gt;kohlisankalp&lt;/a&gt; - do you have time to review or should I find someone else?&lt;/p&gt;</comment>
                            <comment id="14705496" author="kohlisankalp" created="Thu, 20 Aug 2015 18:24:38 +0000"  >&lt;p&gt;Let me do this by early next week. &lt;/p&gt;</comment>
                            <comment id="14707509" author="kohlisankalp" created="Fri, 21 Aug 2015 21:49:54 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="14711639" author="krummas" created="Tue, 25 Aug 2015 17:08:26 +0000"  >&lt;p&gt;committed, thanks!&lt;/p&gt;</comment>
                            <comment id="14946595" author="akawaguc" created="Wed, 7 Oct 2015 09:33:24 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Fix Version/s: 2.2.1, 3.0 beta 2&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Regardless of this, can you please let me know why there is no description about this ticket in CHANGES.txt for Cassandra 2.2.1?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12861774">CASSANDRA-10265</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12728974" name="trunk_9142.txt" size="903" author="kohlisankalp" created="Tue, 28 Apr 2015 23:45:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d06f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>kohlisankalp</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[kohlisankalp]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>