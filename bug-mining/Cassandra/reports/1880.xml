<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:35:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4881] Force provided columns in clustering key order in &apos;CLUSTERING ORDER BY&apos;</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4881</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Using this table:&lt;br/&gt;
CREATE TABLE video_event (&lt;br/&gt;
  videoid_username varchar,&lt;br/&gt;
  event varchar,&lt;br/&gt;
  event_timestamp timestamp,&lt;br/&gt;
  video_timestamp timestamp,&lt;br/&gt;
  PRIMARY KEY (videoid_username, event, event_timestamp)&lt;br/&gt;
)WITH CLUSTERING ORDER BY (event_timestamp DESC);&lt;/p&gt;

&lt;p&gt;Inserting these records:&lt;/p&gt;

&lt;p&gt;INSERT INTO video_event (videoid_username, event, event_timestamp, video_timestamp) &lt;br/&gt;
VALUES (&apos;99051fe9-6a9c-46c2-b949-38ef78858dd0:ctodd&apos;,&apos;start&apos;,&apos;2012-09-02 18:05:00&apos;,&apos;2012-09-02 18:05:00&apos;);&lt;br/&gt;
INSERT INTO video_event (videoid_username, event, event_timestamp, video_timestamp) &lt;br/&gt;
VALUES (&apos;99051fe9-6a9c-46c2-b949-38ef78858dd0:ctodd&apos;,&apos;stop&apos;,&apos;2012-09-02 18:05:30&apos;,&apos;2012-09-02 18:05:30&apos;);&lt;br/&gt;
INSERT INTO video_event (videoid_username, event, event_timestamp, video_timestamp) &lt;br/&gt;
VALUES (&apos;99051fe9-6a9c-46c2-b949-38ef78858dd0:ctodd&apos;,&apos;start&apos;,&apos;2012-09-02 18:35:00&apos;,&apos;2012-09-02 18:35:00&apos;);&lt;br/&gt;
INSERT INTO video_event (videoid_username, event, event_timestamp, video_timestamp) &lt;br/&gt;
VALUES (&apos;99051fe9-6a9c-46c2-b949-38ef78858dd0:ctodd&apos;,&apos;stop&apos;,&apos;2012-09-02 18:37:30&apos;,&apos;2012-09-02 18:37:30&apos;);&lt;/p&gt;

&lt;p&gt;Running this select:&lt;/p&gt;

&lt;p&gt;select * from video_event where videoid_username = &apos;99051fe9-6a9c-46c2-b949-38ef78858dd0:ctodd&apos; limit 1;&lt;/p&gt;

&lt;p&gt;I get this:&lt;/p&gt;

&lt;p&gt; videoid_username                           | event | event_timestamp          | video_timestamp&lt;br/&gt;
-------------------------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------------------&lt;del&gt;+&lt;/del&gt;-------------------------&lt;br/&gt;
 99051fe9-6a9c-46c2-b949-38ef78858dd0:ctodd | start | 2012-09-02 18:05:00+0000 | 2012-09-02 18:05:00+0000&lt;/p&gt;

&lt;p&gt;I would expect to see this:&lt;/p&gt;

&lt;p&gt; videoid_username                           | event | event_timestamp          | video_timestamp&lt;br/&gt;
-------------------------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-----&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------------------------&lt;del&gt;+&lt;/del&gt;-------------------------&lt;br/&gt;
 99051fe9-6a9c-46c2-b949-38ef78858dd0:ctodd |  stop | 2012-09-02 18:37:30+0000 | 2012-09-02 18:37:30+0000&lt;/p&gt;

&lt;p&gt;where the first record pulled was the sorted record by event_timestamp in reverse order.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12614094">CASSANDRA-4881</key>
            <summary>Force provided columns in clustering key order in &apos;CLUSTERING ORDER BY&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="pmcfadin">Patrick McFadin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Oct 2012 22:18:53 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:24 +0000</updated>
                            <resolved>Wed, 31 Oct 2012 14:33:09 +0000</resolved>
                                        <fixVersion>1.2.0 beta 2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13487617" author="slebresne" created="Wed, 31 Oct 2012 08:39:06 +0000"  >&lt;p&gt;I think there is indeed one thing that should be improved, but I&apos;m not sure this is what you think &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Currently, the &lt;tt&gt;CLUSTERING ORDER BY (event_timestamp DESC)&lt;/tt&gt; is a shorthand for &lt;tt&gt;CLUSTERING ORDER BY (event ASC, event_timestamp DESC)&lt;/tt&gt;. This isn&apos;t very clear however and so I think we should refuse the former and require the latter. Attaching a patch to do that.&lt;/p&gt;

&lt;p&gt;Now with the caveat above, the rest work as designed. If you don&apos;t specify any ordering for your request (like in the select above), we are free to return what&apos;s most convenient and in practice we return row in disk order. But since the disk order will be pretty much the one of the inserts (because &apos;start&apos; sorts before &apos;stop&apos;, which trumps any sorting for event_timestamp in that example), the result is correct.&lt;/p&gt;

&lt;p&gt;To have things sorted by event_timestamp independently of the event, you will have to put the &lt;tt&gt;event_timestamp&lt;/tt&gt; before &lt;tt&gt;event&lt;/tt&gt; in the primary key definition.&lt;/p&gt;</comment>
                            <comment id="13487618" author="slebresne" created="Wed, 31 Oct 2012 08:41:01 +0000"  >&lt;p&gt;I&apos;ve updated the title to reflect what the patch attached actually fixes.&lt;/p&gt;</comment>
                            <comment id="13487777" author="jbellis" created="Wed, 31 Oct 2012 13:48:28 +0000"  >&lt;p&gt;LGTM.&lt;/p&gt;

&lt;p&gt;Nit: &quot;Too many columns&quot; check could be moved out of the for loop for greater clarity.&lt;/p&gt;</comment>
                            <comment id="13487823" author="slebresne" created="Wed, 31 Oct 2012 14:33:09 +0000"  >&lt;p&gt;Committed (with nit fixed), thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12551503" name="4881.txt" size="2958" author="slebresne" created="Wed, 31 Oct 2012 08:39:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253222</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dcjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75960</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>