<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:19:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16415] Digest mismatches during upgrade</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16415</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The test has been failing and can always be reproduced in the recent CI.&#160;&lt;/p&gt;

&lt;p&gt;Stack trace:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
junit.framework.AssertionFailedError: Found Digest Mismatch
 at org.apache.cassandra.distributed.upgrade.MixedModeReadTest.checkTraceForDigestMismatch(MixedModeReadTest.java:89)
 at org.apache.cassandra.distributed.upgrade.MixedModeReadTest.lambda$mixedModeReadColumnSubsetDigestCheck$0(MixedModeReadTest.java:63)
 at org.apache.cassandra.distributed.upgrade.UpgradeTestBase$TestCase.run(UpgradeTestBase.java:171)
 at org.apache.cassandra.distributed.upgrade.MixedModeReadTest.mixedModeReadColumnSubsetDigestCheck(MixedModeReadTest.java:76)&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The initial investigation shows that&#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The test only fails in the setup phase of&#160;mixedModeReadColumnSubsetDigestCheck. The cluster version is&#160;&lt;b&gt;Versions.Major.v3X&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;The test failure is likely a consequence of&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15962&quot; title=&quot;Digest for some queries is different depending whether the data are retrieved from sstable or memtable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15962&quot;&gt;&lt;del&gt;CASSANDRA-15962&lt;/del&gt;&lt;/a&gt;. After dropping the commit in branch cassandra-3.11 and rebuild the dtest jar, the upgrade test can pass. Meanwhile, dropping the other commits does not help.&#160;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13356117">CASSANDRA-16415</key>
            <summary>Digest mismatches during upgrade</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlewandowski">Jacek Lewandowski</assignee>
                                    <reporter username="yifanc">Yifan Cai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2021 05:12:20 +0000</created>
                <updated>Fri, 19 Nov 2021 06:49:44 +0000</updated>
                            <resolved>Mon, 1 Mar 2021 12:57:15 +0000</resolved>
                                        <fixVersion>3.0.25</fixVersion>
                    <fixVersion>3.11.11</fixVersion>
                    <fixVersion>4.0-rc1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Consistency/Coordination</component>
                    <component>Test/dtest/java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="33000">9h 10m</timespent>
                                <comments>
                            <comment id="17279793" author="maedhroz" created="Fri, 5 Feb 2021 16:42:24 +0000"  >&lt;p&gt;Another recent failure here: &lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/227/workflows/c8f12d79-8f8c-420c-965c-d8188199822b/jobs/1301&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/maedhroz/cassandra/227/workflows/c8f12d79-8f8c-420c-965c-d8188199822b/jobs/1301&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17279933" author="aholmber" created="Fri, 5 Feb 2021 19:22:03 +0000"  >&lt;p&gt;I don&apos;t think this is actually flaky. It&apos;s just broken right now. I&apos;m hoping to take a look at it this afternoon if I get time, and Jacek also indicated he could look into it next week.&lt;/p&gt;</comment>
                            <comment id="17279944" author="yifanc" created="Fri, 5 Feb 2021 19:37:14 +0000"  >&lt;p&gt;Thanks for looking into it. Agree that it is broken ATM.&#160;&lt;/p&gt;

&lt;p&gt;A bit more info that the &quot;digest mismatch&quot; error only occurs in &lt;b&gt;v3X&lt;/b&gt; and&#160;not in &lt;b&gt;v4&lt;/b&gt;, although the patch is present in both versions.&#160;&lt;/p&gt;</comment>
                            <comment id="17280890" author="jlewandowski" created="Mon, 8 Feb 2021 09:39:07 +0000"  >&lt;p&gt;This problem does not affect 4.0 at all. The only reason we can see it in 4.0 tests is that the JVM upgrade distributed tests is different in for &lt;tt&gt;trunk&lt;/tt&gt; and for &lt;tt&gt;cassandra-3.11&lt;/tt&gt; branches. I don&apos;t remember why is it different, but we should make it look same. &lt;/p&gt;

&lt;p&gt;Also this is interesting problem - tests tied to 4.0 fail during upgrade because C* we upgrade from is broken...&lt;/p&gt;</comment>
                            <comment id="17281118" author="jlewandowski" created="Mon, 8 Feb 2021 14:44:07 +0000"  >&lt;p&gt;I encountered a weird problem - see my PR for 3.11: &lt;a href=&quot;https://github.com/apache/cassandra/pull/891&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/891&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Basically there are no changes in the production code. I modified a little bit the mixed read test mostly by adding gossip and networking features to the cluster configuration (as gossiper is required for this test run). Apparently I did something wrong because the cluster does not run properly and it complains with the following exception (repeated many, many times):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[junit-timeout] ERROR 14:35:29 Unable to merge schema from /127.0.0.2
[junit-timeout] java.util.concurrent.RejectedExecutionException: ThreadPoolExecutor has shut down
[junit-timeout] 	at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor$1.rejectedExecution(DebuggableThreadPoolExecutor.java:58) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830) [na:1.8.0_212]
[junit-timeout] 	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379) [na:1.8.0_212]
[junit-timeout] 	at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.execute(DebuggableThreadPoolExecutor.java:162) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.db.ColumnFamilyStore.switchMemtable(ColumnFamilyStore.java:904) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.db.ColumnFamilyStore.switchMemtableIfCurrent(ColumnFamilyStore.java:885) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.db.ColumnFamilyStore.forceFlush(ColumnFamilyStore.java:954) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.schema.SchemaKeyspace.lambda$flush$1(SchemaKeyspace.java:310) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at java.lang.Iterable.forEach(Iterable.java:75) ~[na:1.8.0_212]
[junit-timeout] 	at org.apache.cassandra.schema.SchemaKeyspace.flush(SchemaKeyspace.java:310) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.schema.SchemaKeyspace.mergeSchema(SchemaKeyspace.java:1398) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.schema.SchemaKeyspace.mergeSchemaAndAnnounceVersion(SchemaKeyspace.java:1380) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.service.MigrationCoordinator.mergeSchemaFrom(MigrationCoordinator.java:367) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.service.MigrationCoordinator$Callback.response(MigrationCoordinator.java:404) [dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.service.MigrationCoordinator$Callback.response(MigrationCoordinator.java:393) [dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.net.ResponseVerbHandler.doVerb(ResponseVerbHandler.java:53) [dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:66) [dtest-3.11.11.jar:na]
[junit-timeout] 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_212]
[junit-timeout] 	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_212]
[junit-timeout] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_212]
[junit-timeout] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_212]
[junit-timeout] 	at org.apache.cassandra.concurrent.NamedThreadFactory.lambda$threadLocalDeallocator$0(NamedThreadFactory.java:84) [dtest-3.11.11.jar:na]
[junit-timeout] 	at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_212]
[junit-timeout] ERROR [node1_InternalResponseStage:1] node1 2021-02-08 15:35:29,093 MigrationCoordinator.java:408 - Unable to merge schema from /127.0.0.2
[junit-timeout] java.util.concurrent.RejectedExecutionException: ThreadPoolExecutor has shut down
[junit-timeout] 	at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor$1.rejectedExecution(DebuggableThreadPoolExecutor.java:58) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830) [na:1.8.0_212]
[junit-timeout] 	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379) [na:1.8.0_212]
[junit-timeout] 	at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.execute(DebuggableThreadPoolExecutor.java:162) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.db.ColumnFamilyStore.switchMemtable(ColumnFamilyStore.java:904) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.db.ColumnFamilyStore.switchMemtableIfCurrent(ColumnFamilyStore.java:885) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.db.ColumnFamilyStore.forceFlush(ColumnFamilyStore.java:954) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.schema.SchemaKeyspace.lambda$flush$1(SchemaKeyspace.java:310) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at java.lang.Iterable.forEach(Iterable.java:75) ~[na:1.8.0_212]
[junit-timeout] 	at org.apache.cassandra.schema.SchemaKeyspace.flush(SchemaKeyspace.java:310) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.schema.SchemaKeyspace.mergeSchema(SchemaKeyspace.java:1398) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.schema.SchemaKeyspace.mergeSchemaAndAnnounceVersion(SchemaKeyspace.java:1380) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.service.MigrationCoordinator.mergeSchemaFrom(MigrationCoordinator.java:367) ~[dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.service.MigrationCoordinator$Callback.response(MigrationCoordinator.java:404) [dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.service.MigrationCoordinator$Callback.response(MigrationCoordinator.java:393) [dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.net.ResponseVerbHandler.doVerb(ResponseVerbHandler.java:53) [dtest-3.11.11.jar:na]
[junit-timeout] 	at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:66) [dtest-3.11.11.jar:na]
[junit-timeout] 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_212]
[junit-timeout] 	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_212]
[junit-timeout] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_212]
[junit-timeout] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_212]
[junit-timeout] 	at org.apache.cassandra.concurrent.NamedThreadFactory.lambda$threadLocalDeallocator$0(NamedThreadFactory.java:84) [dtest-3.11.11.jar:na]
[junit-timeout] 	at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_212]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can someone help me a bit with this? (cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jwest&quot; class=&quot;user-hover&quot; rel=&quot;jwest&quot;&gt;jwest&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17281287" author="yifanc" created="Mon, 8 Feb 2021 18:37:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt;, it seems the only difference in the new &apos;MixedModeReadTest&apos; is the static column. The old test already had the gossip and networking features enabled. The test runs after reverting the table definition.&#160;&lt;/p&gt;

&lt;p&gt;Not sure whether the behavior is unexpected. It is a separate issue and should be tracked in a different ticket, if so.&#160;&lt;/p&gt;</comment>
                            <comment id="17281556" author="jlewandowski" created="Tue, 9 Feb 2021 06:10:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yifanc&quot; class=&quot;user-hover&quot; rel=&quot;yifanc&quot;&gt;yifanc&lt;/a&gt; thank you for checking that. Maybe I&apos;m doing something wrong with how I run that test. All in all, I rewrote that test as Python dtest and it passed without making any changes in production code. However the new test was failing because there was a bug in &lt;tt&gt;ColumnFilter&lt;/tt&gt;. I fixed the bug and run both tests, both passed.&lt;/p&gt;</comment>
                            <comment id="17281571" author="jlewandowski" created="Tue, 9 Feb 2021 06:50:33 +0000"  >&lt;p&gt;:facepalm&lt;/p&gt;

&lt;p&gt;You are absolutely right. I&apos;ve blindly copied the test from trunk. That test does not use gossip. Let me fix that...&lt;/p&gt;</comment>
                            <comment id="17281934" author="jlewandowski" created="Tue, 9 Feb 2021 18:13:14 +0000"  >&lt;p&gt;So, the problem was not visible, but it unfortunately affects 4.0 as well (in terms of upgrading from 3). It is not critical though.&lt;/p&gt;

&lt;p&gt;The problem is still the same - &lt;tt&gt;ColumnFilter&lt;/tt&gt; is buggy. Its structure and interpretation has changed in 3.0.14 (I guess), 3.4 and 4.0 significantly. Although we try to apply some adjustments while sending it to older nodes / receiving it from older nodes, there are some features which are not available for older nodes.&lt;/p&gt;

&lt;p&gt;For example, fetch all regular columns and only queried static columns, while there is only a subset of queried regular columns - there is no way to convert the filter for 3.11 or 3.0 so that it gets interpreted in the same way as on 4.0, and thus, the data read on 4.0 will be different to the data read on 3.11 or 3.0, and therefore, the digest will be different as well. The differences are mostly with regard to which cells has skipped values and which cells are removed at all from the results&lt;/p&gt;

&lt;p&gt;I&apos;m going to add extra flag to &lt;tt&gt;ColumnFilter&lt;/tt&gt; in 4.0, which will be set if there are 3.4+ nodes in the cluster, so that the filter can be interpreted on 4.0 in the most efficient way that is also available on 3.4+ nodes. Where there are &amp;lt; 3.4 nodes in the cluster, it is enough to set &lt;tt&gt;queried&lt;/tt&gt; columns to null (as we try to do now).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17282331" author="jlewandowski" created="Wed, 10 Feb 2021 09:20:56 +0000"  >&lt;p&gt;trunk PR: &lt;a href=&quot;https://github.com/apache/cassandra/pull/892&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/892&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;3.11 PR: &lt;a href=&quot;https://github.com/apache/cassandra/pull/891&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/891&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;3.0 PR (just test) &lt;a href=&quot;https://github.com/apache/cassandra/pull/890&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/890&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17284844" author="adelapena" created="Mon, 15 Feb 2021 17:10:08 +0000"  >&lt;p&gt;Running CI:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/182/workflows/1eb6d43a-0a8a-40ff-8fb6-fa66806bf595&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/184/workflows/70b2942f-45f6-4f5d-8267-511aeef6c9b6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/183/workflows/d363c206-0cbc-4208-a376-008a7f721d24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk (j8)&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/183/workflows/59f7ed8d-fdce-4054-a007-4aea99dfeb89&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk (j11)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It seems that for trunk there is a failure in &lt;tt&gt;InsertUpdateIfConditionTest.testConditionalDelete&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17285512" author="yifanc" created="Tue, 16 Feb 2021 21:51:17 +0000"  >&lt;p&gt;Thanks you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt; for the patches.&lt;/p&gt;

&lt;p&gt;The review comments were put in the corresponding PRs.&#160;&lt;/p&gt;

&lt;p&gt;The approach/workaround sounds good. It fixes the wrong check and it can largely&#160;&lt;em&gt;reduce&lt;/em&gt;&#160;the occurrence of digest mismatches during upgrade. The gossip based cluster-wide version checking is still possible to produce small time windows that nodes involved in reads hold different knowledge about the Cassandra versions in the cluster, hence the digest mismatches. However, I cannot think of a better way to fully eliminate, since the semantics of the ColumnFilter has been changed multiple times without message version change and we cannot distinguish.&lt;/p&gt;

&lt;p&gt;We should also change the title of the ticket. It is a bug fix instead of fixing a broken test. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlewandowski&quot; class=&quot;user-hover&quot; rel=&quot;jlewandowski&quot;&gt;jlewandowski&lt;/a&gt;, please update with whatever you think is more suitable to describe the bug.&#160;&lt;/p&gt;</comment>
                            <comment id="17285690" author="jlewandowski" created="Wed, 17 Feb 2021 07:42:03 +0000"  >&lt;p&gt;thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yifanc&quot; class=&quot;user-hover&quot; rel=&quot;yifanc&quot;&gt;yifanc&lt;/a&gt;&#160;for reviewing&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;All in all, I don&apos;t think messaging version change would help there. The problem is that we need to know the version upfront, when executing query locally. We do not know the version yet, because we do not know which replicas are going to be queried. On the other hand, I suppose that when we choose a node as a replica we want to query, we probably already have its endpoint state data populated, thus its version too (though, I&apos;m not sure, I haven&apos;t followed the code carefully).&lt;/p&gt;

&lt;p&gt;If it was just a messaging version, I could imagine that (since 4.0 is not yet released) we introduced a new version in 3.11 patch release and just incremented the messaging version in 4.0. This way we would fix it properly for 3.0 -&amp;gt; 3.11.new and for 3.11.new -&amp;gt; 4.0.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;m going to fix that unit test mentioned by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;. I don&apos;t think it will be just a unit test fix, I suppose it will be a change in production code :/&lt;/p&gt;</comment>
                            <comment id="17285782" author="jlewandowski" created="Wed, 17 Feb 2021 10:56:26 +0000"  >&lt;p&gt;For the problem discovered by &lt;tt&gt;InsertUpdateIfConditionTest&lt;/tt&gt; I must say it is probably caused by partial lack of&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-13025&quot; title=&quot;dtest failure in upgrade_tests.cql_tests.TestCQLNodes3RF3_Upgrade_current_3_x_To_indev_3_x.static_columns_with_distinct_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-13025&quot;&gt;&lt;del&gt;CASSANDRA-13025&lt;/del&gt;&lt;/a&gt; in &lt;tt&gt;trunk&lt;/tt&gt;. I don&apos;t know if it was on purpose or it was a merge conflict or what - there were some changes in &lt;tt&gt;CASRequest&lt;/tt&gt; in 3.0 and 3.11, but in &lt;tt&gt;trunk&lt;/tt&gt; &lt;tt&gt;CASRequest&lt;/tt&gt; became an interface and the actual implementation is in &lt;tt&gt;CQL3CASRequest&lt;/tt&gt;. I assume that it could cause the merge conflict which was not solved properly.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I updated tests a bit in the following ways:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;so far, all the tests which do not touch &lt;tt&gt;Gossiper&lt;/tt&gt; could run assuming the cluster is upgrading from null version - I&apos;ve changed it so if the &lt;tt&gt;Gossiper&lt;/tt&gt; is not started, we do not assume any upgrade&lt;/li&gt;
	&lt;li&gt;I&apos;ve created a utility method to setup &lt;tt&gt;Gossiper&lt;/tt&gt; to mimic upgrade from certain version&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ColumnFilterTest&lt;/tt&gt; and &lt;tt&gt;InsertUpdateIfConditionTest&lt;/tt&gt; are now parameterized with the minimum version so we test all scenarios&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17287269" author="adelapena" created="Fri, 19 Feb 2021 18:00:05 +0000"  >&lt;p&gt;Running CI again:&lt;/p&gt;

&lt;p&gt;&#160;* &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/187/workflows/24f1480f-428f-4816-9af6-2cf751ee9cdc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;br/&gt;
&#160;* &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/189/workflows/7acb9496-96a5-46b5-ace5-cb651ca2eb6c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;br/&gt;
&#160;* &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/188/workflows/1730c947-cd63-4b8b-b4e9-7ba896a945c7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk (j8)&lt;/a&gt;&lt;br/&gt;
&#160;* &lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/188/workflows/1161f852-1570-420d-b8b3-2a9c6b88ac5d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk (j11)&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17287627" author="michaelsembwever" created="Sat, 20 Feb 2021 09:57:48 +0000"  >&lt;p&gt;Matching CI runs on ci-cassandra:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/389/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/390/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/391/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17289233" author="adelapena" created="Tue, 23 Feb 2021 18:09:12 +0000"  >&lt;p&gt;New CI rounds for the last changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/192/workflows/7c49eee3-4e2b-4140-bc09-30d80eeb20f7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/190/workflows/4941bf2b-fef2-4cda-aae9-7e2b3e8614a2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/191/workflows/c5b5107d-70cc-4fcf-8794-fc3b2d903b22&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk (j8)&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/191/workflows/0be9401d-a625-4fd8-9cb6-e43d8c181629&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk (j11)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17290083" author="adelapena" created="Wed, 24 Feb 2021 17:04:29 +0000"  >&lt;p&gt;I&apos;d say the CI results look good. The upgrade test&#160;&lt;tt&gt;mixedModeReadColumnSubsetDigestCheck&lt;/tt&gt; consistently fails on trunk, but I think that&apos;s because CI is picking a 3.11 version without the changes proposed here, so we&apos;ll have to trust the local runs.&lt;/p&gt;</comment>
                            <comment id="17291172" author="yifanc" created="Thu, 25 Feb 2021 19:34:24 +0000"  >&lt;p&gt;+1 on all 3 patches.&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17291184" author="adelapena" created="Thu, 25 Feb 2021 20:10:41 +0000"  >&lt;p&gt;This is looking good to me too, there are only a few remaining nits in the 3.11 and trunk PRs. I have rebased the PRs in separate branches and run CI once again:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/197/workflows/0ced7a12-0872-4b42-b828-e60033b18b47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI 3.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/198/workflows/3f84c4e0-1bed-4bef-b832-4c7f39427d10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI 3.11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/196/workflows/962b06b5-a7e3-4b1d-8542-a9c0de9db236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI trunk j8&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/adelapena/cassandra/196/workflows/d0ffe732-0184-4639-af02-deabdb2627d9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI trunk j11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/413/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra 3.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/414/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra 3.11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/415/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra trunk&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ci-cassandra is taking longer than usual, but I&apos;d say the circle-ci results look good and the failures on it are not related.&lt;/p&gt;</comment>
                            <comment id="17291267" author="jlewandowski" created="Thu, 25 Feb 2021 22:29:51 +0000"  >&lt;p&gt;Thank you for reviewing and testing. I&apos;ve applied the remaining comments from Andres and squashed my commits&lt;/p&gt;</comment>
                            <comment id="17291689" author="adelapena" created="Fri, 26 Feb 2021 14:40:17 +0000"  >&lt;p&gt;Thanks for the changes. There are still a few unneeded &lt;tt&gt;throws Exception&lt;/tt&gt; on the column filter test for 3.11 and trunk that I can easily remove on commit, if that&apos;s ok for you. Other than this nit the changes look good to me.&lt;/p&gt;

&lt;p&gt;It seems that the runs in ci-cassandra above took longer than usual which I think can produce some test failures, I have re-run those runs:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/418/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra 3.0&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/417/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra 3.11&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/416/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra trunk&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Curiously it seems that for 3.11 the tests &lt;tt&gt;SASIIndexTest#testIndexRedistribution/testPagination&lt;/tt&gt; fail consistently, when they were occasionally flaky without the patch. Nevertheless the flakiness of these tests is being addressed in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16444&quot; title=&quot;Fix flaky test testMultiExpressionQueriesWhereRowSplitBetweenSSTables - org.apache.cassandra.index.sasi.SASIIndexTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16444&quot;&gt;&lt;del&gt;CASSANDRA-16444&lt;/del&gt;&lt;/a&gt; so I think it&apos;s safe to consider the failures as not related.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yifanc&quot; class=&quot;user-hover&quot; rel=&quot;yifanc&quot;&gt;yifanc&lt;/a&gt; if the CI results above look good to you I can proceed to commit.&lt;/p&gt;</comment>
                            <comment id="17291782" author="yifanc" created="Fri, 26 Feb 2021 17:13:49 +0000"  >&lt;p&gt;Thanks for running the test!&lt;/p&gt;

&lt;p&gt;The test failures from&#160;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/418/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra 3.0&lt;/a&gt; do not look related.&lt;/p&gt;

&lt;p&gt;The test failures from&#160;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/417/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra 3.11&lt;/a&gt; do not look related. The test &lt;tt&gt;SASIIndexTest#testIndexRedistribution/testPagination&lt;/tt&gt; does not touch the &lt;tt&gt;ColumnFilter.Serializer#deserialize&lt;/tt&gt; code path.&lt;/p&gt;

&lt;p&gt;The test failures from&#160;&lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/416/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ci-cassandra trunk&lt;/a&gt; mostly look unrelated. There is one failure I need to point out, &lt;tt&gt;mixedModeReadColumnSubsetDigestCheck &#8211; org.apache.cassandra.distributed.upgrade.MixedModeReadTest&lt;/tt&gt;. However, it cannot be reproduced by running the test repeatedly on my local. The dtest jars were built from all 3 patched branches. I think Jenkins built the v30/v3x jvm dtest jars from HEAD instead of the patched branches, which explains the failure.&lt;/p&gt;

&lt;p&gt;So, +1 on proceed to commit.&lt;/p&gt;

&lt;p&gt;Beside, I&apos;d &lt;b&gt;strongly&lt;/b&gt; suggest to update the title of the ticket, so it provides more clarity on what is the problem the patch to solve. As mentioned in the earlier comment, it is not just fixing the broken test.&lt;/p&gt;</comment>
                            <comment id="17292867" author="adelapena" created="Mon, 1 Mar 2021 12:53:37 +0000"  >&lt;p&gt;Committed to 3.0 as &lt;a href=&quot;https://github.com/apache/cassandra/commit/865b67b21d326728936f0b80681129c73a2e374a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;865b67b21d326728936f0b80681129c73a2e374a&lt;/a&gt; and merged up to &lt;a href=&quot;https://github.com/apache/cassandra/commit/0541c5199690757294c40d9adfd1b86419158675&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cassandra-3.11&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/cassandra/commit/d1f3d40afc5d20bab70c6200508baa3cd9409458&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17295626" author="aholmber" created="Thu, 4 Mar 2021 23:05:14 +0000"  >&lt;p&gt;It looks to me like some changes here broke a couple of tests.&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/aholmberg/cassandra/206/workflows/d1b3d7d4-5f4e-4485-9767-c2666aad86bd/jobs/2386&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/aholmberg/cassandra/206/workflows/d1b3d7d4-5f4e-4485-9767-c2666aad86bd/jobs/2386&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The test is failing because the statement is printing wrong in the slow query log:&lt;br/&gt;
&lt;tt&gt;&amp;lt;SELECT &lt;b&gt;/&lt;/b&gt; FROM ks.t_skinny WHERE  LIMIT 5000&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I haven&apos;t created a new ticket yet. Will do tomorrow if no one gets to it.&lt;/p&gt;</comment>
                            <comment id="17295632" author="adelapena" created="Thu, 4 Mar 2021 23:21:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aholmber&quot; class=&quot;user-hover&quot; rel=&quot;aholmber&quot;&gt;aholmber&lt;/a&gt;&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16483&quot; title=&quot;ColumnFilter::toString doesn&amp;#39;t return a valid CQL fragment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16483&quot;&gt;&lt;del&gt;CASSANDRA-16483&lt;/del&gt;&lt;/a&gt; has already been created for this. I have an almost ready patch adding a new&#160;&lt;tt&gt;ColumnFilter#toCQLString&lt;/tt&gt; method for query logging, so we can keep the changes in &lt;tt&gt;ColumnFilter#toString&lt;/tt&gt; added in this ticket, although I still need to add some additional dtests. Probably it will be ready for review tomorrow.&lt;/p&gt;</comment>
                            <comment id="17296025" author="aholmber" created="Fri, 5 Mar 2021 13:42:53 +0000"  >&lt;p&gt;got it. Sorry, I just noticed on the way out and didn&apos;t make the connection.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13357630">CASSANDRA-16432</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13362289">CASSANDRA-16483</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jlewandowski]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12987" cascade-level="1"><![CDATA[Transient Incorrect Response]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12970"><![CDATA[Unit Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n8yg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
        <customfieldvalue><![CDATA[ycai]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12340362">3.0.14</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/865b67b21d326728936f0b80681129c73a2e374a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/865b67b21d326728936f0b80681129c73a2e374a&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;run regression + new tests&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>