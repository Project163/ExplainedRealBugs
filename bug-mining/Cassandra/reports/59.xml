<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:10:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-264] log replay bugs</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-264</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;OOM on log replay&lt;/li&gt;
	&lt;li&gt;log is deleted even when replay fails&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12429099">CASSANDRA-264</key>
            <summary>log replay bugs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbellis">Jonathan Ellis</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2009 15:29:46 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:36 +0000</updated>
                            <resolved>Tue, 30 Jun 2009 04:06:55 +0000</resolved>
                                        <fixVersion>0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12725246" author="jbellis" created="Mon, 29 Jun 2009 16:56:10 +0000"  >&lt;p&gt;02 reads&lt;br/&gt;
  add test catching buggy update of header on flush; refactor so there is only one version of code doing those writes (the correct one)&lt;/p&gt;

&lt;p&gt;the bug was in the writeCommitLogHeader called by discard; it didn&apos;t write the length first so readLong() on replay would get basically garbage&lt;/p&gt;</comment>
                            <comment id="12725270" author="junrao" created="Mon, 29 Jun 2009 17:36:06 +0000"  >&lt;p&gt;The patch looks fine. I don&apos;t see any new test cases added though and am wondering how this bug escaped the unit test before.&lt;/p&gt;</comment>
                            <comment id="12725278" author="jbellis" created="Mon, 29 Jun 2009 17:49:15 +0000"  >&lt;p&gt;oops, forgot to add the new test to 0002.  here is the new version of that patch.&lt;/p&gt;

&lt;p&gt;the old test doesn&apos;t catch it because it doesn&apos;t add enough data to cause a flush, which is where the commitlogheader corruption happened.&lt;/p&gt;</comment>
                            <comment id="12725286" author="junrao" created="Mon, 29 Jun 2009 18:01:01 +0000"  >&lt;p&gt;The new patch looks good.&lt;/p&gt;</comment>
                            <comment id="12725465" author="jbellis" created="Tue, 30 Jun 2009 04:06:55 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="12725615" author="hudson" created="Tue, 30 Jun 2009 13:00:43 +0000"  >&lt;p&gt;Integrated in Cassandra #124 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/124/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/124/&lt;/a&gt;)&lt;br/&gt;
    add test catching buggy update of header on flush; refactor so there is only one version of code doing those writes (the correct one).&lt;br/&gt;
patch by jbellis; reviewed by Jun Rao for &lt;br/&gt;
don&apos;t remove commitlog files when replay fails; you lose the chance to fix a bug, as well as your data.&lt;br/&gt;
patch by jbellis; reviewed by Jun Rao for &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412089" name="0002-v2.patch" size="7864" author="jbellis" created="Mon, 29 Jun 2009 17:49:15 +0000"/>
                            <attachment id="12412081" name="ASF.LICENSE.NOT.GRANTED--0001-CASSANDRA-264-don-t-rm-when-replay-fails.txt" size="7529" author="jbellis" created="Mon, 29 Jun 2009 16:54:35 +0000"/>
                            <attachment id="12412082" name="ASF.LICENSE.NOT.GRANTED--0002-add-test-catching-buggy-update-of-header-on-flush-ref.txt" size="6568" author="jbellis" created="Mon, 29 Jun 2009 16:54:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fxvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91086</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>