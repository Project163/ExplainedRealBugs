<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:58:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10382] nodetool info doesn&apos;t show the correct DC and RACK</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10382</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When running &lt;b&gt;nodetool info&lt;/b&gt; cassandra returns UNKNOWN_DC and UNKNOWN_RACK:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# nodetool info
ID                     : b94f9ca0-f886-4111-a471-02f295573f37
Gossip active          : &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Thrift active          : &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Native Transport active: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Load                   : 44.97 MB
Generation No          : 1442913138
Uptime (seconds)       : 5386
Heap Memory (MB)       : 429.07 / 3972.00
Off Heap Memory (MB)   : 0.08
Data Center            : UNKNOWN_DC
Rack                   : UNKNOWN_RACK
Exceptions             : 1
Key Cache              : entries 642, size 58.16 KB, capacity 100 MB, 5580 hits, 8320 requests, 0.671 recent hit rate, 14400 save period in seconds
Row Cache              : entries 0, size 0 bytes, capacity 0 bytes, 0 hits, 0 requests, NaN recent hit rate, 0 save period in seconds
Counter Cache          : entries 0, size 0 bytes, capacity 50 MB, 0 hits, 0 requests, NaN recent hit rate, 7200 save period in seconds
Token                  : (invoke with -T/--tokens to see all 256 tokens)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Correct DCs and RACKs are returned by &lt;b&gt;nodetool status&lt;/b&gt; and &lt;b&gt;nodetool gossipinfo&lt;/b&gt; commands:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# nodetool gossipinfo|grep -E &lt;span class=&quot;code-quote&quot;&gt;&apos;RACK|DC&apos;&lt;/span&gt;
  DC:POZ
  RACK:RACK30
  DC:POZ
  RACK:RACK30
  DC:SJC
  RACK:RACK68
  DC:POZ
  RACK:RACK30
  DC:SJC
  RACK:RACK62
  DC:SJC
  RACK:RACK62
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# nodetool status|grep Datacenter
Datacenter: SJC
Datacenter: POZ
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Cassandra 2.2.1&lt;br/&gt;
GossipingPropertyFileSnitch&lt;/p&gt;</environment>
        <key id="12895401">CASSANDRA-10382</key>
            <summary>nodetool info doesn&apos;t show the correct DC and RACK</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="carlyeks">Carl Yeksigian</assignee>
                                    <reporter username="rmarchei">Ruggero Marchei</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Sep 2015 10:47:41 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:04 +0000</updated>
                            <resolved>Thu, 1 Oct 2015 13:10:14 +0000</resolved>
                                        <fixVersion>2.1.10</fixVersion>
                                    <component>Tool/nodetool</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14905453" author="nirmalk" created="Wed, 23 Sep 2015 22:55:13 +0000"  >&lt;p&gt; Not able to reproduce using cassandra-2.2 head. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rmarchei&quot; class=&quot;user-hover&quot; rel=&quot;rmarchei&quot;&gt;rmarchei&lt;/a&gt; Can you please attach snitch properties file and cassandra.yaml?&lt;/p&gt;</comment>
                            <comment id="14905499" author="carlyeks" created="Wed, 23 Sep 2015 23:27:54 +0000"  >&lt;p&gt;This is actually an issue with the way we get the endpoint. We had a map called &lt;tt&gt;hostIdToEndpoint&lt;/tt&gt; which was actually &lt;tt&gt;endpointToHostId&lt;/tt&gt;, so we resolve the remote endpoint to &lt;tt&gt;null&lt;/tt&gt;. &lt;tt&gt;InetAddress.getHostByName&lt;/tt&gt; will resolve that to localhost, and so it will resolve to a peer when we run it on our laptops.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/carlyeks/cassandra/tree/ticket/10382/2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;br/&gt;
ci: &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10382-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 utest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10382-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 dtest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10382-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 utest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10382-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 dtest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10382-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk utest&lt;/a&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/carlyeks/job/carlyeks-ticket-10382-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk dtest&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14905951" author="rmarchei" created="Thu, 24 Sep 2015 07:35:04 +0000"  >&lt;p&gt;I suppose after &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=carlyeks&quot; class=&quot;user-hover&quot; rel=&quot;carlyeks&quot;&gt;carlyeks&lt;/a&gt; comment cassandra.yaml and the snitch properties file are not needed anymore&lt;/p&gt;</comment>
                            <comment id="14906591" author="stefania" created="Thu, 24 Sep 2015 16:24:15 +0000"  >&lt;p&gt;Config files no longer required, thanks. I&apos;ve added a dtest that reproduces the issue &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/pull/569&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Patch is +1. &lt;/p&gt;

&lt;p&gt;I&apos;ve also confirmed that the patch fixes the problem in 2.2+ but the problem also exists in 2.1.&lt;/p&gt;</comment>
                            <comment id="14906689" author="carlyeks" created="Thu, 24 Sep 2015 17:27:00 +0000"  >&lt;p&gt;Pushed a &lt;a href=&quot;https://github.com/carlyeks/cassandra/tree/ticket/10382/2.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.1 branch&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14907097" author="jmckenzie" created="Thu, 24 Sep 2015 21:50:21 +0000"  >&lt;p&gt;Committed as &lt;tt&gt;6039d0ef74a1d4c3333a699626302596d621ab04&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14937742" author="carlyeks" created="Wed, 30 Sep 2015 17:21:06 +0000"  >&lt;p&gt;This changes our JMX interface, which we should be careful about.&lt;/p&gt;

&lt;p&gt;Pushed a &lt;a href=&quot;https://github.com/carlyeks/cassandra/commit/2938fd355322e79ec15b2c529e39b6c77b43fc4b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt; to add back in the old method, but deprecate it. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Stefania&quot; class=&quot;user-hover&quot; rel=&quot;stefania&quot;&gt;Stefania&lt;/a&gt;: can you review this change?&lt;/p&gt;</comment>
                            <comment id="14939113" author="stefania" created="Thu, 1 Oct 2015 00:41:09 +0000"  >&lt;p&gt;Latest change LGTM, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt; could you commit it please?&lt;/p&gt;</comment>
                            <comment id="14939787" author="tjake" created="Thu, 1 Oct 2015 13:10:14 +0000"  >&lt;p&gt;committed &lt;tt&gt;92c57879f7148e86574aedd259cbdce2ec988a31&lt;/tt&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12901245">CASSANDRA-10408</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[carlyeks]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2le67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stefania</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>