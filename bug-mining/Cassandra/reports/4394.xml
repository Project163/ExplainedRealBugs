<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:04:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12236] RTE from new CDC column breaks in flight queries.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12236</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This RTE is not harmless. It will cause the internode connection to break which will cause all in flight requests between these nodes to die/timeout.&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
    - Due to changes in schema migration handling and the storage format after 3.0, you will
      see error messages such as:
         &quot;java.lang.RuntimeException: Unknown column cdc during deserialization&quot;
      in your system logs on a mixed-version cluster during upgrades. This error message
      is harmless and due to the 3.8 nodes having cdc added to their schema tables while
      the &amp;lt;3.8 nodes do not. This message should cease once all nodes are upgraded to 3.8.
      As always, refrain from schema changes during cluster upgrades.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12990807">CASSANDRA-12236</key>
            <summary>RTE from new CDC column breaks in flight queries.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="jeremiah">Jeremiah Jordan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jul 2016 15:37:03 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:07 +0000</updated>
                            <resolved>Wed, 3 Aug 2016 15:49:43 +0000</resolved>
                                        <fixVersion>3.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                                <comments>
                            <comment id="15384412" author="jmckenzie" created="Tue, 19 Jul 2016 15:56:51 +0000"  >&lt;p&gt;To clarify, this has nothing to do with CDC other than it being the first feature that&apos;s changed system tables since 3.0 hit. In a post &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8099&quot; title=&quot;Refactor and modernize the storage engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8099&quot;&gt;&lt;del&gt;CASSANDRA-8099&lt;/del&gt;&lt;/a&gt; world, the fact that we send across all system tables and reject queries with unknown columns means that any changes to the system schema would cause this. CDC just happens to be the first feature we&apos;ve added since then that changes schema.&lt;/p&gt;

&lt;p&gt; Also - at the time that I added that message to NEWS.txt, from discussion offline we didn&apos;t realize those exceptions would lead to internode communication breaks.&lt;/p&gt;</comment>
                            <comment id="15384645" author="jmckenzie" created="Tue, 19 Jul 2016 18:36:31 +0000"  >&lt;p&gt;Two ways to approach this have come up in offline discussions. The first and less invasive method would be to suppress sending schema information about the cdc param status on versions &amp;gt;= 3.8 unless cdc_enabled:true is set in the cassandra.yaml. Specifically, removing the addition of the cdc param &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.8/src/java/org/apache/cassandra/schema/SchemaKeyspace.java#L514&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; and instead adding it conditionally &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.8/src/java/org/apache/cassandra/schema/SchemaKeyspace.java#L476&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. The upgrade path for users that want to enable cdc would be: don&apos;t enable CDC until your entire cluster is updated to a version &amp;gt;= 3.8. Then enable it and bounce your cluster. Since schema information is hard-coded in SchemaKeyspace.java and we don&apos;t actually care about the value in that param if cdc is not enabled on the cluster, it seems a reasonable workaround until we get to versioned sub-systems in Cassandra.&lt;/p&gt;

&lt;p&gt;The second and more invasive method (at least from the perspective of the # of versions it touches and potential side-effects) would be to allow null columns during deserialization in &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.8/src/java/org/apache/cassandra/db/Columns.java#L433&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Columns.java&lt;/a&gt; if the mutation is for a schema table. This would apply to 3.0.x and 3.8+. This would get us back to a functionality somewhat similar to pre-&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8099&quot; title=&quot;Refactor and modernize the storage engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8099&quot;&gt;&lt;del&gt;CASSANDRA-8099&lt;/del&gt;&lt;/a&gt;, in that mutations for schema tables on different versions would no longer interrupt inter-node communication during an upgrade process via RTE.&lt;/p&gt;

&lt;p&gt;I&apos;m by no means an expert on schema dissemination - &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;: either of you have any feedback on the above two or other, better ideas on this front?&lt;/p&gt;</comment>
                            <comment id="15384738" author="philipthompson" created="Tue, 19 Jul 2016 19:47:25 +0000"  >&lt;p&gt;I&apos;m unsure, but looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12192&quot; title=&quot;Retry all internode messages once after reopening connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12192&quot;&gt;&lt;del&gt;CASSANDRA-12192&lt;/del&gt;&lt;/a&gt;, it seems we get this error in a mixed version cluster that has no schema changes during the upgrade.&lt;/p&gt;</comment>
                            <comment id="15385582" author="slebresne" created="Wed, 20 Jul 2016 09:10:24 +0000"  >&lt;p&gt;Conditionally adding the cdc param only if cdc is enabled and tell user &quot;don&apos;t enable cdc until everything is on 3.8+&quot; sounds simple and reasonable to me (until we have a better way to handle those schema changes that is).&lt;/p&gt;

&lt;p&gt;Ignoring unknown columns at deserialization is in fact much trickier since deserializing the value depends on the type of the column, and we can&apos;t really infer that out of thin air.&lt;/p&gt;</comment>
                            <comment id="15385732" author="iamaleksey" created="Wed, 20 Jul 2016 12:03:00 +0000"  >&lt;p&gt;We went the way we went under the assumption that users would not see this exception unless the made explicit schema changes during the mixed-version period. Looks like you hit the issue even if the user is &lt;b&gt;not&lt;/b&gt; explicitly performing any schema changes on the cluster, which is arguably less acceptable. My guess is that this is caused by setting up auth, tracing, and system_distributed keyspaces on startup.&lt;/p&gt;

&lt;p&gt;Seems to me that the only reasonable way it so add the cdc param conditionally, and have an ugly null default instead of the proper empty frozen set, but, what can you do?&lt;/p&gt;

&lt;p&gt;I&apos;ll see if that is indeed sufficient and can be done super fast. That said, if it&apos;s not, I feel like the fix can wait until 3.9, as I don&apos;t believe that this problem is critical enough do delay the already very late 3.8. You are only going to have the session broken once per tuple of (source, destination) nodes while they are upgrading. While not harmless, I don&apos;t believe it to be a big enough deal to block an even 3.8 release. &lt;/p&gt;</comment>
                            <comment id="15387950" author="jmckenzie" created="Thu, 21 Jul 2016 16:03:31 +0000"  >&lt;p&gt;We don&apos;t need to mess with null vs. empty set since cdc is a boolean on the table level with the &quot;v2&quot; design and DC enabled/disabled is handled on the consumer level. It already defaults to false in &lt;tt&gt;SchemaKeyspace.createTableParamsFromRow&lt;/tt&gt; for backwards compatibility from older nodes.&lt;/p&gt;

&lt;p&gt;Attaching a trivial patch to only add the param in &lt;tt&gt;SchemaKeyspace.addTableParamsToSchemaMutation&lt;/tt&gt; if cdc is enabled on the node.&lt;/p&gt;

&lt;p&gt;Edit: Went ahead and pushed a branch so we can run CI against it and see how things fare w/null in the cdc field:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;testall&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;dtest&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/josh-mckenzie/cassandra/tree/12236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;12236&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/josh-mckenzie/job/josh-mckenzie-12236-testall&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/josh-mckenzie/job/josh-mckenzie-12236-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=philipthompson&quot; class=&quot;user-hover&quot; rel=&quot;philipthompson&quot;&gt;philipthompson&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mambocab&quot; class=&quot;user-hover&quot; rel=&quot;mambocab&quot;&gt;mambocab&lt;/a&gt;: What are the chances we could get upgrade tests run against the above branch?&lt;/p&gt;</comment>
                            <comment id="15388030" author="iamaleksey" created="Thu, 21 Jul 2016 16:53:33 +0000"  >&lt;p&gt;+1, assuming tests pass and the driver handles null appropriately.&lt;/p&gt;</comment>
                            <comment id="15388038" author="iamaleksey" created="Thu, 21 Jul 2016 16:59:42 +0000"  >&lt;p&gt;That said, a slightly better way would be to add the column conditionally on &lt;tt&gt;params.cdc&lt;/tt&gt; rather than on &lt;tt&gt;DatabaseDescriptor.isCDCEnabled()&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15388041" author="jmckenzie" created="Thu, 21 Jul 2016 17:01:12 +0000"  >&lt;p&gt;Changed that and force-pushed. That also gives us the ability to tell people &quot;don&apos;t enable CDC on a table until all nodes are updated&quot; instead of forcing the per-node yaml change w/cluster bounce to get the feature.&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t change the outcome of the utests/dtests I triggered as the outcome is identical (false by default, doesn&apos;t send).&lt;/p&gt;</comment>
                            <comment id="15388042" author="iamaleksey" created="Thu, 21 Jul 2016 17:02:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15388121" author="rhatch" created="Thu, 21 Jul 2016 17:55:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt; I&apos;ll take care of this. I&apos;ll link to the job when it&apos;s up and running.&lt;/p&gt;</comment>
                            <comment id="15388205" author="rhatch" created="Thu, 21 Jul 2016 18:43:21 +0000"  >&lt;p&gt;running here: &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-joshupgrade12236-upgrade/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-joshupgrade12236-upgrade/1/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15388325" author="jmckenzie" created="Thu, 21 Jul 2016 20:02:06 +0000"  >&lt;p&gt;2 things:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;had a bad dtest run so re-running (bad as in spot checking some failing dtests locally w/this branch passes)&lt;/li&gt;
	&lt;li&gt;Sending the cdc param as part of the schema only if it&apos;s enabled on the table leads to a situation where we can enable CDC on a table but can&apos;t turn it back off. Reverted to the DD check and added a conditional skip on CDCStatementTest since the statement won&apos;t toggle that param on and off in schema if the feature is disabled.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15388685" author="rhatch" created="Fri, 22 Jul 2016 00:36:30 +0000"  >&lt;p&gt;technical difficulties &amp;#8211; trying another run here: &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-joshupgrade12236-upgrade/3/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-joshupgrade12236-upgrade/3/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15388689" author="jmckenzie" created="Fri, 22 Jul 2016 00:46:39 +0000"  >&lt;p&gt;I&apos;m in the same boat on the &lt;a href=&quot;http://cassci.datastax.com/job/josh-mckenzie-12236-dtest/4/testReport/junit/schema_metadata_test/TestSchemaMetadata/durable_writes_test/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest front&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15389445" author="jmckenzie" created="Fri, 22 Jul 2016 12:57:26 +0000"  >&lt;p&gt;Current status: Not entirely sure what to make of that &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-joshupgrade12236-upgrade/3/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;upgrade test run&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;65 failures out of ~1350 tests runs, so if the driver was bailing on the null in cdc I&apos;d expect we&apos;d see far more than that. The errors I&apos;m seeing are all over the map though, and I don&apos;t know how many upgrade test errors we &quot;expect&quot; at this point (3.7 upgrade job not on cassci that I&apos;m seeing):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-joshupgrade12236-upgrade/3/testReport/junit/upgrade_tests.paging_test/TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x/basic_paging_test/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Timeouts&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-joshupgrade12236-upgrade/3/testReport/junit/upgrade_tests.paging_test/TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x/basic_paging_test_2/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;LegacyPagedRangeCommandSerializer.deserialize assertions&lt;/a&gt; - see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12249&quot; title=&quot;dtest failure in upgrade_tests.paging_test.TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x.basic_paging_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12249&quot;&gt;&lt;del&gt;CASSANDRA-12249&lt;/del&gt;&lt;/a&gt;. I haven&apos;t dug deeply into that code but from initially looking into it, I&apos;m not sure how an added column in schema would lead to us sending a deprecated PAGED_RANGE from a 3.8 to a 3.0.x node. That being said, I don&apos;t see any &quot;guards&quot; in general around a PartitionRangedReadCommand.createMessage with a paging data range, and that predated the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11393&quot; title=&quot;dtest failure in upgrade_tests.upgrade_through_versions_test.ProtoV3Upgrade_2_1_UpTo_3_0_HEAD.rolling_upgrade_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11393&quot;&gt;&lt;del&gt;CASSANDRA-11393&lt;/del&gt;&lt;/a&gt; so that would require more inspection to figure out what&apos;s going on.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-joshupgrade12236-upgrade/3/testReport/junit/upgrade_tests.paging_test/TestPagingDataNodes3RF3_Upgrade_current_3_x_To_indev_3_x/test_paging_using_secondary_indexes/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Secondary index paging timeouts&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/knifewine/job/knifewine-joshupgrade12236-upgrade/3/testReport/junit/upgrade_tests.cql_tests/TestCQLNodes2RF1_Upgrade_current_3_0_x_To_indev_3_x/select_with_alias_test/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Failure to find unrelated columns&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As for how we want to proceed from here: I&apos;d say we a) re-run the upgrade jobs to see if timeouts were flaky environment (had a lot of problems with that yesterday across a lot of jobs, b) commit this change to 3.8/3.9/trunk, and c) Start working the &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12249&quot; title=&quot;dtest failure in upgrade_tests.paging_test.TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x.basic_paging_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12249&quot;&gt;&lt;del&gt;CASSANDRA-12249&lt;/del&gt;&lt;/a&gt; angle since that error showed up considerably more frequently than any other single error in the upgrade test runs I saw.&lt;/p&gt;

&lt;p&gt;As for what this means for the 3.8 release, my .02 is that I&apos;d want to delta it against what upgrade tests looked like for 3.6, 3.4, 3.2. This is an even release, meaning we don&apos;t recommend rolling it out in production, and as long as our load of upgrade test failures for 3.8 isn&apos;t a regression from the load we had for 3.6, I&apos;d say we move forward, potentially even before hammering out &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12249&quot; title=&quot;dtest failure in upgrade_tests.paging_test.TestPagingDataNodes3RF3_Upgrade_current_3_0_x_To_indev_3_x.basic_paging_test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12249&quot;&gt;&lt;del&gt;CASSANDRA-12249&lt;/del&gt;&lt;/a&gt;. Currently even releases are &quot;feature&quot; releases and odd are &quot;stable&quot;, so there&apos;s no real need to hold up an even release for upgrade-only, mixed-version specific cluster problems in my opinion.&lt;/p&gt;</comment>
                            <comment id="15389446" author="jmckenzie" created="Fri, 22 Jul 2016 12:57:59 +0000"  >&lt;p&gt;Also - since Aleksey is out today and Monday, swapping reviewer to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15389453" author="JIRAUSER308715" created="Fri, 22 Jul 2016 13:03:39 +0000"  >&lt;p&gt;If the problem here isn&apos;t fixed, then it can cause random timeouts in tests because of the internode connection being broken. So for those tests failing from timeouts you should check the logs and see if they have the RTE in them.&lt;/p&gt;</comment>
                            <comment id="15389507" author="jmckenzie" created="Fri, 22 Jul 2016 13:40:38 +0000"  >&lt;p&gt;Good call - I&apos;ll check with TE on accessing the box w/these test failures. We&apos;re doing a re-run of upgrade tests from the SHA immediately before the cdc commit which should help us eliminate about 1/2 of 3.8&apos;s commits as being potential offenders, and I&apos;ll also try and track down older 3.8 runs since those are supposed to be run weekly.&lt;/p&gt;</comment>
                            <comment id="15389562" author="jmckenzie" created="Fri, 22 Jul 2016 14:10:34 +0000"  >&lt;p&gt;There&apos;s a logical issue w/this approach - spoke to Sylvain offline. Going to swap assignee to him and take review.&lt;/p&gt;</comment>
                            <comment id="15391906" author="slebresne" created="Mon, 25 Jul 2016 13:44:49 +0000"  >&lt;p&gt;So the idea of not sending the &lt;tt&gt;cdc&lt;/tt&gt; boolean to old node is correct (I think), but unfortunately we use &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; to construct the mutation and that class is a bit naive and includes all the known columns from the metadata in the header of the mutation it sends (out of simplicity), even if there is not value for some of the columns.&lt;/p&gt;

&lt;p&gt;Now, the &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; and the way we use it building schema mutation is a bit of a mess as we sometimes reuse a particular &lt;tt&gt;PartitionUpdate&lt;/tt&gt;, but not in all path and without a good way to distinguish, which, long story short, makes it harder to figure out which columns will actually be used in the PartitionUpdate (and &lt;tt&gt;PartitionUpdate&lt;/tt&gt; needs to know that upfront). Truth being told, I think &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; has overgrown its initial intention and it&apos;s imo time for a small refactor.&lt;/p&gt;

&lt;p&gt;So I&apos;m attaching a patch that refactor &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt;, and make it only include the column it needs to so that Josh&apos;s patch work as intended. It moves a bit of code around, but I think the result is overall a lot cleaner (and potentially more reusable). I do will note that &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; was used quite a bit in tests now (in fact, some of the features of &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; only existed for tests) so I didn&apos;t removed the class, but simply moved it to the tests.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/pcmanus/cassandra/commits/12236-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;12236-trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-12236-trunk-testall&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-12236-trunk-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15391908" author="slebresne" created="Mon, 25 Jul 2016 13:45:54 +0000"  >&lt;p&gt;Btw, I haven&apos;t run the upgrade tests at all, so I haven&apos;t verified this fixes the upgrade problem. If someone could trigger those (once maybe the utest and dtests shows the patch isn&apos;t too broken), that would be great.&lt;/p&gt;</comment>
                            <comment id="15391956" author="jmckenzie" created="Mon, 25 Jul 2016 14:10:51 +0000"  >&lt;p&gt;Kicking review over to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; since this outgrew the initial scope and we&apos;re blocking 3.8 on this. Better to have him review since it&apos;s in the same domain as things he reviewed for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8099&quot; title=&quot;Refactor and modernize the storage engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8099&quot;&gt;&lt;del&gt;CASSANDRA-8099&lt;/del&gt;&lt;/a&gt; and I&apos;d prefer not to delay release longer just to make sure I get up to speed appropriately.&lt;/p&gt;</comment>
                            <comment id="15391971" author="tjake" created="Mon, 25 Jul 2016 14:19:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;I do will note that RowUpdateBuilder was used quite a bit in tests now (in fact, some of the features of RowUpdateBuilder only existed for tests) so I didn&apos;t removed the class, but simply moved it to the tests.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds like the tests use one row update builder and the actual code uses another. That&apos;s probably not the best idea.&lt;/p&gt;</comment>
                            <comment id="15392749" author="jmckenzie" created="Mon, 25 Jul 2016 22:16:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhatch&quot; class=&quot;user-hover&quot; rel=&quot;rhatch&quot;&gt;rhatch&lt;/a&gt;: Can &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt; simply prefix his branch name with &apos;upgrade&apos; now to get the upgrade suite run against it, or is there still some manual intervention required on this?&lt;/p&gt;</comment>
                            <comment id="15392752" author="philipthompson" created="Mon, 25 Jul 2016 22:18:32 +0000"  >&lt;p&gt;Russ is out sick, but I believe the answer is yes.&lt;/p&gt;</comment>
                            <comment id="15395859" author="iamaleksey" created="Wed, 27 Jul 2016 15:39:33 +0000"  >&lt;p&gt;Reviewing now. Do we have upgrade test results yet?&lt;/p&gt;</comment>
                            <comment id="15395897" author="slebresne" created="Wed, 27 Jul 2016 16:02:02 +0000"  >&lt;p&gt;No, I still don&apos;t know how to run those upgrade tests (I was told something about creating a branch with name starting with &lt;tt&gt;upgrade_&lt;/tt&gt;, which I tried yesterday, but either that didn&apos;t worked or I don&apos;t know where or when that triggers the tests). In any case, it&apos;s worth noting I updated the branch today to&lt;br/&gt;
1) make the &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; in the tests be a thin wrapper over the newly added builder, to address Jake&apos;s comment above. I still kept the &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; class cause it&apos;s used by many tests and I didn&apos;t think it was a good use oa my time to go modify all those tests for no particular reason. It&apos;s just a pretty minor test &quot;helper&quot; now.&lt;br/&gt;
2) while working on that I noticed that there was another reason why all the columns were actually send, and that&apos;s because the &lt;tt&gt;unfilteredIterator()&lt;/tt&gt; method in &lt;tt&gt;PartitionUpdate&lt;/tt&gt;, which is used during serialization, was basically overriding the columns used to be all columns. I fixed that too.&lt;/p&gt;

&lt;p&gt;Anyway, I think the branch is more of less complete, but I just got the result of the last test run (normal tests, not upgrade ones) and it&apos;s not clean so I must have broken something in the tests. This will have to wait tomorrow however for me to look at it. Still very much interested in understanding how to run the upgrade test on CI though. &lt;/p&gt;</comment>
                            <comment id="15395929" author="jmckenzie" created="Wed, 27 Jul 2016 16:25:50 +0000"  >&lt;p&gt;ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhatch&quot; class=&quot;user-hover&quot; rel=&quot;rhatch&quot;&gt;rhatch&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=philipthompson&quot; class=&quot;user-hover&quot; rel=&quot;philipthompson&quot;&gt;philipthompson&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15395980" author="iamaleksey" created="Wed, 27 Jul 2016 16:57:06 +0000"  >&lt;p&gt;Yep, there are some legit test failures - including HintTest, PartitionUpdateTest, RangeTombstoneTest - with the latest commits included.&lt;/p&gt;</comment>
                            <comment id="15396238" author="rhatch" created="Wed, 27 Jul 2016 19:51:57 +0000"  >&lt;p&gt;With any luck we&apos;ll get results on the autojobs created job here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cassci.datastax.com/view/All_Jobs/job/pcmanus-upgrade_12236-upgrade/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/All_Jobs/job/pcmanus-upgrade_12236-upgrade/1/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15398914" author="slebresne" created="Fri, 29 Jul 2016 07:58:50 +0000"  >&lt;p&gt;I fixed the unit test failures (mainly due to various minor errors in the change to &lt;tt&gt;RowUpdateBuilder&lt;/tt&gt; I did in the tests) in a new commit. There is 2 dtests failures for cqlsh DESCRIBE but that&apos;s just because a consequence of this patch is that the &lt;tt&gt;cdc&lt;/tt&gt; table properly won&apos;t be displayed by DESCRIBE by default, which is imo fine. I have a trivial fix of that locally that I&apos;ll push on commit. The rest of the dtest failures &quot;seems&quot; unrelated.&lt;/p&gt;

&lt;p&gt;I seem to be have been able to start upgrade tests on that last branch which I include below, but they haven&apos;t finished at the time of this writing so we&apos;ll see the results.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://github.com/pcmanus/cassandra/commits/12236-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;12236-trunk&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-12236-trunk-testall&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/job/pcmanus-12236-trunk-dtest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/pcmanus/job/pcmanus-upgrade_12236-upgrade/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;upgrade tests&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15399095" author="slebresne" created="Fri, 29 Jul 2016 10:18:05 +0000"  >&lt;p&gt;The upgrade test has finished, but something went wrong. Looking at the console output, at least some tests &quot;seems&quot; to have run successfully, but there is some timeout during the &quot;POST BUILD TASK&quot;. I&apos;m not entirely sure what to make of that so I&apos;ll restart the job in case that was a temporary env issue.&lt;/p&gt;</comment>
                            <comment id="15404046" author="iamaleksey" created="Tue, 2 Aug 2016 14:11:07 +0000"  >&lt;p&gt;Alright.&lt;/p&gt;

&lt;p&gt;Two issues:&lt;br/&gt;
1. &lt;tt&gt;SimpleBuilders#AbstractBuilder#nowInSec() method has an invalid argument ({{int ttl&lt;/tt&gt; instead of &lt;tt&gt;int nowInSec&lt;/tt&gt;), making the method a no-op&lt;br/&gt;
2. SimpleBuilders#RowBuilder#add() in the &lt;tt&gt;SET&lt;/tt&gt; case in the for loop is using the incorrect variable in &lt;tt&gt;toByteBuffer()&lt;/tt&gt; call (&lt;tt&gt;value&lt;/tt&gt; instead of &lt;tt&gt;elt&lt;/tt&gt;)&lt;/p&gt;

&lt;p&gt;One nit: the change in MigrationManager is contaminating git blame, no need for it&lt;/p&gt;

&lt;p&gt;One subjective preference: not a fan of &lt;tt&gt;addNoOverride()&lt;/tt&gt; name. Maybe just replace with &lt;tt&gt;append()&lt;/tt&gt;?&lt;/p&gt;

&lt;p&gt;Otherwise LGTM conditional on tests passing.&lt;/p&gt;</comment>
                            <comment id="15404155" author="slebresne" created="Tue, 2 Aug 2016 15:12:17 +0000"  >&lt;p&gt;Pushed a commit with fix for those and re-started the tests. I did got a run of upgrade test to finish previously and there was still 72 failures. I start looking at the reports and it&apos;s not immediately clear than any of those is due to this issue, but at the same time the reports aren&apos;t full of details in many cases (if we have a node logs, I&apos;m not aware of it). It could be worth noting there is an overwhelming number of paging tests fails, and it doesn&apos;t sound like paging tests would more sensible to this than other (I&apos;ve hinted at some possible explanation for paging upgrade test failures on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10848&quot; title=&quot;Upgrade paging dtests involving deletion flap on CassCI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10848&quot;&gt;&lt;del&gt;CASSANDRA-10848&lt;/del&gt;&lt;/a&gt; but I&apos;m not even sure of that), but I&apos;m fishing a bit here.&lt;/p&gt;

&lt;p&gt;In any case, I think we want to do this change as it was never intended to ship columns for which we had no values, but this is probably not the end of our upgrade test problems.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;One nit: the change in MigrationManager is contaminating git blame, no need for it&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not sure to follow that one. Even if the change wasn&apos;t pulling the &lt;tt&gt;Collections.singletonList()&lt;/tt&gt; call out, which I happen to think is slightly cleaner (and thus prefer over &lt;tt&gt;git blame&lt;/tt&gt; concerns), the code would still need to call the &lt;tt&gt;build()&lt;/tt&gt; method so the pollution would be the same. I&apos;m surely missing your point though.&lt;/p&gt;</comment>
                            <comment id="15404164" author="iamaleksey" created="Tue, 2 Aug 2016 15:16:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Not sure to follow that one&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;My eyes failed me, never mind.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I did got a run of upgrade test to finish previously and there was still 72 failures. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Absolute most of them have been failing since before CDC AFAIK, not related to this ticket, and it will take a while to address them (likely not before 3.10).&lt;/p&gt;</comment>
                            <comment id="15405849" author="jmckenzie" created="Wed, 3 Aug 2016 12:33:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;Absolute most of them have been failing since before CDC AFAIK, not related to this ticket, and it will take a while to address them (likely not before 3.10).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Somewhat off-topic from this ticket proper, but do we have a good idea of what # are test-only failures and what # represent actual problems? If actual problems, I&apos;d expect we&apos;d not cut a release until we get those tests cleaned up.&lt;/p&gt;</comment>
                            <comment id="15405856" author="slebresne" created="Wed, 3 Aug 2016 12:40:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;Absolute most of them have been failing since before CDC AFAIK&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t know. The test report for 3.7, which is &lt;a href=&quot;https://docs.google.com/document/d/16xfq7xeLuD93EVIery0VQLMHMkOfYp7wlyQ7cSg0xwI/edit#heading=h.a7qrmlkpqup2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, pretends that not that long ago there was only 2 upgrade tests failures. Maybe it&apos;s not accurate, and I&apos;ll admit I&apos;m a little skeptical of only 2 failures, but it would sound like we have add a big increase in those failures in the last 2 months. Doesn&apos;t prove at all that it&apos;s CDC related though.&lt;/p&gt;</comment>
                            <comment id="15405884" author="jmckenzie" created="Wed, 3 Aug 2016 13:01:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;Doesn&apos;t prove at all that it&apos;s CDC related though&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In the context of this discussion here, I&apos;m less concerned about the immediate root-causing and more concerned about:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;it will take a while to address them (likely not before 3.10).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t think we should be in the habit of cutting releases with failing upgrade tests.&lt;/p&gt;

&lt;p&gt;I had &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=philipthompson&quot; class=&quot;user-hover&quot; rel=&quot;philipthompson&quot;&gt;philipthompson&lt;/a&gt; attempt an upgrade test run against the SHA right before CDC with results &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/josh-mckenzie/job/josh-mckenzie-upgrade_pre_cdc_3.8-upgrade/8/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. 22 failures on that SHA, so the upgrade tests weren&apos;t in a good place even before this schema-propagation issue.&lt;/p&gt;

&lt;p&gt;Given the paging failures (potentially &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10848&quot; title=&quot;Upgrade paging dtests involving deletion flap on CassCI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10848&quot;&gt;&lt;del&gt;CASSANDRA-10848&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10730&quot; title=&quot;periodic timeout errors in dtest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10730&quot;&gt;&lt;del&gt;CASSANDRA-10730&lt;/del&gt;&lt;/a&gt; related) and the failures we already had going into this commit, I think we&apos;ve just had multiple fairly large upgrade test regressions during the 3.8 time window that we&apos;re just going to have to grind through.&lt;/p&gt;</comment>
                            <comment id="15406105" author="slebresne" created="Wed, 3 Aug 2016 15:49:43 +0000"  >&lt;p&gt;Alright, so as far as this issue is concerned, the unit and dtest runs were clean (outside of the dtest failure on cqlsh DESCRIBED due to the cdc option not being there by default and for which I&apos;ve committed a fix to the dtest for), so committed, thanks.&lt;/p&gt;

&lt;p&gt;It&apos;s a bit unclear how much upgrade tests this actually fix as there is a bit too much noise currently, but it at the very least remove one know reason for failure.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12991157">CASSANDRA-12249</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12819370" name="12236.txt" size="1081" author="joshuamckenzie" created="Thu, 21 Jul 2016 16:03:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i317hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>