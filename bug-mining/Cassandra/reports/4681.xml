<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:06:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-12653] In-flight shadow round requests</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-12653</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Bootstrapping or replacing a node in the cluster requires to gather and check some host IDs or tokens by doing a gossip &quot;shadow round&quot; once before joining the cluster. This is done by sending a gossip SYN to all seeds until we receive a response with the cluster state, from where we can move on in the bootstrap process. Receiving a response will call the shadow round done and calls &lt;tt&gt;Gossiper.resetEndpointStateMap&lt;/tt&gt; for cleaning up the received state again.&lt;/p&gt;

&lt;p&gt;The issue here is that at this point there might be other in-flight requests and it&apos;s very likely that shadow round responses from other seeds will be received afterwards, while the current state of the bootstrap process doesn&apos;t expect this to happen (e.g. gossiper may or may not be enabled). &lt;/p&gt;

&lt;p&gt;One side effect will be that MigrationTasks are spawned for each shadow round reply except the first. Tasks might or might not execute based on whether at execution time &lt;tt&gt;Gossiper.resetEndpointStateMap&lt;/tt&gt; had been called, which effects the outcome of &lt;tt&gt;FailureDetector.instance.isAlive(endpoint))&lt;/tt&gt; at start of the task. You&apos;ll see error log messages such as follows when this happend:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INFO  [SharedPool-Worker-1] 2016-09-08 08:36:39,255 Gossiper.java:993 - InetAddress /xx.xx.xx.xx is now UP
ERROR [MigrationStage:1]    2016-09-08 08:36:39,255 FailureDetector.java:223 - unknown endpoint /xx.xx.xx.xx
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Although is isn&apos;t pretty, I currently don&apos;t see any serious harm from this, but it would be good to get a second opinion (feel free to close as &quot;wont fix&quot;).&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Stefania&quot; class=&quot;user-hover&quot; rel=&quot;stefania&quot;&gt;Stefania&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thobbs&quot; class=&quot;user-hover&quot; rel=&quot;thobbs&quot;&gt;thobbs&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13005368">CASSANDRA-12653</key>
            <summary>In-flight shadow round requests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spod">Stefan Podkowinski</assignee>
                                    <reporter username="spod">Stefan Podkowinski</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Sep 2016 08:33:09 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:59 +0000</updated>
                            <resolved>Wed, 22 Mar 2017 21:02:47 +0000</resolved>
                                        <fixVersion>2.2.10</fixVersion>
                    <fixVersion>3.0.13</fixVersion>
                    <fixVersion>3.11.0</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Distributed Metadata</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="15496613" author="jkni" created="Fri, 16 Sep 2016 15:43:09 +0000"  >&lt;p&gt;You are definitely correct about the cause of this - it occasionally surfaces in test failures such as &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-11689&quot; title=&quot;dtest failures in internode_ssl_test tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-11689&quot;&gt;&lt;del&gt;CASSANDRA-11689&lt;/del&gt;&lt;/a&gt;. I agree with your conclusion that this doesn&apos;t cause any serious harm, but I think it is worth fixing.&lt;/p&gt;</comment>
                            <comment id="15502472" author="stefania" created="Mon, 19 Sep 2016 06:35:21 +0000"  >&lt;p&gt;It&apos;s been a while since I&apos;ve looked at this, but I agree that we should try to fix it. I think the easiest would be to throw away additional shadow round replies, if we can flag them as such.&lt;/p&gt;</comment>
                            <comment id="15503294" author="spodxx@gmail.com" created="Mon, 19 Sep 2016 12:42:10 +0000"  >&lt;p&gt;I think we can get around changing gossip message values by making sure that we don&apos;t process any ACKs for which (any) SYN hasn&apos;t been send before by the &lt;tt&gt;Gossiper&lt;/tt&gt;. I&apos;ve added &lt;tt&gt;Gossiper.lastSynSendAt&lt;/tt&gt; that can be used to drop messages in the verb handler.&lt;/p&gt;</comment>
                            <comment id="15513406" author="spodxx@gmail.com" created="Thu, 22 Sep 2016 14:15:52 +0000"  >
&lt;p&gt;The attached patch will solve this issue by using a separate data structure for the information gathered during shadow rounds and by using a timestamp for the first syn send. &lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;2.2&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;I can also create patches for merge conflicts if needed after agreeing on which versions to target.&lt;/p&gt;</comment>
                            <comment id="15632105" author="spodxx@gmail.com" created="Thu, 3 Nov 2016 08:52:53 +0000"  >&lt;p&gt;Are you still planing to review the patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15637549" author="jkni" created="Fri, 4 Nov 2016 20:16:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spodxx%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;spodxx@gmail.com&quot;&gt;spodxx@gmail.com&lt;/a&gt; - yes! I sincerely apologize for the delay here. If anyone else is interested in reviewing this, they&apos;re welcome to pick it up, but it&apos;s near the top of my list and I hope to get to this soon.&lt;/p&gt;</comment>
                            <comment id="15815325" author="jmckenzie" created="Tue, 10 Jan 2017 15:43:55 +0000"  >&lt;p&gt;What&apos;s status here &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15816092" author="jkni" created="Tue, 10 Jan 2017 20:33:59 +0000"  >&lt;p&gt;Thanks for the ping - I gave the patch another skim and have some questions.&lt;/p&gt;

&lt;p&gt;The approach of returning endpoint states obtained through gossip seems sound. I definitely like this idea because it (mostly) prevents us from needing to reason about how shadow rounds affect the proper gossip process. That said, I&apos;m not sure it fully accomplishes this goal. At the moment, it should be safe if a later response comes back after the gossiper has started, but we need to be careful to preserve this property in the future.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure how the timestamp check is supposed to work. It initializes the field using System.nanoTime() the first time we send a gossip, but in the gossip digest ack verb handler, we check timestamps using the endpoint state update timestamp, which is not serialized inter-node and also initialized using System.nanoTime() by the local JVM. It seems to me that this reduces to a boolean check that the gossiper has been properly started at least once, since this check will only fail when firstSynSendAt == 0. Am I missing something here? It also seems to me that we should initialize the field on starting the gossiper rather than checking and possibly initializing it every time we send a gossip message.&lt;/p&gt;</comment>
                            <comment id="15818621" author="spodxx@gmail.com" created="Wed, 11 Jan 2017 15:29:39 +0000"  >&lt;p&gt;The firstSynSendAt value is only set while sending the first syn during regular gossip. All ACKs will be ignored that have been received and queued before that point. Please keep in mind that the first SYN is send by GossipTasks by using delayed execution, so it&apos;s not enough to simply check if the Gossiper has already been started.&lt;/p&gt;

&lt;p&gt;You are correct in pointing out that the timestamp of the incoming ACK will be a local nanoTime() value. In-flight ACKs triggered during the shadow round will not be filtered by the timestamp check unless already deserialized. But I&apos;d prefer comparing local timestamps anyways, as they will not require some kind of clock skew tolerance, which would be hard to come up with given the kind of races we like to address. Also this shouldn&apos;t be a problem as, like you mentioned, the current handling of empty shadow round ACK replies should be safe. But it&apos;s not a very clean solution and I&apos;d rather be able to either have a causal relationship to the corresponding SYN/Gossip round or even a custom ShadowGossipMessage type. But this is probably better taken care of in e.g. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12345&quot; title=&quot;Gossip 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12345&quot;&gt;&lt;del&gt;CASSANDRA-12345&lt;/del&gt;&lt;/a&gt; instead of this bug fix.&lt;/p&gt;</comment>
                            <comment id="15818707" author="jkni" created="Wed, 11 Jan 2017 16:00:47 +0000"  >&lt;p&gt;Thanks for the quick response; I agree with all the points in your message. My gut instinct is to make the patch as small as possible since we agree that establishing a causal relationship or explicitly separating the shadow gossip round is the proper long-term solution, but the patch isn&apos;t particularly large either way, so I&apos;ll move forward with the the patch as proposed.&lt;/p&gt;

&lt;p&gt;I&apos;ll give the patches another review for any small fixes.&lt;/p&gt;</comment>
                            <comment id="15862255" author="jjirsa" created="Sat, 11 Feb 2017 06:27:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt; - this still on your radar?&lt;/p&gt;</comment>
                            <comment id="15863233" author="jkni" created="Mon, 13 Feb 2017 05:32:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjirsa&quot; class=&quot;user-hover&quot; rel=&quot;jjirsa&quot;&gt;jjirsa&lt;/a&gt; - yes. That said, I don&apos;t anticipate getting to it within the next couple days, so feel free to give it the final review if it is higher priority for you than that. &lt;/p&gt;

&lt;p&gt;I&apos;ve given several passes of review to the core concepts and they seem good. I think a final code style/details pass is all that remains.&lt;/p&gt;</comment>
                            <comment id="15864426" author="jjirsa" created="Mon, 13 Feb 2017 21:11:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spodxx%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;spodxx@gmail.com&quot;&gt;spodxx@gmail.com&lt;/a&gt; - is there some deeper purpose of moving the &lt;tt&gt;FD.instance.isAlive()&lt;/tt&gt; check higher in &lt;tt&gt;MigrationTask#runMayThrow()&lt;/tt&gt; method beyond &quot;check to see if it&apos;s dead before we bother checking to see if it&apos;s worth sending a migration task&quot;? Is there a reason we don&apos;t let &lt;tt&gt;MM#shouldPullSchemaFrom&lt;/tt&gt; return false if FD says the instance is dead? &lt;/p&gt;

&lt;p&gt;Given that the shadow round is meant to just get ring state without changing anything, should we add an explicit check to &lt;tt&gt;MigrationManager#scheduleSchemaPull()&lt;/tt&gt; to ensure that &lt;tt&gt;Gossiper.instance.isInShadowRound()&lt;/tt&gt; is false before scheduling?&lt;/p&gt;</comment>
                            <comment id="15865504" author="spodxx@gmail.com" created="Tue, 14 Feb 2017 10:02:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Stefan Podkowinski - is there some deeper purpose of moving the FD.instance.isAlive() check higher in MigrationTask#runMayThrow() method beyond &quot;check to see if it&apos;s dead before we bother checking to see if it&apos;s worth sending a migration task&quot;? Is there a reason we don&apos;t let MM#shouldPullSchemaFrom return false if FD says the instance is dead?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We could move FS.isAlive into MM.shouldPullSchemaFrom, yes. Not totally against it, but the log message in MigrationTask in case of a false return value would have to be changed and actually the isAlive status should only be relevant at task execution, as there&apos;s a 60 second delay after submitting it. So in theory you could submit a task for a node that has been dead but will be alive again at time of execution.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Given that the shadow round is meant to just get ring state without changing anything, should we add an explicit check to MigrationManager#scheduleSchemaPull() to ensure that Gossiper.instance.isInShadowRound() is false before scheduling?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The MigrationManager should never issue a schema pull during shadow round. If we add such check, I&apos;d prefer to throw an exception instead of failing silently, instead of letting the process run in an undefined state. On the other hand, it&apos;s not really the business of the MM to monitor the gossiper life-cycle when it comes to separations of concerns.&lt;/p&gt;</comment>
                            <comment id="15866010" author="jjirsa" created="Tue, 14 Feb 2017 15:59:38 +0000"  >&lt;p&gt;Fair points all around. I&apos;ve deployed this as-is into a decent sized test cluster just to see how it behaves - first impressions are good compared to 3.0.10. Would love to see this land in 3.0.11 - if &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt; doesn&apos;t get to it in time for cutting 3.0.11, I&apos;ll try to get a more formal review pass on it.&lt;/p&gt;</comment>
                            <comment id="15874092" author="jkni" created="Mon, 20 Feb 2017 06:06:34 +0000"  >&lt;p&gt;A few questions/comments on the latest patches:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;On all versions, a space is missing in the conditional &lt;tt&gt;if(firstSynSendAt == 0)&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;On 2.2, it looks like the patch adds the &lt;tt&gt;valuesEqual&lt;/tt&gt; method from later versions. Was this intentional? It looks unused.&lt;/li&gt;
	&lt;li&gt;On all versions, using &lt;tt&gt;firstSynSendAt == 0&lt;/tt&gt; to check if it has been initialized isn&apos;t entirely safe. It&apos;s entirely legal (although admittedly rare) for &lt;tt&gt;System.nanoTime&lt;/tt&gt; to return 0. If this happened, all acks would be rejected.&lt;/li&gt;
	&lt;li&gt;Comparisons for two &lt;tt&gt;System.nanoTime&lt;/tt&gt; values (such as in &lt;tt&gt;GossipDigestAckVerbHandler&lt;/tt&gt;) should not use t1 &amp;lt; t2. Instead, one should check the difference (t1 - t2 &amp;lt; 0) because numerical overflow could occur in the &lt;tt&gt;System.nanoTime&lt;/tt&gt; long.&lt;/li&gt;
	&lt;li&gt;In &lt;tt&gt;maybeFinishShadowRound&lt;/tt&gt;/&lt;tt&gt;finishShadowRound&lt;/tt&gt;, we should add the states to the &lt;tt&gt;endpointShadowStateMap&lt;/tt&gt; before setting &lt;tt&gt;inShadowRound&lt;/tt&gt; to false. It looks like the current behavior admits a race where &lt;tt&gt;doShadowRound&lt;/tt&gt; could read &lt;tt&gt;inShadowRound == false&lt;/tt&gt; and exit its loop and copy the endpointShadowStateMap before it is filled by shadow round finish.&lt;/li&gt;
	&lt;li&gt;I believe &lt;tt&gt;firstSynSendAt&lt;/tt&gt; is accessed from multiple threads and needs to be volatile.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15874646" author="spodxx@gmail.com" created="Mon, 20 Feb 2017 14:56:21 +0000"  >&lt;p&gt;Thanks for your comments, Joel! Patch has been rebased and updated by following your suggestions, except from the issue mentioned below. &lt;/p&gt;

&lt;p&gt;I&apos;ve also remove two @VisibleForTesting annotations in 2.2, since the related test isn&apos;t available in this branch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;On all versions, using firstSynSendAt == 0 to check if it has been initialized isn&apos;t entirely safe. It&apos;s entirely legal (although admittedly rare) for System.nanoTime to return 0. If this happened, all acks would be rejected.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In this very rare case we&apos;d only discard the acks of 1 or 2 nodes from a single gossip round, as the firstSynSendAt value would afterwards be set by the next periodic sendGossip call. I&apos;d therefor prefer to leave the variable as is, beside making it volatile.&lt;/p&gt;


&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;2.2&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.11&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.11-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.11-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

</comment>
                            <comment id="15878328" author="jasobrown" created="Wed, 22 Feb 2017 14:36:58 +0000"  >&lt;p&gt;On the whole, I&apos;m pretty good with this patch - nice work, Stefan!&lt;/p&gt;

&lt;p&gt;I have two nits:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the 3.11 and trunk branches have the tests included, but 2.2 and 3.0 do not. I that just an oversight? Can we add the tests to those branches, as well?&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;GossipDigestAckVerbHandler#doVerb&lt;/tt&gt;, you get the &lt;a href=&quot;https://github.com/spodkowinski/cassandra/commit/9179b7ee06c51a79881f5be18cd01261ebe62143#diff-787d4963a51f20221468e976df1b121aR64&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;following timestamp&lt;/a&gt;: 
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; ts = epStateMap.values().iterator().next().getUpdateTimestamp();&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-2.2/src/java/org/apache/cassandra/gms/EndpointState.java#L166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;do not serialize&lt;/a&gt; &lt;tt&gt;EndpointState.updateTimestamp&lt;/tt&gt;, so the value at the receiver ends up being the receiver&apos;s &lt;tt&gt;System.nanoTime()&lt;/tt&gt;, as can be seen from the &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-2.2/src/java/org/apache/cassandra/gms/EndpointState.java#L58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;EndpointState&lt;/tt&gt; constructor&lt;/a&gt;. What is it you are looking to confirm here? I&apos;m kinda leaning toward eliminating that check altogether as &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Gossiper.instance.firstSynSendAt == 0&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; might be a sufficient check anyways.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="15878356" author="jasobrown" created="Wed, 22 Feb 2017 14:45:52 +0000"  >&lt;p&gt;Also, I&apos;m not sure &lt;tt&gt;Gossiper#doShadowRound&lt;/tt&gt; needs to be &lt;tt&gt;synchronized&lt;/tt&gt;. Currently, that method is only invoked from &lt;tt&gt;StorageService#prepareToJoin&lt;/tt&gt; (in all current branches). Is it necessary to mark it as such? If it is, can you please add a comment to the method.&lt;/p&gt;</comment>
                            <comment id="15878461" author="jkni" created="Wed, 22 Feb 2017 15:21:58 +0000"  >&lt;p&gt;I think I can answer these - feel free to correct me, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spodxx%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;spodxx@gmail.com&quot;&gt;spodxx@gmail.com&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In order,&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Presently, the tests depend on the mock MessagingService, which was added in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12016&quot; title=&quot;Create MessagingService mocking classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-12016&quot;&gt;&lt;del&gt;CASSANDRA-12016&lt;/del&gt;&lt;/a&gt; to 3.10+. We&apos;d new tests for 2.2/3.0+, which is desirable, but I have no great ideas how to do it other than fiddly byteman tests.&lt;/li&gt;
	&lt;li&gt;I agree with this. Stefan and I discussed it on the first pass of review, and I wouldn&apos;t mind eliminating that check altogether and making it a boolean. OTOH, it&apos;s cheap to check deserialization time and excludes the messages that were deserialized prior to the check. OTOH, there&apos;s no meaningful distinction in correctness-preserving behaviors between that and arbitrarily delayed gossip messages, and we need to handle the latter correctly anyway. I&apos;m most concerned about this check giving future readers false hope &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/li&gt;
	&lt;li&gt;It also seems to be me that it doesn&apos;t presently need to be synchronized. That said, I assumed it was a defensive choice because the internals are definitely not safe to call on multiple threads, and someone may make that mistake in the future.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15880207" author="spodxx@gmail.com" created="Thu, 23 Feb 2017 10:00:04 +0000"  >&lt;p&gt;The goal of introducing the firstSynSendAt timestamp was to prevent processing ACKs (lagged over from shadow gossip round) before any regular SYN has been send. I still think checking this value against the local message construction time is a good idea, as messages will be queued before getting dispatched and it&apos;s not that unlikely that the scheduler will make this happen for older messages just after we send the syn. As &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-12653?focusedCommentId=15818621&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15818621&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;mentioned before&lt;/a&gt; the proper way to do this would be to be able to correlate between messages or do the shadow round conversation based on new dedicated message types.&lt;/p&gt;</comment>
                            <comment id="15883114" author="jkni" created="Fri, 24 Feb 2017 17:08:39 +0000"  >&lt;p&gt;Do those answers address your questions well enough, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt;? The latest patch addressed my concerns, but I don&apos;t want to step on your toes.&lt;/p&gt;

&lt;p&gt;I had to restart dtests for 2.2, but the latest patch/CI looks good to me otherwise.&lt;/p&gt;</comment>
                            <comment id="15884235" author="jasobrown" created="Sat, 25 Feb 2017 13:09:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spod&quot; class=&quot;user-hover&quot; rel=&quot;spod&quot;&gt;spod&lt;/a&gt; I&apos;m on board with &lt;tt&gt;firstSynSendAt&lt;/tt&gt; being a timestamp, I&apos;m just questioning what you compare it against. Instead of this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; ts = epStateMap.values().iterator().next().getUpdateTimestamp();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((ts - Gossiper.instance.firstSynSendAt) &amp;lt; 0 || Gossiper.instance.firstSynSendAt == 0)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m suggesting this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.nanoTime() - Gossiper.instance.firstSynSendAt) &amp;lt; 0 || Gossiper.instance.firstSynSendAt == 0)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It amounts to the same thing (a check against &lt;tt&gt;System.nanoTime()&lt;/tt&gt;), but it&apos;s more obvious where the value comes from.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt; wrt to &lt;tt&gt;synchronized&lt;/tt&gt;, on one hand agree with you, but then that makes the argument for making many more of the methods on &lt;tt&gt;Gossiper&lt;/tt&gt; synchronized. If we&apos;re going to make this method different from the rest (which is fine with me), can we add in a relevant, detailed comment why it is?&lt;/p&gt;</comment>
                            <comment id="15889785" author="spodxx@gmail.com" created="Wed, 1 Mar 2017 08:47:29 +0000"  >&lt;p&gt;As for the firstSynSendAt timestamp, I was just about to add a code comment why the updateTimestamp comparison would work fine, when I realized that I had to figure out &lt;em&gt;again&lt;/em&gt; how this value was initialized and that the getUpdateTimestamp method description was not exactly what I wanted for the use case. So lets just stick with Jasons suggestion for sake of clarity and maintainability.&lt;/p&gt;

&lt;p&gt;I&apos;ve also added some javadoc comments regarding the synchronized use.&lt;/p&gt;


&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;2.2&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.11&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/spodkowinski/cassandra/tree/CASSANDRA-12653-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-2.2-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.11-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-2.2-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-3.11-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/spodkowinski/job/spodkowinski-CASSANDRA-12653-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15890169" author="jasobrown" created="Wed, 1 Mar 2017 13:37:27 +0000"  >&lt;p&gt;Nice work, +1. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt; Do you want to give this one more reading, or do you trust &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spodxx%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;spodxx@gmail.com&quot;&gt;spodxx@gmail.com&lt;/a&gt; and I not to screw things up too badly? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15892772" author="jkni" created="Thu, 2 Mar 2017 18:47:38 +0000"  >&lt;p&gt;Thanks! The latest changes look good - however, if moving the System.nanoTime() call to the comparison site, it seems that the &lt;tt&gt;firstSynSendAt&lt;/tt&gt; truly does reduce to a boolean, since the comparison will now always be true if &lt;tt&gt;firstSynSendAt&lt;/tt&gt; has been set. I don&apos;t think the existing patch will cause any problems, but it may be more complicated than it needs to be.&lt;/p&gt;</comment>
                            <comment id="15902788" author="spodxx@gmail.com" created="Thu, 9 Mar 2017 09:47:05 +0000"  >&lt;p&gt;The value might be effectively reduced to a boolean with the latest version, but it doesn&apos;t have to stay that way in the future. But I honestly don&apos;t really feel that the level of additional complexity we&apos;re talking about here is worth further discussion. At this point it&apos;s probably more a matter of personal code style preferences. So are you ok keeping this issue as &quot;ready to commit&quot;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15903212" author="jkni" created="Thu, 9 Mar 2017 15:27:30 +0000"  >&lt;p&gt;Sure - while I&apos;d argue that a need for a change in the future could be introduced in the future patch, I agree that this distinction is very minor and won&apos;t cause any problems. Thanks for the patch and your patience!&lt;/p&gt;</comment>
                            <comment id="15906881" author="jjirsa" created="Mon, 13 Mar 2017 05:07:59 +0000"  >&lt;p&gt;Which of you two new committers (congrats!) feels like committing this? &lt;/p&gt;</comment>
                            <comment id="15907535" author="jkni" created="Mon, 13 Mar 2017 14:15:55 +0000"  >&lt;p&gt;I planned on leaving that honor to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spodxx%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;spodxx@gmail.com&quot;&gt;spodxx@gmail.com&lt;/a&gt; as patch author, but if he doesn&apos;t, I&apos;m happy to do so.&lt;/p&gt;</comment>
                            <comment id="15937125" author="jkni" created="Wed, 22 Mar 2017 21:07:42 +0000"  >&lt;p&gt;Committed to 2.2 as &lt;tt&gt;bf0906b92cf65161d828e31bc46436d427bbb4b8&lt;/tt&gt; and merged forward through 3.0, 3.11, and trunk. Added Jason Brown as an additional reviewer in the commit since his feedback was incorporated in the latest round of patches.&lt;/p&gt;

&lt;p&gt;Thanks everyone!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12785331">CASSANDRA-9032</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12963992">CASSANDRA-11689</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[spod]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33paf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jkni</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jkni]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>