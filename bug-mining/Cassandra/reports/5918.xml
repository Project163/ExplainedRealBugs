<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:23:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16801] PasswordObfuscator should not assume PASSWORD is the last item in the WITH clause</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16801</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-16669&quot; title=&quot;Password obfuscation for DCL audit log statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-16669&quot;&gt;&lt;del&gt;CASSANDRA-16669&lt;/del&gt;&lt;/a&gt; introduced support for obfuscating passwords for audit log statements, but there are a few cases where the obfuscation logic can destroy some of the contents of the original/provided string.&lt;/p&gt;

&lt;p&gt;ex. This is perfectly valid...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;WITH LOGIN = false AND PASSWORD = &apos;bar&apos; AND SUPERUSER = false
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...but calling obfuscate() on it will produce...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;WITH LOGIN = false AND PASSWORD *******
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;del&gt;We should be able to create a reasonable RegEx and use String#replaceAll() to both simplify and correct PasswordObfuscator#obfuscate().&lt;/del&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13389459">CASSANDRA-16801</key>
            <summary>PasswordObfuscator should not assume PASSWORD is the last item in the WITH clause</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bereng">Berenguer Blasi</assignee>
                                    <reporter username="maedhroz">Caleb Rackliffe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Jul 2021 19:34:14 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:57 +0000</updated>
                            <resolved>Tue, 25 Jan 2022 06:19:26 +0000</resolved>
                                        <fixVersion>4.0.2</fixVersion>
                    <fixVersion>4.1-alpha1</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                    <component>Tool/auditlogging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="17380129" author="brandon.williams" created="Tue, 13 Jul 2021 19:36:16 +0000"  >&lt;p&gt;A regex was explored here and shot down.  The way to handle this properly is with the grammar parser, the same way the statement is parsed.&lt;/p&gt;</comment>
                            <comment id="17380143" author="maedhroz" created="Tue, 13 Jul 2021 20:04:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;There can then be a follow up ticket that actually uses the ANTLR grammar parsed statement to pull out the password field and only remove that, if it is what people want.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;WFM...we&apos;ll treat this as the follow-up ticket then.&lt;/p&gt;</comment>
                            <comment id="17389805" author="vkartik97" created="Thu, 29 Jul 2021 10:29:29 +0000"  >&lt;p&gt;Can I take this up ?&lt;/p&gt;

&lt;p&gt;I am new to java saw this as an easy bug fix &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17389884" author="brandon.williams" created="Thu, 29 Jul 2021 12:57:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vkartik97&quot; class=&quot;user-hover&quot; rel=&quot;vkartik97&quot;&gt;vkartik97&lt;/a&gt; sure!  But this may not be as easy as you think, I think the complexity was scoped with the belief a regex would suffice.  I&apos;ve since adjusted it.&lt;/p&gt;</comment>
                            <comment id="17433618" author="bereng" created="Mon, 25 Oct 2021 08:19:09 +0000"  >&lt;p&gt;Will be looking into this one in short #justfyi&lt;/p&gt;</comment>
                            <comment id="17435823" author="stefan.miklosovic" created="Fri, 29 Oct 2021 07:28:12 +0000"  >&lt;p&gt;It would be ideal to see a progress towards antlr solution. Due to the complexity of this seemingly easy task and being short of time to do that before 4.0.0 we just went with solution Brandon mentioned. This &quot;brutal&quot; approach of deleting everything after PASSWORD was done on purpose.&lt;/p&gt;</comment>
                            <comment id="17435829" author="bereng" created="Fri, 29 Oct 2021 07:42:21 +0000"  >&lt;p&gt;I must be missing sthg here. Antlr already parses the password into a DTO. And the attached PR does not delete everything after the password. It only obfuscates the password itself leaving the rest of the CQL intact.&lt;/p&gt;</comment>
                            <comment id="17435833" author="stefan.miklosovic" created="Fri, 29 Oct 2021 07:53:19 +0000"  >&lt;p&gt;Honestly I dont remember the details. I saw it there too in RoleOptions but I was trying to do it somehow without introducing that interface or so ... So congrats on figuring that out &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="17435837" author="bereng" created="Fri, 29 Oct 2021 08:01:21 +0000"  >&lt;p&gt;Oh well maybe sbdy has a better suggestion, let&apos;s wait and see what feedback comes.&lt;/p&gt;</comment>
                            <comment id="17437504" author="edimitrova" created="Tue, 2 Nov 2021 18:00:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;I must be missing sthg here. Antlr already parses the password into a DTO. And the attached PR does not delete everything after the password. It only obfuscates the password itself leaving the rest of the CQL intact.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Seems to me you actually fall back to the old way in case of errors.&lt;/p&gt;

&lt;p&gt;Look &lt;a href=&quot;https://github.com/apache/cassandra/pull/1293/files#diff-df97ca69d481fde559e155c724ca60967a1e57222ea845d8ee8299d7b014df46R251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Syntax errors are indeed fully obfuscated, but other errors fall to the old way. This worries me a bit. My understanding was that we need to get rid in full of the old way.&lt;/p&gt;</comment>
                            <comment id="17437676" author="edimitrova" created="Wed, 3 Nov 2021 00:42:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&#160;anyone of you having cycles and up to be second reviewer?&#160;&lt;/p&gt;</comment>
                            <comment id="17437749" author="bereng" created="Wed, 3 Nov 2021 06:17:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Seems to me you actually fall back to the old way in case of errors.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Correct I had mentioned it already. When antlr fails to parse we don&apos;t have the password available so the previous logic is used as a fallback. If sbdy with better antlr kung-fu chimes in that be great.&lt;/p&gt;</comment>
                            <comment id="17474450" author="bereng" created="Wed, 12 Jan 2022 11:14:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt; for your latest review. I have rebased, added a PR for trunk which happens to be identical and CI for both. Now waiting on final +1s and let&apos;s merge it! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17475299" author="bereng" created="Thu, 13 Jan 2022 11:42:01 +0000"  >&lt;p&gt;Although the latest pushes have the final correct code GH has been giving plenty timeouts today. I will trigger CI again tomorrow as I don&apos;t feel comfortable with those weird CI runs despite there shouldn&apos;t be any problems.&lt;/p&gt;</comment>
                            <comment id="17475987" author="bereng" created="Fri, 14 Jan 2022 06:42:26 +0000"  >&lt;p&gt;CI was ok today. Results attached to PRs. This is up for final consideration and hopefully +1 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17476054" author="blerer" created="Fri, 14 Jan 2022 10:05:52 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17476965" author="bereng" created="Mon, 17 Jan 2022 05:56:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; mentioned via Slack about improving the wording on docs regarding obfuscation corner cases. Latest &lt;a href=&quot;https://github.com/apache/cassandra/pull/1293/commits/25aa6bd8c951a1824ba56fdbc729243f49fc08c5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt; should address that?&lt;/p&gt;</comment>
                            <comment id="17480707" author="edimitrova" created="Sun, 23 Jan 2022 18:24:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;Latest &lt;a href=&quot;https://github.com/apache/cassandra/pull/1293/commits/25aa6bd8c951a1824ba56fdbc729243f49fc08c5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt;should address that?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I would probably do it as a Note or Warning (I think we use Note in our docs normally) but otherwise looks ok to me.&#160;&lt;/p&gt;

&lt;p&gt;I left a few tiny formatting suggestions on the 4.0 PR. Those can be addressed on commit. I am +1 on final &quot;green&quot; CI, thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17481031" author="bereng" created="Mon, 24 Jan 2022 11:51:41 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; I think I applied all the suggestions or left a GH comment. I squashed, rebased and ran CI. I&apos;ll merge tomorrow unless sbdy objects to give some time.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310460">
                    <name>Child-Issue</name>
                                            <outwardlinks description="is a parent of">
                                        <issuelink>
            <issuekey id="13426156">CASSANDRA-17334</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13378551">CASSANDRA-16669</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bereng]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12975"><![CDATA[Code Inspection]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0swzk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
        <customfieldvalue><![CDATA[e.dimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12336842">4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/85248da628770d9d93fdd2cbd1eedd55b3ddc206&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/85248da628770d9d93fdd2cbd1eedd55b3ddc206&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;See PR&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>