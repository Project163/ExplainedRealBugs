<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:58:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8821] Errors in JVM_OPTS and cassandra_parms environment vars</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8821</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Repos:&lt;br/&gt;
deb &lt;a href=&quot;http://www.apache.org/dist/cassandra/debian&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/dist/cassandra/debian&lt;/a&gt; 21x main&lt;br/&gt;
deb-src &lt;a href=&quot;http://www.apache.org/dist/cassandra/debian&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/dist/cassandra/debian&lt;/a&gt; 21x main&lt;/p&gt;

&lt;p&gt;The cassandra init script&lt;br/&gt;
  /etc/init.d/cassandra&lt;br/&gt;
is sourcing the environment file&lt;br/&gt;
  /etc/cassandra/cassandra-env.sh&lt;br/&gt;
twice. Once directly from the init script, and again inside&lt;br/&gt;
  /usr/sbin/cassandra&lt;br/&gt;
The result is arguments in JVM_OPTS are duplicated.&lt;/p&gt;

&lt;p&gt;Further the JVM opt&lt;br/&gt;
  -XX:CMSWaitDuration=10000&lt;br/&gt;
is defined twice if jvm &amp;gt;= 1.7.60.&lt;/p&gt;

&lt;p&gt;Also, for the environment variable CASSANDRA_CONF used in this context&lt;br/&gt;
  -XX:CompileCommandFile=$CASSANDRA_CONF/hotspot_compiler&quot;&lt;br/&gt;
is undefined when&lt;br/&gt;
  /etc/cassandra/cassandra-env.sh&lt;br/&gt;
is sourced from the init script.&lt;/p&gt;

&lt;p&gt;Lastly the variable cassandra_storagedir is undefined in&lt;br/&gt;
  /usr/sbin/cassandra&lt;br/&gt;
when used in this context&lt;br/&gt;
  -Dcassandra.storagedir=$cassandra_storagedir&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 14.04 LTS amd64&lt;/p&gt;</environment>
        <key id="12775816">CASSANDRA-8821</key>
            <summary>Errors in JVM_OPTS and cassandra_parms environment vars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tmoschou">Terry Moschou</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Feb 2015 06:07:12 +0000</created>
                <updated>Thu, 27 Apr 2023 17:08:53 +0000</updated>
                                                <fixVersion>2.1.x</fixVersion>
                    <fixVersion>2.2.x</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14326216" author="mshuler" created="Wed, 18 Feb 2015 17:22:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; do you have a quick thought on how we might clean this up? It&apos;s not really a problem that JVM_OPTS are duplicated, I don&apos;t think, but it would be nice that this is set only once. I&apos;ll have to dig around the other env vars listed.&lt;/p&gt;</comment>
                            <comment id="14339488" author="mshuler" created="Fri, 27 Feb 2015 00:51:20 +0000"  >&lt;p&gt;2.0 and 2.1+ patches attached.&lt;/p&gt;</comment>
                            <comment id="14339718" author="mshuler" created="Fri, 27 Feb 2015 04:46:05 +0000"  >&lt;p&gt;I need to look at the other couple details suggested, so cancelling patch for the moment.&lt;/p&gt;</comment>
                            <comment id="14578225" author="tmoschou" created="Tue, 9 Jun 2015 02:50:59 +0000"  >&lt;p&gt;This issue is still present in 2.2.0-rc1&lt;/p&gt;</comment>
                            <comment id="14578239" author="tmoschou" created="Tue, 9 Jun 2015 03:08:36 +0000"  >&lt;p&gt;Should this be blocker for 2.2.0? Wouldn&apos;t want any updates to break custom config across minor releases.&lt;/p&gt;</comment>
                            <comment id="14651743" author="mlowicki" created="Mon, 3 Aug 2015 11:04:00 +0000"  >&lt;p&gt;Because of this bug f.ex. &lt;tt&gt;cassandra service status&lt;/tt&gt; doesn&apos;t work.&lt;/p&gt;</comment>
                            <comment id="14908248" author="urandom" created="Fri, 25 Sep 2015 16:09:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mshuler&quot; class=&quot;user-hover&quot; rel=&quot;mshuler&quot;&gt;mshuler&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;debian/init&lt;/tt&gt;:&lt;br/&gt;
This is all a throwback to when the init script used &lt;tt&gt;jsvc&lt;/tt&gt;, and there is a bit more of it that can be excised; You can also remove the bits that source &lt;tt&gt;cassandra-env.sh&lt;/tt&gt;, and the zero-length test of &lt;tt&gt;$JVM_OPTS&lt;/tt&gt;. See: &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10251&quot; title=&quot;JVM_OPTS repetition when started from init script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10251&quot;&gt;&lt;del&gt;CASSANDRA-10251&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;conf/cassandra-env.{sh,ps1&lt;/tt&gt;}:&lt;br/&gt;
I don&apos;t think we should be promoting the use of &lt;tt&gt;JVM_EXTRA_OPTS&lt;/tt&gt; from within &lt;tt&gt;cassandra-env.*&lt;/tt&gt;.  By which I mean, if you are editing one of those files then it&apos;s probably sanest to just edit &lt;tt&gt;JVM_OPTS&lt;/tt&gt;, and leave &lt;tt&gt;JVM_EXTRA_OPTS&lt;/tt&gt; as a way of injecting options from elsewhere.  I suggest that we remove the commented out assignment, adjust the documenting comments accordingly, or remove them entirely.  You can put a commented out  &lt;tt&gt;JVM_EXTRA_OPTS&lt;/tt&gt; assignment, and corresponding documentation in &lt;tt&gt;debian/default&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Does this sounds reasonable?&lt;/p&gt;</comment>
                            <comment id="14965244" author="slebresne" created="Tue, 20 Oct 2015 15:14:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mshuler&quot; class=&quot;user-hover&quot; rel=&quot;mshuler&quot;&gt;mshuler&lt;/a&gt; ping (have you seen Eric&apos;s comments?).&lt;/p&gt;</comment>
                            <comment id="14965492" author="mshuler" created="Tue, 20 Oct 2015 18:13:42 +0000"  >&lt;p&gt;I have! Can we get a committer for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10251&quot; title=&quot;JVM_OPTS repetition when started from init script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10251&quot;&gt;&lt;del&gt;CASSANDRA-10251&lt;/del&gt;&lt;/a&gt;? That solves most of the issues and I&apos;ll work up a new patch for this ticket with the above in mind.&lt;/p&gt;</comment>
                            <comment id="14966736" author="slebresne" created="Wed, 21 Oct 2015 12:35:07 +0000"  >&lt;p&gt;I&apos;ve committed &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10251&quot; title=&quot;JVM_OPTS repetition when started from init script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10251&quot;&gt;&lt;del&gt;CASSANDRA-10251&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12761768">CASSANDRA-8484</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12777493">CASSANDRA-8863</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12735345">CASSANDRA-7802</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12701225" name="8821_2.0.txt" size="1898" author="mshuler" created="Fri, 27 Feb 2015 00:45:08 +0000"/>
                            <attachment id="12701226" name="8821_2.1.txt" size="2645" author="mshuler" created="Fri, 27 Feb 2015 00:45:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25r6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>urandom</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>