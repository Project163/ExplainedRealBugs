<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:39:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5706] OOM while loading key cache at startup</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5706</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Steps to be able to reproduce it :&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;have a heap of 1Gb&lt;/li&gt;
	&lt;li&gt;have a saved key cache without the SSTables&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When looking at KeyCacheSerializer.serialize : it always writes a Boolean&lt;br/&gt;
When looking at KeyCacheSerializer.deserialize : no Boolean is read if SSTable is missing...&lt;/p&gt;

&lt;p&gt;In case of a promoted index, RowIndexEntry.serializer.skip(...) should be called rather than RowIndexEntry.serializer.skipPromotedIndex(...) (again for symmetry between serialization/deserialization)&lt;/p&gt;

&lt;p&gt;Attached is a proposed patch&lt;/p&gt;</description>
                <environment></environment>
        <key id="12654953">CASSANDRA-5706</key>
            <summary>OOM while loading key cache at startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="frousseau">Fabien Rousseau</assignee>
                                    <reporter username="frousseau">Fabien Rousseau</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Jun 2013 15:40:25 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:10 +0000</updated>
                            <resolved>Fri, 28 Jun 2013 15:31:49 +0000</resolved>
                                        <fixVersion>1.2.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13694289" author="jbellis" created="Wed, 26 Jun 2013 22:00:45 +0000"  >&lt;p&gt;(setting affects- to 1.2.5 b/c suspect was introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5492&quot; title=&quot;Backport row-level bloom filter removal to 1.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5492&quot;&gt;&lt;del&gt;CASSANDRA-5492&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13694294" author="jbellis" created="Wed, 26 Jun 2013 22:06:51 +0000"  >&lt;p&gt;(actually, annotate says this dates back to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3762&quot; title=&quot;AutoSaving KeyCache and System load time improvements.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3762&quot;&gt;&lt;del&gt;CASSANDRA-3762&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13694297" author="jbellis" created="Wed, 26 Jun 2013 22:09:27 +0000"  >&lt;p&gt;Your analysis is correct; attached is slightly revised patch to emphasize that we already read exactly one boolean&lt;/p&gt;</comment>
                            <comment id="13695171" author="jbellis" created="Thu, 27 Jun 2013 23:58:34 +0000"  >&lt;p&gt;LGTY Fabien?&lt;/p&gt;</comment>
                            <comment id="13695310" author="frousseau" created="Fri, 28 Jun 2013 07:56:26 +0000"  >&lt;p&gt;Sorry for the delay.&lt;/p&gt;

&lt;p&gt;Yep, it looks good to me.&lt;/p&gt;</comment>
                            <comment id="13695512" author="jbellis" created="Fri, 28 Jun 2013 15:31:49 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="13798919" author="tomvandenberge" created="Fri, 18 Oct 2013 08:47:42 +0000"  >&lt;p&gt;I&apos;m having this problem again since I&apos;ve upgraded to 1.2.10.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12589764" name="5706-OOM-while-loading-key-cache-at-startup.patch" size="796" author="frousseau" created="Wed, 26 Jun 2013 15:41:24 +0000"/>
                            <attachment id="12589803" name="5706-v2-txt" size="1559" author="jbellis" created="Wed, 26 Jun 2013 22:09:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[frousseau]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335230</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ltqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335554</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>