<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:41:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6316] json2sstable breaks on RangeTombstone</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6316</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;It seems that sstable2json writes out json which json2sstable has trouble reading.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NumberFormatException: An hex string representing bytes must have an even length
	at org.apache.cassandra.utils.Hex.hexToBytes(Hex.java:52)
	at org.apache.cassandra.utils.ByteBufferUtil.hexToBytes(ByteBufferUtil.java:503)
	at org.apache.cassandra.tools.SSTableImport.stringAsType(SSTableImport.java:572)
	at org.apache.cassandra.tools.SSTableImport.access$000(SSTableImport.java:66)
	at org.apache.cassandra.tools.SSTableImport$JsonColumn.&amp;lt;init&amp;gt;(SSTableImport.java:158)
	at org.apache.cassandra.tools.SSTableImport.addColumnsToCF(SSTableImport.java:229)
	at org.apache.cassandra.tools.SSTableImport.addToStandardCF(SSTableImport.java:212)
	at org.apache.cassandra.tools.SSTableImport.importUnsorted(SSTableImport.java:361)
	at org.apache.cassandra.tools.SSTableImport.importJson(SSTableImport.java:318)
	at org.apache.cassandra.tools.SSTableImport.main(SSTableImport.java:537)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
ERROR: An hex string representing bytes must have an even length
12345:2:!
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;1.2.10&lt;/p&gt;</environment>
        <key id="12678197">CASSANDRA-6316</key>
            <summary>json2sstable breaks on RangeTombstone</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lyubent">Lyuben Todorov</assignee>
                                    <reporter username="exabytes18">Matt Jurik</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Nov 2013 11:08:16 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:01 +0000</updated>
                            <resolved>Thu, 28 Nov 2013 02:14:40 +0000</resolved>
                                        <fixVersion>1.2.13</fixVersion>
                    <fixVersion>2.0.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13817295" author="lyubent" created="Fri, 8 Nov 2013 14:06:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=exabytes18&quot; class=&quot;user-hover&quot; rel=&quot;exabytes18&quot;&gt;exabytes18&lt;/a&gt; Could you please post the schema of the cf you are trying to export/import? &lt;/p&gt;</comment>
                            <comment id="13817612" author="exabytes18" created="Fri, 8 Nov 2013 19:38:24 +0000"  >&lt;p&gt;Pretty trivial schema:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; CREATE KEYSPACE test_range_tombstones WITH replication = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt;:1};
cqlsh&amp;gt; use test_range_tombstones;
cqlsh:test_range_tombstones&amp;gt; CREATE TABLE tbl (
                         ...     a INT,
                         ...     b INT,
                         ...     c INT,
                         ...     d TIMESTAMP,
                         ...     e BOOLEAN,
                         ...     PRIMARY KEY(a, b, c)
                         ... ) WITH compaction = { &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;LeveledCompactionStrategy&apos;&lt;/span&gt; };
cqlsh:test_range_tombstones&amp;gt; insert into tbl (a, b, c, d, e) values (1, 2, 3, 4, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
cqlsh:test_range_tombstones&amp;gt; select * from tbl;

 a | b | c | d                        | e
---+---+---+--------------------------+-------
 1 | 2 | 3 | 1969-12-31 16:00:00-0800 | False

cqlsh:test_range_tombstones&amp;gt; delete from tbl where a = 5 and b = 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13819032" author="lyubent" created="Mon, 11 Nov 2013 15:37:09 +0000"  >&lt;p&gt;When SSTableImport#JsonColumn tries to find the comparator for the tombstoned range it fails and defaults to a BytesType comparator. I special-cased the tombstoned columns to get their comparator from the 1st component of the cf. &lt;a href=&quot;https://gist.github.com/lyubent/7415048&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Gist of the schemas used for verification&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13820276" author="iamaleksey" created="Tue, 12 Nov 2013 17:44:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lyubent&quot; class=&quot;user-hover&quot; rel=&quot;lyubent&quot;&gt;lyubent&lt;/a&gt; Could you attach a patch for 2.0? Keep in mind that &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5435&quot; title=&quot;Support range tombstones from thrift&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5435&quot;&gt;&lt;del&gt;CASSANDRA-5435&lt;/del&gt;&lt;/a&gt; exists.&lt;/p&gt;</comment>
                            <comment id="13822135" author="lyubent" created="Thu, 14 Nov 2013 03:24:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; This patch is fundamentally the same (maybe I&apos;m missing something) but as far as my testing shows it works for thrift and cql in C* 2.0. &lt;/p&gt;</comment>
                            <comment id="13827014" author="jbellis" created="Tue, 19 Nov 2013 22:24:00 +0000"  >&lt;p&gt;So... whose ball is this? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13827030" author="iamaleksey" created="Tue, 19 Nov 2013 22:30:16 +0000"  >&lt;p&gt;Mine, although Sylvain has already merged 1.2 into 2.0 and trunk some time ago.&lt;/p&gt;</comment>
                            <comment id="13834460" author="iamaleksey" created="Thu, 28 Nov 2013 02:13:54 +0000"  >&lt;p&gt;Oh. My bad.&lt;/p&gt;

&lt;p&gt;The original 1.2 patch was incorrect - we cannot/should not be getting comparator from the first component b/c&lt;br/&gt;
a) It does not import range tombstones with 2+ components correctly and&lt;br/&gt;
b) there is no need to, we already know the comparator from the metadata, and simple comparator.fromString() is enough.&lt;/p&gt;

&lt;p&gt;Backported Sylvain&apos;s merge-commit version from 2.0 instead.&lt;/p&gt;</comment>
                            <comment id="13834462" author="iamaleksey" created="Thu, 28 Nov 2013 02:14:40 +0000"  >&lt;p&gt;(69c1ee96025dd35ed37bce2a2ccc0c2ca5a3dfed)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12613167" name="6316.diff" size="1983" author="lyubent" created="Mon, 11 Nov 2013 15:38:33 +0000"/>
                            <attachment id="12613776" name="6316_cassandra-2.0.diff" size="1670" author="lyubent" created="Thu, 14 Nov 2013 03:24:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[lyubent]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>357572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pn47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>357862</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12325022">1.2.11</customfieldvalue>
    <customfieldvalue id="12325023">2.0.2</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>