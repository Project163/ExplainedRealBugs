<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:40:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5882] Changing column type from int to bigint or vice versa causes decoding errors.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5882</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;cqlsh:dbsite&amp;gt; create table testint (id uuid, bestof bigint, primary key (id) );&lt;br/&gt;
cqlsh:dbsite&amp;gt; insert into testint (id, bestof ) values (49d30f84-a409-4433-ad60-eb9c1a06b7bb, 1376399966);&lt;br/&gt;
cqlsh:dbsite&amp;gt; insert into testint (id, bestof ) values (6cab4798-ad29-4419-bd59-308f9ec3bc44, 1376389800);&lt;br/&gt;
cqlsh:dbsite&amp;gt; insert into testint (id, bestof ) values (685bb9ff-a4fe-4e47-95eb-f6a353d9e179, 1376390400);&lt;br/&gt;
cqlsh:dbsite&amp;gt; insert into testint (id, bestof ) values (a848f832-5ded-4ef7-bf4b-7db561564c57, 1376391000);&lt;br/&gt;
cqlsh:dbsite&amp;gt; select * from testint ;&lt;br/&gt;
 id                                   | bestof&lt;br/&gt;
-------------------------------------&lt;del&gt;+&lt;/del&gt;-----------&lt;br/&gt;
 a848f832-5ded-4ef7-bf4b-7db561564c57 | 1376391000&lt;br/&gt;
 49d30f84-a409-4433-ad60-eb9c1a06b7bb | 1376399966&lt;br/&gt;
 6cab4798-ad29-4419-bd59-308f9ec3bc44 | 1376389800&lt;br/&gt;
 685bb9ff-a4fe-4e47-95eb-f6a353d9e179 | 1376390400&lt;/p&gt;

&lt;p&gt;cqlsh:dbsite&amp;gt; alter table testint alter bestof TYPE int;&lt;br/&gt;
cqlsh:dbsite&amp;gt; select * from testint ;&lt;br/&gt;
 id                                   | bestof&lt;br/&gt;
-------------------------------------&lt;del&gt;+&lt;/del&gt;----------------------------&lt;br/&gt;
 a848f832-5ded-4ef7-bf4b-7db561564c57 |  &apos;\x00\x00\x00\x00R\n\x0fX&apos;&lt;br/&gt;
 49d30f84-a409-4433-ad60-eb9c1a06b7bb |     &apos;\x00\x00\x00\x00R\n2^&apos;&lt;br/&gt;
 6cab4798-ad29-4419-bd59-308f9ec3bc44 | &apos;\x00\x00\x00\x00R\n\n\xa8&apos;&lt;br/&gt;
 685bb9ff-a4fe-4e47-95eb-f6a353d9e179 | &apos;\x00\x00\x00\x00R\n\r\x00&apos;&lt;/p&gt;

&lt;p&gt;Failed to decode value &apos;\x00\x00\x00\x00R\n\x0fX&apos; (for column &apos;bestof&apos;) as int: unpack requires a string argument of length 4&lt;br/&gt;
Failed to decode value &apos;\x00\x00\x00\x00R\n2^&apos; (for column &apos;bestof&apos;) as int: unpack requires a string argument of length 4&lt;br/&gt;
2 more decoding errors suppressed.&lt;/p&gt;


&lt;p&gt;I realize that going from BIGINT to INT would cause overflow if a column contained a number larger than 2^31-1, it is at least technically possible to go in the other direction.  I also understand that rewriting all the data in the correct format would be a very expensive operation on a large column family, but if that&apos;s not something we want to allow we should explicitly disallow changing data types if the table has any rows.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12663433">CASSANDRA-5882</key>
            <summary>Changing column type from int to bigint or vice versa causes decoding errors.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="jblangston@datastax.com">J.B. Langston</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Aug 2013 14:22:24 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:08 +0000</updated>
                            <resolved>Mon, 26 Aug 2013 16:01:12 +0000</resolved>
                                        <fixVersion>1.2.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13746070" author="slebresne" created="Wed, 21 Aug 2013 14:11:19 +0000"  >&lt;p&gt;The reason is that we currently don&apos;t validate anything when a non-PK column type is altered, which is probably a mistake (at least imo). There&apos;s an historical reason for that: thrift doesn&apos;t validate such change either. So in a way, that&apos;s not a new thing: if you change a validator for an incompatible one (which is the case here, int (Int32Type) is not able to decode most value of bigint (IntegerType)), you&apos;ll likely break your client code (which is the case btw, it&apos;s a cqlsh error here, not a server side one). &lt;/p&gt;

&lt;p&gt;So I would personally be in favor of just refusing that kind of change pure and simple. Attaching a simple patch to do that (for CQL3 only since Thou Shalt Not Modify Thrift).&lt;/p&gt;</comment>
                            <comment id="13746074" author="carlyeks" created="Wed, 21 Aug 2013 14:17:57 +0000"  >&lt;p&gt;a couple of misspelled comments: s/let is fly/let it fly/; s/changet/change/&lt;/p&gt;
</comment>
                            <comment id="13750165" author="iamaleksey" created="Mon, 26 Aug 2013 15:56:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13750169" author="slebresne" created="Mon, 26 Aug 2013 16:01:12 +0000"  >&lt;p&gt;Alright, committed (with typo fixed). Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12599197" name="5882.txt" size="2712" author="slebresne" created="Wed, 21 Aug 2013 14:11:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343434</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1n86f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>