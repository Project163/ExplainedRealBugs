<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:54:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9621] Repair of the SystemDistributed keyspace creates a non-trivial amount of memory pressure</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9621</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;When a repair without any particular option is triggered, the &lt;tt&gt;SystemDistributed&lt;/tt&gt; keyspace is repaired for all range, and in particular the &lt;tt&gt;repair_history&lt;/tt&gt; table. For every range, that table is written and flushed (as part of normal repair), meaning that every range triggers the creation of a new 1MB slab region (this also triggers quite a few compactions that also write and flush &lt;tt&gt;compaction_progress&lt;/tt&gt; at every start and end).&lt;/p&gt;

&lt;p&gt;I don&apos;t know how much of a big deal this will be in practice, but I wonder if it&apos;s really useful to repair the &lt;tt&gt;repair_*&lt;/tt&gt; tables by default so maybe we could exclude the SystemDistributed keyspace from default repairs and only repair it if asked explicitly?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12839090">CASSANDRA-9621</key>
            <summary>Repair of the SystemDistributed keyspace creates a non-trivial amount of memory pressure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jun 2015 10:17:10 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:07 +0000</updated>
                            <resolved>Mon, 22 Jun 2015 11:06:26 +0000</resolved>
                                        <fixVersion>2.2.0 rc2</fixVersion>
                    <fixVersion>3.0 alpha 1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14593594" author="thobbs" created="Fri, 19 Jun 2015 16:29:04 +0000"  >&lt;p&gt;Maybe we should skip that keyspace, but &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9491&quot; title=&quot;Inefficient sequential repairs against vnode clusters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9491&quot;&gt;CASSANDRA-9491&lt;/a&gt; is really the root cause that needs to be fixed, I think.  With that fixed, there is less reason to do this.&lt;/p&gt;</comment>
                            <comment id="14593607" author="slebresne" created="Fri, 19 Jun 2015 16:37:16 +0000"  >&lt;p&gt;Yes, though that&apos;s not only a problem for sequential repairs. That is, I could agree that the underlying problem is that we flush for every range, but &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9491&quot; title=&quot;Inefficient sequential repairs against vnode clusters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9491&quot;&gt;CASSANDRA-9491&lt;/a&gt; only has a (partial) solution for sequential repair currently. And since a proper solution to that in all case (including parallel repairs) is probably not coming before the release of 2.2, I&apos;d suggest implementing this to avoid surprise for people upgrading to 2.2. Not that I feel terribly strongly, just feels the safer option to me.&lt;/p&gt;</comment>
                            <comment id="14595328" author="jbellis" created="Mon, 22 Jun 2015 03:58:51 +0000"  >&lt;p&gt;What if we made &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5839&quot; title=&quot;Save repair data to system table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5839&quot;&gt;&lt;del&gt;CASSANDRA-5839&lt;/del&gt;&lt;/a&gt; opt-in only?  Only because skipping repair of system tables feels like a hack that we&apos;re going to undo later.  &quot;Recording repair history is off by default but here&apos;s how you turn it on and it will be on by default in the future&quot; otoh is something we do all the time.&lt;/p&gt;</comment>
                            <comment id="14595479" author="krummas" created="Mon, 22 Jun 2015 08:13:14 +0000"  >&lt;p&gt;patch to only repair system_distributed explicitly here: &lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/9621&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/9621&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What if we made &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5839&quot; title=&quot;Save repair data to system table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5839&quot;&gt;&lt;del&gt;CASSANDRA-5839&lt;/del&gt;&lt;/a&gt; opt-in only?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Even if we do, this would still hurt the people who enable it. Should we do both?&lt;/p&gt;</comment>
                            <comment id="14595491" author="slebresne" created="Mon, 22 Jun 2015 08:26:26 +0000"  >&lt;p&gt;I don&apos;t particularly care if we make &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5839&quot; title=&quot;Save repair data to system table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5839&quot;&gt;&lt;del&gt;CASSANDRA-5839&lt;/del&gt;&lt;/a&gt; opt-in or not, but I do think this issue shouldn&apos;t weight much in that decision. As Markus said, this would still hurt people enabling it and it&apos;s not gonna be clear at all that opting-in for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5839&quot; title=&quot;Save repair data to system table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5839&quot;&gt;&lt;del&gt;CASSANDRA-5839&lt;/del&gt;&lt;/a&gt; buys you into this.&lt;/p&gt;

&lt;p&gt;Anyway, the patch is very simple and I don&apos;t think it&apos;s a big deal if we want to undo it later so I&apos;m not too fussed about this issue but I&apos;m personally +1 on Marcus&apos; patch (though I&apos;d add a comment pointing to this issue so we remember why we&apos;re doing this). &lt;/p&gt;</comment>
                            <comment id="14595777" author="krummas" created="Mon, 22 Jun 2015 11:06:26 +0000"  >&lt;p&gt;ok, committed, lets open a new ticket if we want to make 5839 opt-in&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g9bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>