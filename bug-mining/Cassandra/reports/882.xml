<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:20:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2545] CQL: cqlsh error running batch update commands</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2545</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;b&gt;CQL Test Case&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;//TEST CASE #1
&lt;/span&gt;BEGIN BATCH
UPDATE users SET gender = &lt;span class=&quot;code-quote&quot;&gt;&apos;m&apos;&lt;/span&gt;, birth_year = &lt;span class=&quot;code-quote&quot;&gt;&apos;1981&apos;&lt;/span&gt; WHERE KEY = &lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt;;
UPDATE users SET gender = &lt;span class=&quot;code-quote&quot;&gt;&apos;m&apos;&lt;/span&gt;, birth_year = &lt;span class=&quot;code-quote&quot;&gt;&apos;1982&apos;&lt;/span&gt; WHERE KEY = &lt;span class=&quot;code-quote&quot;&gt;&apos;user2&apos;&lt;/span&gt;;
UPDATE users SET gender = &lt;span class=&quot;code-quote&quot;&gt;&apos;m&apos;&lt;/span&gt;, birth_year = &lt;span class=&quot;code-quote&quot;&gt;&apos;1983&apos;&lt;/span&gt; WHERE KEY = &lt;span class=&quot;code-quote&quot;&gt;&apos;user3&apos;&lt;/span&gt;;
APPLY BATCH	

&lt;span class=&quot;code-comment&quot;&gt;//TEST CASE #2
&lt;/span&gt;BEGIN BATCH USING CONSISTENCY ZERO
UPDATE users SET state = &lt;span class=&quot;code-quote&quot;&gt;&apos;TX&apos;&lt;/span&gt; WHERE KEY = &lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt;;
UPDATE users SET state = &lt;span class=&quot;code-quote&quot;&gt;&apos;TX&apos;&lt;/span&gt; WHERE KEY = &lt;span class=&quot;code-quote&quot;&gt;&apos;user2&apos;&lt;/span&gt;;
UPDATE users SET state = &lt;span class=&quot;code-quote&quot;&gt;&apos;TX&apos;&lt;/span&gt; WHERE KEY = &lt;span class=&quot;code-quote&quot;&gt;&apos;user3&apos;&lt;/span&gt;;
APPLY BATCH	


&lt;span class=&quot;code-comment&quot;&gt;//ERROR
&lt;/span&gt;Bad Request: line 0:-1 mismatched input &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;EOF&amp;gt;&apos;&lt;/span&gt; expecting K_APPLY
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Test Setup&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE COLUMNFAMILY users (
  KEY varchar PRIMARY KEY,
  password varchar,
  gender varchar,
  session_token varchar,
  state varchar,
  birth_year bigint);

INSERT INTO users (KEY, password, gender, state, birth_year) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;user1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;f&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;CA&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1971&apos;&lt;/span&gt;);
INSERT INTO users (KEY, password, gender, state, birth_year) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;user2&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;f&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;CA&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1972&apos;&lt;/span&gt;);
INSERT INTO users (KEY, password, gender, state, birth_year) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;user3&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;ch@ngem3&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;f&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;CA&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1973&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Documented Syntax&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;BEGIN BATCH &lt;span class=&quot;error&quot;&gt;&amp;#91;USING &amp;lt;CONSISTENCY&amp;gt;&amp;#93;&lt;/span&gt;&lt;br/&gt;
UPDATE CF1 SET name1 = value1, name2 = value2 WHERE KEY = keyname1;&lt;br/&gt;
UPDATE CF1 SET name3 = value3 WHERE KEY = keyname2;&lt;br/&gt;
UPDATE CF2 SET name4 = value4, name5 = value5 WHERE KEY = keyname3;&lt;br/&gt;
APPLY BATCH&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12505019">CASSANDRA-2545</key>
            <summary>CQL: cqlsh error running batch update commands</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="urandom">Eric Evans</assignee>
                                    <reporter username="cdaw">Cathy Daw</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 Apr 2011 00:55:21 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:01 +0000</updated>
                            <resolved>Wed, 27 Apr 2011 02:18:35 +0000</resolved>
                                                            <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13023488" author="urandom" created="Sat, 23 Apr 2011 02:32:27 +0000"  >&lt;p&gt;This is a cqlsh bug.  The attached patch is an improvement, but could probably be improved upon.&lt;/p&gt;</comment>
                            <comment id="13023490" author="jbellis" created="Sat, 23 Apr 2011 02:39:35 +0000"  >&lt;p&gt;i don&apos;t think &quot;cqlsh requires commands to end with semicolon&quot; is a bug&lt;/p&gt;</comment>
                            <comment id="13023491" author="urandom" created="Sat, 23 Apr 2011 02:52:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;i don&apos;t think &quot;cqlsh requires commands to end with semicolon&quot; is a bug&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s not; That&apos;s not the bug.&lt;/p&gt;

&lt;p&gt;What&apos;s buggy is the way that a multi-line statement is parsed from the input.  The attached patch should take care of it.  It does not require the semi-colon for the individual UPDATE statements (APPLY BATCH is the terminator here), but using them won&apos;t hurt anything.&lt;/p&gt;</comment>
                            <comment id="13025384" author="cdaw" created="Tue, 26 Apr 2011 19:05:19 +0000"  >&lt;p&gt;The patch works fine.&lt;/p&gt;</comment>
                            <comment id="13025570" author="urandom" created="Wed, 27 Apr 2011 02:18:35 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="13025591" author="hudson" created="Wed, 27 Apr 2011 03:41:23 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #44 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Cassandra-0.8/44/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/Cassandra-0.8/44/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2545&quot; title=&quot;CQL: cqlsh error running batch update commands&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2545&quot;&gt;&lt;del&gt;CASSANDRA-2545&lt;/del&gt;&lt;/a&gt; also consider APPLY BATCH for terminating statements&lt;/p&gt;

&lt;p&gt;Patch by eevans for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2545&quot; title=&quot;CQL: cqlsh error running batch update commands&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2545&quot;&gt;&lt;del&gt;CASSANDRA-2545&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12477184" name="ASF.LICENSE.NOT.GRANTED--v2-0001-CASSANDRA-2545-also-consider-APPLY-BATCH-for-terminati.txt" size="1715" author="urandom" created="Sat, 23 Apr 2011 02:47:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20688</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gbzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93374</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>