<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:40:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5383] Windows 7 deleting/renaming files problem</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5383</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Two unit tests are failing on Windows 7 due to errors in renaming/deleting files:&lt;/p&gt;


&lt;p&gt;org.apache.cassandra.db.ColumnFamilyStoreTest: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Testsuite: org.apache.cassandra.db.ColumnFamilyStoreTest
    [junit] Tests run: 27, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 13.904 sec
    [junit] 
    [junit] ------------- Standard Error -----------------
    [junit] ERROR 13:06:46,058 Unable to delete build\test\cassandra\data\Keyspace1\Indexed2\Keyspace1-Indexed2.birthdate_index-ja-1-Data.db (it will be removed on server restart; we&apos;ll also retry after GC)
    [junit] ERROR 13:06:48,508 Fatal exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[NonPeriodicTasks:1,5,main]
    [junit] java.lang.RuntimeException: Tried to hard link to file that does not exist build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ja-7-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.createHardLink(FileUtils.java:72)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableReader.createLinks(SSTableReader.java:1057)
    [junit] 	at org.apache.cassandra.db.DataTracker$1.run(DataTracker.java:168)
    [junit] 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    [junit] 	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    [junit] 	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    [junit] 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
    [junit] 	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
    [junit] 	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    [junit] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    [junit] 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
    [junit] ------------- ---------------- ---------------
    [junit] Testcase: testSliceByNamesCommandOldMetatada(org.apache.cassandra.db.ColumnFamilyStoreTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ja-6-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ja-6-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ja-6-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ja-6-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStore.loadNewSSTables(ColumnFamilyStore.java:589)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStoreTest.testSliceByNamesCommandOldMetatada(ColumnFamilyStoreTest.java:885)
    [junit] 
    [junit] 
    [junit] Testcase: testRemoveUnifinishedCompactionLeftovers(org.apache.cassandra.db.ColumnFamilyStoreTest):	Caused an ERROR
    [junit] java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra\build\test\cassandra\data\Keyspace1\Standard3\Keyspace1-Standard3-ja-2-Data.db
    [junit] FSWriteError in build\test\cassandra\data\Keyspace1\Standard3\Keyspace1-Standard3-ja-2-Data.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:112)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:103)
    [junit] 	at org.apache.cassandra.io.sstable.SSTable.delete(SSTable.java:139)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStore.removeUnfinishedCompactionLeftovers(ColumnFamilyStore.java:507)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStoreTest.testRemoveUnifinishedCompactionLeftovers(ColumnFamilyStoreTest.java:1246)
    [junit] Caused by: java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra\build\test\cassandra\data\Keyspace1\Standard3\Keyspace1-Standard3-ja-2-Data.db
    [junit] 
    [junit] 
    [junit] Test org.apache.cassandra.db.ColumnFamilyStoreTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;org.apache.cassandra.db.ScrubTest:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Testcase: testScrubFile(org.apache.cassandra.db.ScrubTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\Super5\Keyspace1-Super5-f-2-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Super5\Keyspace1-Super5-f-2-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\Super5\Keyspace1-Super5-f-2-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Super5\Keyspace1-Super5-f-2-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStore.loadNewSSTables(ColumnFamilyStore.java:589)
    [junit] 	at org.apache.cassandra.db.ScrubTest.testScrubFile(ScrubTest.java:94)
    [junit] 
    [junit] 
    [junit] Testcase: testScubOutOfOrder(org.apache.cassandra.db.ScrubTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\Standard3\Keyspace1-Standard3-ia-1-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Standard3\Keyspace1-Standard3-ia-1-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\Standard3\Keyspace1-Standard3-ia-1-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Standard3\Keyspace1-Standard3-ia-1-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStore.loadNewSSTables(ColumnFamilyStore.java:589)
    [junit] 	at org.apache.cassandra.db.ScrubTest.testScubOutOfOrder(ScrubTest.java:201)
    [junit] 
    [junit] 
    [junit] Test org.apache.cassandra.db.ScrubTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reproduced in a Windows 7 VM:&lt;br/&gt;
java 1.6.0_43-b01&lt;br/&gt;
ant 1.9.0&lt;br/&gt;
C* trunk&lt;br/&gt;
run &apos;ant clean test&apos;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12638924">CASSANDRA-5383</key>
            <summary>Windows 7 deleting/renaming files problem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="enigmacurry">Ryan McGuire</reporter>
                        <labels>
                            <label>qa-resolved</label>
                    </labels>
                <created>Mon, 25 Mar 2013 17:36:37 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:15 +0000</updated>
                            <resolved>Fri, 4 Oct 2013 07:45:01 +0000</resolved>
                                        <fixVersion>2.0.2</fixVersion>
                                    <component>Legacy/Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13612891" author="jbellis" created="Mon, 25 Mar 2013 17:41:25 +0000"  >&lt;p&gt;The mutateLevel problem looks like what I predicted &amp;#8211; Windows won&apos;t let you rename over an existing file.&lt;/p&gt;</comment>
                            <comment id="13612893" author="jbellis" created="Mon, 25 Mar 2013 17:41:57 +0000"  >&lt;p&gt;(Not sure about CFST...  maybe we should take advantage of Java 7 and switch to using the Path api, which will give us better error messages.)&lt;/p&gt;</comment>
                            <comment id="13613118" author="enigmacurry" created="Mon, 25 Mar 2013 21:01:40 +0000"  >&lt;p&gt;I had a problem that prevented me from running the full test suite, I&apos;ve resolved that and found several more errors that look similar to my eyes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Testcase: org.apache.cassandra.config.CFMetaDataTest:	Caused an ERROR
    [junit] java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\data
    [junit] FSWriteError in build\test\cassandra\data
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:112)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:340)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanup(SchemaLoader.java:399)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanupAndLeaveDirs(SchemaLoader.java:374)
    [junit] 	at org.apache.cassandra.SchemaLoader.loadSchema(SchemaLoader.java:65)
    [junit] 	at org.apache.cassandra.SchemaLoader.loadSchema(SchemaLoader.java:59)
    [junit] Caused by: java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\data
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Testcase: org.apache.cassandra.db.RemoveSubColumnTest:	Caused an ERROR
    [junit] java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\data\Keyspace4
    [junit] FSWriteError in build\test\cassandra\data\Keyspace4
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:112)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:340)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:336)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanup(SchemaLoader.java:399)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanupAndLeaveDirs(SchemaLoader.java:374)
    [junit] 	at org.apache.cassandra.SchemaLoader.loadSchema(SchemaLoader.java:65)
    [junit] 	at org.apache.cassandra.SchemaLoader.loadSchema(SchemaLoader.java:59)
    [junit] Caused by: java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\data\Keyspace4
    [junit] 
    [junit] 
    [junit] Testcase: org.apache.cassandra.db.RemoveSubColumnTest:	Caused an ERROR
    [junit] &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    [junit] java.lang.NullPointerException
    [junit] 	at org.apache.cassandra.gms.Gossiper.stop(Gossiper.java:1084)
    [junit] 	at org.apache.cassandra.SchemaLoader.stopGossiper(SchemaLoader.java:99)
    [junit] 
    [junit] 
    [junit] Test org.apache.cassandra.db.RemoveSubColumnTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Testsuite: org.apache.cassandra.db.compaction.LegacyLeveledManifestTest
    [junit] Tests run: 3, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 2.698 sec
    [junit] 
    [junit] Testcase: doMigrationTest(org.apache.cassandra.db.compaction.LegacyLeveledManifestTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\legacyleveled\Keyspace1-legacyleveled-hf-2-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\legacyleveled\Keyspace1-legacyleveled-hf-2-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\legacyleveled\Keyspace1-legacyleveled-hf-2-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\legacyleveled\Keyspace1-legacyleveled-hf-2-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.compaction.LegacyLeveledManifest.migrateManifests(LegacyLeveledManifest.java:102)
    [junit] 	at org.apache.cassandra.db.compaction.LegacyLeveledManifestTest.doMigrationTest(LegacyLeveledManifestTest.java:50)
    [junit] 
    [junit] 
    [junit] Testcase: validateSSTableMetadataTest(org.apache.cassandra.db.compaction.LegacyLeveledManifestTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\legacyleveled\Keyspace1-legacyleveled-hf-2-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\legacyleveled\Keyspace1-legacyleveled-hf-2-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\legacyleveled\Keyspace1-legacyleveled-hf-2-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\legacyleveled\Keyspace1-legacyleveled-hf-2-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.compaction.LegacyLeveledManifest.migrateManifests(LegacyLeveledManifest.java:102)
    [junit] 	at org.apache.cassandra.db.compaction.LegacyLeveledManifestTest.validateSSTableMetadataTest(LegacyLeveledManifestTest.java:74)
    [junit] 
    [junit] 
    [junit] Test org.apache.cassandra.db.compaction.LegacyLeveledManifestTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Testsuite: org.apache.cassandra.db.compaction.LeveledCompactionStrategyTest
    [junit] Tests run: 3, Failures: 1, Errors: 1, Skipped: 0, Time elapsed: 20.217 sec
    [junit] 
    [junit] Testcase: testValidationMultipleSSTablePerLevel(org.apache.cassandra.db.compaction.LeveledCompactionStrategyTest):	FAILED
    [junit] &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    [junit] junit.framework.AssertionFailedError
    [junit] 	at org.apache.cassandra.db.compaction.LeveledCompactionStrategyTest.testValidationMultipleSSTablePerLevel(LeveledCompactionStrategyTest.java:89)
    [junit] 
    [junit] 
    [junit] Testcase: testMutateLevel(org.apache.cassandra.db.compaction.LeveledCompactionStrategyTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\StandardLeveled\Keyspace1-StandardLeveled-ja-60-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\StandardLeveled\Keyspace1-StandardLeveled-ja-60-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\StandardLeveled\Keyspace1-StandardLeveled-ja-60-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\StandardLeveled\Keyspace1-StandardLeveled-ja-60-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledCompactionStrategyTest.testMutateLevel(LeveledCompactionStrategyTest.java:180)
    [junit] 
    [junit] 
    [junit] Test org.apache.cassandra.db.compaction.LeveledCompactionStrategyTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Testsuite: org.apache.cassandra.dht.OrderPreservingPartitionerTest
    [junit] Tests run: 7, Failures: 0, Errors: 6, Skipped: 0, Time elapsed: 1.716 sec
    [junit] 
    [junit] Testcase: testMidpoint(org.apache.cassandra.dht.OrderPreservingPartitionerTest):	Caused an ERROR
    [junit] java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] FSWriteError in build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:112)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:340)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:336)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanup(SchemaLoader.java:388)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanupAndLeaveDirs(SchemaLoader.java:374)
    [junit] 	at org.apache.cassandra.dht.OrderPreservingPartitionerTest.initPartitioner(OrderPreservingPartitionerTest.java:31)
    [junit] 	at org.apache.cassandra.dht.PartitionerTestCase.clean(PartitionerTestCase.java:39)
    [junit] Caused by: java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 
    [junit] 
    [junit] Testcase: testMidpointMinimum(org.apache.cassandra.dht.OrderPreservingPartitionerTest):	Caused an ERROR
    [junit] java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] FSWriteError in build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:112)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:340)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:336)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanup(SchemaLoader.java:388)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanupAndLeaveDirs(SchemaLoader.java:374)
    [junit] 	at org.apache.cassandra.dht.OrderPreservingPartitionerTest.initPartitioner(OrderPreservingPartitionerTest.java:31)
    [junit] 	at org.apache.cassandra.dht.PartitionerTestCase.clean(PartitionerTestCase.java:39)
    [junit] Caused by: java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 
    [junit] 
    [junit] Testcase: testMidpointWrapping(org.apache.cassandra.dht.OrderPreservingPartitionerTest):	Caused an ERROR
    [junit] java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] FSWriteError in build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:112)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:340)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:336)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanup(SchemaLoader.java:388)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanupAndLeaveDirs(SchemaLoader.java:374)
    [junit] 	at org.apache.cassandra.dht.OrderPreservingPartitionerTest.initPartitioner(OrderPreservingPartitionerTest.java:31)
    [junit] 	at org.apache.cassandra.dht.PartitionerTestCase.clean(PartitionerTestCase.java:39)
    [junit] Caused by: java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 
    [junit] 
    [junit] Testcase: testTokenFactoryBytes(org.apache.cassandra.dht.OrderPreservingPartitionerTest):	Caused an ERROR
    [junit] java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] FSWriteError in build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:112)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:340)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:336)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanup(SchemaLoader.java:388)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanupAndLeaveDirs(SchemaLoader.java:374)
    [junit] 	at org.apache.cassandra.dht.OrderPreservingPartitionerTest.initPartitioner(OrderPreservingPartitionerTest.java:31)
    [junit] 	at org.apache.cassandra.dht.PartitionerTestCase.clean(PartitionerTestCase.java:39)
    [junit] Caused by: java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 
    [junit] 
    [junit] Testcase: testTokenFactoryStrings(org.apache.cassandra.dht.OrderPreservingPartitionerTest):	Caused an ERROR
    [junit] java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] FSWriteError in build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:112)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:340)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:336)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanup(SchemaLoader.java:388)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanupAndLeaveDirs(SchemaLoader.java:374)
    [junit] 	at org.apache.cassandra.dht.OrderPreservingPartitionerTest.initPartitioner(OrderPreservingPartitionerTest.java:31)
    [junit] 	at org.apache.cassandra.dht.PartitionerTestCase.clean(PartitionerTestCase.java:39)
    [junit] Caused by: java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 
    [junit] 
    [junit] Testcase: testDescribeOwnership(org.apache.cassandra.dht.OrderPreservingPartitionerTest):	Caused an ERROR
    [junit] java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] FSWriteError in build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteWithConfirm(FileUtils.java:112)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:340)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.deleteRecursive(FileUtils.java:336)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanup(SchemaLoader.java:388)
    [junit] 	at org.apache.cassandra.SchemaLoader.cleanupAndLeaveDirs(SchemaLoader.java:374)
    [junit] 	at org.apache.cassandra.dht.OrderPreservingPartitionerTest.initPartitioner(OrderPreservingPartitionerTest.java:31)
    [junit] 	at org.apache.cassandra.dht.PartitionerTestCase.clean(PartitionerTestCase.java:39)
    [junit] Caused by: java.io.IOException: Failed to delete c:\Users\Ryan\git\cassandra2\build\test\cassandra\commitlog\CommitLog-3-1364244476201.log
    [junit] 
    [junit] 
    [junit] Test org.apache.cassandra.dht.OrderPreservingPartitionerTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Testsuite: org.apache.cassandra.io.sstable.SSTableReaderTest
    [junit] Tests run: 8, Failures: 0, Errors: 3, Skipped: 0, Time elapsed: 11.607 sec
    [junit] 
    [junit] ------------- Standard Error -----------------
    [junit]  WARN 16:49:23,669 setting live ratio to maximum of 64.0 instead of 97.26984126984127
    [junit]  WARN 16:49:24,542 setting live ratio to maximum of 64.0 instead of 79.42857142857143
    [junit] ------------- ---------------- ---------------
    [junit] Testcase: testPersistentStatistics(org.apache.cassandra.io.sstable.SSTableReaderTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ja-2-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ja-2-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ja-2-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ja-2-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStore.loadNewSSTables(ColumnFamilyStore.java:589)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableReaderTest.clearAndLoad(SSTableReaderTest.java:170)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableReaderTest.testPersistentStatistics(SSTableReaderTest.java:163)
    [junit] 
    [junit] 
    [junit] Testcase: testPersistentStatisticsWithSecondaryIndex(org.apache.cassandra.io.sstable.SSTableReaderTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\Indexed1\Keyspace1-Indexed1.626972746864617465-ja-1-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Indexed1\Keyspace1-Indexed1.626972746864617465-ja-1-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\Indexed1\Keyspace1-Indexed1.626972746864617465-ja-1-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Indexed1\Keyspace1-Indexed1.626972746864617465-ja-1-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStore.loadNewSSTables(ColumnFamilyStore.java:589)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableReaderTest.clearAndLoad(SSTableReaderTest.java:170)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableReaderTest.assertIndexQueryWorks(SSTableReaderTest.java:324)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableReaderTest.testPersistentStatisticsWithSecondaryIndex(SSTableReaderTest.java:220)
    [junit] 
    [junit] 
    [junit] Testcase: testPersistentStatisticsFromOlderIndexedSSTable(org.apache.cassandra.io.sstable.SSTableReaderTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\Indexed1\Keyspace1-Indexed1.626972746864617465-ja-1-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Indexed1\Keyspace1-Indexed1.626972746864617465-ja-1-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\Indexed1\Keyspace1-Indexed1.626972746864617465-ja-1-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\Indexed1\Keyspace1-Indexed1.626972746864617465-ja-1-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStore.loadNewSSTables(ColumnFamilyStore.java:589)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableReaderTest.clearAndLoad(SSTableReaderTest.java:170)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableReaderTest.assertIndexQueryWorks(SSTableReaderTest.java:324)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableReaderTest.testPersistentStatisticsFromOlderIndexedSSTable(SSTableReaderTest.java:248)
    [junit] 
    [junit] 
    [junit] Test org.apache.cassandra.io.sstable.SSTableReaderTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Testsuite: org.apache.cassandra.io.sstable.SSTableSimpleWriterTest
    [junit] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 8.72 sec
    [junit] 
    [junit] Testcase: testSSTableSimpleUnsortedWriter(org.apache.cassandra.io.sstable.SSTableSimpleWriterTest):	Caused an ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\StandardInteger1\Keyspace1-StandardInteger1-ja-1-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\StandardInteger1\Keyspace1-StandardInteger1-ja-1-Statistics.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\StandardInteger1\Keyspace1-StandardInteger1-ja-1-Statistics.db-tmp to build\test\cassandra\data\Keyspace1\StandardInteger1\Keyspace1-StandardInteger1-ja-1-Statistics.db
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:133)
    [junit] 	at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:122)
    [junit] 	at org.apache.cassandra.db.compaction.LeveledManifest.mutateLevel(LeveledManifest.java:575)
    [junit] 	at org.apache.cassandra.db.ColumnFamilyStore.loadNewSSTables(ColumnFamilyStore.java:589)
    [junit] 	at org.apache.cassandra.io.sstable.SSTableSimpleWriterTest.testSSTableSimpleUnsortedWriter(SSTableSimpleWriterTest.java:89)
    [junit] 
    [junit] 
    [junit] Test org.apache.cassandra.io.sstable.SSTableSimpleWriterTest FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13614614" author="enigmacurry" created="Tue, 26 Mar 2013 22:13:18 +0000"  >&lt;p&gt;I cannot currently run a full &apos;ant test&apos; on Windows due to a bug in ant/junit on windows #5388&lt;/p&gt;</comment>
                            <comment id="13615086" author="krummas" created="Wed, 27 Mar 2013 10:18:04 +0000"  >&lt;p&gt;not yet tested on windows due to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5388&quot; title=&quot;Unit tests fail due to ant/junit problem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5388&quot;&gt;&lt;del&gt;CASSANDRA-5388&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13668190" author="krummas" created="Tue, 28 May 2013 08:59:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enigmacurry&quot; class=&quot;user-hover&quot; rel=&quot;enigmacurry&quot;&gt;enigmacurry&lt;/a&gt; - could you test this now that &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5388&quot; title=&quot;Unit tests fail due to ant/junit problem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5388&quot;&gt;&lt;del&gt;CASSANDRA-5388&lt;/del&gt;&lt;/a&gt; is fixed?&lt;/p&gt;</comment>
                            <comment id="13668421" author="enigmacurry" created="Tue, 28 May 2013 16:33:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; I can&apos;t get this patch to apply on the current trunk (It did back in March when I first tried this.)&lt;/p&gt;

&lt;p&gt;It does apply to cassandra-1.2, but it doesn&apos;t work there:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ ant clean test -Dtest.name=ColumnFamilyStoreTest
[...]

    [junit] Testsuite: org.apache.cassandra.db.ColumnFamilyStoreTest
    [junit] Tests run: 27, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 9.162 sec
    [junit]
    [junit] Testcase: testSliceByNamesCommandOldMetatada(org.apache.cassandra.db.ColumnFamilyStoreTest):        Caused a
n ERROR
    [junit] Failed to rename build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ic-8-Index.db to build\te
st\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ic-9-Index.db
    [junit] java.lang.RuntimeException: Failed to rename build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standar
d1-ic-8-Index.db to build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ic-9-Index.db
    [junit]     at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:155)
    [junit]     at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:139)
    [junit]     at org.apache.cassandra.io.sstable.SSTableWriter.rename(SSTableWriter.java:409)
    [junit]     at org.apache.cassandra.db.ColumnFamilyStore.loadNewSSTables(ColumnFamilyStore.java:504)
    [junit]     at org.apache.cassandra.db.ColumnFamilyStoreTest.testSliceByNamesCommandOldMetatada(ColumnFamilyStoreTes
t.java:925)
    [junit] Caused by: java.nio.file.FileSystemException: build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standa
rd1-ic-8-Index.db -&amp;gt; build\test\cassandra\data\Keyspace1\Standard1\Keyspace1-Standard1-ic-9-Index.db: The process cannot
 access the file because it is being used by another process.
    [junit]
    [junit]     at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:86)
    [junit]     at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
    [junit]     at sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:301)
    [junit]     at sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.java:286)
    [junit]     at java.nio.file.Files.move(Files.java:1345)
    [junit]     at org.apache.cassandra.io.util.FileUtils.atomicMoveWithFallback(FileUtils.java:169)
    [junit]     at org.apache.cassandra.io.util.FileUtils.renameWithConfirm(FileUtils.java:151)
    [junit]
    [junit]
    [junit] Test org.apache.cassandra.db.ColumnFamilyStoreTest FAILED

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13668546" author="krummas" created="Tue, 28 May 2013 18:47:45 +0000"  >&lt;p&gt;rebased patch, probably wont work either though&lt;/p&gt;

&lt;p&gt;the error is quite strange - had a quick look and the files should all be closed before renaming...&lt;/p&gt;</comment>
                            <comment id="13668585" author="enigmacurry" created="Tue, 28 May 2013 19:24:50 +0000"  >&lt;p&gt;Uploaded test_log.5383.patch_v2.log.txt&lt;/p&gt;

&lt;p&gt;This log is the entire test suite run against trunk with the v2 patch. Windows 7, java 1.7.0_17 64bit&lt;/p&gt;</comment>
                            <comment id="13672893" author="krummas" created="Mon, 3 Jun 2013 08:32:28 +0000"  >&lt;p&gt;im stumped (and cant really debug since i dont own a windows machine)&lt;/p&gt;

&lt;p&gt;anyone with windows skills want to take a look?&lt;/p&gt;</comment>
                            <comment id="13675711" author="krummas" created="Wed, 5 Jun 2013 08:45:43 +0000"  >&lt;p&gt;hacks around the problem by deleting the Statistics file on windows before moving&lt;/p&gt;

&lt;p&gt;could in cases end up without a metadata file on windows&lt;/p&gt;</comment>
                            <comment id="13677500" author="enigmacurry" created="Thu, 6 Jun 2013 21:00:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; Is the new patch (0001-&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5383&quot; title=&quot;Windows 7 deleting/renaming files problem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5383&quot;&gt;&lt;del&gt;CASSANDRA-5383&lt;/del&gt;&lt;/a&gt;-cant-move-a-file-on-top-of-another-fi.patch) meant to be applied on top of the v2 patch? &lt;/p&gt;

&lt;p&gt;I ran it that way and attached v2+cant-move-file-patch.log. I&apos;m still seeing numberous FSWriteErrors.&lt;/p&gt;</comment>
                            <comment id="13677521" author="krummas" created="Thu, 6 Jun 2013 21:16:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enigmacurry&quot; class=&quot;user-hover&quot; rel=&quot;enigmacurry&quot;&gt;enigmacurry&lt;/a&gt; no the last patch should be applied alone, it is just a hack around the problem, not being able to replace files in windows&lt;/p&gt;</comment>
                            <comment id="13677553" author="enigmacurry" created="Thu, 6 Jun 2013 21:46:55 +0000"  >&lt;p&gt;OK, I reran it with just the 0001-&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5383&quot; title=&quot;Windows 7 deleting/renaming files problem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5383&quot;&gt;&lt;del&gt;CASSANDRA-5383&lt;/del&gt;&lt;/a&gt;-cant-move-a-file-on-top-of-another-fi.patch applied to trunk. Attached cant_move_file_patch.log. I&apos;m still seeing FSWriteErrors.&lt;/p&gt;</comment>
                            <comment id="13685034" author="krummas" created="Mon, 17 Jun 2013 06:57:07 +0000"  >&lt;p&gt;those errors are not related to the mutateLevel issue anymore - mutatelevel only touches the *-Statistics.db files (and those are not mentioned in the logs with the latest patch it seems)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; got any idea what these are? seems we are not closing files before trying to rename them?&lt;/p&gt;</comment>
                            <comment id="13777261" author="krummas" created="Wed, 25 Sep 2013 08:16:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; wdyt?&lt;/p&gt;</comment>
                            <comment id="13777545" author="jbellis" created="Wed, 25 Sep 2013 14:22:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;seems we are not closing files before trying to rename them?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s what it looks like, but damned if I know why.&lt;/p&gt;

&lt;p&gt;We should at least get the java7 refactoring committed though...&lt;/p&gt;</comment>
                            <comment id="13785034" author="krummas" created="Thu, 3 Oct 2013 12:19:09 +0000"  >&lt;p&gt;rebased against trunk, both starts using the java7 apis and removes a file before moving another file on top of it in windows&lt;/p&gt;</comment>
                            <comment id="13785290" author="jbellis" created="Thu, 3 Oct 2013 15:44:20 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13785976" author="krummas" created="Fri, 4 Oct 2013 07:45:01 +0000"  >&lt;p&gt;commited!&lt;/p&gt;</comment>
                            <comment id="13807015" author="andie78" created="Mon, 28 Oct 2013 17:59:43 +0000"  >&lt;p&gt;Release 2.0.2 still not working under Win7 32-bit with Java build 1.7.0_45-b18. system.log:&lt;br/&gt;
&quot;SSTableDeletingTask.java (line 81) Unable to delete D:\Programme\cassandra\data\nieste\nfiles\nieste-nfiles-jb-2387-Data.db (it will be removed on server restart; we&apos;ll also retry after GC&quot;. After heavy data changing (update data every 3 - 10 sec) up to 24.000 files in nfiles (data) folder and cassandra crashes. I tried LZ4Compressor, SnappyCompressor, DeflateCompressor and No Compression. I also tried Snapshot v2.1 last week without success. Is there a way to reduce frequency of writing sstables (new files) until issue is fixed? Rarely changed CFs are not affected.&lt;/p&gt;</comment>
                            <comment id="13997694" author="cmessaoud" created="Wed, 14 May 2014 16:01:55 +0000"  >&lt;p&gt;Hi, i am having the delete file problem on Windows 7, i downloaded your 5383-v3.patch fix, but don&apos;t know how to apply it onto my Cassandra platform. Anyone can shed some light on how to do that please ? Thanks&lt;/p&gt;</comment>
                            <comment id="14589504" author="andie78" created="Wed, 17 Jun 2015 08:55:07 +0000"  >&lt;p&gt;I put it manually into the source:&lt;br/&gt;
/src/org/apache/cassandra/io/util/RandomAccessReader.java&lt;br/&gt;
Put (overwrite) the finalizer there.&lt;/p&gt;

&lt;p&gt;To avoid unnecessary logs after patching u can un-comment the warning (logger.error) in /sstable/SSTableDeletingTask.java&lt;/p&gt;

&lt;p&gt;To build u need maven (I use 3.0.5) and ant (1.9.2) and an internet-connection. I have to use ant on a dedicated server in front of the proxy since I couldn&apos;t get proxy-settings working in ant.&lt;br/&gt;
After the modifications u can type &quot;ant jar&quot; if u just need the patched jar(s). &quot;ant release&quot; builds u the compressed bin-package.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12639209">CASSANDRA-5388</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12534818">CASSANDRA-3613</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12677050">CASSANDRA-6283</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12586278" name="0001-CASSANDRA-5383-cant-move-a-file-on-top-of-another-fi.patch" size="4127" author="marcuse" created="Wed, 5 Jun 2013 08:45:43 +0000"/>
                            <attachment id="12585061" name="0001-CASSANDRA-5383-v2.patch" size="7540" author="marcuse" created="Tue, 28 May 2013 18:47:45 +0000"/>
                            <attachment id="12575685" name="0001-use-Java7-apis-for-deleting-and-moving-files-and-cre.patch" size="9108" author="marcuse" created="Wed, 27 Mar 2013 10:18:04 +0000"/>
                            <attachment id="12606575" name="5383-v3.patch" size="8588" author="marcuse" created="Thu, 3 Oct 2013 12:19:09 +0000"/>
                            <attachment id="12585066" name="5383_patch_v2_system.log" size="10389922" author="enigmacurry" created="Tue, 28 May 2013 19:40:24 +0000"/>
                            <attachment id="12586595" name="cant_move_file_patch.log" size="55270" author="enigmacurry" created="Thu, 6 Jun 2013 21:46:55 +0000"/>
                            <attachment id="12585065" name="test_log.5383.patch_v2.log.txt" size="64301" author="enigmacurry" created="Tue, 28 May 2013 19:24:50 +0000"/>
                            <attachment id="12586585" name="v2+cant_move_file_patch.log" size="67286" author="enigmacurry" created="Thu, 6 Jun 2013 21:00:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319394</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j3yf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>enigmacurry</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>