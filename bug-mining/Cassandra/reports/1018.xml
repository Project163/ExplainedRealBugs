<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:22:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2912] CQL ignores client timestamp for full row deletion</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2912</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description></description>
                <environment></environment>
        <key id="12514451">CASSANDRA-2912</key>
            <summary>CQL ignores client timestamp for full row deletion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                            <label>cql</label>
                    </labels>
                <created>Mon, 18 Jul 2011 14:46:01 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:55 +0000</updated>
                            <resolved>Wed, 20 Jul 2011 15:54:25 +0000</resolved>
                                        <fixVersion>0.8.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13067101" author="jbellis" created="Mon, 18 Jul 2011 16:02:16 +0000"  >&lt;p&gt;can you add a test for this?&lt;/p&gt;</comment>
                            <comment id="13067574" author="slebresne" created="Tue, 19 Jul 2011 08:22:01 +0000"  >&lt;p&gt;Turns out setting timestamp for DELETE wasn&apos;t working at all anyway because the parser wasn&apos;t allowing it. New attached patch fixes this and add tests for all of that.&lt;/p&gt;</comment>
                            <comment id="13067919" author="xedin" created="Tue, 19 Jul 2011 19:49:06 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;usingClauseDelete[Attributes attrs]
    : K_USING usingClauseDeleteObjective[attrs] ( K_AND? usingClauseDeleteObjective[attrs] )*
    ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This means that we allow user to use multiple number of usingClauseDeleteObjective statements, any motivation behind that I&apos;m not getting?&lt;/p&gt;</comment>
                            <comment id="13067931" author="slebresne" created="Tue, 19 Jul 2011 20:11:27 +0000"  >&lt;p&gt;A usingClauseDeleteObject is either TIMESTAMP or CONSISTENCY, so you at least want to allow setting both of them. Now if the question was why * instead of ? at the end, then it&apos;s mostly because I copied/pasted/modified usingClause where the * didn&apos;t seem to be a problem. I kind of think that having a * even if more than 2 doesn&apos;t make much sense is no big deal and will avoid, when we add a third possible usingClauseDeleteObjective, to be limited to 2 clauses just because we forgot that it was limited to 2 previously. But I don&apos;t really feel strongly about that.&lt;/p&gt;</comment>
                            <comment id="13067936" author="xedin" created="Tue, 19 Jul 2011 20:20:02 +0000"  >&lt;p&gt;I&apos;m asking because that also means that user will be able to specify as many timestamps and consistency levels as he wants, we will need to split usingClauseDeleteObjective into two statements - one for consistency level and one for timestamp and use them in usingClauseDelete like (K_USING (usingConsistencyLevel&lt;span class=&quot;error&quot;&gt;&amp;#91;attrs&amp;#93;&lt;/span&gt; (K_AND usingTimestamp&lt;span class=&quot;error&quot;&gt;&amp;#91;attrs&amp;#93;&lt;/span&gt;)? | usingTimestamp&lt;span class=&quot;error&quot;&gt;&amp;#91;attrs&amp;#93;&lt;/span&gt; (K_AND usingConsistencyLevel&lt;span class=&quot;error&quot;&gt;&amp;#91;attrs&amp;#93;&lt;/span&gt;)?) to support language consistency. &lt;/p&gt;</comment>
                            <comment id="13067969" author="slebresne" created="Tue, 19 Jul 2011 21:10:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m asking because that also means that user will be able to specify as many timestamps and consistency levels as he wants&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s what I said. To rephrase:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;it&apos;s the case also for the UPDATE statement: we should do something for both or none.&lt;/li&gt;
	&lt;li&gt;I personally don&apos;t think it&apos;s a problem, the last statement would be picked each time, which feels a reasonable behavior in that case. More precisely I don&apos;t think it&apos;s worth caring about.&lt;/li&gt;
	&lt;li&gt;if we do want to add a restriction though, I think it would be easier to have Attributes throw an exception when one of its set method is called twice. Because your proposed fix will become a bit ugly for the UPDATE statement and it would be a pain to extend to future new clauses.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13067974" author="xedin" created="Tue, 19 Jul 2011 21:23:15 +0000"  >&lt;p&gt;Ok, lets leave it for now, +1.&lt;/p&gt;</comment>
                            <comment id="13068014" author="hudson" created="Tue, 19 Jul 2011 22:16:48 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #226 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra-0.8/226/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra-0.8/226/&lt;/a&gt;)&lt;br/&gt;
    respect client timestamp on full row deletions&lt;br/&gt;
patch by slebresne; reviewed by pyaskevich for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2912&quot; title=&quot;CQL ignores client timestamp for full row deletion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2912&quot;&gt;&lt;del&gt;CASSANDRA-2912&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;jbellis : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1148547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1148547&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/system/test_cql.py&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/cql/Cql.g&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/cql/DeleteStatement.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12486979" name="0001-CQL-timestamp-row-deletion.patch" size="7270" author="slebresne" created="Tue, 19 Jul 2011 08:22:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20889</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ge7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>xedin</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>