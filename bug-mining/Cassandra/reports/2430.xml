<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:41:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6185] Can&apos;t update int column to blob type.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6185</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Patch for dtests:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/cql_tests.py b/cql_tests.py
index 11461e4..405c998 100644
--- a/cql_tests.py
+++ b/cql_tests.py
@@ -1547,35 +1547,35 @@ class TestCQL(Tester):
             CREATE TABLE test (
                 k text,
                 c text,
-                v text,
+                v int,
                 PRIMARY KEY (k, c)
             )
         &quot;&quot;&quot;)

-        req = &quot;INSERT INTO test (k, c, v) VALUES (&apos;%s&apos;, &apos;%s&apos;, &apos;%s&apos;)&quot;
+        req = &quot;INSERT INTO test (k, c, v) VALUES (&apos;%s&apos;, &apos;%s&apos;, %d)&quot;
         # using utf8 character so that we can see the transition to BytesType
-        cursor.execute(req % (&apos;&#632;&apos;, &apos;&#632;&apos;, &apos;&#632;&apos;))
+        cursor.execute(req % (&apos;&#632;&apos;, &apos;&#632;&apos;, 1))

         cursor.execute(&quot;SELECT * FROM test&quot;)
         cursor.execute(&quot;SELECT * FROM test&quot;)
         res = cursor.fetchall()
-        assert res == [[u&apos;&#632;&apos;, u&apos;&#632;&apos;, u&apos;&#632;&apos;]], res
+        assert res == [[u&apos;&#632;&apos;, u&apos;&#632;&apos;, 1]], res

         cursor.execute(&quot;ALTER TABLE test ALTER v TYPE blob&quot;)
         cursor.execute(&quot;SELECT * FROM test&quot;)
         res = cursor.fetchall()
         # the last should not be utf8 but a raw string
-        assert res == [[u&apos;&#632;&apos;, u&apos;&#632;&apos;, &apos;&#632;&apos;]], res
+        assert res == [[u&apos;&#632;&apos;, u&apos;&#632;&apos;, &apos;\x00\x00\x00\x01&apos;]], res

         cursor.execute(&quot;ALTER TABLE test ALTER k TYPE blob&quot;)
         cursor.execute(&quot;SELECT * FROM test&quot;)
         res = cursor.fetchall()
-        assert res == [[&apos;&#632;&apos;, u&apos;&#632;&apos;, &apos;&#632;&apos;]], res
+        assert res == [[&apos;&#632;&apos;, u&apos;&#632;&apos;, &apos;\x00\x00\x00\x01&apos;]], res

         cursor.execute(&quot;ALTER TABLE test ALTER c TYPE blob&quot;)
         cursor.execute(&quot;SELECT * FROM test&quot;)
         res = cursor.fetchall()
-        assert res == [[&apos;&#632;&apos;, &apos;&#632;&apos;, &apos;&#632;&apos;]], res
+        assert res == [[&apos;&#632;&apos;, &apos;&#632;&apos;, &apos;\x00\x00\x00\x01&apos;]], res

     @since(&apos;1.2&apos;)
     def composite_row_key_test(self):
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12673491">CASSANDRA-6185</key>
            <summary>Can&apos;t update int column to blob type.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="nickmbailey">Nick Bailey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Oct 2013 20:45:08 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:03 +0000</updated>
                            <resolved>Mon, 21 Oct 2013 08:16:46 +0000</resolved>
                                        <fixVersion>1.2.12</fixVersion>
                    <fixVersion>2.0.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13793041" author="brandon.williams" created="Fri, 11 Oct 2013 20:58:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5882&quot; title=&quot;Changing column type from int to bigint or vice versa causes decoding errors.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5882&quot;&gt;&lt;del&gt;CASSANDRA-5882&lt;/del&gt;&lt;/a&gt; is responsible.&lt;/p&gt;</comment>
                            <comment id="13793987" author="slebresne" created="Mon, 14 Oct 2013 08:30:19 +0000"  >&lt;p&gt;Currently, our type compatibility is based on comparison compatibility, and since &apos;blob&apos; does not compare like &apos;int&apos;, this is refused. That being said, except for clustering columns, we can use a more permissive compatibilty check that don&apos;t take comparison order into account. Attaching patch that does that (the patch also slightly clean-up/improve the validation made by AlterTableStatement).&lt;/p&gt;</comment>
                            <comment id="13793992" author="jbellis" created="Mon, 14 Oct 2013 08:45:32 +0000"  >&lt;p&gt;Let&apos;s stick with 2.0 for this since it&apos;s new functionality and a bit involved.&lt;/p&gt;

&lt;p&gt;Edit: or is this actually a regression?&lt;/p&gt;</comment>
                            <comment id="13794007" author="slebresne" created="Mon, 14 Oct 2013 09:18:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;or is this actually a regression?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Kind of. In &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5882&quot; title=&quot;Changing column type from int to bigint or vice versa causes decoding errors.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5882&quot;&gt;&lt;del&gt;CASSANDRA-5882&lt;/del&gt;&lt;/a&gt;, we decided on purpose to stop allowing type changes that were not making sense. In doing so, we&apos;ve been too restrictive, disallowing some type changes that stricly speaking make sense, which you could say is a restriction (of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-5882&quot; title=&quot;Changing column type from int to bigint or vice versa causes decoding errors.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-5882&quot;&gt;&lt;del&gt;CASSANDRA-5882&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I&apos;ll note that the patch really only change code related to altering type, which is hardly mission critical, so I don&apos;t think there is too much risk in pushing it in 1.2. But personally I don&apos;t really care either way.&lt;/p&gt;</comment>
                            <comment id="13794009" author="jbellis" created="Mon, 14 Oct 2013 09:21:55 +0000"  >&lt;p&gt;All right, I&apos;ll set it back to 1.2 (1.2.12, which I just created).&lt;/p&gt;</comment>
                            <comment id="13794075" author="iamaleksey" created="Mon, 14 Oct 2013 12:19:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Comment typos: ATS.announceMigration(), the COLUMN_METADATA case comment &quot;so CFMetaData.validateCompatility ...&quot; - Complatility + the same typo in the COLUMN_ALIAS case.&lt;/p&gt;</comment>
                            <comment id="13800424" author="iamaleksey" created="Mon, 21 Oct 2013 07:26:33 +0000"  >&lt;p&gt;^&lt;/p&gt;</comment>
                            <comment id="13800454" author="slebresne" created="Mon, 21 Oct 2013 08:16:46 +0000"  >&lt;p&gt;Committed, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12608254" name="6185.txt" size="10734" author="slebresne" created="Mon, 14 Oct 2013 08:30:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353114</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ovof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353401</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12324803">1.2.9</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>