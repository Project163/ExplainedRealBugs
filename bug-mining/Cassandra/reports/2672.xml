<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:43:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6745] Require specifying rows_per_partition_to_cache</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6745</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We should require specifying rows_to_cache_per_partition for new tables or newly ALTERed when row caching is enabled.&lt;/p&gt;

&lt;p&gt;Pre-upgrade should be grandfathered in as ALL to match existing semantics.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12696331">CASSANDRA-6745</key>
            <summary>Require specifying rows_per_partition_to_cache</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Feb 2014 19:16:43 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:53 +0000</updated>
                            <resolved>Wed, 12 Mar 2014 13:12:49 +0000</resolved>
                                        <fixVersion>2.1 beta2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13908073" author="slebresne" created="Fri, 21 Feb 2014 07:50:06 +0000"  >&lt;p&gt;On that note, I have wondered if it wouldn&apos;t be cleaner to group the caching options into a map like we do for say compression options. Something like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ALTER t WITH caching = { &apos;keys&apos; : &apos;false&apos;, &apos;rows&apos; : &apos;true&apos;, &apos;rows_per_partition&apos; : &apos;100&apos; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This feels cleaner to me, and would provide a clear home for future other caching options (or if say, we start moving some of your global ones to per-table ones).&lt;/p&gt;</comment>
                            <comment id="13909498" author="krummas" created="Sat, 22 Feb 2014 19:42:48 +0000"  >&lt;p&gt;sounds good, I&apos;ll do that&lt;/p&gt;</comment>
                            <comment id="13914240" author="krummas" created="Thu, 27 Feb 2014 09:08:18 +0000"  >&lt;p&gt;pushed to &lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/6745&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/6745&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I changed the option format a bit to make it more clear (might not be for existing users though), wdyt?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; CQL: caching = { &lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;ALL|NONE&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;200|NONE|ALL&apos;&lt;/span&gt; }
 Thrift: caching = { &lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;ALL|NONE&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;cells_per_row&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;200|NONE|ALL&apos;&lt;/span&gt; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;also note that this breaks beta1 -&amp;gt; beta2 upgrades, but i guess that is ok&lt;/p&gt;</comment>
                            <comment id="13918057" author="slebresne" created="Mon, 3 Mar 2014 13:44:48 +0000"  >&lt;p&gt;Hum, I kind of like my version more &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Basically, my goal is to make things as future proof as possible since it&apos;s not at all unlikely that in the future we might add per-table setting for both cache. So my idea was to have a simple on/off option switch for each cache (and I kind of like for that to be a boolean) + any number of options that control the behavior. Typically, having rows_per_partition being the option that control whether the row cache is enabled or not feels weird to me, feeling that we&apos;re trying to cram too much info in that option. But I don&apos;t know, maybe it&apos;s just me trying to justify what is ultimately a personal preference?&lt;/p&gt;

&lt;p&gt;Other than that, I do would rather not change the thrift interface. We definitively can&apos;t change an existing option like caching like that as this would break clients which we don&apos;t do for thrift, and while we could probably deprecate &apos;caching&apos; to replace it with some &apos;caching_options&apos;, this would still be borderline in term of backward compatibility, so I propose to leave things as they are. In fact, I would even argue that this whole issue is kind of breaking if done for thrift and so we may want to stick to CQL only here.&lt;/p&gt;</comment>
                            <comment id="13918304" author="krummas" created="Mon, 3 Mar 2014 17:43:11 +0000"  >&lt;p&gt;My reasoning was that it made no real sense to first have a boolean and then state how many rows, felt like i was repeating myself when doing it, but I can buy the argument that if we want to extend this in the future, having the bools might make sense&lt;/p&gt;

&lt;p&gt;And the thrift part, sure&lt;/p&gt;</comment>
                            <comment id="13918337" author="jbellis" created="Mon, 3 Mar 2014 18:11:53 +0000"  >&lt;p&gt;I rather like the way Marcus did it.&lt;/p&gt;</comment>
                            <comment id="13919401" author="krummas" created="Tue, 4 Mar 2014 13:45:18 +0000"  >&lt;p&gt;Attaching patch, thrift side is kept as-is, no generated files this time&lt;/p&gt;

&lt;p&gt;CQL syntax is kept as in previous patch.&lt;/p&gt;</comment>
                            <comment id="13930907" author="jbellis" created="Tue, 11 Mar 2014 20:33:18 +0000"  >&lt;p&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slebresne&quot; class=&quot;user-hover&quot; rel=&quot;slebresne&quot;&gt;slebresne&lt;/a&gt; to review)&lt;/p&gt;</comment>
                            <comment id="13931557" author="slebresne" created="Wed, 12 Mar 2014 09:04:56 +0000"  >&lt;p&gt;Mostly look good to me, though one last point is that since the new &apos;&apos;caching&quot; syntax beaks the existing one, I think we&apos;d need to still support the old syntax too at least for 2.1 (in CQL3 I mean), with maybe a warning in the log if said old syntax is used. Otherwise this could be annoying for rolling upgrades.&lt;/p&gt;

&lt;p&gt;Another nit is that I&apos;d leave CQL2 alone. It will be removed in 3.0 so the only thing someone that still use CQL2 in 2.1 is update to CQL3. So changing the syntax of &quot;caching&quot; there would just be an annoyance, and I wouldn&apos;t even bother with supporting the new syntax: again, if you want to use the new caching features and you&apos;re on CQL2, it&apos;s high time for you to upgrade to CQL3.&lt;/p&gt;</comment>
                            <comment id="13931676" author="krummas" created="Wed, 12 Mar 2014 11:59:15 +0000"  >&lt;p&gt;pushed a fix on top of the patch: &lt;a href=&quot;https://github.com/krummas/cassandra/commits/marcuse/6745&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/krummas/cassandra/commits/marcuse/6745&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;cql2 already supports old syntax&lt;/p&gt;</comment>
                            <comment id="13931716" author="slebresne" created="Wed, 12 Mar 2014 12:44:49 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13931736" author="krummas" created="Wed, 12 Mar 2014 13:12:36 +0000"  >&lt;p&gt;committed, thanks&lt;/p&gt;</comment>
                            <comment id="13932830" author="mishail" created="Thu, 13 Mar 2014 03:00:23 +0000"  >&lt;p&gt;Guys, I&apos;ve made a couple of tweaks for CQLSH &lt;a href=&quot;https://github.com/Mishail/cassandra/compare/apache:cassandra-2.1...CASSANDRA-6745-caching&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Mishail/cassandra/compare/apache:cassandra-2.1...CASSANDRA-6745-caching&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Autocomplete with {&lt;tt&gt;&apos;keys&apos;: &apos;&lt;/tt&gt; right after &lt;tt&gt;caching&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;&apos;ALL&apos;&lt;/tt&gt; and &lt;tt&gt;&apos;NONE&apos;&lt;/tt&gt; are values, not hints&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll push them if you&apos;re OK with those changes&lt;/p&gt;</comment>
                            <comment id="13933005" author="krummas" created="Thu, 13 Mar 2014 08:41:40 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12632503" name="0001-wip-caching-options.patch" size="45581" author="marcuse" created="Tue, 4 Mar 2014 13:45:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>374807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sl7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375106</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326275">2.1 beta1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>