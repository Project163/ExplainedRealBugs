<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:30:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4051] Stream sessions can only fail via the FailureDetector</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4051</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;If for some reason, FileStreamTask itself fails more than the number of retry attempts but gossip continues to work, the stream session will never be closed.  This is unlikely to happen in practice since it requires blocking the storage port from new connections but keeping the existing ones, however for the bulk loader this is especially problematic since it doesn&apos;t have access to a failure detector and thus no way of knowing if a session failed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546493">CASSANDRA-4051</key>
            <summary>Stream sessions can only fail via the FailureDetector</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yukim">Yuki Morishita</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                            <label>streaming</label>
                    </labels>
                <created>Wed, 14 Mar 2012 22:37:38 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:37 +0000</updated>
                            <resolved>Wed, 11 Apr 2012 20:08:22 +0000</resolved>
                                        <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13229855" author="brandon.williams" created="Thu, 15 Mar 2012 03:27:32 +0000"  >&lt;p&gt;It looks like we could extract/rebase the streaming changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3112&quot; title=&quot;Make repair fail when an unexpected error occurs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3112&quot;&gt;&lt;del&gt;CASSANDRA-3112&lt;/del&gt;&lt;/a&gt;&apos;s first patch to solve this well enough for the bulk loader and BOF.&lt;/p&gt;</comment>
                            <comment id="13231465" author="brandon.williams" created="Fri, 16 Mar 2012 18:06:17 +0000"  >&lt;p&gt;Updated patch extracted as mentioned, doesn&apos;t change any streaming behavior but does provide a way to detect errors that &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3112&quot; title=&quot;Make repair fail when an unexpected error occurs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3112&quot;&gt;&lt;del&gt;CASSANDRA-3112&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4045&quot; title=&quot;BOF fails when some nodes are down&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4045&quot;&gt;&lt;del&gt;CASSANDRA-4045&lt;/del&gt;&lt;/a&gt; can build on.&lt;/p&gt;</comment>
                            <comment id="13239614" author="yukim" created="Tue, 27 Mar 2012 16:42:09 +0000"  >&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3216&quot; title=&quot;A streamOutSession keeps sstables references forever if the remote end dies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3216&quot;&gt;&lt;del&gt;CASSANDRA-3216&lt;/del&gt;&lt;/a&gt; added IEndpointStateChangeSubscriber and IFailureDetectionEventListner to StreamOutSession, we need to keep that functionality. I proposed modified version of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3112&quot; title=&quot;Make repair fail when an unexpected error occurs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3112&quot;&gt;&lt;del&gt;CASSANDRA-3112&lt;/del&gt;&lt;/a&gt; except limiting retry part on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3817&quot; title=&quot;Add failure callback interface to streaming&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3817&quot;&gt;&lt;del&gt;CASSANDRA-3817&lt;/del&gt;&lt;/a&gt;, I would like to rebase that patch and add retry, so that I can post it here. (I will post it soon.)&lt;/p&gt;</comment>
                            <comment id="13239830" author="yukim" created="Tue, 27 Mar 2012 18:57:23 +0000"  >&lt;p&gt;Patch attached based on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3817&quot; title=&quot;Add failure callback interface to streaming&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3817&quot;&gt;&lt;del&gt;CASSANDRA-3817&lt;/del&gt;&lt;/a&gt; with retry limit.&lt;br/&gt;
(I think it is nice to have retry limit per stream session, so that we can configure, say, no retry for bulk loading, which I think is enough. But that&apos;s beyond this issue.)&lt;/p&gt;

&lt;p&gt;&amp;gt; Brandon&lt;/p&gt;

&lt;p&gt;Can you test and see if BOF is OK with this patch?&lt;/p&gt;</comment>
                            <comment id="13239893" author="brandon.williams" created="Tue, 27 Mar 2012 20:07:45 +0000"  >&lt;p&gt;BOF looks good, +1, committed.&lt;/p&gt;</comment>
                            <comment id="13240733" author="brandon.williams" created="Wed, 28 Mar 2012 21:06:40 +0000"  >&lt;p&gt;Reopening because this only fixes the problem in one way, FileStreamTask can still fail all 8 times and never close the session.  In general, outbound streaming&apos;s &quot;fire and forget&quot; methodology is problematic for bulk loading.&lt;/p&gt;</comment>
                            <comment id="13242601" author="yukim" created="Fri, 30 Mar 2012 17:54:40 +0000"  >&lt;p&gt;v3 attached for 1.1 branch.&lt;/p&gt;

&lt;p&gt;It basically catches IOException on both sides and lets sessions closed.&lt;br/&gt;
I also implemented IStreamCallback#onFailure to make sure latches count down to avoid process hang.&lt;/p&gt;</comment>
                            <comment id="13251881" author="brandon.williams" created="Wed, 11 Apr 2012 20:08:22 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12546321">CASSANDRA-4045</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12520175" name="4051-v2.txt" size="32312" author="yukim" created="Tue, 27 Mar 2012 18:57:23 +0000"/>
                            <attachment id="12520639" name="4051-v3.txt" size="5739" author="yukim" created="Fri, 30 Mar 2012 17:54:40 +0000"/>
                            <attachment id="12518713" name="4051.txt" size="32280" author="brandon.williams" created="Fri, 16 Mar 2012 18:06:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yukim]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0grdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>