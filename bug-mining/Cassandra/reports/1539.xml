<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:30:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3755] NPE on invalid CQL DELETE command</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3755</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The CQL command &lt;tt&gt;delete from k where key=&apos;bar&apos;;&lt;/tt&gt; causes Cassandra to hit a NullPointerException when the &quot;k&quot; column family does not exist, and it subsequently closes the Thrift connection instead of reporting an IRE or whatever. This is probably wrong.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539021">CASSANDRA-3755</key>
            <summary>NPE on invalid CQL DELETE command</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dbrosius">David Brosius</assignee>
                                    <reporter username="thepaul">paul cannon</reporter>
                        <labels>
                            <label>cql</label>
                    </labels>
                <created>Thu, 19 Jan 2012 19:31:33 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:42 +0000</updated>
                            <resolved>Thu, 29 Mar 2012 14:33:22 +0000</resolved>
                                        <fixVersion>1.0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13189652" author="dbrosius@apache.org" created="Fri, 20 Jan 2012 06:48:17 +0000"  >&lt;p&gt;throw a IRE exception with understandable error message, rather than NPE.&lt;/p&gt;</comment>
                            <comment id="13191972" author="dbrosius@apache.org" created="Tue, 24 Jan 2012 07:22:02 +0000"  >&lt;p&gt;ah, that&apos;s much better, thanks...don&apos;t allow write actions from the client on system keyspace  -&amp;gt; attached.&lt;/p&gt;</comment>
                            <comment id="13192241" author="jbellis" created="Tue, 24 Jan 2012 16:12:06 +0000"  >&lt;p&gt;The second patch is for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3759&quot; title=&quot;[patch] don&amp;#39;t allow dropping the system keyspace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3759&quot;&gt;&lt;del&gt;CASSANDRA-3759&lt;/del&gt;&lt;/a&gt;. I&apos;ll apply it there.  Did you mean to revise this one as well?&lt;/p&gt;</comment>
                            <comment id="13192629" author="dbrosius@apache.org" created="Tue, 24 Jan 2012 22:33:58 +0000"  >&lt;p&gt;Arg, my apologies, posted to wrong bug.&lt;/p&gt;</comment>
                            <comment id="13192692" author="jbellis" created="Wed, 25 Jan 2012 00:25:12 +0000"  >&lt;p&gt;So the patch here is ready for review for fixing the NPE problem?&lt;/p&gt;</comment>
                            <comment id="13192780" author="dbrosius@apache.org" created="Wed, 25 Jan 2012 01:48:12 +0000"  >&lt;p&gt;yes&lt;/p&gt;</comment>
                            <comment id="13203752" author="slebresne" created="Wed, 8 Feb 2012 17:12:53 +0000"  >&lt;p&gt;I believe the right fix would be to use ThriftValidation.validateColumnFamily that catches that kind of problems. Looking at DeleteStatement, it seems that it re-validate the column family for each key in mutationForKey(), but that&apos;s done later and thus the NPE is thrown first. We should probably move the validateColumnFamily up in prepareRowMutations() and then pass the resulting metadata as an argument of mutationForKey to avoid the multiple validation.&lt;/p&gt;</comment>
                            <comment id="13239498" author="jbellis" created="Tue, 27 Mar 2012 14:29:28 +0000"  >&lt;p&gt;Dave, did you want to take a stab at that approach?&lt;/p&gt;</comment>
                            <comment id="13240060" author="dbrosius@apache.org" created="Tue, 27 Mar 2012 23:35:50 +0000"  >&lt;p&gt;sure&lt;/p&gt;</comment>
                            <comment id="13240068" author="dbrosius@apache.org" created="Tue, 27 Mar 2012 23:58:43 +0000"  >&lt;p&gt;pushed up Thrift.validateColumnFamily as Sylvain suggests.&lt;/p&gt;

&lt;p&gt;(against trunk)&lt;/p&gt;

&lt;p&gt;unknown_cf_2.diff&lt;/p&gt;</comment>
                            <comment id="13241268" author="slebresne" created="Thu, 29 Mar 2012 14:33:22 +0000"  >&lt;p&gt;+1, committed, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12511230" name="unknown_cf.diff" size="1120" author="dbrosius@apache.org" created="Fri, 20 Jan 2012 06:48:17 +0000"/>
                            <attachment id="12520215" name="unknown_cf_2.diff" size="1855" author="dbrosius@apache.org" created="Tue, 27 Mar 2012 23:58:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dbrosius]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>224523</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gnu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95292</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>slebresne</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>