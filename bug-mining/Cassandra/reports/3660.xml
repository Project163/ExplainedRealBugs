<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:55:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9542] Create UDA does not recognize built-in functions without specifying system keyspace</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9542</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I&apos;d expect when creating a UDA not to have to specify the system keyspace when using a built-in function for the state or final function.  For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE AGGREGATE &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not exists ks.my_agg(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 
SFUNC ks.adder
STYPE &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;
FINALFUNC intasblob
;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Gives me me the error:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Final function ks.intasblob(int) does not exist or is not a scalar function&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Prefixing with &apos;system.&apos; fixes the issue. But I was expecting it to resolve as if I were using a built in function elsewhere.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12835110">CASSANDRA-9542</key>
            <summary>Create UDA does not recognize built-in functions without specifying system keyspace</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="snazy">Robert Stupp</assignee>
                                    <reporter username="zackurey">Zachary Kurey</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jun 2015 17:00:57 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:08 +0000</updated>
                            <resolved>Thu, 9 Jul 2015 15:47:20 +0000</resolved>
                                        <fixVersion>2.2.0 rc2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14571828" author="snazy" created="Wed, 3 Jun 2015 23:24:49 +0000"  >&lt;p&gt;Short evaluation: method &lt;tt&gt;o.a.c.cql3.statements.CreateAggregateStatement#validateFunctionKeyspace&lt;/tt&gt; should not blindly assume the &lt;tt&gt;USE&lt;/tt&gt; keyspace but instead try to look up a native function (in &lt;tt&gt;system&lt;/tt&gt; KS) first and try &lt;tt&gt;USE&lt;/tt&gt; keyspace next (same semantic used for looking up functions for execution).&lt;/p&gt;</comment>
                            <comment id="14581053" author="snazy" created="Wed, 10 Jun 2015 20:48:44 +0000"  >&lt;p&gt;Attached patch allows use of native functions.&lt;/p&gt;</comment>
                            <comment id="14594779" author="iamaleksey" created="Sat, 20 Jun 2015 20:25:11 +0000"  >&lt;p&gt;nit: &quot;Functions from system keyspace are resolved before logged keyspace.&quot; should be &quot;Functions from the system keyspace are resolved before functions in the current keyspace.&quot;. &apos;logged&apos; is not used in &lt;tt&gt;CQL.textile&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;CreateAggregateStatement&lt;/tt&gt; there is no reason for &lt;tt&gt;stateType&lt;/tt&gt; to be a field, can be a local variable.&lt;/p&gt;

&lt;p&gt;Otherwise looks ok.&lt;/p&gt;</comment>
                            <comment id="14596077" author="snazy" created="Mon, 22 Jun 2015 15:22:43 +0000"  >&lt;p&gt;committed as d6312c5f4d6b1dbc16518becef1b7a785cea73b3&lt;/p&gt;</comment>
                            <comment id="14620414" author="iamaleksey" created="Thu, 9 Jul 2015 12:25:09 +0000"  >&lt;p&gt;I&apos;m sorry to flip-flop about this, but I do now think that it shouldn&apos;t be allowed. UDAs should be limited to only UDFs from their own KS, not even allowed to use &lt;tt&gt;system&lt;/tt&gt; ones.&lt;/p&gt;

&lt;p&gt;Allowing it doesn&apos;t go well with the upcoming schema code changes in a big way, plus it&apos;s not very useful. Realistically, you can only really use them as final funcs. And you might as well call &lt;tt&gt;SELECT intAsAblob(my_agg(...))&lt;/tt&gt; and get the same result, if you really need a conversion. It&apos;s probably cleaner that way too.&lt;/p&gt;</comment>
                            <comment id="14620508" author="snazy" created="Thu, 9 Jul 2015 13:38:32 +0000"  >&lt;p&gt;I&apos;m fine with reverting this. It&apos;s also cleaner to the syntax and in the code.&lt;br/&gt;
Will provide a revert-patch for 2.2.0 soon.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9771&quot; title=&quot;Revert CASSANDRA-9542 (allow native functions in UDA)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9771&quot;&gt;&lt;del&gt;CASSANDRA-9771&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12738912" name="9542.txt" size="13984" author="snazy" created="Wed, 10 Jun 2015 20:43:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[snazy]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fl5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>