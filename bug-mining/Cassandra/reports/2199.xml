<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:38:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5622] Update CqlRecordWriter to conform to RecordWriter API</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5622</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;tt&gt;RecordWriter&amp;lt;K, V&amp;gt;&lt;/tt&gt; is supposed to write values V that can be uniquely identified by keys K.&lt;/p&gt;

&lt;p&gt;Currently CqlRW requires the user to give it all the bind variables for a complete statement in V, and effectively ignores K.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12651522">CASSANDRA-5622</key>
            <summary>Update CqlRecordWriter to conform to RecordWriter API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alexliu68">Alex Liu</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Jun 2013 22:09:35 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:12 +0000</updated>
                            <resolved>Mon, 17 Jun 2013 22:43:29 +0000</resolved>
                                        <fixVersion>1.2.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13677593" author="jbellis" created="Thu, 6 Jun 2013 22:15:41 +0000"  >&lt;p&gt;Two solutions suggest themselves:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Embrace ignoring of K and just pass new Object()&lt;/li&gt;
	&lt;li&gt;Treat K as designed and accept responsibility for generating appropriate bind variables&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;m not a huge fan of #1 since it forces the user to do more work to generate bind variables for the PK values.  I&apos;d rather automate that.&lt;/p&gt;

&lt;p&gt;Let me give an example of what I mean in #2.  Suppose we have word counts as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE word_counts (
  file_name text,
  counted_at timestamp,
  word text,
  count &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
  PRIMARY KEY ((file_name, counted_at), word)
);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then the user would configure CQL such as &quot;UPDATE word_counts SET count = ?&quot;.  CqlRW would inspect the table definition and realize it needs to add &quot; WHERE file_name = ? AND counted_at = ? AND word = ?&quot;.&lt;/p&gt;

&lt;p&gt;Then when it gets a Map&amp;lt;String, BB&amp;gt; as K, it combines those with the List&amp;lt;BB&amp;gt; variables.  It knows the ordering of the pk columns since it generated it itself.&lt;/p&gt;

&lt;p&gt;One downside: this doesn&apos;t lend itself to INSERT statements, since that does not separate SET/WHERE the way UPDATE does.  This is a limitation I can live with.&lt;/p&gt;</comment>
                            <comment id="13677687" author="alexliu68" created="Fri, 7 Jun 2013 00:13:12 +0000"  >&lt;p&gt;Agreed, #2 is more concise and easy to use.&lt;/p&gt;</comment>
                            <comment id="13678413" author="alexliu68" created="Fri, 7 Jun 2013 20:45:15 +0000"  >&lt;p&gt;patch for trunk is attached.&lt;/p&gt;</comment>
                            <comment id="13678443" author="alexliu68" created="Fri, 7 Jun 2013 21:08:17 +0000"  >&lt;p&gt;Patch for 1.2 branch is attached&lt;/p&gt;</comment>
                            <comment id="13681697" author="jbellis" created="Wed, 12 Jun 2013 22:19:38 +0000"  >&lt;p&gt;Is it worth supporting INSERT at all since it&apos;s semantically identical to UPDATE?  I think I&apos;d rather just support UPDATE only and avoid the confusion of two different ways of working.&lt;/p&gt;</comment>
                            <comment id="13682765" author="alexliu68" created="Thu, 13 Jun 2013 21:23:38 +0000"  >&lt;p&gt;I will disable INSERT query, only allow UPDATE or DELETE statement.&lt;/p&gt;</comment>
                            <comment id="13685591" author="jbellis" created="Mon, 17 Jun 2013 14:09:09 +0000"  >&lt;p&gt;How is that coming, Alex?  Would like to ship this in 1.2.6.&lt;/p&gt;</comment>
                            <comment id="13685647" author="alexliu68" created="Mon, 17 Jun 2013 15:24:33 +0000"  >&lt;p&gt;I was busy with other project, I will get it done today.&lt;/p&gt;</comment>
                            <comment id="13685781" author="alexliu68" created="Mon, 17 Jun 2013 18:04:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; I attach the version 2 patches which throws &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT statement is depreciated and not supported, please use UPDATE/DELETE statement.&quot;&lt;/span&gt;); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;if the INSERT type query is used for writter.&lt;/p&gt;</comment>
                            <comment id="13685957" author="jbellis" created="Mon, 17 Jun 2013 20:44:17 +0000"  >&lt;p&gt;Pushed a bunch of changes to &lt;a href=&quot;https://github.com/jbellis/cassandra/commits/5622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jbellis/cassandra/commits/5622&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13686020" author="alexliu68" created="Mon, 17 Jun 2013 21:24:09 +0000"  >&lt;p&gt;+1 for the changes, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; I can create the final patch.&lt;/p&gt;</comment>
                            <comment id="13686113" author="jbellis" created="Mon, 17 Jun 2013 22:43:29 +0000"  >&lt;p&gt;Not necessary, I merge --squashed and committed.  Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12586799" name="5622-1-1.2-branch.txt" size="7360" author="alexliu68" created="Fri, 7 Jun 2013 21:08:17 +0000"/>
                            <attachment id="12586794" name="5622-1-trunk.txt" size="8068" author="alexliu68" created="Fri, 7 Jun 2013 20:45:15 +0000"/>
                            <attachment id="12588169" name="5622-2-1.2-branch.txt" size="7202" author="alexliu68" created="Mon, 17 Jun 2013 17:56:22 +0000"/>
                            <attachment id="12588172" name="5622-2-trunk-branch.txt" size="7907" author="alexliu68" created="Mon, 17 Jun 2013 18:02:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[alexliu68]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331848</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l8yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>332177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>