<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:13:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-15007] Incorrect rf validation in SimpleStrategy</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-15007</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Getting uninformative&#160;ConfigurationException when trying to create a keyspace with SimpleStrategy and no replication factor.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;cqlsh&amp;gt; create keyspace test with replication = {&apos;class&apos;: &apos;SimpleStrategy&apos;};&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;ConfigurationException:&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13213878">CASSANDRA-15007</key>
            <summary>Incorrect rf validation in SimpleStrategy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djoshi">Dinesh Joshi</assignee>
                                    <reporter username="Apozyan">Michael</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2019 11:48:21 +0000</created>
                <updated>Fri, 15 May 2020 08:05:32 +0000</updated>
                            <resolved>Tue, 19 Feb 2019 00:30:41 +0000</resolved>
                                        <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>CQL/Semantics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16760719" author="apozyan" created="Tue, 5 Feb 2019 11:50:32 +0000"  >&lt;p&gt;Here is a simple fix&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;cqlsh&amp;gt; create keyspace test with replication = {&apos;class&apos;: &apos;SimpleStrategy&apos;};&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;ConfigurationException: SimpleStrategy requires a replication_factor strategy option.&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16766865" author="djoshi3" created="Wed, 13 Feb 2019 07:08:16 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Apozyan&quot; class=&quot;user-hover&quot; rel=&quot;Apozyan&quot;&gt;Apozyan&lt;/a&gt;, thanks for the fix. Will this work in the general case?&lt;/p&gt;</comment>
                            <comment id="16766898" author="djoshi3" created="Wed, 13 Feb 2019 07:58:27 +0000"  >&lt;p&gt;Nevermind, looking at it more deeply, I noticed this is a recent regression. We already validate options and throw a meaningful message in 3.x. If you notice there is a method called &lt;tt&gt;validateOptions&lt;/tt&gt; that does exactly what you tried doing in the constructor. It looks like this broke on trunk. So now &lt;tt&gt;SimpleStrategy&lt;/tt&gt; creation fails with an exception before we have a chance to validate the options.&lt;/p&gt;

&lt;p&gt;I have fixed the regression and added a test to avoid future regressions.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/dineshjoshi/cassandra/tree/15007-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://circleci.com/gh/dineshjoshi/workflows/cassandra/tree/15007-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="16767004" author="apozyan" created="Wed, 13 Feb 2019 09:58:56 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djoshi3&quot; class=&quot;user-hover&quot; rel=&quot;djoshi3&quot;&gt;djoshi3&lt;/a&gt; for looking into this. You are right, validation broke on trunk, and &lt;tt&gt;validateOptions&lt;/tt&gt; now is never called if constructor throws an exception.&lt;/p&gt;

&lt;p&gt;I compared &lt;tt&gt;SimpleStrategy.java&lt;/tt&gt;&#160;and &lt;tt&gt;NetworkTopologyStrategy.java&lt;/tt&gt;&#160;and I saw that in the latter case validation code is duplicated both in constructor and &lt;tt&gt;validateOptions&lt;/tt&gt; method. So I think its fine to do the same for SimpleStrategy.&lt;/p&gt;</comment>
                            <comment id="16771449" author="bdeggleston" created="Tue, 19 Feb 2019 00:30:41 +0000"  >&lt;p&gt;Looks good to me. Committed to trunk as &lt;tt&gt;47d4971b56d97ba8a528f7c17bfd6b11f1ababa3&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16771450" author="djoshi3" created="Tue, 19 Feb 2019 00:36:04 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdeggleston&quot; class=&quot;user-hover&quot; rel=&quot;bdeggleston&quot;&gt;bdeggleston&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12957626" name="15007.patch" size="1262" author="Apozyan" created="Tue, 5 Feb 2019 11:49:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[djoshi]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0nxk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>bdeggleston</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bdeggleston]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>