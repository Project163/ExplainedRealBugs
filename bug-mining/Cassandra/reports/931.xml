<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:21:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2481] C* .deb installs C* init.d scripts such that C* comes up before mdadm and related</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2481</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;the C* .deb packages install the init.d scripts at S20 which is before mdadm and various other services.  This means that when a node reboots that C* is started before the RAID sets are up and mounted causing C* to think it has no data and attempt bootstrapping again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12504307">CASSANDRA-2481</key>
            <summary>C* .deb installs C* init.d scripts such that C* comes up before mdadm and related</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thepaul">paul cannon</assignee>
                                    <reporter username="mdennis">Matthew F. Dennis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Apr 2011 18:51:51 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:02 +0000</updated>
                            <resolved>Mon, 23 May 2011 15:45:10 +0000</resolved>
                                        <fixVersion>0.7.6</fixVersion>
                    <fixVersion>0.8.0</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13021091" author="hudson" created="Mon, 18 Apr 2011 16:26:15 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #14 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.8/14/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.8/14/&lt;/a&gt;)&lt;br/&gt;
    add optional replication_factor fields to KsDef to make supporting both 0.8 and 0.7 easier for client devs&lt;br/&gt;
patch by jbellis; reviewed by Nate McCall for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2481&quot; title=&quot;C* .deb installs C* init.d scripts such that C* comes up before mdadm and related&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2481&quot;&gt;&lt;del&gt;CASSANDRA-2481&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13032564" author="thepaul" created="Thu, 12 May 2011 18:27:54 +0000"  >&lt;p&gt;patch solverizes this problem. uses priority 50, or requires mdadm to be started first if using dependency-based init ordering.&lt;/p&gt;</comment>
                            <comment id="13032605" author="jbellis" created="Thu, 12 May 2011 19:27:14 +0000"  >&lt;p&gt;Out of curiosity, why aren&apos;t start/stop symmetrical?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+	dh_installinit -u&apos;start 50 2 3 4 5 . stop 50 0 1 6&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13032633" author="thepaul" created="Thu, 12 May 2011 20:05:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Out of curiosity, why aren&apos;t start/stop symmetrical?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;they are: ((start = 50) == 100 - (end = 50))&lt;/p&gt;

&lt;p&gt;If you were referring to the &quot;2 3 4 5&quot; vs &quot;0 1 6&quot;, those are the standard &quot;starting stuff&quot; and &quot;stopping stuff&quot; runlevels for SysV init.&lt;/p&gt;</comment>
                            <comment id="13032664" author="brandon.williams" created="Thu, 12 May 2011 20:46:06 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="13032681" author="hudson" created="Thu, 12 May 2011 21:10:07 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #484 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Cassandra-0.7/484/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/Cassandra-0.7/484/&lt;/a&gt;)&lt;br/&gt;
    Start/stop cassandra after more important services such as mdadm in&lt;br/&gt;
debian packaging.&lt;br/&gt;
Patch by Paul Cannon, reviewed by brandonwilliams for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2481&quot; title=&quot;C* .deb installs C* init.d scripts such that C* comes up before mdadm and related&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2481&quot;&gt;&lt;del&gt;CASSANDRA-2481&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13035264" author="slebresne" created="Wed, 18 May 2011 10:05:00 +0000"  >&lt;p&gt;When installing the debian package for 0.7.6 and 0.8.0-rc1 on ubuntu 11.04 (natty), I get&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Installing new version of config file /etc/init.d/cassandra ...
update-rc.d: error: start|stop arguments not terminated by &quot;.&quot;
usage: update-rc.d [-n] [-f] &amp;lt;basename&amp;gt; remove
       update-rc.d [-n] &amp;lt;basename&amp;gt; defaults [NN | SS KK]
       update-rc.d [-n] &amp;lt;basename&amp;gt; start|stop NN runlvl [runlvl] [...] .
       update-rc.d [-n] &amp;lt;basename&amp;gt; disable|enable [S|2|3|4|5]
		-n: not really
		-f: force
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Given that it works like a charm with 0.7.5, I strongly suspect this is this patch doing.&lt;/p&gt;</comment>
                            <comment id="13035440" author="gasolwu" created="Wed, 18 May 2011 15:32:02 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Installing new version of config file /etc/init.d/cassandra ...&lt;br/&gt;
update-rc.d: error: start|stop arguments not terminated by &quot;.&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;find dh_installinit in debian/rules and edit like following line.&lt;/p&gt;

&lt;p&gt;dh_installinit -u&apos;start 50 2 3 4 5 . stop 50 0 1 6 .&apos;&lt;/p&gt;

&lt;p&gt;it works for me.&lt;/p&gt;</comment>
                            <comment id="13035481" author="thepaul" created="Wed, 18 May 2011 16:44:49 +0000"  >&lt;p&gt;fix for previous&lt;/p&gt;</comment>
                            <comment id="13035492" author="brandon.williams" created="Wed, 18 May 2011 17:10:19 +0000"  >&lt;p&gt;Fix committed.&lt;/p&gt;</comment>
                            <comment id="13035517" author="hudson" created="Wed, 18 May 2011 17:48:57 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #488 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Cassandra-0.7/488/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/Cassandra-0.7/488/&lt;/a&gt;)&lt;br/&gt;
    Fix for dh_installinit syntax for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2481&quot; title=&quot;C* .deb installs C* init.d scripts such that C* comes up before mdadm and related&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2481&quot;&gt;&lt;del&gt;CASSANDRA-2481&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
Patch by Paul Cannon, reviewed by brandonwilliams&lt;/p&gt;

&lt;p&gt;brandonwilliams : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1124338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1124338&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.7/debian/rules&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13036872" author="sword2" created="Fri, 20 May 2011 15:24:01 +0000"  >&lt;p&gt;This is still broken for 0.8.0~rc1.  The last commit to it shows a merge with 0.7 but this fix is not in it.&lt;/p&gt;

&lt;p&gt;quick workaround is to modify the cassandra.postinst file.  You can get that from dpkg-query -c cassandra, mine is under /var/lib/dpkg/info/:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;sudo cp /var/lib/dpkg/info/cassandra.postinst /var/lib/dpkg/info/cassandra.postinst.original
sudo sed -i &apos;s/50 2 3 4 5 \. stop 50 0 1 6 &amp;gt;/50 2 3 4 5 \. stop 50 0 1 6 \.&amp;gt;/&apos; /var/lib/dpkg/info/cassandra.postinst
#make sure it&apos;s correct then run the below line.
#sudo dpkg --configure cassandra
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13036924" author="jbellis" created="Fri, 20 May 2011 16:51:36 +0000"  >&lt;p&gt;the fix is in the 0.8.0 branch for -final, but you are right that it is not in rc1.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12479618" name="2481-fix.txt" size="860" author="thepaul" created="Wed, 18 May 2011 16:44:49 +0000"/>
                            <attachment id="12479001" name="2481.txt" size="1577" author="thepaul" created="Thu, 12 May 2011 18:26:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thepaul]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20644</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gbmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93313</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>