<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:18:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1837] Deleted columns are resurrected after a flush</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1837</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Easily reproduced with the cli:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[default@unknown] create keyspace testks;
2785d67c-02df-11e0-ac09-e700f669bcfc
[default@unknown] use testks;
Authenticated to keyspace: testks
[default@testks] create column family testcf;
2fbad20d-02df-11e0-ac09-e700f669bcfc
[default@testks] set testcf[&apos;test&apos;][&apos;foo&apos;] = &apos;foo&apos;;
Value inserted.
[default@testks] set testcf[&apos;test&apos;][&apos;bar&apos;] = &apos;bar&apos;;
Value inserted.
[default@testks] list testcf;
Using default limit of 100
-------------------
RowKey: test
=&amp;gt; (column=626172, value=626172, timestamp=1291821869120000)
=&amp;gt; (column=666f6f, value=666f6f, timestamp=1291821857320000)

1 Row Returned.
[default@testks] del testcf[&apos;test&apos;];
row removed.
[default@testks] list testcf;
Using default limit of 100
-------------------
RowKey: test

1 Row Returned.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now flush testks and look again:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
[default@testks] list testcf;
Using default limit of 100
-------------------
RowKey: test
=&amp;gt; (column=626172, value=626172, timestamp=1291821869120000)
=&amp;gt; (column=666f6f, value=666f6f, timestamp=1291821857320000)

1 Row Returned.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12492744">CASSANDRA-1837</key>
            <summary>Deleted columns are resurrected after a flush</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gdusbabek">Gary Dusbabek</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Dec 2010 15:25:56 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:11 +0000</updated>
                            <resolved>Wed, 15 Dec 2010 15:24:40 +0000</resolved>
                                        <fixVersion>0.7.0 rc 3</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12969345" author="brandon.williams" created="Wed, 8 Dec 2010 15:36:57 +0000"  >&lt;p&gt;I had a suspicion it was related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1780&quot; title=&quot;periodic + flush commitlog mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1780&quot;&gt;&lt;del&gt;CASSANDRA-1780&lt;/del&gt;&lt;/a&gt;, but I backed it out and the problem persists.&lt;/p&gt;</comment>
                            <comment id="12969479" author="jbellis" created="Wed, 8 Dec 2010 20:40:44 +0000"  >&lt;p&gt;can you port to TableTest?  it has reTest to check for same behavior before-and-after-flush.&lt;/p&gt;</comment>
                            <comment id="12970300" author="gdusbabek" created="Fri, 10 Dec 2010 20:10:40 +0000"  >&lt;p&gt;This is happening because of bug in the way deleted rows are &lt;span class=&quot;error&quot;&gt;&amp;#91;not&amp;#93;&lt;/span&gt; interpreted once they leave the memtable in the CFS.getRangeSlice code.  CFS.getColumnFamily doesn&apos;t exhibit the bug, but the codepath is pretty different.&lt;/p&gt;

&lt;p&gt;I&apos;ve got a fix that addresses standard columns, but it breaks a few of the nosetests for super columns.  Looking into that now.&lt;/p&gt;</comment>
                            <comment id="12971333" author="gdusbabek" created="Tue, 14 Dec 2010 17:31:40 +0000"  >&lt;p&gt;This might be a problem in 0.6 too.  Porting the unit test over isn&apos;t trivial though...&lt;/p&gt;</comment>
                            <comment id="12971343" author="gdusbabek" created="Tue, 14 Dec 2010 17:52:15 +0000"  >&lt;p&gt;Ported unit test to 0.6. Verifies non-breakage there.&lt;/p&gt;</comment>
                            <comment id="12971441" author="jbellis" created="Tue, 14 Dec 2010 22:26:15 +0000"  >&lt;p&gt;Thanks for tracking that down, Gary!&lt;/p&gt;

&lt;p&gt;I think it makes sense to centralize the lastReducedAt logic in getReduced to avoid having a field that is initialized in one method and cleared in another (which looks like a bug in v1, that it doesn&apos;t get cleared between rows).  v2 attached w/ this approach.&lt;/p&gt;</comment>
                            <comment id="12971456" author="gdusbabek" created="Tue, 14 Dec 2010 22:47:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think it makes sense to centralize the lastReducedAt logic in getReduced...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Right. My mistake.&lt;/p&gt;</comment>
                            <comment id="12971701" author="jbellis" created="Wed, 15 Dec 2010 15:12:49 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12971706" author="gdusbabek" created="Wed, 15 Dec 2010 15:24:40 +0000"  >&lt;p&gt;committed.&lt;/p&gt;</comment>
                            <comment id="12971707" author="hudson" created="Wed, 15 Dec 2010 15:44:13 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #84 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.7/84/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.7/84/&lt;/a&gt;)&lt;br/&gt;
    track row deletions when merging cols to form a row. patch by gdusbabek and jbellis. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1837&quot; title=&quot;Deleted columns are resurrected after a flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1837&quot;&gt;&lt;del&gt;CASSANDRA-1837&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12971720" author="hudson" created="Wed, 15 Dec 2010 16:15:06 +0000"  >&lt;p&gt;Integrated in Cassandra #631 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra/631/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra/631/&lt;/a&gt;)&lt;br/&gt;
    changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1837&quot; title=&quot;Deleted columns are resurrected after a flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1837&quot;&gt;&lt;del&gt;CASSANDRA-1837&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
track row deletions when merging cols to form a row. patch by gdusbabek and jbellis. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1837&quot; title=&quot;Deleted columns are resurrected after a flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1837&quot;&gt;&lt;del&gt;CASSANDRA-1837&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
unit tests that show bug. patch by gdusbabek, reviewed by jbellis. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1837&quot; title=&quot;Deleted columns are resurrected after a flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1837&quot;&gt;&lt;del&gt;CASSANDRA-1837&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12983480" author="dave111" created="Wed, 19 Jan 2011 01:19:31 +0000"  >&lt;p&gt;just wanted to take credit for originally discovering and reporting this to driftx in the chat. my original example- &lt;a href=&quot;http://pastie.org/1358812&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pastie.org/1358812&lt;/a&gt;.  thanks for the fix and quick turnaround.&lt;/p&gt;</comment>
                            <comment id="12983482" author="brandon.williams" created="Wed, 19 Jan 2011 01:21:24 +0000"  >&lt;p&gt;Thanks for finding this, Dave.  (I am driftx on irc)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12466228" name="1837-0.6-unit-test.diff" size="9117" author="gdusbabek" created="Tue, 14 Dec 2010 17:52:15 +0000"/>
                            <attachment id="12466225" name="ASF.LICENSE.NOT.GRANTED--v1-0001-unit-tests-that-show-bug.txt" size="10221" author="gdusbabek" created="Tue, 14 Dec 2010 17:29:30 +0000"/>
                            <attachment id="12466226" name="ASF.LICENSE.NOT.GRANTED--v1-0002-copy-deletion-time-to-reduced-column-families.txt" size="2712" author="gdusbabek" created="Tue, 14 Dec 2010 17:29:30 +0000"/>
                            <attachment id="12466259" name="v2-0002.txt" size="4329" author="jbellis" created="Tue, 14 Dec 2010 22:26:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[gdusbabek]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20337</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g7pr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92680</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>