<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:18:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14541] Order of warning and custom payloads is unspecified in the protocol specification</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14541</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Section 2.2 of the protocol specification documents the types of tracing, warning, and custom payloads, but&#160;does not document their order in the body.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13167857">CASSANDRA-14541</key>
            <summary>Order of warning and custom payloads is unspecified in the protocol specification</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="samt">Sam Tunnicliffe</assignee>
                                    <reporter username="avi.kivity">Avi Kivity</reporter>
                        <labels>
                            <label>protocolv4</label>
                            <label>protocolv5</label>
                    </labels>
                <created>Sun, 24 Jun 2018 07:23:25 +0000</created>
                <updated>Fri, 22 Jan 2021 15:11:33 +0000</updated>
                            <resolved>Fri, 22 Jan 2021 15:11:33 +0000</resolved>
                                        <fixVersion>2.2.20</fixVersion>
                    <fixVersion>3.0.24</fixVersion>
                    <fixVersion>3.11.10</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Documentation and Website</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16525733" author="jjirsa" created="Wed, 27 Jun 2018 23:48:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; - you&apos;ve spent some time on protocol / driver, is this something you can glance at?&lt;/p&gt;</comment>
                            <comment id="16734802" author="michaelsembwever" created="Sat, 5 Jan 2019 08:02:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=avi.kivity&quot; class=&quot;user-hover&quot; rel=&quot;avi.kivity&quot;&gt;avi.kivity&lt;/a&gt;, i&apos;m taking on a review of this. as i&apos;m new to this code so could you help me out with the following&#8230;&lt;/p&gt;

&lt;p&gt;The order of `tracing, custom-payload, warnings` is easily confirmed by looking at &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/transport/Message.java#L317-L319&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Message.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But where is the &quot;padding&quot; happening in the code?&lt;/p&gt;


&lt;p&gt;Regarding the formatting of the text, it seems a little odd for the spec document. i don&apos;t see such style anywhere else. Also what you&apos;re adding is not only about the flags in the specification, but about the order of contents in the &lt;b&gt;body&lt;/b&gt;. That is it is dealing with a broader context than that of &apos;Section 2. Frame Header&apos;.&lt;/p&gt;

&lt;p&gt;To meet the existing format layout/style and correct context, I&apos;m wondering if it would make more sense to rewrite the patch into something along the lines of &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;4. Messages

Dependant on the flags specified in the header, the overall body of the message body must be:
    [&amp;lt;tracing_id&amp;gt;][&amp;lt;warnings&amp;gt;][&amp;lt;custom_payload&amp;gt;]&amp;lt;opcode_message&amp;gt;[&amp;lt;padding&amp;gt;]
  where:
    - &amp;lt;tracing_id&amp;gt; is a UUID tracing ID (if this is a request message, and if the Tracing flag is set).
    - &amp;lt;warnings&amp;gt; is a string list of warnings (if this is a request message, if the Warning flag is set).
    - &amp;lt;custom_payload&amp;gt; is bytes map for the serialised custom payload (if the Custom payload flag is set)
    - &amp;lt;opcode_message&amp;gt; as defined below through sections 4 and 5.
    - &amp;lt;padding&amp;gt; possibly empty padding to fill out the body to the message length as specified in the header. ???is this accurate?

4.1. Requests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On a separate note, while we&apos;re tackling this, the sentence &quot;The rest of the body will then be the usual body corresponding to the response opcode.&quot; could be removed. It doesn&apos;t make sense in the middle of the flags section.&lt;/p&gt;</comment>
                            <comment id="17257801" author="michaelsembwever" created="Sun, 3 Jan 2021 16:55:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt;, since recent work on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-14688&quot; title=&quot;Update protocol spec and class level doc with protocol checksumming details&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-14688&quot;&gt;&lt;del&gt;CASSANDRA-14688&lt;/del&gt;&lt;/a&gt;, what are you thoughts to my suggested patch in the previous^ comment?&lt;/p&gt;</comment>
                            <comment id="17267792" author="beobal" created="Tue, 19 Jan 2021 09:56:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;&#160;your patch LGTM. FTR, the ordering of tracing ID and warnings was specified in section 2.2 (flags), but the position of custom payload was still potentially ambiguous so I&apos;ve added some text to clean that up. This affects both protocol v4 and v5 specs, so I&apos;ve pushed modified versions of both &lt;a href=&quot;https://github.com/beobal/cassandra/commit/219ee43af65690131fa87829e7d43558f20f1474&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. If they look right to you, I&apos;ll commit them to the appropriate branches.&#160;&lt;/p&gt;</comment>
                            <comment id="17269349" author="michaelsembwever" created="Thu, 21 Jan 2021 14:42:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=samt&quot; class=&quot;user-hover&quot; rel=&quot;samt&quot;&gt;samt&lt;/a&gt;, your updates to v4 and v5 specs look good to me! &lt;/p&gt;</comment>
                            <comment id="17270202" author="beobal" created="Fri, 22 Jan 2021 15:11:33 +0000"  >&lt;p&gt;Committed, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12928910" name="v1-0001-Document-order-of-tracing-warning-and-custom-payl.patch" size="3027" author="avi.kivity" created="Sun, 24 Jun 2018 07:25:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13101"><![CDATA[Clients]]></customfieldvalue>
    <customfieldvalue key="13102"><![CDATA[Docs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3v64n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mck</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mck]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332983">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/732ec7723856fdab43e6e4dd297c1335c818686c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/732ec7723856fdab43e6e4dd297c1335c818686c&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Documentation update only.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>