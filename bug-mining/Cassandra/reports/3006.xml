<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:47:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-7656] UDT with null/missing attributes</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-7656</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I have experienced problem with queriing UDTs stored with some not filled attributes through new java driver 2.1. I tried to query them in cqlsh too and it failed. I tried to simulate it again with fresh C* directly in cqlsh and it seems it has problems in some cases. I have tested it with UDT defined as (a ascii, b ascii, c ascii, d ascii, e ascii, f ascii, g ascii). &lt;/p&gt;

&lt;p&gt;Few observations:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Store {a:&apos;a&apos;} is ok, it returns {a: &apos;a&apos;, b: &apos;&apos;, c: &apos;&apos;, d: &apos;&apos;, e: &apos;&apos;, f: &apos;&apos;, g: &apos;&apos;}
Store {a:&apos;a&apos;, b:&apos;b&apos;, c:&apos;c&apos;, d:&apos;d&apos;, e:&apos;e&apos;, f:&apos;f&apos;, g:&apos;g&apos;} is ok, returns all filled.
Store {a:&apos;a&apos;,  g:&apos;g&apos;} fills a only.
Store {a:&apos;a&apos;, b:&apos;b&apos;, d:&apos;d&apos;, e:&apos;e&apos;, f:&apos;f&apos;, g:&apos;g&apos;} (missing c) failed on load.
Store {a:&apos;a&apos;, f:&apos;f&apos;, g:&apos;g&apos;} fills just a. 
Store {f:&apos;f&apos;,g:&apos;g&apos;} nothing filled
Store {e:&apos;e&apos;,f:&apos;f&apos;,g:&apos;g&apos;} failed on load.
....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;you can reproduce it with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;./cqlsh
Connected to WOC at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 2.1.0-rc4 | CQL spec 3.2.0 | Native protocol v3]
Use HELP for help.
cqlsh&amp;gt; create keyspace testks WITH REPLICATION = { &apos;class&apos; : &apos;SimpleStrategy&apos;, &apos;replication_factor&apos; : 1};
cqlsh&amp;gt; use testks;
cqlsh:testks&amp;gt; CREATE TYPE IF NOT EXISTS data (a ascii, b ascii, c ascii, d ascii, e ascii, f ascii, g ascii);
cqlsh:testks&amp;gt; CREATE TABLE IF NOT EXISTS bbb (a ascii primary key, b data);
cqlsh:testks&amp;gt; insert into testks.bbb (a,b) values (&apos;a&apos;, {a:&apos;a&apos;});
cqlsh:testks&amp;gt; select * from bbb;

 a | b
---+----------------------------------------------------
 a | {a: &apos;a&apos;, b: &apos;&apos;, c: &apos;&apos;, d: &apos;&apos;, e: &apos;&apos;, f: &apos;&apos;, g: &apos;&apos;}

(1 rows)

cqlsh:testks&amp;gt; insert into testks.bbb (a,b) values (&apos;a&apos;, {a:&apos;a&apos;, b:&apos;b&apos;, c:&apos;c&apos;, d:&apos;d&apos;, e:&apos;e&apos;, f:&apos;f&apos;, g:&apos;g&apos;});
cqlsh:testks&amp;gt; select * from bbb;

 a | b
---+----------------------------------------------------------
 a | {a: &apos;a&apos;, b: &apos;b&apos;, c: &apos;c&apos;, d: &apos;d&apos;, e: &apos;e&apos;, f: &apos;f&apos;, g: &apos;g&apos;}

(1 rows)

cqlsh&amp;gt; insert into testks.bbb (a,b) values (&apos;a&apos;, {a:&apos;a&apos;,  g:&apos;g&apos;});
cqlsh&amp;gt; select * from testks.bbb;

 a | b
---+----------------------------------------------------
 a | {a: &apos;a&apos;, b: &apos;&apos;, c: &apos;&apos;, d: &apos;&apos;, e: &apos;&apos;, f: &apos;&apos;, g: &apos;&apos;}

(1 rows)

cqlsh:testks&amp;gt; insert into testks.bbb (a,b) values (&apos;a&apos;, {a:&apos;a&apos;, b:&apos;b&apos;, d:&apos;d&apos;, e:&apos;e&apos;, f:&apos;f&apos;, g:&apos;g&apos;});
cqlsh:testks&amp;gt; select * from bbb;
Traceback (most recent call last):
  File &quot;./cqlsh&quot;, line 901, in perform_simple_statement
    rows = self.session.execute(statement, trace=self.tracing_enabled)
  File &quot;/srv/apache-cassandra-2.1.0-rc4/bin/../lib/cassandra-driver-internal-only-2.1.0b1.post.zip/cassandra-driver-2.1.0b1.post/cassandra/cluster.py&quot;, line 1186, in execute
    result = future.result(timeout)
  File &quot;/srv/apache-cassandra-2.1.0-rc4/bin/../lib/cassandra-driver-internal-only-2.1.0b1.post.zip/cassandra-driver-2.1.0b1.post/cassandra/cluster.py&quot;, line 2610, in result
    raise self._final_exception
error: unpack requires a string argument of length 4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12731056">CASSANDRA-7656</key>
            <summary>UDT with null/missing attributes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thobbs">Tom Hobbs</assignee>
                                    <reporter username="shinigami">Jaroslav Kamenik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Jul 2014 12:52:23 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:38 +0000</updated>
                            <resolved>Fri, 1 Aug 2014 23:10:56 +0000</resolved>
                                        <fixVersion>2.1 rc5</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14082438" author="thobbs" created="Fri, 1 Aug 2014 16:29:35 +0000"  >&lt;p&gt;It looks like this is a problem with how the python driver (and hence cqlsh) handles deserialization of null items.  I&apos;ll verify that&apos;s the case for the java driver as well.&lt;/p&gt;</comment>
                            <comment id="14082736" author="thobbs" created="Fri, 1 Aug 2014 18:49:36 +0000"  >&lt;p&gt;My &lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-7656&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-7656 branch&lt;/a&gt; updates the bundled python driver to include the fix for &lt;a href=&quot;https://datastax-oss.atlassian.net/browse/PYTHON-110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PYTHON-110&lt;/a&gt;, which was causing this.&lt;/p&gt;

&lt;p&gt;If we want, I can patch the deserialize functions in cqlsh instead of updating the bundled driver.&lt;/p&gt;</comment>
                            <comment id="14083114" author="iamaleksey" created="Fri, 1 Aug 2014 22:45:57 +0000"  >&lt;p&gt;+1 (to the updated-bundled-driver branch).&lt;/p&gt;</comment>
                            <comment id="14083147" author="thobbs" created="Fri, 1 Aug 2014 23:10:56 +0000"  >&lt;p&gt;Thanks, committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409128</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ye7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12327458">2.1 rc4</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>