<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:11:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-241] move daemon to framed transport (thrift)</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-241</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The framed transports in thrift wrap the underlying transport to prepend the message size as a 4 byte value.  There are purported benefits to buffering, but the main purpose of these wrappers is to allow non-blocking servers to perform reads without deserialization. Of course, if the server transport is framed, the client&apos;s must be as well, and vice versa, (framed and non-framed transports are incompatible). &lt;/p&gt;

&lt;p&gt;CassandraDaemon is currently a threaded server with the default transport, I believe we should change it to being framed, for compatibility with non-blocking clients (this actually came up during an attempt to use a Twisted client).&lt;/p&gt;

&lt;p&gt;This will break all existing client apps, (even if fixing them is trivial).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428401">CASSANDRA-241</key>
            <summary>move daemon to framed transport (thrift)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="urandom">Eric Evans</assignee>
                                    <reporter username="urandom">Eric Evans</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jun 2009 19:43:17 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:37 +0000</updated>
                            <resolved>Mon, 10 Aug 2009 18:57:26 +0000</resolved>
                                        <fixVersion>0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12721967" author="jbellis" created="Fri, 19 Jun 2009 19:58:24 +0000"  >&lt;p&gt;Does Thrift give a meaningful error if you try connecting w/ non-framed client to framed Cassandra server or does it just silently do nonsense?&lt;/p&gt;

&lt;p&gt;If the latter, please post to -dev and -users that this change is going to happen Monday in trunk and then I will commit it.&lt;/p&gt;</comment>
                            <comment id="12721969" author="urandom" created="Fri, 19 Jun 2009 20:00:20 +0000"  >&lt;p&gt;It silently does nonsense. I will post to the lists.&lt;/p&gt;</comment>
                            <comment id="12721982" author="urandom" created="Fri, 19 Jun 2009 20:24:47 +0000"  >&lt;p&gt;Also, once this is committed, &lt;a href=&quot;http://wiki.apache.org/cassandra/ClientExamples&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/cassandra/ClientExamples&lt;/a&gt; will need to be updated accordingly.&lt;/p&gt;</comment>
                            <comment id="12722042" author="junrao" created="Fri, 19 Jun 2009 21:57:51 +0000"  >&lt;p&gt;could you explain a bit more what exactly are non-blocking clients?&lt;/p&gt;</comment>
                            <comment id="12722614" author="urandom" created="Mon, 22 Jun 2009 14:17:12 +0000"  >&lt;p&gt;A non-blocking client is one that uses a non-blocking socket and select/poll to determine when it is ready to read/write from/to the server.&lt;/p&gt;</comment>
                            <comment id="12724902" author="jbellis" created="Sat, 27 Jun 2009 22:46:07 +0000"  >&lt;p&gt;I think the consensus on the list was that we should make the transport to use an option given that the following Thrift languages lack the Framed option.&lt;/p&gt;

&lt;p&gt;C#&lt;br/&gt;
Cocoa&lt;br/&gt;
Haskell&lt;br/&gt;
Ocaml&lt;br/&gt;
Smalltalk&lt;/p&gt;</comment>
                            <comment id="12733885" author="urandom" created="Tue, 21 Jul 2009 23:16:44 +0000"  >&lt;p&gt;Just to provide some update:&lt;/p&gt;

&lt;p&gt;There are a couple of reasons why I&apos;ve been avoiding a configuration option to enable/disable framed transport.&lt;/p&gt;

&lt;p&gt;1. Whether or not the transport is framed or not is an implementation detail of Thrift, it sucks that we would be forced to expose this to our users.&lt;/p&gt;

&lt;p&gt;2. Until &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-210&quot; title=&quot;Add support for TFramedTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-210&quot;&gt;&lt;del&gt;THRIFT-210&lt;/del&gt;&lt;/a&gt; is complete (better yet, &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-538&quot; title=&quot;missing support for framed transport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-538&quot;&gt;&lt;del&gt;THRIFT-538&lt;/del&gt;&lt;/a&gt;), there won&apos;t be any one setting that will let you run a server compatible with all clients. For example, with a framed transport enabled C# clients currently aren&apos;t possible, conversely without a framed transport, Twisted clients are left out in the cold.&lt;/p&gt;

&lt;p&gt;It has been my hope that the Thrift team would close at least &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-210&quot; title=&quot;Add support for TFramedTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-210&quot;&gt;&lt;del&gt;THRIFT-210&lt;/del&gt;&lt;/a&gt; (there is a patch attached), so that we could accommodate all of our users with a framed transport (and without requiring it to be configured).&lt;/p&gt;

&lt;p&gt;However, considering how long &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-210&quot; title=&quot;Add support for TFramedTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-210&quot;&gt;&lt;del&gt;THRIFT-210&lt;/del&gt;&lt;/a&gt; has been open (and considering the complete lack of response to &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-538&quot; title=&quot;missing support for framed transport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-538&quot;&gt;&lt;del&gt;THRIFT-538&lt;/del&gt;&lt;/a&gt;), it may in fact be necessary to add an option so that our users can at least choose what (not  )to support.&lt;/p&gt;
</comment>
                            <comment id="12740827" author="jbellis" created="Sat, 8 Aug 2009 03:13:02 +0000"  >&lt;p&gt;Should we move this to 0.5?&lt;/p&gt;</comment>
                            <comment id="12740840" author="euphoria" created="Sat, 8 Aug 2009 05:28:22 +0000"  >&lt;p&gt;It shouldn&apos;t be too difficult to make framed an option.  I think we should add the option to 0.4 (keeping the existing non-framed as default) until further evaluation for 0.5.&lt;/p&gt;</comment>
                            <comment id="12741015" author="jbellis" created="Sun, 9 Aug 2009 02:50:13 +0000"  >&lt;p&gt;I guess it&apos;s up to Eric or other people who need Framed.  I&apos;m okay either way.&lt;/p&gt;</comment>
                            <comment id="12741018" author="urandom" created="Sun, 9 Aug 2009 02:58:05 +0000"  >&lt;p&gt;I&apos;ll follow up with a patch shortly.&lt;/p&gt;</comment>
                            <comment id="12741361" author="jbellis" created="Mon, 10 Aug 2009 15:15:30 +0000"  >&lt;p&gt;can you add boolean sanity checking like this?&lt;/p&gt;

&lt;p&gt;            String syncRaw = xmlUtils.getNodeValue(&quot;/Storage/CommitLogSync&quot;);&lt;br/&gt;
            if (!&quot;false&quot;.equals(syncRaw) &amp;amp;&amp;amp; !&quot;true&quot;.equals(syncRaw))&lt;/p&gt;
            {
                // Bool.valueOf will silently assume false for values it doesn&apos;t recognize
                throw new ConfigurationException(&quot;Unrecognized value for CommitLogSync.  Use &apos;true&apos; or &apos;false&apos;.&quot;);
            }
&lt;p&gt;            commitLogSync_ = Boolean.valueOf(syncRaw);&lt;/p&gt;</comment>
                            <comment id="12741385" author="urandom" created="Mon, 10 Aug 2009 15:50:08 +0000"  >&lt;p&gt;I was trying to make this as optional as possible, and the pattern cited above doesn&apos;t support that.&lt;/p&gt;

&lt;p&gt;For the vast majority of users this doesn&apos;t make any sense whatsoever; tweaking it is more likely to break, rather than enable. I really didn&apos;t even want to draw the sort of attention to it that an example entry in the sample config provides (and I&apos;m still sort of wishing it was less &quot;documented&quot;).&lt;/p&gt;

&lt;p&gt;However, since I already feel &quot;beaten&quot; by this issue I&apos;ll update the patch if you feel it should be mandatory. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12741488" author="jbellis" created="Mon, 10 Aug 2009 18:50:36 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12741491" author="euphoria" created="Mon, 10 Aug 2009 18:54:18 +0000"  >&lt;p&gt;+1, looks good.  Thanks for accommodating, Eric.&lt;/p&gt;</comment>
                            <comment id="12741494" author="urandom" created="Mon, 10 Aug 2009 18:57:26 +0000"  >&lt;p&gt;committed.&lt;/p&gt;</comment>
                            <comment id="12741841" author="hudson" created="Tue, 11 Aug 2009 12:57:30 +0000"  >&lt;p&gt;Integrated in Cassandra #164 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/164/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/164/&lt;/a&gt;)&lt;br/&gt;
     optional support for framed transport&lt;/p&gt;</comment>
                            <comment id="12777596" author="esteve" created="Fri, 13 Nov 2009 18:19:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-210&quot; title=&quot;Add support for TFramedTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-210&quot;&gt;&lt;del&gt;THRIFT-210&lt;/del&gt;&lt;/a&gt; is fixed as of rev 835006. As for &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-538&quot; title=&quot;missing support for framed transport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-538&quot;&gt;&lt;del&gt;THRIFT-538&lt;/del&gt;&lt;/a&gt;, I think nobody is working on it, the Cocoa, Haskell, Ocaml and Smalltalk ports are not actively maintained, AFAIK.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12411254" name="241.txt" size="2056" author="urandom" created="Fri, 19 Jun 2009 19:44:18 +0000"/>
                            <attachment id="12416009" name="ASF.LICENSE.NOT.GRANTED--v1-0001-CASSANDRA-241-optional-support-for-framed-transport.txt" size="4941" author="urandom" created="Sun, 9 Aug 2009 22:30:59 +0000"/>
                            <attachment id="12416089" name="ASF.LICENSE.NOT.GRANTED--v2-0001-CASSANDRA-241-optional-support-for-framed-transport.txt" size="5487" author="urandom" created="Mon, 10 Aug 2009 17:08:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19607</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fxqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91063</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>