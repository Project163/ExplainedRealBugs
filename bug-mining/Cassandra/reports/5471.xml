<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:16:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11402] Alignment wrong in tpstats output for PerDiskMemtableFlushWriter and format to YAML is broken</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11402</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;With the accompanying designation of which memtableflushwriter it is, this threadpool name is too long for the hardcoded padding in tpstats output.&lt;/p&gt;

&lt;p&gt;We should dynamically calculate padding so that we don&apos;t need to check this every time we add a threadpool.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952489">CASSANDRA-11402</key>
            <summary>Alignment wrong in tpstats output for PerDiskMemtableFlushWriter and format to YAML is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefan.miklosovic">Stefan Miklosovic</assignee>
                                    <reporter username="jkni">Joel Knighton</reporter>
                        <labels>
                            <label>lhf</label>
                    </labels>
                <created>Tue, 22 Mar 2016 15:51:16 +0000</created>
                <updated>Sun, 3 Jan 2021 17:02:42 +0000</updated>
                            <resolved>Wed, 2 Sep 2020 20:56:24 +0000</resolved>
                                        <fixVersion>4.0-beta3</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="15220338" author="ryanmagnusson" created="Thu, 31 Mar 2016 18:01:20 +0000"  >&lt;p&gt;Please let me know if this looks correct. &lt;br/&gt;
I&apos;ve also uploaded my changes to github @ &lt;a href=&quot;https://github.com/RyanMagnusson/cassandra/tree/11402-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/RyanMagnusson/cassandra/tree/11402-3.0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15235522" author="jkni" created="Mon, 11 Apr 2016 17:16:59 +0000"  >&lt;p&gt;Hey Ryan, this definitely looks like the right idea, but my main reservation is that it duplicates some functionality we almost already have.&lt;/p&gt;

&lt;p&gt;Inside the org.apache.cassandra.tools.nodetool.formatter package, there&apos;s a TableBuilder used to output tables for some other nodetool commands. I think it would be great to reuse this in printing the table for tpstats.&lt;/p&gt;

&lt;p&gt;We also should fix the output of this table in org.apache.cassandra.utils.StatusLogger - to do so, we probably should bring the TableBuilder in from nodetool-descended packages and add it to something like FBUtilities instead.&lt;/p&gt;

&lt;p&gt;Would you be interested in switching your patch to this approach?&lt;/p&gt;</comment>
                            <comment id="15257028" author="nkelkar" created="Mon, 25 Apr 2016 20:52:25 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt;, uploading a patch as you mentioned in your comment above (I&apos;ve actually been following this ticket for some time, didn&apos;t get to uploading the patch in time before Ryan&apos;s solution; sorry about that).&lt;/p&gt;

&lt;p&gt;Thanks, and let me know if this is fine.&lt;/p&gt;</comment>
                            <comment id="15257093" author="jkni" created="Mon, 25 Apr 2016 21:33:55 +0000"  >&lt;p&gt;That looks like the right approach - as I mentioned in the comment above, it would be great if we also fixed the output in org.apache.cassandra.utils.StatusLogger.&lt;/p&gt;

&lt;p&gt;That said, since he is Assignee, let me check with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=RyanMagnusson&quot; class=&quot;user-hover&quot; rel=&quot;RyanMagnusson&quot;&gt;RyanMagnusson&lt;/a&gt; - do you have a problem with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkelkar&quot; class=&quot;user-hover&quot; rel=&quot;nkelkar&quot;&gt;nkelkar&lt;/a&gt; taking over this ticket or would you prefer to revise your patch based on my comment above?&lt;/p&gt;</comment>
                            <comment id="15283193" author="jkni" created="Fri, 13 May 2016 21:43:31 +0000"  >&lt;p&gt;Okay - I think there&apos;s been enough time here. Are you interested in extending your patch to handle the StatusLogger case &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkelkar&quot; class=&quot;user-hover&quot; rel=&quot;nkelkar&quot;&gt;nkelkar&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15283201" author="nkelkar" created="Fri, 13 May 2016 21:47:51 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkni&quot; class=&quot;user-hover&quot; rel=&quot;jkni&quot;&gt;jkni&lt;/a&gt;, sure, I can work on extending the patch and post back on this ticket.&lt;/p&gt;</comment>
                            <comment id="15283214" author="jkni" created="Fri, 13 May 2016 22:02:17 +0000"  >&lt;p&gt;Thanks - I&apos;ve assigned the issue to you.&lt;/p&gt;</comment>
                            <comment id="17182053" author="stefan.miklosovic" created="Fri, 21 Aug 2020 18:13:44 +0000"  >&lt;p&gt;Assigning to myself due to inactivity.&lt;/p&gt;</comment>
                            <comment id="17182056" author="stefan.miklosovic" created="Fri, 21 Aug 2020 18:16:17 +0000"  >&lt;p&gt;I hijacked this issue as I was checking if there is already some and this one seems to be the most similar.&lt;/p&gt;

&lt;p&gt;Besides of rewriting TPStats to use TableBuilder, there is a bug when -F yaml is introduced as it can not output that as YAML due to the fact that dump can not process arrays of primitives and it throws an exception hence as of now (trunk), tpstats in YAML are broken.&lt;/p&gt;

&lt;p&gt;The PR fixes it both.&lt;/p&gt;</comment>
                            <comment id="17182076" author="stefan.miklosovic" created="Fri, 21 Aug 2020 18:48:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/717&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/717&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Already added patches by the original contributor are not relevant anymore.&lt;/p&gt;</comment>
                            <comment id="17182134" author="brandon.williams" created="Fri, 21 Aug 2020 20:37:51 +0000"  >&lt;p&gt;This looks good, can we add a test for the yaml format?&lt;/p&gt;</comment>
                            <comment id="17182161" author="stefan.miklosovic" created="Fri, 21 Aug 2020 21:30:27 +0000"  >&lt;p&gt;Indeed, the most proper test would consist of starting a node via dtest api and invoking nodetool tpstats dumping that yaml, parsing the output of that command and feeding it back to yaml to close that loop.&lt;/p&gt;

&lt;p&gt;The required bits to do this (nodetool output against a node) is introduced in&#160;&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15406&quot; title=&quot;Show the progress of data streaming and index build &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15406&quot;&gt;&lt;del&gt;CASSANDRA-15406&lt;/del&gt;&lt;/a&gt; which is under review of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dcapwell&quot; class=&quot;user-hover&quot; rel=&quot;dcapwell&quot;&gt;dcapwell&lt;/a&gt;&#160;so as soon as that one is merged, I ll finish this one.&#160;&lt;/p&gt;</comment>
                            <comment id="17189607" author="stefan.miklosovic" created="Wed, 2 Sep 2020 18:07:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; I realized that I can not test that. I wanted to use distributed test where I just start a node and call nodetool against that but we are not registering any thread pools there. InternalNodeProbe#getThreadPools() overrides NodeProbe#getThreadPools() with UnsupportedOperationException().&lt;/p&gt;

&lt;p&gt;InternalNodeProbe has this in its connect method:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void connect()
    {
        &lt;span class=&quot;code-comment&quot;&gt;// note that we are not connecting via JMX &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; testing
&lt;/span&gt;        mbeanServerConn = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
       ...
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Would you mind to go over this manually? It is just too much of a work to spend on something so trivial like this changing a lot of things, not even sure if it is possible.&lt;/p&gt;</comment>
                            <comment id="17189703" author="brandon.williams" created="Wed, 2 Sep 2020 20:56:24 +0000"  >&lt;p&gt;Fair enough, it can&apos;t get any more broken than it was.  I think we could still do an &apos;improper&apos; test in a unit test, but we&apos;ll leave it for now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12800637" name="11402-3_5_patch1.patch" size="3004" author="nkelkar" created="Mon, 25 Apr 2016 20:52:25 +0000"/>
                            <attachment id="12796357" name="11402-trunk.txt" size="6262" author="RyanMagnusson" created="Thu, 31 Mar 2016 17:58:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefan.miklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v19j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333260">3.2</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348281">4.0-alpha1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/2dbba13fdb555b3a297a7677896091cc880b5da5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/2dbba13fdb555b3a297a7677896091cc880b5da5&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;visual testing&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>