<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:58:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10233] IndexOutOfBoundsException in HintedHandOffManager</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10233</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After upgrading our cluster to 2.2.0, the following error started showing exectly every 10 minutes on every server in the cluster:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INFO  [CompactionExecutor:1381] 2015-08-31 18:31:55,506 CompactionTask.java:142 - Compacting (8e7e1520-500e-11e5-b1e3-e95897ba4d20) [/cassandra/data/system/hints-2666e20573ef38b390fefecf96e8f0c7/la-540-big-Data.db:level=0, ]
INFO  [CompactionExecutor:1381] 2015-08-31 18:31:55,599 CompactionTask.java:224 - Compacted (8e7e1520-500e-11e5-b1e3-e95897ba4d20) 1 sstables to [/cassandra/data/system/hints-2666e20573ef38b390fefecf96e8f0c7/la-541-big,] to level=0.  1,544,495 bytes to 1,544,495 (~100% of original) in 93ms = 15.838121MB/s.  0 total partitions merged to 4.  Partition merge counts were {1:4, }
ERROR [HintedHandoff:1] 2015-08-31 18:31:55,600 CassandraDaemon.java:182 - Exception in thread Thread[HintedHandoff:1,1,main]
java.lang.IndexOutOfBoundsException: null
	at java.nio.Buffer.checkIndex(Buffer.java:538) ~[na:1.7.0_79]
	at java.nio.HeapByteBuffer.getLong(HeapByteBuffer.java:410) ~[na:1.7.0_79]
	at org.apache.cassandra.utils.UUIDGen.getUUID(UUIDGen.java:106) ~[apache-cassandra-2.2.0.jar:2.2.0]
	at org.apache.cassandra.db.HintedHandOffManager.scheduleAllDeliveries(HintedHandOffManager.java:515) ~[apache-cassandra-2.2.0.jar:2.2.0]
	at org.apache.cassandra.db.HintedHandOffManager.access$000(HintedHandOffManager.java:88) ~[apache-cassandra-2.2.0.jar:2.2.0]
	at org.apache.cassandra.db.HintedHandOffManager$1.run(HintedHandOffManager.java:168) ~[apache-cassandra-2.2.0.jar:2.2.0]
	at org.apache.cassandra.concurrent.DebuggableScheduledThreadPoolExecutor$UncomplainingRunnable.run(DebuggableScheduledThreadPoolExecutor.java:118) ~[apache-cassandra-2.2.0.jar:2.2.0]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_79]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:304) [na:1.7.0_79]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178) [na:1.7.0_79]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.7.0_79]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_79]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_79]
	at java.lang.Thread.run(Thread.java:745) [na:1.7.0_79]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Cassandra 2.2.0&lt;/p&gt;</environment>
        <key id="12860774">CASSANDRA-10233</key>
            <summary>IndexOutOfBoundsException in HintedHandOffManager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eitikimura">J.P. Eiti Kimura</assignee>
                                    <reporter username="mroi">Omri Iluz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Aug 2015 18:44:26 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:57 +0000</updated>
                            <resolved>Wed, 14 Oct 2015 15:59:46 +0000</resolved>
                                        <fixVersion>2.1.12</fixVersion>
                    <fixVersion>2.2.4</fixVersion>
                                        <due></due>
                            <votes>13</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14727558" author="enigmacurry" created="Wed, 2 Sep 2015 16:10:01 +0000"  >&lt;p&gt;We haven&apos;t seen this in our upgrade suite. Can you provide any further information as to your environment, what version did you upgrade from? Any non-default cassandra yaml settings? Can you procide your (sanitized) schema, and any other relevant logs?&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krummas&quot; class=&quot;user-hover&quot; rel=&quot;krummas&quot;&gt;krummas&lt;/a&gt; if he has any hint as to the problem.&lt;/p&gt;</comment>
                            <comment id="14728125" author="mroi" created="Wed, 2 Sep 2015 22:19:28 +0000"  >&lt;p&gt;Upgraded from 2.1.8. I upgraded today to 2.2.1 and still see the issue.&lt;/p&gt;

&lt;p&gt;I am not sure which table is causing this issue and we have quite a few tables so pasting the whole schema would be impossible. If you have any pointers on how to narrow to a single table (or even a single keyspace) I&apos;d be happy to provide it&apos;s schema.&lt;/p&gt;

&lt;p&gt;The only changes to cassandra.yaml are increasing the write timeout and increasing the size of out of heap memtable to 6GB.&lt;/p&gt;</comment>
                            <comment id="14937713" author="eitikimura" created="Wed, 30 Sep 2015 17:00:47 +0000"  >&lt;p&gt;In fact I don&apos;t believe that this problem is related exclusively to versions 2.2.X.&lt;br/&gt;
I&apos;m facing the very same problem here. We have upgrade from version 2.1.5 to 2.1.8, after migration we noticed the exception above in the logs. &lt;/p&gt;

&lt;p&gt;Looks like something related to hinded hand off, according to the staktrace:&lt;br/&gt;
HintedHandOffManager.java:515&lt;/p&gt;

&lt;p&gt;Here is the stack for the 2.1.8 version:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR [HintedHandoff:2] 2015-09-30 16:48:38,729 CassandraDaemon.java:223 - Exception in thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[HintedHandoff:2,1,main]
java.lang.IndexOutOfBoundsException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at java.nio.Buffer.checkIndex(Buffer.java:546) ~[na:1.8.0_45]
        at java.nio.HeapByteBuffer.getLong(HeapByteBuffer.java:416) ~[na:1.8.0_45]
        at org.apache.cassandra.utils.UUIDGen.getUUID(UUIDGen.java:106) ~[apache-cassandra-2.1.8.jar:2.1.8]
        at org.apache.cassandra.db.HintedHandOffManager.scheduleAllDeliveries(HintedHandOffManager.java:514) ~[apache-cassandra-2.1.8.jar:2.1.8]
        at org.apache.cassandra.db.HintedHandOffManager.access$000(HintedHandOffManager.java:88) ~[apache-cassandra-2.1.8.jar:2.1.8]
        at org.apache.cassandra.db.HintedHandOffManager$1.run(HintedHandOffManager.java:168) ~[apache-cassandra-2.1.8.jar:2.1.8]
        at org.apache.cassandra.concurrent.DebuggableScheduledThreadPoolExecutor$UncomplainingRunnable.run(DebuggableScheduledThreadPoolExecutor.java:118) ~[apache-cassandra-2.1.8.jar:2.1.8]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_45]
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) [na:1.8.0_45]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_45]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) [na:1.8.0_45]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_45]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_45]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745) [na:1.8.0_45]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Observations&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the nodes are in UN state&lt;/li&gt;
	&lt;li&gt;after a node decommission, looks like the error &apos;moved&apos; from one node to another&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Do have any ideas what are the consequences of this error? Is hinted hand off still working? &lt;/p&gt;</comment>
                            <comment id="14938173" author="eitikimura" created="Wed, 30 Sep 2015 17:56:13 +0000"  >&lt;p&gt;it will prevent null pointer exception when hints primary_key is null. &lt;br/&gt;
It is not allowing the hintedhandoff to be scheduled and performed. &lt;br/&gt;
The intent of this patch is to fix it. &lt;/p&gt;</comment>
                            <comment id="14938174" author="eitikimura" created="Wed, 30 Sep 2015 17:56:41 +0000"  >&lt;p&gt;patch attached&lt;/p&gt;</comment>
                            <comment id="14938177" author="eitikimura" created="Wed, 30 Sep 2015 17:59:08 +0000"  >&lt;p&gt;Guys I code a little patch for the problem. Looks like it is affecting the hinted hand off scheduler.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh:system&amp;gt; SELECT target_id,hint_id,message_version FROM hints LIMIT 5;

 target_id                            | hint_id                              | message_version
--------------------------------------+--------------------------------------+-----------------
                                      | 2f5e0320-62d3-11e5-877e-77558ae77cc8 |               8
 72888e32-dae5-41cd-a033-3c5871a3e045 | fad152f0-662a-11e5-89ed-77558ae77cc8 |               8
 72888e32-dae5-41cd-a033-3c5871a3e045 | fad152f1-662a-11e5-89ed-77558ae77cc8 |               8
 72888e32-dae5-41cd-a033-3c5871a3e045 | fb69e970-662a-11e5-89ed-77558ae77cc8 |               8
 72888e32-dae5-41cd-a033-3c5871a3e045 | fb69e971-662a-11e5-89ed-77558ae77cc8 |               8

(5 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We have an empty target_id in our hints table. That is causing the problem. &lt;br/&gt;
Can you check my patch?&lt;/p&gt;</comment>
                            <comment id="14939891" author="eitikimura" created="Thu, 1 Oct 2015 14:29:24 +0000"  >&lt;p&gt;new patch available&lt;/p&gt;</comment>
                            <comment id="14939903" author="nutbunnies" created="Thu, 1 Oct 2015 14:39:26 +0000"  >&lt;p&gt;I&apos;ll give the patch a look.  I&apos;m also curious on how the broken hint got in there in the first place.  I would like to try and reproduce can you give more details of your upgrade procedure?  &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;how many nodes?&lt;/li&gt;
	&lt;li&gt;assuming rolling upgrade&lt;/li&gt;
	&lt;li&gt;jdk change?&lt;/li&gt;
	&lt;li&gt;roughly how long was each node unavailable&lt;/li&gt;
	&lt;li&gt;gc_grace value of table with broken hint&lt;/li&gt;
	&lt;li&gt;values of max_hint_window_in_ms, max_hints_delivery_threads, hinted_handoff_enabled, hinted_handoff_throttle_in_kb in cassandra.yaml&lt;/li&gt;
	&lt;li&gt;what type of mutation was the hint without a target_id?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14939920" author="eitikimura" created="Thu, 1 Oct 2015 14:51:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nutbunnies&quot; class=&quot;user-hover&quot; rel=&quot;nutbunnies&quot;&gt;nutbunnies&lt;/a&gt; please see this file:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12764620/cassandra-2.1.8-10233-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12764620/cassandra-2.1.8-10233-v2.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is a new attachment without code formatting.&lt;br/&gt;
It will keep showing the exception on logs, but will not prevent hinted handoff scheduler to run.&lt;br/&gt;
It is very weird, looks like something corrupted,  it is not possible to have an empty primary key. May be another issue. In fact the main objective here is to keep hinted hand off operations healthy and working.&lt;/p&gt;

&lt;p&gt;According to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pauloricardomg&quot; class=&quot;user-hover&quot; rel=&quot;pauloricardomg&quot;&gt;pauloricardomg&lt;/a&gt; we can just truncate the system.hints table as a palliative solution. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhsgoncalves&quot; class=&quot;user-hover&quot; rel=&quot;fhsgoncalves&quot;&gt;fhsgoncalves&lt;/a&gt; will provide the information you requested.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="14939944" author="fhsgoncalves" created="Thu, 1 Oct 2015 15:09:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nutbunnies&quot; class=&quot;user-hover&quot; rel=&quot;nutbunnies&quot;&gt;nutbunnies&lt;/a&gt;, I work together with Eiti Kimura at Movile, and this issue is happening in one of our cluster of cassandra.&lt;/p&gt;

&lt;p&gt;I&apos;ll try answer your questions:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;how many nodes?&lt;br/&gt;
Currently we are running with 15 nodes, in 2 racks, in the same datacenter. One rack has 7 nodes and the other has 8 nodes.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;assuming rolling upgrade&lt;br/&gt;
I did&apos;t understand if this is a question, but what I can say is that we already upgraded to version 2.1.9 yesterday, and  the problem started when we added 7 new nodes to the cluster a week ago. We add one node a time, waiting for each node join the cluster before start the joining of the next node.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jdk change?&lt;br/&gt;
We are using the same version for a long time, Java Hotspot 1.8.0_45-b14.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;roughly how long was each node unavailable&lt;br/&gt;
I&apos;m sending the uptime of each node. The nodes were not unavailable, only very slow to respond requests when we added 7 more nodes last week.&lt;br/&gt;
pompeia1   14:52:37 up 126 days&lt;br/&gt;
pompeia2   14:52:37 up 126 days&lt;br/&gt;
pompeia3   14:52:37 up 126 days&lt;br/&gt;
pompeia4   14:52:37 up 126 days&lt;br/&gt;
pompeia5   14:52:37 up 126 days&lt;br/&gt;
pompeia6   14:52:37 up 126 days&lt;br/&gt;
pompeia7   14:52:37 up 82 days&lt;br/&gt;
pompeia8   14:52:37 up 82 days&lt;br/&gt;
pompeia9   14:52:37 up 7 days&lt;br/&gt;
pompeia10  14:52:37 up 7 days&lt;br/&gt;
pompeia11  14:52:37 up 7 days&lt;br/&gt;
pompeia12  14:52:37 up 7 days&lt;br/&gt;
pompeia13  14:52:37 up 7 days&lt;br/&gt;
pompeia14  14:52:37 up 7 days&lt;br/&gt;
pompeia15  14:52:37 up 7 days&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;gc_grace value of table with broken hint&lt;br/&gt;
values of max_hint_window_in_ms, max_hints_delivery_threads, hinted_handoff_enabled, hinted_handoff_throttle_in_kb in cassandra.yaml&lt;br/&gt;
We are not sure about the table that is problematic, but we think that is the most large (considering the records count and number of columns) and most used table that we have, and I&apos;m going to inform the its values:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;gc_grace_seconds = 864000&lt;br/&gt;
The values in the application.yml&lt;/li&gt;
		&lt;li&gt;max_hint_window_in_ms: 10800000&lt;/li&gt;
		&lt;li&gt;max_hints_delivery_threads: 2&lt;/li&gt;
		&lt;li&gt;hinted_handoff_enabled: true&lt;/li&gt;
		&lt;li&gt;hinted_handoff_throttle_in_kb: 1024&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;what type of mutation was the hint without a target_id?&lt;br/&gt;
I don&apos;t know how to get the type of mutation, only the mutation value, that is a blob in the table. Can you help me here?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If you need any other information, I can send to you!&lt;br/&gt;
Thank you!&lt;/p&gt;</comment>
                            <comment id="14940540" author="nutbunnies" created="Thu, 1 Oct 2015 22:29:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt; as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pauloricardomg&quot; class=&quot;user-hover&quot; rel=&quot;pauloricardomg&quot;&gt;pauloricardomg&lt;/a&gt; mentioned truncating the hints table will get things rolling again, just make sure to repair in near future to prevent possible dataloss or zombie records related to the mutations truncated out of the hints table.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhsgoncalves&quot; class=&quot;user-hover&quot; rel=&quot;fhsgoncalves&quot;&gt;fhsgoncalves&lt;/a&gt; thanks, that helps a ton.  Couple more questions to help reproduce it:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Just want to make sure order of operation is correct, the error showed up when you added additional nodes then persisted after upgrades?&lt;/li&gt;
	&lt;li&gt;Are all the new nodes in the second rack?&lt;/li&gt;
	&lt;li&gt;Are you running with vnodes?&lt;/li&gt;
	&lt;li&gt;Are your keyspaces set with a replication of NetworkTopologyStrategy, SimpleStrategy or ?&lt;/li&gt;
	&lt;li&gt;In the cassandra.yaml what is the value for: endpoint_snitch&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14940623" author="fhsgoncalves" created="Fri, 2 Oct 2015 00:14:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nutbunnies&quot; class=&quot;user-hover&quot; rel=&quot;nutbunnies&quot;&gt;nutbunnies&lt;/a&gt;:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Just want to make sure order of operation is correct, the error showed up when you added additional nodes then persisted after upgrades?&lt;br/&gt;
We are not sure about when the error started, but we think that was after the addition of nodes, and yes, it persisted after the upgrade to version 2.1.9.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Are all the new nodes in the second rack?&lt;br/&gt;
No, the new nodes are added to all racks using a round robin policy, each rack contains both old and new nodes always.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Are you running with vnodes?&lt;br/&gt;
Yes.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Are your keyspaces set with a replication of NetworkTopologyStrategy, SimpleStrategy or ?&lt;br/&gt;
NetworkTopologyStrategy&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In the cassandra.yaml what is the value for: endpoint_snitch&lt;br/&gt;
endpoint_snitch: GossipingPropertyFileSnitch&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;We did the truncate on table system.hints, and the errors for process the table disappeared and the table now are empty every time I checked &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;We are now running a repair on each node in the cluster, sequentially. But we still are afraid that this error happen again.&lt;/p&gt;

&lt;p&gt;Thanks for the attention until now!&lt;/p&gt;</comment>
                            <comment id="14941087" author="eitikimura" created="Fri, 2 Oct 2015 12:46:58 +0000"  >&lt;p&gt;Good set of info &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhsgoncalves&quot; class=&quot;user-hover&quot; rel=&quot;fhsgoncalves&quot;&gt;fhsgoncalves&lt;/a&gt;, thanks. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nutbunnies&quot; class=&quot;user-hover&quot; rel=&quot;nutbunnies&quot;&gt;nutbunnies&lt;/a&gt; it is working now. My main concern is related to consistence, if it happens again (another issue) or with other people affected by problem may cause cluster problems if hints were not replied correctly.&lt;/p&gt;

&lt;p&gt;The change in the patch will continue show the exception in system.log but will not stop the flow, we&apos;ll skip the inconsistent line and move to the next, continue to schedule the hints and hand off process without affecting the entire cluster consistency. &lt;br/&gt;
I think having a bunch of nodes in the cluster with problems sending hints a big issue. The patch is not to fix the hints but will prevent things get any worse.&lt;/p&gt;

&lt;p&gt;Do you consider the possibility to apply this patch in the near future? &lt;/p&gt;
</comment>
                            <comment id="14942003" author="pauloricardomg" created="Sat, 3 Oct 2015 00:42:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhsgoncalves&quot; class=&quot;user-hover&quot; rel=&quot;fhsgoncalves&quot;&gt;fhsgoncalves&lt;/a&gt; are JVM assertions enabled or disabled in your cluster (-ea JVM_OPTS on cassandra-env.sh) ?&lt;/p&gt;

&lt;p&gt;Because in case assertions are disabled, there is a possibility hints are inserted with &lt;tt&gt;target_id&lt;/tt&gt; null on &lt;tt&gt;HintedHandoffManager.writeHintForMutation&lt;/tt&gt;, when the TokenMetadata is not fully populated for some reason:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void writeHintForMutation(Mutation mutation, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; now, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ttl, InetAddress target)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; ttl &amp;gt; 0;
        UUID hostId = StorageService.instance.getTokenMetadata().getHostId(target);
        &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; hostId != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Missing host ID &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + target.getHostAddress();
        HintedHandOffManager.instance.hintFor(mutation, now, ttl, hostId).apply();
        StorageMetrics.totalHints.inc();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14943589" author="nutbunnies" created="Mon, 5 Oct 2015 16:11:49 +0000"  >&lt;p&gt;assigning for patch review&lt;/p&gt;</comment>
                            <comment id="14943659" author="eitikimura" created="Mon, 5 Oct 2015 17:02:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pauloricardomg&quot; class=&quot;user-hover&quot; rel=&quot;pauloricardomg&quot;&gt;pauloricardomg&lt;/a&gt; I think this method writeHintForMutation is from class StorageProxy and not for the HintedHandoffManager, right? &lt;/p&gt;</comment>
                            <comment id="14943683" author="eitikimura" created="Mon, 5 Oct 2015 17:15:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pauloricardomg&quot; class=&quot;user-hover&quot; rel=&quot;pauloricardomg&quot;&gt;pauloricardomg&lt;/a&gt; please, see the file: cassandra-2.1.8-10233-v3.txt&lt;br/&gt;
I did the following improvement:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void writeHintForMutation(Mutation mutation, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; now, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ttl, InetAddress target)
    {
        Preconditions.checkArgument(ttl &amp;gt; 0, &lt;span class=&quot;code-quote&quot;&gt;&quot;the ttl must be &amp;gt; 0&quot;&lt;/span&gt;);
        UUID hostId = StorageService.instance.getTokenMetadata().getHostId(target);
        Preconditions.checkNotNull(hostId, &lt;span class=&quot;code-quote&quot;&gt;&quot;Missing host ID &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + target.getHostAddress());
        HintedHandOffManager.instance.hintFor(mutation, now, ttl, hostId).apply();
        StorageMetrics.totalHints.inc();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14943821" author="fhsgoncalves" created="Mon, 5 Oct 2015 18:51:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nutbunnies&quot; class=&quot;user-hover&quot; rel=&quot;nutbunnies&quot;&gt;nutbunnies&lt;/a&gt;: the JVM assertions are disabled!&lt;br/&gt;
We just follow the following comment in order to improve the performance: (we considered that it was a good practice). &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-2.1/conf/cassandra-env.sh#L172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-2.1/conf/cassandra-env.sh#L172&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14943824" author="fhsgoncalves" created="Mon, 5 Oct 2015 18:53:32 +0000"  >&lt;p&gt;I think that jvm assertions should be disabled in production, if we need to validate something in production it should be done like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt; said.&lt;/p&gt;</comment>
                            <comment id="14944090" author="pauloricardomg" created="Mon, 5 Oct 2015 21:32:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt; I&apos;d prefer not add the try-catch block on &lt;tt&gt;HintedHandOffManager.scheduleAllDeliveries()&lt;/tt&gt; as in the general case stored hints shouldn&apos;t be corrupted, and it could make hints be silently dropped which could lead to more serious issues. Since we already know the issue was caused on &lt;tt&gt;StorageProxy.writeHintForMutation&lt;/tt&gt; I think it suffices to perform the check there. And if someone hit this bug before it&apos;s fixed, the workaround should be truncate hints + repair.&lt;/p&gt;

&lt;p&gt;I think what you did on &lt;tt&gt;StorageProxy.writeHintForMutation&lt;/tt&gt; looks awesome, but the thrown exception might be ignored silently by the hints executor, so it&apos;s better to perform an explicit check, log a warn and throw an AssertionError if &lt;tt&gt;hostId &amp;#33;= null&lt;/tt&gt;, so we&apos;ll be able to track if it happens again in the logs. Could you please make these changes and re-submit the patch? Please check if your patch apply to cassandra-2.2 branch, and if it doesn&apos;t please also submit a patch for 2.2. It should not be necessary to create a patch for 3.0, as the hints engine was rewritten from scratch.&lt;/p&gt;

&lt;p&gt;Thanks for that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhsgoncalves&quot; class=&quot;user-hover&quot; rel=&quot;fhsgoncalves&quot;&gt;fhsgoncalves&lt;/a&gt; yep, afaik assertions should be optional in production, but they should never happen in the first place. probably this is being caused by some other issue I was not able to track in the latest changes, but &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt;&apos;s patch should help us troubleshoot if it happens in the future.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nutbunnies&quot; class=&quot;user-hover&quot; rel=&quot;nutbunnies&quot;&gt;nutbunnies&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mambocab&quot; class=&quot;user-hover&quot; rel=&quot;mambocab&quot;&gt;mambocab&lt;/a&gt; maybe it would be interesting to have a dtest job with assertions disabled, since we rely a lot on assertions for pre-condition checking, and many people disable them in production.&lt;/p&gt;</comment>
                            <comment id="14944266" author="fhsgoncalves" created="Mon, 5 Oct 2015 23:44:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nutbunnies&quot; class=&quot;user-hover&quot; rel=&quot;nutbunnies&quot;&gt;nutbunnies&lt;/a&gt; Thanks!&lt;/p&gt;</comment>
                            <comment id="14944338" author="eitikimura" created="Tue, 6 Oct 2015 00:45:05 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pauloricardomg&quot; class=&quot;user-hover&quot; rel=&quot;pauloricardomg&quot;&gt;pauloricardomg&lt;/a&gt; you can se the new patches attached the 2.1-v4 and the 2.2.1 patch for 2.2.X versions.&lt;br/&gt;
I&apos;m expliciting check the values, logging a warn message and throing an AssertionError as you asked. I hope it helps. &lt;br/&gt;
Thanks  &lt;/p&gt;</comment>
                            <comment id="14946882" author="kenfailbus" created="Wed, 7 Oct 2015 13:59:04 +0000"  >&lt;p&gt;Folks,&lt;/p&gt;

&lt;p&gt;I am seeing the same exception in 2.0.14 release. Any plans to apply the patch in that release. What is the work-around?&lt;/p&gt;</comment>
                            <comment id="14946933" author="eitikimura" created="Wed, 7 Oct 2015 14:27:21 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kf200467&quot; class=&quot;user-hover&quot; rel=&quot;kf200467&quot;&gt;kf200467&lt;/a&gt; the workaround is just truncat the system.hints table. &lt;/p&gt;

&lt;p&gt;The exception occurs due to inconsistent data in hints table, as described in my comments above, I found records where the hints primary key were null. Probably it was caused by assertions being disabled when running on production setup. &lt;/p&gt;

&lt;p&gt;The patch I code and we discussed here is to prevent inconsistent data being persisted in to the hints table. &lt;br/&gt;
 I&apos;ll code a patch  to 2.0.X version as soo as possible. &lt;/p&gt;</comment>
                            <comment id="14946934" author="pauloricardomg" created="Wed, 7 Oct 2015 14:27:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenfailbus&quot; class=&quot;user-hover&quot; rel=&quot;kenfailbus&quot;&gt;kenfailbus&lt;/a&gt; can you please paste the output of the following command on cqlsh on the node throwing the exceptions:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT target_id,hint_id,message_version FROM system.hints LIMIT 5;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14946940" author="pauloricardomg" created="Wed, 7 Oct 2015 14:32:37 +0000"  >&lt;p&gt;I was wondering if it&apos;s possible to remove just the faulty hint without truncating the whole table, but I&apos;m not sure if deletion of null keys is supported. If you confirm there is a hint with a null/empty target_id, could you try executing the following command to see if it works &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kenfailbus&quot; class=&quot;user-hover&quot; rel=&quot;kenfailbus&quot;&gt;kenfailbus&lt;/a&gt;? (did you try that, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt;?)&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DELETE FROM system.hints WHERE target_id = null;
DELETE FROM system.hints WHERE target_id = &apos;&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14946978" author="kenfailbus" created="Wed, 7 Oct 2015 14:57:12 +0000"  >&lt;p&gt;This is what I saw when running the above command.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; SELECT target_id,hint_id,message_version FROM system.hints LIMIT 5;

 target_id | hint_id                              | message_version
-----------+--------------------------------------+-----------------
           | af72b680-6622-11e5-bb6e-5b476c07be60 |               7
           | b27f3330-6622-11e5-bb6e-5b476c07be60 |               7
           | b5f0da50-6622-11e5-bb6e-5b476c07be60 |               7
           | b6a1b3c0-6622-11e5-bb6e-5b476c07be60 |               7
           | b6bcb5d0-6622-11e5-bb6e-5b476c07be60 |               7
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14946996" author="kenfailbus" created="Wed, 7 Oct 2015 15:10:43 +0000"  >&lt;p&gt;Since the output above in select query looks very that there is no target_id present, would it be better off truncating the whole hints table and restarting cassandra. Also, we have reduced our hint window to 5min. beyond which we just bootstrap the node back or run repairs on it.&lt;/p&gt;</comment>
                            <comment id="14947440" author="pauloricardomg" created="Wed, 7 Oct 2015 19:31:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt; thanks for your patch, I think we can keep the ttl &amp;gt; 0 assertion instead of the explicit check, since we won&apos;t run into problems if ttl &amp;lt;= 0 (even though that&apos;s not the case), so the assertion should suffice. Also, in the 2.1 patch there are some extra lines in the imports, could you please remove them? Sorry for not pointing that out before.&lt;/p&gt;

&lt;p&gt;After that it should be ready to commit!! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14947969" author="eitikimura" created="Thu, 8 Oct 2015 02:22:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pauloricardomg&quot; class=&quot;user-hover&quot; rel=&quot;pauloricardomg&quot;&gt;pauloricardomg&lt;/a&gt; nice! &lt;br/&gt;
I changed the files as you suggested and I just added one more patch for 2.0 version as well. The new files attached are:&lt;br/&gt;
cassandra-2.1-10233-v5.txt&lt;br/&gt;
cassandra-2.0-10233.txt&lt;br/&gt;
cassandra-2.2.1-10233-v2.txt&lt;/p&gt;</comment>
                            <comment id="14948748" author="pauloricardomg" created="Thu, 8 Oct 2015 14:32:02 +0000"  >&lt;p&gt;LGTM, marking as &quot;Ready to Commit&quot;. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14949132" author="pauloricardomg" created="Thu, 8 Oct 2015 18:44:44 +0000"  >&lt;p&gt;This fix only prevents hints with null target_id from being written in nodes with disabled assertions. I have opened &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10485&quot; title=&quot;Missing host ID on hinted handoff write&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10485&quot;&gt;&lt;del&gt;CASSANDRA-10485&lt;/del&gt;&lt;/a&gt; to address the root cause of the issue.&lt;/p&gt;</comment>
                            <comment id="14957134" author="iamaleksey" created="Wed, 14 Oct 2015 15:59:12 +0000"  >&lt;p&gt;Committed to 2.1 as &lt;a href=&quot;https://github.com/apache/cassandra/commit/bc1058f8ea1e50d57db6e06fb027845871d9927c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;bc1058f8ea1e50d57db6e06fb027845871d9927c&lt;/a&gt; and merged with 2.2, leaving 3.0 and trunk as is. Thank you.&lt;/p&gt;</comment>
                            <comment id="14972173" author="pauloricardomg" created="Sat, 24 Oct 2015 00:24:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fhsgoncalves&quot; class=&quot;user-hover&quot; rel=&quot;fhsgoncalves&quot;&gt;fhsgoncalves&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eitikimura&quot; class=&quot;user-hover&quot; rel=&quot;eitikimura&quot;&gt;eitikimura&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;the problem started when we added 7 new nodes to the cluster a week ago&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do you remember if there was any failed bootstrap when you added these nodes? For example, you started bootstrapping, streams hanged, you wiped the node and restarted the process again? Or did all bootstraps succeed in the first time? (I&apos;m investigating the root cause of the issue on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10485&quot; title=&quot;Missing host ID on hinted handoff write&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10485&quot;&gt;&lt;del&gt;CASSANDRA-10485&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12903439">CASSANDRA-10485</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12765502" name="cassandra-2.0-10233.txt" size="1314" author="eitikimura" created="Thu, 8 Oct 2015 02:22:45 +0000"/>
                            <attachment id="12765501" name="cassandra-2.1-10233-v5.txt" size="1314" author="eitikimura" created="Thu, 8 Oct 2015 02:22:45 +0000"/>
                            <attachment id="12765025" name="cassandra-2.1.8-10233-v3.txt" size="4658" author="eitikimura" created="Mon, 5 Oct 2015 17:15:35 +0000"/>
                            <attachment id="12765101" name="cassandra-2.1.8-10233-v4.txt" size="2580" author="eitikimura" created="Tue, 6 Oct 2015 00:45:05 +0000"/>
                            <attachment id="12765503" name="cassandra-2.2.1-10233-v2.txt" size="1317" author="eitikimura" created="Thu, 8 Oct 2015 02:22:45 +0000"/>
                            <attachment id="12765100" name="cassandra-2.2.1-10233.txt" size="1588" author="eitikimura" created="Tue, 6 Oct 2015 00:45:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[eitikimura]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jm27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332829">2.1.8</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>pauloricardomg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[pauloricardomg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>