<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:54:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9083] cqlsh COPY functionality doesn&apos;t work together with SOURCE or with cqlsh -f</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9083</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Executing a COPY command from an external file using the cqlsh -f or the SOURCE command results in the error:&lt;/p&gt;

&lt;p&gt;filename.cql:7:descriptor &apos;lower&apos; requires a &apos;str&apos; object but received a &apos;unicode&apos;&lt;/p&gt;

&lt;p&gt;Looks like there was a change in the cqlsh code from 2.1.2 to 2.1.3 which makes use of codecs.open() instead of open(), which returns a unicode object. &lt;/p&gt;

&lt;p&gt;The offending line of code that returns the error seems to be in cqlsh, line 1415:&lt;br/&gt;
copyoptnames = map(str.lower, parsed.get_binding(&apos;optnames&apos;, ()))&lt;/p&gt;</description>
                <environment>&lt;p&gt;2.1.3&lt;/p&gt;</environment>
        <key id="12787202">CASSANDRA-9083</key>
            <summary>cqlsh COPY functionality doesn&apos;t work together with SOURCE or with cqlsh -f</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thobbs">Tom Hobbs</assignee>
                                    <reporter username="joechu">Joseph Chu</reporter>
                        <labels>
                            <label>cqlsh</label>
                    </labels>
                <created>Wed, 1 Apr 2015 00:09:52 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:16 +0000</updated>
                            <resolved>Thu, 4 Jun 2015 16:42:11 +0000</resolved>
                                        <fixVersion>2.1.6</fixVersion>
                    <fixVersion>2.2.0 rc1</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14389887" author="philipthompson" created="Wed, 1 Apr 2015 02:14:06 +0000"  >&lt;p&gt;What version of python are you using?&lt;/p&gt;</comment>
                            <comment id="14390880" author="joechu" created="Wed, 1 Apr 2015 16:04:38 +0000"  >&lt;p&gt;I&apos;m using Python 2.7.3&lt;/p&gt;</comment>
                            <comment id="14391270" author="thobbs" created="Wed, 1 Apr 2015 19:19:41 +0000"  >&lt;p&gt;It looks like this is only a problem if you provide options to COPY.  The solution for this particular problem is to convert the unicode objects to strings (via &lt;tt&gt;.encode(&apos;utf8&apos;)&lt;/tt&gt;), but we may have other similar problems where &lt;tt&gt;.lower()&lt;/tt&gt; is used on strings from a sourced file.&lt;/p&gt;</comment>
                            <comment id="14563810" author="slowenthal" created="Thu, 28 May 2015 22:37:42 +0000"  >&lt;p&gt;This is more serious than it looks as it causes everyone&apos;s existing scripts to fail.  Let&apos;s make it major.&lt;/p&gt;</comment>
                            <comment id="14565163" author="thobbs" created="Fri, 29 May 2015 18:10:33 +0000"  >&lt;p&gt;To avoid trying to catch every place where we perform a unicode-incompatible operation on a token, I decided to convert all tokens to ascii strings where possible.  If there are unicode characters in the string, the token will be left as a &lt;tt&gt;unicode&lt;/tt&gt; object.  The lexer shouldn&apos;t match unicode characters for any of the tokens we manipulate, so this should be safe.&lt;/p&gt;

&lt;p&gt;Branch: &lt;a href=&quot;https://github.com/thobbs/cassandra/tree/CASSANDRA-9083&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/thobbs/cassandra/tree/CASSANDRA-9083&lt;/a&gt;&lt;br/&gt;
New dtest: &lt;a href=&quot;https://github.com/thobbs/cassandra-dtest/tree/CASSANDRA-9083&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/thobbs/cassandra-dtest/tree/CASSANDRA-9083&lt;/a&gt;&lt;br/&gt;
cassci tests (currently pending): &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-9083-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;, &lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/thobbs/job/thobbs-CASSANDRA-9083-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14572200" author="stefania" created="Thu, 4 Jun 2015 05:45:24 +0000"  >&lt;p&gt;LGTM, +1.&lt;/p&gt;</comment>
                            <comment id="14573102" author="thobbs" created="Thu, 4 Jun 2015 16:42:11 +0000"  >&lt;p&gt;Thanks, committed as &lt;tt&gt;5d26943fdabcaa3c11619fea629f086212819f0d&lt;/tt&gt; to 2.1 and merged to 2.2 and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27md3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12328951">2.1.3</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stefania</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>