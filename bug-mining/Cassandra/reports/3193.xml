<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:48:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8084] GossipFilePropertySnitch and EC2MultiRegionSnitch when used in AWS/GCE clusters doesnt use the PRIVATE IPS for Intra-DC communications - When running nodetool repair</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8084</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Neither of these snitches(GossipFilePropertySnitch and EC2MultiRegionSnitch ) used the PRIVATE IPS for communication between INTRA-DC nodes in my multi-region multi-dc cluster in cloud(on both AWS and GCE) when I ran &quot;nodetool repair -local&quot;. It works fine during regular reads.&lt;/p&gt;

&lt;p&gt; Here are the various cluster flavors I tried and failed- &lt;/p&gt;

&lt;p&gt;AWS + Multi-REGION + Multi-DC + GossipPropertyFileSnitch + (Prefer_local=true) in rackdc-properties file. &lt;/p&gt;

&lt;p&gt;AWS + Multi-REGION + Multi-DC + EC2MultiRegionSnitch + (Prefer_local=true) in rackdc-properties file. &lt;/p&gt;

&lt;p&gt;GCE + Multi-REGION + Multi-DC + GossipPropertyFileSnitch + (Prefer_local=true) in rackdc-properties file. &lt;/p&gt;

&lt;p&gt;GCE + Multi-REGION + Multi-DC + EC2MultiRegionSnitch + (Prefer_local=true) in rackdc-properties file. &lt;/p&gt;

&lt;p&gt;I am expecting with the above setup all of my nodes in a given DC all communicate via private ips since the cloud providers dont charge us for using the private ips and they charge for using public ips.&lt;/p&gt;

&lt;p&gt;But they can use PUBLIC IPs for INTER-DC communications which is working as expected. &lt;/p&gt;

&lt;p&gt;Here is a snippet from my log files when I ran the &quot;nodetool repair -local&quot; - &lt;/p&gt;

&lt;p&gt;Node responding to &apos;node running repair&apos; &lt;br/&gt;
INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AntiEntropyStage:1&amp;#93;&lt;/span&gt; 2014-10-08 14:47:51,628 Validator.java (line 254) &lt;a href=&quot;#1439f290-4efa-11e4-bf3a-df845ecf54f8&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #1439f290-4efa-11e4-bf3a-df845ecf54f8&lt;/a&gt; Sending completed merkle tree to /54.172.118.222 for system_traces/sessions&lt;br/&gt;
 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AntiEntropyStage:1&amp;#93;&lt;/span&gt; 2014-10-08 14:47:51,741 Validator.java (line 254) &lt;a href=&quot;#1439f290-4efa-11e4-bf3a-df845ecf54f8&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #1439f290-4efa-11e4-bf3a-df845ecf54f8&lt;/a&gt; Sending completed merkle tree to /54.172.118.222 for system_traces/events&lt;/p&gt;

&lt;p&gt;Node running repair - &lt;br/&gt;
INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;AntiEntropyStage:1&amp;#93;&lt;/span&gt; 2014-10-08 14:47:51,927 RepairSession.java (line 166) &lt;a href=&quot;#1439f290-4efa-11e4-bf3a-df845ecf54f8&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;repair #1439f290-4efa-11e4-bf3a-df845ecf54f8&lt;/a&gt; Received merkle tree for events from /54.172.118.222&lt;/p&gt;

&lt;p&gt;Note: The IPs its communicating is all PUBLIC Ips and it should have used the PRIVATE IPs starting with 172.x.x.x&lt;/p&gt;

&lt;p&gt;YAML file values : &lt;br/&gt;
The listen address is set to: PRIVATE IP&lt;br/&gt;
The broadcast address is set to: PUBLIC IP&lt;br/&gt;
The SEEDs address is set to: PUBLIC IPs from both DCs&lt;br/&gt;
The SNITCHES tried: GPFS and EC2MultiRegionSnitch&lt;br/&gt;
RACK-DC: Had prefer_local set to true. &lt;/p&gt;
</description>
                <environment>&lt;p&gt;Tested this in GCE and AWS clusters. Created multi region and multi dc cluster once in GCE and once in AWS and ran into the same problem. &lt;/p&gt;

&lt;p&gt;DISTRIB_ID=Ubuntu&lt;br/&gt;
DISTRIB_RELEASE=12.04&lt;br/&gt;
DISTRIB_CODENAME=precise&lt;br/&gt;
DISTRIB_DESCRIPTION=&quot;Ubuntu 12.04.3 LTS&quot;&lt;br/&gt;
NAME=&quot;Ubuntu&quot;&lt;br/&gt;
VERSION=&quot;12.04.3 LTS, Precise Pangolin&quot;&lt;br/&gt;
ID=ubuntu&lt;br/&gt;
ID_LIKE=debian&lt;br/&gt;
PRETTY_NAME=&quot;Ubuntu precise (12.04.3 LTS)&quot;&lt;br/&gt;
VERSION_ID=&quot;12.04&quot;&lt;/p&gt;

&lt;p&gt;Tried to install Apache Cassandra version ReleaseVersion: 2.0.10 and also latest DSE version which is 4.5 and which corresponds to 2.0.8.39.&lt;/p&gt;</environment>
        <key id="12746740">CASSANDRA-8084</key>
            <summary>GossipFilePropertySnitch and EC2MultiRegionSnitch when used in AWS/GCE clusters doesnt use the PRIVATE IPS for Intra-DC communications - When running nodetool repair</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yukim">Yuki Morishita</assignee>
                                    <reporter username="kcsjan11">Jana</reporter>
                        <labels>
                            <label>features</label>
                    </labels>
                <created>Wed, 8 Oct 2014 16:02:54 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:02 +0000</updated>
                            <resolved>Mon, 20 Oct 2014 15:54:01 +0000</resolved>
                                        <fixVersion>2.0.11</fixVersion>
                    <fixVersion>2.1.2</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14163680" author="jblangston@datastax.com" created="Wed, 8 Oct 2014 16:16:56 +0000"  >&lt;p&gt;Here is the AWS cluster used to reproduce this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;automaton@ip-172-31-0-237:~$ nodetool status
Note: Ownership information does not include topology; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; complete information, specify a keyspace

Datacenter: aws_east

Status=Up/Down
|/ State=Normal/Leaving/Joining/Moving
-- Address Load Tokens Owns Host ID Rack
UN 54.165.86.246 304.01 MB 256 26.8% 1042deb8-5395-42b1-adf4-2a373149b052 rack1
UN 54.209.121.225 302.82 MB 256 21.8% 7e7499c2-acfb-4eda-b786-7878907038b8 rack1

Datacenter: aws_west

Status=Up/Down
|/ State=Normal/Leaving/Joining/Moving
-- Address Load Tokens Owns Host ID Rack
UN 54.183.246.79 79.01 MB 256 24.7% 9a4450a4-d00b-407c-8217-464ca5d3d74c rack1
UN 54.183.249.149 319.14 MB 256 26.7% cb6579d4-3eac-48c6-a8c0-ca30071a97e8 rack1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is the test case I ran to reproduce this:&lt;/p&gt;

&lt;p&gt;1) Run cassandra-stress once to create Keyspace1 and Standard1 CF.&lt;/p&gt;

&lt;p&gt;2) Alter keyspace with replication to all nodes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ALTER KEYSPACE &lt;span class=&quot;code-quote&quot;&gt;&quot;Keyspace1&quot;&lt;/span&gt; WITH replication = {&#8232; &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NetworkTopologyStrategy&apos;&lt;/span&gt;,&#8232; &lt;span class=&quot;code-quote&quot;&gt;&apos;aws_east&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;2&apos;&lt;/span&gt;,&#8232; &lt;span class=&quot;code-quote&quot;&gt;&apos;aws_west&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;2&apos;&lt;/span&gt;&#8232;};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3) Shut down one of the nodes in aws_west.&lt;/p&gt;

&lt;p&gt;4) Run cassandra-stress on the other node in aws-west (just cassandra-stress with no options). Let it finish.&lt;/p&gt;

&lt;p&gt;5) Start back up the node.&lt;/p&gt;

&lt;p&gt;6) Run nodetool repair -local&lt;/p&gt;

&lt;p&gt;7) Repair and streaming messages in system.log will show that it is using the broadcast IP for nodes in the same DC.  You can also watch the connections being established over the broadcast IP with this command:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;sudo netstat -anp | grep 7000 | sort -k5
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The original test was conducted on DSE. We also reproduced it on on Apache Cassandra/DSC 2.0.10.&lt;/p&gt;

&lt;p&gt;Here is the netstat output showing that it is establishing connections to the node in the same DC (54.183.249.149). This command is being run on 54.183.246.79, so it should have used the private 172 address to talk to 54.183.249.149 instead.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;automaton@ip-172-31-0-237:~$ sudo netstat -anp | grep 7000 | sort -k5
tcp 0 0 172.31.0.237:7000 0.0.0.0:* LISTEN 8959/java
tcp 0 0 172.31.0.237:7000 172.31.0.237:54148 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:7000 172.31.0.237:54149 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:7000 172.31.0.237:54150 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:54148 172.31.0.237:7000 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:54149 172.31.0.237:7000 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:54150 172.31.0.237:7000 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:7000 172.31.4.163:56894 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:7000 172.31.4.163:56895 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:55510 172.31.4.163:7000 ESTABLISHED 8959/java
tcp 0 35 172.31.0.237:55504 172.31.4.163:7000 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:7000 54.165.86.246:36101 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:50600 54.165.86.246:7000 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:50606 54.165.86.246:7000 ESTABLISHED 8959/java
tcp 1 0 172.31.0.237:60588 54.183.249.149:7000 CLOSE_WAIT 8959/java
tcp 0 0 172.31.0.237:60587 54.183.249.149:7000 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:60505 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60508 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60509 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60511 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60513 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60514 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60515 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60517 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60521 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60523 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60524 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60527 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60528 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60532 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60534 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60536 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60538 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60544 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60546 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60552 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60554 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60560 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60562 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60564 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60565 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60566 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60568 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60570 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60572 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60578 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60580 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60582 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60584 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:60586 54.183.249.149:7000 TIME_WAIT -
tcp 0 0 172.31.0.237:7000 54.209.121.225:51246 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:52200 54.209.121.225:7000 ESTABLISHED 8959/java
tcp 0 0 172.31.0.237:52209 54.209.121.225:7000 ESTABLISHED 8959/java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14165379" author="yukim" created="Thu, 9 Oct 2014 17:10:57 +0000"  >&lt;p&gt;Attached patch looks up system table for &apos;preferred&apos; IP to stream for an endpoint.&lt;br/&gt;
(Note: this does not change sstableloader behavior. Only Cassandra noe itself.)&lt;/p&gt;

&lt;p&gt;Can you test if this works?&lt;/p&gt;</comment>
                            <comment id="14166908" author="jblangston@datastax.com" created="Fri, 10 Oct 2014 14:25:01 +0000"  >&lt;p&gt;I tested and it appears to work. Here is the cluster I am testing with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Datacenter: DC1_EAST
====================
Status=Up/Down
|/ State=Normal/Leaving/Joining/Moving
--  Address         Load       Tokens  Owns   Host ID                               Rack
UN  54.165.222.3    711.26 MB  1       25.0%  dd449706-2059-4b65-ae98-0012d2cf8f67  rack1
UN  54.172.118.222  561.14 MB  1       25.0%  18cd7d0a-74ca-4835-a7ff-7ffaa92b35ef  rack1
Datacenter: DC1_WEST
====================
Status=Up/Down
|/ State=Normal/Leaving/Joining/Moving
--  Address         Load       Tokens  Owns   Host ID                               Rack
UN  54.183.192.248  721.2 MB   1       25.0%  c4dd37f1-d937-4876-8669-f0b01a3942db  rack1
UN  54.215.139.161  909.26 MB  1       25.0%  16499349-8cef-4a62-a99c-ab145cb70921  rack1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I wasn&apos;t sure initially because the logs and `nodetool netstats` still show the broadcast address. You can see here that nodetool netstats, when run on 54.215.139.161, shows we are streaming from 54.183.192.248 (the broadcast address of the other node in the same DC):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Mode: NORMAL
Repair dbc7ea40-5082-11e4-8190-c9fac3589773
    /54.183.192.248
        Receiving 9 files, 229856794 bytes total
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-100-Data.db 58878176/58878176 bytes(100%) received from /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-106-Data.db 97856/97856 bytes(100%) received from /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-109-Data.db 69407704/69407704 bytes(100%) received from /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-108-Data.db 3203116/3203116 bytes(100%) received from /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-102-Data.db 12545306/12545306 bytes(100%) received from /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-103-Data.db 69407704/69407704 bytes(100%) received from /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-104-Data.db 1536228/1536228 bytes(100%) received from /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-105-Data.db 12589230/12589230 bytes(100%) received from /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-107-Data.db 2191474/2191474 bytes(100%) received from /54.183.192.248
        Sending 5 files, 109645980 bytes total
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-jb-87-Data.db 14323672/14323672 bytes(100%) sent to /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-jb-97-Data.db 20581730/20581730 bytes(100%) sent to /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-jb-98-Data.db 3161694/3161694 bytes(100%) sent to /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-jb-95-Data.db 69407704/69407704 bytes(100%) sent to /54.183.192.248
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-jb-99-Data.db 2171180/2171180 bytes(100%) sent to /54.183.192.248
Read Repair Statistics:
Attempted: 0
Mismatch (Blocking): 0
Mismatch (Background): 0
Pool Name                    Active   Pending      Completed
Commands                        n/a         0        1495191
Responses                       n/a         0         714928
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, the output of `sudo netstat -anp | grep 7000 | sort -k5` shows that we are only connecting to the local node on its listen address (172.31.7.50):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;tcp        0      0 172.31.5.143:7000       0.0.0.0:*               LISTEN      17279/java
tcp        0      0 172.31.5.143:7000       172.31.5.143:34936      ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:7000       172.31.5.143:34937      ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:7000       172.31.5.143:34938      ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:34936      172.31.5.143:7000       ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:34937      172.31.5.143:7000       ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:34938      172.31.5.143:7000       ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:7000       172.31.7.50:52125       ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:7000       172.31.7.50:52126       ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:57502      172.31.7.50:7000        ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:57560      172.31.7.50:7000        ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:57601      172.31.7.50:7000        ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:57602      172.31.7.50:7000        ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:7000       54.165.222.3:33876      ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:7000       54.165.222.3:33878      ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:44120      54.165.222.3:7000       ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:44198      54.165.222.3:7000       ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:7000       54.172.118.222:54515    ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:7000       54.172.118.222:54518    ESTABLISHED 17279/java
tcp        0      0 172.31.5.143:35960      54.172.118.222:7000     ESTABLISHED 17279/java
tcp        0    161 172.31.5.143:35880      54.172.118.222:7000     ESTABLISHED 17279/java
unix  2      [ ]         DGRAM                    7000     613/acpid
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The only connections established to the broadcast addresses are for the nodes in the other DC (54.165.222.3 and 54.172.118.222).&lt;/p&gt;

&lt;p&gt;Is use of the broadcast address in netstats and the logs intentional? I can see some customers getting confused by this. On the other hand, it matches what we show for nodetool ring and status, so I could see arguments both ways.&lt;/p&gt;</comment>
                            <comment id="14169468" author="yukim" created="Mon, 13 Oct 2014 16:21:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is use of the broadcast address in netstats and the logs intentional?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Each node identifies other nodes by broadcast address, even messages are sent through private IPs.&lt;br/&gt;
So currently logs and netstats show only broadcast IP.&lt;/p&gt;

&lt;p&gt;I definitely can switch output for netstats to private IP when it is used. Or show it alongside.&lt;/p&gt;

&lt;p&gt;For logs, with some work it can be done. Though, I don&apos;t know if it helps a lot.&lt;br/&gt;
For example, repair log:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[repair #8cc731c0-52f4-11e4-916c-0800200c9a66] Endpoints /54.183.192.248 and /54.215.139.161 are consistent for Standard1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is it better to show private IP for both nodes since they are communicating through private IPs?&lt;/p&gt;</comment>
                            <comment id="14169555" author="jblangston@datastax.com" created="Mon, 13 Oct 2014 17:11:58 +0000"  >&lt;p&gt;I think it is most important to show the private IP in netstats, and my vote would be to show both the public and private IP in that case.  On the logs, I can see that would be more work to fix and I don&apos;t necessarily think it needs to show the private IP everywhere, but maybe on the messages that specifically concern streaming, we could show both.&lt;/p&gt;</comment>
                            <comment id="14170241" author="yukim" created="Mon, 13 Oct 2014 23:38:29 +0000"  >&lt;p&gt;Attaching V2.&lt;br/&gt;
In this version, I changed the code so that repair/bootstrap/etc pass private IP when available to create stream session. This way, we can show private IP in streaming related log and nodetool netstats, but not both.&lt;br/&gt;
(Also, I think it is better not to create dependency to system keyspace from streaming.)&lt;/p&gt;</comment>
                            <comment id="14171005" author="JIRAUSER308715" created="Tue, 14 Oct 2014 14:36:25 +0000"  >&lt;p&gt;Since you mention breaking streaming, when testing this someone should make sure that you can use sstableloader from a node that is not part of the cluster.&lt;/p&gt;</comment>
                            <comment id="14172560" author="yukim" created="Wed, 15 Oct 2014 16:39:27 +0000"  >&lt;p&gt;Attaching v3.&lt;/p&gt;

&lt;p&gt;v2 has problems that 1) remote node always create session with broadcast address and 2) cannot be evicted by gossip since it only uses broadcast address.&lt;/p&gt;

&lt;p&gt;In v3, each StreamSession has &apos;peer&apos; address as an node id the same as before and &apos;connecting&apos; address that indicates actual connecting address.&lt;br/&gt;
So nodetool nestats now shows both when the two are not the same. I haven&apos;t touched the logs because in those lines &apos;peer&apos; address is used as a node identifier, but I added one INFO log that indicates StreamSession is using private IP.&lt;/p&gt;</comment>
                            <comment id="14173821" author="jblangston@datastax.com" created="Thu, 16 Oct 2014 14:41:20 +0000"  >&lt;p&gt;Test v3; nodetool netstats looks good as well as actual ports used via netstat -an.  In the logs, I only see the internal IP mentioned in one place. Is this the INFO line you were talking about?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; INFO [STREAM-INIT-/172.31.5.143:43953] 2014-10-16 14:36:11,292 StreamResultFuture.java (line 121) [Stream #c5fbdb90-5541-11e4-8eb3-c9fac3589773] Received streaming plan &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Repair
 INFO [STREAM-INIT-/172.31.5.143:43994] 2014-10-16 14:38:16,120 StreamResultFuture.java (line 121) [Stream #10424ae0-5542-11e4-8eb3-c9fac3589773] Received streaming plan &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Repair
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14173881" author="yukim" created="Thu, 16 Oct 2014 15:49:07 +0000"  >&lt;p&gt;That line has been in cassandra for a while. It is logged when a node receives streaming request. Displayed address is taken directly from socket so it displays actual connected address.&lt;/p&gt;

&lt;p&gt;New log looks like &quot;&lt;a href=&quot;#xxxx-...&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stream #xxxx-...&lt;/a&gt; Starting streaming to /xxx.xxx.xxx.xxx through /yyy.yyy.yyy.yyy&quot;. where the latter address is private IP.&lt;/p&gt;</comment>
                            <comment id="14173927" author="jblangston@datastax.com" created="Thu, 16 Oct 2014 16:45:50 +0000"  >&lt;p&gt;Confirmed the log messages:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; INFO [StreamConnectionEstablisher:1] 2014-10-16 14:36:11,277 StreamSession.java (line 218) [Stream #c5fbdb90-5541-11e4-8eb3-c9fac3589773] Starting streaming to /54.183.192.248 through /172.31.7.50
 INFO [StreamConnectionEstablisher:2] 2014-10-16 14:38:16,083 StreamSession.java (line 218) [Stream #10424ae0-5542-11e4-8eb3-c9fac3589773] Starting streaming to /54.183.192.248 through /172.31.7.50
 INFO [StreamConnectionEstablisher:1] 2014-10-16 14:39:53,600 StreamSession.java (line 218) [Stream #4a9133f0-5542-11e4-8eb3-c9fac3589773] Starting streaming to /54.183.192.248 through /172.31.7.50
 INFO [StreamConnectionEstablisher:2] 2014-10-16 14:40:50,476 StreamSession.java (line 218) [Stream #6c5b4200-5542-11e4-8eb3-c9fac3589773] Starting streaming to /54.183.192.248 through /172.31.7.50
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Everything looks like it&apos;s working as expected.  I haven&apos;t tested sstableloader as suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjordan&quot; class=&quot;user-hover&quot; rel=&quot;jjordan&quot;&gt;jjordan&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14175219" author="jmckenzie" created="Fri, 17 Oct 2014 16:37:16 +0000"  >&lt;p&gt;Thoughts:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I don&apos;t like persisting both the peer and the connecting address all the way down the abstraction stack through StreamPlan to StreamSession.  Both StreamPlan and StreamSession are incurring a pretty big burden just to be able to print the peer address alongside the private we&apos;re streaming to.&lt;/li&gt;
	&lt;li&gt;The name &quot;preferred&quot; used in StreamPlan implies that it will fall back to the &quot;from&quot; option if it can&apos;t hit preferred but that doesn&apos;t appear to be the case.  Maybe a rename to &apos;connecting&apos; in this context as well would be appropriate?&lt;/li&gt;
	&lt;li&gt;(nit) reseted should probably be resetted in OutboundTcpConnectionPool.java (predates this ticket, but while we&apos;re in the neighborhood...)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Functionally looks sound to me. Only other thing I&apos;d recommend is testing sstableloader as suggested previously.&lt;/p&gt;</comment>
                            <comment id="14175223" author="yukim" created="Fri, 17 Oct 2014 16:44:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t like persisting both the peer and the connecting address all the way down the abstraction stack&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s what I wanted to avoid, but one reason we need both is that &apos;convic&apos;ing from gossip does not work with private IPs, and I don&apos;t want to introduce system table lookup from inside streaming.&lt;/p&gt;

&lt;p&gt;I work on other renaming issues.&lt;/p&gt;</comment>
                            <comment id="14175242" author="jmckenzie" created="Fri, 17 Oct 2014 16:57:27 +0000"  >&lt;p&gt;Fair point on the compromise.  Better to persist that data locally than add the system table lookups into the streaming process and add an external dependency in that way.  Consistency on naming should help with that part a bit.&lt;/p&gt;

&lt;p&gt;One last thing - it looks like there&apos;s some unused method signatures in StreamPlan we could take out and also normalize to (update testRequestEmpty() for instance) to help clear up some of the clutter and duplication in there.&lt;/p&gt;</comment>
                            <comment id="14175481" author="yukim" created="Fri, 17 Oct 2014 20:06:36 +0000"  >&lt;p&gt;Updated based on Josh&apos;s review.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jblangston%40datastax.com&quot; class=&quot;user-hover&quot; rel=&quot;jblangston@datastax.com&quot;&gt;jblangston@datastax.com&lt;/a&gt; can you confirm that sstableloader work with the node with private IP (on AWS)?&lt;/p&gt;</comment>
                            <comment id="14175588" author="jblangston@datastax.com" created="Fri, 17 Oct 2014 21:42:38 +0000"  >&lt;p&gt;I don&apos;t think sstableloader is working right. Here is the output for sstableloader itself:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;automaton@ip-172-31-7-50:~/Keyspace1/Standard1$ sstableloader -d localhost `pwd`
Established connection to initial hosts
Opening sstables and calculating sections to stream
Streaming relevant part of /home/automaton/Keyspace1/Standard1/Keyspace1-Standard1-jb-320-Data.db /home/automaton/Keyspace1/Standard1/Keyspace1-Standard1-jb-326-Data.db /home/automaton/Keyspace1/Standard1/Keyspace1-Standard1-jb-325-Data.db /home/automaton/Keyspace1/Standard1/Keyspace1-Standard1-jb-283-Data.db /home/automaton/Keyspace1/Standard1/Keyspace1-Standard1-jb-267-Data.db /home/automaton/Keyspace1/Standard1/Keyspace1-Standard1-jb-211-Data.db /home/automaton/Keyspace1/Standard1/Keyspace1-Standard1-jb-301-Data.db /home/automaton/Keyspace1/Standard1/Keyspace1-Standard1-jb-316-Data.db to [/54.183.192.248, /54.215.139.161, /54.165.222.3, /54.172.118.222]
Streaming session ID: ac5dd440-5645-11e4-a813-3d13c3d3c540
progress: [/54.172.118.222 8/8 (100%)] [/54.183.192.248 8/8 (100%)] [/54.165.222.3 8/8 (100%)] [/54.215.139.161 8/8 (100%)] [total: 100% - 2147483647MB/s (avg: 30MB/s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is netstats on the node where it is running (54.183.192.248):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Responses                       n/a         0            812
automaton@ip-172-31-7-50:~$ nodetool netstats
Mode: NORMAL
Bulk Load ac5dd440-5645-11e4-a813-3d13c3d3c540
    /172.31.7.50 (using /54.183.192.248)
        Receiving 8 files, 1059673728 bytes total
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-10-Data.db 56468194/164372226 bytes(34%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-4-Data.db 278000000/278000000 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-3-Data.db 50674396/50674396 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-5-Data.db 68597334/68597334 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-7-Data.db 139068110/139068110 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-6-Data.db 12682638/12682638 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-9-Data.db 278000000/278000000 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-8-Data.db 68279024/68279024 bytes(100%) received from /172.31.7.50
Read Repair Statistics:
Attempted: 0
Mismatch (Blocking): 0
Mismatch (Background): 0
Pool Name                    Active   Pending      Completed
Commands                        n/a         0              0
Responses                       n/a         0            970
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s netstats on the other node in the same DC (54.215.139.161):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;automaton@ip-172-31-40-169:~$ nodetool netstats
Mode: NORMAL
Bulk Load ac5dd440-5645-11e4-a813-3d13c3d3c540
    /172.31.7.50 (using /54.183.192.248)
        Receiving 8 files, 1059673728 bytes total
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-239-Data.db 68279024/68279024 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-245-Data.db 278000000/278000000 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-246-Data.db 43078602/50674396 bytes(85%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-240-Data.db 278000000/278000000 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-241-Data.db 12682638/12682638 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-243-Data.db 139068110/139068110 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-242-Data.db 164372226/164372226 bytes(100%) received from /172.31.7.50
            /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/cassandra/data/Keyspace1/Standard1/Keyspace1-Standard1-tmp-jb-244-Data.db 68597334/68597334 bytes(100%) received from /172.31.7.50
Read Repair Statistics:
Attempted: 0
Mismatch (Blocking): 0
Mismatch (Background): 0
Pool Name                    Active   Pending      Completed
Commands                        n/a         0         249589
Responses                       n/a         0        1390344
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The IP addresses seem backwards in netstats output.&lt;/p&gt;

&lt;p&gt;Here is the output of netstat -anp | grep 7000 on the node where sstableloader is running:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;tcp        0      0 172.31.7.50:7000        0.0.0.0:*               LISTEN      21544/java
tcp        0      0 172.31.7.50:7000        172.31.5.143:44869      ESTABLISHED 21544/java
tcp        0      0 172.31.7.50:56991       172.31.5.143:7000       ESTABLISHED 21544/java
tcp        0      0 172.31.7.50:7000        54.165.222.3:50968      ESTABLISHED 21544/java
tcp        0      0 172.31.7.50:50599       54.165.222.3:7000       ESTABLISHED 21544/java
tcp        0      0 172.31.7.50:50624       54.165.222.3:7000       ESTABLISHED 22226/java
tcp        0 1132336 172.31.7.50:50626       54.165.222.3:7000       ESTABLISHED 22226/java
tcp        0      0 172.31.7.50:7000        54.172.118.222:58561    ESTABLISHED 21544/java
tcp        0      0 172.31.7.50:37769       54.172.118.222:7000     ESTABLISHED 21544/java
tcp        0      0 172.31.7.50:37796       54.172.118.222:7000     ESTABLISHED 22226/java
tcp        0 1149712 172.31.7.50:37798       54.172.118.222:7000     ESTABLISHED 22226/java
tcp        0      0 172.31.7.50:7000        54.183.192.248:47451    ESTABLISHED 21544/java
tcp    43688      0 172.31.7.50:7000        54.183.192.248:47453    ESTABLISHED 21544/java
tcp        0      0 172.31.7.50:47451       54.183.192.248:7000     ESTABLISHED 22226/java
tcp        0  98464 172.31.7.50:47453       54.183.192.248:7000     ESTABLISHED 22226/java
tcp        0      0 172.31.7.50:41240       54.215.139.161:7000     ESTABLISHED 22226/java
tcp        0  81088 172.31.7.50:41242       54.215.139.161:7000     ESTABLISHED 22226/java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s establishing a connection to itself (54.183.192.248) and to the other node in the local DC (54.215.139.161) with the broadcast address instead of the listen address.&lt;/p&gt;</comment>
                            <comment id="14175762" author="yukim" created="Sat, 18 Oct 2014 00:52:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;/172.31.7.50 (using /54.183.192.248)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this is because &apos;localhost&apos; resolved to /172.31.7.50 on sstableloader node. It is the same as before (except &apos;using ...&apos; part) I think. But connection is actually made to broadcast address, it is showing &apos;using ...&apos; part.&lt;/p&gt;

&lt;p&gt;sstableloader cannot determine whether nodes to stream are on the same dc or not.&lt;br/&gt;
To do that, we have to provide topology manually, by file or by passing it through command line option.&lt;/p&gt;

&lt;p&gt;I can go further to solve the problem, but maybe in different JIRA?&lt;/p&gt;</comment>
                            <comment id="14175804" author="JIRAUSER308715" created="Sat, 18 Oct 2014 02:05:20 +0000"  >&lt;p&gt;+1 to fixing sstable loader private ip stuff in a new JIRA. As long as it works normally (not using the private ips).&lt;/p&gt;</comment>
                            <comment id="14176925" author="jmckenzie" created="Mon, 20 Oct 2014 14:25:14 +0000"  >&lt;p&gt;+1 to v4&lt;/p&gt;</comment>
                            <comment id="14177027" author="yukim" created="Mon, 20 Oct 2014 15:54:01 +0000"  >&lt;p&gt;Thanks, committed.&lt;/p&gt;

&lt;p&gt;For sstableloader stream to private IP, I created &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8148&quot; title=&quot;sstableloader needs ability to stream to private IP&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8148&quot;&gt;CASSANDRA-8148&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12674644" name="8084-2.0-v2.txt" size="8198" author="yukim" created="Mon, 13 Oct 2014 23:38:29 +0000"/>
                            <attachment id="12675032" name="8084-2.0-v3.txt" size="31584" author="yukim" created="Wed, 15 Oct 2014 16:39:27 +0000"/>
                            <attachment id="12675565" name="8084-2.0-v4.txt" size="32442" author="yukim" created="Fri, 17 Oct 2014 20:06:36 +0000"/>
                            <attachment id="12673936" name="8084-2.0.txt" size="1190" author="yukim" created="Thu, 9 Oct 2014 17:10:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yukim]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20xu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326712">2.0.8</customfieldvalue>
    <customfieldvalue id="12327164">2.0.10</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>joshuamckenzie</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[joshuamckenzie]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jblangston@datastax.com</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>