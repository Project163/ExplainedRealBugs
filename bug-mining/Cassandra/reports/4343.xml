<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:03:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-11949] GC log directory should be created in startup scripts</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-11949</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-10140&quot; title=&quot;Enable GC logging by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-10140&quot;&gt;&lt;del&gt;CASSANDRA-10140&lt;/del&gt;&lt;/a&gt;, we enabled GC logging by default, since the overhead was low and asking people providing diagnostics to restart can often make it more difficult to diagnose problems.&lt;/p&gt;

&lt;p&gt;The default GC log path is set to &lt;tt&gt;$CASSANDRA_HOME/logs/gc.log&lt;/tt&gt; in &lt;tt&gt;cassandra-env.sh&lt;/tt&gt;, a directory that is not present in a fresh clone/install. Even if logback creates this directory later in startup, it is not present when the JVM initiates GC logging, so GC logging will silently fail for this first Cassandra run&lt;/p&gt;

&lt;p&gt;I haven&apos;t tested this in Windows but suspect the same problem may occur. Since lots of tooling around Cassandra won&apos;t create this directory, we should instead consider attempting to create it in our startup scripts.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12975381">CASSANDRA-11949</key>
            <summary>GC log directory should be created in startup scripts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="mahdix">Mahdi Mohammadinasab</assignee>
                                    <reporter username="jkni">Joel Knighton</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jun 2016 05:23:39 +0000</created>
                <updated>Wed, 15 Oct 2025 09:49:06 +0000</updated>
                            <resolved>Tue, 11 Oct 2016 22:53:33 +0000</resolved>
                                                            <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15332627" author="mahdix" created="Wed, 15 Jun 2016 21:33:16 +0000"  >&lt;p&gt;Branch: &lt;a href=&quot;https://github.com/mm-binary/cassandra/tree/11949-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15344043" author="mahdix" created="Wed, 22 Jun 2016 09:59:22 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;2.2&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/mm-binary/cassandra/tree/11949-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/mm-binary/cassandra/tree/11949-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15344050" author="mahdix" created="Wed, 22 Jun 2016 10:03:12 +0000"  >&lt;p&gt;I tested the 2.2 branch on &quot;Windows 7&quot;. It&apos;s fine except that it requires me to run some command to enable some policy in the PowerShell console to be able to create the directory.&lt;/p&gt;</comment>
                            <comment id="15353220" author="jmckenzie" created="Tue, 28 Jun 2016 15:27:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;it requires me to run some command to enable some policy in the PowerShell console to be able to create the directory&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The PowerShell startup scripts require you set your execution policy to unrestricted. See: &lt;a href=&quot;https://technet.microsoft.com/en-us/library/hh847748.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;link&lt;/a&gt;. Theoretically we could limit the scope of the required security access by using &lt;a href=&quot;https://technet.microsoft.com/en-us/library/hh849924.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Unblock-File&lt;/a&gt;, but then we&apos;d have to swap to RemoteSigned on systems that default to Restricted, etc. Ultimately, just don&apos;t run unknown powershell scripts on the user account you&apos;re using to run C* on Windows and you&apos;re in good shape.&lt;/p&gt;</comment>
                            <comment id="15353441" author="jmckenzie" created="Tue, 28 Jun 2016 17:50:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=cassandra.git;a=commit;h=3a61c106595745694a73970c780c3713776f4362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Committed&lt;/a&gt; and merged up. Thanks for the patch!&lt;/p&gt;</comment>
                            <comment id="15356520" author="mahdix" created="Thu, 30 Jun 2016 04:59:10 +0000"  >&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="15357834" author="jmckenzie" created="Thu, 30 Jun 2016 20:53:31 +0000"  >&lt;p&gt;Turns out this broke the deb. packaging scripts. We&apos;ll need to do the directory creation in bin/cassandra and bin/cassandra.ps1 instead of the env.&lt;/p&gt;</comment>
                            <comment id="15357927" author="mahdix" created="Thu, 30 Jun 2016 21:57:48 +0000"  >&lt;p&gt;Ok. I will fix this.&lt;/p&gt;</comment>
                            <comment id="15389777" author="mahdix" created="Fri, 22 Jul 2016 16:28:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/mm-binary/cassandra/tree/11949-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Branch for 2.2+&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15395952" author="jmckenzie" created="Wed, 27 Jul 2016 16:37:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mahdix&quot; class=&quot;user-hover&quot; rel=&quot;mahdix&quot;&gt;mahdix&lt;/a&gt;: After chewing on this issue a bit more, I&apos;m not sure I&apos;m comfortable with us adding directory creation into our launch scripts. This would put us at three separate locations responsible for directory creation: launch scripts, within Java / Daemon itself, and implicitly via the package. I think I&apos;d prefer that this directory exist in the original archived form of Cassandra&apos;s distribution rather than us creating it programmatically.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mshuler&quot; class=&quot;user-hover&quot; rel=&quot;mshuler&quot;&gt;mshuler&lt;/a&gt;: The data and logs are currently excluded as part of .gitignore (for obvious reasons). What would it take to get a logs (and data for that matter) folder created with the C* package when we roll it up as part of our release?&lt;/p&gt;</comment>
                            <comment id="15396404" author="mshuler" created="Wed, 27 Jul 2016 21:25:24 +0000"  >&lt;p&gt;Are we talking about debian packages or the -bin.tar.gz? Both? &lt;/p&gt;

&lt;p&gt;The debian packages create the directories here: &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/debian/dirs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/debian/dirs&lt;/a&gt;&lt;br/&gt;
The logs directory is set to /var/log/cassandra, so looking at this: &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...mm-binary:11949-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/compare/trunk...mm-binary:11949-2.2&lt;/a&gt;&lt;br/&gt;
..that is incorrect for a deb installation. Logs should not be written to a directory under $CASSANDRA_HOME (/usr/share/cassandra in deb&apos;s case), nor should a directory be made there by a startup file. This would mean keeping 2 different cassandra-env.sh files, which isn&apos;t the end of the world, but unfortunate.&lt;/p&gt;

&lt;p&gt;I think the correct thing to do in the case of debian packages is to write gc.log to the correct log location, which already exists at deb install time, not create a new log dir in the wrong location in -env.sh.&lt;/p&gt;</comment>
                            <comment id="15396414" author="mshuler" created="Wed, 27 Jul 2016 21:33:04 +0000"  >&lt;p&gt;I suppose we could do something like ISC cron does and add the dirs to git with a placeholder and adjust .gitignore accordingly for running from a git checkout?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(trunk)mshuler@hana:~/git/cassandra$ cat /etc/cron.weekly/.placeholder 
# DO NOT EDIT OR REMOVE
# This file is a simple placeholder to keep dpkg from removing this directory
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively, if we only really care about release packages, the artifacts target in build.xml could create the directories, I would think.&lt;/p&gt;</comment>
                            <comment id="15396442" author="mshuler" created="Wed, 27 Jul 2016 21:41:13 +0000"  >&lt;p&gt;It looks like we already fix the gc.log location in deb packages, so I assume this is OK - &lt;a href=&quot;https://github.com/apache/cassandra/blob/trunk/debian/patches/002cassandra_logdir_fix.dpatch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/trunk/debian/patches/002cassandra_logdir_fix.dpatch&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15407838" author="mahdix" created="Thu, 4 Aug 2016 14:20:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mshuler&quot; class=&quot;user-hover&quot; rel=&quot;mshuler&quot;&gt;mshuler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt; Shall I close this ticket? &lt;/p&gt;</comment>
                            <comment id="15566806" author="mahdix" created="Tue, 11 Oct 2016 22:24:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mshuler&quot; class=&quot;user-hover&quot; rel=&quot;mshuler&quot;&gt;mshuler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=JoshuaMcKenzie&quot; class=&quot;user-hover&quot; rel=&quot;JoshuaMcKenzie&quot;&gt;JoshuaMcKenzie&lt;/a&gt; Shall I close this ticket?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mahdix]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yxdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>joshuamckenzie</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[joshuamckenzie]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>