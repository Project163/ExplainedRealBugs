<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:43:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6541] New versions of Hotspot create new Class objects on every JMX connection causing the heap to fill up with them if CMSClassUnloadingEnabled isn&apos;t set.</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6541</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Newer versions of Oracle&apos;s Hotspot JVM , post 6u43 (maybe earlier) and 7u25 (maybe earlier), are experiencing issues with GC and JMX where heap slowly fills up overtime until OOM or a full GC event occurs, specifically when CMS is leveraged.  Adding:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;JVM_OPTS=&quot;$JVM_OPTS -XX:+CMSClassUnloadingEnabled&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The the options in cassandra-env.sh alleviates the problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687035">CASSANDRA-6541</key>
            <summary>New versions of Hotspot create new Class objects on every JMX connection causing the heap to fill up with them if CMSClassUnloadingEnabled isn&apos;t set.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="jlacefie">jonathan lacefield</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jan 2014 20:38:45 +0000</created>
                <updated>Tue, 14 Oct 2025 12:13:59 +0000</updated>
                            <resolved>Thu, 26 Mar 2015 20:50:28 +0000</resolved>
                                        <fixVersion>1.2.16</fixVersion>
                    <fixVersion>2.0.6</fixVersion>
                    <fixVersion>2.1 beta2</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>20</watches>
                                                                                                                <comments>
                            <comment id="13860743" author="mstump" created="Thu, 2 Jan 2014 20:45:11 +0000"  >&lt;p&gt;I&apos;ve seen at least 3 users in the field hit this issue, in each case enabling CMSClassUnloadingEnabled solved the issue.&lt;/p&gt;</comment>
                            <comment id="13860778" author="jasobrown" created="Thu, 2 Jan 2014 21:21:24 +0000"  >&lt;p&gt;I think we&apos;ve been seeing the same issue, as well, with JMX. Do you have any links or refs about the issue/resolution?&lt;/p&gt;</comment>
                            <comment id="13861618" author="JIRAUSER308715" created="Fri, 3 Jan 2014 15:51:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt; tracked it down to most likely being this code change: &lt;a href=&quot;http://hg.openjdk.java.net/icedtea/jdk7/jdk/rev/985b53122cf8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hg.openjdk.java.net/icedtea/jdk7/jdk/rev/985b53122cf8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13861619" author="jbellis" created="Fri, 3 Jan 2014 16:03:05 +0000"  >&lt;p&gt;A bit more context:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;We have heap dumps full of javax.management.remote.rmi.RMIConnectionImpl$CombinedClassLoader&lt;/li&gt;
	&lt;li&gt;CombinedClassLoader appears to be sandboxing classes used by RMI/JMX and thus instantiates its own copies for each connection&lt;/li&gt;
	&lt;li&gt;If you only use a stable JMX connection pool you are fine, otherwise you &quot;leak&quot; CCL roots&lt;/li&gt;
	&lt;li&gt;If you have bad enough old-gen fragmentation to force periodic STW GC, you are also fine; perversely, this will only bite you if CMS is working as designed&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13861622" author="jbellis" created="Fri, 3 Jan 2014 16:04:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nickmbailey&quot; class=&quot;user-hover&quot; rel=&quot;nickmbailey&quot;&gt;nickmbailey&lt;/a&gt; did you ever file an openjdk bug, or are we convinced this is the new Working As Designed?&lt;/p&gt;</comment>
                            <comment id="13861640" author="jasobrown" created="Fri, 3 Jan 2014 16:35:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; Yes, that is exactly what we have been seeing, as well. However, I&apos;m not sure if our JVM is that &apos;recent&apos; (/me weeps silently) - but, I&apos;ll try to confirm today across several of our clusters. &lt;/p&gt;</comment>
                            <comment id="13861643" author="jeromatron" created="Fri, 3 Jan 2014 16:38:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt; fwiw, even though the diff is from openjdk 1.7, we&apos;ve seen it as far back as jdk 1.6.0 update 45 thus far.&lt;/p&gt;</comment>
                            <comment id="13861662" author="jasobrown" created="Fri, 3 Jan 2014 16:51:44 +0000"  >&lt;p&gt;Yeah, a brute force check of some clusters confirms some are on 1.6.0_41, _37, and _45 - and, of course, they are mixed within the cluster, depending on when the instance was launched (if it was with an older AMI with older JVM).&lt;/p&gt;

&lt;p&gt;I haven&apos;t narrowed the problem down to which instances had troubles with which JVM, but some clusters with &amp;lt; u45 did not have any problems, so I suspect it&apos;s at least &amp;gt; u41 (our most highest version), but probably &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt; is correct with u45.&lt;/p&gt;</comment>
                            <comment id="13861770" author="nickmbailey" created="Fri, 3 Jan 2014 18:54:33 +0000"  >&lt;p&gt;I attempted to file a bug with oracle, but the end result was a notification that I would be emailed with either a bug number or further questions. I haven&apos;t heard anything from them yet though. It&apos;s been a little less than a month.&lt;/p&gt;</comment>
                            <comment id="13866656" author="JIRAUSER308715" created="Thu, 9 Jan 2014 14:05:27 +0000"  >&lt;p&gt;This goes back at least as far as 1.6u43, just had someone hit it there.&lt;/p&gt;</comment>
                            <comment id="13866680" author="benedict" created="Thu, 9 Jan 2014 14:33:31 +0000"  >&lt;p&gt;We could try emailing dmitry.samersoff@oracle.com who contributed the change, and andrew.gross@oracle.com who reviewed it, directly?&lt;/p&gt;</comment>
                            <comment id="13866721" author="benedict" created="Thu, 9 Jan 2014 15:45:28 +0000"  >&lt;p&gt;FYI, I don&apos;t think I asserted this was u45. Only a specific changeset, which appears to have been in OpenJDK 7u12. It&apos;s not possible to see when this was included in Java 6, but could have been as early as u39 judging from release dates on Wikipedia.&lt;/p&gt;</comment>
                            <comment id="13866731" author="JIRAUSER308715" created="Thu, 9 Jan 2014 15:55:18 +0000"  >&lt;p&gt;Yeah, I was adding 1.6 versions where we&apos;ve seen it, since we can&apos;t know when they put that into 1.6.&lt;/p&gt;</comment>
                            <comment id="13866764" author="jbellis" created="Thu, 9 Jan 2014 16:34:14 +0000"  >&lt;p&gt;I have emailed dmitry and andrew, ccing cassandra-dev.&lt;/p&gt;</comment>
                            <comment id="13910376" author="benedict" created="Mon, 24 Feb 2014 15:01:20 +0000"  >&lt;p&gt;I emailed jmx-dev a few weeks ago, and it&apos;s been tumbleweed. I intend to follow up soon, and try the core-dev list (see if I can get any response from a higher traffic list), but I expect this will be slow going. Nobody seems interested.&lt;/p&gt;</comment>
                            <comment id="13910378" author="jbellis" created="Mon, 24 Feb 2014 15:05:51 +0000"  >&lt;p&gt;Will &lt;tt&gt;-XX:&lt;ins&gt;CMSClassUnloadingEnabled&lt;/tt&gt; cause older VMs to bitch at us?  If not let&apos;s add it as a default to 1.1&lt;/ins&gt;.&lt;/p&gt;</comment>
                            <comment id="13910614" author="brandon.williams" created="Mon, 24 Feb 2014 18:30:01 +0000"  >&lt;p&gt;We already do java version detection in shell and add flags based on that, so adding this shouldn&apos;t be a problem.&lt;/p&gt;</comment>
                            <comment id="13910702" author="jbellis" created="Mon, 24 Feb 2014 19:25:34 +0000"  >&lt;p&gt;Well, then someone needs to figure out when it was introduced. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13911570" author="jbellis" created="Tue, 25 Feb 2014 13:41:56 +0000"  >&lt;p&gt;I volunteer &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mshuler&quot; class=&quot;user-hover&quot; rel=&quot;mshuler&quot;&gt;mshuler&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13916367" author="mshuler" created="Fri, 28 Feb 2014 20:52:17 +0000"  >&lt;p&gt;I get no complaints using -XX:+CMSClassUnloadingEnabled with 1.5.0_22-b03 and found an old doc that lists this VM option available in 1.4.1 1.4.2 1.5.0 1.6.0 - &lt;a href=&quot;http://www.reins.altervista.org/java/A_Collection_of_JVM_Options_MP.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.reins.altervista.org/java/A_Collection_of_JVM_Options_MP.html&lt;/a&gt;&lt;br/&gt;
I&apos;d say it&apos;s probably pretty safe to add it.&lt;/p&gt;</comment>
                            <comment id="13916406" author="brandon.williams" created="Fri, 28 Feb 2014 21:19:37 +0000"  >&lt;p&gt;I committed this.&lt;/p&gt;</comment>
                            <comment id="13916942" author="mshuler" created="Sat, 1 Mar 2014 05:30:50 +0000"  >&lt;p&gt;since I was there..&lt;br/&gt;
$ /opt/jdk1.8.0/bin/java -XX:+CMSClassUnloadingEnabled -XX:+PrintFlagsFinal -version |grep CMSClassUnloadingEnabled&lt;br/&gt;
     bool CMSClassUnloadingEnabled                 := true            &lt;/p&gt;
{product}
&lt;p&gt;java version &quot;1.8.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0-b128)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.0-b69, mixed mode)&lt;/p&gt;</comment>
                            <comment id="13929823" author="rcoli" created="Tue, 11 Mar 2014 01:08:09 +0000"  >&lt;p&gt;Is Cassandra &quot;since&quot; on this issue &quot;the dawn of time&quot;?&lt;/p&gt;</comment>
                            <comment id="13929968" author="jbellis" created="Tue, 11 Mar 2014 05:16:22 +0000"  >&lt;p&gt;It&apos;s a HotSpot regression that we&apos;re working around, not a Cassandra bug.&lt;/p&gt;</comment>
                            <comment id="13943122" author="JIRAUSER308715" created="Fri, 21 Mar 2014 15:01:19 +0000"  >&lt;p&gt;Just adding some more java versions here for people wondering if they are hitting this.  Just saw this on 1.6.0_38, so it goes back at least that far on 1.6&lt;/p&gt;</comment>
                            <comment id="13945515" author="rcoli" created="Mon, 24 Mar 2014 18:48:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;It&apos;s a HotSpot regression that we&apos;re working around, not a Cassandra bug.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, so the statement &quot;this HotSpot regression is not-worked-around in all extant versions of Cassandra since the dawn of time&quot; is correct. Thanks for the clarification!&lt;/p&gt;</comment>
                            <comment id="13945516" author="brandon.williams" created="Mon, 24 Mar 2014 18:49:59 +0000"  >&lt;p&gt;Well, not really, since the problematic JVM versions didn&apos;t exist back then.&lt;/p&gt;</comment>
                            <comment id="13945527" author="benedict" created="Mon, 24 Mar 2014 18:52:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;Yes, so the statement &quot;this HotSpot regression is not-worked-around in all extant versions of Cassandra since the dawn of time&quot; is correct. Thanks for the clarification!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, it isn&apos;t, since the hot spot bug did not exist since the dawn of time. As such the from-version is ill-defined, but probably the most sensible definition requires determining the from-version-for-hotspot, which we have yet to manage, and aligning that with C* releases.&lt;/p&gt;</comment>
                            <comment id="13945567" author="JIRAUSER308715" created="Mon, 24 Mar 2014 19:22:13 +0000"  >&lt;p&gt;C* from version really has no meaning here.  But yes, if you run C* 0.3 (if that did JMX monitoring) with 1.6_45 you will hit this issue.  Unless of course you add the given setting to your cassandra-env.sh.  Which can be done without upgrading your C*.&lt;/p&gt;</comment>
                            <comment id="14341346" author="rekhajoshm" created="Sat, 28 Feb 2015 05:16:17 +0000"  >&lt;p&gt;On DSE 4.5.1, Java 1.7, linux ami on aws  encountered long running GC before dse was shutdown.This was a ring of 6 nodes, and no unexpected processes /load were run.The error log attached.&lt;/p&gt;

&lt;p&gt;I suspect to have hit that hotspot/java GC issue.But in this case the class unloading is enabled.&lt;br/&gt;
JVM_OPTS=&quot;$JVM_OPTS -XX:+CMSClassUnloadingEnabled&#8221;&lt;br/&gt;
XX:CMSInitiatingOccupancyFraction=75&lt;/p&gt;

&lt;p&gt;Now configured to have MAX_HEAP_SIZE=&#8220;8G&#8221;, HEAP_NEWSIZE=&#8220;2G&#8221; and GC logging enabled and is stable.However if there is a heap leak, it needs a better fix.&lt;br/&gt;
Suggestion: If the CPU utilization is going up, or heap size leak/long running GC is sensed, the nodetool -h localhost flush can auto kick in?&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Rekha&lt;/p&gt;</comment>
                            <comment id="14341347" author="rekhajoshm" created="Sat, 28 Feb 2015 05:17:47 +0000"  >&lt;p&gt;Dse system log with long running GC before DSE shutdown&lt;/p&gt;</comment>
                            <comment id="14877459" author="mark curtis" created="Sun, 20 Sep 2015 08:22:46 +0000"  >&lt;p&gt;On newer systems with G1 GC is this option ignored? I&apos;m assuming it would be.&lt;/p&gt;</comment>
                            <comment id="16528103" author="githubbot" created="Fri, 29 Jun 2018 19:05:05 +0000"  >&lt;p&gt;Github user jasobrown commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/236#discussion_r199253772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/236#discussion_r199253772&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: conf/jvm11.options &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,89 @@&lt;br/&gt;
    +###########################################################################&lt;br/&gt;
    +#                            jvm11.options                                #&lt;br/&gt;
    +#                                                                         #&lt;br/&gt;
    +# See jvm.options. This file is specific for Java 11 and newer.           #&lt;br/&gt;
    +###########################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +#################&lt;br/&gt;
    +#  GC SETTINGS  #&lt;br/&gt;
    +#################&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +### CMS Settings&lt;br/&gt;
    +#-XX:+UseParNewGC&lt;br/&gt;
    +#-XX:+UseConcMarkSweepGC&lt;br/&gt;
    +#-XX:+CMSParallelRemarkEnabled&lt;br/&gt;
    +#-XX:SurvivorRatio=8&lt;br/&gt;
    +#-XX:MaxTenuringThreshold=1&lt;br/&gt;
    +#-XX:CMSInitiatingOccupancyFraction=75&lt;br/&gt;
    +#-XX:+UseCMSInitiatingOccupancyOnly&lt;br/&gt;
    +#-XX:CMSWaitDuration=10000&lt;br/&gt;
    +#-XX:+CMSParallelInitialMarkEnabled&lt;br/&gt;
    +#-XX:+CMSEdenChunksRecordAlways&lt;br/&gt;
    +## some JVMs will fill up their heap when accessed via JMX, see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6541&quot; title=&quot;New versions of Hotspot create new Class objects on every JMX connection causing the heap to fill up with them if CMSClassUnloadingEnabled isn&amp;#39;t set.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6541&quot;&gt;&lt;del&gt;CASSANDRA-6541&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    +#-XX:+CMSClassUnloadingEnabled&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +### G1 Settings&lt;br/&gt;
    +## Use the Hotspot garbage-first collector.&lt;br/&gt;
    +-XX:+UseG1GC&lt;br/&gt;
    +-XX:+ParallelRefProcEnabled&lt;br/&gt;
    +&lt;br/&gt;
    +#&lt;br/&gt;
    +## Have the JVM do less remembered set work during STW, instead&lt;br/&gt;
    +## preferring concurrent GC. Reduces p99.9 latency.&lt;br/&gt;
    +-XX:G1RSetUpdatingPauseTimePercent=5&lt;br/&gt;
    +#&lt;br/&gt;
    +## Main G1GC tunable: lowering the pause target will lower throughput and vise versa.&lt;br/&gt;
    +## 200ms is the JVM default and lowest viable setting&lt;br/&gt;
    +## 1000ms increases throughput. Keep it smaller than the timeouts in cassandra.yaml.&lt;br/&gt;
    +-XX:MaxGCPauseMillis=500&lt;br/&gt;
    +&lt;br/&gt;
    +## Optional G1 Settings&lt;br/&gt;
    +# Save CPU time on large (&amp;gt;= 16GB) heaps by delaying region scanning&lt;br/&gt;
    +# until the heap is 70% full. The default in Hotspot 8u40 is 40%.&lt;br/&gt;
    +#-XX:InitiatingHeapOccupancyPercent=70&lt;br/&gt;
    +&lt;br/&gt;
    +# For systems with &amp;gt; 8 cores, the default ParallelGCThreads is 5/8 the number of logical cores.&lt;br/&gt;
    +# Otherwise equal to the number of cores when 8 or less.&lt;br/&gt;
    +# Machines with &amp;gt; 10 cores should try setting these to &amp;lt;= full cores.&lt;br/&gt;
    +#-XX:ParallelGCThreads=16&lt;br/&gt;
    +# By default, ConcGCThreads is 1/4 of ParallelGCThreads.&lt;br/&gt;
    +# Setting both to the same value can reduce STW durations.&lt;br/&gt;
    +#-XX:ConcGCThreads=16&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +### JPMS&lt;br/&gt;
    +&lt;br/&gt;
    +-Djdk.attach.allowAttachSelf=true&lt;br/&gt;
    +--add-exports java.base/jdk.internal.misc=ALL-UNNAMED&lt;br/&gt;
    +--add-opens java.base/jdk.internal.module=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.base/jdk.internal.ref=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.base/sun.nio.ch=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.management.rmi/com.sun.jmx.remote.internal.rmi=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.rmi/sun.rmi.registry=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.rmi/sun.rmi.server=ALL-UNNAMED&lt;br/&gt;
    +--add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +### GC logging options &amp;#8211; uncomment to enable&lt;br/&gt;
    +&lt;br/&gt;
    +# Java 11 (and newer) GC logging options:&lt;br/&gt;
    +# See description of &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8046148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8046148&lt;/a&gt; for details about the syntax&lt;br/&gt;
    +# The following is the equivalent to -XX:+PrintGCDetails -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=10M&lt;br/&gt;
    +#-Xlog:gc=info,heap*=trace,age*=debug,safepoint=info,promotion*=trace:file=/var/log/cassandra/gc.log:time,uptime,pid,tid,level:filecount=10,filesize=10240&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    minor nit: `filesize=10240` is the file size in bytes. change to `10485760` if you actually want 10MB files.&lt;/p&gt;</comment>
                            <comment id="16529617" author="githubbot" created="Mon, 2 Jul 2018 09:45:54 +0000"  >&lt;p&gt;Github user snazy commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cassandra/pull/236#discussion_r199440821&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/236#discussion_r199440821&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: conf/jvm11.options &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,89 @@&lt;br/&gt;
    +###########################################################################&lt;br/&gt;
    +#                            jvm11.options                                #&lt;br/&gt;
    +#                                                                         #&lt;br/&gt;
    +# See jvm.options. This file is specific for Java 11 and newer.           #&lt;br/&gt;
    +###########################################################################&lt;br/&gt;
    +&lt;br/&gt;
    +#################&lt;br/&gt;
    +#  GC SETTINGS  #&lt;br/&gt;
    +#################&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +### CMS Settings&lt;br/&gt;
    +#-XX:+UseParNewGC&lt;br/&gt;
    +#-XX:+UseConcMarkSweepGC&lt;br/&gt;
    +#-XX:+CMSParallelRemarkEnabled&lt;br/&gt;
    +#-XX:SurvivorRatio=8&lt;br/&gt;
    +#-XX:MaxTenuringThreshold=1&lt;br/&gt;
    +#-XX:CMSInitiatingOccupancyFraction=75&lt;br/&gt;
    +#-XX:+UseCMSInitiatingOccupancyOnly&lt;br/&gt;
    +#-XX:CMSWaitDuration=10000&lt;br/&gt;
    +#-XX:+CMSParallelInitialMarkEnabled&lt;br/&gt;
    +#-XX:+CMSEdenChunksRecordAlways&lt;br/&gt;
    +## some JVMs will fill up their heap when accessed via JMX, see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6541&quot; title=&quot;New versions of Hotspot create new Class objects on every JMX connection causing the heap to fill up with them if CMSClassUnloadingEnabled isn&amp;#39;t set.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6541&quot;&gt;&lt;del&gt;CASSANDRA-6541&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    +#-XX:+CMSClassUnloadingEnabled&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +### G1 Settings&lt;br/&gt;
    +## Use the Hotspot garbage-first collector.&lt;br/&gt;
    +-XX:+UseG1GC&lt;br/&gt;
    +-XX:+ParallelRefProcEnabled&lt;br/&gt;
    +&lt;br/&gt;
    +#&lt;br/&gt;
    +## Have the JVM do less remembered set work during STW, instead&lt;br/&gt;
    +## preferring concurrent GC. Reduces p99.9 latency.&lt;br/&gt;
    +-XX:G1RSetUpdatingPauseTimePercent=5&lt;br/&gt;
    +#&lt;br/&gt;
    +## Main G1GC tunable: lowering the pause target will lower throughput and vise versa.&lt;br/&gt;
    +## 200ms is the JVM default and lowest viable setting&lt;br/&gt;
    +## 1000ms increases throughput. Keep it smaller than the timeouts in cassandra.yaml.&lt;br/&gt;
    +-XX:MaxGCPauseMillis=500&lt;br/&gt;
    +&lt;br/&gt;
    +## Optional G1 Settings&lt;br/&gt;
    +# Save CPU time on large (&amp;gt;= 16GB) heaps by delaying region scanning&lt;br/&gt;
    +# until the heap is 70% full. The default in Hotspot 8u40 is 40%.&lt;br/&gt;
    +#-XX:InitiatingHeapOccupancyPercent=70&lt;br/&gt;
    +&lt;br/&gt;
    +# For systems with &amp;gt; 8 cores, the default ParallelGCThreads is 5/8 the number of logical cores.&lt;br/&gt;
    +# Otherwise equal to the number of cores when 8 or less.&lt;br/&gt;
    +# Machines with &amp;gt; 10 cores should try setting these to &amp;lt;= full cores.&lt;br/&gt;
    +#-XX:ParallelGCThreads=16&lt;br/&gt;
    +# By default, ConcGCThreads is 1/4 of ParallelGCThreads.&lt;br/&gt;
    +# Setting both to the same value can reduce STW durations.&lt;br/&gt;
    +#-XX:ConcGCThreads=16&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +### JPMS&lt;br/&gt;
    +&lt;br/&gt;
    +-Djdk.attach.allowAttachSelf=true&lt;br/&gt;
    +--add-exports java.base/jdk.internal.misc=ALL-UNNAMED&lt;br/&gt;
    +--add-opens java.base/jdk.internal.module=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.base/jdk.internal.ref=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.base/sun.nio.ch=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.management.rmi/com.sun.jmx.remote.internal.rmi=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.rmi/sun.rmi.registry=ALL-UNNAMED&lt;br/&gt;
    +--add-exports java.rmi/sun.rmi.server=ALL-UNNAMED&lt;br/&gt;
    +--add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED&lt;br/&gt;
    +&lt;br/&gt;
    +&lt;br/&gt;
    +### GC logging options &amp;#8211; uncomment to enable&lt;br/&gt;
    +&lt;br/&gt;
    +# Java 11 (and newer) GC logging options:&lt;br/&gt;
    +# See description of &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8046148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8046148&lt;/a&gt; for details about the syntax&lt;br/&gt;
    +# The following is the equivalent to -XX:+PrintGCDetails -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=10M&lt;br/&gt;
    +#-Xlog:gc=info,heap*=trace,age*=debug,safepoint=info,promotion*=trace:file=/var/log/cassandra/gc.log:time,uptime,pid,tid,level:filecount=10,filesize=10240&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    nice catch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12701548" name="dse_systemlog" size="9353" author="rekhajoshm" created="Sat, 28 Feb 2015 05:17:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366030</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1r3e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366337</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mshuler</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mshuler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>