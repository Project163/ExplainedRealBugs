<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:23:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3231] CQL does not throw an error when invalid hex is supplied</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3231</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;As reported on irc, if you try to create an index on a CF with a default comparator of BytesType, but you supply invalid hex, weird things happen.  Namely if you try to create one on &apos;category&apos; you instead get one on &apos;\xca\xfe\xff\xff&apos;, which is 4 bytes that appears to coincide with attempting to interpret &apos;ca&apos;, &apos;te&apos;, &apos;go&apos;, &apos;ry&apos; as hex.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12523646">CASSANDRA-3231</key>
            <summary>CQL does not throw an error when invalid hex is supplied</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xedin">Pavel Yaskevich</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Sep 2011 01:06:09 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:50 +0000</updated>
                            <resolved>Tue, 27 Sep 2011 20:14:56 +0000</resolved>
                                        <fixVersion>0.8.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13115469" author="xedin" created="Tue, 27 Sep 2011 13:12:14 +0000"  >&lt;p&gt;This is not a CQL/CLI problem but a problem in FBUtilities bytesToHex and hexToBytes methods. New issue would be opened to fix that (if needed).&lt;/p&gt;</comment>
                            <comment id="13115475" author="jbellis" created="Tue, 27 Sep 2011 13:20:07 +0000"  >&lt;p&gt;I don&apos;t think we need a new issue.&lt;/p&gt;</comment>
                            <comment id="13115485" author="xedin" created="Tue, 27 Sep 2011 13:22:56 +0000"  >&lt;p&gt;There is the question then - do we really need to change behavior of bytesToHex/hexToBytes methods of FBUtilities class?&lt;/p&gt;</comment>
                            <comment id="13115487" author="jbellis" created="Tue, 27 Sep 2011 13:28:35 +0000"  >&lt;p&gt;we need to validate index targets one way or the other.&lt;/p&gt;

&lt;p&gt;shouldn&apos;t this be done by calling AbstractType.validate?&lt;/p&gt;</comment>
                            <comment id="13115497" author="xedin" created="Tue, 27 Sep 2011 13:32:23 +0000"  >&lt;p&gt;This is not a question of validation because &lt;/p&gt;
{from/get}
&lt;p&gt;String methods of any type should return valid data rather the question of BytesType string representation, I&apos;m going to let Brandon comment on the latter.&lt;/p&gt;</comment>
                            <comment id="13115506" author="jbellis" created="Tue, 27 Sep 2011 13:46:39 +0000"  >&lt;p&gt;&quot;public ByteBuffer fromString(String source) throws MarshalException&quot;&lt;/p&gt;

&lt;p&gt;if the source is not a valid encoding of the type (as &quot;category&quot; is not for BytesType) then this should throw&lt;/p&gt;</comment>
                            <comment id="13115508" author="xedin" created="Tue, 27 Sep 2011 13:53:28 +0000"  >&lt;p&gt;Exactly, but FBUtilities.hexToBytes does not validate the string so we need to way to validate was is string a correct hex or not&lt;/p&gt;</comment>
                            <comment id="13115528" author="jbellis" created="Tue, 27 Sep 2011 14:23:54 +0000"  >&lt;p&gt;what is this existing part of fromString checking for?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NumberFormatException e)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MarshalException(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;cannot parse &lt;span class=&quot;code-quote&quot;&gt;&apos;%s&apos;&lt;/span&gt; as hex bytes&quot;&lt;/span&gt;, source), e);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13115532" author="xedin" created="Tue, 27 Sep 2011 14:26:54 +0000"  >&lt;p&gt;I think that was expecting hexToBytes to validate string and throw a NumberFormatException but it never did before this patch.&lt;/p&gt;</comment>
                            <comment id="13115562" author="jbellis" created="Tue, 27 Sep 2011 15:15:35 +0000"  >&lt;p&gt;looks like that&apos;s from the old hexToBytes implementation, where the inner loop used to be&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            bytes[i] = (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt(str.substring(i*2, i*2+2), 16);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So I think it&apos;s safe to remove now.&lt;/p&gt;</comment>
                            <comment id="13115565" author="xedin" created="Tue, 27 Sep 2011 15:19:25 +0000"  >&lt;p&gt;do you want to throw MarshalException directly from FBUtilities.hexToBytes to remove NumberFormatException from BytesType.fromString(String)?&lt;/p&gt;</comment>
                            <comment id="13115569" author="jbellis" created="Tue, 27 Sep 2011 15:22:07 +0000"  >&lt;p&gt;v2 attached that doesn&apos;t need an extra regexp pass.  (since we use bytestype for cql blob data it can be performance sensitive.)&lt;/p&gt;</comment>
                            <comment id="13115571" author="xedin" created="Tue, 27 Sep 2011 15:32:07 +0000"  >&lt;p&gt;+1 just please add the test from my patch so we don&apos;t face such regressions in the future.&lt;/p&gt;</comment>
                            <comment id="13115874" author="xedin" created="Tue, 27 Sep 2011 20:14:56 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496700" name="3231-v2.txt" size="1635" author="jbellis" created="Tue, 27 Sep 2011 15:22:07 +0000"/>
                            <attachment id="12496686" name="CASSANDRA-3231.patch" size="3246" author="xedin" created="Tue, 27 Sep 2011 14:16:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1846</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ghen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94250</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>