<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:11:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14481] Using nodetool status after enabling Cassandra internal auth for JMX access fails with currently documented permissions</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14481</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Using the documentation here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cassandra.apache.org/doc/latest/operating/security.html#cassandra-integrated-auth&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cassandra.apache.org/doc/latest/operating/security.html#cassandra-integrated-auth&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Running `nodetool status` on a cluster fails as follows:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;error: Access Denied
-- StackTrace --
java.lang.SecurityException: Access Denied
at org.apache.cassandra.auth.jmx.AuthorizationProxy.invoke(AuthorizationProxy.java:172)
at com.sun.proxy.$Proxy4.invoke(Unknown Source)
at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)
at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)
at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)
at java.security.AccessController.doPrivileged(Native Method)
at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1408)
at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)
at sun.rmi.transport.Transport$1.run(Transport.java:200)
at sun.rmi.transport.Transport$1.run(Transport.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:196)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:573)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:835)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:688)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:687)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at java.lang.Thread.run(Thread.java:748)
at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:283)
at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:260)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:161)
at com.sun.jmx.remote.internal.PRef.invoke(Unknown Source)
at javax.management.remote.rmi.RMIConnectionImpl_Stub.invoke(Unknown Source)
at javax.management.remote.rmi.RMIConnector$RemoteMBeanServerConnection.invoke(RMIConnector.java:1020)
at javax.management.MBeanServerInvocationHandler.invoke(MBeanServerInvocationHandler.java:298)
at com.sun.proxy.$Proxy7.effectiveOwnership(Unknown Source)
at org.apache.cassandra.tools.NodeProbe.effectiveOwnership(NodeProbe.java:489)
at org.apache.cassandra.tools.nodetool.Status.execute(Status.java:74)
at org.apache.cassandra.tools.NodeTool$NodeToolCmd.run(NodeTool.java:255)
at org.apache.cassandra.tools.NodeTool.main(NodeTool.java:169) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Permissions on two additional mbeans were required:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;GRANT EXECUTE ON MBEAN &apos;org.apache.cassandra.db:type=StorageService&apos; TO jmx;
GRANT EXECUTE ON MBEAN &apos;org.apache.cassandra.db:type=EndpointSnitchInfo&apos; TO jmx;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ve updated the documentation in my fork here and would like to do a pull request for the addition:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/dataindataout/cassandra/blob/docs_operating_security/doc/source/operating/security.rst&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dataindataout/cassandra/blob/docs_operating_security/doc/source/operating/security.rst&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Apache Cassandra 3.11.2&lt;/p&gt;

&lt;p&gt;Centos 6.9&lt;/p&gt;</environment>
        <key id="13162924">CASSANDRA-14481</key>
            <summary>Using nodetool status after enabling Cassandra internal auth for JMX access fails with currently documented permissions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dataindataout">Valerie Parham-Thompson</assignee>
                                    <reporter username="dataindataout">Valerie Parham-Thompson</reporter>
                        <labels>
                            <label>security</label>
                    </labels>
                <created>Wed, 30 May 2018 14:53:25 +0000</created>
                <updated>Fri, 15 May 2020 08:05:10 +0000</updated>
                            <resolved>Thu, 21 Jun 2018 03:08:56 +0000</resolved>
                                        <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Documentation and Website</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16495270" author="dataindataout" created="Wed, 30 May 2018 14:54:09 +0000"  >&lt;p&gt;This is my first &quot;PR&quot; to this project. I read the contributions document, but please let me know if I&apos;ve missed any required tags or otherwise need to edit my submission. Thank you very much.&lt;/p&gt;</comment>
                            <comment id="16517993" author="eperott" created="Wed, 20 Jun 2018 10:00:17 +0000"  >&lt;p&gt;Thanks for your contribution.&lt;/p&gt;

&lt;p&gt;I&apos;ve verified the issue and the proposed fix on 3.11.2 and trunk.&lt;/p&gt;

&lt;p&gt;Some comments on your proposed changes.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;GRANT EXECUTE ON MBEAN &#8216;org.apache.cassandra.db:type=EndpointSnitchInfo&#8217; TO jmx;&lt;br/&gt;
 GRANT SELECT, EXECUTE ON MBEAN &#8216;org.apache.cassandra.db:type=StorageService&#8217; TO jmx;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Please update your patch such that it will contain relevant lines only. Right now you&apos;re duplicating parts of the example.&#160;&lt;/p&gt;

&lt;p&gt;Make sure to use a straight quotes &lt;tt&gt;&apos;&lt;/tt&gt;, not curved quotes &lt;tt&gt;&#8217;&lt;/tt&gt; around the mbean names.&lt;/p&gt;

&lt;p&gt;There is no need to grant both &lt;tt&gt;SELECT&lt;/tt&gt; and &lt;tt&gt;EXECUTE&lt;/tt&gt; on the &lt;tt&gt;StorageService&lt;/tt&gt; as &lt;tt&gt;SELECT&lt;/tt&gt; is granted to &lt;tt&gt;ALL MBEANS&lt;/tt&gt; already in the example. And CQL don&apos;t let you grant two permissions in one statement anyway.&lt;/p&gt;

&lt;p&gt;For small fixes like this, committers seem to prefer to get proposed fixes &lt;a href=&quot;https://cassandra.apache.org/doc/latest/development/documentation.html#github-based-work-flow&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;like this&lt;/a&gt;. It is not clear to me how documentation is maintained and published on different branches/versions of Cassandra, but perhaps someone else can give advice on that.&lt;/p&gt;</comment>
                            <comment id="16518164" author="dataindataout" created="Wed, 20 Jun 2018 13:58:33 +0000"  >&lt;p&gt;Thank you very much for this information, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eperott&quot; class=&quot;user-hover&quot; rel=&quot;eperott&quot;&gt;eperott&lt;/a&gt;. I will edit the PR as you have suggested and resubmit.&lt;/p&gt;</comment>
                            <comment id="16518485" author="dataindataout" created="Wed, 20 Jun 2018 18:55:16 +0000"  >&lt;p&gt;I&apos;ve edited the file to support this PR in the following ways:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;changed curly quotes to flat quotes&lt;/li&gt;
	&lt;li&gt;removed repeated lines&lt;/li&gt;
	&lt;li&gt;moved changes to a branch called docs_operating_security&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16518858" author="jjirsa" created="Thu, 21 Jun 2018 03:08:56 +0000"  >&lt;p&gt;Thanks! Committed as &lt;tt&gt;4f02db5c45ece38dda48e0d19667888e9f46536e&lt;/tt&gt; with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eperott&quot; class=&quot;user-hover&quot; rel=&quot;eperott&quot;&gt;eperott&lt;/a&gt; as reviewer. The site won&apos;t update immediately, but will take effect on next rebuild.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dataindataout]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ubg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>eperott</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[eperott]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>