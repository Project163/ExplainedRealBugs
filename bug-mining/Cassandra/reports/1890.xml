<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:36:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4909] Bug when composite index is created in a table having collections</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4909</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4511&quot; title=&quot;Secondary index support for CQL3 collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4511&quot;&gt;&lt;del&gt;CASSANDRA-4511&lt;/del&gt;&lt;/a&gt; is open to add proper indexing of collection, but currently indexing doesn&apos;t work correctly if we index a value in a table having collection, even if that value is not a collection itself.&lt;/p&gt;

&lt;p&gt;We also don&apos;t refuse creating index on collections, even though we don&apos;t support it. Attaching patch to fix both.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12614717">CASSANDRA-4909</key>
            <summary>Bug when composite index is created in a table having collections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Nov 2012 17:44:01 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:23 +0000</updated>
                            <resolved>Mon, 5 Nov 2012 16:18:46 +0000</resolved>
                                        <fixVersion>1.2.0 beta 2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13490697" author="henrikring" created="Mon, 5 Nov 2012 16:02:13 +0000"  >&lt;p&gt;Working at the ApacheConEU Hackathon. Suggestions for testing the patch.&lt;br/&gt;
Below is my understanding of the issue and the solution as well as a suggestion for how to test it.&lt;/p&gt;

&lt;p&gt;The patch changes the code so the exception: InvalidRequestException(&quot;Indexes on collections are no yet supported&quot;)&lt;br/&gt;
is raised if an attempt is made to create an index on an collection type column.&lt;/p&gt;

&lt;p&gt;Creation of indexes on tables that have collection column values is allowed as long as &lt;br/&gt;
the collection columns are NOT part of the index. &lt;/p&gt;

&lt;p&gt;Tests:&lt;br/&gt;
In CQL3 create CF with 2 collection type columns &quot;A1&quot; and &quot;A2&quot; and 2 noncollection type columns &quot;B1&quot; and &quot;B2&quot;.&lt;br/&gt;
Create index on A1 or A2 should fail. &lt;br/&gt;
Create an index on B1 or B2 should succeed.&lt;br/&gt;
Insert data.&lt;br/&gt;
Select on column with index to ensure index is in place.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Should succeed&lt;br/&gt;
CREATE KEYSPACE TEST_CASSANDRA_4909_KS;&lt;/p&gt;

&lt;p&gt;&amp;#8211; Should succeed&lt;br/&gt;
USE TEST_CASSANDRA_4909_KS; &lt;/p&gt;

&lt;p&gt;&amp;#8211; Should succeed&lt;br/&gt;
CREATE TABLE TEST_CASSANDRA_4909_TLB1&lt;br/&gt;
   (A1 set&amp;lt;text&amp;gt;,&lt;br/&gt;
    A2 set&amp;lt;text&amp;gt;,&lt;br/&gt;
    B1 text,&lt;br/&gt;
    B2 text,&lt;br/&gt;
    PRIMARY KEY B1);&lt;/p&gt;

&lt;p&gt;&amp;#8211; Should fail: InvalidRequestException(&quot;Indexes on collections are no yet supported&quot;)&lt;br/&gt;
CREATE INDEX TEST_CASSANDRA_4909_TLB1_INX1 ON TEST_CASSANDRA_4909_TLB1 (A1);&lt;/p&gt;

&lt;p&gt;&amp;#8211; Should Succeed:&lt;br/&gt;
CREATE INDEX TEST_CASSANDRA_4909_TLB1_INX2 ON TEST_CASSANDRA_4909_TLB1 (B2);&lt;/p&gt;

&lt;p&gt;&amp;#8211; Wait for schema agreement.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Should succeed:&lt;br/&gt;
INSERT INTO TEST_CASSANDRA_4909_TLB1 (A1, A2, B1, B2)&lt;br/&gt;
       VALUES(&lt;/p&gt;
{&apos;A1-ROW1-ELM-1&apos;, &apos;A1-ROW1-ELM2&apos;}
&lt;p&gt;, &lt;/p&gt;
{&apos;A2-ROW1-ELM-1&apos;, &apos;A2-ROW1-ELM2&apos;}
&lt;p&gt;, &apos;B1-ROW1&apos;, &apos;B2-ROW1&apos; );&lt;/p&gt;

&lt;p&gt;&amp;#8211; Should succeed:&lt;br/&gt;
INSERT INTO TEST_CASSANDRA_4909_TLB1 (A1, A2, B1, B2)&lt;br/&gt;
       VALUES(&lt;/p&gt;
{&apos;A1-ROW2-ELM-1&apos;, &apos;A1-ROW2-ELM2&apos;}
&lt;p&gt;, &lt;/p&gt;
{&apos;A2-ROW2-ELM-1&apos;, &apos;A2-ROW2-ELM2&apos;}
&lt;p&gt;, &apos;B1-ROW2&apos;, &apos;B2-ROW2&apos; );&lt;/p&gt;

&lt;p&gt;&amp;#8211; Should succeed (ensure index is in place):&lt;br/&gt;
SELECT * FROM TEST_CASSANDRA_4909_TLB1 WHERE B2 = &apos;B2-ROW2&apos;;&lt;/p&gt;

&lt;p&gt;&amp;#8211; Should succeed:&lt;br/&gt;
DROP TABLE TEST_CASSANDRA_4909_TLB1;&lt;/p&gt;</comment>
                            <comment id="13490698" author="jbellis" created="Mon, 5 Nov 2012 16:03:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13490711" author="slebresne" created="Mon, 5 Nov 2012 16:18:46 +0000"  >&lt;p&gt;Committed, thanks&lt;/p&gt;</comment>
                            <comment id="13490713" author="slebresne" created="Mon, 5 Nov 2012 16:21:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;Working at the ApacheConEU Hackathon&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure what that means, but let me recall that there is a fair amount of tests here: &lt;a href=&quot;https://github.com/riptano/cassandra-dtest/blob/master/cql_tests.py&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/riptano/cassandra-dtest/blob/master/cql_tests.py&lt;/a&gt;, including a test for this ticket. It&apos;s not necessarily perfect, but in any case it would be nice to avoid duplication of efforts.&lt;/p&gt;</comment>
                            <comment id="13490748" author="henrikring" created="Mon, 5 Nov 2012 17:18:50 +0000"  >&lt;p&gt;Just to clarify: Comments above are my understanding of the issue and a suggestion for test. Since you agree I will next try and actually run the test to see if it does as expected. I have not done that yet. I need to get the development environment up and running first. I am new to all of this so it is taking a bit of time to get it all going &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I&apos;m not a Python developer, so I was hoping someone else with better skills that area could include the test in the automated tests as appropriate. &lt;/p&gt;</comment>
                            <comment id="13491002" author="henrikring" created="Mon, 5 Nov 2012 22:49:01 +0000"  >&lt;p&gt;Now I got it running and ran the test - it passed:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;CASSANDRA_4909.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.cassandra;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cassandra.thrift.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.thrift.protocol.TProtocol;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.thrift.transport.TFramedTransport;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.thrift.transport.TSocket;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.thrift.transport.TTransport;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.AfterClass;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.BeforeClass;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.UnsupportedEncodingException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.ByteBuffer;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.charset.Charset;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.charset.CharsetDecoder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.charset.CharsetEncoder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.sql.Connection;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.junit.Assert.assertEquals;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.junit.Assert.assertNotNull;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CASSANDRA_4909 {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Charset charset = Charset.forName(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CharsetEncoder encoder = charset.newEncoder();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CharsetDecoder decoder = charset.newDecoder();

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; KEYSPACE_NAME = &lt;span class=&quot;code-quote&quot;&gt;&quot;test_cassandra_4909_ks&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; TABLE_NAME = &lt;span class=&quot;code-quote&quot;&gt;&quot;test_cassandra_4909_tlb1&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Connection _con = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Cassandra.Client _client = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;


    @BeforeClass
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void setUp() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        TTransport tr = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TFramedTransport(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TSocket(&lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;, 9160));
        TProtocol proto = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TBinaryProtocol(tr);
        _client = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Cassandra.Client(proto);
        tr.open();
        _client.set_cql_version(&lt;span class=&quot;code-quote&quot;&gt;&quot;3.0.0&quot;&lt;/span&gt;);
        _client.set_keyspace(&lt;span class=&quot;code-quote&quot;&gt;&quot;system&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-comment&quot;&gt;// Create Keyspace
&lt;/span&gt;        executeCQL_legacy(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE KEYSPACE &quot;&lt;/span&gt; + KEYSPACE_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot; WITH strategy_class = SimpleStrategy AND strategy_options:replication_factor = 1&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-comment&quot;&gt;// Switch &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; KS
&lt;/span&gt;        _client.set_keyspace(KEYSPACE_NAME);
    }

    @AfterClass
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void tearDown() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (_client != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            executeCQL3(&lt;span class=&quot;code-quote&quot;&gt;&quot;DROP KEYSPACE &quot;&lt;/span&gt; + KEYSPACE_NAME);
        }
    }

    @org.junit.Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test1() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        assertNotNull(&lt;span class=&quot;code-quote&quot;&gt;&quot;Expected a connection to be defined?&quot;&lt;/span&gt;, _client);

        executeCQL3(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE TABLE &quot;&lt;/span&gt; + TABLE_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;(A1 set&amp;lt;text&amp;gt;,\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;A2 set&amp;lt;text&amp;gt;,\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;B1 text PRIMARY KEY,\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;B2 text);&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-comment&quot;&gt;//Should fail: InvalidRequestException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Indexes on collections are no yet supported&quot;&lt;/span&gt;)
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            executeCQL3(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE INDEX &quot;&lt;/span&gt; + TABLE_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot;_INX1 ON &quot;&lt;/span&gt; + TABLE_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot; (A1)&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InvalidRequestException e) {
            assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unexpected message in exception&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Indexes on collections are no yet supported&quot;&lt;/span&gt;, e.getWhy());
        }

        &lt;span class=&quot;code-comment&quot;&gt;//Should succeed
&lt;/span&gt;        executeCQL3(&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE INDEX &quot;&lt;/span&gt; + TABLE_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot;_INX2 ON &quot;&lt;/span&gt; + TABLE_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot; (B2)&quot;&lt;/span&gt;);

        executeCQL3(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO &quot;&lt;/span&gt; + TABLE_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot; (A1, A2, B1, B2)\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUES({&lt;span class=&quot;code-quote&quot;&gt;&apos;A1-ROW1-ELM-1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;A1-ROW1-ELM2&apos;&lt;/span&gt;}, {&lt;span class=&quot;code-quote&quot;&gt;&apos;A2-ROW1-ELM-1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;A2-ROW1-ELM2&apos;&lt;/span&gt;}, &lt;span class=&quot;code-quote&quot;&gt;&apos;B1-ROW1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;B2-ROW1&apos;&lt;/span&gt; );\n&quot;&lt;/span&gt;);

        executeCQL3(&lt;span class=&quot;code-quote&quot;&gt;&quot;INSERT INTO &quot;&lt;/span&gt; + TABLE_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot; (A1, A2, B1, B2)\n&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;VALUES({&lt;span class=&quot;code-quote&quot;&gt;&apos;A1-ROW2-ELM-1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;A1-ROW2-ELM2&apos;&lt;/span&gt;}, {&lt;span class=&quot;code-quote&quot;&gt;&apos;A2-ROW2-ELM-1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;A2-ROW2-ELM2&apos;&lt;/span&gt;}, &lt;span class=&quot;code-quote&quot;&gt;&apos;B1-ROW2&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;B2-ROW2&apos;&lt;/span&gt; );\n&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-comment&quot;&gt;// The select would fail with InvalidRequestException(why:No indexed columns present in by-columns clause with Equal &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;)
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the index is not in effect.
&lt;/span&gt;        CqlResult r = executeCQL3(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT B1 FROM &quot;&lt;/span&gt; + TABLE_NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot; WHERE B2 = &lt;span class=&quot;code-quote&quot;&gt;&apos;B2-ROW2&apos;&lt;/span&gt;;&quot;&lt;/span&gt;);
        List&amp;lt;CqlRow&amp;gt; rows = r.getRows();
        CqlRow row = rows.get(0);
        Column c_b1 = row.getColumns().get(0); &lt;span class=&quot;code-comment&quot;&gt;// B1
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; B1_value = bb2str(c_b1.bufferForValue());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Expected other value &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; B1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;B1-ROW2&quot;&lt;/span&gt;, B1_value);
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; dummy = 0;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bb2str(ByteBuffer buffer) {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; data = &quot;&quot;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; old_position = buffer.position();
            data = decoder.decode(buffer).toString();
            buffer.position(old_position);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            e.printStackTrace();
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &quot;&quot;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; data;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ByteBuffer str2bb(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; str) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ByteBuffer.wrap(str.getBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;));
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (UnsupportedEncodingException e) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8 is unavailable?&quot;&lt;/span&gt;, e);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; CqlResult executeCQL_legacy(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; cql) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; _client.execute_cql_query(str2bb(cql), Compression.NONE);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; CqlResult executeCQL3(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; cql) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; _client.execute_cql3_query(str2bb(cql), Compression.NONE, ConsistencyLevel.ALL);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12552029" name="4909.txt" size="1652" author="slebresne" created="Sun, 4 Nov 2012 17:44:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0eplr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83910</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>