<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:30:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-19566] JSON encoded timestamp value does not always match non-JSON encoded value</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-19566</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Description:&lt;/p&gt;

&lt;p&gt;&quot;SELECT JSON ...&quot; and &quot;toJson(...)&quot; on Cassandra 4.1.4 produces different date than &quot;SELECT ...&quot;&#160; for some timestamp type values.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ sudo docker pull cassandra:4.1.4
$ sudo docker create --name cass cassandra:4.1.4
$ sudo docker start cass
$ # wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the Cassandra instance becomes ready
$ sudo docker exec -ti cass cqlsh
Connected to Test Cluster at 127.0.0.1:9042
[cqlsh 6.1.0 | Cassandra 4.1.4 | CQL spec 3.4.6 | Native protocol v5]
Use HELP &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; help.
cqlsh&amp;gt; create keyspace test WITH replication = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt;: 1};
cqlsh&amp;gt; use test;
cqlsh:test&amp;gt; create table tbl (id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, ts timestamp, primary key (id));
cqlsh:test&amp;gt; insert into tbl (id, ts) values (1, -13767019200000);
cqlsh:test&amp;gt; select tounixtimestamp(ts), ts, tojson(ts) from tbl where id=1;
&#160;system.tounixtimestamp(ts) | ts &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;| system.tojson(ts)
----------------------------+---------------------------------+----------------------------
&#160; &#160; &#160; &#160; &#160; &#160; -13767019200000 | 1533-09-28 12:00:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1533-09-18 12:00:00.000Z&quot;&lt;/span&gt;
(1 rows)
cqlsh:test&amp;gt; select json * from tbl where id=1;
&#160;[json]
---------------------------------------------
&#160;{&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;: 1, &lt;span class=&quot;code-quote&quot;&gt;&quot;ts&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;1533-09-18 12:00:00.000Z&quot;&lt;/span&gt;}
(1 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Expected behaviour:&lt;/p&gt;

&lt;p&gt;The &quot;select ts&quot;, &quot;select tojson(ts)&quot; and &quot;select json *&quot; should all produce the same date.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Actual behaviour:&lt;/p&gt;

&lt;p&gt;The &quot;select ts&quot; produced the &quot;1533-09-28&quot; date but the &quot;select tojson(ts)&quot; and &quot;select json *&quot; produced the &quot;1533-09-18&quot; date.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13576202">CASSANDRA-19566</key>
            <summary>JSON encoded timestamp value does not always match non-JSON encoded value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smiklosovic">Stefan Miklosovic</assignee>
                                    <reporter username="Bowen Song">Bowen Song</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Apr 2024 10:53:49 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:48 +0000</updated>
                            <resolved>Mon, 22 Apr 2024 23:32:19 +0000</resolved>
                                        <fixVersion>4.0.13</fixVersion>
                    <fixVersion>4.1.5</fixVersion>
                    <fixVersion>5.0-rc1</fixVersion>
                    <fixVersion>5.1-alpha1</fixVersion>
                                    <component>Legacy/Core</component>
                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17838150" author="smiklosovic" created="Wed, 17 Apr 2024 12:20:38 +0000"  >&lt;p&gt;Does it also happen when ts is not negative value?&lt;/p&gt;</comment>
                            <comment id="17838154" author="smiklosovic" created="Wed, 17 Apr 2024 12:24:18 +0000"  >&lt;p&gt;It does not. I wonder what the reason might be.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cqlsh:test&amp;gt; select tounixtimestamp(ts), ts, tojson(ts) from tbl;

&#160;system.tounixtimestamp(ts) | ts &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;| system.tojson(ts)
----------------------------+---------------------------------+----------------------------
&#160; &#160; &#160; &#160; &#160; &#160; -13767019200000 | 1533-09-28 12:00:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1533-09-18 12:00:00.000Z&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160;13767019200000 | 2406-04-05 12:00:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;2406-04-05 12:00:00.000Z&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Going into negative values before Jan 1 1970 works&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cqlsh:test&amp;gt; select tounixtimestamp(ts), ts, tojson(ts) from tbl where id=2;

 system.tounixtimestamp(ts) | ts                              | system.tojson(ts)
----------------------------+---------------------------------+----------------------------
                      -1000 | 1969-12-31 23:59:59.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1969-12-31 23:59:59.000Z&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but, obviously, for some big negative number is starts to break.&lt;/p&gt;

&lt;p&gt;edit:&lt;/p&gt;

&lt;p&gt;so, it starts to happen between&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cqlsh:test&amp;gt; select id, tounixtimestamp(ts), ts, tojson(ts) from tbl where id in (13,16, 15, 17, 18);

 id | system.tounixtimestamp(ts) | ts                              | system.tojson(ts)
----+----------------------------+---------------------------------+----------------------------
 13 |            -12200000000000 | 1583-05-26 07:06:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1583-05-26 07:06:40.000Z&quot;&lt;/span&gt;
 15 |            -12225000000000 | 1582-08-09 22:40:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1582-07-30 22:40:00.000Z&quot;&lt;/span&gt;
 16 |            -12215000000000 | 1582-12-03 16:26:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1582-12-03 16:26:40.000Z&quot;&lt;/span&gt;
 17 |            -12220000000000 | 1582-10-06 19:33:20.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1582-09-26 19:33:20.000Z&quot;&lt;/span&gt;
 18 |            -12218000000000 | 1582-10-29 23:06:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1582-10-29 23:06:40.000Z&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;29th October 1582 and 26th September 1582.&lt;/p&gt;

&lt;p&gt;In 1582, there was Gregorian calendar reform introduced:&lt;/p&gt;

&lt;p&gt;Date Adjustment: To realign the date of the vernal equinox to March 21st (which was the date of the equinox at the time of the First Council of Nicaea in AD 325 and critical for determining the date of Easter), Thursday, October 4, 1582, was followed by Friday, October 15, 1582. This correction effectively &quot;skipped&quot; 10 days in the calendar.&lt;/p&gt;

&lt;p&gt;There is indeed drift of 10 days.&lt;/p&gt;

&lt;p&gt;So what happens here is that when we go to negative values, whatever we use for date parsing does not correctly parse negative values when Gregorian calendar reform was introduced.&lt;/p&gt;</comment>
                            <comment id="17838196" author="smiklosovic" created="Wed, 17 Apr 2024 13:43:19 +0000"  >&lt;p&gt;this solves it for 5.0&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/3262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/3262&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I ll run a build to be sure all plays fine.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cqlsh&amp;gt; select id, tounixtimestamp(ts), ts, tojson(ts) from test.tbl;

 id | system.tounixtimestamp(ts) | ts                              | system.tojson(ts)
----+----------------------------+---------------------------------+----------------------------
  5 |            -12590000000000 | 1571-01-15 09:46:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1571-01-15 09:46:40.000Z&quot;&lt;/span&gt;
 10 |            -12500000000000 | 1573-11-22 01:46:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1573-11-22 01:46:40.000Z&quot;&lt;/span&gt;
 16 |            -12215000000000 | 1582-12-03 16:26:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1582-12-03 16:26:40.000Z&quot;&lt;/span&gt;
 13 |            -12200000000000 | 1583-05-26 07:06:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1583-05-26 07:06:40.000Z&quot;&lt;/span&gt;
 11 |            -12400000000000 | 1577-01-22 11:33:20.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1577-01-22 11:33:20.000Z&quot;&lt;/span&gt;
  1 |            -12550000000000 | 1572-04-22 08:53:20.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1572-04-22 08:53:20.000Z&quot;&lt;/span&gt;
  8 |            -12520000000000 | 1573-04-04 14:13:20.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1573-04-04 14:13:20.000Z&quot;&lt;/span&gt;
  2 |            -12560000000000 | 1571-12-28 15:06:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1571-12-28 15:06:40.000Z&quot;&lt;/span&gt;
  4 |            -12580000000000 | 1571-05-11 03:33:20.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1571-05-11 03:33:20.000Z&quot;&lt;/span&gt;
 18 |            -12218000000000 | 1582-10-29 23:06:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1582-10-29 23:06:40.000Z&quot;&lt;/span&gt;
 15 |            -12225000000000 | 1582-08-09 22:40:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1582-08-09 22:40:00.000Z&quot;&lt;/span&gt;
 20 |             13767019200000 | 2406-04-05 12:00:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;2406-04-05 12:00:00.000Z&quot;&lt;/span&gt;
  7 |            -12530000000000 | 1572-12-09 20:26:40.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1572-12-09 20:26:40.000Z&quot;&lt;/span&gt;
  6 |            -12540000000000 | 1572-08-16 02:40:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1572-08-16 02:40:00.000Z&quot;&lt;/span&gt;
  9 |            -12510000000000 | 1573-07-29 08:00:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1573-07-29 08:00:00.000Z&quot;&lt;/span&gt;
 14 |            -12250000000000 | 1581-10-24 14:13:20.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1581-10-24 14:13:20.000Z&quot;&lt;/span&gt;
 17 |            -12220000000000 | 1582-10-06 19:33:20.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1582-10-06 19:33:20.000Z&quot;&lt;/span&gt;
 12 |            -12300000000000 | 1580-03-24 21:20:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1580-03-24 21:20:00.000Z&quot;&lt;/span&gt;
  3 |            -12570000000000 | 1571-09-03 21:20:00.000000+0000 | &lt;span class=&quot;code-quote&quot;&gt;&quot;1571-09-03 21:20:00.000Z&quot;&lt;/span&gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17838209" author="bowen song" created="Wed, 17 Apr 2024 14:12:07 +0000"  >&lt;p&gt;Does it work with more extreme cases? E.g. something like 0001-01-01, 0000-01-01 or even 500 BC&lt;/p&gt;

&lt;p&gt;These may not have practical use cases (or do they?), but for the sake of correctness, as long as the value is accepted by Cassandra, the JSON and non-JSON value should always match.&lt;/p&gt;</comment>
                            <comment id="17838215" author="smiklosovic" created="Wed, 17 Apr 2024 14:21:39 +0000"  >&lt;p&gt;It prints it via same means as a raw timestamp is. So if timestamp covers your edge case, tojson will too. If it does not, it wont.&lt;/p&gt;</comment>
                            <comment id="17838227" author="bowen song" created="Wed, 17 Apr 2024 14:44:15 +0000"  >&lt;p&gt;That&apos;s great! Thank you, Stefan.&lt;/p&gt;</comment>
                            <comment id="17838532" author="bereng" created="Thu, 18 Apr 2024 08:24:13 +0000"  >&lt;p&gt;Is there a CI link?&lt;/p&gt;</comment>
                            <comment id="17838545" author="smiklosovic" created="Thu, 18 Apr 2024 09:01:07 +0000"  >&lt;p&gt;working on it&lt;/p&gt;</comment>
                            <comment id="17838665" author="smiklosovic" created="Thu, 18 Apr 2024 13:58:23 +0000"  >&lt;p&gt;Ah, so there are some problems in the end. I haven&apos;t looked into that yet.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19566-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19566-5.0&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java17_pre-commit_tests                         
  &#10003; j17_build                                        4m 36s
  &#10003; j17_cqlsh_dtests_py311                           5m 49s
  &#10003; j17_cqlsh_dtests_py311_vnode                     6m 39s
  &#10003; j17_cqlsh_dtests_py38_vnode                      6m 34s
  &#10003; j17_cqlshlib_cython_tests                        7m 13s
  &#10003; j17_cqlshlib_tests                               8m 21s
  &#10003; j17_dtests                                      32m 51s
  &#10003; j17_dtests_latest                               33m 11s
  &#10003; j17_dtests_vnode                                33m 29s
  &#10003; j17_jvm_dtests_latest_vnode                     16m 56s
    j17_jvm_dtests                                  22m 16s
    j17_unit_tests                                   3m 26s
    j17_cqlsh_dtests_py38                           pending
    j17_utests_latest                               pending
  &#10005; j17_utests_oa                                   15m 49s
      org.apache.cassandra.db.marshal.AbstractTypeTest serdeFromCQLLiteral
      org.apache.cassandra.db.marshal.AbstractTypeTest serdeFromString
      org.apache.cassandra.utils.bytecomparable.ByteSourceComparisonTest testDateType
      org.apache.cassandra.utils.bytecomparable.ByteSourceComparisonTest testTimestampType
      org.apache.cassandra.utils.bytecomparable.ByteSourceConversionTest testDateType
      org.apache.cassandra.utils.bytecomparable.ByteSourceConversionTest testTimestampType
      org.apache.cassandra.cql3.functions.CastFctsTest testTimeCastsInSelectionClause
      org.apache.cassandra.net.ConnectionTest testTimeout
      org.apache.cassandra.db.marshal.TimestampTypeTest stringProperty
java17_separate_tests                            
java11_pre-commit_tests                         
java11_separate_tests                            
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4191/workflows/ed068a94-b146-4b8c-87fb-851be5735922&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17838793" author="smiklosovic" created="Thu, 18 Apr 2024 20:52:25 +0000"  >&lt;p&gt;Now we talk. I wonder how far this bug go. It is probably everywhere.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4200/workflows/1a1e48c3-f02a-45fd-8576-d4ae470a8199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4200/workflows/1a1e48c3-f02a-45fd-8576-d4ae470a8199&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17838901" author="bereng" created="Fri, 19 Apr 2024 08:04:44 +0000"  >&lt;p&gt;You basically move everything to &lt;tt&gt;Instant&lt;/tt&gt; which sgtm.&lt;/p&gt;

&lt;p&gt;I think we should do this 4.0-&amp;gt;trunk . Also CI should be j11 iiuc and I would run upgrade tests as touching serializers and toString sometimes has surprising side effects. Wdyt?&lt;/p&gt;</comment>
                            <comment id="17838921" author="smiklosovic" created="Fri, 19 Apr 2024 09:10:10 +0000"  >&lt;p&gt;I dont know how to run upgrades on my end. I dont have CircleCI plan which would not timeout for me and Jenkins still broken?&#160;&lt;/p&gt;</comment>
                            <comment id="17838964" author="brandon.williams" created="Fri, 19 Apr 2024 11:40:09 +0000"  >&lt;p&gt;Jenkins won&apos;t do &amp;lt; 5.0 well right now, but I can facilitate upgrade tests if you make the branches.&lt;/p&gt;</comment>
                            <comment id="17838982" author="bereng" created="Fri, 19 Apr 2024 12:40:22 +0000"  >&lt;p&gt;I just fired upgrade tests in one of our internal envs for 5.0. If it fails I&apos;ll try on circle. If it passes you can do the rest of PRs :shrug:&lt;/p&gt;</comment>
                            <comment id="17838985" author="edimitrova" created="Fri, 19 Apr 2024 12:43:53 +0000"  >&lt;p&gt;Maybe I misunderstood something, isn&#8217;t Jenkins dev back to business after the standalone Jenkins file was committed?&lt;/p&gt;

&lt;p&gt;I see some runs here &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-5-devbranch/116/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/job/Cassandra-5-devbranch/116/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mck&quot; class=&quot;user-hover&quot; rel=&quot;mck&quot;&gt;mck&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="17839012" author="michaelsembwever" created="Fri, 19 Apr 2024 13:58:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe I misunderstood something, isn&#8217;t Jenkins dev back to business after the standalone Jenkins file was committed?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unfortunately there&apos;s still some (more) things that need fixing, particular to ci-cassandra.a.o and especially to post-commit runs.  This is being ironed out in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19558&quot; title=&quot;Standalone jenkinsfile first round bug fixes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19558&quot;&gt;&lt;del&gt;CASSANDRA-19558&lt;/del&gt;&lt;/a&gt;, with the remaining issue around docker pull rate limits.  The test results in the cassandra-5.0 and trunk post-commit builds are legit though (despite the red status of those builds), otherwise these jobs are disabled until 19558 lands.&lt;/p&gt;

&lt;p&gt;The jenkinsfile &lt;em&gt;can&lt;/em&gt; now be used in other jenkins successfully. &lt;/p&gt;</comment>
                            <comment id="17839560" author="smiklosovic" created="Mon, 22 Apr 2024 08:51:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19566-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19566-4.0&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java8_pre-commit_tests                          
  &#10003; j8_build                                          5m 9s
  &#10003; j8_cqlsh-dtests-py2-no-vnodes                    6m 30s
  &#10003; j8_cqlsh-dtests-py2-with-vnodes                  8m 15s
  &#10003; j8_cqlsh_dtests_py3                              7m 52s
  &#10003; j8_cqlsh_dtests_py311                            7m 39s
  &#10003; j8_cqlsh_dtests_py311_vnode                      9m 13s
  &#10003; j8_cqlsh_dtests_py38                             7m 35s
  &#10003; j8_cqlsh_dtests_py38_vnode                       10m 6s
  &#10003; j8_cqlsh_dtests_py3_vnode                        8m 31s
  &#10003; j8_cqlshlib_tests                                8m 55s
  &#10003; j8_dtests                                       32m 10s
  &#10003; j8_dtests_vnode                                 36m 28s
  &#10003; j8_jvm_dtests                                    16m 6s
  &#10003; j11_dtests_vnode                                36m 12s
  &#10003; j11_dtests                                       34m 0s
  &#10003; j11_cqlsh_dtests_py3_vnode                       5m 46s
  &#10003; j11_cqlsh_dtests_py38_vnode                      5m 39s
  &#10003; j11_cqlsh_dtests_py38                            5m 58s
  &#10003; j11_cqlsh_dtests_py311_vnode                     5m 52s
  &#10003; j11_cqlsh_dtests_py311                           5m 24s
  &#10003; j11_cqlsh_dtests_py3                             5m 24s
  &#10003; j11_cqlsh-dtests-py2-with-vnodes                 5m 38s
  &#10003; j11_cqlsh-dtests-py2-no-vnodes                   5m 40s
  &#10005; j8_unit_tests                                   10m 17s
      org.apache.cassandra.cql3.MemtableSizeTest testTruncationReleasesLogSpace
  &#10005; j8_utests_system_keyspace_directory               8m 9s
      org.apache.cassandra.cql3.MemtableSizeTest testTruncationReleasesLogSpace
  &#10005; j11_unit_tests                                   7m 58s
      org.apache.cassandra.cql3.MemtableSizeTest testTruncationReleasesLogSpace
      org.apache.cassandra.cql3.ViewFilteringClustering2Test testClusteringKeyFilteringRestrictions[0]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4207/workflows/1b8ba460-20c2-42ad-8d89-704a09c4d211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java8_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17839561" author="smiklosovic" created="Mon, 22 Apr 2024 08:52:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19566-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19566-4.1&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java11_pre-commit_tests                         
  &#10003; j11_build                                        2m 20s
  &#10003; j11_cqlsh_dtests_py3                             5m 35s
  &#10003; j11_cqlsh_dtests_py311                           6m 11s
  &#10003; j11_cqlsh_dtests_py311_vnode                     6m 25s
  &#10003; j11_cqlsh_dtests_py38                            5m 50s
  &#10003; j11_cqlsh_dtests_py38_vnode                      5m 55s
  &#10003; j11_cqlsh_dtests_py3_vnode                       5m 45s
  &#10003; j11_cqlshlib_cython_tests                        7m 41s
  &#10003; j11_cqlshlib_tests                                7m 1s
  &#10003; j11_dtests                                      34m 43s
  &#10003; j11_dtests_vnode                                36m 19s
  &#10003; j11_jvm_dtests                                  19m 12s
  &#10003; j11_jvm_dtests_vnode                             12m 7s
  &#10005; j11_unit_tests                                   8m 48s
      org.apache.cassandra.cql3.MemtableSizeTest testSize[skiplist]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4206/workflows/5fb136cf-1503-40e0-a2a7-eeb93edf747b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17839570" author="smiklosovic" created="Mon, 22 Apr 2024 09:08:26 +0000"  >&lt;p&gt;As I am writing this, I am running trunk&apos;s pre-commit workflow in CircleCI. I do not have my own instance of Jenkins and I do not believe that, looking into the history, cassandra-5-devbrach here (1) will actually test anything in a reasonable time without failures to provide upgrade tests. E.g. the last build is stuck on summary for 15 hours?&#160;&lt;/p&gt;

&lt;p&gt;(1) &lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-5-devbranch/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/view/patches/job/Cassandra-5-devbranch/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I would be delighted if community participated in the builds and provided upgrade tests as requested, most ideally via CircleCI.&#160;&lt;/p&gt;</comment>
                            <comment id="17839670" author="smiklosovic" created="Mon, 22 Apr 2024 14:03:41 +0000"  >&lt;p&gt;configuration_test.TestConfiguration test_change_durable_writes is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-19465&quot; title=&quot;Test Failure: configuration_test.TestConfiguration.test_change_durable_writes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-19465&quot;&gt;&lt;del&gt;CASSANDRA-19465&lt;/del&gt;&lt;/a&gt; which I see returning back recently, nothing to do with this patch though.&lt;/p&gt;

&lt;p&gt;write_failures_test.TestWriteFailures test_mutation_v5 passes locally&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-19566-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-19566-trunk&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java17_pre-commit_tests                         
  &#10003; j17_build                                        4m 43s
  &#10003; j17_cqlsh_dtests_py311                           6m 54s
  &#10003; j17_cqlsh_dtests_py311_vnode                     7m 36s
  &#10003; j17_cqlsh_dtests_py38                            7m 26s
  &#10003; j17_cqlsh_dtests_py38_vnode                      7m 30s
  &#10003; j17_cqlshlib_cython_tests                        7m 43s
  &#10003; j17_cqlshlib_tests                               8m 45s
  &#10003; j17_dtests                                      36m 55s
  &#10003; j17_unit_tests                                  13m 17s
  &#10003; j17_utests_latest                               13m 54s
  &#10005; j17_dtests_latest                               36m 42s
      configuration_test.TestConfiguration test_change_durable_writes
  &#10005; j17_dtests_vnode                                36m 23s
      write_failures_test.TestWriteFailures test_mutation_v5
  &#10005; j17_jvm_dtests                                  30m 39s
      org.apache.cassandra.distributed.test.NativeTransportEncryptionOptionsTest testOptionalMtlsModeDoNotAllowNonSSLConnections TIMEOUTED
      org.apache.cassandra.distributed.test.tcm.SplitBrainTest testSplitBrainStartup TIMEOUTED
  &#10005; j17_jvm_dtests_latest_vnode                     28m 39s
      junit.framework.TestSuite org.apache.cassandra.fuzz.harry.integration.model.InJVMTokenAwareExecutorTest TIMEOUTED
      org.apache.cassandra.distributed.test.tcm.SplitBrainTest testSplitBrainStartup TIMEOUTED
  &#10005; j17_utests_oa                                   13m 38s
      org.apache.cassandra.tcm.DiscoverySimulationTest discoveryTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/4209/workflows/c5bb9ae4-b124-412e-90ac-8bb2657d1a2c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17839813" author="brandon.williams" created="Mon, 22 Apr 2024 18:27:05 +0000"  >&lt;p&gt;Running CI for 5.0, I typoed the branch name but it was already running so I&apos;ve left it:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-19556-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1593/workflows/cc50210b-cb42-4529-be00-d017b41d9328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1593/workflows/2ac03a31-b5e8-4cd0-8209-b1b89779fc4e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1594/workflows/a1f7f945-a491-48b6-b166-4fd0917b2e96&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Here&lt;/a&gt; are upgrade tests for 4.0&lt;/p&gt;</comment>
                            <comment id="17839859" author="brandon.williams" created="Mon, 22 Apr 2024 21:38:30 +0000"  >&lt;p&gt;If you dig into the 5.0 j11 failure it&apos;s a red herring; it&apos;s clean.  There seems to be an unrelated problem in test_parallel_upgrade on the upgrade tests but the rest have passed, I am +1 and will open a ticket for test_change_durable_writes (again.)&lt;/p&gt;</comment>
                            <comment id="17840425" author="bereng" created="Wed, 24 Apr 2024 12:54:38 +0000"  >&lt;p&gt;Sorry for the late reply Stefan, I&apos;m traveling. The run with upgrade tests finished green &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12977"><![CDATA[Adhoc Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1op5c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[bereng]]></customfieldvalue>
        <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12336842">4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/fba4a85b971a00e982361282cf6ea46f8ccf0cd1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/fba4a85b971a00e982361282cf6ea46f8ccf0cd1&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;CI&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>