<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:33:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-20490] Encountred &quot;duplicate hardlink error&quot; when repairing</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-20490</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;A user reported:&lt;/p&gt;

&lt;p&gt;Hi all,&lt;/p&gt;

&lt;p&gt;we experience the following issue when executing full sequential repairs in Cassandra 4.0.10.&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;RepairSnapshotExecutor:1&amp;#93;&lt;/span&gt; 2023-11-07 13:22:50,267 CassandraDaemon.java:581 - Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;RepairSnapshotExecutor:1,5,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.RuntimeException: Tried to create duplicate hard link to /opt/ddb/data/pool/data1/test_keyspace/test1-c4b33340f0a211edb0cb2fb04a4be304/snapshots/bec3dba0-7d70-11ee-99d3-7bda513c2b90/nb-1-big-Filter.db&lt;br/&gt;
at org.apache.cassandra.io.util.FileUtils.createHardLink(FileUtils.java:185)&lt;br/&gt;
at org.apache.cassandra.io.sstable.format.SSTableReader.createLinks(SSTableReader.java:1624)&lt;br/&gt;
at org.apache.cassandra.io.sstable.format.SSTableReader.createLinks(SSTableReader.java:1606)&lt;br/&gt;
at org.apache.cassandra.db.ColumnFamilyStore.snapshotWithoutFlush(ColumnFamilyStore.java:1852)&lt;br/&gt;
at org.apache.cassandra.db.ColumnFamilyStore.snapshot(ColumnFamilyStore.java:2031)&lt;br/&gt;
at org.apache.cassandra.db.ColumnFamilyStore.snapshot(ColumnFamilyStore.java:2017)&lt;br/&gt;
at org.apache.cassandra.db.repair.CassandraTableRepairManager.lambda$snapshot$0(CassandraTableRepairManager.java:74)&lt;br/&gt;
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)&lt;br/&gt;
at java.util.concurrent.FutureTask.run(Unknown Source)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&lt;br/&gt;
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)&lt;br/&gt;
at java.lang.Thread.run(Unknown Source)&lt;br/&gt;
ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;AntiEntropyStage:1&amp;#93;&lt;/span&gt; 2023-11-07 13:22:50,267 CassandraDaemon.java:581 - Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;AntiEntropyStage:1,5,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.RuntimeException: java.lang.RuntimeException: Unable to take a snapshot bec3dba0-7d70-11ee-99d3-7bda513c2b90 on test_keyspace/test1&lt;br/&gt;
This behavior is reproduced consistently, when the following are true:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;It is a normal sequential repair (--full and --sequential),&lt;/li&gt;
	&lt;li&gt;It is not a global repair, meaning at least one datacenter is defined (--in-dc or --in-local-dc),&lt;/li&gt;
	&lt;li&gt;The repair affects more than two Cassandra nodes.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For more than two Cassandra nodes the parent repair session consists of multiple separate repair sessions towards different target endpoints. Full sequential repairs require that all participants flush and snapshot the data before starting the repair. Unfortunately, there is a collision between the separate repair sessions. The first one creates the ephemeral snapshot successfully and the second one that tries to create a snapshot (create hard link) in the same node fails with the above error.&lt;br/&gt;
This issue is not seen in global repairs, where datacenters and hosts are not defined, because in that case there is an explicit check if a snapshot already exists before proceeding.&lt;/p&gt;

&lt;p&gt;I found a few issues in Jira about duplicate hard links, but all of them are from older versions and seem irrelevant to this one. Could you please help with this issue?&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Panagiotis&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://lists.apache.org/thread/kwz89po5gkx68bhof7l7o0yykz48bnbw&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/kwz89po5gkx68bhof7l7o0yykz48bnbw&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13613344">CASSANDRA-20490</key>
            <summary>Encountred &quot;duplicate hardlink error&quot; when repairing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smiklosovic">Stefan Miklosovic</assignee>
                                    <reporter username="smiklosovic">Stefan Miklosovic</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Mar 2025 14:29:48 +0000</created>
                <updated>Fri, 16 May 2025 14:42:59 +0000</updated>
                            <resolved>Fri, 16 May 2025 08:07:59 +0000</resolved>
                                        <fixVersion>5.1</fixVersion>
                                    <component>Consistency/Repair</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9600">2h 40m</timespent>
                                <comments>
                            <comment id="17938961" author="smiklosovic" created="Thu, 27 Mar 2025 14:30:18 +0000"  >&lt;p&gt;I need to reproduce this but when I checked the code I see how this could happen already.&lt;/p&gt;</comment>
                            <comment id="17949506" author="frankgh" created="Mon, 5 May 2025 17:02:56 +0000"  >&lt;p&gt;+1 thanks for the fix&lt;/p&gt;</comment>
                            <comment id="17952035" author="smiklosovic" created="Fri, 16 May 2025 07:54:24 +0000"  >&lt;p&gt;Bunch of failures but nothing related to this PR at least ... it is what it is.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/instaclustr/cassandra/tree/CASSANDRA-20490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-20490&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java17_pre-commit_tests                         
  &#10003; j17_build                                       10m 21s
  &#10003; j17_cqlsh_dtests_py311                           7m 37s
  &#10003; j17_cqlsh_dtests_py311_vnode                     7m 44s
  &#10003; j17_cqlsh_dtests_py38                             7m 8s
  &#10003; j17_cqlsh_dtests_py38_vnode                      7m 27s
  &#10003; j17_cqlshlib_cython_tests                       12m 50s
  &#10003; j17_cqlshlib_tests                               9m 20s
  &#10003; j17_dtests_latest                               43m 44s
  &#10003; j17_dtests_vnode                                43m 36s
  &#10003; j17_jvm_dtests_latest_vnode_repeat           1h 15m 25s
  &#10003; j17_jvm_dtests_repeat                        1h 15m 28s
  &#10003; j17_unit_tests_repeat                            7m 29s
  &#10003; j17_utests_latest_repeat                         8m 26s
  &#10003; j17_utests_oa_repeat                             7m 34s
  &#10005; j17_dtests                                       51m 5s
      refresh_test.TestRefresh test_refresh_deadlock_startup
  &#10005; j17_jvm_dtests                                  30m 18s
      org.apache.cassandra.fuzz.topology.HarryOnAccordTopologyMixupTest test
      org.apache.cassandra.fuzz.sai.MultiNodeSAITest indexOnlySaiTest TIMEOUTED
  &#10005; j17_jvm_dtests_latest_vnode                     30m 58s
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordReadRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordReadRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationToAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationToAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.AccordMigrationTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.AccordMigrationTest
  &#10005; j17_unit_tests                                  17m 49s
      org.apache.cassandra.io.sstable.SSTableReaderTest testSpannedIndexPositions TIMEOUTED
  &#10005; j17_utests_latest                               18m 20s
      org.apache.cassandra.db.lifecycle.LogTransactionTest testStatsTSMismatchDuringStart
      org.apache.cassandra.db.lifecycle.LogTransactionTest testWrongTimestampInTxnFile
      org.apache.cassandra.db.lifecycle.LogTransactionTest testStatsTSMismatchDuringList
  &#10005; j17_utests_oa                                   17m 54s
      org.apache.cassandra.io.sstable.SSTableReaderTest testSpannedIndexPositions TIMEOUTED
java11_pre-commit_tests                         
  &#10003; j11_build                                       10m 24s
  &#10003; j11_cqlsh_dtests_py311                            9m 1s
  &#10003; j11_cqlsh_dtests_py311_vnode                     8m 38s
  &#10003; j11_cqlsh_dtests_py38                             7m 3s
  &#10003; j11_cqlsh_dtests_py38_vnode                      8m 15s
  &#10003; j11_cqlshlib_cython_tests                        9m 50s
  &#10003; j11_cqlshlib_tests                              11m 35s
  &#10003; j11_dtests_latest                               45m 51s
  &#10003; j11_dtests_vnode                                42m 30s
  &#10003; j11_jvm_dtests_latest_vnode_repeat           1h 15m 47s
  &#10003; j11_jvm_dtests_repeat                        1h 13m 41s
  &#10003; j11_unit_tests_repeat                            8m 42s
  &#10003; j11_utests_latest_repeat                         8m 26s
  &#10003; j11_utests_oa_repeat                             7m 44s
  &#10003; j11_utests_system_keyspace_directory_repeat      7m 56s
  &#10003; j17_cqlsh_dtests_py311                           6m 50s
  &#10003; j17_cqlsh_dtests_py311_vnode                     7m 32s
  &#10003; j17_cqlsh_dtests_py38                            6m 55s
  &#10003; j17_cqlsh_dtests_py38_vnode                      7m 38s
  &#10003; j17_cqlshlib_cython_tests                        9m 25s
  &#10003; j17_cqlshlib_tests                               8m 42s
  &#10003; j17_dtests_latest                               42m 30s
  &#10003; j17_dtests_vnode                                45m 39s
  &#10003; j17_jvm_dtests_latest_vnode_repeat           1h 13m 36s
  &#10003; j17_jvm_dtests_repeat                        1h 13m 16s
  &#10003; j17_unit_tests_repeat                             8m 4s
  &#10003; j17_utests_latest_repeat                         8m 15s
  &#10003; j17_utests_oa_repeat                            11m 45s
    j11_dtests                                      50m 51s
  &#10005; j11_jvm_dtests                                  31m 59s
      org.apache.cassandra.fuzz.sai.MultiNodeSAITest indexOnlySaiTest TIMEOUTED
  &#10005; j11_jvm_dtests_latest_vnode                     32m 27s
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordReadRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordReadRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationToAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationToAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.AccordMigrationTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.AccordMigrationTest
      org.apache.cassandra.distributed.test.cql3.MixedReadsAccordInteropMultiNodeTokenConflictTest test
  &#10005; j11_simulator_dtests                            20m 16s
      org.apache.cassandra.simulator.test.AccordHarrySimulationTest test
      org.apache.cassandra.simulator.test.HarrySimulatorTest test
  &#10005; j11_unit_tests                                   20m 8s
      org.apache.cassandra.io.sstable.SSTableReaderTest testSpannedIndexPositions TIMEOUTED
      org.apache.cassandra.transport.AuthMessageSizeLimitTest sendTooBigAuthMultiFrameMessage
  &#10005; j11_utests_latest                               19m 26s
      org.apache.cassandra.db.lifecycle.LogTransactionTest testStatsTSMismatchDuringStart
      org.apache.cassandra.db.lifecycle.LogTransactionTest testWrongTimestampInTxnFile
      org.apache.cassandra.db.lifecycle.LogTransactionTest testStatsTSMismatchDuringList
  &#10005; j11_utests_oa                                   19m 11s
      org.apache.cassandra.io.sstable.SSTableReaderTest testSpannedIndexPositions TIMEOUTED
  &#10005; j11_utests_system_keyspace_directory             21m 2s
      org.apache.cassandra.io.sstable.SSTableReaderTest testSpannedIndexPositions TIMEOUTED
  &#10005; j17_dtests                                      38m 16s
      refresh_test.TestRefresh test_refresh_deadlock_startup
  &#10005; j17_jvm_dtests                                  30m 35s
      org.apache.cassandra.fuzz.sai.MultiNodeSAITest indexOnlySaiTest TIMEOUTED
  &#10005; j17_jvm_dtests_latest_vnode                      30m 7s
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordReadRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordReadRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationToAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationToAccordWriteRaceTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.AccordMigrationTest
      junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.AccordMigrationTest
      org.apache.cassandra.fuzz.sai.MultiNodeSAITest indexOnlySaiTest TIMEOUTED
  &#10005; j17_unit_tests                                   18m 5s
      org.apache.cassandra.net.ConnectionTest testTimeout
      org.apache.cassandra.io.sstable.SSTableReaderTest testSpannedIndexPositions TIMEOUTED
  &#10005; j17_utests_latest                               18m 10s
      org.apache.cassandra.db.lifecycle.LogTransactionTest testStatsTSMismatchDuringStart
      org.apache.cassandra.db.lifecycle.LogTransactionTest testWrongTimestampInTxnFile
      org.apache.cassandra.db.lifecycle.LogTransactionTest testStatsTSMismatchDuringList
  &#10005; j17_utests_oa                                    19m 2s
      org.apache.cassandra.io.sstable.SSTableReaderTest testSpannedIndexPositions TIMEOUTED                   
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/5805/workflows/036728ed-e5b0-4e89-8cb0-c9e98d57ec4d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java17_pre-commit_tests&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/instaclustr/cassandra/5805/workflows/d6df2016-76b9-489f-b445-ff736fd159c1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;java11_pre-commit_tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17952072" author="michaelsembwever" created="Fri, 16 May 2025 10:49:22 +0000"  >&lt;p&gt;Can we please try correlate failures, rather than an apparent guess it&apos;s not related.  We have butler to help make this easy.&lt;br/&gt;
The LogTransactionTest failures look new, probably &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18119&quot; title=&quot;Handle sstable metadata stats file getting a new mtime after compaction has finished&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18119&quot;&gt;&lt;del&gt;CASSANDRA-18119&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17952086" author="smiklosovic" created="Fri, 16 May 2025 12:00:42 +0000"  >&lt;p&gt;this timeouts even before &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18119&quot; title=&quot;Handle sstable metadata stats file getting a new mtime after compaction has finished&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18119&quot;&gt;&lt;del&gt;CASSANDRA-18119&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;org.apache.cassandra.io.sstable.SSTableReaderTest testSpannedIndexPositions&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
INFO &#160;[main] 2025-05-16T11:50:51,576 ColumnFamilyStore.java:3025 - Truncation is dropping 1 sstables and keeping 0 due to sstable.maxDataAge &amp;gt; truncatedAt
INFO &#160;[NonPeriodicTasks:1] 2025-05-16T11:50:51,579 BigFormat.java:324 - Deleting sstable: /home/fermat/dev/cassandra/cassandra-instaclustr/cassandra/build/test/cassandra/data/SSTableReaderTest/Standard1-02ffd7b0324c11f0b6ac1dd07b28a950/oa-5-big
INFO &#160;[NonPeriodicTasks:1] 2025-05-16T11:50:51,582 LogTransaction.java:254 - Unfinished transaction log, deleting /home/fermat/dev/cassandra/cassandra-instaclustr/cassandra/build/test/cassandra/data/SSTableReaderTest/Standard1-02ffd7b0324c11f0b6ac1dd07b28a950/oa_txn_unknowncompactiontype_04134380-324c-11f0-b6ac-1dd07b28a950.log&#160;
INFO &#160;[main] 2025-05-16T11:50:51,641 ColumnFamilyStore.java:1052 - Enqueuing flush of SSTableReaderTest.Standard1, Reason: UNIT_TESTS, Usage: 3.018MiB (0%) on-heap, 0B (0%) off-heap
INFO &#160;[PerDiskMemtableFlushWriter_0:2] 2025-05-16T11:50:51,647 Flushing.java:153 - Writing Memtable-Standard1@1339346383(244.141KiB serialized bytes, 5000 ops, 3.018MiB (0%) on-heap, 0B (0%) off-heap), flushed range = [&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
INFO &#160;[PerDiskMemtableFlushWriter_0:2] 2025-05-16T11:50:51,681 Flushing.java:179 - Completed flushing /home/fermat/dev/cassandra/cassandra-instaclustr/cassandra/build/test/cassandra/data/SSTableReaderTest/Standard1-02ffd7b0324c11f0b6ac1dd07b28a950/oa-6-big-Data.db (82.403KiB) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; commitlog position CommitLogPosition(segmentId=1747396247710, position=29104)
ERROR [Reference-Reaper] 2025-05-16T11:50:51,723 Ref.java:250 - LEAK DETECTED: a reference (&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.cassandra.io.sstable.format.SSTableReader$InstanceTidier@269773909:/home/fermat/dev/cassandra/cassandra-instaclustr/cassandra/build/test/cassandra/data/SSTableReaderTest/StandardSmallBloomFilter-030073fa324c11f0b6ac1dd07b28a950/oa-2-big) to &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.cassandra.io.sstable.format.SSTableReader$InstanceTidier@269773909:/home/fermat/dev/cassandra/cassandra-instaclustr/cassandra/build/test/cassandra/data/SSTableReaderTest/StandardSmallBloomFilter-030073fa324c11f0b6ac1dd07b28a950/oa-2-big was not released before the reference was garbage collected
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this started to fail upon &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18119&quot; title=&quot;Handle sstable metadata stats file getting a new mtime after compaction has finished&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18119&quot;&gt;&lt;del&gt;CASSANDRA-18119&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.cassandra.db.lifecycle.LogTransactionTest testStatsTSMismatchDuringStart
org.apache.cassandra.db.lifecycle.LogTransactionTest testWrongTimestampInTxnFile
org.apache.cassandra.db.lifecycle.LogTransactionTest testStatsTSMismatchDuringList
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-20307&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-20307&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;org.apache.cassandra.fuzz.sai.MultiNodeSAITest indexOnlySaiTest&lt;/p&gt;

&lt;p&gt;This is already reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-20417&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-20417&lt;/a&gt; but I do not not see related tickets except &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-20316&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-20316&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; &#160; junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordReadRaceTest
&#160; &#160; &#160; junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordReadRaceTest
&#160; &#160; &#160; junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordWriteRaceTest
&#160; &#160; &#160; junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationFromAccordWriteRaceTest
&#160; &#160; &#160; junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationToAccordWriteRaceTest
&#160; &#160; &#160; junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.MigrationToAccordWriteRaceTest
&#160; &#160; &#160; junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.AccordMigrationTest
&#160; &#160; &#160; junit.framework.TestSuite org.apache.cassandra.distributed.test.accord.AccordMigrationTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;refresh_test.TestRefresh test_refresh_deadlock_startup is &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-20306&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-20306&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17952090" author="smiklosovic" created="Fri, 16 May 2025 12:16:55 +0000"  >&lt;p&gt;I am correcting myself: family of tests from LogTransactionTest seem to pass in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18119&quot; title=&quot;Handle sstable metadata stats file getting a new mtime after compaction has finished&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18119&quot;&gt;&lt;del&gt;CASSANDRA-18119&lt;/del&gt;&lt;/a&gt;, they pass in trunk too (this patch), all executed locally.&lt;/p&gt;

&lt;p&gt;I suspect that they are just flaky.&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[smiklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="13163" cascade-level=""><![CDATA[Code]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1v19k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[frankgh]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348281">4.0-alpha1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/6cfea18ddaa23022a919d3251f161151be81ebf0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/6cfea18ddaa23022a919d3251f161151be81ebf0&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;CI&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>