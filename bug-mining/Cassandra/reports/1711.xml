<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:34:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3636] cassandra 1.0.x breakes APT on debian OpenVZ</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3636</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;During upgrade from 1.0.6&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Setting up cassandra (1.0.6) ...
*error: permission denied on key &lt;span class=&quot;code-quote&quot;&gt;&apos;vm.max_map_count&apos;&lt;/span&gt;*
dpkg: error processing cassandra (--configure):
 subprocess installed post-installation script returned error exit status 255
Errors were encountered &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing:
 cassandra
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Debian Linux (stable), OpenVZ container&lt;/p&gt;</environment>
        <key id="12535263">CASSANDRA-3636</key>
            <summary>cassandra 1.0.x breakes APT on debian OpenVZ</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thepaul">paul cannon</assignee>
                                    <reporter username="zenek_kraweznik0">Zenek Kraweznik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Dec 2011 07:51:52 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:44 +0000</updated>
                            <resolved>Mon, 23 Jul 2012 17:07:13 +0000</resolved>
                                        <fixVersion>1.0.11</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13182830" author="brandon.williams" created="Mon, 9 Jan 2012 21:53:42 +0000"  >&lt;p&gt;What version of openvz is this?  As far as I can tell, there shouldn&apos;t be a problem changing this in a guest.&lt;/p&gt;</comment>
                            <comment id="13185577" author="zenek_kraweznik0" created="Fri, 13 Jan 2012 13:22:32 +0000"  >&lt;p&gt;This must be increasec on host, not on guest. This is kernel shared memory modifications, guests haven&apos;t their own kernel.&lt;/p&gt;

&lt;p&gt;This problem apperears on debian squeeze openvz kernel and on newest openvz patches&lt;/p&gt;</comment>
                            <comment id="13189018" author="saulius.grigaitis" created="Thu, 19 Jan 2012 09:11:43 +0000"  >&lt;p&gt;I have exactly same version with cassandra 1.0.6 and 1.0.7 version (1.0.5 version works fine)&lt;/p&gt;

&lt;p&gt;Installing from debian packanges on ubuntu 10.04 64bits:&lt;/p&gt;

&lt;p&gt;Installing new version of config file /etc/cassandra/cassandra.yaml ...&lt;br/&gt;
error: permission denied on key &apos;vm.max_map_count&apos;&lt;br/&gt;
dpkg: error processing cassandra (--configure):&lt;br/&gt;
 subprocess installed post-installation script returned error exit status 255&lt;/p&gt;

&lt;p&gt;uname -a&lt;br/&gt;
Linux server 2.6.32-042stab044.11 #1 SMP Wed Dec 14 16:02:00 MSK 2011 x86_64 GNU/Linux&lt;/p&gt;</comment>
                            <comment id="13189164" author="thepaul" created="Thu, 19 Jan 2012 15:46:52 +0000"  >&lt;p&gt;Saulius- are you also running openvz? What version, if so?&lt;/p&gt;</comment>
                            <comment id="13189702" author="saulius.grigaitis" created="Fri, 20 Jan 2012 09:13:27 +0000"  >&lt;p&gt;Paul &amp;gt; yes, I&apos;m running openvz. Openvz kernel version is 2.6.32-042stab044.11 .&lt;/p&gt;</comment>
                            <comment id="13190214" author="zenek_kraweznik0" created="Sat, 21 Jan 2012 00:24:15 +0000"  >&lt;p&gt;Cassandra is running on openvz, but post-install procedure is not completed, but changing this sysctl in openvz container is impossible.&lt;/p&gt;

&lt;p&gt;This is not a bug with OpenVZ stricte, so I set components to packaging.&lt;/p&gt;

&lt;p&gt;There is line in cassandra.postinst script:&lt;br/&gt;
sysctl -p /etc/sysctl.d/cassandra.conf&lt;/p&gt;

&lt;p&gt;apt tries to run this script before install/remove any packages and stops on this step.&lt;/p&gt;

&lt;p&gt;This script is breaking apt.&lt;/p&gt;

&lt;p&gt;changing &quot;/etc/sysctl.d/cassandra.conf&quot; to &quot;sysctl -p /etc/sysctl.d/cassandra.conf || rm /etc/sysctl.d/cassandra.conf&quot; could solve this.&lt;/p&gt;</comment>
                            <comment id="13252318" author="tiotempestade" created="Thu, 12 Apr 2012 10:02:59 +0000"  >&lt;p&gt;Solved it! Just unpack the .deb and comment the sysctl -p /etc/sysctl.d/cassandra.conf line in postinst.&lt;/p&gt;

&lt;p&gt;It is already set to vm.max_map_count = 1048575 as the script tries to do..&lt;/p&gt;


&lt;p&gt;After that rebuild the .deb and proceed with Datastax&apos;s installation.&lt;/p&gt;</comment>
                            <comment id="13253203" author="patrik.modesto" created="Fri, 13 Apr 2012 07:49:39 +0000"  >&lt;p&gt;Hi, it&apos;s still a problem for cassandra 1.0.9 and openvz 3.0.23 on Debian Squeeze.&lt;/p&gt;</comment>
                            <comment id="13253206" author="patrik.modesto" created="Fri, 13 Apr 2012 07:52:36 +0000"  >&lt;p&gt;Added latest stable version of Cassandra.&lt;/p&gt;</comment>
                            <comment id="13274747" author="jbellis" created="Mon, 14 May 2012 17:04:26 +0000"  >&lt;p&gt;So...  should we just log a warning if the sysctl fails instead of failing entirely?&lt;/p&gt;</comment>
                            <comment id="13274989" author="thepaul" created="Mon, 14 May 2012 21:33:44 +0000"  >&lt;p&gt;Not much else we &lt;em&gt;can&lt;/em&gt; do.&lt;/p&gt;</comment>
                            <comment id="13278531" author="thepaul" created="Fri, 18 May 2012 02:35:23 +0000"  >&lt;p&gt;This change should allow the deb install to succeed. Patrik, Tio, Zenek, Saulius, or someone else with this problem, could you try applying the patch and installing the deb?&lt;/p&gt;

&lt;p&gt;Change also available on the 3636 branch on my github:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/thepaul/cassandra/tree/3636&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/thepaul/cassandra/tree/3636&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13280265" author="brandon.williams" created="Mon, 21 May 2012 16:29:55 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="13420515" author="joschi" created="Mon, 23 Jul 2012 09:00:58 +0000"  >&lt;p&gt;The fix seems to have been lost during a merge.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=cassandra.git;a=blob;f=debian/cassandra.postinst&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk version of debian/cassandra.postinst&lt;/a&gt; doesn&apos;t contain the changes from Paul&apos;s fix in commit &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=cassandra.git;a=commitdiff;h=48438ffc61bce2396fa2eac2f88fa66a6e6a69cd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;48438ffc61bce2396fa2eac2f88fa66a6e6a69cd&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13420786" author="hudson" created="Mon, 23 Jul 2012 17:04:28 +0000"  >&lt;p&gt;Integrated in Cassandra #1768 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra/1768/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra/1768/&lt;/a&gt;)&lt;br/&gt;
    merge &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3636&quot; title=&quot;cassandra 1.0.x breakes APT on debian OpenVZ&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3636&quot;&gt;&lt;del&gt;CASSANDRA-3636&lt;/del&gt;&lt;/a&gt; from 1.0 to 1.1 cassandra 1.0.x breakes APT on debian OpenVZ (Revision ff64c5d11e9e66dfa42a1ca72572a65fb7480f37)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
dbrosius : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;debian/cassandra.postinst&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13420790" author="brandon.williams" created="Mon, 23 Jul 2012 17:07:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;The trunk version of debian/cassandra.postinst doesn&apos;t contain the changes from Paul&apos;s fix in commit 48438ffc61bce2396fa2eac2f88fa66a6e6a69cd.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes it does.&lt;/p&gt;</comment>
                            <comment id="13428111" author="mohitz" created="Fri, 3 Aug 2012 14:15:54 +0000"  >&lt;p&gt;I am still facing this issue with cassandra 1.1.2. I downloaded the debian file and unpacked it to look at the postinst script. I don&apos;t see Paul&apos;s fix in there.&lt;/p&gt;</comment>
                            <comment id="13428241" author="brandon.williams" created="Fri, 3 Aug 2012 17:20:14 +0000"  >&lt;p&gt;You&apos;re looking at the wrong branch, in that case, because it&apos;s not in 1.1.2.&lt;/p&gt;</comment>
                            <comment id="13428367" author="mohitz" created="Fri, 3 Aug 2012 20:48:13 +0000"  >&lt;p&gt;The fix version here said 1.1.1 incorrectly, so i checked 1.1.2. Thanks for correcting it.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12527987" name="3636.patch.txt" size="1111" author="thepaul" created="Fri, 18 May 2012 02:35:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thepaul]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220947</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gmd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95053</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>