<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:13:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1190] Remove automatic repair sessions</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1190</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Currently both manual and automatic repair sessions use the same timeout value: TREE_STORE_TIMEOUT. This has the very negative effect of setting a maximum time that compaction can take before a manual repair will fail.&lt;/p&gt;

&lt;p&gt;For automatic/natural repairs (triggered by two nodes autonomously finishing major compactions around the same time), you want a relatively low TREE_STORE_TIMEOUT value, because trees generated a long time apart will cause a lot of unnecessary repair. The current value is 10 minutes, to optimize for this case.&lt;/p&gt;

&lt;p&gt;On the other hand, for manual repairs, TREE_STORE_TIMEOUT needs to be significantly higher. For instance, if a manual repair is triggered for a source node A storing 2 TB of data, and a destination node B with an empty store, then node B needs to wait long enough for node A to finish compacting 2 TB of data, which might take &amp;gt; 12 hours. If a node B times out the local tree before node A sends its tree, then the repair will not occur.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466935">CASSANDRA-1190</key>
            <summary>Remove automatic repair sessions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stuhood">Stu Hood</assignee>
                                    <reporter username="stuhood">Stu Hood</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Jun 2010 21:46:32 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:22 +0000</updated>
                            <resolved>Mon, 6 Sep 2010 18:42:16 +0000</resolved>
                                        <fixVersion>0.7 beta 2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12878762" author="stuhood" created="Mon, 14 Jun 2010 21:52:48 +0000"  >&lt;p&gt;Differentiating manual repairs from automatic repairs will require a network protocol change, so for 0.6, I think we should just bump TREE_STORE_TIMEOUT/NATURAL_REPAIR_FREQUENCY to values like 12/24 hours.&lt;/p&gt;

&lt;p&gt;For trunk/0.7, it would make sense to remove the timeout entirely for manual repairs, and to make the timeout for automatic repairs a calculated value based on the size of the column family.&lt;/p&gt;</comment>
                            <comment id="12878770" author="jbellis" created="Mon, 14 Jun 2010 22:07:47 +0000"  >&lt;p&gt;I think I&apos;d prefer simply removing automatic repairs.  The probability of it happening by chance are low enough that having it happen once in a while is more confusing than useful.&lt;/p&gt;</comment>
                            <comment id="12879103" author="stuhood" created="Tue, 15 Jun 2010 20:02:17 +0000"  >&lt;p&gt;Removing automatic repairs is inline with some other improvements I have in mind, so I&apos;m fine with that.&lt;/p&gt;</comment>
                            <comment id="12882403" author="stuhood" created="Fri, 25 Jun 2010 00:00:21 +0000"  >&lt;p&gt;0001 and 0002 remove automatic repairs, and should be safe to apply to 0.6.&lt;/p&gt;

&lt;p&gt;0003 adds a session id to tree requests/responses, and should only be applied to 0.7.&lt;/p&gt;

&lt;p&gt;Should be ready for review now!&lt;/p&gt;</comment>
                            <comment id="12882599" author="jbellis" created="Fri, 25 Jun 2010 14:43:36 +0000"  >&lt;p&gt;committed 0001 to 0.6, but 0002 fails to apply&lt;/p&gt;</comment>
                            <comment id="12882671" author="jbellis" created="Fri, 25 Jun 2010 18:38:27 +0000"  >&lt;p&gt;reverted 0001, bumping to 0.6.4&lt;/p&gt;</comment>
                            <comment id="12882689" author="stuhood" created="Fri, 25 Jun 2010 19:37:56 +0000"  >&lt;p&gt;Sorry for the delay: &apos;for-0.6&apos; is rebased to apply to 0.6, and the original set can be applied to trunk.&lt;/p&gt;</comment>
                            <comment id="12882706" author="jbellis" created="Fri, 25 Jun 2010 20:35:16 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="12882834" author="hudson" created="Sat, 26 Jun 2010 13:07:49 +0000"  >&lt;p&gt;Integrated in Cassandra #477 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/477/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/477/&lt;/a&gt;)&lt;br/&gt;
    allow multiple repair sessions per node.  patch by Stu Hood; reviewed by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1190&quot; title=&quot;Remove automatic repair sessions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1190&quot;&gt;&lt;del&gt;CASSANDRA-1190&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12903785" author="stuhood" created="Sat, 28 Aug 2010 06:01:22 +0000"  >&lt;p&gt;&amp;gt; Removing automatic repairs is inline with some other improvements I have in mind, so I&apos;m fine with that.&lt;br/&gt;
The other improvements I had in mind fell through, and I haven&apos;t seen any good alternatives to major compactions for repairs. I&apos;m wondering if disabling this was the wisest course of action.&lt;/p&gt;</comment>
                            <comment id="12904013" author="jbellis" created="Sun, 29 Aug 2010 19:01:18 +0000"  >&lt;p&gt;Since the automatic repairs couldn&apos;t be relied upon, i.e., if you wanted to guarantee repair, you needed to schedule it anyway, I don&apos;t see what has really been lost.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12448001" name="0001-Remove-natural-repair-throttling-in-preparation-for-.patch" size="4554" author="stuhood" created="Fri, 25 Jun 2010 00:00:21 +0000"/>
                            <attachment id="12448002" name="0002-Rename-readonly-compaction-to-validation-and-make-it.patch" size="19456" author="stuhood" created="Fri, 25 Jun 2010 00:00:21 +0000"/>
                            <attachment id="12448003" name="0003-Add-session-info-to-RPCs-to-handle-concurrent-repair.patch" size="36328" author="stuhood" created="Fri, 25 Jun 2010 00:00:21 +0000"/>
                            <attachment id="12448087" name="for-0.6-0001-Remove-natural-repair-throttling-in-preparation-for-.patch" size="4475" author="stuhood" created="Fri, 25 Jun 2010 19:37:56 +0000"/>
                            <attachment id="12448088" name="for-0.6-0002-Rename-readonly-compaction-to-validation-and-make-it.patch" size="20001" author="stuhood" created="Fri, 25 Jun 2010 19:37:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stuhood]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g3jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92005</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>