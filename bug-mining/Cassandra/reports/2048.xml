<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:37:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5292] CQL3 shouldn&apos;t lowercase DC names for NTS</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5292</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;In CREATE and ALTER statements, when a property map is given (replication, compaction and compression options), CQL3 lowercase the map keys to provide case insensitivity. The goal is to allow things like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  replication = { &apos;Class&apos; : &apos;SimpleStrategy&apos;, &apos;Replication_factor&apos; : &apos;1&apos; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, this messes up with NTS, as it ends up lower-casing the datacenter names. As a consequence,&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  replication = { &apos;class&apos; : &apos;NetworkTopologyStrategy&apos;, &apos;DC1&apos; : &apos;1&apos; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will currently create a DC that is really called &apos;dc1&apos;, which is a problem because DC names are interpreted case sensitively otherwise (at least in PropertyFileSnitch).&lt;/p&gt;

&lt;p&gt;That&apos;s the problem. Now I&apos;m kind of hesitant on what is the right fix. I see the following possibilities:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Remove the CQL3 lower-casing completely. I&apos;ll admit that providing case insensitivy for property map keys may not have been such a good idea in the first place. After all, those map keys are string literal, which rather suggest case sensitivity. However, making that change would be a break strictly speaking.&lt;/li&gt;
	&lt;li&gt;Make DC name case insensitive. As much as I think DC names ought to be case insensitive, I&apos;m not sure that&apos;s very doable in practice because that would imply storing DC names lower-cased internally, but DC names are exchanged over gossip and whatnot, so that would probably break all hell loose.&lt;/li&gt;
	&lt;li&gt;Keep CQL3 case insensitivity for property map keys in general but special case internally for NTS. The problems I see with that is that 1) this will be ugly and 2) if we special case too much, we might break potential custom strategies inspired by NTS. I also had the idea of changing strategy options internally from Map&amp;lt;String, String&amp;gt; to some custom object that would be essentially a case insensitive string map (general case), but that would also hold the original case of keys so NTS (and any other likely-minded strategy) can do its stuff. This happens to not be a small patch however (I&apos;m attaching the patch for reference because I wrote it, but I&apos;m seriously wondering if it&apos;s not too overkill).&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12634202">CASSANDRA-5292</key>
            <summary>CQL3 shouldn&apos;t lowercase DC names for NTS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Feb 2013 17:16:32 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:17 +0000</updated>
                            <resolved>Wed, 27 Feb 2013 14:46:50 +0000</resolved>
                                        <fixVersion>1.2.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13587294" author="jbellis" created="Tue, 26 Feb 2013 17:38:53 +0000"  >&lt;p&gt;IMO there are two principles we should be following here:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;schema options should be &quot;just a Map.&quot;  This is the most straightforward and trying to be clever here will surprise people more than it will help.  Nor do I want to maintain &quot;almost-Map&quot; structures in the code.&lt;/li&gt;
	&lt;li&gt;CQL should not &quot;helpfully&quot; lowercase Map keys.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;My understanding is that we observe #2 elsewhere, but schema options are not-quite-a-Map in this respect.  In that case I think we should suck it up and take the backwards incompatibility to fix this.&lt;/p&gt;

&lt;p&gt;If we violate #2 in general, that is a bitter pill to swallow, but it&apos;s still a bug that should be fixed.&lt;/p&gt;</comment>
                            <comment id="13587321" author="slebresne" created="Tue, 26 Feb 2013 18:06:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;My understanding is that we observe #2 elsewhere&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, we do.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In that case I think we should suck it up and take the backwards incompatibility to fix this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, I think I agree really. I&apos;m attaching the trivial patch to do that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Nor do I want to maintain &quot;almost-Map&quot; structures in the code.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For the record, schema options and &quot;normal&quot; map don&apos;t really share any code outside the parser. But I agree on the rest, just saying &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13587413" author="jbellis" created="Tue, 26 Feb 2013 19:10:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;For the record, schema options and &quot;normal&quot; map don&apos;t really share any code outside the parser. But I agree on the rest, just saying&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right.  But we&apos;re going to fix that, right? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;+1 on the trivial patch.&lt;/p&gt;</comment>
                            <comment id="13588397" author="slebresne" created="Wed, 27 Feb 2013 14:46:50 +0000"  >&lt;p&gt;Alright, committed the trivial fix then. Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12571005" name="5292-option3.txt" size="80240" author="slebresne" created="Tue, 26 Feb 2013 17:17:25 +0000"/>
                            <attachment id="12571012" name="5292.txt" size="1262" author="slebresne" created="Tue, 26 Feb 2013 18:06:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314695</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iazj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>