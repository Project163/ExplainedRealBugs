<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:24:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-17466] Shut repair task executor down without interruption to avoid compromising shared channel proxies</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-17466</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;If a &lt;tt&gt;RepairJob&lt;/tt&gt; gets past validation, it builds a list of &lt;tt&gt;SyncTask&lt;/tt&gt; items and fires them off. If any one of those fails, we grab the relevant exception and throw it up from &lt;tt&gt;RepairJob&lt;/tt&gt; to &lt;tt&gt;RepairSession&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR 2022-03-09T23:53:36,721 [Stream-Deserializer-/10.246.3.102:7000-d97958c4] org.apache.cassandra.streaming.StreamSession:1110 - [Stream #07c55da0-a047-11ec-8122-ab911c7a993f] Remote peer /10.246.3.102:7000 failed stream session.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;RepairSession&lt;/tt&gt; then marks itself as being terminated and clears its internal maps of active validations and sync tasks, but immediately before it does that, it calls &lt;tt&gt;shutdownNow()&lt;/tt&gt; on the executor that executes those tasks. In the case of our failing stream session, we may still have other running stream tasks whose threads&apos; interrupt flag has been set, and this can have some unintended negative consequences, because any &lt;tt&gt;ChannelProxy&lt;/tt&gt; interrupted in the middle of a blocking operation will both be closed and throw a &lt;tt&gt;ClosedByInterruptException&lt;/tt&gt;. (Keep in mind that we share &lt;tt&gt;ChannelProxy&lt;/tt&gt; instances outside a few specific cases, like those introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15666&quot; title=&quot;Race condition when completing stream sessions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15666&quot;&gt;&lt;del&gt;CASSANDRA-15666&lt;/del&gt;&lt;/a&gt;.)&lt;/p&gt;

&lt;p&gt;We&apos;ve seen this manifest in production in a couple ways, both of them while trying to read from the &lt;tt&gt;peers_v2&lt;/tt&gt; system table:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread Thread[RepairJobTask:23,5,main]&quot;^M
exception=&quot;FSReadError in .../data/system/peers_v2-c4325fbb8e5e3bafbd070f9250ed818e/system-peers_v2-nb-99-big-Data.db
        at org.apache.cassandra.io.util.ChannelProxy.read(ChannelProxy.java:143)
        at org.apache.cassandra.io.util.CompressedChunkReader$Standard.readChunk(CompressedChunkReader.java:115)
        at org.apache.cassandra.io.util.BufferManagingRebufferer.rebuffer(BufferManagingRebufferer.java:79)
        at org.apache.cassandra.io.util.RandomAccessReader.reBufferAt(RandomAccessReader.java:68)
        at org.apache.cassandra.io.util.RandomAccessReader.seek(RandomAccessReader.java:210)
        at org.apache.cassandra.io.util.FileHandle.createReader(FileHandle.java:151)
        at org.apache.cassandra.io.sstable.format.SSTableReader.getFileDataInput(SSTableReader.java:1628)
        at org.apache.cassandra.db.columniterator.AbstractSSTableIterator.&amp;lt;init&amp;gt;(AbstractSSTableIterator.java:96)
        at org.apache.cassandra.db.columniterator.SSTableIterator.&amp;lt;init&amp;gt;(SSTableIterator.java:48)
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:75)
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:67)
        at org.apache.cassandra.db.StorageHook$1.makeRowIterator(StorageHook.java:87)
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndSSTablesInTimestampOrder(SinglePartitionReadCommand.java:897)
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDiskInternal(SinglePartitionReadCommand.java:605)
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDisk(SinglePartitionReadCommand.java:578)
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryStorage(SinglePartitionReadCommand.java:412)
        at org.apache.cassandra.db.ReadCommand.executeLocally(ReadCommand.java:414)
        at org.apache.cassandra.db.SinglePartitionReadQuery$Group.executeLocally(SinglePartitionReadQuery.java:242)
        at org.apache.cassandra.db.SinglePartitionReadQuery$Group.executeInternal(SinglePartitionReadQuery.java:216)
        at org.apache.cassandra.cql3.statements.SelectStatement.executeInternal(SelectStatement.java:458)
        at org.apache.cassandra.cql3.statements.SelectStatement.executeLocally(SelectStatement.java:442)
        at org.apache.cassandra.cql3.statements.SelectStatement.executeLocally(SelectStatement.java:96)
        at org.apache.cassandra.cql3.QueryProcessor.executeInternal(QueryProcessor.java:334)
        at org.apache.cassandra.db.SystemKeyspace.getPreferredIP(SystemKeyspace.java:973)
        at org.apache.cassandra.net.OutboundConnectionSettings.connectTo(OutboundConnectionSettings.java:455)
        at org.apache.cassandra.net.OutboundConnectionSettings.withDefaults(OutboundConnectionSettings.java:484)
        at org.apache.cassandra.streaming.DefaultConnectionFactory.createConnection(DefaultConnectionFactory.java:49)
        at org.apache.cassandra.streaming.async.NettyStreamingMessageSender.createChannel(NettyStreamingMessageSender.java:199)
        at org.apache.cassandra.streaming.async.NettyStreamingMessageSender.setupControlMessageChannel(NettyStreamingMessageSender.java:180)
        at org.apache.cassandra.streaming.async.NettyStreamingMessageSender.sendMessage(NettyStreamingMessageSender.java:245)
        at org.apache.cassandra.streaming.async.NettyStreamingMessageSender.initialize(NettyStreamingMessageSender.java:149)
        at org.apache.cassandra.streaming.StreamSession.start(StreamSession.java:372)
        at org.apache.cassandra.streaming.StreamCoordinator.startSession(StreamCoordinator.java:262)
        at org.apache.cassandra.streaming.StreamCoordinator.access$700(StreamCoordinator.java:36)
        at org.apache.cassandra.streaming.StreamCoordinator$HostStreamingData.connectAllStreamSessions(StreamCoordinator.java:308)
        at org.apache.cassandra.streaming.StreamCoordinator.connectAllStreamSessions(StreamCoordinator.java:107)
        at org.apache.cassandra.streaming.StreamCoordinator.connect(StreamCoordinator.java:101)
        at org.apache.cassandra.streaming.StreamResultFuture.createInitiator(StreamResultFuture.java:98)
        at org.apache.cassandra.streaming.StreamPlan.execute(StreamPlan.java:179)
        at org.apache.cassandra.repair.LocalSyncTask.startSync(LocalSyncTask.java:113)
        at org.apache.cassandra.repair.SyncTask.run(SyncTask.java:89)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
        at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:125)
        at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:57)
        at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:78)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
        at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.nio.channels.ClosedByInterruptException
        at java.base/java.nio.channels.spi.AbstractInterruptibleChannel.end(AbstractInterruptibleChannel.java:199)
        at java.base/sun.nio.ch.FileChannelImpl.endBlocking(FileChannelImpl.java:162)
        at java.base/sun.nio.ch.FileChannelImpl.readInternal(FileChannelImpl.java:816)
        at java.base/sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:796)
        at org.apache.cassandra.io.util.ChannelProxy.read(ChannelProxy.java:139)
        ... 48 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case, the &lt;tt&gt;SyncTask&lt;/tt&gt; is trying to read the preferred remote IP for the node it wants to communicate with, but when it reads the &lt;tt&gt;peers_v2&lt;/tt&gt; table, it finds that it&apos;s already been closed by an interrupt, and &lt;tt&gt;StorageProxy#read()&lt;/tt&gt; wraps the &lt;tt&gt;ClosedByInterruptException&lt;/tt&gt; in a &lt;tt&gt;FSReadError&lt;/tt&gt;, which triggers the disk failure policy, and kills the node.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;message=&quot;Exception in thread Thread[CompactionExecutor:1690,1,main]&quot;^M
exception=&quot;FSReadError in &#8230;/data/system/peers_v2-c4325fbb8e5e3bafbd070f9250ed818e/system-peers_v2-nb-99-big-Data.db
        at org.apache.cassandra.io.util.ChannelProxy.read(ChannelProxy.java:143)
        at org.apache.cassandra.io.util.CompressedChunkReader$Standard.readChunk(CompressedChunkReader.java:115)
        at org.apache.cassandra.io.util.BufferManagingRebufferer.rebuffer(BufferManagingRebufferer.java:79)
        at org.apache.cassandra.io.util.RandomAccessReader.reBufferAt(RandomAccessReader.java:68)
        at org.apache.cassandra.io.util.RandomAccessReader.seek(RandomAccessReader.java:210)
        at org.apache.cassandra.io.sstable.format.big.BigTableScanner.seekToCurrentRangeStart(BigTableScanner.java:196)
        at org.apache.cassandra.io.sstable.format.big.BigTableScanner.access$400(BigTableScanner.java:52)
        at org.apache.cassandra.io.sstable.format.big.BigTableScanner$KeyScanningIterator.computeNext(BigTableScanner.java:305)
        at org.apache.cassandra.io.sstable.format.big.BigTableScanner$KeyScanningIterator.computeNext(BigTableScanner.java:282)
        at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:46)
        at org.apache.cassandra.io.sstable.format.big.BigTableScanner.hasNext(BigTableScanner.java:261)
        at org.apache.cassandra.utils.MergeIterator$Candidate.advance(MergeIterator.java:376)
        at org.apache.cassandra.utils.MergeIterator$ManyToOne.advance(MergeIterator.java:188)
        at org.apache.cassandra.utils.MergeIterator$ManyToOne.computeNext(MergeIterator.java:157)
        at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:46)
        at org.apache.cassandra.db.partitions.UnfilteredPartitionIterators$2.hasNext(UnfilteredPartitionIterators.java:169)
        at org.apache.cassandra.db.transform.BasePartitions.hasNext(BasePartitions.java:93)
        at org.apache.cassandra.db.compaction.CompactionIterator.hasNext(CompactionIterator.java:254)
        at org.apache.cassandra.db.compaction.CompactionTask.runMayThrow(CompactionTask.java:202)
        at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:28)
        at org.apache.cassandra.db.compaction.CompactionTask.executeInternal(CompactionTask.java:78)
        at org.apache.cassandra.db.compaction.AbstractCompactionTask.execute(AbstractCompactionTask.java:100)
        at org.apache.cassandra.db.compaction.CompactionManager$BackgroundCompactionCandidate.run(CompactionManager.java:363)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
        at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.nio.channels.ClosedChannelException
        at java.base/sun.nio.ch.FileChannelImpl.ensureOpen(FileChannelImpl.java:150)
        at java.base/sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:790)
        at org.apache.cassandra.io.util.ChannelProxy.read(ChannelProxy.java:139)
        ... 28 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case, we&apos;ve been lucky enough to terminate the repair itself without any issues, but when we try to read from the &lt;tt&gt;ChannelProxy&lt;/tt&gt; from another thread, we get a &lt;tt&gt;ClosedChannelException&lt;/tt&gt;, which is also wrapped in a &lt;tt&gt;FSReadError&lt;/tt&gt;, which triggers the disk failure policy and kills the node. A lot of violence here. Note that, in this case, while the channel is closed, we don&apos;t see a &lt;tt&gt;ClosedByInterruptException&lt;/tt&gt;, because the repair job task thread, not the compaction thread, is interrupted.&lt;/p&gt;

&lt;p&gt;(Note: This reproduces easiest w/ &lt;tt&gt;disk_access_mode: mmap_index_only&lt;/tt&gt;.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13434979">CASSANDRA-17466</key>
            <summary>Shut repair task executor down without interruption to avoid compromising shared channel proxies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="maedhroz">Caleb Rackliffe</assignee>
                                    <reporter username="maedhroz">Caleb Rackliffe</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Mar 2022 19:24:01 +0000</created>
                <updated>Fri, 27 May 2022 19:25:11 +0000</updated>
                            <resolved>Mon, 28 Mar 2022 20:53:37 +0000</resolved>
                                        <fixVersion>4.0.4</fixVersion>
                    <fixVersion>4.1-alpha1</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                    <component>Consistency/Repair</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="17511394" author="maedhroz" created="Wed, 23 Mar 2022 17:22:19 +0000"  >&lt;p&gt;I&apos;ve submitted a patch that addresses the problem by 1.) avoiding abrupt &lt;tt&gt;shutdownNow()&lt;/tt&gt; calls on repair failure and 2.) adds an abort mechanism for outstanding local repair sync tasks. There may have been a viable way to fix this particular issue by pulling the &lt;tt&gt;getPreferredIP()&lt;/tt&gt; call out of repair task threads, but using an interrupting shutdown when we don&apos;t have a comprehensive understanding of our interrupt handling downstream seems risky. (Also, there is a fix contained here that actually makes sure the task executor pool shuts down. It was trying to shut itself down before, which wasn&apos;t going so well...)&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/1522&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra?branch=CASSANDRA-17466-4.0&amp;amp;filter=all&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra?branch=CASSANDRA-17466-trunk&amp;amp;filter=all&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CircleCI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/1540/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Apache CI&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/1542/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Apache CI&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17511445" author="maedhroz" created="Wed, 23 Mar 2022 19:14:21 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dcapwell&quot; class=&quot;user-hover&quot; rel=&quot;dcapwell&quot;&gt;dcapwell&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marcuse&quot; class=&quot;user-hover&quot; rel=&quot;marcuse&quot;&gt;marcuse&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17511942" author="jmckenzie" created="Thu, 24 Mar 2022 16:23:58 +0000"  >&lt;p&gt;Going to defer to David and Marcus on review as they&apos;re both already familiar with the patch.&lt;/p&gt;</comment>
                            <comment id="17511945" author="dcapwell" created="Thu, 24 Mar 2022 16:39:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17512176" author="maedhroz" created="Fri, 25 Mar 2022 03:15:42 +0000"  >&lt;p&gt;As far as the test failures go, 4.0 seems to have mostly known issues w/ upgrade tests and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17139&quot; title=&quot;readWriteDuringBootstrapTest - org.apache.cassandra.distributed.test.ring.BootstrapTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17139&quot;&gt;&lt;del&gt;CASSANDRA-17139&lt;/del&gt;&lt;/a&gt;. The Apache Jenkins CI run actually has &lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/1540/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fewer&lt;/a&gt; errors than the &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-4.0/366/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;latest&lt;/a&gt; &lt;tt&gt;cassandra-4.0&lt;/tt&gt; run. The only sort of interesting one is &lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/403/workflows/ab28810f-e1ca-4d56-9962-cb8ecc1f2382/jobs/2926/tests#failed-test-0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;test_dead_sync_initiator&lt;/a&gt;. There is a history of failure (ex. &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15963&quot; title=&quot;Flaky dtest test_dead_sync_initiator - repair_tests.repair_test.TestRepair&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15963&quot;&gt;&lt;del&gt;CASSANDRA-15963&lt;/del&gt;&lt;/a&gt;), and this only fails in Circle.&lt;/p&gt;</comment>
                            <comment id="17513538" author="maedhroz" created="Mon, 28 Mar 2022 17:57:11 +0000"  >&lt;p&gt;The trunk patch looks clean RE test failures. All of them are showing up on Butler as existing problems. I&apos;m running &lt;a href=&quot;https://app.circleci.com/pipelines/github/maedhroz/cassandra/403/workflows/ab28810f-e1ca-4d56-9962-cb8ecc1f2382/jobs/2926/tests#failed-test-0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;test_dead_sync_initiator&lt;/a&gt; locally on the 4.0 branch, but then I&apos;ll probably move forward and commit...&lt;/p&gt;</comment>
                            <comment id="17513646" author="maedhroz" created="Mon, 28 Mar 2022 20:53:37 +0000"  >&lt;p&gt;Committed in &lt;a href=&quot;https://github.com/apache/cassandra/commit/0089858819c9f06b0bee5bccf993ae7f5977d7f1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/0089858819c9f06b0bee5bccf993ae7f5977d7f1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17513991" author="bereng" created="Tue, 29 Mar 2022 10:37:18 +0000"  >&lt;p&gt;I haven&apos;t dug deep. But could sbdy in the know check if this commit could be related to the recent rise in trunk failures on commit log closure please?&lt;/p&gt;</comment>
                            <comment id="17514167" author="maedhroz" created="Tue, 29 Mar 2022 16:01:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bereng&quot; class=&quot;user-hover&quot; rel=&quot;bereng&quot;&gt;bereng&lt;/a&gt; I look a &lt;a href=&quot;https://butler.cassandra.apache.org/#/ci/upstream/compare/Cassandra-trunk/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;quick look&lt;/a&gt; at Butler, and there are definitely some new issues w/ the &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-trunk/1051/testReport/org.apache.cassandra.db.commitlog/GroupCommitLogTest/replaySimple_4__compression/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;group commit log tests&lt;/a&gt;. Are those just &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17469&quot; title=&quot;Test Failure: org.apache.cassandra.db.commitlog.GroupCommitLogTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17469&quot;&gt;&lt;del&gt;CASSANDRA-17469&lt;/del&gt;&lt;/a&gt;, which was created a week ago (before this merged)? Looks similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-17286&quot; title=&quot;Test Failure: org.apache.cassandra.db.lifecycle.LogTransactionTest.testGetTemporaryFilesSafeAfterObsoletion-cdc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-17286&quot;&gt;&lt;del&gt;CASSANDRA-17286&lt;/del&gt;&lt;/a&gt; as well...&lt;/p&gt;</comment>
                            <comment id="17514440" author="bereng" created="Wed, 30 Mar 2022 04:58:31 +0000"  >&lt;p&gt;Thx for checking &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13438730">CASSANDRA-17541</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13446116">CASSANDRA-17648</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13446872">CASSANDRA-17663</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13438730">CASSANDRA-17541</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[maedhroz]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12983" cascade-level=""><![CDATA[Availability]]></customfieldvalue>
                                <customfieldvalue key="12992" cascade-level="1"><![CDATA[Process Crash]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12966"><![CDATA[Challenging]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10oow:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dcapwell]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12336842">4.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/0089858819c9f06b0bee5bccf993ae7f5977d7f1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/0089858819c9f06b0bee5bccf993ae7f5977d7f1&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;new test that reproduces the root cause of the problems described in the issue&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>