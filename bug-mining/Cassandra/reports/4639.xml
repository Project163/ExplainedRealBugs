<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:06:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13090] Coalescing strategy sleeps too much</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13090</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;With the current code maybeSleep is called even if we managed to take maxItems out of the backlog. In this case we should really avoid sleeping because it means that backlog is building up.&lt;/p&gt;

&lt;p&gt;I&apos;ll send a patch shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13031613">CASSANDRA-13090</key>
            <summary>Coalescing strategy sleeps too much</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="iksaif">Corentin Chary</assignee>
                                    <reporter username="iksaif">Corentin Chary</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jan 2017 09:13:58 +0000</created>
                <updated>Tue, 14 Oct 2025 12:13:56 +0000</updated>
                            <resolved>Tue, 28 Feb 2017 23:14:02 +0000</resolved>
                                        <fixVersion>2.2.10</fixVersion>
                    <fixVersion>3.0.12</fixVersion>
                    <fixVersion>3.11.0</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Streaming and Messaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15795333" author="aweisberg" created="Tue, 3 Jan 2017 15:45:35 +0000"  >&lt;p&gt;Nice find.&lt;/p&gt;

&lt;p&gt;I don&apos;t think comparing now and limit is valid because limit is a duration and now is a relative time.&lt;/p&gt;

&lt;p&gt;Can you add a unit test for this condition?&lt;/p&gt;

&lt;p&gt;Does it even make sense to try and coalesce more than some constant number of messages? At some point we should just let the network handle packets. I think waiting for backlog full is the wrong condition to avoid these extra sleeps. Maybe coalesce at most 4 or 8 messages? Definitely make it tunable.&lt;/p&gt;</comment>
                            <comment id="15795381" author="iksaif" created="Tue, 3 Jan 2017 16:09:22 +0000"  >&lt;p&gt;I didn&apos;t intend to change the behavior of parkLoop(), in theory it should do exactly the same as before. &quot;limit&quot; is just something that is almost like &quot;timer&quot; but good enough if we reach it. &quot;timer - (now = System.nanoTime()) &amp;gt; nanos / 16&quot; should be the same as &quot;now &amp;lt; limit&quot;.&lt;/p&gt;

&lt;p&gt;Network will not coalesce anything/much because we set TCP_NODELAY to 1.&lt;/p&gt;
</comment>
                            <comment id="15795422" author="aweisberg" created="Tue, 3 Jan 2017 16:22:10 +0000"  >&lt;p&gt;Right but we don&apos;t need the network to coalesce for us since we are already doing it. But... there isn&apos;t a motivation to coalesce more than some number of messages. All it&apos;s going to do is add latency with minimal reduction in overhead.&lt;/p&gt;

&lt;p&gt;I see I understood limit incorrectly. It might be clearer as now + nano / 16 and some parens for those of us a bit weaker at math.&lt;/p&gt;</comment>
                            <comment id="15795466" author="iksaif" created="Tue, 3 Jan 2017 16:39:55 +0000"  >&lt;p&gt;Would you prefer count &amp;gt; 1 to start and then another patch to make it configurable (if necessary, I&apos;ll run benchmarks).&lt;/p&gt;

&lt;p&gt;limit isn&apos;t now + nanos / 16, it&apos;s now + nanos - nanos / 16, (or ~= now + nanos * 0.9, maybe this last form is better ?)&lt;/p&gt;</comment>
                            <comment id="15795484" author="aweisberg" created="Tue, 3 Jan 2017 16:46:29 +0000"  >&lt;p&gt;Ouch. I am just not getting this right today.&lt;/p&gt;

&lt;p&gt;I would be happy to have it as one patch. I think if we set it to 8 it will still be better than 128 in a heavy backlog , but it&apos;s also still safe in that it&apos;s way more coalescing than we could possibly benefit from.&lt;/p&gt;

&lt;p&gt;I think tweaking the number has diminishing returns because you only hit this when the backlog grows and in that case you are already not looking at coalescing as the problem or the solution.&lt;/p&gt;</comment>
                            <comment id="15800745" author="iksaif" created="Thu, 5 Jan 2017 08:30:49 +0000"  >&lt;p&gt;New version of the patch with discussed settings and unit tests.&lt;/p&gt;</comment>
                            <comment id="15803318" author="zznate" created="Fri, 6 Jan 2017 02:52:15 +0000"  >&lt;p&gt;Since we are dropping some settings into &lt;tt&gt;cassandra.yaml&lt;/tt&gt; for coalescing, it would be great if we can add some additional details in the comments about common variations (when you would do what and why). &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aweisberg&quot; class=&quot;user-hover&quot; rel=&quot;aweisberg&quot;&gt;aweisberg&lt;/a&gt; A couple of tidbits from your initial blog post would be cool. &lt;/p&gt;</comment>
                            <comment id="15803999" author="iksaif" created="Fri, 6 Jan 2017 08:34:15 +0000"  >&lt;p&gt;Sure I&apos;ll do that. I&apos;ll wait for Ariel answer&apos;s and additional comments in order to batch the changes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15805011" author="aweisberg" created="Fri, 6 Jan 2017 17:06:29 +0000"  >&lt;ul&gt;
	&lt;li&gt;I don&apos;t think &lt;tt&gt;otc_coalescing_max_coalesced_messages&lt;/tt&gt; is useful although I&apos;m interested in hearing the argument for it. When is pulling more than 128 items out of the LBQ going to improve performance?&lt;/li&gt;
	&lt;li&gt;I think rather for the growing backlog scenario we should skip coalescing entirely and rely on back pressure from the socket to block the thread. So right now if coalescing says &quot;write stuff&quot; we should skip coalescing until the backlog has been drained into the socket. The strategy will need to know about the messages so it can log the arrival rate.&lt;/li&gt;
	&lt;li&gt;Granted since the batch size is 128 it will still only add the undesired coalescing every 128 messages and only if the backlog is &amp;lt; &lt;tt&gt;otc_coaslescing_enough_coalesced_messages&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;otc_coaslescing_enough_coalesced_messages&lt;/tt&gt; in the yaml has a typo&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;otc_coalescing_window_us&lt;/tt&gt; has a typo in the comment&lt;/li&gt;
	&lt;li&gt;Is there an extra drain to in &lt;tt&gt;coalesceInternal&lt;/tt&gt;? One in the condition and another immediately after before checking for enough?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15812149" author="iksaif" created="Mon, 9 Jan 2017 16:19:17 +0000"  >&lt;p&gt;otc_coalescing_max_coalesced_messages was introduced because it could give more priority to the reader due to the way drainTo() is implemented (lock, iterate, unlock). But since the backlog is currently unbounded and all this code generally burst into flames under sustain load if backlog.size() &amp;gt; 100Mk, I agree that this may not be necessary for now. &lt;b&gt;Removed&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;I think I also fixed the typo I found.&lt;/p&gt;

&lt;p&gt;I harmonized movingaverage and timehorizon strategies to have a coalesceInternal() that look similar.&lt;/p&gt;</comment>
                            <comment id="15812222" author="aweisberg" created="Mon, 9 Jan 2017 16:50:05 +0000"  >&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;otc_coaslescing_enough_coalesced_messages&lt;/tt&gt; is still misspelled in the YAML. This causes the server not to start.&lt;/li&gt;
	&lt;li&gt;The get/setter in DatabaseDescriptor are also misspelled&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll fix it while I run it through CassCI and star.&lt;/p&gt;
</comment>
                            <comment id="15814328" author="iksaif" created="Tue, 10 Jan 2017 08:32:56 +0000"  >&lt;p&gt;Wow, I was sure I got rid of that one, thanks for the hotfix.&lt;/p&gt;</comment>
                            <comment id="15843602" author="aweisberg" created="Fri, 27 Jan 2017 22:41:22 +0000"  >&lt;p&gt;Tests pass but I had to rebase because the merge order changed. Should be ready to commit soon.&lt;/p&gt;</comment>
                            <comment id="15845655" author="aweisberg" created="Mon, 30 Jan 2017 18:39:45 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;code&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;utests&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;dtests&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-2.2...aweisberg:cassandra-13090-2.2?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-2.2-testall/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-2.2-dtest/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-3.0...aweisberg:cassandra-13090-3.0?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-3.0-testall/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-3.0-dtest/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-3.11...aweisberg:cassandra-13090-3.11?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-3.11-testall/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-3.11-dtest/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...aweisberg:cassandra-13090-trunk?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-trunk-testall/6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-trunk-dtest/10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Seem to be a few test failures in 3.11 and on. Maybe I messed up the merge forward? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iksaif&quot; class=&quot;user-hover&quot; rel=&quot;iksaif&quot;&gt;iksaif&lt;/a&gt; can you take a look?&lt;/p&gt;</comment>
                            <comment id="15846700" author="iksaif" created="Tue, 31 Jan 2017 11:31:13 +0000"  >&lt;p&gt;All the unit tests failures seem really unrelated.&lt;br/&gt;
Also looks like there is a significant diff between your trunk and the original trunk.&lt;/p&gt;</comment>
                            <comment id="15847224" author="aweisberg" created="Tue, 31 Jan 2017 18:02:10 +0000"  >&lt;p&gt;Can you be more specific, maybe link to what you are talking about? I looked at trunk and 3.11 and they look like the patch to me. I also check and they are based off recent trunk (last commit Jan 27).&lt;/p&gt;

&lt;p&gt;I am talking about the dtests where 500 tests fails.&lt;/p&gt;

&lt;p&gt;There is this in the logs&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR [MessagingService-Outgoing-/127.0.0.1-Gossip] 2017-01-27 22:19:28,638 OutboundTcpConnection.java:334 - error writing to /127.0.0.1
java.lang.NullPointerException: null
	at org.apache.cassandra.io.util.UnbufferedDataOutputStreamPlus.writeUTF(UnbufferedDataOutputStreamPlus.java:256) ~[main/:na]
	at org.apache.cassandra.io.util.BufferedDataOutputStreamPlus.writeUTF(BufferedDataOutputStreamPlus.java:304) ~[main/:na]
	at org.apache.cassandra.gms.GossipDigestSynSerializer.serialize(GossipDigestSyn.java:86) ~[main/:na]
	at org.apache.cassandra.gms.GossipDigestSynSerializer.serialize(GossipDigestSyn.java:81) ~[main/:na]
	at org.apache.cassandra.net.MessageOut.serialize(MessageOut.java:120) ~[main/:na]
	at org.apache.cassandra.net.OutboundTcpConnection.writeInternal(OutboundTcpConnection.java:351) [main/:na]
	at org.apache.cassandra.net.OutboundTcpConnection.writeConnected(OutboundTcpConnection.java:303) [main/:na]
	at org.apache.cassandra.net.OutboundTcpConnection.run(OutboundTcpConnection.java:237) [main/:na]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15847406" author="iksaif" created="Tue, 31 Jan 2017 19:58:53 +0000"  >&lt;p&gt;What I mean by &quot;significant diff between your trunk and the original trunk.&quot;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ git fetch origin 
$ git fetch aweisberg 
$ git diff origin/trunk aweisberg/cassandra-13090-trunk --stat
...
585 files changed, 11085 insertions(+), 10474 deletions(-)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Am I missing anything that could explain this diff ? &lt;br/&gt;
I&apos;ll also try to run the dtests on my workstation tomorrow based on your branch.&lt;/p&gt;</comment>
                            <comment id="15847438" author="aweisberg" created="Tue, 31 Jan 2017 20:20:09 +0000"  >&lt;p&gt;I&apos;m not sure why diff stat reports that, but if you actually do the merge you don&apos;t get the extra stuff.&lt;/p&gt;

&lt;p&gt;I can reproduce what you are talking about though.&lt;/p&gt;

&lt;p&gt;If you need help getting going with the dtests ping me on IRC. I find them to be non-trivial to get working.&lt;/p&gt;</comment>
                            <comment id="15848142" author="iksaif" created="Wed, 1 Feb 2017 08:54:47 +0000"  >&lt;p&gt;I cloned both repositories, set the branch correctly and made a manual diff and I get the same thing. &lt;br/&gt;
767d973bea8d1baaa8c0ec89316bbda147599bbd seems to be pretty big.&lt;/p&gt;

&lt;p&gt;Maybe try to rebuild the 3.11 and 3.X branches ? I can also create them if necessary.&lt;/p&gt;</comment>
                            <comment id="15854389" author="aweisberg" created="Mon, 6 Feb 2017 17:15:59 +0000"  >&lt;p&gt;Yes can you please try creating them. I did the merge and it doesn&apos;t do anything wonky and the compare view in GitHub shows what I expect. I&apos;m not sure why git diff shows additional stuff that doesn&apos;t end up in the merge.&lt;/p&gt;

&lt;p&gt;Generally the assignee is supposed to produce the branches ready to merge with the tests passing in Cassci. Talk to ptnapoleon in IRC to see if you can get set up to run your branches in cassci.&lt;/p&gt;</comment>
                            <comment id="15858190" author="iksaif" created="Wed, 8 Feb 2017 16:30:04 +0000"  >&lt;p&gt;Created the branches, they look good. I&apos;ll look into cassci tomorrow.&lt;/p&gt;

&lt;p&gt;FYI:&lt;br/&gt;
&lt;a href=&quot;https://github.com/iksaif/cassandra/tree/cassandra-13090-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/iksaif/cassandra/tree/cassandra-13090-3.0&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/iksaif/cassandra/tree/cassandra-13090-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/iksaif/cassandra/tree/cassandra-13090-3.11&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/iksaif/cassandra/tree/cassandra-13090-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/iksaif/cassandra/tree/cassandra-13090-trunk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15859903" author="aweisberg" created="Thu, 9 Feb 2017 17:53:21 +0000"  >&lt;p&gt;The trunk version didn&apos;t build. Your branches don&apos;t do the diff stat weirdness which is good.&lt;br/&gt;
&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-trunk-dtest/8/consoleText&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13090-trunk-dtest/8/consoleText&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;build-test:
[javac] Compiling 502 source files to /home/automaton/cassandra/build/test/classes
[javac] /home/automaton/cassandra/test/unit/org/apache/cassandra/utils/CoalescingStrategiesTest.java:109: error: cannot find symbol
[javac]         DatabaseDescriptor.forceStaticInitialization();
[javac]                           ^
[javac]   symbol:   method forceStaticInitialization()
[javac]   location: class DatabaseDescriptor
[javac] Note: Some input files use or override a deprecated API.
[javac] Note: Recompile with -Xlint:deprecation for details.
[javac] Note: Some input files use unchecked or unsafe operations.
[javac] Note: Recompile with -Xlint:unchecked for details.
[javac] 1 error

BUILD FAILED
/home/automaton/cassandra/build.xml:1047: Compile failed; see the compiler error output for details.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15859980" author="iksaif" created="Thu, 9 Feb 2017 18:47:16 +0000"  >&lt;p&gt;Sorry, did not build the tests for this branch apparently. Fixed. Pushed to the branch linked above.&lt;/p&gt;

&lt;p&gt;FYI:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ git diff
diff --git a/test/unit/org/apache/cassandra/utils/CoalescingStrategiesTest.java b/test/unit/org/apache/cassandra/utils/CoalescingStrategiesTest.java
index 26b6b3a..b10d70b 100644
--- a/test/unit/org/apache/cassandra/utils/CoalescingStrategiesTest.java
+++ b/test/unit/org/apache/cassandra/utils/CoalescingStrategiesTest.java
@@ -106,7 +106,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CoalescingStrategiesTest
     @BeforeClass
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void initDD()
     {
-        DatabaseDescriptor.forceStaticInitialization();
+        DatabaseDescriptor.daemonInitialization();
     }
 
     @SuppressWarnings({ &lt;span class=&quot;code-quote&quot;&gt;&quot;serial&quot;&lt;/span&gt; })
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15860606" author="aweisberg" created="Fri, 10 Feb 2017 03:12:05 +0000"  >&lt;p&gt;Get set up with cassci anyways, but I rolled it again because I realized we should do this back to 2.2. 2.1 is critical fixes only and I don&apos;t think this counts. It&apos;s off by default in 2.1.&lt;/p&gt;</comment>
                            <comment id="15861004" author="iksaif" created="Fri, 10 Feb 2017 09:46:07 +0000"  >&lt;p&gt;Yep, I&apos;m setting up cassci &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks for the help !&lt;/p&gt;</comment>
                            <comment id="15861929" author="aweisberg" created="Fri, 10 Feb 2017 22:26:01 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15864335" author="aweisberg" created="Mon, 13 Feb 2017 20:06:18 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/5725e2c422d21d8efe5ae3bc4389842939553650&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5725e2c422d21d8efe5ae3bc4389842939553650&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15875022" author="JIRAUSER308715" created="Mon, 20 Feb 2017 20:16:01 +0000"  >&lt;p&gt;The changes.txt here says &quot;shouldn&apos;t be enabled by default&quot;, but I don&apos;t see a code change switching the default to DISABLED? And cassandra.yaml comments still say timehorizon is the default. So which should it be?&lt;/p&gt;</comment>
                            <comment id="15875023" author="aweisberg" created="Mon, 20 Feb 2017 20:18:49 +0000"  >&lt;p&gt;It&apos;s a mistake. I&apos;ll need to update changes.txt. Originally I was going to disable it, but after discussion it seems like we didn&apos;t want to change out of the box performance in older releases.&lt;/p&gt;</comment>
                            <comment id="15876874" author="aweisberg" created="Tue, 21 Feb 2017 22:27:04 +0000"  >&lt;p&gt;Fixed CHANGES.txt in &lt;a href=&quot;https://github.com/apache/cassandra/commit/c6462d793b5736b7728c6f188b224dd9d3760bc6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;c6462d793b5736b7728c6f188b224dd9d3760bc6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15886058" author="mshuler" created="Mon, 27 Feb 2017 16:20:44 +0000"  >&lt;p&gt;The CHANGE.txt entry for this ticket is under the incorrect releases in the cassandra-2.2, cassandra-3.0, cassandra-3.11, and trunk branches. This was committed during release votes were -tentative tagged.  The JIRA fix versions for 2.2.x and 3.0.x should be corrected, as well, since this commit should be listed in CHANGES.txt under:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;2.2.10 (currently under 2.2.9)&lt;/li&gt;
	&lt;li&gt;3.0.12 (currently under 3.0.11)&lt;/li&gt;
	&lt;li&gt;3.11.0 (currently under 3.10 in both cassandra-3.11 and trunk branches CHANGES.txt)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15889083" author="aweisberg" created="Tue, 28 Feb 2017 23:13:53 +0000"  >&lt;p&gt;CHANGES.txt fixed in &lt;a href=&quot;https://github.com/apache/cassandra/tree/3748bf7c2a135baab33ccd3b79db5f3fb9132995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3748bf7c2a135baab33ccd3b79db5f3fb9132995&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12846370" name="0001-Fix-wait-time-coalescing-CASSANDRA-13090-2.patch" size="13548" author="iksaif" created="Mon, 9 Jan 2017 16:19:38 +0000"/>
                            <attachment id="12845745" name="0001-Fix-wait-time-coalescing-CASSANDRA-13090.patch" size="11368" author="iksaif" created="Thu, 5 Jan 2017 08:30:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[iksaif]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3870n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aweisberg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aweisberg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>