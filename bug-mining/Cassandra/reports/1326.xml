<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:27:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-3422] Can create a Column Family with comparator CounterColumnType which is subsequently unusable</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-3422</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;It&apos;s probably the case that this shouldn&apos;t be allowed at all but one is currently allowed to create a Column Family with comparator CounterColumnType which then appears unusable.&lt;/p&gt;

&lt;p&gt;CREATE COLUMNFAMILY comparator_cf_counter (id text PRIMARY KEY) WITH comparator=CounterColumnType&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Fails&lt;br/&gt;
UPDATE comparator_cf_counter SET 1=1 + 1 WHERE id=&apos;test_key&apos;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Error =&amp;gt; invalid operation for non commutative columnfamily comparator_cf_counter&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529368">CASSANDRA-3422</key>
            <summary>Can create a Column Family with comparator CounterColumnType which is subsequently unusable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slebresne">Sylvain Lebresne</assignee>
                                    <reporter username="kreynolds">Kelley Reynolds</reporter>
                        <labels>
                    </labels>
                <created>Sat, 29 Oct 2011 16:46:49 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:47 +0000</updated>
                            <resolved>Wed, 7 Dec 2011 16:10:17 +0000</resolved>
                                        <fixVersion>0.8.9</fixVersion>
                    <fixVersion>1.0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13139623" author="kreynolds" created="Sun, 30 Oct 2011 13:21:28 +0000"  >&lt;p&gt;One can also create a table with CounterColumnType as the row_key type, probably should disallow that.&lt;/p&gt;</comment>
                            <comment id="13141176" author="slebresne" created="Tue, 1 Nov 2011 13:30:23 +0000"  >&lt;p&gt;Patch is against 1.0. I&apos;ll rebase against 0.8 for the commit.&lt;/p&gt;</comment>
                            <comment id="13141196" author="jbellis" created="Tue, 1 Nov 2011 14:19:03 +0000"  >&lt;p&gt;Shouldn&apos;t this go in ThriftValidation.validateCfDef (which is already called by QP as well as the thrift side)?&lt;/p&gt;</comment>
                            <comment id="13141199" author="slebresne" created="Tue, 1 Nov 2011 14:25:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;which is already called by QP&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t see that. I see it called for CREATE_INDEX but not for CREATE_COLUMNFAMILY, for which it seems we never create a thrift CfDef (which is reasonable). I mean, all this is imho a complete mess, between CFM, thrift CfDef, avro CfDef, etc... seems there is nothing consistent in there.&lt;br/&gt;
I&apos;m happy to do this differently but I failed to see the correct place for that.&lt;/p&gt;</comment>
                            <comment id="13156762" author="slebresne" created="Thu, 24 Nov 2011 15:33:51 +0000"  >&lt;p&gt;Any opinion related to my previous comment?&lt;/p&gt;</comment>
                            <comment id="13161896" author="jbellis" created="Fri, 2 Dec 2011 22:58:36 +0000"  >&lt;p&gt;You&apos;re right, it&apos;s all over the place.  CFMD is fine.  But it also needs to check that we don&apos;t use CCT as an individual column type.  (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2614&quot; title=&quot;create Column and CounterColumn in the same column family&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2614&quot;&gt;&lt;del&gt;CASSANDRA-2614&lt;/del&gt;&lt;/a&gt;.)&lt;/p&gt;</comment>
                            <comment id="13163659" author="slebresne" created="Tue, 6 Dec 2011 15:50:11 +0000"  >&lt;p&gt;Attached v2 checks we don&apos;t mix counter and non-counters&lt;/p&gt;</comment>
                            <comment id="13163672" author="jbellis" created="Tue, 6 Dec 2011 16:12:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13164572" author="hudson" created="Wed, 7 Dec 2011 17:51:13 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #411 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra-0.8/411/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra-0.8/411/&lt;/a&gt;)&lt;br/&gt;
    Detect misuses of CounterColumnType&lt;br/&gt;
patch by slebresne; reviewed by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-3422&quot; title=&quot;Can create a Column Family with comparator CounterColumnType which is subsequently unusable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-3422&quot;&gt;&lt;del&gt;CASSANDRA-3422&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;slebresne : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1211486&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1211486&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/config/CFMetaData.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/src/java/org/apache/cassandra/cql/CreateColumnFamilyStatement.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506266" name="3422-v2.patch" size="3590" author="slebresne" created="Tue, 6 Dec 2011 15:50:10 +0000"/>
                            <attachment id="12501768" name="3422.patch" size="2796" author="slebresne" created="Tue, 1 Nov 2011 13:29:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[slebresne]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215228</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gjpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94622</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>