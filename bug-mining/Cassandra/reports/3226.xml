<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:49:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-8258] SELECT ... TOKEN() function broken in C* 2.1.1</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-8258</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Cassandra 2.1.1, Oracle Java 1.7.0_72, Ubuntu 14.04.1 64 bit&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh:blink&amp;gt; show version;
[cqlsh 5.0.1 | Cassandra 2.1.1 | CQL spec 3.2.0 | Native protocol v3]
cqlsh:blink&amp;gt; select token(id) from users limit 1;
list index out of range
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;versus&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Cassandra 2.1.0, Oracle Java 1.7.0_67, Ubuntu 12.04.5 64 bit&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh:blink&amp;gt; show version;
[cqlsh 5.0.1 | Cassandra 2.1.0 | CQL spec 3.2.0 | Native protocol v3]
cqlsh:blink&amp;gt; select token(id) from users limit 1;

 token(id)
----------------------
 -9223237793432919630

(1 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It also fails with C* 2.1.1, Java 1.7.0_72, Ubuntu 12.04.5.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 14.04 64-bit, Oracle Java 1.7.0_72&lt;/p&gt;</environment>
        <key id="12753125">CASSANDRA-8258</key>
            <summary>SELECT ... TOKEN() function broken in C* 2.1.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="philipthompson">Philip Thompson</assignee>
                                    <reporter username="lexlythius">Lex Lythius</reporter>
                        <labels>
                            <label>cqlsh</label>
                            <label>qa-resolved</label>
                    </labels>
                <created>Wed, 5 Nov 2014 18:43:31 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:29 +0000</updated>
                            <resolved>Wed, 5 Nov 2014 23:42:24 +0000</resolved>
                                        <fixVersion>2.1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14198844" author="lexlythius" created="Wed, 5 Nov 2014 18:49:34 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;cqlsh -k blink --debug&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Using CQL driver: &amp;lt;module &lt;span class=&quot;code-quote&quot;&gt;&apos;cassandra&apos;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&apos;/usr/share/cassandra/lib/cassandra-driver-internal-only-2.1.1.post.zip/cassandra-driver-2.1.1.post/cassandra/__init__.py&apos;&lt;/span&gt;&amp;gt;
Connected to Test Cluster at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 2.1.1 | CQL spec 3.2.0 | Native protocol v3]
Use HELP &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; help.
cqlsh:blink&amp;gt; select token(id) from users limit 1;
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/bin/cqlsh&quot;&lt;/span&gt;, line 861, in onecmd
    self.handle_statement(st, statementtext)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/bin/cqlsh&quot;&lt;/span&gt;, line 901, in handle_statement
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.handle_parse_error(cmdword, tokens, parsed, srcstr)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/bin/cqlsh&quot;&lt;/span&gt;, line 910, in handle_parse_error
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self.perform_statement(cqlruleset.cql_extract_orig(tokens, srcstr))
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/bin/cqlsh&quot;&lt;/span&gt;, line 935, in perform_statement
    result = self.perform_simple_statement(stmt)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/bin/cqlsh&quot;&lt;/span&gt;, line 968, in perform_simple_statement
    self.print_result(rows, self.parse_for_table_meta(statement.query_string))
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/bin/cqlsh&quot;&lt;/span&gt;, line 946, in parse_for_table_meta
    parsed = cqlruleset.cql_parse(query_string)[1]
IndexError: list index out of range
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14199113" author="philipthompson" created="Wed, 5 Nov 2014 21:23:59 +0000"  >&lt;p&gt;I didn&apos;t use the existing &amp;lt;tokenDefinition&amp;gt; because it uses &amp;lt;term&amp;gt; instead of &amp;lt;identifier&amp;gt; which does not match in this case, and I did not want to modify &amp;lt;term&amp;gt;.&lt;/p&gt;</comment>
                            <comment id="14199135" author="philipthompson" created="Wed, 5 Nov 2014 21:33:18 +0000"  >&lt;p&gt;I will add a cqlshlib test. Holdoff on approving the patch.&lt;/p&gt;</comment>
                            <comment id="14199143" author="mishail" created="Wed, 5 Nov 2014 21:37:53 +0000"  >&lt;p&gt;I think we should fix &lt;tt&gt;parse_for_table_meta&lt;/tt&gt; to handle the case when &lt;tt&gt;cqlruleset.cql_parse&lt;/tt&gt; returns unexpected result&lt;/p&gt;</comment>
                            <comment id="14199155" author="philipthompson" created="Wed, 5 Nov 2014 21:42:31 +0000"  >&lt;p&gt;I would prefer to use this ticket to resolve the lack of grammar for &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select token(KEY) from table&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and open a separate ticket for the fact that &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;parse_for_table_meta&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; is troublesome. Though I could just add both to this patch?&lt;/p&gt;</comment>
                            <comment id="14199158" author="philipthompson" created="Wed, 5 Nov 2014 21:43:12 +0000"  >&lt;p&gt;Should the test for this go into test_cql_parsing.py? All of the tests in there are stubs.&lt;/p&gt;</comment>
                            <comment id="14199184" author="mishail" created="Wed, 5 Nov 2014 21:54:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=philipthompson&quot; class=&quot;user-hover&quot; rel=&quot;philipthompson&quot;&gt;philipthompson&lt;/a&gt; I have no preferences &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14199197" author="philipthompson" created="Wed, 5 Nov 2014 22:01:43 +0000"  >&lt;p&gt;Okay, I have added a cqlshlib test as part of the v2 patch.&lt;/p&gt;</comment>
                            <comment id="14199206" author="philipthompson" created="Wed, 5 Nov 2014 22:07:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mishail&quot; class=&quot;user-hover&quot; rel=&quot;mishail&quot;&gt;mishail&lt;/a&gt; In that case, I have filed &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8262&quot; title=&quot;parse_for_table_meta errors out on queries with undefined grammars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8262&quot;&gt;&lt;del&gt;CASSANDRA-8262&lt;/del&gt;&lt;/a&gt; for that issue. I also filed &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8263&quot; title=&quot;Cqlshlib tests are mostly stubs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8263&quot;&gt;CASSANDRA-8263&lt;/a&gt; for the missing cqlshlib tests.&lt;/p&gt;</comment>
                            <comment id="14199318" author="mishail" created="Wed, 5 Nov 2014 23:09:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=philipthompson&quot; class=&quot;user-hover&quot; rel=&quot;philipthompson&quot;&gt;philipthompson&lt;/a&gt; Can we fix it just with &lt;tt&gt;&amp;lt;functionName&amp;gt; ::= &amp;lt;identifier&amp;gt; | &quot;TOKEN&quot;&lt;/tt&gt; ? It would correspond Cassandra&apos;s CQL.g grammar file then &lt;/p&gt;</comment>
                            <comment id="14199333" author="philipthompson" created="Wed, 5 Nov 2014 23:19:10 +0000"  >&lt;p&gt;Yes, that is working. I added that in a v3, with the test from v2. I did not realize that &lt;tt&gt;&amp;lt;selectionFunctionArguments&amp;gt;&lt;/tt&gt; handled the multiple token argument syntax in the same way that &lt;tt&gt;&amp;lt;tokenDefinition&amp;gt;&lt;/tt&gt; did.&lt;/p&gt;</comment>
                            <comment id="14199382" author="mishail" created="Wed, 5 Nov 2014 23:42:24 +0000"  >&lt;p&gt;Committed v3, thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12703084">CASSANDRA-6910</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12679629" name="cassandra-2.1-8258-1.txt" size="950" author="philipthompson" created="Wed, 5 Nov 2014 21:21:08 +0000"/>
                            <attachment id="12679645" name="cassandra-2.1-8258-2.txt" size="1750" author="philipthompson" created="Wed, 5 Nov 2014 22:01:09 +0000"/>
                            <attachment id="12679678" name="cassandra-2.1-8258-3.txt" size="1586" author="philipthompson" created="Wed, 5 Nov 2014 23:17:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[philipthompson]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i220fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326774">2.1.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mishail</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mishail]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12326774">2.1.1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>philipthompson</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>