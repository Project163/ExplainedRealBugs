<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:42:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-5202] CFs should have globally and temporally unique CF IDs to prevent &quot;reusing&quot; data from earlier incarnation of same CF name</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-5202</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Attached is a driver that sequentially:&lt;/p&gt;

&lt;p&gt;1. Drops keyspace&lt;br/&gt;
2. Creates keyspace&lt;br/&gt;
4. Creates 2 column families&lt;br/&gt;
5. Seeds 1M rows with 100 columns&lt;br/&gt;
6. Queries these 2 column families&lt;/p&gt;

&lt;p&gt;The above steps are repeated 1000 times.&lt;/p&gt;

&lt;p&gt;The following exception is observed at random (race - SEDA?):&lt;/p&gt;

&lt;p&gt;ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;ReadStage:55&amp;#93;&lt;/span&gt; 2013-01-29 19:24:52,676 AbstractCassandraDaemon.java (line 135) Exception in thread Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;ReadStage:55,5,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.lang.AssertionError: DecoratedKey(-1, ) != DecoratedKey(62819832764241410631599989027761269388, 313a31) in C:\var\lib\cassandra\data\user_role_reverse_index\business_entity_role\user_role_reverse_index-business_entity_role-hf-1-Data.db&lt;br/&gt;
	at org.apache.cassandra.db.columniterator.SSTableSliceIterator.&amp;lt;init&amp;gt;(SSTableSliceIterator.java:60)&lt;br/&gt;
	at org.apache.cassandra.db.filter.SliceQueryFilter.getSSTableColumnIterator(SliceQueryFilter.java:67)&lt;br/&gt;
	at org.apache.cassandra.db.filter.QueryFilter.getSSTableColumnIterator(QueryFilter.java:79)&lt;br/&gt;
	at org.apache.cassandra.db.CollationController.collectAllData(CollationController.java:256)&lt;br/&gt;
	at org.apache.cassandra.db.CollationController.getTopLevelColumns(CollationController.java:64)&lt;br/&gt;
	at org.apache.cassandra.db.ColumnFamilyStore.getTopLevelColumns(ColumnFamilyStore.java:1367)&lt;br/&gt;
	at org.apache.cassandra.db.ColumnFamilyStore.getColumnFamily(ColumnFamilyStore.java:1229)&lt;br/&gt;
	at org.apache.cassandra.db.ColumnFamilyStore.getColumnFamily(ColumnFamilyStore.java:1164)&lt;br/&gt;
	at org.apache.cassandra.db.Table.getRow(Table.java:378)&lt;br/&gt;
	at org.apache.cassandra.db.SliceFromReadCommand.getRow(SliceFromReadCommand.java:69)&lt;br/&gt;
	at org.apache.cassandra.service.StorageProxy$LocalReadRunnable.runMayThrow(StorageProxy.java:822)&lt;br/&gt;
	at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:1271)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;


&lt;p&gt;This exception appears in the server at the time of client submitting a query request (row slice) and not at the time data is seeded. The client times out and this data can no longer be queried as the same exception would always occur from there on.&lt;/p&gt;

&lt;p&gt;Also on iteration 201, it appears that dropping column families failed and as a result their recreation failed with unique column family name violation (see exception below). Note that the data files are actually gone, so it appears that the server runtime responsible for creating column family was out of sync with the piece that dropped them:&lt;/p&gt;

&lt;p&gt;Starting dropping column families&lt;br/&gt;
Dropped column families&lt;br/&gt;
Starting dropping keyspace&lt;br/&gt;
Dropped keyspace&lt;br/&gt;
Starting creating column families&lt;br/&gt;
Created column families&lt;br/&gt;
Starting seeding data&lt;br/&gt;
Total rows inserted: 1000000 in 5105 ms&lt;br/&gt;
Iteration: 200; Total running time for 1000 queries is 232; Average running time of 1000 queries is 0 ms&lt;br/&gt;
Starting dropping column families&lt;br/&gt;
Dropped column families&lt;br/&gt;
Starting dropping keyspace&lt;br/&gt;
Dropped keyspace&lt;br/&gt;
Starting creating column families&lt;br/&gt;
Created column families&lt;br/&gt;
Starting seeding data&lt;br/&gt;
Total rows inserted: 1000000 in 5361 ms&lt;br/&gt;
Iteration: 201; Total running time for 1000 queries is 222; Average running time of 1000 queries is 0 ms&lt;br/&gt;
Starting dropping column families&lt;br/&gt;
Starting creating column families&lt;br/&gt;
Exception in thread &quot;main&quot; com.netflix.astyanax.connectionpool.exceptions.BadRequestException: BadRequestException: &lt;span class=&quot;error&quot;&gt;&amp;#91;host=127.0.0.1(127.0.0.1):9160, latency=2468(2469), attempts=1&amp;#93;&lt;/span&gt;InvalidRequestException(why:Keyspace names must be case-insensitively unique (&quot;user_role_reverse_index&quot; conflicts with &quot;user_role_reverse_index&quot;))&lt;br/&gt;
	at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:159)&lt;br/&gt;
	at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)&lt;br/&gt;
	at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:27)&lt;br/&gt;
	at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$1.execute(ThriftSyncConnectionFactoryImpl.java:140)&lt;br/&gt;
	at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:69)&lt;br/&gt;
	at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:255)&lt;br/&gt;
	at com.netflix.astyanax.thrift.ThriftKeyspaceImpl.createKeyspace(ThriftKeyspaceImpl.java:569)&lt;br/&gt;
	at com.nuance.mca.astyanax.App.recreateKeyspaceSchema(App.java:139)&lt;br/&gt;
	at com.nuance.mca.astyanax.App.main(App.java:88)&lt;br/&gt;
Caused by: InvalidRequestException(why:Keyspace names must be case-insensitively unique (&quot;user_role_reverse_index&quot; conflicts with &quot;user_role_reverse_index&quot;))&lt;br/&gt;
	at org.apache.cassandra.thrift.Cassandra$system_add_keyspace_result.read(Cassandra.java:30010)&lt;br/&gt;
	at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)&lt;br/&gt;
	at org.apache.cassandra.thrift.Cassandra$Client.recv_system_add_keyspace(Cassandra.java:1285)&lt;br/&gt;
	at org.apache.cassandra.thrift.Cassandra$Client.system_add_keyspace(Cassandra.java:1272)&lt;br/&gt;
	at com.netflix.astyanax.thrift.ThriftKeyspaceImpl$14.internalExecute(ThriftKeyspaceImpl.java:584)&lt;br/&gt;
	at com.netflix.astyanax.thrift.ThriftKeyspaceImpl$14.internalExecute(ThriftKeyspaceImpl.java:572)&lt;br/&gt;
	at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:55)&lt;br/&gt;
	... 7 more&lt;/p&gt;


</description>
                <environment>&lt;p&gt;OS: Windows 7, &lt;br/&gt;
Server: Cassandra 1.1.9 release drop&lt;br/&gt;
Client: astyanax 1.56.21, &lt;br/&gt;
JVM: Sun/Oracle JVM 64 bit (jdk1.6.0_27)&lt;/p&gt;</environment>
        <key id="12629944">CASSANDRA-5202</key>
            <summary>CFs should have globally and temporally unique CF IDs to prevent &quot;reusing&quot; data from earlier incarnation of same CF name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yukim">Yuki Morishita</assignee>
                                    <reporter username="marat">Marat Gubaidullin</reporter>
                        <labels>
                            <label>qa-resolved</label>
                            <label>test</label>
                    </labels>
                <created>Wed, 30 Jan 2013 17:17:59 +0000</created>
                <updated>Tue, 14 Oct 2025 12:13:58 +0000</updated>
                            <resolved>Wed, 15 Jan 2014 03:13:43 +0000</resolved>
                                        <fixVersion>2.1 beta1</fixVersion>
                                        <due></due>
                            <votes>9</votes>
                                    <watches>28</watches>
                                                                                                                <comments>
                            <comment id="13566649" author="marat" created="Wed, 30 Jan 2013 17:19:28 +0000"  >&lt;p&gt;Unpack, run: mvn install, mvn eclipse:eclipse&lt;/p&gt;</comment>
                            <comment id="13566672" author="marat" created="Wed, 30 Jan 2013 17:35:07 +0000"  >&lt;p&gt;The sever is a single node Cassandra 1.1.9 release drop and there is one and only client running at the same time.&lt;/p&gt;</comment>
                            <comment id="13566683" author="marat" created="Wed, 30 Jan 2013 17:47:34 +0000"  >&lt;p&gt;Also, I can no longer create this column family - even though when I try to drop it - it errors with an exception that this column family does not exists, but then when I try to create it I get an exception that &quot;why:Keyspace names must be case-insensitively unique (&quot;user_role_reverse_index&quot; conflicts with &quot;user_role_reverse_index&quot;&quot;&lt;/p&gt;</comment>
                            <comment id="13566754" author="yukim" created="Wed, 30 Jan 2013 18:44:25 +0000"  >&lt;p&gt;Thanks Marat, your testcase greatly helped me find the cause.&lt;br/&gt;
I tested your driver against current 1.1 branch.&lt;/p&gt;

&lt;p&gt;The key cache is kept in memory beyond drop/create keyspace.&lt;br/&gt;
So you create first ks/cf and do insert/read, which causes key cache to fill up.&lt;br/&gt;
Then, you drop ks/cf and do the same insert/read again. This time in read, it finds the reading position from key cache from previous read, but that position is for dropped ks/cf not the current one.&lt;/p&gt;

&lt;p&gt;We definitely need to clear caches when we drop columnfamilies.&lt;/p&gt;

&lt;p&gt;I think this is also the cause of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4687&quot; title=&quot;Exception: DecoratedKey(xxx, yyy) != DecoratedKey(zzz, kkk)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4687&quot;&gt;&lt;del&gt;CASSANDRA-4687&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13566765" author="jbellis" created="Wed, 30 Jan 2013 18:53:24 +0000"  >&lt;p&gt;The cache key is a &lt;tt&gt;Pair&amp;lt;Descriptor, DecoratedKey&amp;gt;&lt;/tt&gt; &amp;#8211; I would expect that to be robust across drop/recreate unless there&apos;s a bug in Descriptor HashCode/Equals.&lt;/p&gt;</comment>
                            <comment id="13566835" author="marat" created="Wed, 30 Jan 2013 19:46:43 +0000"  >&lt;p&gt;Thanks Yuki. When do you expect the fix to be available for testing and released? &lt;br/&gt;
Also, what about failure to recreate column family because system thinks that it still exists even though the data files are gone?&lt;/p&gt;</comment>
                            <comment id="13566849" author="yukim" created="Wed, 30 Jan 2013 19:56:56 +0000"  >&lt;p&gt;When cf is created again, it starts with file generation of 1 because SSTables are once removed when cf is dropped. That makes Descriptor collision of newly created SSTables and Descriptors in key cache.&lt;/p&gt;

&lt;p&gt;Patch attached to clear key cache when cf is dropped.&lt;/p&gt;</comment>
                            <comment id="13566862" author="jbellis" created="Wed, 30 Jan 2013 20:12:48 +0000"  >&lt;p&gt;Is this race-proof vs cache additions from concurrent reads?&lt;/p&gt;</comment>
                            <comment id="13566868" author="jbellis" created="Wed, 30 Jan 2013 20:20:12 +0000"  >&lt;p&gt;One way to race-proof it would be to&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;make Descriptor use CFMetadata.cfId uuid instead of ksname/cfname (bonus: would make lookups faster).  May have to make a separate class instead of actual Descriptor since that&apos;s really more about FS-level data.&lt;/li&gt;
	&lt;li&gt;make CFM.getId generate random uuids instead of deterministic ones&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13567043" author="marat" created="Wed, 30 Jan 2013 23:09:54 +0000"  >&lt;p&gt;Clarification. I think what happened at iteration 201 was that dropping of keyspace failed, so the subsequent attempts of running the driver would fail as dropping column families and dropping the keyspace were part of the same try-catch block, and attempt to drop non existing column family would throw and so the code would attempt to create an already existing keyspace, which was not being dropped because an exception thrown by column family drop never gave column family drop a chance to execute.&lt;/p&gt;

&lt;p&gt;So the issue was not in dropping the column family but rather the keyspace.&lt;/p&gt;</comment>
                            <comment id="13599121" author="yukim" created="Mon, 11 Mar 2013 18:41:46 +0000"  >&lt;p&gt;First try for random CF Id for trunk: &lt;a href=&quot;https://github.com/yukim/cassandra/commits/5202-3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/yukim/cassandra/commits/5202-3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I added &apos;cf_id&apos; column to schema_columnfamilies to track current CF Id so I made this patch to trunk. I think this should work on 1.2 branch though.&lt;br/&gt;
I still need to work on loading saved key cache, because when opening files like saved key caches, those would have the CF ID at the time of opening because right now only keyspace and column family names are available. Same thing can be said to SSTables.&lt;br/&gt;
I think it is better to store CF ID along with the files so that we can determine which version those files are written. But I&apos;dont want to embed UUID cfId to file name.&lt;/p&gt;

&lt;p&gt;I&apos;m considering to modify file format, so that saved key cache has CF ID in its header. But for SSTables, I don&apos;t have better way to embed CF ID.&lt;/p&gt;</comment>
                            <comment id="13601202" author="copumpkin" created="Wed, 13 Mar 2013 14:46:25 +0000"  >&lt;p&gt;I was getting the same issue and found this bug. As a workaround, I tried changing my testsuite to avoid dropping the keyspace each time, and simply truncate every CF in the keyspace instead, but that seems to lead to the same symptoms. Just thought I&apos;d point that out in case the truncate code path was being overlooked.&lt;/p&gt;</comment>
                            <comment id="13601213" author="jbellis" created="Wed, 13 Mar 2013 15:04:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t want to embed UUID cfId to file name&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s ugly, but that&apos;s the logical solution, isn&apos;t it?  We&apos;re saying that sstables for table foo on Tuesday, and table foo on Wednesday after drop and re-create, are really different things, so distinguishing them as such on the FS is if nothing else a good extra layer of protection against mixing the two.&lt;/p&gt;

&lt;p&gt;And your patch already stores cfid in the system table, so users could still find out which sstables belong to which table definitions, although granted it&apos;s not as convenient.&lt;/p&gt;</comment>
                            <comment id="13601216" author="jbellis" created="Wed, 13 Mar 2013 15:07:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;truncate ... seems to lead to the same symptoms&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we can fix that by recording the sstable generation somewhere, instead of just assuming that &quot;if no files of generation &amp;gt;= X exist, we should start creating new sstables with X.&quot;&lt;/p&gt;

&lt;p&gt;(Which I think would actually be a simpler fix for the issue in general...  but giving different &quot;versions&quot; of a table distinct IDs is the Right Solution, so I&apos;m still +1 on that unless Yuki thinks the cost is too high for the practical benefits.)&lt;/p&gt;</comment>
                            <comment id="13605947" author="JIRAUSER308715" created="Tue, 19 Mar 2013 02:12:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t want to embed UUID cfId to file name&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I like this idea a lot.  I have seen some users with issues of files not be deleted after truncate/drop cf, but the cf is dropped from the schema.  On re-create those old files are going to get re-imported.  Now, this does make it a pain for when you want to restore a cf to another cluster, or to the same cluster after a drop, as you have to rename all the files, or bulk load them and make bulk loader ignore the UUID or something...&lt;/p&gt;</comment>
                            <comment id="13606334" author="jbellis" created="Tue, 19 Mar 2013 13:27:03 +0000"  >&lt;p&gt;&lt;del&gt;For truncate, we added some code in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4940&quot; title=&quot;Truncate doesn&amp;#39;t clear row cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4940&quot;&gt;&lt;del&gt;CASSANDRA-4940&lt;/del&gt;&lt;/a&gt; that attempts to fix it but it is race-prone (a new entry can be added to the cache, even after it&apos;s cleared).  So we should remove that code as part of our fix.&lt;/del&gt; (Edit: this was row cache, not key cache.)&lt;/p&gt;</comment>
                            <comment id="13606590" author="copumpkin" created="Tue, 19 Mar 2013 17:52:00 +0000"  >&lt;p&gt;As an additional data point around our truncate issues, it seems like although ALTER cf WITH caching = &apos;none&apos; helps significantly with the drop/create-related issues, it doesn&apos;t seem to help with the truncate issues. On the other hand, disabling key cache altogether in cassandra.yaml seems to help permanently, and using nodetool invalidatekeycache helps temporarily until we access keys after a truncate again. It seems to suggest that caching = &apos;none&apos; doesn&apos;t disable key cache use altogether (perhaps if one already existed before the ALTER, it stays in use?)&lt;/p&gt;

&lt;p&gt;Does that jibe with everyone&apos;s current understanding of the causes of the issue?&lt;/p&gt;</comment>
                            <comment id="13608092" author="yukim" created="Wed, 20 Mar 2013 19:57:58 +0000"  >&lt;p&gt;I took the route to add CFID to file name for both SSTable and serialized cache. &lt;a href=&quot;https://github.com/yukim/cassandra/commits/5202-4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/yukim/cassandra/commits/5202-4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;File&apos;s CF ID is checked on CF initialization. I did&apos;t change the behavior of sstableloader so it can still stream to the CF of different version.&lt;br/&gt;
As Jeremiah stated above, downside is that you cannot just place the file from backup and restore CF without changing the filename.&lt;/p&gt;

&lt;p&gt;For truncate issue, I want to see more detail about your operation and setup. SSTable generation number is not reset when you truncate, so usually there is no collision between the generation in keycache and in sstable after truncate.&lt;/p&gt;</comment>
                            <comment id="13614143" author="jbellis" created="Tue, 26 Mar 2013 15:41:42 +0000"  >&lt;p&gt;Since we&apos;re talking 2.0 anyway for CFID-in-the-filename...&lt;/p&gt;

&lt;p&gt;What if we switched to using CAS for CFID creation?  Then everyone would agree on the same CFID, and we could use that in our MessagingService instead of table + cf strings.  (We could also use an int instead of a UUID.)&lt;/p&gt;

&lt;p&gt;Would that make any difference here?  Or should we just proceed with this change now and worry about &quot;global CFIDs&quot; later?&lt;/p&gt;</comment>
                            <comment id="13614307" author="yukim" created="Tue, 26 Mar 2013 17:04:54 +0000"  >&lt;p&gt;If we want to switch (back again) to int for CFID, then CAS would be good.&lt;br/&gt;
But we already use UUID for that, I don&apos;t feel we need to switch.&lt;/p&gt;</comment>
                            <comment id="13615484" author="copumpkin" created="Wed, 27 Mar 2013 16:54:26 +0000"  >&lt;p&gt;Yuki: I&apos;ll try to reduce the truncate issue we&apos;re seeing when I get some time. It definitely appears connected to this, and might suggest that there&apos;s a broader issue here. &lt;/p&gt;

&lt;p&gt;For what it&apos;s worth, we&apos;re now randomly also getting the following error message, as described in the closely related &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4687&quot; title=&quot;Exception: DecoratedKey(xxx, yyy) != DecoratedKey(zzz, kkk)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4687&quot;&gt;&lt;del&gt;CASSANDRA-4687&lt;/del&gt;&lt;/a&gt; bug:&lt;/p&gt;

&lt;p&gt;Caused by: java.io.EOFException: unable to seek to position X in Y (Z bytes) in read-only mode&lt;/p&gt;

&lt;p&gt;also cured by clearing the key caches.&lt;/p&gt;</comment>
                            <comment id="13737069" author="yukim" created="Mon, 12 Aug 2013 17:21:16 +0000"  >&lt;p&gt;Attaching patch which is rebased version of my previous 5202-4 branch against cassandra-2.0.0.&lt;/p&gt;

&lt;p&gt;It adds UUID CF ID to SSTable descriptor(== file name).&lt;br/&gt;
I tested upgrading from latest 1.2, bulk loader, and truncate and they all worked fine.&lt;/p&gt;

&lt;p&gt;I think 2.0 is good number for this change, but it is now on RC1 stage, I&apos;m not sure we should wait till 2.1.&lt;/p&gt;</comment>
                            <comment id="13737378" author="jbellis" created="Mon, 12 Aug 2013 21:32:49 +0000"  >&lt;p&gt;So right now our file layout looks like&lt;/p&gt;

&lt;p&gt;ks/cf/ks-cf-version-generation-component.db&lt;/p&gt;

&lt;p&gt;This would change it to&lt;/p&gt;

&lt;p&gt;ks/cf/ks-cf-uuid-version-generation-component.db&lt;/p&gt;

&lt;p&gt;Could we clean up the redundancy a little by moving the ID into the directory name?&lt;/p&gt;

&lt;p&gt;ks/cf-uuid/version-generation-component.db&lt;/p&gt;
</comment>
                            <comment id="13738152" author="iamaleksey" created="Tue, 13 Aug 2013 12:49:37 +0000"  >&lt;p&gt;I&apos;ve got a feeling that this patch breaks (concurrent) auth setup and certain DSE tables setup as well (all issuing CREATE TABLE statements for each of the required tables on startup, unless a table already exists). With non-deterministic cf uuids they&apos;ll potentially end up with different ids. Then, when schema versions converge to a single id per table, we might lose data (on the nodes that &apos;lost&apos;).&lt;/p&gt;</comment>
                            <comment id="13738164" author="iamaleksey" created="Tue, 13 Aug 2013 13:01:33 +0000"  >&lt;p&gt;We could work around by parsing the create statements instead, setting the CFMetaData id to a predetermined one and manually calling announceMigration(), or adding something like &apos;WITH id = &amp;lt;uuid&amp;gt;&apos; syntax to CREATE TABLE for these special cases.&lt;/p&gt;</comment>
                            <comment id="13738207" author="jbellis" created="Tue, 13 Aug 2013 13:39:28 +0000"  >&lt;p&gt;What if we were willing to give up automagic auth setup?  &quot;Run this script to enable auth on your cluster&quot; seems reasonable to me.&lt;/p&gt;</comment>
                            <comment id="13738214" author="iamaleksey" created="Tue, 13 Aug 2013 13:43:38 +0000"  >&lt;p&gt;Auth is just one example. DSE would be affected as well. Probably others who rely on 1.2 schema code with deterministic ids.&lt;/p&gt;</comment>
                            <comment id="13738220" author="iamaleksey" created="Tue, 13 Aug 2013 13:45:53 +0000"  >&lt;p&gt;Auth is the simplest case - there &lt;b&gt;is&lt;/b&gt; a workaround &lt;b&gt;and&lt;/b&gt; we control it. I&apos;m more worried about surprising other users unpleasantly.&lt;/p&gt;</comment>
                            <comment id="13738240" author="jbellis" created="Tue, 13 Aug 2013 13:56:08 +0000"  >&lt;ol&gt;
	&lt;li&gt;I&apos;m 100% convinced that (a) this is a problem worth fixing, and (b) we need to switch to nondeterministic IDs to fix it.  Deterministic IDs was, in retrospect, a mistake.  (More pedantically: it&apos;s not nondeterminism that fixes it, but unique IDs per unique CREATE; as I&apos;ve said, an int id incremented via CAS would also work.)  So, you have an uphill battle if you are arguing that it&apos;s fine the way it is!&lt;/li&gt;
	&lt;li&gt;Adding a &quot;WITH ID&quot; workaround doesn&apos;t break people any less, it&apos;s just a different (hackier, IMO) workaround than moving things to an external script.&lt;/li&gt;
	&lt;li&gt;Startup is messy enough without auth/dse special cases, moving them out of core into scripts that can run &quot;normally&quot; sounds like a fantastic idea to me even without uuid breakage as a motivation.&lt;/li&gt;
	&lt;li&gt;I would be shocked if there is anyone else besides DSE abusing the internals this way, but anyone who does surely understands that if you wire yourself that closely to the internals, you have absolutely no grounds to complain if we break compatibility.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13738245" author="iamaleksey" created="Tue, 13 Aug 2013 14:03:17 +0000"  >&lt;p&gt;I&apos;m not saying that it&apos;s worth fixing. Just mentioning what gets broken once the patch is committed.&lt;/p&gt;</comment>
                            <comment id="13738303" author="jbellis" created="Tue, 13 Aug 2013 14:50:19 +0000"  >&lt;p&gt;I do think you are right in that we should do this in 2.1 rather than 2.0.1.&lt;/p&gt;</comment>
                            <comment id="13738326" author="yukim" created="Tue, 13 Aug 2013 15:05:31 +0000"  >&lt;p&gt;Targeting this to be fixed in 2.1.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; I think we can change path and file name. I also want to try and see how switching to CAS would fix this.&lt;/p&gt;</comment>
                            <comment id="13739035" author="xedin" created="Tue, 13 Aug 2013 23:49:26 +0000"  >&lt;p&gt;I actually looked at &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-4687&quot; title=&quot;Exception: DecoratedKey(xxx, yyy) != DecoratedKey(zzz, kkk)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-4687&quot;&gt;&lt;del&gt;CASSANDRA-4687&lt;/del&gt;&lt;/a&gt; yesterday myself and I came to the same conclusions. I actually like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbellis&quot; class=&quot;user-hover&quot; rel=&quot;jbellis&quot;&gt;jbellis&lt;/a&gt; proposition to include uuid into directory name, instead of including it into file name, which would make it a lot simpler to migrate sstables over to different cluster or backup.&lt;/p&gt;

&lt;p&gt;I also think that it could be a good bonus to also clean the cache because of LRU nature of it, if previous entries where hot enough it would just waste time/work to push them out where we would still suffer cache miss every time we read from new cf (in multi ks/cf setup that is still fine as index read is not that bad).&lt;/p&gt;</comment>
                            <comment id="13773133" author="jbellis" created="Fri, 20 Sep 2013 16:14:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6060&quot; title=&quot;Remove internal use of Strings for ks/cf names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6060&quot;&gt;&lt;del&gt;CASSANDRA-6060&lt;/del&gt;&lt;/a&gt; is related since it also contemplates changing CFID assignment (back to unique ints via CAS).&lt;/p&gt;</comment>
                            <comment id="13788456" author="jbellis" created="Mon, 7 Oct 2013 19:14:58 +0000"  >&lt;p&gt;Is there anything that we want to do as part of this ticket instead of 6060?&lt;/p&gt;</comment>
                            <comment id="13788471" author="yukim" created="Mon, 7 Oct 2013 19:21:09 +0000"  >&lt;p&gt;Add CF ID to directory name if we still want to distinguish one KS/CF directory to another.&lt;br/&gt;
Updating key cache key to use CF ID is another one, but I think that will be done through 6060.&lt;/p&gt;</comment>
                            <comment id="13788476" author="jbellis" created="Mon, 7 Oct 2013 19:27:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;Add CF ID to directory name if we still want to distinguish one KS/CF directory to another.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;All right, I&apos;m down to narrow the scope here to that.&lt;/p&gt;</comment>
                            <comment id="13861134" author="yukim" created="Fri, 3 Jan 2014 02:44:01 +0000"  >&lt;p&gt;(also: &lt;a href=&quot;https://github.com/yukim/cassandra/commits/5202&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/yukim/cassandra/commits/5202&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Patch attached for review.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;CF ID is generated randomly upon new CFMetaData creation.&lt;br/&gt;
    CF under system keyspaces and ones from older version have deterministic CF ID based on their name.&lt;/li&gt;
	&lt;li&gt;SSTable directories are created as ks/cf-cfid. cfid here is hex encoding of UUID bytes. When upgrading, older format ks/cf is still used.&lt;/li&gt;
	&lt;li&gt;Saved key cache file name also has cfid appended at the end, and key cache look up is CF ID aware.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13862022" author="xedin" created="Fri, 3 Jan 2014 23:25:02 +0000"  >&lt;p&gt;@jbellis I can review in case Markus has more important stuff on his plate.&lt;/p&gt;</comment>
                            <comment id="13862097" author="jbellis" created="Sat, 4 Jan 2014 00:57:26 +0000"  >&lt;p&gt;Thanks, Pavel!&lt;/p&gt;</comment>
                            <comment id="13863941" author="xedin" created="Tue, 7 Jan 2014 06:32:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13864368" author="yukim" created="Tue, 7 Jan 2014 16:35:41 +0000"  >&lt;p&gt;Thank you, Pavel.&lt;br/&gt;
Committed with update on NEWS.txt.&lt;/p&gt;</comment>
                            <comment id="13865914" author="yukim" created="Wed, 8 Jan 2014 21:29:40 +0000"  >&lt;p&gt;Some unit test failures revealed I have to work on this a little bit more.&lt;br/&gt;
With committed version, secondary indexes can get wrong directory.&lt;br/&gt;
Will post fix here.&lt;/p&gt;</comment>
                            <comment id="13865922" author="iamaleksey" created="Wed, 8 Jan 2014 21:33:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yukim&quot; class=&quot;user-hover&quot; rel=&quot;yukim&quot;&gt;yukim&lt;/a&gt; any way you could alter auth setup code (creation of auth tables) to use the old deterministic cfIds explicitly, while at it?&lt;/p&gt;</comment>
                            <comment id="13865947" author="yukim" created="Wed, 8 Jan 2014 21:56:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; sure. Is it just enough to special case tables under &apos;system_auth&apos; keyspace?&lt;/p&gt;</comment>
                            <comment id="13865948" author="xedin" created="Wed, 8 Jan 2014 21:57:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yukim&quot; class=&quot;user-hover&quot; rel=&quot;yukim&quot;&gt;yukim&lt;/a&gt; Sorry, Yuki, I completely forgot about secondary indexes, tested standard scenarios with different setups with stress tho. Will be happy to review v2.&lt;/p&gt;</comment>
                            <comment id="13865955" author="iamaleksey" created="Wed, 8 Jan 2014 22:01:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yukim&quot; class=&quot;user-hover&quot; rel=&quot;yukim&quot;&gt;yukim&lt;/a&gt; I was thinking about announcing the migration for all the auth tables with cf_id preset to what 2.0 would&apos;ve generated. No special cases anywhere else.&lt;/p&gt;</comment>
                            <comment id="13867330" author="yukim" created="Fri, 10 Jan 2014 00:23:11 +0000"  >&lt;p&gt;0001: Fix for 2i CF&lt;/p&gt;

&lt;p&gt;I decided to force 2i CF to have the same CF ID from parents&apos;. I think this is safe because 2i CFs are never managed by Schema.&lt;/p&gt;

&lt;p&gt;0002: Fix scrub directory for 2i CF&lt;/p&gt;

&lt;p&gt;had to exclude scrubbing CUSTOM index type.&lt;/p&gt;

&lt;p&gt;0003: Fix user defined compaction&lt;/p&gt;

&lt;p&gt;User defined compaction via JMX was broken. It assumes SSTable files are under the directory with older name format.&lt;/p&gt;

&lt;p&gt;0004: Fix SerializationsTest&lt;br/&gt;
Serialization test on Row object was failing. This is due to the serialized CF ID on test file not matching non deterministic CF ID generated for every test run.&lt;br/&gt;
I decided to just generate test file every time.&lt;/p&gt;

&lt;p&gt;&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Sorry, still figuring out how to handle auth.&lt;br/&gt;
I think current code is sufficient to handle update from older version or setting up authnz. When upgrade, it uses existing directory with deterministic CF ID. Is there any concern that I&apos;m not aware of?&lt;/p&gt;

&lt;p&gt;Anyway, I have a feeling we need some way of forcing CF ID, especially when &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-6060&quot; title=&quot;Remove internal use of Strings for ks/cf names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-6060&quot;&gt;&lt;del&gt;CASSANDRA-6060&lt;/del&gt;&lt;/a&gt; comes in. &quot;WITH ID=xxx&quot; seems good to me. Maybe separate ticket?&lt;/p&gt;</comment>
                            <comment id="13867335" author="iamaleksey" created="Fri, 10 Jan 2014 00:27:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yukim&quot; class=&quot;user-hover&quot; rel=&quot;yukim&quot;&gt;yukim&lt;/a&gt; Upgrading&apos;s not a concern. Concurrent auth CFs creation on fresh 2.1 is, though - they will end up w/ different cf ids. So yes, we need to force a deterministic one.&lt;/p&gt;</comment>
                            <comment id="13867353" author="iamaleksey" created="Fri, 10 Jan 2014 00:44:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yukim&quot; class=&quot;user-hover&quot; rel=&quot;yukim&quot;&gt;yukim&lt;/a&gt; Specifically, instead of simply executing those &quot;CREATE TABLE&quot;s in PA, CA, and Auth, prepare them, and extract the generated CFMetaData object. Then set cf_id to the deterministic ones (pre-2.1 ones), explicitly. And then call MigrationManager.announceNewColumnFamily() manually, with that final CFMetaData, with the cf_id preset.&lt;/p&gt;

&lt;p&gt;This way you only have to change the setup code in PasswordAuthenticator/CassandraAuthorizer/Auth, and not special-case anything beyond that.&lt;/p&gt;

&lt;p&gt;Am I making any sense? &lt;/p&gt;</comment>
                            <comment id="13868036" author="yukim" created="Fri, 10 Jan 2014 17:45:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; 0005 attached for system_auth tables with fixed CF ID as we have currently.&lt;br/&gt;
Can you give it a review?&lt;/p&gt;</comment>
                            <comment id="13868443" author="iamaleksey" created="Fri, 10 Jan 2014 23:10:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yukim&quot; class=&quot;user-hover&quot; rel=&quot;yukim&quot;&gt;yukim&lt;/a&gt; LGTM. Attaching a v2 though, b/c I don&apos;t want to involve overriding the parameters set by newSystemMetadata(), uncluding memtableFlushPeriod, that probably wasn&apos;t being overriden at all - just the cf id.&lt;/p&gt;</comment>
                            <comment id="13869571" author="yukim" created="Mon, 13 Jan 2014 14:18:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=iamaleksey&quot; class=&quot;user-hover&quot; rel=&quot;iamaleksey&quot;&gt;iamaleksey&lt;/a&gt; thanks, I like your approach.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xedin&quot; class=&quot;user-hover&quot; rel=&quot;xedin&quot;&gt;xedin&lt;/a&gt; can you review rest of the patches(0001-0004)?&lt;/p&gt;</comment>
                            <comment id="13871204" author="xedin" created="Tue, 14 Jan 2014 21:23:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yukim&quot; class=&quot;user-hover&quot; rel=&quot;yukim&quot;&gt;yukim&lt;/a&gt; Looked at 1-4 patches, everything looks good but I have one question to clarify regarding #3 - we can do sstable.descriptor.equals(descriptor) now as &quot;descriptor&quot; would also have an absolute path because of the new &quot;find&quot; method, is that correct?&lt;/p&gt;</comment>
                            <comment id="13871284" author="yukim" created="Tue, 14 Jan 2014 22:20:50 +0000"  >&lt;p&gt;Yes, that is my intention. Since descriptor begins to get directory part from Directories, there is no need to compare file names in string.&lt;/p&gt;</comment>
                            <comment id="13871412" author="xedin" created="Wed, 15 Jan 2014 00:07:15 +0000"  >&lt;p&gt;sounds good to me, +1.&lt;/p&gt;</comment>
                            <comment id="13871577" author="yukim" created="Wed, 15 Jan 2014 03:13:43 +0000"  >&lt;p&gt;Committed, thanks!&lt;/p&gt;</comment>
                            <comment id="13907414" author="jbellis" created="Thu, 20 Feb 2014 19:59:19 +0000"  >&lt;p&gt;Did we give up on this?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Could we clean up the redundancy a little by moving the ID into the directory name?  e.g., ks/cf-uuid/version-generation-component.db&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m worried about path length, which is limited on Windows.&lt;/p&gt;

&lt;p&gt;Edit: to give a specific example, for KS foo Table bar we now have&lt;/p&gt;

&lt;p&gt;/var/lib/cassandra/flush/foo/bar-2fbb89709a6911e3b7dc4d7d4e3ca4b4/foo-bar-ka-1-Data.db&lt;/p&gt;

&lt;p&gt;I&apos;m proposing&lt;/p&gt;

&lt;p&gt;/var/lib/cassandra/flush/foo/bar-2fbb89709a6911e3b7dc4d7d4e3ca4b4/ka-1-Data.db&lt;/p&gt;</comment>
                            <comment id="13941829" author="brandon.williams" created="Thu, 20 Mar 2014 15:22:09 +0000"  >&lt;p&gt;Perhaps we should open a new ticket for that?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12664599">CASSANDRA-5905</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12681528">CASSANDRA-6411</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12756843">CASSANDRA-8350</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12608240">CASSANDRA-4687</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12669477">CASSANDRA-6060</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12820551">CASSANDRA-9179</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12737546">CASSANDRA-7846</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12622301" name="0001-make-2i-CFMetaData-have-parent-s-CF-ID.patch" size="1898" author="yukim" created="Fri, 10 Jan 2014 00:23:11 +0000"/>
                            <attachment id="12622302" name="0002-Don-t-scrub-2i-CF-if-index-type-is-CUSTOM.patch" size="2080" author="yukim" created="Fri, 10 Jan 2014 00:23:11 +0000"/>
                            <attachment id="12622303" name="0003-Fix-user-defined-compaction.patch" size="4225" author="yukim" created="Fri, 10 Jan 2014 00:23:11 +0000"/>
                            <attachment id="12622304" name="0004-Fix-serialization-test.patch" size="2387" author="yukim" created="Fri, 10 Jan 2014 00:23:11 +0000"/>
                            <attachment id="12622407" name="0005-Create-system_auth-tables-with-fixed-CFID.patch" size="9153" author="yukim" created="Fri, 10 Jan 2014 17:45:00 +0000"/>
                            <attachment id="12622458" name="0005-auth-v2.txt" size="10713" author="aleksey" created="Fri, 10 Jan 2014 23:10:09 +0000"/>
                            <attachment id="12621224" name="5202.txt" size="51237" author="yukim" created="Fri, 3 Jan 2014 02:44:01 +0000"/>
                            <attachment id="12567169" name="astyanax-stress-driver.zip" size="7056" author="marat" created="Wed, 30 Jan 2013 17:19:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[yukim]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310440</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hkqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310785</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>xedin</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[xedin]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311124" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Tester</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>shawn.kumar</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>