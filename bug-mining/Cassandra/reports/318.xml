<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:13:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1022] separate assignment of current keyspace from login()</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1022</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;With the completion of &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-714&quot; title=&quot;remove keyspace argument from thrift methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-714&quot;&gt;&lt;del&gt;CASSANDRA-714&lt;/del&gt;&lt;/a&gt;, it is now a requirement that login() be called, even when using the AllowAllAuthenticator (effectively disabling auth), since this is how the current/connected keyspace is set. These two disparate functions (assigning keyspace and authentication) should be disentangled.&lt;/p&gt;

&lt;p&gt;I propose that the keyspace argument be removed from calls to &lt;tt&gt;login()&lt;/tt&gt;, and that a new method (&lt;tt&gt;use_keyspace(string)&lt;/tt&gt;?), be added.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12463043">CASSANDRA-1022</key>
            <summary>separate assignment of current keyspace from login()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="todd">Todd Lipcon</assignee>
                                    <reporter username="urandom">Eric Evans</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Apr 2010 18:35:57 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:24 +0000</updated>
                            <resolved>Tue, 4 May 2010 16:01:28 +0000</resolved>
                                        <fixVersion>0.7 beta 1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12861043" author="jbellis" created="Mon, 26 Apr 2010 18:45:12 +0000"  >&lt;p&gt;mild preference for set_keyspace here&lt;/p&gt;</comment>
                            <comment id="12861090" author="todd" created="Mon, 26 Apr 2010 20:42:31 +0000"  >&lt;p&gt;Since this relates closely with &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-714&quot; title=&quot;remove keyspace argument from thrift methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-714&quot;&gt;&lt;del&gt;CASSANDRA-714&lt;/del&gt;&lt;/a&gt;, I&apos;ll spend the time logically separating these.&lt;/p&gt;</comment>
                            <comment id="12862619" author="todd" created="Fri, 30 Apr 2010 10:16:48 +0000"  >&lt;p&gt;Patch attached.&lt;/p&gt;</comment>
                            <comment id="12863069" author="urandom" created="Sun, 2 May 2010 00:13:30 +0000"  >&lt;p&gt;This has been committed with a few changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Fixed some style nits, (braches on newlines, etc). See &lt;a href=&quot;http://wiki.apache.org/cassandra/CodeStyle&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/cassandra/CodeStyle&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;Reinstated debug log statement in CassandraServer.login()&lt;/li&gt;
	&lt;li&gt;Reinstated css_.debug test when printing stacktrace in the CLI&lt;/li&gt;
	&lt;li&gt;Removed unused _login() function from system tests&lt;/li&gt;
	&lt;li&gt;Reworded a few error messages.&lt;/li&gt;
	&lt;li&gt;Updated contrib/utils/service/CassandraServiceTest for login() change&lt;/li&gt;
	&lt;li&gt;Disabled system_add_keyspace() when authentication is enabled (login() requires a keyspace).&lt;/li&gt;
	&lt;li&gt;Reset access level (forcing a new login) when keyspace is changed using set_keyspace().&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks Todd!&lt;/p&gt;</comment>
                            <comment id="12863831" author="tzz" created="Tue, 4 May 2010 14:53:59 +0000"  >&lt;p&gt;Eric, please remember &lt;a href=&quot;http://thread.gmane.org/gmane.comp.db.cassandra.user/1038/focus=1404&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://thread.gmane.org/gmane.comp.db.cassandra.user/1038/focus=1404&lt;/a&gt; where you asked me to merge login() with setKeyspace() and now they are pulled apart again.  What has changed?  Shouldn&apos;t we be insisting on the &quot;one keyspace per connection&quot; concept?  Or has the philosophy changed?&lt;/p&gt;

&lt;p&gt;If set_keyspace() is to be used, it should be the one returning an AccessLevel.  login() should return void.  In other words, the AccessLevel is per-keyspace, not per-user.&lt;/p&gt;

&lt;p&gt;Also, login() should no longer throw AuthorizationException since it doesn&apos;t do authorization, while set_keyspace() should throw it.&lt;/p&gt;

&lt;p&gt;Please let me know if I need to implement these changes or if someone else will do it or if there are any questions.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12863858" author="urandom" created="Tue, 4 May 2010 16:01:28 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Eric, please remember &lt;a href=&quot;http://thread.gmane.org/gmane.comp.db.cassandra.user/1038/focus=1404&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://thread.gmane.org/gmane.comp.db.cassandra.user/1038/focus=1404&lt;/a&gt; where you asked me to merge login() with setKeyspace() and now they are pulled apart again. What has changed? Shouldn&apos;t we be insisting on the &quot;one keyspace per connection&quot; concept? Or has the philosophy changed?&lt;br/&gt;
If set_keyspace() is to be used, it should be the one returning an AccessLevel. login() should return void. In other words, the AccessLevel is per-keyspace, not per-user.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I remember; what has changed is (anecdotal) experience with how people are (or more importantly are not) using this, and how well the interface is holding up over time (read: it&apos;s not).&lt;/p&gt;

&lt;p&gt;Personally,  I am  stronger in my convictions now that we should &lt;em&gt;not&lt;/em&gt; be rolling our own AAA, that this is not The Way, and I am seeking to make this (still experimental) API as optional as possible while working toward something better, (&lt;a href=&quot;https://issues.apache.org/jira/browse/AVRO-341&quot; title=&quot;specify avro transport in spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AVRO-341&quot;&gt;AVRO-341&lt;/a&gt;).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Also, login() should no longer throw AuthorizationException since it doesn&apos;t do authorization, while set_keyspace() should throw it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;set_keyspace()&lt;/tt&gt; is the required call now, &lt;tt&gt;login()&lt;/tt&gt; works exactly as before only it uses the keyspace specified in &lt;tt&gt;set_keyspace()&lt;/tt&gt; instead of having one passed in (and &lt;tt&gt;set_keyspace()&lt;/tt&gt; invalidates any previous &lt;tt&gt;login()&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;This was the whole point of this issue, to divorce the function of assigning a keyspace from authentication.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Please let me know if I need to implement these changes or if someone else will do it or if there are any questions.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t see any changes that need to be implemented here.&lt;/p&gt;</comment>
                            <comment id="12863868" author="tzz" created="Tue, 4 May 2010 16:29:36 +0000"  >&lt;p&gt;Thanks for explaining.  I didn&apos;t understand your motivation earlier.&lt;/p&gt;</comment>
                            <comment id="12884799" author="messi" created="Fri, 2 Jul 2010 20:31:54 +0000"  >&lt;p&gt;Commit #940127 introduced a bug in CassandraServer (line 889 in trunk): if statement is empty because of semicolon.&lt;/p&gt;</comment>
                            <comment id="12884820" author="jbellis" created="Fri, 2 Jul 2010 21:54:26 +0000"  >&lt;p&gt;removed the semicolon.  thanks!&lt;/p&gt;</comment>
                            <comment id="12884918" author="hudson" created="Sat, 3 Jul 2010 12:48:09 +0000"  >&lt;p&gt;Integrated in Cassandra #484 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/484/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/484/&lt;/a&gt;)&lt;br/&gt;
    r/m errant semicolon.  patch by Folke Behrens; reviewed by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1022&quot; title=&quot;separate assignment of current keyspace from login()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1022&quot;&gt;&lt;del&gt;CASSANDRA-1022&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12443277" name="CASSANDRA-1022.patch" size="65201" author="todd" created="Fri, 30 Apr 2010 10:16:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[todd]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g2iv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>91839</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>