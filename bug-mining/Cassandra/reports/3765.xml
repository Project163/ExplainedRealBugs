<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:57:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10135] Quoting changed for username in GRANT statement</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10135</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We may have uncovered an undocumented api change between cassandra 2.1.x and 2.2.0.&lt;br/&gt;
When granting permissions to a username containing special characters, 2.1.x needed single quotes around the username and refused doubles.&lt;br/&gt;
2.2.0 needs doubles and refuses singles.&lt;/p&gt;

&lt;p&gt;Working example for 2.1.x:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;GRANT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;ALL&lt;/span&gt; KEYSPACES &lt;span class=&quot;code-keyword&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;vault-readonly-root-79840dbb-917e-ed90-38e0-578226e6c1c6-1440017797&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Enclosing the username in double quotes instead of singles fails with the following error message:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;cassandra@cqlsh&amp;gt; GRANT SELECT ON ALL KEYSPACES TO &quot;vault-readonly-root-79840dbb-917e-ed90-38e0-578226e6c1c6-1440017797&quot;;&lt;br/&gt;
SyntaxException: &amp;lt;ErrorMessage code=2000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Syntax error in CQL query&amp;#93;&lt;/span&gt; message=&quot;line 1:33 mismatched input &apos;vault-readonly-root-79840dbb-917e-ed90-38e0-578226e6c1c6-1440017797&apos; expecting set null (...SELECT ON ALL KEYSPACES TO &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;vault-readonly-root-79840dbb-917e-ed90-38e0-578226e6c1c6-144001779&amp;#93;&lt;/span&gt;...)&quot;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Singles fail in 2.2.0:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;cassandra@cqlsh&amp;gt; GRANT SELECT ON ALL KEYSPACES TO &apos;vault-readonly-root-e04e7a84-a7ba-d84f-f3c0-1e50e7590179-1440019308&apos;;&lt;br/&gt;
SyntaxException: &amp;lt;ErrorMessage code=2000 &lt;span class=&quot;error&quot;&gt;&amp;#91;Syntax error in CQL query&amp;#93;&lt;/span&gt; message=&quot;line 1:33 no viable alternative at input &apos;vault-readonly-root-e04e7a84-a7ba-d84f-f3c0-1e50e7590179-1440019308&apos; (...SELECT ON ALL KEYSPACES TO &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;vault-readonly-root-e04e7a84-a7ba-d84f-f3c0-1e50e7590179-144001930&amp;#93;&lt;/span&gt;...)&quot;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;... whereas double quotes succeed:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;GRANT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;ALL&lt;/span&gt; KEYSPACES &lt;span class=&quot;code-keyword&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;vault-readonly-root-e04e7a84-a7ba-d84f-f3c0-1e50e7590179-1440019308&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If this is a deliberate change, I don&apos;t think it is reflected in the documentation. I am temped to consider this a bug introduced with the role additions.&lt;/p&gt;

&lt;p&gt;Motivation for this report: &lt;a href=&quot;https://github.com/hashicorp/vault/pull/545#issuecomment-132634630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hashicorp/vault/pull/545#issuecomment-132634630&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;cassandra 2.2.0&lt;/p&gt;</environment>
        <key id="12857332">CASSANDRA-10135</key>
            <summary>Quoting changed for username in GRANT statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="samt">Sam Tunnicliffe</assignee>
                                    <reporter username="bkw">Bernhard K. Weisshuhn</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Aug 2015 21:36:28 +0000</created>
                <updated>Tue, 16 Apr 2019 09:30:59 +0000</updated>
                            <resolved>Mon, 24 Aug 2015 18:08:04 +0000</resolved>
                                        <fixVersion>2.2.1</fixVersion>
                    <fixVersion>3.0 beta 2</fixVersion>
                                    <component>Legacy/CQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14703788" author="bkw" created="Wed, 19 Aug 2015 21:40:39 +0000"  >&lt;p&gt;sorry, I had to edit the description because of a copy and paste failure.&lt;/p&gt;</comment>
                            <comment id="14703854" author="iamaleksey" created="Wed, 19 Aug 2015 22:31:16 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=beobal&quot; class=&quot;user-hover&quot; rel=&quot;beobal&quot;&gt;beobal&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14704818" author="beobal" created="Thu, 20 Aug 2015 12:53:45 +0000"  >&lt;p&gt;Thi is mostly discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8850&quot; title=&quot;clean up options syntax for create/alter role&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8850&quot;&gt;&lt;del&gt;CASSANDRA-8850&lt;/del&gt;&lt;/a&gt;, tl;dr the initial proposal was to make role names quoted strings, but in the end it was decided to stick with identifiers as had previously been the case for user names. &lt;/p&gt;

&lt;p&gt;2.1 and 2.2 define a user/role name as either an identifier - an unquoted, case-insensitive string which matches the rule &lt;tt&gt;LETTER (LETTER | DIGIT | &apos;_&apos;)*&lt;/tt&gt; - or as a string literal, which are single quoted &amp;amp; non-case sensitive. From 2.2, string literals also support extended postgres syntax (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-7769&quot; title=&quot;Implement pg-style dollar syntax for string constants&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-7769&quot;&gt;&lt;del&gt;CASSANDRA-7769&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;There is a divergence between user and role names in the 2.2 CQL grammar though; role are defined as identifiers, unreserved keywords or quoted names. Quoted names are much like the 2.1 string literals, except are double quoted and in this usage, case-sensitive. They do not support the postgres &lt;tt&gt;$$&lt;/tt&gt; syntax.&lt;/p&gt;

&lt;p&gt;I&apos;ve pushed a branch &lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-2.2...beobal:10135-2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; which adds string literal as a supported production for role names, along with some additional tests which exercise the various syntax options. To preserve backwards compatibility, a quoted string role name (either singly quoted or using pg syntax) is &lt;b&gt;not&lt;/b&gt; case sensitive.&lt;/p&gt;</comment>
                            <comment id="14704936" author="bkw" created="Thu, 20 Aug 2015 14:01:16 +0000"  >&lt;p&gt;Thanks for the explanation and quick response, Sam. Much appreciated!&lt;/p&gt;</comment>
                            <comment id="14709399" author="iamaleksey" created="Mon, 24 Aug 2015 14:48:56 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14709752" author="beobal" created="Mon, 24 Aug 2015 18:08:04 +0000"  >&lt;p&gt;thanks committed to 2.2 in &lt;tt&gt;4994f0c7e7955179c0bce05e249f69fea0e3da37&lt;/tt&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j4gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332983">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>