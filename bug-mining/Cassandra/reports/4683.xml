<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:06:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13317] Default logging we ship will incorrectly print &quot;?:?&quot; for &quot;%F:%L&quot; pattern due to includeCallerData being false by default no appender</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13317</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We specify the logging pattern as &quot;%-5level &lt;span class=&quot;error&quot;&gt;&amp;#91;%thread&amp;#93;&lt;/span&gt; %date&lt;/p&gt;
{ISO8601}
&lt;p&gt; %F:%L - %msg%n&quot;. &lt;/p&gt;

&lt;p&gt;%F:%L is intended to print the Filename:Line Number. For performance reasons logback (like log4j2) disables tracking line numbers as it requires the entire stack to be materialized every time.&lt;/p&gt;

&lt;p&gt;This causes logs to look like:&lt;br/&gt;
WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2017-03-09 13:27:11,272 ?:? - Protocol Version 5/v5-beta not supported by java driver&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2017-03-09 13:27:11,813 ?:? - No commitlog files found; skipping replay&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2017-03-09 13:27:12,477 ?:? - Initialized prepared statement caches with 14 MB&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2017-03-09 13:27:12,727 ?:? - Initializing system.IndexInfo&lt;/p&gt;

&lt;p&gt;When instead you&apos;d expect something like:&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2017-03-09 13:23:44,204 ColumnFamilyStore.java:419 - Initializing system.available_ranges&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2017-03-09 13:23:44,210 ColumnFamilyStore.java:419 - Initializing system.transferred_ranges&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2017-03-09 13:23:44,215 ColumnFamilyStore.java:419 - Initializing system.views_builds_in_progress&lt;/p&gt;

&lt;p&gt;The fix is to add &quot;&amp;lt;includeCallerData&amp;gt;true&amp;lt;/includeCallerData&amp;gt;&quot; to the appender config to enable the line number and stack tracing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13049779">CASSANDRA-13317</key>
            <summary>Default logging we ship will incorrectly print &quot;?:?&quot; for &quot;%F:%L&quot; pattern due to includeCallerData being false by default no appender</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mkjellman">Michael Kjellman</assignee>
                                    <reporter username="mkjellman">Michael Kjellman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Mar 2017 22:30:43 +0000</created>
                <updated>Fri, 15 May 2020 08:00:49 +0000</updated>
                            <resolved>Thu, 23 Mar 2017 16:39:59 +0000</resolved>
                                        <fixVersion>3.11.0</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15904000" author="mkjellman" created="Thu, 9 Mar 2017 22:36:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aweisberg&quot; class=&quot;user-hover&quot; rel=&quot;aweisberg&quot;&gt;aweisberg&lt;/a&gt; wanna +1 this?&lt;/p&gt;</comment>
                            <comment id="15904074" author="mkjellman" created="Thu, 9 Mar 2017 23:44:22 +0000"  >&lt;p&gt;p.s. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aweisberg&quot; class=&quot;user-hover&quot; rel=&quot;aweisberg&quot;&gt;aweisberg&lt;/a&gt; there is a performance penalty here which is why it&apos;s disabled by default in logback and log4j2.. I think it&apos;s helpful to have the filename and line number personally while debugging so I think it makes sense to keep %F:%L in the pattern for logback-test.xml...&lt;/p&gt;

&lt;p&gt;For the actual default conf we ship I wonder if it might make sense to remove &quot;%F:%L&quot; from the pattern instead of fixing the issue.... &lt;/p&gt;

&lt;p&gt;The thing is though that we ship this &quot;ASYNCDEBUGLOG&quot; appender enabled by default though which already has &amp;lt;includeCallerData&amp;gt;true&amp;lt;/includeCallerData&amp;gt;..... so if we decide it&apos;s not worth the performance overhead to log the filename and line number for the actual default (non-test) logback config we ship we should also make ASYNCDEBUGLOG disabled by default...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &amp;lt;root level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;appender-ref ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;SYSTEMLOG&quot;&lt;/span&gt; /&amp;gt;
    &amp;lt;appender-ref ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;STDOUT&quot;&lt;/span&gt; /&amp;gt;
    &amp;lt;appender-ref ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;ASYNCDEBUGLOG&quot;&lt;/span&gt; /&amp;gt; &amp;lt;!-- Comment &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line to disable debug.log --&amp;gt;
    &amp;lt;!--
    &amp;lt;appender-ref ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;LogbackMetrics&quot;&lt;/span&gt; /&amp;gt;
    --&amp;gt;
  &amp;lt;/root&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15936852" author="aweisberg" created="Wed, 22 Mar 2017 18:21:42 +0000"  >&lt;p&gt;&lt;tt&gt;includeCallerData&lt;/tt&gt; as far as I can tell is only a property on &lt;tt&gt;ch.qos.logback.classic.AsyncAppender&lt;/tt&gt;. The other appenders don&apos;t have that tunable and I suspect they always fetch the caller data. I&apos;ll add this to logback-test.xml&apos;s async appender which was missing it.&lt;/p&gt;</comment>
                            <comment id="15936987" author="aweisberg" created="Wed, 22 Mar 2017 19:42:03 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Code&lt;/th&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;utests&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;dtests&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/cassandra-3.11...aweisberg:cassandra-13317-3.11?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13317-3.11-testall/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;utests&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://cassci.datastax.com/view/Dev/view/aweisberg/job/aweisberg-cassandra-13317-3.11-dtest/1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15938730" author="aweisberg" created="Thu, 23 Mar 2017 16:39:59 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/3e95c5b0c574383e7da9a5e152b7be8aa122af9f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3e95c5b0c574383e7da9a5e152b7be8aa122af9f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16076975" author="aweisberg" created="Thu, 6 Jul 2017 17:48:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeromatron&quot; class=&quot;user-hover&quot; rel=&quot;jeromatron&quot;&gt;jeromatron&lt;/a&gt; is this really materialized view related? Seems purely log config related to me.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12857114" name="13317_v1.diff" size="1155" author="mkjellman" created="Thu, 9 Mar 2017 22:35:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mkjellman]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3b7hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aweisberg</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aweisberg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>