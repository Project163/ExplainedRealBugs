<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:16:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-10968] When taking snapshot, manifest.json contains incorrect or no files when column family has secondary indexes</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-10968</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;xNoticed indeterminate behaviour when taking snapshot on column families that has secondary indexes setup. The created manifest.json created when doing snapshot, sometimes contains no file names at all and sometimes some file names. &lt;br/&gt;
I don&apos;t know if this post is related but that was the only thing I could find:&lt;br/&gt;
&lt;a href=&quot;http://www.mail-archive.com/user%40cassandra.apache.org/msg42019.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/user%40cassandra.apache.org/msg42019.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12927301">CASSANDRA-10968</key>
            <summary>When taking snapshot, manifest.json contains incorrect or no files when column family has secondary indexes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Gerrrr">Alex Sorokoumov</assignee>
                                    <reporter username="Fredderf">Fred A</reporter>
                        <labels>
                            <label>lhf</label>
                    </labels>
                <created>Tue, 5 Jan 2016 15:36:20 +0000</created>
                <updated>Sun, 3 Jan 2021 17:02:39 +0000</updated>
                            <resolved>Fri, 10 Jul 2020 17:39:04 +0000</resolved>
                                        <fixVersion>2.1.x</fixVersion>
                    <fixVersion>2.2.17</fixVersion>
                    <fixVersion>3.0.21</fixVersion>
                    <fixVersion>3.11.7</fixVersion>
                    <fixVersion>4.0-beta1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Feature/2i Index</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9000">2.5h</timespent>
                                <comments>
                            <comment id="15961840" author="gerrrr" created="Sat, 8 Apr 2017 13:45:07 +0000"  >&lt;p&gt;I was able to reproduce the behavior described in &lt;a href=&quot;http://www.mail-archive.com/user%40cassandra.apache.org/msg42019.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/user%40cassandra.apache.org/msg42019.html&lt;/a&gt; by creating a snapshot on a table with 2 columns and a secondary index:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE KEYSPACE X
  WITH REPLICATION = { &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;SimpleStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;replication_factor&apos;&lt;/span&gt; : 1 };

USE X;

CREATE TABLE table1 (
  col1 varchar,
  col2 varchar,
  PRIMARY KEY (col1, col2)
);
CREATE INDEX col2_idx ON X.table1 (col2);

INSERT INTO x.table1 (col1, col2) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;a1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;a2&apos;&lt;/span&gt;);
INSERT INTO x.table1 (col1, col2) VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;b1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;b2&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Before the patch, branch cassandra-2.1.12:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ bin/nodetool snapshot x
Requested creating snapshot(s) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; [x] with snapshot name [1491658291872]
Snapshot directory: 1491658291872

$ cat data/data/x/table1-a47092a01aa011e7b2e959ff5fdd622a/snapshots/1491658291872/manifest.json
{&lt;span class=&quot;code-quote&quot;&gt;&quot;files&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;x-table1.col2_idx-ka-1-Data.db&quot;&lt;/span&gt;]}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the manifest above the index table is missing.&lt;/p&gt;

&lt;p&gt;After the patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ git checkout 10968-2.1.12
previous HEAD position was a6619e56b1... bump 2.1 versions
Switched to branch &lt;span class=&quot;code-quote&quot;&gt;&apos;10968-2.1.12&apos;&lt;/span&gt;

$ bin/nodetool snapshot x
Requested creating snapshot(s) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; [x] with snapshot name [1491658830545]
Snapshot directory: 1491658830545

$ cat data/data/x/table1-a47092a01aa011e7b2e959ff5fdd622a/snapshots/1491658830545/manifest.json
{&lt;span class=&quot;code-quote&quot;&gt;&quot;files&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;x-table1-ka-1-Data.db&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;x-table1.col2_idx-ka-1-Data.db&quot;&lt;/span&gt;]}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Links to the branches:&lt;/b&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/Gerrrr/cassandra/tree/10968-2.1.12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Gerrrr/cassandra/tree/10968-2.1.12&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/Gerrrr/cassandra/tree/10968-2.2.4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Gerrrr/cassandra/tree/10968-2.2.4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15963472" author="ifesdjeen" created="Mon, 10 Apr 2017 20:52:55 +0000"  >&lt;p&gt;I might have overlooked the answer to this question: is this also applicable to 3.x/trunk? &lt;/p&gt;</comment>
                            <comment id="15969180" author="gerrrr" created="Fri, 14 Apr 2017 15:48:58 +0000"  >&lt;p&gt;Thanks for the question! It is indeed applicable to 3.x, here is the patch: &lt;a href=&quot;https://github.com/Gerrrr/cassandra/tree/10968-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Gerrrr/cassandra/tree/10968-3.11&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16000186" author="anthony grasso" created="Mon, 8 May 2017 02:18:36 +0000"  >&lt;p&gt;Nice find &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;I have reviewed code changes and performed the following for all versions of the patch available (2.1, 2.2, 3.11).&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Tested as per the example given by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;Ran unit test created in isolation using the following command.
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant testsome -Dtest.name=org.apache.cassandra.db.ColumnFamilyStoreTest -Dtest.methods=testSnapshotWithoutFlushWithSecondaryIndexes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Ran unit tests for &lt;tt&gt;ColumnFamilyStoreTest&lt;/tt&gt; using the following command.
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant test -Dtest.name=ColumnFamilyStoreTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have left a comment on the commits (&lt;a href=&quot;https://github.com/Gerrrr/cassandra/commit/ef7ffcd757a4523387a8a078ea75f9c154715b01&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.1.12 &lt;/a&gt;, &lt;a href=&quot;https://github.com/Gerrrr/cassandra/commit/83e02225859d4e4b49e0c4d8cc8f0917952981aa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2.4 &lt;/a&gt;, &lt;a href=&quot;https://github.com/Gerrrr/cassandra/commit/735ba7b59e06ae06f8287daa0fd0bb04de22cbc0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11 &lt;/a&gt;) in relation to the new unit test. We will need make a fix to it before we commit this patch.&lt;/p&gt;</comment>
                            <comment id="16009366" author="gerrrr" created="Sat, 13 May 2017 15:11:56 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Anthony+Grasso&quot; class=&quot;user-hover&quot; rel=&quot;Anthony Grasso&quot;&gt;Anthony Grasso&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thank you for the review and comments! I fixed the tests for all 3 commits, now &lt;tt&gt;ant test -Dtest.name=ColumnFamilyStoreTest&lt;/tt&gt;&lt;br/&gt;
 passes as well. Can you please have a look again?&lt;/p&gt;</comment>
                            <comment id="16009892" author="anthony grasso" created="Mon, 15 May 2017 00:34:45 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Have reviewed that latest changes for three versions (&lt;a href=&quot;https://github.com/Gerrrr/cassandra/commit/918584aa068cddd91ec915f03b80c2cef72bceab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.1.12 &lt;/a&gt;, &lt;a href=&quot;https://github.com/Gerrrr/cassandra/commit/e8330fde43e5da6ab6653b7403c5ea99f38b9e7e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2.4 &lt;/a&gt;, &lt;a href=&quot;https://github.com/Gerrrr/cassandra/commit/8b4ee1d6c99c4f662592412e854c7ca3f3bed5da&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11 &lt;/a&gt;) and confirmed that &lt;tt&gt;ant test -Dtest.name=ColumnFamilyStoreTest&lt;/tt&gt; now passes.&lt;/p&gt;

&lt;p&gt;+1 on all three patches. Nice work!&lt;/p&gt;</comment>
                            <comment id="16320007" author="fredderf" created="Wed, 10 Jan 2018 10:22:00 +0000"  >&lt;p&gt;When and to which versions will this fix be comitted?&lt;/p&gt;</comment>
                            <comment id="16683471" author="ifesdjeen" created="Mon, 12 Nov 2018 09:43:47 +0000"  >&lt;p&gt;Shouldn&apos;t we clear all cfs in this case?&lt;/p&gt;</comment>
                            <comment id="17109092" author="vrischmann" created="Sat, 16 May 2020 14:54:22 +0000"  >&lt;p&gt;Hello, &lt;/p&gt;

&lt;p&gt;just got bit by this bug. Is this fix going to be backported to Cassandra 2 and 3.11 ? (I suspect not)&lt;/p&gt;</comment>
                            <comment id="17115844" author="gerrrr" created="Mon, 25 May 2020 08:41:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; I would like to rebase and retest the patches.  Can you please advise on the lowest target version? AFAIU it should land at either the lowest affected version if we consider this a serious enough issue or 4.0 otherwise.&lt;/p&gt;</comment>
                            <comment id="17115875" author="ifesdjeen" created="Mon, 25 May 2020 09:19:56 +0000"  >&lt;p&gt;To me, this looks like an issue that is rather important to fix (even though it&apos;s trivial and theoretically possible to work around), since manifest files shouldn&apos;t be empty, might break someone&apos;s automation, etc., so I think it&apos;s legit to commit it to 2.2 and up.&lt;/p&gt;</comment>
                            <comment id="17133352" author="gerrrr" created="Thu, 11 Jun 2020 15:45:46 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10968-2.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/624&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10968-2.2&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/625&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10968-3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Cassandra-devbranch/141&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10968-3.11&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Cassandra-devbranch/142&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;10968-4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/143&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Cassandra-devbranch/143&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Unfortunately, I couldn&apos;t find a working CI for 2.1, 2.2. As for 3.0, 3.11, 4.0, I went through non-timeout test failures and ran the tests locally, compared results to the results on the main branches. AFAICS these test failures are unrelated.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; Can you please review?&lt;/p&gt;</comment>
                            <comment id="17152040" author="adelapena" created="Mon, 6 Jul 2020 13:59:59 +0000"  >&lt;p&gt;The fix looks good to me. I have run CI again:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;utest&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;dtest&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.1 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/167/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;167&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/201/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;201&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.2 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/168/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;168&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/202/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;202&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3.0 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/169/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;169&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/203/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;203&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3.11&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/170/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;170&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/204/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;204&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.0 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/171/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;171&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/205/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;205&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Dtests haven&apos;t finished yet. 2.1 CI seems to have failed to build, and indeed we don&apos;t seem to have a regular CI build for it. For 2.2 there are failures in &lt;tt&gt;SSTableRewriterTest&lt;/tt&gt; that also happen in the base branch, so they don&apos;t seem related.&lt;/p&gt;

&lt;p&gt;For sure we should at least apply the fix since 2.2. I&apos;m not sure this is critical enough for 2.1, but the fix is quite small so probably it won&apos;t be a problem if we include that branch, although the lack of CI for the branch is a bit worrying.&lt;/p&gt;</comment>
                            <comment id="17152659" author="gerrrr" created="Tue, 7 Jul 2020 11:11:37 +0000"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;I double-checked &lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/202/testReport/junit/dtest.snapshot_test/TestSnapshot/test_basic_snapshot_and_restore/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TestSnapshot.test_basic_snapshot_and_restore&lt;/a&gt; failure and it was actually caused by the introduction of &lt;tt&gt;Directories#isSecondaryIndexFolder&lt;/tt&gt;. DatabaseDescriptor was crashing during static initialization in client mode. I updated the patch - &lt;a href=&quot;https://github.com/apache/cassandra/pull/624/files#diff-b66584c9ce7b64019b5db5a531deeda1R180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;added default value for data file directories&lt;/a&gt;. This change is actually present in 3.0+.&lt;/p&gt;

&lt;p&gt;Can you please rerun the CI for 2.1?&lt;/p&gt;</comment>
                            <comment id="17152682" author="adelapena" created="Tue, 7 Jul 2020 11:44:31 +0000"  >&lt;p&gt;Good catch. Rerunning:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;utest&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;dtest&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.1 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/173/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;173&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/207/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;207&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.2 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/174/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;174&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/208/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;208&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17155634" author="adelapena" created="Fri, 10 Jul 2020 17:34:12 +0000"  >&lt;p&gt;Committed to cassandra-2.1 branch as &lt;a href=&quot;https://github.com/apache/cassandra/commit/976096abd2ba786f747774ee5160c4cba6fefce2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;976096abd2ba786f747774ee5160c4cba6fefce2&lt;/a&gt; and merged up to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[Gerrrr]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qt6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333872">2.1.12</customfieldvalue>
    <customfieldvalue id="12333871">2.2.4</customfieldvalue>
    <customfieldvalue id="12339157">3.11.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12314533">0.7 beta 1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/976096abd2ba786f747774ee5160c4cba6fefce2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/976096abd2ba786f747774ee5160c4cba6fefce2&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>