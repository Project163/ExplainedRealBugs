<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:36:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-4840] remnants of removed nodes remain after removal</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-4840</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After nodes are removed from the ring and no longer appear in any of the nodes&apos; nodetool ring output, some of the dead nodes show up in the o.a.c.net.FailureDetector SimpleStates metadata.  Also, some of the JMX stats are updating for the removed nodes (ie RecentTimeoutsPerHost and ResponsePendingTasks).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12612800">CASSANDRA-4840</key>
            <summary>remnants of removed nodes remain after removal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="jeromatron">Jeremy Hanna</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Oct 2012 22:28:16 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:24 +0000</updated>
                            <resolved>Fri, 2 Nov 2012 13:14:50 +0000</resolved>
                                        <fixVersion>1.1.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13480468" author="brandon.williams" created="Fri, 19 Oct 2012 22:36:42 +0000"  >&lt;p&gt;I believe this may be evidence of the issue I&apos;ve heard reported where nodes are still trying to connect to dead IPs that were removed.  I suspect a message might be getting stuck in OTC and causing this.&lt;/p&gt;

&lt;p&gt;As far as the FD goes, we definitely remove it there in Gossiper.removeEndpoint, so something must be adding it back.&lt;/p&gt;</comment>
                            <comment id="13481451" author="jbellis" created="Mon, 22 Oct 2012 15:58:47 +0000"  >&lt;p&gt;Does this happen in 1.1 as well?&lt;/p&gt;</comment>
                            <comment id="13484884" author="brandon.williams" created="Fri, 26 Oct 2012 12:46:40 +0000"  >&lt;p&gt;Yes, it can happen in 1.1.  Even on restart some kind of message sits in MS for the host that I haven&apos;t tracked down yet.  Worth noting that at least the FD portion is a red herring, it&apos;s dumping the gossiper&apos;s endpoint state map which of course contains hosts with dead state.&lt;/p&gt;</comment>
                            <comment id="13485081" author="brandon.williams" created="Fri, 26 Oct 2012 18:07:58 +0000"  >&lt;p&gt;The gossiper has to notify subscribers of joins, even on dead state.  Specifically it needs to notify SS in case some action needs to be taken, however SS in turn needs to notify the gossiper to remove the endpoint if the endpoint is already a non-member.  When removing an endpoint, the gossiper should notify MS to destroy any conn pools and remove the timeout tracking.  Patch to do so.&lt;/p&gt;</comment>
                            <comment id="13485243" author="vijay2win@yahoo.com" created="Fri, 26 Oct 2012 22:15:51 +0000"  >&lt;p&gt;Wondering if there might be a race condition since we remove and disconnect should we take a membership lock on the node and do this? (Not sure if this is a real problem)&lt;/p&gt;</comment>
                            <comment id="13487215" author="brandon.williams" created="Tue, 30 Oct 2012 20:46:07 +0000"  >&lt;p&gt;I&apos;m not sure what you mean, what is a membership lock on the node?&lt;/p&gt;</comment>
                            <comment id="13487619" author="vijay2win@yahoo.com" created="Wed, 31 Oct 2012 08:46:39 +0000"  >&lt;p&gt;Membership lock so no one else add&apos;s the node back into the map during the remove sequence, it would be rare... +1 other than that.&lt;/p&gt;</comment>
                            <comment id="13489410" author="brandon.williams" created="Fri, 2 Nov 2012 13:14:39 +0000"  >&lt;p&gt;The node would need a new generation for that to happen, and if so, it should be processed accordingly.  Since we&apos;re backed by NBHM, I don&apos;t see a reason to worry about this.  Committed as is.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12550992" name="4840.txt" size="2476" author="brandon.williams" created="Fri, 26 Oct 2012 18:07:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250060</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ao3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60176</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>vijay2win@yahoo.com</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[vijay2win@yahoo.com]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>