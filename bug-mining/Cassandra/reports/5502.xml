<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:17:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-15958] org.apache.cassandra.net.ConnectionTest testMessagePurging</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-15958</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Build: &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-trunk-test/196/testReport/junit/org.apache.cassandra.net/ConnectionTest/testMessagePurging/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/job/Cassandra-trunk-test/196/testReport/junit/org.apache.cassandra.net/ConnectionTest/testMessagePurging/&lt;/a&gt;&lt;br/&gt;
Build: &lt;a href=&quot;https://ci-cassandra.apache.org/job/Cassandra-trunk-test/194/testReport/junit/org.apache.cassandra.net/ConnectionTest/testMessagePurging/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/job/Cassandra-trunk-test/194/testReport/junit/org.apache.cassandra.net/ConnectionTest/testMessagePurging/&lt;/a&gt;&lt;br/&gt;
java.util.concurrent.TimeoutException&lt;br/&gt;
	at org.apache.cassandra.net.AsyncPromise.get(AsyncPromise.java:258)&lt;br/&gt;
	at org.apache.cassandra.net.FutureDelegate.get(FutureDelegate.java:143)&lt;br/&gt;
	at org.apache.cassandra.net.ConnectionTest.doTestManual(ConnectionTest.java:268)&lt;br/&gt;
	at org.apache.cassandra.net.ConnectionTest.testManual(ConnectionTest.java:236)&lt;br/&gt;
	at org.apache.cassandra.net.ConnectionTest.testMessagePurging(ConnectionTest.java:679)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13317503">CASSANDRA-15958</key>
            <summary>org.apache.cassandra.net.ConnectionTest testMessagePurging</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aholmber">Adam Holmberg</assignee>
                                    <reporter username="dcapwell">David Capwell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jul 2020 23:34:26 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:53 +0000</updated>
                            <resolved>Wed, 7 Oct 2020 11:02:29 +0000</resolved>
                                        <fixVersion>4.0-beta3</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Test/unit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17163823" author="dcapwell" created="Thu, 23 Jul 2020 17:51:39 +0000"  >&lt;p&gt;Failed again: &lt;a href=&quot;https://app.circleci.com/pipelines/github/dcapwell/cassandra/307/workflows/a5d97246-2f81-489e-81e9-55c311ad65ae/jobs/1542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/dcapwell/cassandra/307/workflows/a5d97246-2f81-489e-81e9-55c311ad65ae/jobs/1542&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17183526" author="aholmber" created="Mon, 24 Aug 2020 18:26:16 +0000"  >&lt;p&gt;The timeout occurs &lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/CASSANDRA-15958/test/unit/org/apache/cassandra/net/ConnectionTest.java#L268&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;waiting for this close future&lt;/a&gt;, failing intermittently due to a race condition. The test &lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/CASSANDRA-15958/test/unit/org/apache/cassandra/net/ConnectionTest.java#L723&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;closes&lt;/a&gt; the inbound connection &lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/CASSANDRA-15958/test/unit/org/apache/cassandra/net/ConnectionTest.java#L268&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;twice&lt;/a&gt;. If the first execution finishes and &lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/CASSANDRA-15958/src/java/org/apache/cassandra/net/InboundSockets.java#L128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;shuts down the executor&lt;/a&gt; before the second, the &lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/CASSANDRA-15958/src/java/org/apache/cassandra/net/InboundSockets.java#L125-L126&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FutureCombiner&lt;/a&gt; fails to &lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/CASSANDRA-15958/src/java/org/apache/cassandra/net/FutureCombiner.java#L83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;addListener&lt;/a&gt; to the channel, and the &lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/CASSANDRA-15958/src/java/org/apache/cassandra/net/InboundSockets.java#L131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;done future&lt;/a&gt; will never complete.&lt;/p&gt;</comment>
                            <comment id="17183533" author="aholmber" created="Mon, 24 Aug 2020 18:36:58 +0000"  >&lt;p&gt;Looks like there are some additional sources of flakiness in this test.&lt;br/&gt;
&lt;a href=&quot;https://app.circleci.com/pipelines/github/aholmberg/cassandra/25/workflows/536c8ec1-51d3-4ef0-95c6-7dd9677225dc/jobs/207&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/aholmberg/cassandra/25/workflows/536c8ec1-51d3-4ef0-95c6-7dd9677225dc/jobs/207&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17183614" author="yifanc" created="Mon, 24 Aug 2020 21:50:44 +0000"  >&lt;p&gt;Hi Adam, thanks for the analysis! &lt;br/&gt;
I agree with the cause, and I can reproduce the timeout exception (at closing) by inserting a pause between those 2 close call sites. &lt;/p&gt;

&lt;p&gt;The patch looks good to me. The &lt;tt&gt;closeFuture&lt;/tt&gt; is updated/read within the synchronized block.&lt;/p&gt;

&lt;p&gt;Only one thing to bring up is that there is a slight side effect introduced. With the patch, only the &lt;tt&gt;Consumer&amp;lt;? super ExecutorService&amp;gt; shutdownExecutors&lt;/tt&gt; in the first call site will be registered. The other call sites, if supplying a different consumer, are all ignored. Maybe update the method docs for such behavior. &lt;/p&gt;</comment>
                            <comment id="17184097" author="aholmber" created="Tue, 25 Aug 2020 14:44:21 +0000"  >&lt;p&gt;Thanks, Yifan, for taking a look. I&apos;ll revisit that before submitting for review.&lt;/p&gt;

&lt;p&gt;In the mean time, I looked some at the other flakiness.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: java.util.concurrent.TimeoutException
	at org.apache.cassandra.net.ConnectionTest.lambda$testMessagePurging$36(ConnectionTest.java:700)
	at org.apache.cassandra.net.ConnectionTest.lambda$testMessagePurging$40(ConnectionTest.java:730)
	at org.apache.cassandra.net.ConnectionTest.doTestManual(ConnectionTest.java:263)
	at org.apache.cassandra.net.ConnectionTest.testManual(ConnectionTest.java:236)
	at org.apache.cassandra.net.ConnectionTest.testMessagePurging(ConnectionTest.java:679)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
Caused by: java.util.concurrent.TimeoutException
	at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1886)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2021)
	at org.apache.cassandra.net.ConnectionTest.lambda$testMessagePurging$36(ConnectionTest.java:693)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Timeout waiting for message to be purged. It will never purge.&lt;/p&gt;

&lt;p&gt;Identified another race condition where the next expiration can be set to Long.MAX_VALUE, and pruning will never happen.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/eb1c9bf59c7faba3e65be7fc45359611c7242672/src/java/org/apache/cassandra/net/OutboundMessageQueue.java#L203-L209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Periodic pruning&lt;/a&gt; runs in the background. It might run against an empty queue, producing a &lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/eb1c9bf59c7faba3e65be7fc45359611c7242672/src/java/org/apache/cassandra/net/OutboundMessageQueue.java#L288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pruner&lt;/a&gt; with &lt;tt&gt;earliestExpiresAt = Long.MAX_VALUE&lt;/tt&gt;. In the mean time a message is added and the current deadline matches that message. If our nowNanos was established more than the clock resolution after the message expire time was set, the earliestExpiresAt time is &lt;a href=&quot;https://github.com/aholmberg/cassandra/blob/eb1c9bf59c7faba3e65be7fc45359611c7242672/src/java/org/apache/cassandra/net/OutboundMessageQueue.java#L228-L229&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;set&lt;/a&gt; to &lt;tt&gt;Long.MAX_VALUE&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I have another tweak for this issue. Still looking at some other related unit tests.&lt;/p&gt;</comment>
                            <comment id="17185251" author="aholmber" created="Wed, 26 Aug 2020 14:59:59 +0000"  >&lt;p&gt;Looked at the &lt;tt&gt;OutboundMessageQueue&lt;/tt&gt; issue a bit more. Put more simply, there&apos;s a race &lt;a href=&quot;https://github.com/apache/cassandra/blob/405e2dd8b5610208596ab4cb0bb6b9be7a159f5e/src/java/org/apache/cassandra/net/OutboundMessageQueue.java#L89-L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;adding to this queue and updating the expiration deadline&lt;/a&gt; while another thread is draining ( &lt;a href=&quot;https://github.com/apache/cassandra/blob/405e2dd8b5610208596ab4cb0bb6b9be7a159f5e/src/java/org/apache/cassandra/net/OutboundMessageQueue.java#L256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1&lt;/a&gt; &lt;a href=&quot;https://github.com/apache/cassandra/blob/405e2dd8b5610208596ab4cb0bb6b9be7a159f5e/src/java/org/apache/cassandra/net/OutboundMessageQueue.java#L148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2&lt;/a&gt; &lt;a href=&quot;https://github.com/apache/cassandra/blob/405e2dd8b5610208596ab4cb0bb6b9be7a159f5e/src/java/org/apache/cassandra/net/OutboundMessageQueue.java#L484&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3&lt;/a&gt; ) and also updating ( &lt;a href=&quot;https://github.com/apache/cassandra/blob/405e2dd8b5610208596ab4cb0bb6b9be7a159f5e/src/java/org/apache/cassandra/net/OutboundMessageQueue.java#L288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1&lt;/a&gt; &lt;a href=&quot;https://github.com/apache/cassandra/blob/405e2dd8b5610208596ab4cb0bb6b9be7a159f5e/src/java/org/apache/cassandra/net/OutboundMessageQueue.java#L488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2&lt;/a&gt; ). The race is there, but I&apos;m not certain it would be a problem in an operating server, since nothing is spinning on an inactive queue waiting for messages to be evacuated, like this test is. In other words, new incoming messages and ongoing delivery would break this loose naturally.&lt;/p&gt;

&lt;p&gt;Two ways to proceed:&lt;br/&gt;
1.) We can agree that it&apos;s not a problem, and I can make this test not susceptible to the timeout.&lt;br/&gt;
2.) We try to fix by adding synchronization around both the external queue and expiry update. I would need to expand the analysis quite a bit to understand what performance implications that might have (since the apparent point of the two queue design is efficiency).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yifanc&quot; class=&quot;user-hover&quot; rel=&quot;yifanc&quot;&gt;yifanc&lt;/a&gt; I&apos;m interested in your take.&lt;br/&gt;
also /cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aleksey&quot; class=&quot;user-hover&quot; rel=&quot;aleksey&quot;&gt;aleksey&lt;/a&gt; for ideas since this is part of your newish messaging rewrite.&lt;/p&gt;</comment>
                            <comment id="17185385" author="aholmber" created="Wed, 26 Aug 2020 17:44:00 +0000"  >&lt;p&gt;A third alternative would be to skip synchronization and computation and just make it periodic. I&apos;m not sure what the genesis of the more precise calculation was.&lt;/p&gt;</comment>
                            <comment id="17185693" author="yifanc" created="Thu, 27 Aug 2020 07:42:31 +0000"  >&lt;p&gt;Nice finding! &lt;br/&gt;
I am able to reproduce the race, as long as the &lt;tt&gt;nextExpirationDeadlineUpdater&lt;/tt&gt; that sets &lt;tt&gt;earliestExpiresAt&lt;/tt&gt; to &lt;tt&gt;Long.MAX_VALUE&lt;/tt&gt; in &lt;tt&gt;pruneInternalQueueWithLock&lt;/tt&gt; happens after the updater in the &lt;b&gt;last&lt;/b&gt; &lt;tt&gt;add()&lt;/tt&gt; message call in the test. &lt;/p&gt;

&lt;p&gt;The impact is that the prune task might not be able to prune the queue when there is no new message with expiration time that can trigger &lt;tt&gt;pruneWithLock()&lt;/tt&gt; enqueued. But in an operating system, there should be new messages enqueued continuously. Therefore, the chance that messages not being pruned should be low. &lt;br/&gt;
In the worst case that an expired message is not pruned in the queue, the message is still discarded when outbound connection sends the message. It checks &lt;tt&gt;shouldSend()&lt;/tt&gt; when polling from the queue. &lt;br/&gt;
Therefore, it seems a special case in the test. It should not harm in production.&lt;/p&gt;

&lt;p&gt;Regarding the third alternative, if I understand correctly, without updating the &lt;tt&gt;nextExpirationDeadline&lt;/tt&gt; in the &lt;tt&gt;add()&lt;/tt&gt; message method, no prune task will be scheduled. Because the &lt;tt&gt;nextExpirationDeadline&lt;/tt&gt; remains &lt;tt&gt;Long.MAX_VALUE&lt;/tt&gt; and &lt;tt&gt;clock.isAfter(nowNanos, nextExpirationDeadline)&lt;/tt&gt; always returns false in the &lt;tt&gt;maybePruneExpired()&lt;/tt&gt; method.&lt;/p&gt;</comment>
                            <comment id="17186105" author="aholmber" created="Thu, 27 Aug 2020 20:44:45 +0000"  >&lt;p&gt;Sorry I wasn&apos;t more precise on the third option. There, I was suggesting that we stop trying to calculate the earliest possible prune, and just make it prune periodically &amp;#8211; say every 10ms. Then there&apos;s no deadline to adjust forward or backward and synchronize relative to new messages coming in &amp;#8211; it&apos;s just a periodic task.&lt;/p&gt;

&lt;p&gt;&amp;gt;Therefore, it seems a special case in the test. It should not harm in production.&lt;br/&gt;
It sound like in this paragraph you&apos;re agreeing with my option #1. If that is the case (and we don&apos;t hear any opposition), when I get back to it I&apos;ll update the test to be robust against this.&lt;/p&gt;</comment>
                            <comment id="17187866" author="yifanc" created="Mon, 31 Aug 2020 17:03:52 +0000"  >&lt;p&gt;Hi Adam. Yes. I agree with option 1. &lt;/p&gt;

&lt;p&gt;IMO, the periodic prune task and the condition to guard entering the actual prune operation is a best effort optimization to reduce the messages in the outbound queue. &lt;br/&gt;
The contention for the lock (between poll and prune) would be increased, if removing the condition. The periodic prune task will try to acquire the lock every time it is triggered (every 100 ms). Prune is an O(&lt;tt&gt;n&lt;/tt&gt;) operation. It could become expensive when the outbound queue is large and block the poll more likely. So having a condition to guard the entry makes sense to me, even though the condition could become inaccurate (, best effort). The exact impact on the queue performance need to be benchmarked. Intuitively, I think having the guard provides benefit. &lt;/p&gt;</comment>
                            <comment id="17188398" author="iamaleksey" created="Tue, 1 Sep 2020 12:14:21 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sbtourist&quot; class=&quot;user-hover&quot; rel=&quot;sbtourist&quot;&gt;sbtourist&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15700&quot; title=&quot;Performance regression on internode messaging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15700&quot;&gt;&lt;del&gt;CASSANDRA-15700&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17193202" author="aholmber" created="Wed, 9 Sep 2020 21:53:49 +0000"  >&lt;p&gt;Thanks for the link Aleksey. &lt;/p&gt;

&lt;p&gt;Returning to this, option #1 seems a bit absurd to me: changing a test to work around a flaw in the thing it was meant to test. I also think this class could benefit from some simplification, but I don&apos;t think we have the appetite to bite off and perf test a change like that at this point (and I think we&apos;ve agreed this particular case is not a danger in a running system). &lt;/p&gt;

&lt;p&gt;Here&apos;s a &lt;a href=&quot;https://github.com/aholmberg/cassandra/pull/4/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;patch&lt;/a&gt;, updated according to Yifan&apos;s input, and augmented to make sure the test will not race with the background pruning, and timeout.&lt;/p&gt;</comment>
                            <comment id="17193813" author="yifanc" created="Thu, 10 Sep 2020 19:33:34 +0000"  >&lt;p&gt;Not seeing the link to the CI run.&lt;/p&gt;

&lt;p&gt;Attaching one: &lt;a href=&quot;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=C-15958&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/yifan-c/cassandra?branch=C-15958&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17193861" author="yifanc" created="Thu, 10 Sep 2020 21:25:44 +0000"  >&lt;p&gt;Unit test and dtest passed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/yifan-c/cassandra/96/workflows/ddf05402-e19d-4a74-a14b-90a105dea475&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.circleci.com/pipelines/github/yifan-c/cassandra/96/workflows/ddf05402-e19d-4a74-a14b-90a105dea475&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;+1 to the patch.&lt;/p&gt;</comment>
                            <comment id="17193902" author="aholmber" created="Thu, 10 Sep 2020 23:26:51 +0000"  >&lt;p&gt;Thanks for kicking that off.&lt;/p&gt;</comment>
                            <comment id="17201511" author="edimitrova" created="Thu, 24 Sep 2020 12:56:32 +0000"  >&lt;p&gt;Is a second reviewer needed?&lt;/p&gt;</comment>
                            <comment id="17207931" author="blerer" created="Mon, 5 Oct 2020 09:06:30 +0000"  >&lt;p&gt;I apparently forgot to put my +1 for the patch.&lt;/p&gt;</comment>
                            <comment id="17207934" author="blerer" created="Mon, 5 Oct 2020 09:10:24 +0000"  >&lt;p&gt;Could not mark the ticket as committed. Will try again once the problem has been fixed.&lt;/p&gt;</comment>
                            <comment id="17209467" author="blerer" created="Wed, 7 Oct 2020 11:02:29 +0000"  >&lt;p&gt;Committed into trunk at ba63fa3c951cb5c18d0fa4f9483577c6e18389c4&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13259322">CASSANDRA-15338</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aholmber]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12990" cascade-level="1"><![CDATA[Test Failure]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12970"><![CDATA[Unit Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0gvs8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[blerer]]></customfieldvalue>
        <customfieldvalue><![CDATA[yifanc]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348281">4.0-alpha1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/ba63fa3c951cb5c18d0fa4f9483577c6e18389c4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/ba63fa3c951cb5c18d0fa4f9483577c6e18389c4&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Ran the test in question hundreds of times. Previously reproducible flakiness did not manifest.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>