<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:08:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13773] cassandra-stress writes even data when n=0</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13773</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;This is very unintuitive as&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cassandra-stress write n=0 -rate threads=1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will do inserts even with &lt;b&gt;n=0&lt;/b&gt;. I guess most people won&apos;t ever run with &lt;b&gt;n=0&lt;/b&gt; but this is a nice shortcut for creating some schema without using &lt;b&gt;cqlsh&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;This is happening because we&apos;re writing &lt;b&gt;50k&lt;/b&gt; rows of warmup data as can be seen below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cqlsh&amp;gt; select count(*) from keyspace1.standard1 ;

 count
-------
 50000

(1 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We can avoid writing warmup data using &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cassandra-stress write n=0 no-warmup -rate threads=1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but I would still expect to have &lt;b&gt;0&lt;/b&gt; rows written when specifying &lt;b&gt;n=0&lt;/b&gt;.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13095404">CASSANDRA-13773</key>
            <summary>cassandra-stress writes even data when n=0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eduard.tudenhoefner">Eduard Tudenhoefner</assignee>
                                    <reporter username="eduard.tudenhoefner">Eduard Tudenhoefner</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Aug 2017 17:01:58 +0000</created>
                <updated>Fri, 15 May 2020 08:04:49 +0000</updated>
                            <resolved>Tue, 22 Aug 2017 01:40:04 +0000</resolved>
                                        <fixVersion>3.0.15</fixVersion>
                    <fixVersion>3.11.1</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Tool/stress</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16130849" author="eduard.tudenhoefner" created="Thu, 17 Aug 2017 17:13:03 +0000"  >&lt;p&gt;Branch: &lt;a href=&quot;https://github.com/nastra/cassandra/tree/CASSANDRA-13773-30&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nastra/cassandra/tree/CASSANDRA-13773-30&lt;/a&gt;&lt;br/&gt;
Test: &lt;a href=&quot;https://circleci.com/gh/nastra/cassandra/12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://circleci.com/gh/nastra/cassandra/12&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16134651" author="stefania" created="Mon, 21 Aug 2017 02:55:04 +0000"  >&lt;p&gt;The patch LGTM however, whilst it doesn&apos;t make sense to perform warmup when n=0, it still changes the behavior seen by the user. Therefore, I am not entirely sure this patch should go into 3.0, any thoughts &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tjake&quot; class=&quot;user-hover&quot; rel=&quot;tjake&quot;&gt;tjake&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Regarding CI, I think what we care is that dtests using cassandra-stress still work, I don&apos;t think cassandra-stress impacts unit tests at all.&lt;/p&gt;</comment>
                            <comment id="16134665" author="stefania" created="Mon, 21 Aug 2017 03:21:41 +0000"  >&lt;p&gt;I&apos;ve started the dtests on our internal CI, if there is a way to run them on CircleCI please launch them and I haven&apos;t set it up yet.&lt;/p&gt;

&lt;p&gt;I&apos;ve tested a bit locally as well, and I think we are better off skipping the command entirely when &lt;tt&gt;n=0&lt;/tt&gt;, not just the warm-up, otherwise &lt;tt&gt;cassandra-stress write n=0&lt;/tt&gt; (with no rate specified) will loop over different rates and sleep for no good reason whatsoever. So I suggest that we create the schema and then exit, see &lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...stef1927:13773-3.0#diff-fd2f2d2364937fcb1c0d73c8314f1418R57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16135250" author="eduard.tudenhoefner" created="Mon, 21 Aug 2017 14:50:52 +0000"  >&lt;p&gt;Skipping the command entirely sgtm&lt;/p&gt;</comment>
                            <comment id="16136137" author="stefania" created="Tue, 22 Aug 2017 01:40:04 +0000"  >&lt;p&gt;dtests looked good as well.&lt;/p&gt;

&lt;p&gt;I don&apos;t think anyone would expect cassandra-stress to write data if n=0, so I&apos;ve committed it to 3.0 as &lt;tt&gt;6a1b1f26b7174e8c9bf86a96514ab626ce2a4117&lt;/tt&gt; and merged into 3.11 and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[eduard.tudenhoefner]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ix0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12340362">3.0.14</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stefania</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefania]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>