<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:22:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2785] should export JAVA variable in the bin/cassandra and use that in the cassandra-env.sh when check for the java version</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2785</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I forgot which jira we add this java -version check in the cassandra-env.sh (for adding jamm to the javaagent), but we should probably use the variable JAVA set in bin/cassandra (will need export) and use $JAVA instead of &quot;java&quot; in the cassandra-env.sh&lt;/p&gt;

&lt;p&gt;In a situation where JAVA_HOME may have been properly set as the Sun&apos;s java but the PATH still have the OpenJDK&apos;s java in front, the check will fail to add the jamm.jar, even though the cassandra jvm is properly started via the Sun&apos;s java.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12510628">CASSANDRA-2785</key>
            <summary>should export JAVA variable in the bin/cassandra and use that in the cassandra-env.sh when check for the java version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thepaul">paul cannon</assignee>
                                    <reporter username="cywjackson">Jackson Chung</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jun 2011 00:59:54 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:57 +0000</updated>
                            <resolved>Sun, 7 Aug 2011 20:12:42 +0000</resolved>
                                        <fixVersion>0.8.4</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13072020" author="thepaul" created="Wed, 27 Jul 2011 21:22:01 +0000"  >&lt;p&gt;patch 0001: Uses $JAVA in cassandra-env.sh instead of relying on $PATH.&lt;/p&gt;

&lt;p&gt;Makes sure that JAVA is appropriately set from bin/cassandra and debian/init.&lt;/p&gt;

&lt;p&gt;Changes debian initscript so that /etc/default/cassandra is sourced &lt;em&gt;before&lt;/em&gt; /etc/cassandra/cassandra-env.sh. I don&apos;t know of anyone using /etc/default/cassandra in such a way that this would be a problem. The change gives users a place to specify their own $JAVA_HOME if they so desire.&lt;/p&gt;</comment>
                            <comment id="13072222" author="urandom" created="Thu, 28 Jul 2011 07:15:46 +0000"  >&lt;p&gt;The -n eval in bin/cassandra needs to be quoted or it&apos;ll read non-zero even when it&apos;s not.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;--- a/bin/cassandra
+++ b/bin/cassandra
@@ -80,7 +80,7 @@ elif [ -r $CASSANDRA_INCLUDE ]; then
 fi
 
 # Use JAVA_HOME if set, otherwise look for java in PATH
-if [ -n $JAVA_HOME ]; then
+if [ -n &quot;$JAVA_HOME&quot; ]; then
     JAVA=$JAVA_HOME/bin/java
 else
     JAVA=java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Aside from that, +1&lt;/p&gt;</comment>
                            <comment id="13072408" author="thepaul" created="Thu, 28 Jul 2011 16:10:20 +0000"  >&lt;p&gt;Doh, I never knew that one. I normally quote everything, but was trying to match style.&lt;/p&gt;

&lt;p&gt;I found a couple other places where we need to quote the argument to test -n.&lt;/p&gt;</comment>
                            <comment id="13072766" author="urandom" created="Fri, 29 Jul 2011 10:30:05 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13072849" author="urandom" created="Fri, 29 Jul 2011 14:40:21 +0000"  >&lt;p&gt;committed; thanks!&lt;/p&gt;</comment>
                            <comment id="13072864" author="hudson" created="Fri, 29 Jul 2011 15:29:10 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #243 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra-0.8/243/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra-0.8/243/&lt;/a&gt;)&lt;br/&gt;
    honor path to java when JAVA_HOME set&lt;/p&gt;

&lt;p&gt;Patch by Paul Cannon; reviewed by eevans for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2785&quot; title=&quot;should export JAVA variable in the bin/cassandra and use that in the cassandra-env.sh when check for the java version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2785&quot;&gt;&lt;del&gt;CASSANDRA-2785&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;eevans : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1152241&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1152241&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/conf/cassandra-env.sh&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/debian/cassandra.postinst&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/debian/init&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/bin/cassandra&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13079450" author="slebresne" created="Thu, 4 Aug 2011 16:31:52 +0000"  >&lt;p&gt;This is causing problems, see &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2992&quot; title=&quot;Cassandra doesn&amp;#39;t start on Red Hat Linux due to hardcoded JAVA_HOME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2992&quot;&gt;&lt;del&gt;CASSANDRA-2992&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I have only reverted this patch on a specific branch so that it doesn&apos;t block 0.8.3 release. However, I have not reverted yet on 0.8 branch (or trunk), so that it could be fixed incrementally.&lt;/p&gt;

&lt;p&gt;As a side note, it would be nice to set the correct fix version and reviewer when marking an issue resolved.&lt;/p&gt;</comment>
                            <comment id="13080484" author="thepaul" created="Sat, 6 Aug 2011 23:04:49 +0000"  >&lt;p&gt;I think this patch is still correct, and that the bug causing the regression was the invalid hard-coding of JAVA_HOME in redhat/cassandra. If the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2992&quot; title=&quot;Cassandra doesn&amp;#39;t start on Red Hat Linux due to hardcoded JAVA_HOME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2992&quot;&gt;&lt;del&gt;CASSANDRA-2992&lt;/del&gt;&lt;/a&gt; is acceptable, this should probably be re-closed as well.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12488029" name="0001-use-JAVA-in-cassandra-env.sh.patch.txt" size="2554" author="thepaul" created="Wed, 27 Jul 2011 21:22:01 +0000"/>
                            <attachment id="12488112" name="0002-fix-usage-of-bash-n-tests.patch.txt" size="1896" author="thepaul" created="Thu, 28 Jul 2011 16:10:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thepaul]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20827</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gdfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93608</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>