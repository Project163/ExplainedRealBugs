<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:55:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9865] Broken vint encoding, at least when interacting with OHCProvider</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9865</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I haven&apos;t investigated this very closely so I only have a slightly hacky way to show the problem, but if you apply the patch attached, you&apos;ll see that the vints serialized and the one deserialized are not the same ones. If you remove the use of vints (as is currently on trunk, but only due to this issue because we do want to use vints), everything works correctly.&lt;/p&gt;

&lt;p&gt;I&apos;m honestly not sure where the problem is, but it sounds like it could be either in &lt;tt&gt;NIODataInputStream&lt;/tt&gt; or in the &lt;tt&gt;OHCProvider&lt;/tt&gt; since it&apos;s used on that test.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12846937">CASSANDRA-9865</key>
            <summary>Broken vint encoding, at least when interacting with OHCProvider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aweisberg">Ariel Weisberg</assignee>
                                    <reporter username="slebresne">Sylvain Lebresne</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jul 2015 16:34:42 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:03 +0000</updated>
                            <resolved>Wed, 29 Jul 2015 17:06:09 +0000</resolved>
                                        <fixVersion>3.0 alpha 1</fixVersion>
                                    <component>Legacy/Local Write-Read Paths</component>
                    <component>Legacy/Streaming and Messaging</component>
                    <component>Local/Compaction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14638511" author="slebresne" created="Thu, 23 Jul 2015 09:01:30 +0000"  >&lt;p&gt;I&apos;ll remark that patches that introduce more use of vints (&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9801&quot; title=&quot;Use vints where it makes sense&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9801&quot;&gt;&lt;del&gt;CASSANDRA-9801&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9828&quot; title=&quot;Minor improvements to RowStats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9828&quot;&gt;&lt;del&gt;CASSANDRA-9828&lt;/del&gt;&lt;/a&gt;) seems to trigger more RowCache test failures (even though they&apos;re not breaking any other serialization and are not touching the cache code specifically). So if there if there is something specific to vints with &lt;tt&gt;OHCProvider&lt;/tt&gt;, I&apos;d definitively start there (ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=snazy&quot; class=&quot;user-hover&quot; rel=&quot;snazy&quot;&gt;snazy&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aweisberg&quot; class=&quot;user-hover&quot; rel=&quot;aweisberg&quot;&gt;aweisberg&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14638593" author="benedict" created="Thu, 23 Jul 2015 10:02:19 +0000"  >&lt;p&gt;There&apos;s a reasonable chance this is caused by the issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aweisberg&quot; class=&quot;user-hover&quot; rel=&quot;aweisberg&quot;&gt;aweisberg&lt;/a&gt; and I discussed yesterday on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9863&quot; title=&quot;NIODataInputStream has problems on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9863&quot;&gt;&lt;del&gt;CASSANDRA-9863&lt;/del&gt;&lt;/a&gt;. So perhaps hold off further investigation until that&apos;s fixed.&lt;/p&gt;</comment>
                            <comment id="14641022" author="jbellis" created="Fri, 24 Jul 2015 20:19:05 +0000"  >&lt;p&gt;Is this still a problem now that 9863 is resolved?&lt;/p&gt;</comment>
                            <comment id="14644763" author="aweisberg" created="Tue, 28 Jul 2015 17:59:18 +0000"  >&lt;p&gt;Yes it&apos;s still a problem. I think the issue is ByteOrder related. The vint code we have doesn&apos;t check to see if the byte order of the buffer is big endian.&lt;/p&gt;

&lt;p&gt;We could&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;assert the buffer is in the right order&lt;/li&gt;
	&lt;li&gt;Throw a runtime exception if the order is wrong&lt;/li&gt;
	&lt;li&gt;change the order of the buffer on enter/exit for vint read/write&lt;/li&gt;
	&lt;li&gt;Do the byte swapping ourselves depending on the order of the buffer&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14646150" author="aweisberg" created="Wed, 29 Jul 2015 14:49:21 +0000"  >&lt;p&gt;Handle arbitrary byte order buffers when reading.&lt;br/&gt;
&lt;a href=&quot;https://github.com/aweisberg/cassandra/commits/79dd912c8d84e954f7db5e07099dc6f8b00ed312&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aweisberg/cassandra/commits/79dd912c8d84e954f7db5e07099dc6f8b00ed312&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14646328" author="benedict" created="Wed, 29 Jul 2015 16:11:21 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14646425" author="iamaleksey" created="Wed, 29 Jul 2015 17:05:55 +0000"  >&lt;p&gt;LGTM as well, and does indeed fix the issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-9707&quot; title=&quot;Serialization Improvements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-9707&quot;&gt;&lt;del&gt;CASSANDRA-9707&lt;/del&gt;&lt;/a&gt;. Committed to trunk as &lt;tt&gt;85c6b2edb82bdc797a47c29a1d4af0ad2739e0f5&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12844987">CASSANDRA-9801</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12746568" name="9865-hacky-test.txt" size="4799" author="slebresne" created="Wed, 22 Jul 2015 16:35:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aweisberg]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hk93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>aleksey</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[aleksey]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>