<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:41:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6378] sstableloader does not support client encryption on Cassandra 2.0</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6378</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We have been testing backup/restore from one ring to another and we recently stumbled upon an issue with sstableloader. When client_enc_enable: true, the exception below is generated. However, when client_enc_enable is set to false, the sstableloader is able to get to the point where it is discovers endpoints, connects to stream data, etc.&lt;/p&gt;

&lt;p&gt;==============BEGIN EXCEPTION==============&lt;br/&gt;
sstableloader --debug -d x.x.x.248,x.x.x.108,x.x.x.113 /tmp/import/keyspace_name/columnfamily_name&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.RuntimeException: Could not retrieve endpoint ranges:&lt;br/&gt;
at org.apache.cassandra.tools.BulkLoader$ExternalClient.init(BulkLoader.java:226)&lt;br/&gt;
at org.apache.cassandra.io.sstable.SSTableLoader.stream(SSTableLoader.java:149)&lt;br/&gt;
at org.apache.cassandra.tools.BulkLoader.main(BulkLoader.java:68)&lt;br/&gt;
Caused by: org.apache.thrift.transport.TTransportException: Frame size (352518400) larger than max length (16384000)!&lt;br/&gt;
at org.apache.thrift.transport.TFramedTransport.readFrame(TFramedTransport.java:137)&lt;br/&gt;
at org.apache.thrift.transport.TFramedTransport.read(TFramedTransport.java:101)&lt;br/&gt;
at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)&lt;br/&gt;
at org.apache.thrift.protocol.TBinaryProtocol.readAll(TBinaryProtocol.java:362)&lt;br/&gt;
at org.apache.thrift.protocol.TBinaryProtocol.readI32(TBinaryProtocol.java:284)&lt;br/&gt;
at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:191)&lt;br/&gt;
at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:69)&lt;br/&gt;
at org.apache.cassandra.thrift.Cassandra$Client.recv_describe_partitioner(Cassandra.java:1292)&lt;br/&gt;
at org.apache.cassandra.thrift.Cassandra$Client.describe_partitioner(Cassandra.java:1280)&lt;br/&gt;
at org.apache.cassandra.tools.BulkLoader$ExternalClient.init(BulkLoader.java:199)&lt;br/&gt;
... 2 more&lt;br/&gt;
==============END EXCEPTION==============&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12680009">CASSANDRA-6378</key>
            <summary>sstableloader does not support client encryption on Cassandra 2.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="samt">Sam Tunnicliffe</assignee>
                                    <reporter username="dlaube">David Laube</reporter>
                        <labels>
                            <label>client</label>
                            <label>encryption</label>
                            <label>ssl</label>
                            <label>sstableloader</label>
                    </labels>
                <created>Tue, 19 Nov 2013 18:44:29 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:59 +0000</updated>
                            <resolved>Thu, 19 Dec 2013 10:02:44 +0000</resolved>
                                        <fixVersion>2.0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13850489" author="beobal" created="Tue, 17 Dec 2013 14:17:28 +0000"  >&lt;p&gt;Updated patch to remove unnecessary exception handling from SSLTransportFactory&lt;/p&gt;</comment>
                            <comment id="13851009" author="jbellis" created="Tue, 17 Dec 2013 22:30:08 +0000"  >&lt;p&gt;Can you review, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mishail&quot; class=&quot;user-hover&quot; rel=&quot;mishail&quot;&gt;mishail&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13851484" author="mishail" created="Wed, 18 Dec 2013 07:42:51 +0000"  >&lt;p&gt;The only minor comment I have is that &lt;tt&gt;opts&lt;/tt&gt; parameter for &lt;tt&gt;org.apache.cassandra.tools.BulkLoader.LoaderOptions.getTransportFactory()&lt;/tt&gt; is never used.&lt;/p&gt;

</comment>
                            <comment id="13851504" author="beobal" created="Wed, 18 Dec 2013 09:01:35 +0000"  >&lt;p&gt;Sorry, missed that when refactoring. Attached updated patch with the extraneous parameter removed.&lt;/p&gt;</comment>
                            <comment id="13852089" author="mishail" created="Wed, 18 Dec 2013 19:51:33 +0000"  >&lt;p&gt;LGTM &lt;/p&gt;</comment>
                            <comment id="13852234" author="jbellis" created="Wed, 18 Dec 2013 22:17:40 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="13852256" author="mshuler" created="Wed, 18 Dec 2013 22:50:28 +0000"  >&lt;p&gt;cassandra-2.0 and trunk both fail to build in the same manner:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;build-project:
     [echo] apache-cassandra: /home/mshuler/git/cassandra/build.xml
    [javac] Compiling 43 source files to /home/mshuler/git/cassandra/build/classes/thrift
    [javac] Note: /home/mshuler/git/cassandra/&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;/thrift/gen-java/org/apache/cassandra/thrift/Cassandra.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
    [javac] Compiling 847 source files to /home/mshuler/git/cassandra/build/classes/main
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/io/util/NativeAllocator.java:22: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac] &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; sun.misc.Unsafe;
    [javac]                ^
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/utils/FastByteComparisons.java:25: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac] &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; sun.misc.Unsafe;
    [javac]                ^
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/io/sstable/IndexSummary.java:20: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac] &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.Closeable;
    [javac]             ^
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/io/util/Memory.java:29: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac]     &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Unsafe unsafe = NativeAllocator.unsafe;
    [javac]                          ^
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/io/util/NativeAllocator.java:26: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac]     &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Unsafe unsafe;
    [javac]                  ^
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/io/util/NativeAllocator.java:31: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac]             Field field = sun.misc.Unsafe.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getDeclaredField(&lt;span class=&quot;code-quote&quot;&gt;&quot;theUnsafe&quot;&lt;/span&gt;);
    [javac]                                   ^
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/io/util/NativeAllocator.java:33: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac]             unsafe = (sun.misc.Unsafe) field.get(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    [javac]                               ^
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:461: error: cannot find symbol
    [javac]             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (transportFactory.supportedOptions().contains(SSLTransportFactory.TRUSTSTORE))
    [javac]                                                              ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:462: error: cannot find symbol
    [javac]                 options.put(SSLTransportFactory.TRUSTSTORE, opts.encOptions.truststore);
    [javac]                             ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:463: error: cannot find symbol
    [javac]             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (transportFactory.supportedOptions().contains(SSLTransportFactory.TRUSTSTORE_PASSWORD))
    [javac]                                                              ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:464: error: cannot find symbol
    [javac]                 options.put(SSLTransportFactory.TRUSTSTORE_PASSWORD, opts.encOptions.truststore_password);
    [javac]                             ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:465: error: cannot find symbol
    [javac]             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (transportFactory.supportedOptions().contains(SSLTransportFactory.PROTOCOL))
    [javac]                                                              ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:466: error: cannot find symbol
    [javac]                 options.put(SSLTransportFactory.PROTOCOL, opts.encOptions.protocol);
    [javac]                             ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:467: error: cannot find symbol
    [javac]             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (transportFactory.supportedOptions().contains(SSLTransportFactory.CIPHER_SUITES))
    [javac]                                                              ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:468: error: cannot find symbol
    [javac]                 options.put(SSLTransportFactory.CIPHER_SUITES, Joiner.on(&lt;span class=&quot;code-quote&quot;&gt;&apos;,&apos;&lt;/span&gt;).join(opts.encOptions.cipher_suites));
    [javac]                             ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:470: error: cannot find symbol
    [javac]             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (transportFactory.supportedOptions().contains(SSLTransportFactory.KEYSTORE)
    [javac]                                                              ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:472: error: cannot find symbol
    [javac]                 options.put(SSLTransportFactory.KEYSTORE, opts.encOptions.keystore);
    [javac]                             ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:473: error: cannot find symbol
    [javac]             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (transportFactory.supportedOptions().contains(SSLTransportFactory.KEYSTORE_PASSWORD)
    [javac]                                                              ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/tools/BulkLoader.java:475: error: cannot find symbol
    [javac]                 options.put(SSLTransportFactory.KEYSTORE_PASSWORD, opts.encOptions.keystore_password);
    [javac]                             ^
    [javac]   symbol:   variable SSLTransportFactory
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoaderOptions
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/utils/FastByteComparisons.java:114: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac]       &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Unsafe theUnsafe;
    [javac]                    ^
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/utils/FastByteComparisons.java:120: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac]         theUnsafe = (Unsafe) AccessController.doPrivileged(
    [javac]                      ^
    [javac] /home/mshuler/git/cassandra/src/java/org/apache/cassandra/utils/FastByteComparisons.java:125: warning: Unsafe is internal proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
    [javac]                   Field f = Unsafe.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getDeclaredField(&lt;span class=&quot;code-quote&quot;&gt;&quot;theUnsafe&quot;&lt;/span&gt;);
    [javac]                             ^
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
    [javac] 12 errors
    [javac] 10 warnings

BUILD FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13852268" author="mishail" created="Wed, 18 Dec 2013 23:01:53 +0000"  >&lt;p&gt;The entire &lt;tt&gt;SSLTransportFactory.java&lt;/tt&gt; is missed in the commit&lt;/p&gt;</comment>
                            <comment id="13852351" author="jbellis" created="Thu, 19 Dec 2013 00:01:54 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="13859078" author="dlaube" created="Mon, 30 Dec 2013 21:00:40 +0000"  >&lt;p&gt;Thanks for all of the hard work and effort everyone put in to get this fixed!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619282" name="0001-CASSANDRA-6387-Add-SSL-support-to-BulkLoader.patch" size="16026" author="samt" created="Wed, 18 Dec 2013 09:01:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1py9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359665</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>mishail</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mishail]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>