<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:15:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1315] ColumnFamilyOutputFormat should use client API objects</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1315</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;ColumnFamilyOutputFormat currently takes IColumns as its input, meaning that users need to understand Cassandra&apos;s internals reasonably well in order to use it, and need to hardcode things like the comparator type and clock type into their MapReduce jobs.&lt;/p&gt;

&lt;p&gt;Instead, CFOutputFormat should take either Thrift or Avro objects, which are familiar interfaces for users.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12470089">CASSANDRA-1315</key>
            <summary>ColumnFamilyOutputFormat should use client API objects</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stuhood">Stu Hood</assignee>
                                    <reporter username="stuhood">Stu Hood</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Jul 2010 18:20:45 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:20 +0000</updated>
                            <resolved>Wed, 25 Aug 2010 20:53:11 +0000</resolved>
                                        <fixVersion>0.7 beta 2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12892435" author="stuhood" created="Mon, 26 Jul 2010 19:49:34 +0000"  >&lt;p&gt;I&apos;ve got a patch for this, but it needs more testing... should get it on here before midweek.&lt;/p&gt;</comment>
                            <comment id="12895868" author="stuhood" created="Thu, 5 Aug 2010 23:16:09 +0000"  >&lt;p&gt;Adding 1322 as a dependency, since both change approximately the same code.&lt;/p&gt;</comment>
                            <comment id="12895869" author="stuhood" created="Thu, 5 Aug 2010 23:17:19 +0000"  >&lt;p&gt;Ports the OutputFormat to Avro objects.&lt;/p&gt;</comment>
                            <comment id="12896325" author="stuhood" created="Sun, 8 Aug 2010 07:07:59 +0000"  >&lt;p&gt;Add 0002 to allow mutations for keys to arrive during separate write calls, rather than clobbering existing keys.&lt;/p&gt;</comment>
                            <comment id="12897896" author="jbellis" created="Thu, 12 Aug 2010 19:08:43 +0000"  >&lt;p&gt;committed 0001&lt;/p&gt;

&lt;p&gt;looks like 0002 brace placement is wrong, seems that the mutationsByKey.put(key, cfMutation) should happen if cfMutation != null as well.  similarly for the step below that.&lt;/p&gt;</comment>
                            <comment id="12897906" author="jbellis" created="Thu, 12 Aug 2010 19:24:17 +0000"  >&lt;p&gt;reverted commit of 0001 after looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1368&quot; title=&quot;Add output support for Hadoop Streaming&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1368&quot;&gt;&lt;del&gt;CASSANDRA-1368&lt;/del&gt;&lt;/a&gt; more.&lt;/p&gt;

&lt;p&gt;I&apos;m less and less convinced that we&apos;re going to move go Avro as our &quot;main&quot; interface, and unless we are, we shouldn&apos;t be adding public dependencies on it.&lt;/p&gt;

&lt;p&gt;I don&apos;t buy the argument that &quot;Hadoop people already know Avro&quot; because there&apos;s basically nothing here that&apos;s a standard Hadoop Avro class, and using a Thrift StreamingMutation class would be much the same as an Avro one.&lt;/p&gt;</comment>
                            <comment id="12898292" author="stuhood" created="Fri, 13 Aug 2010 16:08:13 +0000"  >&lt;p&gt;&amp;gt; and using a Thrift StreamingMutation class would be much the same as an Avro one.&lt;br/&gt;
In order to use Thrift, you would need to generate code for your dynamic language, and then distribute it to all of the nodes in your Hadoop cluster: either as a library that you update for each Cassandra version, or as a JAR&apos;d script dependency. Not the end of the world, I suppose, but more difficult then distributing only the protocol file.&lt;/p&gt;

&lt;p&gt;Having worked with Avro on a few tickets now, I&apos;m willing to get behind it 100% as a replacement for Thrift.&lt;/p&gt;</comment>
                            <comment id="12898441" author="jbellis" created="Fri, 13 Aug 2010 22:14:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;In order to use Thrift, you would need to generate code for your dynamic language, and then distribute it to all of the nodes in your Hadoop cluster: either as a library that you update for each Cassandra version, or as a JAR&apos;d script dependency. Not the end of the world, I suppose, but more difficult then distributing only the protocol file. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How is that different from having to distribute the Avro library for whatever streaming processor language you are using, other than the codegen step?&lt;/p&gt;</comment>
                            <comment id="12898444" author="stuhood" created="Fri, 13 Aug 2010 22:23:57 +0000"  >&lt;p&gt;&amp;gt; other than the codegen step?&lt;br/&gt;
Just the codegen step. If you don&apos;t have root access to your cluster for instance, you would need to JAR the Thrift generated code and then use a relative import to pull it in.&lt;/p&gt;

&lt;p&gt;If the real question we&apos;re debating is whether we are still considering switching Cassandra 100% to Avro before 1.0, then we should probably discuss that elsewhere. When I began this ticket, I was under the impression that that was a sure thing.&lt;/p&gt;</comment>
                            <comment id="12898582" author="hudson" created="Sat, 14 Aug 2010 12:48:34 +0000"  >&lt;p&gt;Integrated in Cassandra #514 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Cassandra/514/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Cassandra/514/&lt;/a&gt;)&lt;br/&gt;
    use Avro objects in ColumnFamilyOutputFormat.  patch by Stu Hood; reviewed by jbellis for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1315&quot; title=&quot;ColumnFamilyOutputFormat should use client API objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-1315&quot;&gt;&lt;del&gt;CASSANDRA-1315&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12899071" author="jbellis" created="Mon, 16 Aug 2010 20:20:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;if the real question we&apos;re debating is whether we are still considering switching Cassandra 100% to Avro before 1.0, then we should probably discuss that elsewhere. When I began this ticket, I was under the impression that that was a sure thing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This has never been a sure thing, and we&apos;re way behind schedule on what we had planned.&lt;/p&gt;

&lt;p&gt;Offering both Thrift and Avro here would be fine, that&apos;s similar to what our migration path to Avro was planned to be like anyway.  But even if we were going to switch 100% to Avro we&apos;re several releases away from where that should be the only interface.&lt;/p&gt;</comment>
                            <comment id="12901452" author="stuhood" created="Mon, 23 Aug 2010 15:43:40 +0000"  >&lt;p&gt;&amp;gt; Offering both Thrift and Avro here would be fine&lt;br/&gt;
Hm, I think I could get behind that... aside from proliferation concerns. We&apos;d be signing up for a ThriftColumnFamilyOutputFormat and an AvroC..F..O..F.., one of which wrapped the other.&lt;/p&gt;</comment>
                            <comment id="12902036" author="stuhood" created="Tue, 24 Aug 2010 19:46:34 +0000"  >&lt;p&gt;Rebase the existing patchset for trunk: I&apos;ll be tackling the Avro/Thrift duality sometime soon, but this isn&apos;t it.&lt;/p&gt;</comment>
                            <comment id="12902627" author="jbellis" created="Wed, 25 Aug 2010 20:53:11 +0000"  >&lt;p&gt;Stu convinced me that due to the direction the Hadoop project is moving, demand for a Thrift api is likely to be low.  Committed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12470987">CASSANDRA-1368</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12470480">CASSANDRA-1342</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12470202">CASSANDRA-1322</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12452959" name="0001-Use-Avro-objects-as-input-to-CFOutputFormat.patch" size="15698" author="stuhood" created="Tue, 24 Aug 2010 19:46:34 +0000"/>
                            <attachment id="12452960" name="0002-Allow-multiple-mutations-per-key-to-arrive-during-in.patch" size="1894" author="stuhood" created="Tue, 24 Aug 2010 19:46:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stuhood]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g4b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92128</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>