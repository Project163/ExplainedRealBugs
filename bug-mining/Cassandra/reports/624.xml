<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:18:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1748] Flush before repair</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1748</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;We don&apos;t currently flush before beginning a validation compaction, meaning that depending on the state of the memtables, we might end up with content on disk that is as different as a single memtable can make it (potentially, very different).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12479991">CASSANDRA-1748</key>
            <summary>Flush before repair</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thobbs">Tom Hobbs</assignee>
                                    <reporter username="stuhood">Stu Hood</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Nov 2010 20:04:12 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:13 +0000</updated>
                            <resolved>Sun, 19 Dec 2010 03:33:33 +0000</resolved>
                                        <fixVersion>0.7.0 rc 3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12971006" author="thobbs" created="Mon, 13 Dec 2010 20:02:25 +0000"  >&lt;p&gt;Attached patch flushes inside of CompactionManager&apos;s doValidationCompaction() so that both the repairing node and its neighbors will flush before building Merkle trees.&lt;/p&gt;</comment>
                            <comment id="12971046" author="stuhood" created="Mon, 13 Dec 2010 21:39:30 +0000"  >&lt;p&gt;This fails to build against trunk, but looks reasonable otherwise.&lt;/p&gt;</comment>
                            <comment id="12971056" author="thobbs" created="Mon, 13 Dec 2010 22:23:28 +0000"  >&lt;p&gt;1748-trunk.txt should apply against trunk.&lt;/p&gt;</comment>
                            <comment id="12971063" author="jbellis" created="Mon, 13 Dec 2010 22:46:39 +0000"  >&lt;p&gt;would switching validation to use range scans be a better solution?  that way you would automatically get everything in the memtables, without having to flush-and-re-scan.&lt;/p&gt;</comment>
                            <comment id="12971500" author="thobbs" created="Wed, 15 Dec 2010 00:44:39 +0000"  >&lt;p&gt;Do you mean something like using CFS.getRangeSlice()?  The main problem I see is you can&apos;t iterate over the rows one-by-one with that in its current state as it returns a List; I&apos;m not familiar with how that works, so I don&apos;t know how easy it would be to make an Iterator version.  Or is there something else you were referring to?&lt;/p&gt;</comment>
                            <comment id="12971504" author="jbellis" created="Wed, 15 Dec 2010 00:51:52 +0000"  >&lt;p&gt;CFS.gRS is a pretty thin layer over RowIterator.&lt;/p&gt;</comment>
                            <comment id="12971509" author="thobbs" created="Wed, 15 Dec 2010 01:01:50 +0000"  >&lt;p&gt;Ah, right, I see that now.  I don&apos;t see why it couldn&apos;t be done, then.  Do you want me to go ahead with that (and open a new ticket)?&lt;/p&gt;</comment>
                            <comment id="12971520" author="stuhood" created="Wed, 15 Dec 2010 01:47:02 +0000"  >&lt;p&gt;&amp;gt; would switching validation to use range scans be a better solution?&lt;br/&gt;
We don&apos;t have a way to send a memtable to another node, so if we included it in what we validate, it might not actually end up being sent to the other node unless it was flushed at some point. So I don&apos;t think doing this would buy us much, and it is a significantly larger change. The goal is really just to repair at a &quot;point in time&quot;, and flushing before repair gives us that, imo.&lt;/p&gt;</comment>
                            <comment id="12972899" author="jbellis" created="Sun, 19 Dec 2010 03:33:33 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="12973087" author="hudson" created="Mon, 20 Dec 2010 04:46:49 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #97 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.7/97/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.7/97/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12466172" name="1748-trunk.txt" size="3607" author="thobbs" created="Mon, 13 Dec 2010 22:23:28 +0000"/>
                            <attachment id="12466166" name="1748.txt" size="2957" author="thobbs" created="Mon, 13 Dec 2010 20:02:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[thobbs]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g75b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92588</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>stuhood</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stuhood]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>