<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:16:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-15262] Update defaults for server and client TLS settings</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-15262</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;The current `server_encryption_options` configuration options are as follows:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;server_encryption_options:
    # set to true for allowing secure incoming connections
    enabled: false
    # If enabled and optional are both set to true, encrypted and unencrypted connections are handled on the storage_port
    optional: false
    # if enabled, will open up an encrypted listening socket on ssl_storage_port. Should be used
    # during upgrade to 4.0; otherwise, set to false.
    enable_legacy_ssl_storage_port: false
    # on outbound connections, determine which type of peers to securely connect to. &apos;enabled&apos; must be set to true.
    internode_encryption: none
    keystore: conf/.keystore
    keystore_password: cassandra
    truststore: conf/.truststore
    truststore_password: cassandra
    # More advanced defaults below:
    # protocol: TLS
    # store_type: JKS
    # cipher_suites: [TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA,TLS_DHE_RSA_WITH_AES_128_CBC_SHA,TLS_DHE_RSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA]
    # require_client_auth: false
    # require_endpoint_verification: false
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A couple of issues here:&lt;br/&gt;
1. optional defaults to false, which will break existing TLS configurations for (from what I can tell) no particularly good reason&lt;br/&gt;
2. The provided protocol and cipher suites are not good ideas (in particular encouraging anyone to use CBC ciphers is a bad plan&lt;/p&gt;

&lt;p&gt;I propose that before the 4.0 cut we fixup server_encryption_options and even client_encryption_options :&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Change the default &lt;tt&gt;optional&lt;/tt&gt; setting to true. As the new Netty code intelligently decides to open a TLS connection or not this is the more sensible default (saves operators a step while transitioning to TLS as well)&lt;/li&gt;
	&lt;li&gt;Update the defaults to what netty actually defaults to&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13249218">CASSANDRA-15262</key>
            <summary>Update defaults for server and client TLS settings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jolynch">Joey Lynch</assignee>
                                    <reporter username="jolynch">Joey Lynch</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Aug 2019 21:59:20 +0000</created>
                <updated>Fri, 10 Oct 2025 08:47:58 +0000</updated>
                            <resolved>Sun, 21 Jun 2020 02:39:07 +0000</resolved>
                                        <fixVersion>4.0-beta1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="16918959" author="jolynch" created="Thu, 29 Aug 2019 21:14:42 +0000"  >&lt;p&gt;This could slip to 4.0-beta if we had to, but it is going to be annoying for folks testing with TLS (it was for us).&lt;/p&gt;</comment>
                            <comment id="17057290" author="aholmber" created="Wed, 11 Mar 2020 18:12:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jolynch&quot; class=&quot;user-hover&quot; rel=&quot;jolynch&quot;&gt;jolynch&lt;/a&gt;&#160;you mentioned having WIP that you might be able to hand off to someone. Will you be able to push that soon?&lt;/p&gt;</comment>
                            <comment id="17061084" author="spmallette" created="Tue, 17 Mar 2020 17:58:10 +0000"  >&lt;p&gt;I took a swipe at this one just given the issue description - i think the following covers &quot;Change the default optional setting to true&quot; though i&apos;m not completely sure there aren&apos;t other spots the change might be required:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...spmallette:15624-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/compare/trunk...spmallette:15624-4.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As for:&lt;/p&gt;

&lt;p&gt;&amp;gt; Update the defaults to what netty actually defaults to&lt;/p&gt;

&lt;p&gt;I wasn&apos;t sure what that referred to - the ciphers or protocols or both/more. It looks like netty (a version on the 4.1.x line slightly ahead of 4.1.37 anyway) has these defaults:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
gremlin&amp;gt; io.netty.handler.ssl.SslContextBuilder.forClient().build().cipherSuites()
==&amp;gt;TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
==&amp;gt;TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
==&amp;gt;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
==&amp;gt;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
==&amp;gt;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
==&amp;gt;TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
==&amp;gt;TLS_RSA_WITH_AES_128_GCM_SHA256
==&amp;gt;TLS_RSA_WITH_AES_128_CBC_SHA
==&amp;gt;TLS_RSA_WITH_AES_256_CBC_SHA
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If any of this on the right path and with a bit more guidance I could probably form this all up into a pull request. Any direction is appreciated!&lt;/p&gt;

</comment>
                            <comment id="17061122" author="jolynch" created="Tue, 17 Mar 2020 19:02:43 +0000"  >&lt;p&gt;Hi, yes I just uploaded my mostly complete patch for this:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/jolynch/cassandra/tree/CASSANDRA-15262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/46347bbeab0a53f9a546346dac685294751e4119&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;46347bbeab0a53f9a546346dac685294751e4119&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://circleci.com/workflow-run/4a67351b-4fb6-4491-9b60-017597be14d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;tests&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Unfortunately the server enabled flag got put a bunch of places in trunk (tools, virtual tables, unit tests, configuration startup checks) so I think the only safe way to remove it from server options is to make the member private and use a proper getter that the subclass overrides. The alternative is to make the member mutable but I&apos;d prefer not to do that).&lt;/p&gt;

&lt;p&gt;I still need to:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Generate local keystores/truststores and verify that various configurations of nodes can start using CCM with multiple datacenters and various values of internode_encryption&lt;/li&gt;
	&lt;li&gt;Update the CHANGES to indicate that the optional default is changing in client_envryption_options (this could be a security vulnerability for existing users)&lt;/li&gt;
	&lt;li&gt;Verify dtests work properly with the changes&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17080596" author="edimitrova" created="Fri, 10 Apr 2020 15:58:14 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jolynch&quot; class=&quot;user-hover&quot; rel=&quot;jolynch&quot;&gt;jolynch&lt;/a&gt;,&lt;br/&gt;
Thanks for the update. Are you still working on this? Should we find anyone else to complete the rest of it if you are overloaded?&lt;/p&gt;</comment>
                            <comment id="17091816" author="edimitrova" created="Fri, 24 Apr 2020 18:29:01 +0000"  >&lt;p&gt;Based on our conversation with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jolynch&quot; class=&quot;user-hover&quot; rel=&quot;jolynch&quot;&gt;jolynch&lt;/a&gt; in Slack, the following scenarios should be confirmed as still working in a ~3 node cluster:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;No TLS certificates, default settings -&amp;gt; cluster works&lt;/li&gt;
	&lt;li&gt;Add TLS certificates to 2/3 nodes, after restart the cluster is healthy (the two with TLS are talking over TLS and the one without TLS is talking plaintext)&lt;/li&gt;
	&lt;li&gt;Add TLS cert to 3/3 nodes, switch optional to false -&amp;gt; cluster healthy&lt;/li&gt;
	&lt;li&gt;Remove TLS cert from 1/3 nodes, restart -&amp;gt; other nodes should not see this node (because TLS is no longer optional)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I will handle this later today or tomorrow.&lt;/p&gt;</comment>
                            <comment id="17092418" author="edimitrova" created="Sat, 25 Apr 2020 23:41:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jolynch&quot; class=&quot;user-hover&quot; rel=&quot;jolynch&quot;&gt;jolynch&lt;/a&gt;, just rebased and tried to start the server before running CI but the following error appears when I try to Start Cassandra:&lt;/p&gt;

&lt;p&gt;*_INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; 2020-04-25 19:35:50,175 YamlConfigurationLoader.java:89 - Configuration location: &lt;a href=&quot;file:/Users/ekaterina.dimitri/CASSANDRA-15262/cassandra/conf/cassandra.yaml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/Users/ekaterina.dimitri/CASSANDRA-15262/cassandra/conf/cassandra.yaml&lt;/a&gt;&lt;br/&gt;
Exception (org.apache.cassandra.exceptions.ConfigurationException) encountered during startup: Invalid yaml: &lt;a href=&quot;file:/Users/ekaterina.dimitri/CASSANDRA-15262/cassandra/conf/cassandra.yaml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/Users/ekaterina.dimitri/CASSANDRA-15262/cassandra/conf/cassandra.yaml&lt;/a&gt;&lt;br/&gt;
 Error: null; Can&apos;t construct a java object for tag:yaml.org,2002:org.apache.cassandra.config.Config; exception=Cannot create property=client_encryption_options for JavaBean=org.apache.cassandra.config.Config@18078bef; Cannot create property=enabled for JavaBean=org.apache.cassandra.config.EncryptionOptions@ee7e1c03; Unable to find property &apos;enabled&apos; on class: org.apache.cassandra.config.EncryptionOptions;  in &apos;reader&apos;, line 10, column 1:&lt;br/&gt;
    cluster_name: &apos;Test Cluster&apos;&lt;br/&gt;
    ^&lt;/p&gt;

&lt;p&gt;That is because we still have it in config but we completely remove it from the yaml. I just saw an old comment where you mention this issue and realized it wasn&apos;t actually fixed on your branch. As you mentioned on Slack that only tests are needed, I was wondering whether you have it already fixed (maybe locally?) or I should take care of the issue?&lt;br/&gt;
I also checked whether we already have the tests as you mentioned on Slack that it might be the case, but looks like there are some tests but not exactly what we need.&lt;/p&gt;
</comment>
                            <comment id="17093869" author="edimitrova" created="Mon, 27 Apr 2020 19:23:08 +0000"  >
&lt;p&gt;Setter added to solve the issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jolynch/cassandra/commits/CASSANDRA-15262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jolynch/cassandra/commit/2eea573e63b3d6505e1d79bf552c9a2867f10f14&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commit&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="17094104" author="edimitrova" created="Tue, 28 Apr 2020 02:55:07 +0000"  >&lt;p&gt;Looks like the tests in sslnodetonode_test.py fail - 5 out of 8 locally. I guess they should be corrected too and it is not the patch but it&apos;s late now.&lt;br/&gt;
I am running now the full CI in CirclCI to get the full picture.  I will proceed tomorrow.&lt;/p&gt;</comment>
                            <comment id="17096003" author="edimitrova" created="Thu, 30 Apr 2020 01:47:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jolynch&quot; class=&quot;user-hover&quot; rel=&quot;jolynch&quot;&gt;jolynch&lt;/a&gt;, I am not sure whether you had the opportunity to look at the failures we talked about last night. &lt;/p&gt;

&lt;p&gt;Update on my end:&lt;br/&gt;
Currently the following two D-tests fail:&lt;br/&gt;
_     &lt;em&gt;native_transport_ssl_test.py::TestNativeTransportSSL::test_connect_to_ssl&lt;/em&gt;&lt;br/&gt;
_     &lt;em&gt;TestNodeToNodeSSLEncryption::test_optional_outbound_tls&lt;/em&gt;&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;native_transport_ssl_test.py::TestNativeTransportSSL::test_connect_to_ssl fails. - &lt;em&gt;client_encryption_options:optional&lt;/em&gt; should be set to_ False_ in &lt;em&gt;native_transport_ssl_test.py::TestNativeTransportSSL::test_connect_to_ssl.&lt;/em&gt;&lt;/li&gt;
	&lt;li&gt;&lt;em&gt;TestNodeToNodeSSLEncryption::test_optional_outbound_tls&lt;/em&gt; fails at the point when we restart node1 with encryption being enabled and plaintext port shutdown. The inbound connection node2 is refused because of &lt;em&gt;InvalidLegacyProtocolMagic: Read 369295616, Expected -900387334&lt;/em&gt;.  Making server_encryption_options:enabled private is not working.&lt;br/&gt;
I double-checked the changes with the private variable and they look correct. This means that there is something more non-trivial? (I am new to this part of the codebase, probably you might know something more to be considered than the public to private change)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I don&apos;t see an issue with the change of optional to default value of True in cassandra.yaml but I suggest if we want to setup &lt;em&gt;server_encryption_options:enabled&lt;/em&gt; to &lt;em&gt;True&lt;/em&gt; as an immutable value, just to leave it commented and if the user tries to change it to false - to reject the change with a warning. We can mark it as Deprecated in the DatabaseDescriptor as other parameters. I tried simply to comment server_encryption_options:enabled in cassandra.yaml and the tests are passing. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jolynch&quot; class=&quot;user-hover&quot; rel=&quot;jolynch&quot;&gt;jolynch&lt;/a&gt;, considering you mentioned there is already a ticket for improvement to land in 4.1 which suggests to split &lt;em&gt;ServerEncryptionOptions&lt;/em&gt; class from &lt;em&gt;EncryptionOptions&lt;/em&gt; class, I would personally leave this patch in the suggested way with minimum changes applied to the code as we are in code freeze. WDYT?&lt;/p&gt;









</comment>
                            <comment id="17096639" author="edimitrova" created="Thu, 30 Apr 2020 15:19:43 +0000"  >&lt;p&gt;I found &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-15146&quot; title=&quot;Transitional TLS server configuration options are overly complex&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-15146&quot;&gt;&lt;del&gt;CASSANDRA-15146&lt;/del&gt;&lt;/a&gt; which is supposed to remove &lt;b&gt;enabled&lt;/b&gt; completely in beta. Is it worth it to keep on digging on this issue then, considering this is the last alpha ticket?&lt;/p&gt;</comment>
                            <comment id="17100511" author="jolynch" created="Wed, 6 May 2020 06:36:36 +0000"  >&lt;p&gt;Got a chance to look at this today, the first test failure was just because the default for client optional switched to true. The second failure was because I was still referencing the enabled logic in the server so we were not entering transitional mode.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Cassandra Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Dtest Branch&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...jolynch:CASSANDRA-15262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;jolynch:CASSANDRA-15262&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/98c0be8789f1a016a1038bf3337c0fbbc8580bd6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;jolynch:CASSANDRA_15262&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Running dtests now.&lt;/p&gt;

&lt;p&gt;I agree let&apos;s get this change just far enough so we can commit it to allow beta testers to not break with the upgrade and we can revisit the naming of optional and internode_encryption_options in 15146 in 4.0-beta.&lt;/p&gt;

&lt;p&gt;I think because we added optional in 4.0 we can rename it to like mode: &amp;lt;off, on, transitional&amp;gt; or something in the beta... We can figure out the naming in 15146.&lt;/p&gt;</comment>
                            <comment id="17101924" author="jolynch" created="Thu, 7 May 2020 18:02:17 +0000"  >&lt;p&gt;Alright CI runs for:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jolynch/cassandra/14/workflows/e8af29fd-1232-43cf-85ad-f7539e16b301&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;, only two unrelated dtest failures.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jolynch/cassandra/16/workflows/e8b14e66-80fd-4574-9acd-9740e44dbd15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2&lt;/a&gt; has some errors, will double check they&apos;re unrelated&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jolynch/cassandra/15/workflows/be9286c2-cb73-4ff2-9db2-394ee2251d6f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt; has some errors, will double check they&apos;re unrelated.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think this patch is ready for review. I&apos;ve put code comments indicating where we need to do more refactoring in the future tickets (specifically splitting these classes and changing the names to be sensible, e.g. require_client_auth is just odd in server options, but let&apos;s defer that work to beta or rc).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=benedict&quot; class=&quot;user-hover&quot; rel=&quot;benedict&quot;&gt;benedict&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt; please let me know if you have any feedback on the patch (and dtest patch) as is.&lt;/p&gt;</comment>
                            <comment id="17101982" author="edimitrova" created="Thu, 7 May 2020 19:06:12 +0000"  >&lt;p&gt;The patch looks good to me. &lt;br/&gt;
On trunk I see two new failures which as per Jenkins were not presented up to now but they don&apos;t look related on high level:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;test_dead_sync_initiator - repair_tests.repair_test.TestRepair&lt;/li&gt;
	&lt;li&gt;test_resume_stopped_build - materialized_views_test.TestMaterializedViews&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; I am lost with 2.2 and 3.0 as I haven&apos;t been working on them for quite some time and I am not acquainted with the current CI issues there. Looks like more of cqlsh unrelated ones?&lt;/p&gt;</comment>
                            <comment id="17102279" author="michaelsembwever" created="Fri, 8 May 2020 05:54:51 +0000"  >&lt;p&gt;ci-cassandra.apache.org run &lt;a href=&quot;https://ci-cassandra.apache.org/blue/organizations/jenkins/Cassandra-devbranch/detail/Cassandra-devbranch/118/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. (I had to specify the dtest branch rather than commit, so the tox commit is included.)&lt;/p&gt;</comment>
                            <comment id="17109708" author="edimitrova" created="Mon, 18 May 2020 00:03:24 +0000"  >&lt;p&gt;I compared the test results with the Jenkins reports.&lt;/p&gt;

&lt;p&gt;test_closing_connections - thrift_hsha_test.TestThriftHSHA is the only test that is failing on 2.2 and 3.0 currently with this patch but not in Jenkins.&lt;/p&gt;

</comment>
                            <comment id="17120299" author="jmckenzie" created="Sat, 30 May 2020 16:22:23 +0000"  >&lt;p&gt;What&apos;s our status here &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jolynch&quot; class=&quot;user-hover&quot; rel=&quot;jolynch&quot;&gt;jolynch&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="17134978" author="jmckenzie" created="Sat, 13 Jun 2020 23:41:26 +0000"  >&lt;p&gt;Spoke w/Joey offline and the plan is to tidy up that one outstanding test issue and merge in.&lt;/p&gt;</comment>
                            <comment id="17135305" author="jolynch" created="Sun, 14 Jun 2020 23:53:07 +0000"  >&lt;p&gt;I didn&apos;t make any server changes on 2.2 or 3.0, I was only running them to check that my dtest change still works with them. If neither native_transport_ssl_test nor sslnodetonode_test fail against 2.2 or 3.0 I think we are good.&lt;/p&gt;

&lt;p&gt;I&apos;ve rebased, cleaned up the patches per the commit guidelines and staged the server and dtest patches for commit:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Repo&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Commit&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Cassandra&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...jolynch:CASSANDRA-15262-final&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA-15262-final&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/08520aa39aa3e884dae2f13652fa98d315371a1e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;08520aa3&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Dtest&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/apache/cassandra-dtest/compare/master...jolynch:CASSANDRA-15262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CASSANDRA_15262&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/jolynch/cassandra-dtest/commit/11ac60df9497c6f9ea277aad42b465117a43b8c8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;11ac60df&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Testing in progress:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jolynch/cassandra/20/workflows/db3d061a-7c5f-4811-bae9-f7469386cc2b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Trunk - Java 8 Tests&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jolynch/cassandra/20/workflows/9d6c3b86-6207-4ead-aa4b-79022fc84182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Trunk - Java 11 Tests&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jolynch/cassandra/21/workflows/c441a44a-9c0b-4035-812b-46385c5ce626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.2 - Tests&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/jolynch/cassandra/22/workflows/10b2afed-cabb-4d4d-a599-4ce3fffac719&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 - Tests&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17135852" author="edimitrova" created="Mon, 15 Jun 2020 13:25:48 +0000"  >&lt;p&gt;Ok, looks like going back and forth I lost track at some point where it is committed.&lt;/p&gt;

&lt;p&gt;Thank you for the patch and the rebase. I just went through the CI runs results. LGTM +1&lt;/p&gt;

&lt;p&gt;I am not a committer, unfortunately.&lt;/p&gt;</comment>
                            <comment id="17141245" author="jolynch" created="Sun, 21 Jun 2020 01:47:10 +0000"  >&lt;p&gt;The dtest failures on trunk appear to me to be unrelated:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;pushed_notifications_test.TestPushedNotifications (reliably failing on all dtest runs)&lt;/li&gt;
	&lt;li&gt;repair_tests.repair_test.TestRepair&lt;/li&gt;
	&lt;li&gt;read_repair_test.TestSpeculativeReadRepair&lt;/li&gt;
	&lt;li&gt;test_cleanup - bootstrap_test.TestBootstrap&lt;/li&gt;
	&lt;li&gt;disk_balance_test.TestDiskBalance&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The java 8 upgrade tests are rather red, but I don&apos;t think those are related either.&lt;/p&gt;

&lt;p&gt;I did not see sslnodetonode_test or native_transport_ssl_test failing in the 2.2 or 3.0 runs.&lt;/p&gt;

&lt;p&gt;Given the +1 and (mostly) green tests, marking this ready to commit.&lt;/p&gt;</comment>
                            <comment id="17141264" author="jolynch" created="Sun, 21 Jun 2020 02:39:07 +0000"  >&lt;p&gt;Committed as &lt;a href=&quot;https://github.com/apache/cassandra/commit/674b6cc1a5e905a9c234c649adaad2de79cfa560&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;674b6cc1&lt;/a&gt; in cassandra and &lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/a0f5523910dcc96f204220e3c5ba24f7be15f37b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a0f55239&lt;/a&gt; in cassandra-dtest.&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=e.dimitrova&quot; class=&quot;user-hover&quot; rel=&quot;e.dimitrova&quot;&gt;e.dimitrova&lt;/a&gt;, apologies for the delays.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13236564">CASSANDRA-15146</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jolynch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12988" cascade-level="1"><![CDATA[API / Semantic Implementation]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12964"><![CDATA[Low Hanging Fruit]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12973"><![CDATA[Performance Regression Test]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05e40:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[benedict]]></customfieldvalue>
        <customfieldvalue><![CDATA[e.dimitrova]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12348281">4.0-alpha1</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/674b6cc1a5e905a9c234c649adaad2de79cfa560&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/674b6cc1a5e905a9c234c649adaad2de79cfa560&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/compare/trunk...jolynch:CASSANDRA-15262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cassandra-dtest/commit/98c0be8789f1a016a1038bf3337c0fbbc8580bd6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/p&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>