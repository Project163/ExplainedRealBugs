<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:12:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-14869] Range.subtractContained produces incorrect results when used on full ring</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-14869</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Currently &lt;tt&gt;Range.subtractContained&lt;/tt&gt; returns incorrect results if minuend range covers full ring and:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;subtrahend range wraps around. For example, &lt;tt&gt;(50, 50] - (10, 100]&lt;/tt&gt; returns {&lt;tt&gt;(50,10], (100,50]&lt;/tt&gt;} instead of &lt;tt&gt;(100,10]&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;subtrahend range covers the full ring as well. For example &lt;tt&gt;(50, 50] - (0, 0]&lt;/tt&gt; returns {&lt;tt&gt;(0,50], (50,0]&lt;/tt&gt;} instead of {&lt;tt&gt;}&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13196753">CASSANDRA-14869</key>
            <summary>Range.subtractContained produces incorrect results when used on full ring</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10000" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Urgent</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Gerrrr">Alex Sorokoumov</assignee>
                                    <reporter username="Gerrrr">Alex Sorokoumov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Nov 2018 07:10:41 +0000</created>
                <updated>Sun, 1 Aug 2021 12:24:51 +0000</updated>
                            <resolved>Mon, 19 Nov 2018 08:03:07 +0000</resolved>
                                        <fixVersion>3.0.18</fixVersion>
                    <fixVersion>3.11.7</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="16677773" author="gerrrr" created="Wed, 7 Nov 2018 07:14:49 +0000"  >&lt;p&gt;Patches:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/Gerrrr/cassandra/tree/14869-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0 &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/Gerrrr/cassandra/tree/14869-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11 &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/Gerrrr/cassandra/tree/14869-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0 &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16683482" author="ifesdjeen" created="Mon, 12 Nov 2018 09:50:34 +0000"  >&lt;p&gt;Several remarks: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I would extract &lt;a href=&quot;https://github.com/Gerrrr/cassandra/commit/f92047ab378062e58d02d7f57e0694ba2e3c90a7#diff-b6aa8cb091f4de56555d650df9db6ca6R282&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this check&lt;/a&gt; to &lt;tt&gt;isFull&lt;/tt&gt; method.&lt;/li&gt;
	&lt;li&gt;if you&apos;re already using &lt;tt&gt;return&lt;/tt&gt; there&apos;s no need for &lt;tt&gt;else if&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Maybe add tests for &lt;tt&gt;subtract&lt;/tt&gt; also not only &lt;tt&gt;subtractAll&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Make sure full range subtraction is covered, like &lt;tt&gt;range(0,0).subtract(range(1,1))&lt;/tt&gt; should be empty&lt;/li&gt;
	&lt;li&gt;Still mention of ArrayList &lt;a href=&quot;https://github.com/Gerrrr/cassandra/commit/f92047ab378062e58d02d7f57e0694ba2e3c90a7#diff-b6aa8cb091f4de56555d650df9db6ca6R277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In summary, there are two cases that are broken right now: subtracting one full range from another &lt;tt&gt;range(0,0).subtract(1,1)&lt;/tt&gt; does not yield an empty range, and subtracting a non-wrapping range from wrapping one: &lt;tt&gt;range(0,0).subtract(-1, 1)&lt;/tt&gt; is yielding two ranges which wrap incorrectly. Even though patch does fix both issues description does not fully elaborate on issue and added if cases might use a small elaboration comment (same as issue description).&lt;/p&gt;</comment>
                            <comment id="16685510" author="gerrrr" created="Tue, 13 Nov 2018 17:32:25 +0000"  >&lt;p&gt;Thanks for the review! I&apos;ve fixed the patches according to your suggestions.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Make sure full range subtraction is covered, like range(0,0).subtract(range(1,1)) should be empty&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I believe this case is covered by &lt;a href=&quot;https://github.com/Gerrrr/cassandra/commit/9e4afefa1dd892a22197c7296ec1d9cd13ad5ae0#diff-5b7f5ad57ef5c28db2566ce381294b0dR404&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;that test&lt;/a&gt;.&lt;/p&gt;


</comment>
                            <comment id="16686251" author="ifesdjeen" created="Wed, 14 Nov 2018 09:30:27 +0000"  >&lt;p&gt;Did you run dtests results for this change across all branches?&lt;/p&gt;</comment>
                            <comment id="16687167" author="jjirsa" created="Wed, 14 Nov 2018 21:43:36 +0000"  >&lt;p&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt;, you could just push it into a branch and run it through circleci just to have a passing dtest link for posterity)&lt;/p&gt;

</comment>
                            <comment id="16688500" author="ifesdjeen" created="Thu, 15 Nov 2018 18:46:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjirsa&quot; class=&quot;user-hover&quot; rel=&quot;jjirsa&quot;&gt;jjirsa&lt;/a&gt; sure; I did trigger tests as I wrote the comment.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; looks like there&apos;s a failure in unit tests: &lt;a href=&quot;https://circleci.com/gh/ifesdjeen/cassandra/782&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://circleci.com/gh/ifesdjeen/cassandra/782&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16689510" author="gerrrr" created="Fri, 16 Nov 2018 14:51:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ifesdjeen&quot; class=&quot;user-hover&quot; rel=&quot;ifesdjeen&quot;&gt;ifesdjeen&lt;/a&gt; Thanks for running the builds! I&apos;ve tested all failing tests locally on &lt;tt&gt;cassandra-3.0&lt;/tt&gt; and &lt;tt&gt;trunk&lt;/tt&gt; right before my commit and they still fail in the same way.&lt;/p&gt;</comment>
                            <comment id="16689954" author="ifesdjeen" created="Fri, 16 Nov 2018 20:08:13 +0000"  >&lt;p&gt;Builds: &lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://circleci.com/workflow-run/dec6ad52-121f-4bd6-92f9-95d52b041ec9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://circleci.com/workflow-run/02340ed3-5b7f-4e8e-a51f-2192cdd93612&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://circleci.com/workflow-run/7de63da3-3977-4ace-aeef-be5430b9bc37&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="16691354" author="ifesdjeen" created="Mon, 19 Nov 2018 08:02:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gerrrr&quot; class=&quot;user-hover&quot; rel=&quot;Gerrrr&quot;&gt;Gerrrr&lt;/a&gt; thank you for the patch!&lt;/p&gt;

&lt;p&gt;Committed to &lt;a href=&quot;https://git1-us-west.apache.org/repos/asf?p=cassandra.git;a=commit;h=c6f822c2a07e0e7c8e4af72523fe62d181c71e56&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt; and merged up to &lt;a href=&quot;https://git1-us-west.apache.org/repos/asf?p=cassandra.git;a=commit;h=78c7d57ebb28ac688cd287d7d8b8f483a99d0135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt; and &lt;a href=&quot;https://git1-us-west.apache.org/repos/asf?p=cassandra.git;a=commit;h=13108037177a30e103a84bca5dadb38d1c090453&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12947191" name="range bug.jpg" size="417366" author="Gerrrr" created="Wed, 7 Nov 2018 07:09:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[Gerrrr]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12982" cascade-level=""><![CDATA[Correctness]]></customfieldvalue>
                                <customfieldvalue key="12988" cascade-level="1"><![CDATA[API / Semantic Implementation]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12966"><![CDATA[Challenging]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s007nk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[ifesdjeen]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12963"><![CDATA[Critical]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333891">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>