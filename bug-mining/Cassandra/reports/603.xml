<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:18:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-1832] mx4j does not load</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-1832</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Adding mx4j-tools.jar (latest) to the library causes following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; WARN 20:22:25,123 Could not start register mbean in JMX
java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.cassandra.utils.Mx4jTool.maybeLoad(Mx4jTool.java:67)
	at org.apache.cassandra.service.AbstractCassandraDaemon.setup(AbstractCassandraDaemon.java:169)
	at org.apache.cassandra.thrift.CassandraDaemon.setup(CassandraDaemon.java:55)
	at org.apache.cassandra.service.AbstractCassandraDaemon.activate(AbstractCassandraDaemon.java:216)
	at org.apache.cassandra.thrift.CassandraDaemon.main(CassandraDaemon.java:134)
Caused by: java.net.BindException: Address already in use
	at java.net.PlainSocketImpl.socketBind(Native Method)
	at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)
	at java.net.ServerSocket.bind(ServerSocket.java:319)
	at java.net.ServerSocket.&amp;lt;init&amp;gt;(ServerSocket.java:185)
	at mx4j.tools.adaptor.PlainAdaptorServerSocketFactory.createServerSocket(PlainAdaptorServerSocketFactory.java:24)
	at mx4j.tools.adaptor.http.HttpAdaptor.createServerSocket(HttpAdaptor.java:672)
	at mx4j.tools.adaptor.http.HttpAdaptor.start(HttpAdaptor.java:478)
	... 9 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;CentOS 5.5&lt;/p&gt;</environment>
        <key id="12492636">CASSANDRA-1832</key>
            <summary>mx4j does not load</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10003" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Low</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rantav">Ran Tavory</assignee>
                                    <reporter username="rstml">Rustam Aliyev</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Dec 2010 16:28:41 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:11 +0000</updated>
                            <resolved>Wed, 8 Dec 2010 01:01:14 +0000</resolved>
                                        <fixVersion>0.7.0 rc 3</fixVersion>
                                    <component>Legacy/Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12968833" author="rstml" created="Tue, 7 Dec 2010 17:24:17 +0000"  >&lt;p&gt;I did a bit more tests and here are some results which might help:&lt;/p&gt;

&lt;p&gt;1. JMX port set to 9090 in cassandra-env.sh&lt;br/&gt;
2. On the machine where another service running on 8080 we get exception above&lt;br/&gt;
3. On the machine where no service running on 8080 we don&apos;t get any exception and MX4J runs on port 9090&lt;/p&gt;

&lt;p&gt;Seems like something checks for port 8080 even though it is configured to run on 9090.&lt;/p&gt;</comment>
                            <comment id="12969018" author="rantav" created="Tue, 7 Dec 2010 21:40:06 +0000"  >&lt;p&gt;I think there&apos;s a confusion. &lt;br/&gt;
There are two ports in business, one is the JMX port (default is 8080) and one is the MX4J port (default 8081)&lt;br/&gt;
If the JMX port is used when cassandra starts you see the following exception, which is different from what&apos;s pasted in this bug report:&lt;/p&gt;

&lt;p&gt;apache-cassandra-0.7.0-rc1 $ bin/cassandra -f &lt;br/&gt;
Error: Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 8080; nested exception is: &lt;br/&gt;
	java.net.BindException: Address already in use&lt;/p&gt;

&lt;p&gt;If mx4j&apos;s port, by default 8081, is used, then you see the report from above, which btw isn&apos;t fatal, the server operates correctly but without mx4j.&lt;/p&gt;

&lt;p&gt;WARN 20:22:25,123 Could not start register mbean in JMX&lt;br/&gt;
java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.cassandra.utils.Mx4jTool.maybeLoad(Mx4jTool.java:67)&lt;br/&gt;
	at org.apache.cassandra.service.AbstractCassandraDaemon.setup(AbstractCassandraDaemon.java:169)&lt;br/&gt;
	at org.apache.cassandra.thrift.CassandraDaemon.setup(CassandraDaemon.java:55)&lt;br/&gt;
	at org.apache.cassandra.service.AbstractCassandraDaemon.activate(AbstractCassandraDaemon.java:216)&lt;br/&gt;
	at org.apache.cassandra.thrift.CassandraDaemon.main(CassandraDaemon.java:134)&lt;br/&gt;
Caused by: java.net.BindException: Address already in use&lt;br/&gt;
	at java.net.PlainSocketImpl.socketBind(Native Method)&lt;br/&gt;
	at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)&lt;br/&gt;
	at java.net.ServerSocket.bind(ServerSocket.java:319)&lt;br/&gt;
	at java.net.ServerSocket.&amp;lt;init&amp;gt;(ServerSocket.java:185)&lt;br/&gt;
	at mx4j.tools.adaptor.PlainAdaptorServerSocketFactory.createServerSocket(PlainAdaptorServerSocketFactory.java:24)&lt;br/&gt;
	at mx4j.tools.adaptor.http.HttpAdaptor.createServerSocket(HttpAdaptor.java:672)&lt;br/&gt;
	at mx4j.tools.adaptor.http.HttpAdaptor.start(HttpAdaptor.java:478)&lt;br/&gt;
	... 9 more&lt;/p&gt;


&lt;p&gt;So the problem in this case. I believe was that mx4j&apos;s port was bound to a different process.&lt;br/&gt;
To control the port used by mx4j use  -Dmx4jport=8082. See &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-1068&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CASSANDRA-1068&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;I think this is not a bug and recommend to close it as such.&lt;br/&gt;
I will, however, attach a patch for trunk to make this more obvious and add -Dmx4jport=8081 to conf/cassandra-env.sh&lt;/p&gt;</comment>
                            <comment id="12969022" author="rantav" created="Tue, 7 Dec 2010 21:48:14 +0000"  >&lt;p&gt;Patch that adds the variables MX4J_ADDRESS and MX4J_PORT to conf/cassandra-env.sh make configuration for mx4j obvious.&lt;/p&gt;</comment>
                            <comment id="12969035" author="rstml" created="Tue, 7 Dec 2010 22:03:09 +0000"  >&lt;p&gt;You right Ran, I checked this machine again and I have another service listening on 8081.&lt;br/&gt;
For some reason I thought that MX4J uses same port.&lt;/p&gt;

&lt;p&gt;With config options we can close it now.&lt;/p&gt;</comment>
                            <comment id="12969109" author="jbellis" created="Wed, 8 Dec 2010 01:01:14 +0000"  >&lt;p&gt;committed, thanks!&lt;/p&gt;</comment>
                            <comment id="12970414" author="hudson" created="Sat, 11 Dec 2010 07:35:18 +0000"  >&lt;p&gt;Integrated in Cassandra-0.7 #70 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Cassandra-0.7/70/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Cassandra-0.7/70/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12465736" name="CASSANDRA-1832.patch" size="905" author="rantav" created="Tue, 7 Dec 2010 21:48:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[rantav]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20332</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0g7on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jbellis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jbellis]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12961"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>