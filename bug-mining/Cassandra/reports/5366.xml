<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:15:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-15595] Many errors of &quot;java.lang.AssertionError: Illegal bounds&quot;</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-15595</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Hi, i&apos;m running cassandra 3.11.6 and getting on all hosts many errors of:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR [ReadStage-6] 2020-02-24 13:53:34,528 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[ReadStage-6,5,main]
java.lang.AssertionError: Illegal bounds [-2102982480..-2102982472); size: 2761628520
        at org.apache.cassandra.io.util.Memory.checkBounds(Memory.java:345) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.Memory.getLong(Memory.java:254) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.compress.CompressionMetadata.chunkFor(CompressionMetadata.java:234) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.CompressedChunkReader$Standard.readChunk(CompressedChunkReader.java:114) ~[apache-cassandra-3.11.6.ja
r:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:158) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:39) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache$BoundedLocalLoadingCache.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$0(BoundedLocalCache.java:2949) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.lambda$doComputeIfAbsent$15(BoundedLocalCache.java:1807) ~[caffeine-2.2.6.jar:na]
        at java.util.concurrent.ConcurrentHashMap.compute(ConcurrentHashMap.java:1853) ~[na:1.8.0-zing_19.12.102.0]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.doComputeIfAbsent(BoundedLocalCache.java:1805) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.computeIfAbsent(BoundedLocalCache.java:1788) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalCache.computeIfAbsent(LocalCache.java:97) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalLoadingCache.get(LocalLoadingCache.java:66) ~[caffeine-2.2.6.jar:na]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:236) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:214) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.reBufferAt(RandomAccessReader.java:65) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.seek(RandomAccessReader.java:207) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.FileHandle.createReader(FileHandle.java:150) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.SSTableReader.getFileDataInput(SSTableReader.java:1807) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.columniterator.AbstractSSTableIterator.&amp;lt;init&amp;gt;(AbstractSSTableIterator.java:103) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.columniterator.SSTableIterator.&amp;lt;init&amp;gt;(SSTableIterator.java:49) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:72) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:65) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.StorageHook$1.makeRowIterator(StorageHook.java:100) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndSSTablesInTimestampOrder(SinglePartitionReadCommand.java:982) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDiskInternal(SinglePartitionReadCommand.java:693) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDisk(SinglePartitionReadCommand.java:670) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryStorage(SinglePartitionReadCommand.java:504) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.ReadCommand.executeLocally(ReadCommand.java:423) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.ReadCommandVerbHandler.doVerb(ReadCommandVerbHandler.java:48) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:66) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0-zing_19.12.102.0]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:165) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:137) [apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:113) [apache-cassandra-3.11.6.jar:3.11.6]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [na:1.8.0-zing_19.12.102.0]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Someone familiar with that error?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13287216">CASSANDRA-15595</key>
            <summary>Many errors of &quot;java.lang.AssertionError: Illegal bounds&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jasonstack">Zhao Yang</assignee>
                                    <reporter username="yakir.g">Yakir Gibraltar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Feb 2020 13:58:29 +0000</created>
                <updated>Fri, 15 May 2020 08:54:18 +0000</updated>
                            <resolved>Mon, 27 Apr 2020 16:24:01 +0000</resolved>
                                        <fixVersion>3.0.21</fixVersion>
                    <fixVersion>3.11.7</fixVersion>
                    <fixVersion>4.0-beta1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Local/Caching</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17043558" author="brandon.williams" created="Mon, 24 Feb 2020 14:19:22 +0000"  >&lt;p&gt;Did this begin after you upgraded?  Also it looks like you&apos;re running Zing, can you confirm?&lt;/p&gt;</comment>
                            <comment id="17043559" author="yakir.g" created="Mon, 24 Feb 2020 14:22:17 +0000"  >&lt;p&gt;The errors was also on 3.11.5, i tried to upgrade and errors exist also on 3.11.6.&lt;br/&gt;
Right, I&apos;m running Zing.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[root@udb001 ~]# rpm -qa | grep zing
zing-jdk1.8.0-19.12.102.0-3.x86_64
zing-zst-8c.3.10.0-5.22.6.0.1.2.el7.x86_64
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17043581" author="yakir.g" created="Mon, 24 Feb 2020 15:00:15 +0000"  >&lt;p&gt;Also update caffeine to 2.8.1 didn&apos;t help.&lt;/p&gt;</comment>
                            <comment id="17043616" author="brandon.williams" created="Mon, 24 Feb 2020 15:37:51 +0000"  >&lt;p&gt;Are you able to try a different JVM on one machine? &lt;/p&gt;</comment>
                            <comment id="17043632" author="yakir.g" created="Mon, 24 Feb 2020 16:00:36 +0000"  >&lt;p&gt;Yes, same issue, getting same errors with jdk 1.8.0_131:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR [ReadStage-42] 2020-02-24 15:58:51,767 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[ReadStage-42,5,main]
java.lang.AssertionError: Illegal bounds [-2049972896..-2049972888); size: 2754497496
	at org.apache.cassandra.io.util.Memory.checkBounds(Memory.java:345) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.io.util.Memory.getLong(Memory.java:254) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.io.compress.CompressionMetadata.chunkFor(CompressionMetadata.java:234) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.io.util.CompressedChunkReader$Standard.readChunk(CompressedChunkReader.java:114) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:158) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:39) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at com.github.benmanes.caffeine.cache.BoundedLocalCache$BoundedLocalLoadingCache.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$0(BoundedLocalCache.java:2949) ~[caffeine-2.2.6.jar:na]
	at com.github.benmanes.caffeine.cache.BoundedLocalCache.lambda$doComputeIfAbsent$15(BoundedLocalCache.java:1807) ~[caffeine-2.2.6.jar:na]
	at java.util.concurrent.ConcurrentHashMap.compute(ConcurrentHashMap.java:1853) ~[na:1.8.0_131]
	at com.github.benmanes.caffeine.cache.BoundedLocalCache.doComputeIfAbsent(BoundedLocalCache.java:1805) ~[caffeine-2.2.6.jar:na]
	at com.github.benmanes.caffeine.cache.BoundedLocalCache.computeIfAbsent(BoundedLocalCache.java:1788) ~[caffeine-2.2.6.jar:na]
	at com.github.benmanes.caffeine.cache.LocalCache.computeIfAbsent(LocalCache.java:97) ~[caffeine-2.2.6.jar:na]
	at com.github.benmanes.caffeine.cache.LocalLoadingCache.get(LocalLoadingCache.java:66) ~[caffeine-2.2.6.jar:na]
	at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:236) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:214) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.io.util.RandomAccessReader.reBufferAt(RandomAccessReader.java:65) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.io.util.RandomAccessReader.seek(RandomAccessReader.java:207) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.io.util.FileHandle.createReader(FileHandle.java:150) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.io.sstable.format.SSTableReader.getFileDataInput(SSTableReader.java:1807) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.db.columniterator.AbstractSSTableIterator.&amp;lt;init&amp;gt;(AbstractSSTableIterator.java:103) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.db.columniterator.SSTableIterator.&amp;lt;init&amp;gt;(SSTableIterator.java:49) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:72) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:65) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.db.StorageHook$1.makeRowIterator(StorageHook.java:100) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndSSTablesInTimestampOrder(SinglePartitionReadCommand.java:982) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDiskInternal(SinglePartitionReadCommand.java:693) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDisk(SinglePartitionReadCommand.java:670) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.db.SinglePartitionReadCommand.queryStorage(SinglePartitionReadCommand.java:504) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.db.ReadCommand.executeLocally(ReadCommand.java:423) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.db.ReadCommandVerbHandler.doVerb(ReadCommandVerbHandler.java:48) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:66) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_131]
	at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:165) ~[apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:137) [apache-cassandra-3.11.5.jar:3.11.5]
	at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:113) [apache-cassandra-3.11.5.jar:3.11.5]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [na:1.8.0_131]
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17043653" author="yakir.g" created="Mon, 24 Feb 2020 16:31:19 +0000"  >&lt;p&gt;Based on: &lt;a href=&quot;https://github.com/ben-manes/caffeine/issues/397#issuecomment-590406804&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ben-manes/caffeine/issues/397#issuecomment-590406804&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&quot;It looks like it&#8217;s trying to read offheap but has an incorrect address offset.&quot;&lt;/p&gt;</comment>
                            <comment id="17044412" author="yakir.g" created="Tue, 25 Feb 2020 12:56:20 +0000"  >&lt;p&gt;Also change: &quot;memtable_allocation_type: heap_buffers&quot; didn&apos;t help.&lt;/p&gt;</comment>
                            <comment id="17044613" author="yakir.g" created="Tue, 25 Feb 2020 16:09:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;do you have idea how to debug that error?&lt;/p&gt;</comment>
                            <comment id="17044617" author="brandon.williams" created="Tue, 25 Feb 2020 16:13:39 +0000"  >&lt;p&gt;Since this is coming from a client query which must be receiving an error, is there any way you can tell which one and perhaps the schema for what it&apos;s querying?  If we can get a simple reproduction that would help a lot.&lt;/p&gt;</comment>
                            <comment id="17044650" author="yakir.g" created="Tue, 25 Feb 2020 16:55:25 +0000"  >&lt;p&gt;Don&apos;t see errors from application side, only from C* side.&lt;/p&gt;

&lt;p&gt;The command the out application running:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT data FROM ud.i_s WHERE user_id=?;
SELECT data FROM ud.i_g WHERE user_id=?;
INSERT INTO ud.i_s (user_id,data) VALUES (?,?) USING TTL 7776000;
INSERT INTO ud.i_g (user_id,data) VALUES (?,?) USING TTL 7776000;&apos; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Our metadata:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE TABLE ud.i_g (
    user_id blob PRIMARY KEY,
    data blob
) WITH bloom_filter_fp_chance = 0.01
    AND caching = {&lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;ALL&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;}
    AND comment = &apos;&apos;
    AND compaction = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.db.compaction.TimeWindowCompactionStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;compaction_window_size&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;15&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;compaction_window_unit&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;DAYS&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;max_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;32&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;min_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;}
    AND compression = {&lt;span class=&quot;code-quote&quot;&gt;&apos;chunk_length_in_kb&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.io.compress.LZ4Compressor&apos;&lt;/span&gt;}
    AND crc_check_chance = 1.0
    AND dclocal_read_repair_chance = 0.0
    AND default_time_to_live = 0
    AND gc_grace_seconds = 0
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;;


CREATE TABLE ud.i_s (
    user_id blob PRIMARY KEY,
    data blob
) WITH bloom_filter_fp_chance = 0.05
    AND caching = {&lt;span class=&quot;code-quote&quot;&gt;&apos;keys&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;ALL&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;rows_per_partition&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;}
    AND comment = &apos;&apos;
    AND compaction = {&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.db.compaction.TimeWindowCompactionStrategy&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;compaction_window_size&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;15&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;compaction_window_unit&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;DAYS&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;max_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;32&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;min_threshold&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;}
    AND compression = {&lt;span class=&quot;code-quote&quot;&gt;&apos;chunk_length_in_kb&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;4&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.cassandra.io.compress.LZ4Compressor&apos;&lt;/span&gt;}
    AND crc_check_chance = 1.0
    AND dclocal_read_repair_chance = 0.0
    AND default_time_to_live = 0
    AND gc_grace_seconds = 0
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = &lt;span class=&quot;code-quote&quot;&gt;&apos;NONE&apos;&lt;/span&gt;; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17044824" author="yakir.g" created="Tue, 25 Feb 2020 20:32:56 +0000"  >&lt;p&gt;Unable to see which specific query causing the error, don&apos;t see errors in client side.&lt;/p&gt;

&lt;p&gt;I see the errors only in C* log.&lt;/p&gt;

&lt;p&gt;I tried to change&#160;slow_query_log_timeout_in_ms to 1 in order to catch all queries and don&apos;t see any problematic query that trigger the error.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;do you have idea how to get more details on the query that cause the error or which debug option can show that?&#160;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="17044947" author="brandon.williams" created="Tue, 25 Feb 2020 22:10:00 +0000"  >&lt;p&gt;You could turn on probabilistic tracing instead of the slow query log to capture all queries.  I&apos;m surprised no clients are seeing an error though.  Are you seeing this exception anywhere else not rooted in SEPWorker?&lt;/p&gt;</comment>
                            <comment id="17045735" author="yakir.g" created="Wed, 26 Feb 2020 17:27:47 +0000"  >&lt;p&gt;I see the errors only in C* logs, example of logs with TRACE:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
TRACE [Native-Transport-Requests-106] 2020-02-26 12:19:47,836 DigestResolver.java:96 - resolve: 0 ms.
TRACE [Native-Transport-Requests-207] 2020-02-26 12:19:47,836 Message.java:685 - Received: QUERY INSERT INTO ud.i_s (user_id,data) VALUES (?,?) USING TTL 7776000;[pageSize = 1000], v=4/v4
TRACE [Native-Transport-Requests-210] 2020-02-26 12:19:47,833 MessagingService.java:942 - /1.2.3.5 sending READ to -946659607@/1.2.3.15
TRACE [Native-Transport-Requests-44] 2020-02-26 12:19:47,834 StorageProxy.java:1352 - Adding FWD message to -946659552@/1.2.3.22
TRACE [Native-Transport-Requests-28] 2020-02-26 12:19:47,836 ReadCallback.java:101 - Blockfor is 2; setting up requests to /1.2.3.3,/1.2.3.14
TRACE [Native-Transport-Requests-118] 2020-02-26 12:19:47,833 ReadCallback.java:101 - Blockfor is 2; setting up requests to /1.2.3.24,/1.2.3.23
TRACE [Native-Transport-Requests-18] 2020-02-26 12:19:47,833 StorageProxy.java:1357 - Sending message to -946659650@/1.2.3.25
TRACE [Native-Transport-Requests-127] 2020-02-26 12:19:47,824 StorageProxy.java:1352 - Adding FWD message to -946659949@/1.2.3.26
TRACE [Native-Transport-Requests-44] 2020-02-26 12:19:47,836 StorageProxy.java:1352 - Adding FWD message to -946659505@/1.2.3.27
TRACE [Native-Transport-Requests-28] 2020-02-26 12:19:47,836 AbstractReadExecutor.java:108 - reading data from /1.2.3.3
TRACE [Native-Transport-Requests-29] 2020-02-26 12:19:47,833 Message.java:704 - Responding: EMPTY RESULT, v=4/v4
TRACE [Native-Transport-Requests-18] 2020-02-26 12:19:47,836 StorageProxy.java:1352 - Adding FWD message to -946659504@/1.2.3.37
TRACE [Native-Transport-Requests-22] 2020-02-26 12:19:47,834 ReadCallback.java:101 - Blockfor is 2; setting up requests to /1.2.3.24,/1.2.3.12
TRACE [Native-Transport-Requests-44] 2020-02-26 12:19:47,836 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946659502@/1.2.3.28
TRACE [Native-Transport-Requests-62] 2020-02-26 12:19:47,833 StorageProxy.java:1357 - Sending message to -946659698@/1.2.3.37
TRACE [MutationStage-87] 2020-02-26 12:19:47,834 MessagingService.java:942 - /1.2.3.5 sending REQUEST_RESPONSE to -946659658@/1.2.3.5
TRACE [Native-Transport-Requests-118] 2020-02-26 12:19:47,836 AbstractReadExecutor.java:108 - reading data from /1.2.3.24
TRACE [Native-Transport-Requests-5] 2020-02-26 12:19:47,834 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946659548@/1.2.3.29
TRACE [Native-Transport-Requests-64] 2020-02-26 12:19:47,833 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946659602@/1.2.3.30
TRACE [Native-Transport-Requests-3] 2020-02-26 12:19:47,833 MessagingService.java:942 - /1.2.3.5 sending READ to -946659600@/1.2.3.17
ERROR [ReadStage-110] 2020-02-26 12:19:47,836 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[ReadStage-110,5,main]
java.lang.AssertionError: Illegal bounds [-1777439288..-1777439280); size: 2761628520
        at org.apache.cassandra.io.util.Memory.checkBounds(Memory.java:345) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.Memory.getLong(Memory.java:254) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.compress.CompressionMetadata.chunkFor(CompressionMetadata.java:234) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.CompressedChunkReader$Standard.readChunk(CompressedChunkReader.java:114) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:158) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:39) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache$BoundedLocalLoadingCache.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$0(BoundedLocalCache.java:2949) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.lambda$doComputeIfAbsent$15(BoundedLocalCache.java:1807) ~[caffeine-2.2.6.jar:na]
        at java.util.concurrent.ConcurrentHashMap.compute(ConcurrentHashMap.java:1853) ~[na:1.8.0-zing_19.12.102.0]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.doComputeIfAbsent(BoundedLocalCache.java:1805) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.computeIfAbsent(BoundedLocalCache.java:1788) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalCache.computeIfAbsent(LocalCache.java:97) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalLoadingCache.get(LocalLoadingCache.java:66) ~[caffeine-2.2.6.jar:na]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:236) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:214) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.reBufferAt(RandomAccessReader.java:65) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.seek(RandomAccessReader.java:207) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.FileHandle.createReader(FileHandle.java:150) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.getPosition(BigTableReader.java:251) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.SSTableReader.getPosition(SSTableReader.java:1586) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:64) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.StorageHook$1.makeRowIterator(StorageHook.java:100) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndSSTablesInTimestampOrder(SinglePartitionReadCommand.java:982) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDiskInternal(SinglePartitionReadCommand.java:693) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDisk(SinglePartitionReadCommand.java:670) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryStorage(SinglePartitionReadCommand.java:504) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.ReadCommand.executeLocally(ReadCommand.java:423) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.service.StorageProxy$LocalReadRunnable.runMayThrow(StorageProxy.java:1874) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:2584) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0-zing_19.12.102.0]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:165) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:137) [apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:113) [apache-cassandra-3.11.6.jar:3.11.6]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [na:1.8.0-zing_19.12.102.0]



TRACE [Native-Transport-Requests-118] 2020-02-26 12:19:47,804 DigestResolver.java:70 - resolving 2 responses
TRACE [Native-Transport-Requests-39] 2020-02-26 12:19:47,803 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946660789@/1.2.3.31
TRACE [Native-Transport-Requests-11] 2020-02-26 12:19:47,804 AbstractReadExecutor.java:108 - reading digest from /1.2.3.12
TRACE [Native-Transport-Requests-81] 2020-02-26 12:19:47,805 Message.java:685 - Received: QUERY SELECT data FROM ud.i_g WHERE user_id=?;[pageSize = 1000], v=4/v4
TRACE [Native-Transport-Requests-34] 2020-02-26 12:19:47,802 StorageProxy.java:1352 - Adding FWD message to -946660827@/1.2.3.8
TRACE [Native-Transport-Requests-53] 2020-02-26 12:19:47,805 AbstractReadExecutor.java:108 - reading data from /1.2.3.15
TRACE [Native-Transport-Requests-6] 2020-02-26 12:19:47,804 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946660724@/1.2.3.9
TRACE [Native-Transport-Requests-41] 2020-02-26 12:19:47,804 StorageProxy.java:1352 - Adding FWD message to -946660725@/1.2.3.10
TRACE [Native-Transport-Requests-39] 2020-02-26 12:19:47,806 StorageProxy.java:1357 - Sending message to -946660789@/1.2.3.31
TRACE [Native-Transport-Requests-20] 2020-02-26 12:19:47,805 StorageProxy.java:1357 - Sending message to -946660731@/1.2.3.32
TRACE [Native-Transport-Requests-118] 2020-02-26 12:19:47,805 DigestResolver.java:96 - resolve: 0 ms.
TRACE [Native-Transport-Requests-81] 2020-02-26 12:19:47,806 QueryProcessor.java:220 - &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; org.apache.cassandra.cql3.statements.SelectStatement@4a8290b3 @CL.LOCAL_QUORUM
TRACE [Native-Transport-Requests-128] 2020-02-26 12:19:47,803 AbstractReadExecutor.java:108 - reading digest from /1.2.3.14
TRACE [Native-Transport-Requests-132] 2020-02-26 12:19:47,798 StorageProxy.java:1352 - Adding FWD message to -946660976@/11.2.3.33
TRACE [Native-Transport-Requests-11] 2020-02-26 12:19:47,806 MessagingService.java:942 - /1.2.3.5 sending READ to -946660674@/1.2.3.12
TRACE [Native-Transport-Requests-59] 2020-02-26 12:19:47,804 StorageProxy.java:1352 - Adding FWD message to -946660723@/1.2.3.34
ERROR [ReadStage-97] 2020-02-26 12:19:47,804 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[ReadStage-97,5,main]
java.lang.AssertionError: Illegal bounds [-1642545424..-1642545416); size: 2761628520
        at org.apache.cassandra.io.util.Memory.checkBounds(Memory.java:345) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.Memory.getLong(Memory.java:254) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.compress.CompressionMetadata.chunkFor(CompressionMetadata.java:234) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.CompressedChunkReader$Standard.readChunk(CompressedChunkReader.java:114) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:158) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:39) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache$BoundedLocalLoadingCache.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$0(BoundedLocalCache.java:2949) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.lambda$doComputeIfAbsent$15(BoundedLocalCache.java:1807) ~[caffeine-2.2.6.jar:na]
        at java.util.concurrent.ConcurrentHashMap.compute(ConcurrentHashMap.java:1853) ~[na:1.8.0-zing_19.12.102.0]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.doComputeIfAbsent(BoundedLocalCache.java:1805) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.computeIfAbsent(BoundedLocalCache.java:1788) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalCache.computeIfAbsent(LocalCache.java:97) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalLoadingCache.get(LocalLoadingCache.java:66) ~[caffeine-2.2.6.jar:na]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:236) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:214) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.reBufferAt(RandomAccessReader.java:65) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.seek(RandomAccessReader.java:207) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.FileHandle.createReader(FileHandle.java:150) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.getPosition(BigTableReader.java:251) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.SSTableReader.getPosition(SSTableReader.java:1586) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:64) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.StorageHook$1.makeRowIterator(StorageHook.java:100) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndSSTablesInTimestampOrder(SinglePartitionReadCommand.java:982) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDiskInternal(SinglePartitionReadCommand.java:693) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDisk(SinglePartitionReadCommand.java:670) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryStorage(SinglePartitionReadCommand.java:504) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.ReadCommand.executeLocally(ReadCommand.java:423) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.service.StorageProxy$LocalReadRunnable.runMayThrow(StorageProxy.java:1874) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:2584) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0-zing_19.12.102.0]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:165) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:137) [apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:113) [apache-cassandra-3.11.6.jar:3.11.6]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [na:1.8.0-zing_19.12.102.0]


TRACE [Native-Transport-Requests-31] 2020-02-26 12:19:47,800 Message.java:685 - Received: QUERY SELECT data FROM ud.i_s WHERE user_id=?;[pageSize = 1000], v=4/v4
TRACE [Native-Transport-Requests-33] 2020-02-26 12:19:47,800 AbstractReadExecutor.java:108 - reading digest from /1.2.3.12
TRACE [Native-Transport-Requests-126] 2020-02-26 12:19:47,799 StorageProxy.java:1352 - Adding FWD message to -946660922@/1.2.3.13
TRACE [Native-Transport-Requests-135] 2020-02-26 12:19:47,799 ReadCallback.java:101 - Blockfor is 2; setting up requests to /1.2.3.5,/1.2.3.14
TRACE [Native-Transport-Requests-44] 2020-02-26 12:19:47,800 DigestResolver.java:70 - resolving 2 responses
TRACE [Native-Transport-Requests-89] 2020-02-26 12:19:47,799 DigestResolver.java:96 - resolve: 0 ms.
TRACE [Native-Transport-Requests-82] 2020-02-26 12:19:47,800 Tracing.java:188 - request complete
TRACE [Native-Transport-Requests-126] 2020-02-26 12:19:47,801 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946660864@/1.2.3.10
TRACE [Native-Transport-Requests-76] 2020-02-26 12:19:47,800 Message.java:685 - Received: QUERY SELECT data FROM ud.i_s WHERE user_id=?;[pageSize = 1000], v=4/v4
TRACE [Native-Transport-Requests-80] 2020-02-26 12:19:47,799 QueryProcessor.java:220 - &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; org.apache.cassandra.cql3.statements.UpdateStatement@75665751 @CL.LOCAL_QUORUM
TRACE [ReadStage-112] 2020-02-26 12:19:47,801 BufferPool.java:124 - Requested buffer size 8.000KiB has been allocated directly due to lack of capacity
TRACE [Native-Transport-Requests-22] 2020-02-26 12:19:47,799 DigestResolver.java:70 - resolving 2 responses
TRACE [Native-Transport-Requests-109] 2020-02-26 12:19:47,798 StorageProxy.java:1352 - Adding FWD message to -946660966@/1.2.3.11
TRACE [Native-Transport-Requests-76] 2020-02-26 12:19:47,801 QueryProcessor.java:220 - &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; org.apache.cassandra.cql3.statements.SelectStatement@23ab710e @CL.LOCAL_QUORUM
TRACE [Native-Transport-Requests-96] 2020-02-26 12:19:47,799 QueryProcessor.java:220 - &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; org.apache.cassandra.cql3.statements.SelectStatement@2ee6e329 @CL.LOCAL_QUORUM
TRACE [Native-Transport-Requests-22] 2020-02-26 12:19:47,801 DigestResolver.java:96 - resolve: 0 ms.
TRACE [Native-Transport-Requests-107] 2020-02-26 12:19:47,798 QueryProcessor.java:220 - &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; org.apache.cassandra.cql3.statements.SelectStatement@1442c147 @CL.LOCAL_QUORUM
TRACE [Native-Transport-Requests-13] 2020-02-26 12:19:47,797 ReadCallback.java:101 - Blockfor is 2; setting up requests to /1.2.3.12,/1.2.3.17
TRACE [Native-Transport-Requests-16] 2020-02-26 12:19:47,798 Message.java:704 - Responding: ROWS [data(ud, i_g), org.apache.cassandra.db.marshal.BytesType]
 | 121083ed7470f3ede4e2703977c2fac20a7f
---, v=4/v4
ERROR [ReadStage-116] 2020-02-26 12:19:47,799 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[ReadStage-116,5,main]
java.lang.AssertionError: Illegal bounds [-1646501592..-1646501584); size: 2761628520
        at org.apache.cassandra.io.util.Memory.checkBounds(Memory.java:345) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.Memory.getLong(Memory.java:254) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.compress.CompressionMetadata.chunkFor(CompressionMetadata.java:234) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.CompressedChunkReader$Standard.readChunk(CompressedChunkReader.java:114) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:158) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:39) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache$BoundedLocalLoadingCache.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$0(BoundedLocalCache.java:2949) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.lambda$doComputeIfAbsent$15(BoundedLocalCache.java:1807) ~[caffeine-2.2.6.jar:na]
        at java.util.concurrent.ConcurrentHashMap.compute(ConcurrentHashMap.java:1853) ~[na:1.8.0-zing_19.12.102.0]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.doComputeIfAbsent(BoundedLocalCache.java:1805) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.computeIfAbsent(BoundedLocalCache.java:1788) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalCache.computeIfAbsent(LocalCache.java:97) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalLoadingCache.get(LocalLoadingCache.java:66) ~[caffeine-2.2.6.jar:na]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:236) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:214) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.reBufferAt(RandomAccessReader.java:65) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.seek(RandomAccessReader.java:207) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.FileHandle.createReader(FileHandle.java:150) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.getPosition(BigTableReader.java:251) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.SSTableReader.getPosition(SSTableReader.java:1586) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:64) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.StorageHook$1.makeRowIterator(StorageHook.java:100) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndSSTablesInTimestampOrder(SinglePartitionReadCommand.java:982) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDiskInternal(SinglePartitionReadCommand.java:693) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDisk(SinglePartitionReadCommand.java:670) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryStorage(SinglePartitionReadCommand.java:504) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.ReadCommand.executeLocally(ReadCommand.java:423) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.service.StorageProxy$LocalReadRunnable.runMayThrow(StorageProxy.java:1874) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:2584) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0-zing_19.12.102.0]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:165) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:137) [apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:113) [apache-cassandra-3.11.6.jar:3.11.6]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [na:1.8.0-zing_19.12.102.0]




TRACE [Native-Transport-Requests-22] 2020-02-26 12:19:47,801 ReadCallback.java:147 - Read: 13 ms.
TRACE [Native-Transport-Requests-57] 2020-02-26 12:19:47,795 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946661060@/1.2.3.4
TRACE [Native-Transport-Requests-22] 2020-02-26 12:19:47,801 Tracing.java:188 - request complete
TRACE [Native-Transport-Requests-96] 2020-02-26 12:19:47,801 ReadCallback.java:101 - Blockfor is 2; setting up requests to /1.2.3.3,/1.2.3.6
TRACE [Native-Transport-Requests-23] 2020-02-26 12:19:47,793 AbstractReadExecutor.java:108 - reading digest from /1.2.3.17
TRACE [Native-Transport-Requests-23] 2020-02-26 12:19:47,793 AbstractReadExecutor.java:108 - reading digest from /1.2.3.17
TRACE [Native-Transport-Requests-85] 2020-02-26 12:19:47,793 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946661140@/1.2.3.7
TRACE [Native-Transport-Requests-4] 2020-02-26 12:19:47,792 DigestResolver.java:70 - resolving 2 responses
TRACE [Native-Transport-Requests-52] 2020-02-26 12:19:47,793 MessagingService.java:942 - /1.2.3.5 sending READ to -946661138@/1.2.3.17
TRACE [PerDiskMemtableFlushWriter_0:1100] 2020-02-26 12:19:47,793 BigTableWriter.java:473 - wrote index entry: org.apache.cassandra.db.RowIndexEntry@18b05153 at 5162975
TRACE [Native-Transport-Requests-22] 2020-02-26 12:19:47,790 AbstractReadExecutor.java:108 - reading data from /1.2.3.15
TRACE [Native-Transport-Requests-64] 2020-02-26 12:19:47,786 AbstractReadExecutor.java:108 - reading data from /1.2.3.14
TRACE [Native-Transport-Requests-58] 2020-02-26 12:19:47,792 AbstractReadExecutor.java:116 - reading data locally
TRACE [Native-Transport-Requests-85] 2020-02-26 12:19:47,793 StorageProxy.java:1357 - Sending message to -946661140@/1.2.3.7
TRACE [Native-Transport-Requests-45] 2020-02-26 12:19:47,792 MessagingService.java:942 - /1.2.3.5 sending READ to -946661199@/1.2.3.3
TRACE [Native-Transport-Requests-49] 2020-02-26 12:19:47,793 StorageProxy.java:1352 - Adding FWD message to -946661142@/1.2.3.8
TRACE [Native-Transport-Requests-44] 2020-02-26 12:19:47,793 Message.java:685 - Received: QUERY SELECT data FROM ud.i_g WHERE user_id=?;[pageSize = 1000], v=4/v4
TRACE [Native-Transport-Requests-73] 2020-02-26 12:19:47,793 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946661143@/1.2.3.16
TRACE [Native-Transport-Requests-105] 2020-02-26 12:19:47,787 StorageProxy.java:1352 - Adding FWD message to -946661340@/1.2.3.35
TRACE [Native-Transport-Requests-22] 2020-02-26 12:19:47,793 MessagingService.java:942 - /1.2.3.5 sending READ to -946661135@/1.2.3.15
TRACE [Native-Transport-Requests-92] 2020-02-26 12:19:47,792 AbstractReadExecutor.java:108 - reading digest from /1.2.3.17
TRACE [Native-Transport-Requests-69] 2020-02-26 12:19:47,793 AbstractReadExecutor.java:108 - reading digest from /1.2.3.4
TRACE [Native-Transport-Requests-58] 2020-02-26 12:19:47,793 AbstractReadExecutor.java:108 - reading digest from /1.2.3.6
TRACE [Native-Transport-Requests-64] 2020-02-26 12:19:47,793 MessagingService.java:942 - /1.2.3.5 sending READ to -946661134@/1.2.3.14
TRACE [Native-Transport-Requests-48] 2020-02-26 12:19:47,793 StorageProxy.java:1357 - Sending message to -946661250@/1.2.3.18
TRACE [Native-Transport-Requests-73] 2020-02-26 12:19:47,793 StorageProxy.java:1357 - Sending message to -946661143@/1.2.3.16
TRACE [Native-Transport-Requests-1] 2020-02-26 12:19:47,792 StorageProxy.java:1352 - Adding FWD message to -946661189@/1.2.3.36
TRACE [Native-Transport-Requests-132] 2020-02-26 12:19:47,787 MessagingService.java:942 - /1.2.3.5 sending MUTATION to -946661332@/1.2.3.19
TRACE [Native-Transport-Requests-103] 2020-02-26 12:19:47,792 AbstractReadExecutor.java:108 - reading digest from /1.2.3.6
TRACE [Native-Transport-Requests-48] 2020-02-26 12:19:47,793 Tracing.java:188 - request complete
TRACE [Native-Transport-Requests-114] 2020-02-26 12:19:47,789 StorageProxy.java:1352 - Adding FWD message to -946661292@/1.2.3.20
TRACE [ReadStage-9] 2020-02-26 12:19:47,784 BufferPool.java:124 - Requested buffer size 4.000KiB has been allocated directly due to lack of capacity
TRACE [Native-Transport-Requests-73] 2020-02-26 12:19:47,793 StorageProxy.java:1352 - Adding FWD message to -946661127@/1.2.3.21
ERROR [ReadStage-67] 2020-02-26 12:19:47,790 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[ReadStage-67,10,main]
java.lang.AssertionError: Illegal bounds [-2109842656..-2109842648); size: 2761628520
        at org.apache.cassandra.io.util.Memory.checkBounds(Memory.java:345) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.Memory.getLong(Memory.java:254) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.compress.CompressionMetadata.chunkFor(CompressionMetadata.java:234) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.CompressedChunkReader$Standard.readChunk(CompressedChunkReader.java:114) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:158) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache.load(ChunkCache.java:39) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache$BoundedLocalLoadingCache.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$0(BoundedLocalCache.java:2949) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.lambda$doComputeIfAbsent$15(BoundedLocalCache.java:1807) ~[caffeine-2.2.6.jar:na]
        at java.util.concurrent.ConcurrentHashMap.compute(ConcurrentHashMap.java:1853) ~[na:1.8.0-zing_19.12.102.0]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.doComputeIfAbsent(BoundedLocalCache.java:1805) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.BoundedLocalCache.computeIfAbsent(BoundedLocalCache.java:1788) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalCache.computeIfAbsent(LocalCache.java:97) ~[caffeine-2.2.6.jar:na]
        at com.github.benmanes.caffeine.cache.LocalLoadingCache.get(LocalLoadingCache.java:66) ~[caffeine-2.2.6.jar:na]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:236) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.cache.ChunkCache$CachingRebufferer.rebuffer(ChunkCache.java:214) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.reBufferAt(RandomAccessReader.java:65) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.RandomAccessReader.seek(RandomAccessReader.java:207) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.util.FileHandle.createReader(FileHandle.java:150) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.getPosition(BigTableReader.java:251) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.SSTableReader.getPosition(SSTableReader.java:1586) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.io.sstable.format.big.BigTableReader.iterator(BigTableReader.java:64) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.StorageHook$1.makeRowIterator(StorageHook.java:100) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndSSTablesInTimestampOrder(SinglePartitionReadCommand.java:982) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDiskInternal(SinglePartitionReadCommand.java:693) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryMemtableAndDisk(SinglePartitionReadCommand.java:670) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.SinglePartitionReadCommand.queryStorage(SinglePartitionReadCommand.java:504) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.db.ReadCommand.executeLocally(ReadCommand.java:423) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.service.StorageProxy$LocalReadRunnable.runMayThrow(StorageProxy.java:1874) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:2584) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0-zing_19.12.102.0]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:165) ~[apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:137) [apache-cassandra-3.11.6.jar:3.11.6]
        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:113) [apache-cassandra-3.11.6.jar:3.11.6]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [na:1.8.0-zing_19.12.102.0]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17045772" author="brandon.williams" created="Wed, 26 Feb 2020 18:06:50 +0000"  >&lt;p&gt;I didn&apos;t mean TRACE, but probabilistic tracing, as in `nodetool settraceprobability` to capture the queries.&lt;/p&gt;</comment>
                            <comment id="17054938" author="roy.b" created="Mon, 9 Mar 2020 13:09:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;- can you direct us what info you need in order to debug this issue ?&lt;/p&gt;</comment>
                            <comment id="17054939" author="roy.b" created="Mon, 9 Mar 2020 13:09:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;- can you direct us what info you need in order to debug this issue ?&lt;/p&gt;</comment>
                            <comment id="17056550" author="brandon.williams" created="Wed, 11 Mar 2020 00:35:56 +0000"  >&lt;p&gt;If you can provide a simple reproduction, that will go a long way.  Currently I&apos;m not able to reproduce and none of the tests are encountering it.&lt;/p&gt;</comment>
                            <comment id="17090041" author="piotr rybicki" created="Wed, 22 Apr 2020 21:03:11 +0000"  >&lt;p&gt;I can confirm this error is happening on given C* version.&lt;/p&gt;

&lt;p&gt;In my case, it is happening only on 1 node, and looks not really conencted with queries that error-out&lt;/p&gt;

&lt;p&gt;java.lang.AssertionError: Illegal bounds [-1898968624..-1898968616); size: 2951323200 (...)&lt;/p&gt;

&lt;p&gt;Size is always the same. Bounds are always different and always negative. Difference is always 8&lt;/p&gt;

&lt;p&gt;Isn&apos;t it about that those values are negative?&lt;br/&gt;
 &lt;a href=&quot;https://github.com/apache/cassandra/blob/cassandra-3.11.6/src/java/org/apache/cassandra/io/util/Memory.java#L345&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/blob/cassandra-3.11.6/src/java/org/apache/cassandra/io/util/Memory.java#L345&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17090043" author="piotr rybicki" created="Wed, 22 Apr 2020 21:11:59 +0000"  >&lt;p&gt;$ java -version&lt;br/&gt;
openjdk version &quot;1.8.0_242&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 1.8.0_242-8u242-b08-0ubuntu3~18.04-b08)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 25.242-b08, mixed mode)&lt;/p&gt;

&lt;p&gt;^^^ on all C* nodes. Yet just 1 node started to spit those Illegal bounds assertions errors in log.&lt;/p&gt;</comment>
                            <comment id="17092805" author="jasonstack" created="Sun, 26 Apr 2020 17:57:16 +0000"  >&lt;p&gt;patch:&#160;&lt;a href=&quot;https://github.com/jasonstack/cassandra/commits/CASSANDRA-15595-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt; | &lt;a href=&quot;https://github.com/jasonstack/cassandra/commits/CASSANDRA-15595-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt; | &lt;a href=&quot;https://github.com/jasonstack/cassandra/commits/CASSANDRA-15595-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
Assuming primary index is not corrupted, the error should be caused by chunk index INT overflow on a large sstable with small compression chunk length (4kb as shown in the schema).&lt;/p&gt;

&lt;p&gt;The patch changes chunk index &quot;idx&quot;  from INT to LONG and added an unit test to reproduce the error.&lt;/p&gt;

&lt;p&gt;Also added fix version &quot;4.0-beta&quot;, because it&apos;s more likely to hit this error in 4.0 which reduces compression chunk length from 64k to 16k.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17093216" author="piotr rybicki" created="Mon, 27 Apr 2020 08:58:31 +0000"  >&lt;p&gt;Thanks. Checking that.&lt;/p&gt;

&lt;p&gt;That indeed has to be the reason.&lt;br/&gt;
I&apos;m also on 4K compression chunk length. Also this problematic node has huge (5TB) data on just 1 storage there. Other nodes have many smaller disks, and does not produce those &quot;Illegal bounds&quot; errors.&lt;/p&gt;

&lt;p&gt;Will let U know shortly, if that patch fixes problem for me.&lt;/p&gt;</comment>
                            <comment id="17093479" author="piotr rybicki" created="Mon, 27 Apr 2020 12:54:29 +0000"  >&lt;p&gt;Ok, I confirm, that this patch solves my &apos;Illegal bounds&apos; problem on C* 3.11.6&lt;/p&gt;

&lt;p&gt;Thank You!&lt;/p&gt;</comment>
                            <comment id="17093559" author="jasonstack" created="Mon, 27 Apr 2020 14:18:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt; do you mind reviewing?&lt;/p&gt;</comment>
                            <comment id="17093701" author="brandon.williams" created="Mon, 27 Apr 2020 16:24:01 +0000"  >&lt;p&gt;Committed, thanks!&lt;/p&gt;</comment>
                            <comment id="17093717" author="jasonstack" created="Mon, 27 Apr 2020 16:35:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;thanks for the review&lt;/p&gt;</comment>
                            <comment id="17094204" author="yakir.g" created="Tue, 28 Apr 2020 06:52:41 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jasonstack]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12984" cascade-level=""><![CDATA[Degradation]]></customfieldvalue>
                                <customfieldvalue key="12998" cascade-level="1"><![CDATA[Other Exception]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13082"><![CDATA[Linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0btog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12333891">3.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/4886968c4e973488df4f2da480785beff09b562b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/4886968c4e973488df4f2da480785beff09b562b&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Added unit test to reproduce.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;CI for trunk:&#160;&lt;a href=&quot;https://circleci.com/workflow-run/1d30e8e9-8f9e-4b34-be22-e94b7c508561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://circleci.com/workflow-run/1d30e8e9-8f9e-4b34-be22-e94b7c508561&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>