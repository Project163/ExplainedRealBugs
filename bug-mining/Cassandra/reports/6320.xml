<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:28:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-18854] Gossip never recovers from a single failed echo</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-18854</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;As discovered on &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18792&quot; title=&quot;Test failure: transient_replication_ring_test.py::TestTransientReplicationRing::test_move_forwards_between_and_cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18792&quot;&gt;&lt;del&gt;CASSANDRA-18792&lt;/del&gt;&lt;/a&gt;, if an initial echo request is lost, the node will never be marked up.  This appears to be a regression caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18543&quot; title=&quot;Waiting for gossip to settle does not wait for live endpoints&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18543&quot;&gt;&lt;del&gt;CASSANDRA-18543&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13550830">CASSANDRA-18854</key>
            <summary>Gossip never recovers from a single failed echo</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="brandon.williams">Brandon Williams</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Sep 2023 10:58:29 +0000</created>
                <updated>Wed, 1 Nov 2023 08:54:52 +0000</updated>
                            <resolved>Fri, 15 Sep 2023 17:32:28 +0000</resolved>
                                        <fixVersion>3.11.17</fixVersion>
                    <fixVersion>4.0.12</fixVersion>
                    <fixVersion>4.1.4</fixVersion>
                    <fixVersion>5.0-alpha2</fixVersion>
                    <fixVersion>5.0</fixVersion>
                    <fixVersion>5.1</fixVersion>
                                    <component>Cluster/Gossip</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17765557" author="brandon.williams" created="Fri, 15 Sep 2023 11:01:31 +0000"  >&lt;p&gt;We should revert &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18543&quot; title=&quot;Waiting for gossip to settle does not wait for live endpoints&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18543&quot;&gt;&lt;del&gt;CASSANDRA-18543&lt;/del&gt;&lt;/a&gt; until we have tests to prove it out and ensure that it is not regressing.&lt;/p&gt;</comment>
                            <comment id="17765645" author="brandon.williams" created="Fri, 15 Sep 2023 13:53:48 +0000"  >&lt;p&gt;We can retain the properties that were added and just revert the actual logic changes, which I&apos;ve done here:&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;CI&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18854-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.11&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1279/workflows/6d274f86-e912-4143-9e05-e8b6d18d93bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18854-4.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1297/workflows/a23f390f-d10a-4597-8e18-407d566f483d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1297/workflows/39527a61-6b38-4437-8960-e8068b7fa0f4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18854-4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;4.1&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1295/workflows/e9ea83e2-e0d9-445d-bcbd-14602a1ca1a2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j8&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1295/workflows/b63c0078-4359-4942-92d2-5aacddc53666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18854-5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.0&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1294/workflows/04464235-3bcf-433e-ae81-206aa2c9c874&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1294/workflows/b0cc8c9c-e433-480c-8b60-fb4a05c31fd9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/driftx/cassandra/tree/CASSANDRA-18854-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trunk&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1296/workflows/361dc372-7760-4815-acd3-7e9ef85dd54a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j11&lt;/a&gt;, &lt;a href=&quot;https://app.circleci.com/pipelines/github/driftx/cassandra/1296/workflows/337e8a99-5cd0-4b69-8eea-5b4c8cae6979&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;j17&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17765719" author="dcapwell" created="Fri, 15 Sep 2023 16:34:55 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17765725" author="dcapwell" created="Fri, 15 Sep 2023 16:44:58 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18816&quot; title=&quot;Add support for repair coordinator to retry messages that timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18816&quot;&gt;&lt;del&gt;CASSANDRA-18816&lt;/del&gt;&lt;/a&gt; I made repair coordination unit testable for simulation, it would be nice to see the same happen for gossip... once that is in it should be ~5-10m to get Gossip 100% deterministic in tests and can simulate large clusters easily...&lt;/p&gt;</comment>
                            <comment id="17765726" author="brandon.williams" created="Fri, 15 Sep 2023 16:47:11 +0000"  >&lt;p&gt;Nice!  That will be very useful.  Thanks for the review, will begin committing once CI finishes.&lt;/p&gt;</comment>
                            <comment id="17765744" author="brandon.williams" created="Fri, 15 Sep 2023 17:32:28 +0000"  >&lt;p&gt;All failures are known, committed.&lt;/p&gt;</comment>
                            <comment id="17766168" author="cam1982" created="Sun, 17 Sep 2023 23:10:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18543&quot; title=&quot;Waiting for gossip to settle does not wait for live endpoints&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18543&quot;&gt;&lt;del&gt;CASSANDRA-18543&lt;/del&gt;&lt;/a&gt; changed how echo requests are handled (as there a lot of duplicates and on large clusters this results in a spam in logs and a lot of tasks onto gossip stage) in addition to the fix for waiting for live endpoints in waitToSettle. At the very least does the change to `waitToSettle` need to be reverted here?&lt;/p&gt;</comment>
                            <comment id="17766265" author="cam1982" created="Mon, 18 Sep 2023 08:22:04 +0000"  >&lt;p&gt;&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13062980/13062980_echo.log&quot; title=&quot;echo.log attached to CASSANDRA-18854&quot;&gt;echo.log&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;i added some logging and I disable networking between two nodes. And then once I re-enable the network it reconnected. So not sure why it breaking those tests. Having said this pre/post those changes there is not retry logic on failed ECHO messages. Pre these changes (and as soon in the logs where it skipped) multiple ECHO messages are sent out. So that probably why the tests work pre these changes as there more ECHOs.&lt;/p&gt;</comment>
                            <comment id="17766372" author="brandon.williams" created="Mon, 18 Sep 2023 13:08:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;does the change to `waitToSettle` need to be reverted here?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Given that this regression could have easily been missed or dismissed as simply being environmental noise causing ~1% timeouts, the safest thing to do is revert the entire commit in case there have been more hard to spot bugs introduced.&lt;/p&gt;</comment>
                            <comment id="17766620" author="cam1982" created="Tue, 19 Sep 2023 01:59:20 +0000"  >&lt;p&gt;Since this ticket is resolved and the changes been reverted, I have created&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18866&quot; title=&quot;Node sends multiple inflight echos&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18866&quot;&gt;CASSANDRA-18866&lt;/a&gt; as followup to this one to discuss the regressions caused by the reverted change. As the change was to resolve the issue of multiple inflight ECHOs and we should still aim to improve that in my opinion. Where as the wait to settle already as followup ticket&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-18845&quot; title=&quot;Waiting for gossip to settle on live endpoints&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-18845&quot;&gt;CASSANDRA-18845&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13062980" name="echo.log" size="9158" author="cam1982" created="Mon, 18 Sep 2023 08:19:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313825" key="com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect">
                        <customfieldname>Bug Category</customfieldname>
                        <customfieldvalues>
                                                    <customfieldvalue key="12984" cascade-level=""><![CDATA[Degradation]]></customfieldvalue>
                                <customfieldvalue key="12997" cascade-level="1"><![CDATA[Performance Bug/Regression]]></customfieldvalue>
            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313822" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Discovered By</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12969"><![CDATA[User Report]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kdvk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[dcapwell]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12353200">3.11.16</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/edf22ed776d36112c165c6858dd4866b754ecf34&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/edf22ed776d36112c165c6858dd4866b754ecf34&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;existing&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>