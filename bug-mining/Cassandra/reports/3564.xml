<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:53:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-9405] AssertionError: Data component is missing</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-9405</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;In a &lt;a href=&quot;http://cassci.datastax.com/job/trunk_dtest/135/testReport/counter_tests/TestCounters/upgrade_test/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;counter dtest&lt;/a&gt; that drains and restarts nodes several times, we&apos;re occasionally seeing errors in the logs after restarting like the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR [SSTableBatchOpen:2] 2015-05-15 16:54:41,087 DebuggableThreadPoolExecutor.java:242 - Error in ThreadPoolExecutor
java.lang.AssertionError: Data component is missing for sstable/tmp/dtest-r8mRyB/test/node2/data/system/sstable_activity-5a1ff267ace03f128563cfae6103c65e/la-5-big
    at org.apache.cassandra.io.sstable.format.SSTableReader.open(SSTableReader.java:414) ~[main/:na]
    at org.apache.cassandra.io.sstable.format.SSTableReader.open(SSTableReader.java:346) ~[main/:na]
    at org.apache.cassandra.io.sstable.format.SSTableReader$4.run(SSTableReader.java:476) ~[main/:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) ~[na:1.7.0_76]
    at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[na:1.7.0_76]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) ~[na:1.7.0_76]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_76]
    at java.lang.Thread.run(Thread.java:745) [na:1.7.0_76]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking at the node&apos;s logs (attached), the &lt;tt&gt;sstable_activity&lt;/tt&gt; table started a compaction just prior to the node being drained, and &lt;tt&gt;la-5-big&lt;/tt&gt; is probably the partial compaction result.&lt;/p&gt;

&lt;p&gt;I set the fix version as 2.2, but the problem may exist in earlier C* versions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12830295">CASSANDRA-9405</key>
            <summary>AssertionError: Data component is missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marcuse">Marcus Eriksson</assignee>
                                    <reporter username="thobbs">Tom Hobbs</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 May 2015 20:23:59 +0000</created>
                <updated>Tue, 16 Apr 2019 09:31:10 +0000</updated>
                            <resolved>Mon, 18 May 2015 13:17:47 +0000</resolved>
                                        <fixVersion>2.2.0 beta 1</fixVersion>
                    <fixVersion>3.0 alpha 1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14547611" author="krummas" created="Mon, 18 May 2015 06:49:22 +0000"  >&lt;p&gt;Looks like this is due to the fact that we open the system keyspace before scrubbing the directory. Introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8049&quot; title=&quot;Explicitly examine current C* state on startup to detect incompatibilities before upgrade&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8049&quot;&gt;&lt;del&gt;CASSANDRA-8049&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14547752" author="beobal" created="Mon, 18 May 2015 09:03:13 +0000"  >&lt;p&gt;+1 opening the keyspace before scrubbing is unnecessary &amp;amp; looks like a leftover from some refactoring during &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8049&quot; title=&quot;Explicitly examine current C* state on startup to detect incompatibilities before upgrade&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8049&quot;&gt;&lt;del&gt;CASSANDRA-8049&lt;/del&gt;&lt;/a&gt; dev  (and as such it won&apos;t affect earlier versions). &lt;/p&gt;</comment>
                            <comment id="14547973" author="krummas" created="Mon, 18 May 2015 13:17:47 +0000"  >&lt;p&gt;the dtest looks good as well:&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9405-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/view/Dev/view/krummas/job/krummas-marcuse-9405-dtest/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12733461" name="0001-don-t-open-system-ks-before-scrubbing-the-data-direc.patch" size="1220" author="marcuse" created="Mon, 18 May 2015 06:49:36 +0000"/>
                            <attachment id="12733243" name="node2.log" size="201506" author="thobbs" created="Fri, 15 May 2015 20:24:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[marcuse]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2eszr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>samt</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[samt]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>