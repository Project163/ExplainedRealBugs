<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:41:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-6190] Cassandra 2.0 won&apos;t start up with Java 7u40 with Client JVM.  (works on Server JVM, and both JVMs 7u25)</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-6190</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;Java 7u40 on some platforms do not recognize the the -XX:+UseCondCardMark JVM option.  7u40 on Macintosh works correctly,  If I use the tarball 7u40 version of 7, we encounter the error below. I tried 7u25 (the previous release) and it functioned correctly.&lt;/p&gt;

&lt;p&gt;ubuntu@ubuntu:~$ Unrecognized VM option &apos;UseCondCardMark&apos;&lt;br/&gt;
Error: Could not create the Java Virtual Machine.&lt;br/&gt;
Error: A fatal exception has occurred. Program will exit.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Ubuntu 13.04 32- and 64-bit  JDK 7u40  (tried JRE 7u25)&lt;/p&gt;</environment>
        <key id="12673612">CASSANDRA-6190</key>
            <summary>Cassandra 2.0 won&apos;t start up with Java 7u40 with Client JVM.  (works on Server JVM, and both JVMs 7u25)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brandon.williams">Brandon Williams</assignee>
                                    <reporter username="slowenthal">Steven Lowenthal</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Oct 2013 17:30:11 +0000</created>
                <updated>Tue, 16 Apr 2019 09:32:03 +0000</updated>
                            <resolved>Fri, 25 Oct 2013 20:30:17 +0000</resolved>
                                        <fixVersion>1.2.14</fixVersion>
                    <fixVersion>2.0.3</fixVersion>
                                    <component>Local/Config</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13793725" author="jbellis" created="Sun, 13 Oct 2013 17:39:16 +0000"  >&lt;p&gt;So 7u40 doesn&apos;t work on Ubuntu, but does work on OS X?&lt;/p&gt;

&lt;p&gt;Is this Oracle JDK or OpenJDK?&lt;/p&gt;</comment>
                            <comment id="13793729" author="brandon.williams" created="Sun, 13 Oct 2013 17:57:28 +0000"  >&lt;p&gt;Oracle 7u40 runs just fine on Debian, I can&apos;t imagine it wouldn&apos;t work on Ubuntu.&lt;/p&gt;</comment>
                            <comment id="13793731" author="slowenthal" created="Sun, 13 Oct 2013 17:59:54 +0000"  >&lt;p&gt;This is Oracle JDK.   It works on OSX.  I checked system.log and jconsole on mac to ensure that it&apos;s picked up, and we are running 7u40, and both are true.&lt;/p&gt;</comment>
                            <comment id="13793742" author="pmcfadin" created="Sun, 13 Oct 2013 18:30:20 +0000"  >&lt;p&gt;Just tried c* 2.0.1 using Oracle JDK 7u40 on CentOS 6.4. Works without modification. &lt;/p&gt;</comment>
                            <comment id="13793747" author="jbellis" created="Sun, 13 Oct 2013 18:38:02 +0000"  >&lt;p&gt;I wonder if Steve has a 1.6 jvm installed that is being picked up instead.  (Especially since he mentions tarballs.)&lt;/p&gt;</comment>
                            <comment id="13793752" author="brandon.williams" created="Sun, 13 Oct 2013 18:45:11 +0000"  >&lt;p&gt;That would be my guess.  Steve, can you paste the output of &apos;dpkg -l | grep jre&apos; and if you have results, trying removing all those packages so there can only be one java install on the system? (the oracle one, which I assume is from a tarball)&lt;/p&gt;</comment>
                            <comment id="13793753" author="enigmacurry" created="Sun, 13 Oct 2013 18:46:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slowenthal&quot; class=&quot;user-hover&quot; rel=&quot;slowenthal&quot;&gt;slowenthal&lt;/a&gt; Put an &apos;echo $JAVA&apos; as the first line of the launch_service() function in bin/cassandra and you can verify that you&apos;re using the right java.&lt;/p&gt;</comment>
                            <comment id="13793799" author="slowenthal" created="Sun, 13 Oct 2013 22:06:24 +0000"  >&lt;p&gt;I&apos;ve even tried it by explicitly setting JAVA_HOME to point at my various javas.  Remember - if we aren&apos;t using Java 7, we don&apos;t fall into the code that adds that parameter.   Java 7 gets put in the system.log.&lt;/p&gt;</comment>
                            <comment id="13793875" author="slowenthal" created="Mon, 14 Oct 2013 01:47:57 +0000"  >&lt;p&gt;Here is a simple test.  Not the &quot;FileNotFoundException&quot; is good - I ran C* with the wrong permissions, so that is the expected result.&lt;/p&gt;

&lt;p&gt;Unix Info:&lt;br/&gt;
Linux ubuntu 3.8.0-19-generic #29-Ubuntu SMP Wed Apr 17 18:19:42 UTC 2013 i686 i686 i686 GNU/Linux&lt;br/&gt;
u&lt;/p&gt;


&lt;p&gt;ubuntu@ubuntu:&lt;sub&gt;$ export JAVA_HOME=&lt;/sub&gt;/Downloads/jre1.7.0_40/&lt;br/&gt;
ubuntu@ubuntu:~$ cassandra&lt;br/&gt;
xss =  -ea -javaagent:/usr/share/cassandra/lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms1024M -Xmx1024M -Xmn100M -XX:+HeapDumpOnOutOfMemoryError -Xss256k&lt;br/&gt;
ubuntu@ubuntu:~$ Unrecognized VM option &apos;UseCondCardMark&apos;&lt;br/&gt;
Error: Could not create the Java Virtual Machine.&lt;br/&gt;
Error: A fatal exception has occurred. Program will exit.&lt;/p&gt;

&lt;p&gt;ubuntu@ubuntu:&lt;sub&gt;$ export JAVA_HOME=&lt;/sub&gt;/Downloads/jre1.7.0_25/&lt;br/&gt;
ubuntu@ubuntu:~$ cassandra&lt;br/&gt;
xss =  -ea -javaagent:/usr/share/cassandra/lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms1024M -Xmx1024M -Xmn100M -XX:+HeapDumpOnOutOfMemoryError -Xss256k&lt;br/&gt;
ubuntu@ubuntu:~$ log4j:ERROR setFile(null,true) call failed.&lt;br/&gt;
java.io.FileNotFoundException: /var/log/cassandra/system.log (Permission denied)&lt;br/&gt;
	at java.io.FileOutputStream.open(Native Method)&lt;br/&gt;
	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(Unknown Source)&lt;/p&gt;</comment>
                            <comment id="13794829" author="slowenthal" created="Tue, 15 Oct 2013 03:16:15 +0000"  >&lt;p&gt;It does work on windows - set JAVA_HOME manually to a 7u40 home, and add the JVM option to cassandra.bat. Verified with jconsole.&lt;/p&gt;</comment>
                            <comment id="13794864" author="slowenthal" created="Tue, 15 Oct 2013 04:14:27 +0000"  >&lt;p&gt;Mystery Solved:  In 7u40, the option is missing in the Client JVM.  In 7u25, it&apos;s available in both the client and server JVM.&lt;/p&gt;

&lt;p&gt;ubuntu@ubuntu:~/Downloads$ cd jre1.7.0_40/&lt;br/&gt;
ubuntu@ubuntu:~/Downloads/jre1.7.0_40$ find . -type f -exec grep UseCondCard {} +&lt;br/&gt;
Binary file ./lib/i386/server/libjvm.so matches&lt;/p&gt;

&lt;p&gt;ubuntu@ubuntu:~/Downloads/jre1.7.0_25$ find . -type f -exec grep UseCondCard {} +&lt;br/&gt;
Binary file ./lib/i386/server/libjvm.so matches&lt;br/&gt;
Binary file ./lib/i386/client/libjvm.so matches&lt;br/&gt;
ubuntu@ubuntu:~/Downloads/jre1.7.0_25$ &lt;/p&gt;

</comment>
                            <comment id="13794911" author="slowenthal" created="Tue, 15 Oct 2013 05:46:47 +0000"  >&lt;p&gt;Oracle Bug report filed 9007478 &lt;/p&gt;

&lt;p&gt;Dear Java Developer,&lt;/p&gt;

&lt;p&gt;Thank you for reporting this issue.&lt;/p&gt;

&lt;p&gt;We have determined that this report is a new bug and have entered the bug into our bug tracking system under Bug Id: 9007478 . You can look for related issues on the Java Bug Database at &lt;a href=&quot;http://bugs.sun.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.sun.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We will try to process all newly posted bugs in a timely manner, but we make no promises about the amount of time in which a bug will be fixed. If you just reported a bug that could have a major impact on your project, consider using one of the technical support offerings available at Oracle Support.&lt;/p&gt;

&lt;p&gt;Thanks again for your submission!&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Java Developer Support&lt;/p&gt;</comment>
                            <comment id="13794916" author="slowenthal" created="Tue, 15 Oct 2013 05:57:25 +0000"  >&lt;p&gt;It looks like java defaults to client if the machine has only 1 core.  Our training VM was created with a single core.&lt;/p&gt;</comment>
                            <comment id="13795056" author="jbellis" created="Tue, 15 Oct 2013 10:47:30 +0000"  >&lt;p&gt;It has to be 32bit as well. &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/technotes/guides/vm/server-class.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/7/docs/technotes/guides/vm/server-class.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13795182" author="brandon.williams" created="Tue, 15 Oct 2013 13:35:02 +0000"  >&lt;p&gt;Patch to also check for 64bit java when adding the UseConfCardMark flag.  We complain about 32bit JVMs later, so this at least gets us past the confusing error message.&lt;/p&gt;</comment>
                            <comment id="13796439" author="slowenthal" created="Wed, 16 Oct 2013 05:20:41 +0000"  >&lt;p&gt;Here is a response from Oracle:&lt;/p&gt;

&lt;p&gt;Hi Steve,&lt;br/&gt;
  I just wanted to close the loop on the bug you filled about UseCondCardMark not being available with the client JVM in 7u40.  The issue is that UseCondCardMark was never really available in client.  It was a NOP, and in 7u40 we moved the flag to work only with server as it should be.  Sorry for the confusion.&lt;/p&gt;


&lt;p&gt;&amp;#8211;&lt;br/&gt;
Azeem Jiva&lt;br/&gt;
@javawithjiva&lt;/p&gt;</comment>
                            <comment id="13796442" author="slowenthal" created="Wed, 16 Oct 2013 05:23:13 +0000"  >&lt;p&gt;Also 7u45 is out today, and it exhibits the same problem.&lt;/p&gt;</comment>
                            <comment id="13796719" author="brandon.williams" created="Wed, 16 Oct 2013 12:27:06 +0000"  >&lt;p&gt;Can you test with my patch?&lt;/p&gt;</comment>
                            <comment id="13805661" author="urandom" created="Fri, 25 Oct 2013 20:22:18 +0000"  >&lt;p&gt;+1, lgtm&lt;/p&gt;</comment>
                            <comment id="13805665" author="brandon.williams" created="Fri, 25 Oct 2013 20:30:17 +0000"  >&lt;p&gt;Committed&lt;/p&gt;</comment>
                            <comment id="13885394" author="jeromatron" created="Wed, 29 Jan 2014 14:50:17 +0000"  >&lt;p&gt;would this make sense to backport to the 1.2 line?  It&apos;s been reproduced with a 32 bit JDK 7 with 1.2.13.&lt;/p&gt;</comment>
                            <comment id="13885401" author="brandon.williams" created="Wed, 29 Jan 2014 14:58:51 +0000"  >&lt;p&gt;Done.&lt;/p&gt;</comment>
                            <comment id="13885410" author="jeromatron" created="Wed, 29 Jan 2014 15:07:38 +0000"  >&lt;p&gt;Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12608487" name="6190.txt" size="767" author="brandon.williams" created="Tue, 15 Oct 2013 13:35:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353235</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1owgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353528</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>urandom</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[urandom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>