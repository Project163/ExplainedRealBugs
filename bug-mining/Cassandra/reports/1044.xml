<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 22:22:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-2523] Distributed test scripts not working with Whirr 0.4.0</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-2523</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;I suspect that our runurl based script execution is not working with Whirr 0.4.0, which is causing distributed tests that kill/wipe nodes to timeout. See &lt;a href=&quot;http://incubator.apache.org/whirr/faq.html#how-can-i-modify-the-instance-installation-and-configuration-scripts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this FAQ entry&lt;/a&gt; for a description of the change.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12504822">CASSANDRA-2523</key>
            <summary>Distributed test scripts not working with Whirr 0.4.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mallen">Michael Allen</assignee>
                                    <reporter username="stuhood">Stu Hood</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Apr 2011 19:58:02 +0000</created>
                <updated>Tue, 16 Apr 2019 09:33:01 +0000</updated>
                            <resolved>Wed, 3 Aug 2011 22:10:43 +0000</resolved>
                                        <fixVersion>0.8.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13022343" author="stuhood" created="Wed, 20 Apr 2011 20:01:06 +0000"  >&lt;p&gt;This issue probably relates-to/causes 2504.&lt;/p&gt;</comment>
                            <comment id="13023081" author="stuhood" created="Fri, 22 Apr 2011 02:31:56 +0000"  >&lt;p&gt;A work-in-progress patch to include our own &quot;functions&quot; directory as alluded to in the Whirr FAQ. I&apos;m not yet certain that it&apos;s getting picked up at all.&lt;/p&gt;</comment>
                            <comment id="13023171" author="xedin" created="Fri, 22 Apr 2011 09:42:24 +0000"  >&lt;p&gt;Standard approach works for me most of the time but in like 2-3% of the cases it fails, I don&apos;t think that runurl is a good and stable solution, maybe we should hold our scripts in the test/distributed/scripts directory so we always sure that they are in place instead of using whirr&apos;s half-broken approach? &lt;/p&gt;</comment>
                            <comment id="13030882" author="jbellis" created="Mon, 9 May 2011 20:16:18 +0000"  >&lt;p&gt;Any more clarity here on what the right way to fix this is?&lt;/p&gt;</comment>
                            <comment id="13030921" author="stuhood" created="Mon, 9 May 2011 21:57:35 +0000"  >&lt;p&gt;I&apos;d like to put some more time into the distributed tests once the next revision of 2319/674 is posted: hopefully 2 weeks from now.&lt;/p&gt;</comment>
                            <comment id="13076093" author="mallen" created="Tue, 2 Aug 2011 08:14:39 +0000"  >&lt;p&gt;Stu was headed in the right direction here.  I&apos;ve attached a working revised version of his patch with a few adjustments.  &lt;/p&gt;

&lt;p&gt;The main difference is the use of whirr&apos;s StatementBuilder, which uses jclouds ScriptBuilder.  When an instance of ScriptBuilder is rendered and during the &apos;resolve function dependencies stage&apos;, jclouds will search the class path for a directory named &quot;functions&quot;.  It will then look in that directory for a file named after the function that it is trying to resolve.  For example, if in the ScriptBuilder there was a call to the function &quot;start_cassandra&quot;, then jclouds would look for a file named functions/start_cassandra.sh and if found, include its content in the ScriptBuilder.  &lt;/p&gt;

&lt;p&gt;functions/start_cassandra.sh is expected to contain a single function definition, namely &quot;start_cassandra&quot;.&lt;/p&gt;

&lt;p&gt;This seems to work fairly well in practice, and we no longer use runurl with this solution.&lt;/p&gt;
</comment>
                            <comment id="13076293" author="mallen" created="Tue, 2 Aug 2011 16:20:10 +0000"  >&lt;p&gt;updated to fix my use of the incorrect aws-s3 version.  should be 1.0-beta-9b rather than 1.0.&lt;/p&gt;</comment>
                            <comment id="13078994" author="brandon.williams" created="Wed, 3 Aug 2011 20:32:13 +0000"  >&lt;p&gt;why does install_cassandra.sh use 0.7.0?&lt;/p&gt;</comment>
                            <comment id="13079002" author="mallen" created="Wed, 3 Aug 2011 20:44:47 +0000"  >&lt;p&gt;Currently, the version is always passed to that function so the default never gets used, but I guess we should update that to default to 0.8 instead?&lt;/p&gt;</comment>
                            <comment id="13079003" author="mallen" created="Wed, 3 Aug 2011 20:46:56 +0000"  >&lt;p&gt;and to actually answer the question &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  that install script is provided by whirr and in 0.4.0 release, they&apos;ve got it set to 0.7.&lt;/p&gt;</comment>
                            <comment id="13079011" author="brandon.williams" created="Wed, 3 Aug 2011 20:52:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;Currently, the version is always passed to that function so the default never gets used, but I guess we should update that to default to 0.8 instead?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think I&apos;d rather not have a default so it&apos;s always explicit.  Accidentally testing the wrong version would be pretty bad.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;and to actually answer the question  that install script is provided by whirr and in 0.4.0 release, they&apos;ve got it set to 0.7.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah, I see &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13079049" author="mallen" created="Wed, 3 Aug 2011 21:45:04 +0000"  >&lt;p&gt;Attached another version to address the &quot;let&apos;s not use a default version of cassandra&quot; in install_cassandra.sh&lt;/p&gt;</comment>
                            <comment id="13079068" author="brandon.williams" created="Wed, 3 Aug 2011 22:10:43 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="13079116" author="hudson" created="Wed, 3 Aug 2011 23:25:43 +0000"  >&lt;p&gt;Integrated in Cassandra-0.8 #255 (See &lt;a href=&quot;https://builds.apache.org/job/Cassandra-0.8/255/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Cassandra-0.8/255/&lt;/a&gt;)&lt;br/&gt;
    Update distributed tests to work with whirr 0.4&lt;br/&gt;
Patch by Michael Allen, reviewed by brandonwilliams for &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-2523&quot; title=&quot;Distributed test scripts not working with Whirr 0.4.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-2523&quot;&gt;&lt;del&gt;CASSANDRA-2523&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;brandonwilliams : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153688&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1153688&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/distributed/org/apache/cassandra/CassandraServiceController.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/resources/functions/stop_cassandra.sh&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/resources/functions/start_cassandra.sh&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/distributed/org/apache/cassandra/TestBase.java&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/resources/functions/install_cassandra.sh&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/resources/functions&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/resources/functions/nodetool_cassandra.sh&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/resources/functions/wipe_cassandra.sh&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/resources/functions/configure_cassandra.sh&lt;/li&gt;
	&lt;li&gt;/cassandra/branches/cassandra-0.8/test/distributed/org/apache/cassandra/MutationTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12504121">CASSANDRA-2464</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12504623">CASSANDRA-2504</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12477068" name="0001-WIP-Update-to-use-jclouds-magical-functions-directory-.txt" size="18151" author="stuhood" created="Fri, 22 Apr 2011 02:31:56 +0000"/>
                            <attachment id="12488864" name="2523-1-use-jclouds-magical-functions-directory-revised.txt" size="20687" author="mallen" created="Tue, 2 Aug 2011 08:13:16 +0000"/>
                            <attachment id="12488916" name="2523-2-use-jclouds-magical-functions-directory-revised.txt" size="19929" author="mallen" created="Tue, 2 Aug 2011 16:20:10 +0000"/>
                            <attachment id="12489258" name="2523-3-use-jclouds-magical-functions-directory-revised.txt" size="19140" author="mallen" created="Wed, 3 Aug 2011 21:45:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[mallen]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gbvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>93353</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>brandon.williams</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[brandon.williams]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>