<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:18:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-16311] Extend the exclusion of replica filtering protection to other indices instead of just SASI</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-16311</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;There was a check introduced in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8272&quot; title=&quot;2ndary indexes can return stale data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8272&quot;&gt;&lt;del&gt;CASSANDRA-8272&lt;/del&gt;&lt;/a&gt; telling if an index is a SASI index and if it is, replica filtering protection was not triggered.&lt;/p&gt;

&lt;p&gt;There might be other custom index implementations which also do not support filtering protection and they do not have to be SASI indices neccessarily, however it is not possible to exclude them.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;PR trunk&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/844&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/844&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;PR 3.11&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/847&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/847&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;PR 3.0&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/pull/848&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/pull/848&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13344050">CASSANDRA-16311</key>
            <summary>Extend the exclusion of replica filtering protection to other indices instead of just SASI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefan.miklosovic">Stefan Miklosovic</assignee>
                                    <reporter username="stefan.miklosovic">Stefan Miklosovic</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2020 16:09:45 +0000</created>
                <updated>Mon, 21 Dec 2020 08:53:53 +0000</updated>
                            <resolved>Fri, 11 Dec 2020 18:40:26 +0000</resolved>
                                        <fixVersion>3.0.24</fixVersion>
                    <fixVersion>3.11.10</fixVersion>
                    <fixVersion>4.0-beta4</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Feature/2i Index</component>
                    <component>Feature/SASI</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17245992" author="adelapena" created="Tue, 8 Dec 2020 16:56:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maedhroz&quot; class=&quot;user-hover&quot; rel=&quot;maedhroz&quot;&gt;maedhroz&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt;&#160;I think we should include this in 4.0 as a bug fix for compatibility, wdyt?&#160;&lt;/p&gt;</comment>
                            <comment id="17246014" author="maedhroz" created="Tue, 8 Dec 2020 17:21:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adelapena&quot; class=&quot;user-hover&quot; rel=&quot;adelapena&quot;&gt;adelapena&lt;/a&gt; It was a simple oversight. We should definitely fix it for 4.0.&lt;/p&gt;</comment>
                            <comment id="17246048" author="adelapena" created="Tue, 8 Dec 2020 18:23:17 +0000"  >&lt;p&gt;Agree. I&apos;m including 3.0 and 3.11 as fix versions since they also include &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8272&quot; title=&quot;2ndary indexes can return stale data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8272&quot;&gt;&lt;del&gt;CASSANDRA-8272&lt;/del&gt;&lt;/a&gt;, probably the patch will be identical for the three branches. I haven&apos;t been able to change the ticket type from task to bug.&lt;/p&gt;</comment>
                            <comment id="17246053" author="stefan.miklosovic" created="Tue, 8 Dec 2020 18:29:42 +0000"  >&lt;p&gt;I am sorry, me as author neither.&lt;/p&gt;</comment>
                            <comment id="17246099" author="brandon.williams" created="Tue, 8 Dec 2020 19:19:25 +0000"  >&lt;p&gt;Sorry for the noise, but it definitely can&apos;t be changed, even as a project admin, in any state.&lt;/p&gt;</comment>
                            <comment id="17246115" author="adelapena" created="Tue, 8 Dec 2020 19:48:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brandon.williams&quot; class=&quot;user-hover&quot; rel=&quot;brandon.williams&quot;&gt;brandon.williams&lt;/a&gt;&#160;thanks for trying.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasonstack&quot; class=&quot;user-hover&quot; rel=&quot;jasonstack&quot;&gt;jasonstack&lt;/a&gt;&#160;will you have cycles to act as second reviewer?&lt;/p&gt;</comment>
                            <comment id="17246480" author="blerer" created="Wed, 9 Dec 2020 12:02:34 +0000"  >&lt;p&gt;To go from &lt;tt&gt;Improvement&lt;/tt&gt; to &lt;tt&gt;bug&lt;/tt&gt;: &lt;tt&gt;More&lt;/tt&gt; -&amp;gt; &lt;tt&gt;Move&lt;/tt&gt; &lt;/p&gt;</comment>
                            <comment id="17246506" author="adelapena" created="Wed, 9 Dec 2020 12:45:37 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blerer&quot; class=&quot;user-hover&quot; rel=&quot;blerer&quot;&gt;blerer&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17246962" author="jasonstack" created="Thu, 10 Dec 2020 02:10:24 +0000"  >&lt;p&gt;the change looks good to me.&lt;/p&gt;</comment>
                            <comment id="17247221" author="adelapena" created="Thu, 10 Dec 2020 12:42:08 +0000"  >&lt;p&gt;It looks good to me too. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefan.miklosovic&quot; class=&quot;user-hover&quot; rel=&quot;stefan.miklosovic&quot;&gt;stefan.miklosovic&lt;/a&gt;&#160;could you please provide PRs for 3.0 and 3.11 branches? These also include SRP.&lt;/p&gt;</comment>
                            <comment id="17247404" author="stefan.miklosovic" created="Thu, 10 Dec 2020 18:34:09 +0000"  >&lt;p&gt;PRs for other branches added. I am running Jenkins tests.&lt;/p&gt;</comment>
                            <comment id="17247809" author="stefan.miklosovic" created="Fri, 11 Dec 2020 10:09:15 +0000"  >&lt;p&gt;trunk Jenkins run&#160;&lt;a href=&quot;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/252/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-cassandra.apache.org/view/patches/job/Cassandra-devbranch/252/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17247888" author="adelapena" created="Fri, 11 Dec 2020 12:27:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefan.miklosovic&quot; class=&quot;user-hover&quot; rel=&quot;stefan.miklosovic&quot;&gt;stefan.miklosovic&lt;/a&gt; thanks. I&apos;m running a final CI round here:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;branch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;utest&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;python-dtest&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;java-dtest&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/129/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;129&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/279/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;279&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-jvm-dtest/124/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;124&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3.11&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/130/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;130&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/280/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;280&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-jvm-dtest/125/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;125&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;trunk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-test/131/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;131&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-dtest/281/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;281&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://ci-cassandra.apache.org/view/all/job/Cassandra-devbranch-jvm-dtest/126/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;126&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;If it&apos;s ok with you I&apos;ll add the following to the JavaDoc of the new method during commit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Replica filtering protection might need to run the query row filter in the coordinator to detect stale results. An index implementation will be compatible with &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; protection mechanism &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it returns the same results &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the row filter as CQL will &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; with {@code ALLOW FILTERING} and without using the index. This means that index implementations using custom query syntax or applying transformations to the indexed data won&apos;t support it.
See CASSANDRA-8272 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; further details.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17247946" author="stefan.miklosovic" created="Fri, 11 Dec 2020 14:37:43 +0000"  >&lt;p&gt;Please proceed. Thanks.&lt;/p&gt;</comment>
                            <comment id="17248109" author="adelapena" created="Fri, 11 Dec 2020 18:39:28 +0000"  >&lt;p&gt;The tests failures above don&apos;t seem related to the changes.&lt;/p&gt;

&lt;p&gt;Committed to &lt;tt&gt;cassandra-3.0&lt;/tt&gt; as &lt;a href=&quot;https://github.com/apache/cassandra/commit/fa77676daa8e9726fd6ca96bb081cd288a21c200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fa77676daa8e9726fd6ca96bb081cd288a21c200&lt;/a&gt; and merged up to &lt;a href=&quot;https://github.com/apache/cassandra/commit/ae8981236ae06a5053775b7f55c8aeb77f8b9318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;cassandra-3.11&lt;/tt&gt;&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/cassandra/commit/8e61e216a67304482f4373fb8b53012a25404026&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;trunk&lt;/tt&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thanks for the patch and the review.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12753516">CASSANDRA-8272</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[stefan.miklosovic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12313826" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Change Category</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13004"><![CDATA[Semantic]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313821" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12965"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12313922" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Impacts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13100"><![CDATA[None]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12313921" key="jira.plugin.projectspecificselectfield.jpssf:multicftype">
                        <customfieldname>Platform</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13076"><![CDATA[All]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l6d4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[adelapena]]></customfieldvalue>
        <customfieldvalue><![CDATA[jasonstack]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311420" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Since Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12346993">3.0.21</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313924" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Source Control Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cassandra/commit/fa77676daa8e9726fd6ca96bb081cd288a21c200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cassandra/commit/fa77676daa8e9726fd6ca96bb081cd288a21c200&lt;/a&gt;&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313823" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Test and Documentation Plan</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;Existing index tests should continue working.&lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>