<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:09:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CASSANDRA-13123] Draining a node might fail to delete all inactive commitlogs</title>
                <link>https://issues.apache.org/jira/browse/CASSANDRA-13123</link>
                <project id="12310865" key="CASSANDRA">Apache Cassandra</project>
                    <description>&lt;p&gt;After issuing a drain command, it&apos;s possible that not all of the inactive commitlogs are removed.&lt;/p&gt;

&lt;p&gt;The drain command shuts down the CommitLog instance, which in turn shuts down the CommitLogSegmentManager. This has the effect of discarding any pending management tasks it might have, like the removal of inactive commitlogs.&lt;/p&gt;

&lt;p&gt;This in turn leads to an excessive amount of commitlogs being left behind after a drain and a lengthy recovery after a restart. With a fleet of dozens of nodes, each of them leaving several GB of commitlogs after a drain and taking up to two minutes to recover them on restart, the additional time required to restart the entire fleet becomes noticeable.&lt;/p&gt;

&lt;p&gt;This problem is not present in 3.x or trunk because of the CLSM rewrite done in &lt;a href=&quot;https://issues.apache.org/jira/browse/CASSANDRA-8844&quot; title=&quot;Change Data Capture (CDC)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CASSANDRA-8844&quot;&gt;&lt;del&gt;CASSANDRA-8844&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13034973">CASSANDRA-13123</key>
            <summary>Draining a node might fail to delete all inactive commitlogs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="10002" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Normal</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wulczer">Jan Urba&#324;ski</assignee>
                                    <reporter username="wulczer">Jan Urba&#324;ski</reporter>
                        <labels>
                    </labels>
                <created>Sat, 14 Jan 2017 21:28:13 +0000</created>
                <updated>Wed, 15 Oct 2025 09:48:56 +0000</updated>
                            <resolved>Thu, 26 Oct 2017 20:43:56 +0000</resolved>
                                        <fixVersion>3.0.16</fixVersion>
                    <fixVersion>3.11.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Legacy/Local Write-Read Paths</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="15822960" author="wulczer" created="Sat, 14 Jan 2017 21:32:34 +0000"  >&lt;p&gt;Patches for 2.2.8 and 3.0.10 and test-only patches for 3.9 and trunk&lt;/p&gt;</comment>
                            <comment id="15829865" author="jasobrown" created="Thu, 19 Jan 2017 12:56:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wulczer&quot; class=&quot;user-hover&quot; rel=&quot;wulczer&quot;&gt;wulczer&lt;/a&gt; Thanks for the patch. We are at the critical bug fix stage with 2.2, so I&apos;ll only look at the patch for 3.0 and up. I&apos;ve taken a quick look and things seem legit (need to think about it a bit more), but can you comment on any startup improvement time you&apos;ve observed, if you&apos;ve deployed this?&lt;/p&gt;

&lt;p&gt;Also, when you are issuing a drain? On normal node restarts, or only at &quot;special&quot; events, like upgrading a node?&lt;/p&gt;</comment>
                            <comment id="15830254" author="wulczer" created="Thu, 19 Jan 2017 17:03:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt; I haven&apos;t had the chance to try this out in production yet, I&apos;ll try to do that tomorrow. The initial commitlog replay takes up to two minutes for each of our nodes right now and if I understand correctly, after a drain all commitlogs except for at most two would be deleted, so the initial replay phase would be reduced to essentially zero. The shutdown phase might take a bit longer, because it&apos;ll have to wait for those commitlogs to be deleted, of course.&lt;/p&gt;

&lt;p&gt;The exact improvement depends on the number of CLs left behind after a drain - on machines with heavily contended disks it can be a lot, on lightly loaded ones it might be 0.&lt;/p&gt;

&lt;p&gt;As to when we&apos;re doing drains, it&apos;s on every restart (it&apos;s part of the restart procedure that we have).&lt;/p&gt;</comment>
                            <comment id="15831886" author="jasobrown" created="Fri, 20 Jan 2017 15:05:31 +0000"  >&lt;p&gt;Pushed code for cassci to run tests. I think the change to &lt;tt&gt;CommitLogSegmentManager&lt;/tt&gt; is probably legit, but I want to look at the test a little more before +1&apos;ing it&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.11&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/jasobrown/cassandra/tree/13123-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/jasobrown/cassandra/tree/13123-3.11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://github.com/jasobrown/cassandra/tree/13123-trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;branch&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/jasobrown/job/jasobrown-13123-3.0-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/jasobrown/job/jasobrown-13123-3.11-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/jasobrown/job/jasobrown-13123-trunk-dtest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/jasobrown/job/jasobrown-13123-3.0-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/jasobrown/job/jasobrown-13123-3.11-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;http://cassci.datastax.com/view/Dev/view/jasobrown/job/jasobrown-13123-trunk-testall/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testall&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15836099" author="wulczer" created="Tue, 24 Jan 2017 12:46:04 +0000"  >&lt;p&gt;I tested this patch on a 3.7 test cluster I have running with the following procedure:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;check initial commitlog dir size and file count&lt;/li&gt;
	&lt;li&gt;run nodetool disablegossip&lt;/li&gt;
	&lt;li&gt;run nodetool drain, measure the time it took&lt;/li&gt;
	&lt;li&gt;send SIGTERM to Cassandra, wait for it to exit&lt;/li&gt;
	&lt;li&gt;check post-stop commitlog dir size and file count&lt;/li&gt;
	&lt;li&gt;start Cassandra&lt;/li&gt;
	&lt;li&gt;read logs to get time it took to go through commitlog replay&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With vanilla 3.7 the drain took around 25 seconds and when starting back up commitlog replay took around 40 seconds. Pre-shutdown CL dir size was 3.5G and 110 files. Post-shutdown CL dir size was almost identical.&lt;/p&gt;

&lt;p&gt;With patched 3.7 the drain also too 25 seconds, but commitlog replay took essentially 0 seconds. Pre-shutdown CL dir size was similar, but post-shutdown there was just one file left.&lt;/p&gt;</comment>
                            <comment id="15962360" author="zznate" created="Mon, 10 Apr 2017 02:06:20 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jasobrown&quot; class=&quot;user-hover&quot; rel=&quot;jasobrown&quot;&gt;jasobrown&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wulczer&quot; class=&quot;user-hover&quot; rel=&quot;wulczer&quot;&gt;wulczer&lt;/a&gt; Are we good to commit on this then? &lt;/p&gt;</comment>
                            <comment id="15962568" author="wulczer" created="Mon, 10 Apr 2017 08:14:03 +0000"  >&lt;p&gt;We&apos;ve been running it for weeks with no problems, so +1 from me.&lt;/p&gt;</comment>
                            <comment id="16163579" author="jasobrown" created="Tue, 12 Sep 2017 20:09:09 +0000"  >&lt;p&gt;Sorry this fell off my review radar (more than) a few months ago. For the last month, however, I&apos;ve been trying to run this patch, rebased on 3.0/3.11/trunk, on circleci and the results have almost always been broken (in ways seemingly unrelated to this ticket). I&apos;ve run it locally and everything seemed legit, and I&apos;ve now run the utests on the apache jenkins server, and things were good (a few completely unrelated things failed);&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3.11&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;trunk&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-testall/9/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-testall/10/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache utest&lt;/a&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;a href=&quot;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-testall/11/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache utest&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Running the &lt;a href=&quot;https://builds.apache.org/view/A-D/view/Cassandra/job/Cassandra-devbranch-dtest/304/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dtests&lt;/a&gt; now (only for 3.0), and if it looks good I&apos;ll commit.&lt;/p&gt;</comment>
                            <comment id="16164663" author="jasobrown" created="Wed, 13 Sep 2017 13:37:52 +0000"  >&lt;p&gt;committed to 3.0 and up as sha &lt;tt&gt;d826c81874e5d13a30a418f8b982531cb7e5d158&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, and sorry for the delay!&lt;/p&gt;</comment>
                            <comment id="16178816" author="wulczer" created="Mon, 25 Sep 2017 10:19:16 +0000"  >&lt;p&gt;No worries, thanks for the commit!&lt;/p&gt;</comment>
                            <comment id="16186704" author="jjirsa" created="Fri, 29 Sep 2017 23:50:17 +0000"  >&lt;p&gt;Hi folks,&lt;/p&gt;

&lt;p&gt;Pretty sure this commit breaks &lt;tt&gt;CommitLogSegmentManagerTest&lt;/tt&gt; - have seen a pretty sharp rise in failures, and reverting this commit seems to solve them.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] INFO  23:34:52 Initializing CommitLogTest.Standard1
    [junit] INFO  23:34:52 Initializing CommitLogTest.Standard2
    [junit] ------------- ---------------- ---------------
    [junit] Testcase: testShutdownWithPendingTasks(org.apache.cassandra.db.commitlog.CommitLogSegmentManagerTest):	FAILED
    [junit] &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    [junit] junit.framework.AssertionFailedError
    [junit] 	at org.apache.cassandra.db.Keyspace.open(Keyspace.java:105)
    [junit] 	at org.apache.cassandra.db.commitlog.CommitLogSegmentManagerTest.testShutdownWithPendingTasks(CommitLogSegmentManagerTest.java:147)
    [junit] 	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$10.evaluate(BMUnitRunner.java:371)
    [junit] 	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$6.evaluate(BMUnitRunner.java:241)
    [junit] 	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$1.evaluate(BMUnitRunner.java:75)
    [junit]
    [junit]
    [junit] Testcase: testCompressedCommitLogBackpressure(org.apache.cassandra.db.commitlog.CommitLogSegmentManagerTest):	FAILED
    [junit] expected:&amp;lt;3&amp;gt; but was:&amp;lt;1&amp;gt;
    [junit] junit.framework.AssertionFailedError: expected:&amp;lt;3&amp;gt; but was:&amp;lt;1&amp;gt;
    [junit] 	at org.apache.cassandra.Util.spinAssertEquals(Util.java:535)
    [junit] 	at org.apache.cassandra.db.commitlog.CommitLogSegmentManagerTest.testCompressedCommitLogBackpressure(CommitLogSegmentManagerTest.java:112)
    [junit] 	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$9.evaluate(BMUnitRunner.java:342)
    [junit] 	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$6.evaluate(BMUnitRunner.java:241)
    [junit] 	at org.jboss.byteman.contrib.bmunit.BMUnitRunner$1.evaluate(BMUnitRunner.java:75)
    [junit]
    [junit]
    [junit] Test org.apache.cassandra.db.commitlog.CommitLogSegmentManagerTest FAILED
   [delete] Deleting directory /Users/jjirsa/Desktop/Dev/cassandra/build/test/cassandra/commitlog:0
   [delete] Deleting directory /Users/jjirsa/Desktop/Dev/cassandra/build/test/cassandra/data:0
   [delete] Deleting directory /Users/jjirsa/Desktop/Dev/cassandra/build/test/cassandra/saved_caches:0
[junitreport] Processing /Users/jjirsa/Desktop/Dev/cassandra/build/test/TESTS-TestSuites.xml to /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/nq/4w83hn7s3h13dc5wxmvcdn9w0000gn/T/null1048031913
[junitreport] Loading stylesheet jar:file:/usr/local/ant/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs/optional/junit/xsl/junit-frames.xsl
[junitreport] Transform time: 256ms
[junitreport] Deleting: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/nq/4w83hn7s3h13dc5wxmvcdn9w0000gn/T/null1048031913
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16187024" author="wulczer" created="Sat, 30 Sep 2017 10:49:46 +0000"  >&lt;p&gt;Ugh, I&apos;ll take a look as soon as I can, thanks for the heads up. That&apos;s on master, right?&lt;/p&gt;</comment>
                            <comment id="16187136" author="jjirsa" created="Sat, 30 Sep 2017 15:59:25 +0000"  >&lt;p&gt;I noticed it on 3.0 branch, I haven&apos;t had time to investigate but I suspect it may be a test ordering issue (if the two tests are run in one order they pass, in the other they fail, so probably setup/teardown conditions).&lt;/p&gt;

&lt;p&gt;The first failure I see in cassci (datastax&apos;s CI environment, which I don&apos;t have access to other than the public read-only view) is &lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.0_testall/954/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-3.0_testall/954/&lt;/a&gt; , which is the build after this change was committed ( &lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.0_testall/953/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-3.0_testall/953/&lt;/a&gt; ) .&lt;/p&gt;

&lt;p&gt;It also fails in:&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.0_testall/964/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-3.0_testall/964/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.0_testall/963/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-3.0_testall/963/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://cassci.datastax.com/job/cassandra-3.0_testall/956/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cassci.datastax.com/job/cassandra-3.0_testall/956/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So % wise, it seems like 4 failures in the 15 builds since introduction.&lt;/p&gt;


</comment>
                            <comment id="16189523" author="jmckenzie" created="Tue, 3 Oct 2017 10:29:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;suspect it may be a test ordering issue (if the two tests are run in one order they pass, in the other they fail, so probably setup/teardown conditions).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The brittleness of CL startup/teardown in unit testing was a pretty significant pain in the ass when I was working on CDC. Stupp and I have both bumped up against that in the memorable recent past and tidied things up a bit, but I suspect it will require a more invasive re-arch of the segment allocation and CL startup/shutdown to get it really ironed out.&lt;/p&gt;</comment>
                            <comment id="16213367" author="aweisberg" created="Fri, 20 Oct 2017 22:17:46 +0000"  >&lt;p&gt;The new test that was added doesn&apos;t set up it&apos;s schema at all. It relies on the schema created during the previous test. Easy fix there.&lt;/p&gt;

&lt;p&gt;The original test (before the new one was added) configures DatabaseDescriptor before loading the commit log (after which it can&apos;t be reloaded). The new test loads the commit log before this configuration occurs causing the original test to fail because the commit log configuration is wrong.&lt;/p&gt;

&lt;p&gt;If you move the configuration into @BeforeClass the backpressure that is supposed to be in the original test doesn&apos;t occur and the test fails. No fragile test goes unpunished I guess. I think the might be an interaction with Byteman that I don&apos;t understand.&lt;/p&gt;</comment>
                            <comment id="16220919" author="bdeggleston" created="Thu, 26 Oct 2017 18:06:57 +0000"  >&lt;p&gt;I don&apos;t think these 2 tests can be in the same test class without being run in a specific order. &lt;tt&gt;testCompressedCommitLogBackpressure&lt;/tt&gt; needs it&apos;s byteman rules setup before the commit log is started. So if &lt;tt&gt;testShutdownWithPendingTasks&lt;/tt&gt; sets up it&apos;s schema and successfully runs first, the other will hang.&lt;/p&gt;

&lt;p&gt;I have a branch where each test is in it&apos;s own class &lt;a href=&quot;https://github.com/bdeggleston/cassandra/tree/13123-fix-3.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, let me know if there are any objections&lt;/p&gt;</comment>
                            <comment id="16220925" author="jjirsa" created="Thu, 26 Oct 2017 18:10:56 +0000"  >&lt;p&gt;+1 (on splitting, and on your patch)&lt;/p&gt;

</comment>
                            <comment id="16221213" author="bdeggleston" created="Thu, 26 Oct 2017 20:43:56 +0000"  >&lt;p&gt;committed as &lt;tt&gt;8fad4cd59ea5ef6d111cfe67d9a4c0345c4d7fd7&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16221883" author="wulczer" created="Fri, 27 Oct 2017 07:49:48 +0000"  >&lt;p&gt;I just wanted to say thanks for fixing that test (aka cleaning up my mess). I was squinting at this for a while, but could not figure out the byteman/commitlog init interaction...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12847511" name="13123-2.2.8.txt" size="6112" author="wulczer" created="Sat, 14 Jan 2017 21:32:34 +0000"/>
                            <attachment id="12847512" name="13123-3.0.10.txt" size="4365" author="wulczer" created="Sat, 14 Jan 2017 21:32:34 +0000"/>
                            <attachment id="12847513" name="13123-3.9.txt" size="2514" author="wulczer" created="Sat, 14 Jan 2017 21:32:34 +0000"/>
                            <attachment id="12847514" name="13123-trunk.txt" size="2514" author="wulczer" created="Sat, 14 Jan 2017 21:32:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313920" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Authors</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[wulczer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38py7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311421" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Reproduced In</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12337440">2.2.8</customfieldvalue>
    <customfieldvalue id="12338291">3.0.10</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10022" key="com.atlassian.jira.plugin.system.customfieldtypes:userpicker">
                        <customfieldname>Reviewer</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>jasobrown</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313420" key="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker">
                        <customfieldname>Reviewers</customfieldname>
                        <customfieldvalues>
                                    <customfieldvalue><![CDATA[jasobrown]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12313820" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12962"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>