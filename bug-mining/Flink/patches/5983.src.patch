diff --git a/flink-clients/src/main/java/org/apache/flink/client/program/DefaultPackagedProgramRetriever.java b/flink-clients/src/main/java/org/apache/flink/client/program/DefaultPackagedProgramRetriever.java
index ed7fc7943b7..cb54d00dac3 100644
--- a/flink-clients/src/main/java/org/apache/flink/client/program/DefaultPackagedProgramRetriever.java
+++ b/flink-clients/src/main/java/org/apache/flink/client/program/DefaultPackagedProgramRetriever.java
@@ -22,7 +22,9 @@ import org.apache.flink.annotation.VisibleForTesting;
 import org.apache.flink.client.deployment.application.EntryClassInformationProvider;
 import org.apache.flink.client.deployment.application.FromClasspathEntryClassInformationProvider;
 import org.apache.flink.client.deployment.application.FromJarEntryClassInformationProvider;
+import org.apache.flink.configuration.ConfigUtils;
 import org.apache.flink.configuration.Configuration;
+import org.apache.flink.configuration.PipelineOptions;
 import org.apache.flink.util.FileUtils;
 import org.apache.flink.util.FlinkException;
 import org.apache.flink.util.Preconditions;
@@ -32,8 +34,10 @@ import javax.annotation.Nullable;
 
 import java.io.File;
 import java.io.IOException;
+import java.net.MalformedURLException;
 import java.net.URL;
 import java.nio.file.Path;
+import java.util.ArrayList;
 import java.util.Collections;
 import java.util.List;
 import java.util.NoSuchElementException;
@@ -95,21 +99,29 @@ public class DefaultPackagedProgramRetriever implements PackagedProgramRetriever
             String[] programArgs,
             Configuration configuration)
             throws FlinkException {
-        List<URL> userClasspath;
+        List<URL> userClasspaths;
         try {
-            userClasspath = extractUserClasspath(userLibDir);
+            final List<URL> classpathsFromUserLibDir = getClasspathsFromUserLibDir(userLibDir);
+            final List<URL> classpathsFromConfiguration =
+                    getClasspathsFromConfiguration(configuration);
+
+            final List<URL> classpaths = new ArrayList<>();
+            classpaths.addAll(classpathsFromUserLibDir);
+            classpaths.addAll(classpathsFromConfiguration);
+
+            userClasspaths = Collections.unmodifiableList(classpaths);
         } catch (IOException e) {
             throw new FlinkException("An error occurred while extracting the user classpath.", e);
         }
 
         final EntryClassInformationProvider entryClassInformationProvider =
                 createEntryClassInformationProvider(
-                        userLibDir == null ? null : userClasspath,
+                        userLibDir == null ? null : userClasspaths,
                         jarFile,
                         jobClassName,
                         programArgs);
         return new DefaultPackagedProgramRetriever(
-                entryClassInformationProvider, programArgs, userClasspath, configuration);
+                entryClassInformationProvider, programArgs, userClasspaths, configuration);
     }
 
     @VisibleForTesting
@@ -204,7 +216,8 @@ public class DefaultPackagedProgramRetriever implements PackagedProgramRetriever
         }
     }
 
-    private static List<URL> extractUserClasspath(@Nullable File userLibDir) throws IOException {
+    private static List<URL> getClasspathsFromUserLibDir(@Nullable File userLibDir)
+            throws IOException {
         if (userLibDir == null) {
             return Collections.emptyList();
         }
@@ -217,4 +230,13 @@ public class DefaultPackagedProgramRetriever implements PackagedProgramRetriever
                         .collect(Collectors.toList());
         return Collections.unmodifiableList(relativeJarURLs);
     }
+
+    private static List<URL> getClasspathsFromConfiguration(Configuration configuration)
+            throws MalformedURLException {
+        if (configuration == null) {
+            return Collections.emptyList();
+        }
+        return ConfigUtils.decodeListFromConfig(
+                configuration, PipelineOptions.CLASSPATHS, URL::new);
+    }
 }
diff --git a/flink-clients/src/test/java/org/apache/flink/client/program/DefaultPackagedProgramRetrieverTest.java b/flink-clients/src/test/java/org/apache/flink/client/program/DefaultPackagedProgramRetrieverTest.java
index c7c5bc2e9be..d35c0593c48 100644
--- a/flink-clients/src/test/java/org/apache/flink/client/program/DefaultPackagedProgramRetrieverTest.java
+++ b/flink-clients/src/test/java/org/apache/flink/client/program/DefaultPackagedProgramRetrieverTest.java
@@ -49,6 +49,7 @@ import java.net.MalformedURLException;
 import java.net.URL;
 import java.nio.file.Path;
 import java.util.ArrayList;
+import java.util.Collection;
 import java.util.List;
 import java.util.stream.Collectors;
 
@@ -418,6 +419,27 @@ public class DefaultPackagedProgramRetrieverTest extends TestLogger {
                 IsIterableContainingInAnyOrder.containsInAnyOrder(expectedClasspath.toArray()));
     }
 
+    @Test
+    public void testRetrieveCorrectUserClasspathsWithPipelineClasspaths() throws Exception {
+        final Configuration configuration = new Configuration();
+        final List<String> pipelineJars = new ArrayList<>();
+        final Collection<URL> expectedMergedURLs = new ArrayList<>();
+        for (URL jarFile : singleEntryClassClasspathProvider.getURLUserClasspath()) {
+            pipelineJars.add(jarFile.toString());
+            expectedMergedURLs.add(jarFile);
+        }
+        configuration.set(PipelineOptions.CLASSPATHS, pipelineJars);
+
+        final PackagedProgramRetriever retrieverUnderTest =
+                DefaultPackagedProgramRetriever.create(
+                        null,
+                        singleEntryClassClasspathProvider.getJobClassName(),
+                        ClasspathProvider.parametersForTestJob("suffix"),
+                        configuration);
+        final JobGraph jobGraph = retrieveJobGraph(retrieverUnderTest, new Configuration());
+        assertThat(jobGraph.getClasspaths(), containsInAnyOrder(expectedMergedURLs.toArray()));
+    }
+
     @Test
     public void testRetrieveFromJarFileWithoutUserLib()
             throws IOException, FlinkException, ProgramInvocationException {
