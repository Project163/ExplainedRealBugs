diff --git a/flink-end-to-end-tests/test-scripts/test_high_parallelism_iterations.sh b/flink-end-to-end-tests/test-scripts/test_high_parallelism_iterations.sh
index cfa5cae5a71..c21dbc40508 100755
--- a/flink-end-to-end-tests/test-scripts/test_high_parallelism_iterations.sh
+++ b/flink-end-to-end-tests/test-scripts/test_high_parallelism_iterations.sh
@@ -17,37 +17,27 @@
 # limitations under the License.
 ################################################################################
 
+set -Eexuo pipefail
+
 source "$(dirname "$0")"/common.sh
 
 PARALLELISM="${1:-25}"
+TM_NUM=2
+let "SLOTS_PER_TM = (PARALLELISM + TM_NUM - 1) / TM_NUM"
 
 TEST=flink-high-parallelism-iterations-test
 TEST_PROGRAM_NAME=HighParallelismIterationsTestProgram
 TEST_PROGRAM_JAR=${END_TO_END_DIR}/$TEST/target/$TEST_PROGRAM_NAME.jar
 
-set_config_key "taskmanager.heap.size" "52m" # 52Mb x 100 TMs = 5Gb total heap
-
-set_config_key "taskmanager.memory.size" "8" # 8Mb
-set_config_key "taskmanager.network.memory.min" "8mb"
-set_config_key "taskmanager.network.memory.max" "8mb"
-set_config_key "taskmanager.memory.segment-size" "8kb"
-
-set_config_key "taskmanager.network.netty.server.numThreads" "1"
-set_config_key "taskmanager.network.netty.client.numThreads" "1"
-set_config_key "taskmanager.network.request-backoff.max" "60000"
-
-set_config_key "taskmanager.numberOfTaskSlots" "1"
+set_config_key "taskmanager.numberOfTaskSlots" "$SLOTS_PER_TM"
 
 print_mem_use
 start_cluster
 print_mem_use
 
-let TMNUM=$PARALLELISM-1
-echo "Start $TMNUM more task managers"
-for i in `seq 1 $TMNUM`; do
-    $FLINK_DIR/bin/taskmanager.sh start
-    print_mem_use
-done
+let "TM_NUM -= 1"
+start_taskmanagers ${TM_NUM}
+print_mem_use
 
 $FLINK_DIR/bin/flink run -p $PARALLELISM $TEST_PROGRAM_JAR
 print_mem_use
