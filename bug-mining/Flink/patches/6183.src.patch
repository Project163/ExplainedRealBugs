diff --git a/flink-core/src/main/java/org/apache/flink/core/fs/EntropyInjectingFileSystem.java b/flink-core/src/main/java/org/apache/flink/core/fs/EntropyInjectingFileSystem.java
index f589c289041..0064cff232c 100644
--- a/flink-core/src/main/java/org/apache/flink/core/fs/EntropyInjectingFileSystem.java
+++ b/flink-core/src/main/java/org/apache/flink/core/fs/EntropyInjectingFileSystem.java
@@ -20,6 +20,8 @@ package org.apache.flink.core.fs;
 
 import org.apache.flink.annotation.PublicEvolving;
 
+import javax.annotation.Nullable;
+
 /**
  * An interface to be implemented by a {@link FileSystem} that is aware of entropy injection.
  *
@@ -39,7 +41,10 @@ public interface EntropyInjectingFileSystem {
     /**
      * Gets the marker string that represents the substring of a path to be replaced by the entropy
      * characters.
+     *
+     * <p>You can disable entropy injection if you return null here.
      */
+    @Nullable
     String getEntropyInjectionKey();
 
     /** Creates a string with random entropy to be injected into a path. */
diff --git a/flink-core/src/main/java/org/apache/flink/core/fs/EntropyInjector.java b/flink-core/src/main/java/org/apache/flink/core/fs/EntropyInjector.java
index 043d81c3912..57680365388 100644
--- a/flink-core/src/main/java/org/apache/flink/core/fs/EntropyInjector.java
+++ b/flink-core/src/main/java/org/apache/flink/core/fs/EntropyInjector.java
@@ -104,7 +104,8 @@ public class EntropyInjector {
     // ------------------------------------------------------------------------
 
     public static boolean isEntropyInjecting(FileSystem fs) {
-        return getEntropyFs(fs) != null;
+        final EntropyInjectingFileSystem entropyFs = getEntropyFs(fs);
+        return entropyFs != null && entropyFs.getEntropyInjectionKey() != null;
     }
 
     @Nullable
diff --git a/flink-core/src/test/java/org/apache/flink/core/fs/EntropyInjectorTest.java b/flink-core/src/test/java/org/apache/flink/core/fs/EntropyInjectorTest.java
index 802f2ec523e..eb1a5acf769 100644
--- a/flink-core/src/test/java/org/apache/flink/core/fs/EntropyInjectorTest.java
+++ b/flink-core/src/test/java/org/apache/flink/core/fs/EntropyInjectorTest.java
@@ -30,6 +30,7 @@ import java.io.IOException;
 import java.net.URI;
 
 import static org.junit.Assert.assertEquals;
+import static org.junit.Assert.assertFalse;
 import static org.junit.Assert.assertTrue;
 import static org.junit.Assert.fail;
 
@@ -221,6 +222,13 @@ public class EntropyInjectorTest {
         assertTrue(EntropyInjector.isEntropyInjecting(efs));
     }
 
+    @Test
+    public void testIsEntropyFsWithNullEntropyKey() {
+        final FileSystem efs = new TestEntropyInjectingFs(null, "ignored");
+
+        assertFalse(EntropyInjector.isEntropyInjecting(efs));
+    }
+
     // ------------------------------------------------------------------------
 
     private static final class TestEntropyInjectingFs extends LocalFileSystem
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/state/filesystem/FsCheckpointStreamFactoryTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/state/filesystem/FsCheckpointStreamFactoryTest.java
index a1e45528753..d2ad53edc70 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/state/filesystem/FsCheckpointStreamFactoryTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/state/filesystem/FsCheckpointStreamFactoryTest.java
@@ -18,7 +18,9 @@
 
 package org.apache.flink.runtime.state.filesystem;
 
+import org.apache.flink.core.fs.EntropyInjectingFileSystem;
 import org.apache.flink.core.fs.FileSystem;
+import org.apache.flink.core.fs.local.LocalFileSystem;
 import org.apache.flink.runtime.state.CheckpointedStateScope;
 import org.apache.flink.runtime.state.StreamStateHandle;
 
@@ -106,6 +108,20 @@ public class FsCheckpointStreamFactoryTest {
         assertPathsEqual(exclusiveStateDir, ((FileStateHandle) handle).getFilePath().getParent());
     }
 
+    @Test
+    public void testFSWithDisabledEntropyHasRelativePaths() throws IOException {
+        final FsCheckpointStreamFactory factory = createFactory(new DisabledEntropyFS(), 0);
+
+        final FsCheckpointStreamFactory.FsCheckpointStateOutputStream stream =
+                factory.createCheckpointStateOutputStream(CheckpointedStateScope.EXCLUSIVE);
+        stream.write(0);
+        final StreamStateHandle handle = stream.closeAndGetHandle();
+
+        assertThat(handle, instanceOf(RelativeFileStateHandle.class));
+        assertPathsEqual(
+                exclusiveStateDir, ((RelativeFileStateHandle) handle).getFilePath().getParent());
+    }
+
     @Test
     public void testFlushUnderThreshold() throws IOException {
         flushAndVerify(10, 10, true);
@@ -151,4 +167,17 @@ public class FsCheckpointStreamFactoryTest {
                 fileSizeThreshold,
                 bufferSize);
     }
+
+    private static final class DisabledEntropyFS extends LocalFileSystem
+            implements EntropyInjectingFileSystem {
+        @Override
+        public String getEntropyInjectionKey() {
+            return null;
+        }
+
+        @Override
+        public String generateEntropy() {
+            return null;
+        }
+    }
 }
