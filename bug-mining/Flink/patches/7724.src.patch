diff --git a/flink-core/src/main/java/org/apache/flink/util/AbstractAutoCloseableRegistry.java b/flink-core/src/main/java/org/apache/flink/util/AbstractAutoCloseableRegistry.java
index 78456a8b231..e256139412a 100644
--- a/flink-core/src/main/java/org/apache/flink/util/AbstractAutoCloseableRegistry.java
+++ b/flink-core/src/main/java/org/apache/flink/util/AbstractAutoCloseableRegistry.java
@@ -137,13 +137,13 @@ public abstract class AbstractAutoCloseableRegistry<
 
     /**
      * Does the actual registration of the closeable with the registry map. This should not do any
-     * long running or potentially blocking operations as is is executed under the registry's lock.
+     * long running or potentially blocking operations as it is executed under the registry's lock.
      */
     protected abstract void doRegister(@Nonnull C closeable, @Nonnull Map<R, T> closeableMap);
 
     /**
      * Does the actual un-registration of the closeable from the registry map. This should not do
-     * any long running or potentially blocking operations as is is executed under the registry's
+     * any long running or potentially blocking operations as it is executed under the registry's
      * lock.
      */
     protected abstract boolean doUnRegister(@Nonnull C closeable, @Nonnull Map<R, T> closeableMap);
diff --git a/flink-state-backends/flink-statebackend-rocksdb/src/test/java/org/apache/flink/state/rocksdb/RocksDBWriteBatchWrapperTest.java b/flink-state-backends/flink-statebackend-rocksdb/src/test/java/org/apache/flink/state/rocksdb/RocksDBWriteBatchWrapperTest.java
index cfd5d3d8ca6..52143c5caca 100644
--- a/flink-state-backends/flink-statebackend-rocksdb/src/test/java/org/apache/flink/state/rocksdb/RocksDBWriteBatchWrapperTest.java
+++ b/flink-state-backends/flink-statebackend-rocksdb/src/test/java/org/apache/flink/state/rocksdb/RocksDBWriteBatchWrapperTest.java
@@ -82,8 +82,13 @@ public class RocksDBWriteBatchWrapperTest {
                                 cancellationCheckInterval,
                                 batchSizeBytes)) {
             registry.registerCloseable(writeBatchWrapper.getCancelCloseable());
+            // After the `writeStartedFuture` completes, the registry will start to close.
             writeStartedFuture.complete(null);
 
+            // In the infinite loop, we want to verify that the `put` method will check cancellation
+            // state on every `batch.count() % cancellationCheckInterval == 0`. We set
+            // cancellationCheckInterval to 1, So, we expect it will throw CancelTaskException
+            // no later than batch count becoming 2 in this test case.
             //noinspection InfiniteLoopStatement
             for (int i = 0; ; i++) {
                 try {
@@ -96,6 +101,11 @@ public class RocksDBWriteBatchWrapperTest {
                 // make sure that cancellation is triggered earlier than periodic flush
                 // but allow some delay of cancellation propagation
                 assertThat(i).isLessThan(cancellationCheckInterval * 2);
+                if (i == 0) {
+                    // make sure the registry is closed at least after the first run, so that we
+                    // can verify the cancellation check is validating correctly.
+                    cancellationRequestedFuture.join();
+                }
             }
         }
     }
