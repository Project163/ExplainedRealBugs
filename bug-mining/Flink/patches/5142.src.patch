diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java
index 3b64a444e28..2db9d8bd53a 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMaster.java
@@ -660,6 +660,7 @@ public class JobMaster extends PermanentlyFencedRpcEndpoint<JobMasterId>
     public CompletableFuture<RegistrationResponse> registerTaskManager(
             final String taskManagerRpcAddress,
             final UnresolvedTaskManagerLocation unresolvedTaskManagerLocation,
+            final JobID jobId,
             final Time timeout) {
 
         final TaskManagerLocation taskManagerLocation;
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMasterGateway.java b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMasterGateway.java
index 4a53e02c0aa..1db69f79647 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMasterGateway.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/jobmaster/JobMasterGateway.java
@@ -18,6 +18,7 @@
 
 package org.apache.flink.runtime.jobmaster;
 
+import org.apache.flink.api.common.JobID;
 import org.apache.flink.api.common.JobStatus;
 import org.apache.flink.api.common.functions.AggregateFunction;
 import org.apache.flink.api.common.time.Time;
@@ -167,6 +168,7 @@ public interface JobMasterGateway
      *
      * @param taskManagerRpcAddress the rpc address of the task manager
      * @param unresolvedTaskManagerLocation unresolved location of the task manager
+     * @param jobId jobId specifying the job for which the JobMaster should be responsible
      * @param timeout for the rpc call
      * @return Future registration response indicating whether the registration was successful or
      *     not
@@ -174,6 +176,7 @@ public interface JobMasterGateway
     CompletableFuture<RegistrationResponse> registerTaskManager(
             final String taskManagerRpcAddress,
             final UnresolvedTaskManagerLocation unresolvedTaskManagerLocation,
+            final JobID jobId,
             @RpcTimeout final Time timeout);
 
     /**
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/taskexecutor/DefaultJobLeaderService.java b/flink-runtime/src/main/java/org/apache/flink/runtime/taskexecutor/DefaultJobLeaderService.java
index e95ed5bf585..40b6aa6f4f6 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/taskexecutor/DefaultJobLeaderService.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/taskexecutor/DefaultJobLeaderService.java
@@ -390,7 +390,8 @@ public class DefaultJobLeaderService implements JobLeaderService {
                         getTargetLeaderId(),
                         retryingRegistrationConfiguration,
                         ownerAddress,
-                        ownLocation);
+                        ownLocation,
+                        jobId);
             }
 
             @Override
@@ -440,6 +441,8 @@ public class DefaultJobLeaderService implements JobLeaderService {
 
         private final UnresolvedTaskManagerLocation unresolvedTaskManagerLocation;
 
+        private final JobID jobId;
+
         JobManagerRetryingRegistration(
                 Logger log,
                 RpcService rpcService,
@@ -449,7 +452,8 @@ public class DefaultJobLeaderService implements JobLeaderService {
                 JobMasterId jobMasterId,
                 RetryingRegistrationConfiguration retryingRegistrationConfiguration,
                 String taskManagerRpcAddress,
-                UnresolvedTaskManagerLocation unresolvedTaskManagerLocation) {
+                UnresolvedTaskManagerLocation unresolvedTaskManagerLocation,
+                JobID jobId) {
             super(
                     log,
                     rpcService,
@@ -462,6 +466,7 @@ public class DefaultJobLeaderService implements JobLeaderService {
             this.taskManagerRpcAddress = taskManagerRpcAddress;
             this.unresolvedTaskManagerLocation =
                     Preconditions.checkNotNull(unresolvedTaskManagerLocation);
+            this.jobId = Preconditions.checkNotNull(jobId);
         }
 
         @Override
@@ -470,6 +475,7 @@ public class DefaultJobLeaderService implements JobLeaderService {
             return gateway.registerTaskManager(
                     taskManagerRpcAddress,
                     unresolvedTaskManagerLocation,
+                    jobId,
                     Time.milliseconds(timeoutMillis));
         }
     }
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterExecutionDeploymentReconciliationTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterExecutionDeploymentReconciliationTest.java
index a8ddd51d84a..780487ea4fb 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterExecutionDeploymentReconciliationTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterExecutionDeploymentReconciliationTest.java
@@ -17,6 +17,7 @@
 
 package org.apache.flink.runtime.jobmaster;
 
+import org.apache.flink.api.common.JobID;
 import org.apache.flink.api.common.JobStatus;
 import org.apache.flink.api.common.time.Time;
 import org.apache.flink.runtime.checkpoint.StandaloneCheckpointRecoveryFactory;
@@ -26,6 +27,7 @@ import org.apache.flink.runtime.clusterframework.types.ResourceProfile;
 import org.apache.flink.runtime.executiongraph.ExecutionAttemptID;
 import org.apache.flink.runtime.heartbeat.HeartbeatServices;
 import org.apache.flink.runtime.highavailability.TestingHighAvailabilityServices;
+import org.apache.flink.runtime.jobgraph.JobGraph;
 import org.apache.flink.runtime.jobgraph.JobGraphTestUtils;
 import org.apache.flink.runtime.jobmanager.OnCompletionActions;
 import org.apache.flink.runtime.jobmaster.utils.JobMasterBuilder;
@@ -99,8 +101,9 @@ public class JobMasterExecutionDeploymentReconciliationTest extends TestLogger {
 
         TestingExecutionDeploymentTrackerWrapper deploymentTrackerWrapper =
                 new TestingExecutionDeploymentTrackerWrapper();
+        final JobGraph jobGraph = JobGraphTestUtils.singleNoOpJobGraph();
         JobMaster jobMaster =
-                createAndStartJobMaster(onCompletionActions, deploymentTrackerWrapper);
+                createAndStartJobMaster(onCompletionActions, deploymentTrackerWrapper, jobGraph);
         JobMasterGateway jobMasterGateway = jobMaster.getSelfGateway(JobMasterGateway.class);
         RPC_SERVICE_RESOURCE
                 .getTestingRpcService()
@@ -113,7 +116,10 @@ public class JobMasterExecutionDeploymentReconciliationTest extends TestLogger {
                 new LocalUnresolvedTaskManagerLocation();
 
         registerTaskExecutorAndOfferSlots(
-                jobMasterGateway, taskExecutorGateway, localUnresolvedTaskManagerLocation);
+                jobMasterGateway,
+                jobGraph.getJobID(),
+                taskExecutorGateway,
+                localUnresolvedTaskManagerLocation);
 
         ExecutionAttemptID deployedExecution =
                 deploymentTrackerWrapper.getTaskDeploymentFuture().get();
@@ -149,7 +155,8 @@ public class JobMasterExecutionDeploymentReconciliationTest extends TestLogger {
     public void testExecutionDeploymentReconciliationForPendingExecution() throws Exception {
         TestingExecutionDeploymentTrackerWrapper deploymentTrackerWrapper =
                 new TestingExecutionDeploymentTrackerWrapper();
-        JobMaster jobMaster = createAndStartJobMaster(deploymentTrackerWrapper);
+        final JobGraph jobGraph = JobGraphTestUtils.singleNoOpJobGraph();
+        JobMaster jobMaster = createAndStartJobMaster(deploymentTrackerWrapper, jobGraph);
         JobMasterGateway jobMasterGateway = jobMaster.getSelfGateway(JobMasterGateway.class);
         RPC_SERVICE_RESOURCE
                 .getTestingRpcService()
@@ -170,7 +177,10 @@ public class JobMasterExecutionDeploymentReconciliationTest extends TestLogger {
                 new LocalUnresolvedTaskManagerLocation();
 
         registerTaskExecutorAndOfferSlots(
-                jobMasterGateway, taskExecutorGateway, localUnresolvedTaskManagerLocation);
+                jobMasterGateway,
+                jobGraph.getJobID(),
+                taskExecutorGateway,
+                localUnresolvedTaskManagerLocation);
 
         ExecutionAttemptID pendingExecutionId = taskSubmissionFuture.get();
 
@@ -188,21 +198,23 @@ public class JobMasterExecutionDeploymentReconciliationTest extends TestLogger {
         assertFalse(taskCancellationFuture.isDone());
     }
 
-    private JobMaster createAndStartJobMaster(ExecutionDeploymentTracker executionDeploymentTracker)
+    private JobMaster createAndStartJobMaster(
+            ExecutionDeploymentTracker executionDeploymentTracker, JobGraph jobGraph)
             throws Exception {
         return createAndStartJobMaster(
-                new JobMasterBuilder.TestingOnCompletionActions(), executionDeploymentTracker);
+                new JobMasterBuilder.TestingOnCompletionActions(),
+                executionDeploymentTracker,
+                jobGraph);
     }
 
     private JobMaster createAndStartJobMaster(
             OnCompletionActions onCompletionActions,
-            ExecutionDeploymentTracker executionDeploymentTracker)
+            ExecutionDeploymentTracker executionDeploymentTracker,
+            JobGraph jobGraph)
             throws Exception {
 
         JobMaster jobMaster =
-                new JobMasterBuilder(
-                                JobGraphTestUtils.singleNoOpJobGraph(),
-                                RPC_SERVICE_RESOURCE.getTestingRpcService())
+                new JobMasterBuilder(jobGraph, RPC_SERVICE_RESOURCE.getTestingRpcService())
                         .withFatalErrorHandler(
                                 testingFatalErrorHandlerResource.getFatalErrorHandler())
                         .withHighAvailabilityServices(haServices)
@@ -252,12 +264,16 @@ public class JobMasterExecutionDeploymentReconciliationTest extends TestLogger {
 
     private void registerTaskExecutorAndOfferSlots(
             JobMasterGateway jobMasterGateway,
+            JobID jobId,
             TaskExecutorGateway taskExecutorGateway,
             UnresolvedTaskManagerLocation taskManagerLocation)
             throws ExecutionException, InterruptedException {
         jobMasterGateway
                 .registerTaskManager(
-                        taskExecutorGateway.getAddress(), taskManagerLocation, testingTimeout)
+                        taskExecutorGateway.getAddress(),
+                        taskManagerLocation,
+                        jobId,
+                        testingTimeout)
                 .get();
 
         Collection<SlotOffer> slotOffers =
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterPartitionReleaseTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterPartitionReleaseTest.java
index 5b976c18de4..724dbaa2874 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterPartitionReleaseTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterPartitionReleaseTest.java
@@ -31,6 +31,7 @@ import org.apache.flink.runtime.execution.ExecutionState;
 import org.apache.flink.runtime.heartbeat.HeartbeatServices;
 import org.apache.flink.runtime.highavailability.TestingHighAvailabilityServices;
 import org.apache.flink.runtime.io.network.partition.TestingJobMasterPartitionTracker;
+import org.apache.flink.runtime.jobgraph.JobGraph;
 import org.apache.flink.runtime.jobgraph.JobGraphTestUtils;
 import org.apache.flink.runtime.jobmaster.utils.JobMasterBuilder;
 import org.apache.flink.runtime.leaderretrieval.SettableLeaderRetrievalService;
@@ -219,8 +220,9 @@ public class JobMasterPartitionReleaseTest extends TestLogger {
 
             HeartbeatServices heartbeatServices = new HeartbeatServices(1000L, 5_000_000L);
 
+            final JobGraph jobGraph = JobGraphTestUtils.singleNoOpJobGraph();
             jobMaster =
-                    new JobMasterBuilder(JobGraphTestUtils.singleNoOpJobGraph(), rpcService)
+                    new JobMasterBuilder(jobGraph, rpcService)
                             .withConfiguration(configuration)
                             .withHighAvailabilityServices(haServices)
                             .withJobManagerSharedServices(
@@ -232,12 +234,14 @@ public class JobMasterPartitionReleaseTest extends TestLogger {
 
             jobMaster.start();
 
-            registerTaskExecutorAtJobMaster(rpcService, getJobMasterGateway(), taskExecutorGateway);
+            registerTaskExecutorAtJobMaster(
+                    rpcService, getJobMasterGateway(), jobGraph.getJobID(), taskExecutorGateway);
         }
 
         private void registerTaskExecutorAtJobMaster(
                 TestingRpcService rpcService,
                 JobMasterGateway jobMasterGateway,
+                JobID jobId,
                 TaskExecutorGateway taskExecutorGateway)
                 throws ExecutionException, InterruptedException {
 
@@ -247,6 +251,7 @@ public class JobMasterPartitionReleaseTest extends TestLogger {
                     .registerTaskManager(
                             taskExecutorGateway.getAddress(),
                             localTaskManagerUnresolvedLocation,
+                            jobId,
                             testingTimeout)
                     .get();
 
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterQueryableStateTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterQueryableStateTest.java
index 8ed8cb834fa..306a27fe92f 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterQueryableStateTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterQueryableStateTest.java
@@ -116,7 +116,7 @@ public class JobMasterQueryableStateTest extends TestLogger {
 
         final JobMasterGateway jobMasterGateway = jobMaster.getSelfGateway(JobMasterGateway.class);
 
-        registerSlotsRequiredForJobExecution(jobMasterGateway);
+        registerSlotsRequiredForJobExecution(jobMasterGateway, JOB_GRAPH.getJobID());
 
         try {
             // lookup location
@@ -140,7 +140,7 @@ public class JobMasterQueryableStateTest extends TestLogger {
 
         final JobMasterGateway jobMasterGateway = jobMaster.getSelfGateway(JobMasterGateway.class);
 
-        registerSlotsRequiredForJobExecution(jobMasterGateway);
+        registerSlotsRequiredForJobExecution(jobMasterGateway, JOB_GRAPH.getJobID());
 
         try {
             // lookup location
@@ -163,7 +163,7 @@ public class JobMasterQueryableStateTest extends TestLogger {
 
         final JobMasterGateway jobMasterGateway = jobMaster.getSelfGateway(JobMasterGateway.class);
 
-        registerSlotsRequiredForJobExecution(jobMasterGateway);
+        registerSlotsRequiredForJobExecution(jobMasterGateway, JOB_GRAPH.getJobID());
 
         try {
             // register an irrelevant KvState
@@ -186,7 +186,7 @@ public class JobMasterQueryableStateTest extends TestLogger {
 
         final JobMasterGateway jobMasterGateway = jobMaster.getSelfGateway(JobMasterGateway.class);
 
-        registerSlotsRequiredForJobExecution(jobMasterGateway);
+        registerSlotsRequiredForJobExecution(jobMasterGateway, JOB_GRAPH.getJobID());
 
         try {
             final String registrationName = "register-me";
@@ -231,7 +231,7 @@ public class JobMasterQueryableStateTest extends TestLogger {
 
         final JobMasterGateway jobMasterGateway = jobMaster.getSelfGateway(JobMasterGateway.class);
 
-        registerSlotsRequiredForJobExecution(jobMasterGateway);
+        registerSlotsRequiredForJobExecution(jobMasterGateway, JOB_GRAPH.getJobID());
 
         try {
             final String registrationName = "register-me";
@@ -279,7 +279,7 @@ public class JobMasterQueryableStateTest extends TestLogger {
 
         final JobMasterGateway jobMasterGateway = jobMaster.getSelfGateway(JobMasterGateway.class);
 
-        registerSlotsRequiredForJobExecution(jobMasterGateway);
+        registerSlotsRequiredForJobExecution(jobMasterGateway, JOB_GRAPH.getJobID());
 
         try {
             // duplicate registration fails task
@@ -309,10 +309,11 @@ public class JobMasterQueryableStateTest extends TestLogger {
         }
     }
 
-    private static void registerSlotsRequiredForJobExecution(JobMasterGateway jobMasterGateway)
+    private static void registerSlotsRequiredForJobExecution(
+            JobMasterGateway jobMasterGateway, JobID jobId)
             throws ExecutionException, InterruptedException {
         JobMasterTestUtils.registerTaskExecutorAndOfferSlots(
-                rpcService, jobMasterGateway, PARALLELISM, testingTimeout);
+                rpcService, jobMasterGateway, jobId, PARALLELISM, testingTimeout);
     }
 
     private static void registerKvState(
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java
index 274448b5feb..bd8c98a991d 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java
@@ -282,6 +282,7 @@ public class JobMasterTest extends TestLogger {
                     jobMasterGateway.registerTaskManager(
                             taskExecutorGateway.getAddress(),
                             unresolvedTaskManagerLocation,
+                            jobGraph.getJobID(),
                             testingTimeout);
 
             // wait for the completion of the registration
@@ -344,8 +345,9 @@ public class JobMasterTest extends TestLogger {
         final JobManagerSharedServices jobManagerSharedServices =
                 new TestingJobManagerSharedServicesBuilder().build();
 
+        final JobGraph jobGraph = JobGraphTestUtils.singleNoOpJobGraph();
         final JobMaster jobMaster =
-                new JobMasterBuilder(JobGraphTestUtils.singleNoOpJobGraph(), rpcService)
+                new JobMasterBuilder(jobGraph, rpcService)
                         .withHeartbeatServices(new HeartbeatServices(5L, 1000L))
                         .withSlotPoolServiceSchedulerFactory(
                                 DefaultSlotPoolServiceSchedulerFactory.create(
@@ -365,6 +367,7 @@ public class JobMasterTest extends TestLogger {
                     jobMasterGateway.registerTaskManager(
                             taskExecutorGateway.getAddress(),
                             unresolvedTaskManagerLocation,
+                            jobGraph.getJobID(),
                             testingTimeout);
 
             // wait for the completion of the registration
@@ -673,6 +676,7 @@ public class JobMasterTest extends TestLogger {
             registerSlotsAtJobMaster(
                     1,
                     jobMaster.getSelfGateway(JobMasterGateway.class),
+                    jobGraph.getJobID(),
                     new TestingTaskExecutorGatewayBuilder().createTestingTaskExecutorGateway(),
                     new LocalUnresolvedTaskManagerLocation());
 
@@ -943,7 +947,8 @@ public class JobMasterTest extends TestLogger {
             final JobMasterGateway jobMasterGateway =
                     jobMaster.getSelfGateway(JobMasterGateway.class);
 
-            registerSlotsRequiredForJobExecution(jobMasterGateway, parallelism);
+            registerSlotsRequiredForJobExecution(
+                    jobMasterGateway, inputSplitJobGraph.getJobID(), parallelism);
 
             waitUntilAllExecutionsAreScheduledOrDeployed(jobMasterGateway);
 
@@ -1211,7 +1216,11 @@ public class JobMasterTest extends TestLogger {
 
             final Collection<SlotOffer> slotOffers =
                     registerSlotsAtJobMaster(
-                            1, jobMasterGateway, testingTaskExecutorGateway, taskManagerLocation);
+                            1,
+                            jobMasterGateway,
+                            producerConsumerJobGraph.getJobID(),
+                            testingTaskExecutorGateway,
+                            taskManagerLocation);
 
             assertThat(slotOffers, hasSize(1));
 
@@ -1377,7 +1386,11 @@ public class JobMasterTest extends TestLogger {
 
             final Collection<SlotOffer> slotOffers =
                     registerSlotsAtJobMaster(
-                            1, jobMasterGateway, testingTaskExecutorGateway, taskManagerLocation);
+                            1,
+                            jobMasterGateway,
+                            jobGraph.getJobID(),
+                            testingTaskExecutorGateway,
+                            taskManagerLocation);
 
             // check that we accepted the offered slot
             assertThat(slotOffers, hasSize(1));
@@ -1446,6 +1459,7 @@ public class JobMasterTest extends TestLogger {
                     registerSlotsAtJobMaster(
                             1,
                             jobMasterGateway,
+                            jobGraph.getJobID(),
                             testingTaskExecutorGateway,
                             taskManagerUnresolvedLocation);
 
@@ -1636,6 +1650,7 @@ public class JobMasterTest extends TestLogger {
                     registerSlotsAtJobMaster(
                             1,
                             jobMasterGateway,
+                            jobGraph.getJobID(),
                             taskExecutorGateway,
                             taskManagerUnresolvedLocation);
             assertThat(slotOffers, hasSize(1));
@@ -1664,6 +1679,7 @@ public class JobMasterTest extends TestLogger {
     private Collection<SlotOffer> registerSlotsAtJobMaster(
             int numberSlots,
             JobMasterGateway jobMasterGateway,
+            JobID jobId,
             TaskExecutorGateway taskExecutorGateway,
             UnresolvedTaskManagerLocation unresolvedTaskManagerLocation)
             throws ExecutionException, InterruptedException {
@@ -1673,6 +1689,7 @@ public class JobMasterTest extends TestLogger {
                 .registerTaskManager(
                         taskExecutorGateway.getAddress(),
                         unresolvedTaskManagerLocation,
+                        jobId,
                         testingTimeout)
                 .get();
 
@@ -1747,9 +1764,9 @@ public class JobMasterTest extends TestLogger {
     }
 
     private static void registerSlotsRequiredForJobExecution(
-            JobMasterGateway jobMasterGateway, int numSlots)
+            JobMasterGateway jobMasterGateway, JobID jobId, int numSlots)
             throws ExecutionException, InterruptedException {
         JobMasterTestUtils.registerTaskExecutorAndOfferSlots(
-                rpcService, jobMasterGateway, numSlots, testingTimeout);
+                rpcService, jobMasterGateway, jobId, numSlots, testingTimeout);
     }
 }
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTestUtils.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTestUtils.java
index e4d3106858f..de207af0099 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTestUtils.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTestUtils.java
@@ -17,6 +17,7 @@
 
 package org.apache.flink.runtime.jobmaster;
 
+import org.apache.flink.api.common.JobID;
 import org.apache.flink.api.common.time.Time;
 import org.apache.flink.runtime.clusterframework.types.AllocationID;
 import org.apache.flink.runtime.clusterframework.types.ResourceProfile;
@@ -42,6 +43,7 @@ public class JobMasterTestUtils {
     public static void registerTaskExecutorAndOfferSlots(
             TestingRpcService rpcService,
             JobMasterGateway jobMasterGateway,
+            JobID jobId,
             int numSlots,
             Time testingTimeout)
             throws ExecutionException, InterruptedException {
@@ -66,6 +68,7 @@ public class JobMasterTestUtils {
                 .registerTaskManager(
                         taskExecutorGateway.getAddress(),
                         unresolvedTaskManagerLocation,
+                        jobId,
                         testingTimeout)
                 .get();
 
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/utils/TestingJobMasterGateway.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/utils/TestingJobMasterGateway.java
index 772e8f0019d..e7b878ac8d1 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/utils/TestingJobMasterGateway.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/utils/TestingJobMasterGateway.java
@@ -111,8 +111,11 @@ public class TestingJobMasterGateway implements JobMasterGateway {
     @Nonnull private final TriConsumer<ResourceID, AllocationID, Throwable> failSlotConsumer;
 
     @Nonnull
-    private final BiFunction<
-                    String, UnresolvedTaskManagerLocation, CompletableFuture<RegistrationResponse>>
+    private final TriFunction<
+                    String,
+                    UnresolvedTaskManagerLocation,
+                    JobID,
+                    CompletableFuture<RegistrationResponse>>
             registerTaskManagerFunction;
 
     @Nonnull
@@ -211,9 +214,10 @@ public class TestingJobMasterGateway implements JobMasterGateway {
                             offerSlotsFunction,
             @Nonnull TriConsumer<ResourceID, AllocationID, Throwable> failSlotConsumer,
             @Nonnull
-                    BiFunction<
+                    TriFunction<
                                     String,
                                     UnresolvedTaskManagerLocation,
+                                    JobID,
                                     CompletableFuture<RegistrationResponse>>
                             registerTaskManagerFunction,
             @Nonnull
@@ -361,9 +365,10 @@ public class TestingJobMasterGateway implements JobMasterGateway {
     public CompletableFuture<RegistrationResponse> registerTaskManager(
             String taskManagerRpcAddress,
             UnresolvedTaskManagerLocation unresolvedTaskManagerLocation,
+            JobID jobId,
             Time timeout) {
         return registerTaskManagerFunction.apply(
-                taskManagerRpcAddress, unresolvedTaskManagerLocation);
+                taskManagerRpcAddress, unresolvedTaskManagerLocation, jobId);
     }
 
     @Override
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/utils/TestingJobMasterGatewayBuilder.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/utils/TestingJobMasterGatewayBuilder.java
index e9573119a7d..1f8466a0173 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/utils/TestingJobMasterGatewayBuilder.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/utils/TestingJobMasterGatewayBuilder.java
@@ -101,10 +101,13 @@ public class TestingJobMasterGatewayBuilder {
                             CompletableFuture.completedFuture(Collections.emptyList());
     private TriConsumer<ResourceID, AllocationID, Throwable> failSlotConsumer =
             (ignoredA, ignoredB, ignoredC) -> {};
-    private BiFunction<
-                    String, UnresolvedTaskManagerLocation, CompletableFuture<RegistrationResponse>>
+    private TriFunction<
+                    String,
+                    UnresolvedTaskManagerLocation,
+                    JobID,
+                    CompletableFuture<RegistrationResponse>>
             registerTaskManagerFunction =
-                    (ignoredA, ignoredB) ->
+                    (ignoredA, ignoredB, ignoredC) ->
                             CompletableFuture.completedFuture(
                                     new JMTMRegistrationSuccess(RESOURCE_MANAGER_ID));
     private BiConsumer<ResourceID, TaskExecutorToJobManagerHeartbeatPayload>
@@ -235,9 +238,10 @@ public class TestingJobMasterGatewayBuilder {
     }
 
     public TestingJobMasterGatewayBuilder setRegisterTaskManagerFunction(
-            BiFunction<
+            TriFunction<
                             String,
                             UnresolvedTaskManagerLocation,
+                            JobID,
                             CompletableFuture<RegistrationResponse>>
                     registerTaskManagerFunction) {
         this.registerTaskManagerFunction = registerTaskManagerFunction;
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorExecutionDeploymentReconciliationTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorExecutionDeploymentReconciliationTest.java
index ec10786765b..07d68d6c6f5 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorExecutionDeploymentReconciliationTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorExecutionDeploymentReconciliationTest.java
@@ -243,7 +243,7 @@ public class TaskExecutorExecutionDeploymentReconciliationTest extends TestLogge
             ResourceID jobManagerResourceId) {
         return new TestingJobMasterGatewayBuilder()
                 .setRegisterTaskManagerFunction(
-                        (s, location) ->
+                        (s, location, ignored) ->
                                 CompletableFuture.completedFuture(
                                         new JMTMRegistrationSuccess(jobManagerResourceId)))
                 .setOfferSlotsFunction(
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorPartitionLifecycleTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorPartitionLifecycleTest.java
index 18461bcd451..e858f7dbf0b 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorPartitionLifecycleTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorPartitionLifecycleTest.java
@@ -449,7 +449,7 @@ public class TaskExecutorPartitionLifecycleTest extends TestLogger {
         final TestingJobMasterGateway jobMasterGateway =
                 new TestingJobMasterGatewayBuilder()
                         .setRegisterTaskManagerFunction(
-                                (s, location) ->
+                                (s, location, ignored) ->
                                         CompletableFuture.completedFuture(
                                                 new JMTMRegistrationSuccess(ResourceID.generate())))
                         .setOfferSlotsFunction(
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorTest.java
index 9c344264095..7211a72ec10 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskExecutorTest.java
@@ -305,7 +305,7 @@ public class TaskExecutorTest extends TestLogger {
         final TestingJobMasterGateway jobMasterGateway =
                 new TestingJobMasterGatewayBuilder()
                         .setRegisterTaskManagerFunction(
-                                (s, taskManagerUnresolvedLocation) -> {
+                                (s, taskManagerUnresolvedLocation, ignored) -> {
                                     registrationAttempts.countDown();
                                     return CompletableFuture.completedFuture(
                                             new JMTMRegistrationSuccess(jmResourceId));
@@ -1887,7 +1887,7 @@ public class TaskExecutorTest extends TestLogger {
                                         CompletableFuture.completedFuture(
                                                 new ArrayList<>(slotOffers)))
                         .setRegisterTaskManagerFunction(
-                                (ignoredA, ignoredB) ->
+                                (ignoredA, ignoredB, ignoredC) ->
                                         CompletableFuture.completedFuture(
                                                 new JMTMRegistrationSuccess(jobManagerResourceId)))
                         .build();
