diff --git a/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/tasks/StreamTaskCancellationTest.java b/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/tasks/StreamTaskCancellationTest.java
index 8bf560c7605..0f22c020366 100644
--- a/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/tasks/StreamTaskCancellationTest.java
+++ b/flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/tasks/StreamTaskCancellationTest.java
@@ -301,6 +301,13 @@ public class StreamTaskCancellationTest extends TestLogger {
                         }
                     });
             harness.processElement(new Watermark(Long.MAX_VALUE));
+
+            // We need to wait for the first timer being fired, otherwise this is prone to race
+            // condition because processing time timers are put into mailbox from a different
+            // thread.
+            while (processingTime && numKeyedTimersFired.get() == 0) {
+                harness.processAll();
+            }
         }
         Assertions.assertThat(numKeyedTimersFired).hasValue(numKeyedTimersToFire);
     }
