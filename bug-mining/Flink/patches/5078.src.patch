diff --git a/flink-queryable-state/flink-queryable-state-runtime/src/test/java/org/apache/flink/queryablestate/itcases/AbstractQueryableStateTestBase.java b/flink-queryable-state/flink-queryable-state-runtime/src/test/java/org/apache/flink/queryablestate/itcases/AbstractQueryableStateTestBase.java
index 733c4bd6e92..63fedfa1638 100644
--- a/flink-queryable-state/flink-queryable-state-runtime/src/test/java/org/apache/flink/queryablestate/itcases/AbstractQueryableStateTestBase.java
+++ b/flink-queryable-state/flink-queryable-state-runtime/src/test/java/org/apache/flink/queryablestate/itcases/AbstractQueryableStateTestBase.java
@@ -80,6 +80,7 @@ import org.junit.Test;
 import org.junit.rules.TemporaryFolder;
 
 import java.io.IOException;
+import java.io.Serializable;
 import java.net.URLClassLoader;
 import java.time.Duration;
 import java.util.ArrayList;
@@ -392,10 +393,7 @@ public abstract class AbstractQueryableStateTestBase extends TestLogger {
         env.setRestartStrategy(RestartStrategies.fixedDelayRestart(Integer.MAX_VALUE, 1000L));
 
         // Custom serializer is not needed, it's used just to check if serialization works.
-        @SuppressWarnings("unchecked")
-        Class<Serializer<?>> customSerializerClass =
-                (Class<Serializer<?>>) userClassLoader.loadClass(customSerializerClassName);
-        env.getConfig().addDefaultKryoSerializer(Byte.class, customSerializerClass);
+        env.getConfig().addDefaultKryoSerializer(Byte.class, createSerializer(userClassLoader));
 
         // Here we *force* using Kryo, to check if custom serializers are handled correctly WRT
         // classloading
@@ -431,6 +429,15 @@ public abstract class AbstractQueryableStateTestBase extends TestLogger {
         }
     }
 
+    @SuppressWarnings("unchecked")
+    <T extends Serializer<Byte> & Serializable> T createSerializer(ClassLoader userClassLoader)
+            throws ClassNotFoundException, IllegalAccessException, InstantiationException {
+        Class<Serializer<?>> customSerializerClass =
+                (Class<Serializer<?>>) userClassLoader.loadClass("CustomKryo");
+
+        return (T) customSerializerClass.newInstance();
+    }
+
     /**
      * Tests that the correct exception is thrown if the query contains a wrong jobId or wrong
      * queryable state name.
