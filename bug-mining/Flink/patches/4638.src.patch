diff --git a/flink-formats/flink-parquet/pom.xml b/flink-formats/flink-parquet/pom.xml
index e867a756127..3257cb86837 100644
--- a/flink-formats/flink-parquet/pom.xml
+++ b/flink-formats/flink-parquet/pom.xml
@@ -244,7 +244,8 @@ under the License.
 					 directory, then it download the directory and run the corresponding tests. However, the protoc
 					 executable under the target directory would lost the execution permission bit after downloading.
 					 To solve this issue we would skip generating the target files if they already exist after
-					 downloading. -->
+					 downloading. Meanwhile, since the time might be not consistent between the pre-compile and
+					 the actual execution, we need to adjust the timestamp manually, see unpack_build_artifact.sh-->
 					<checkStaleness>true</checkStaleness>
 					<protoTestSourceRoot>${project.basedir}/src/test/resources/protobuf</protoTestSourceRoot>
 					<!-- Generates classes into a separate directory since the generator always removes existing files. -->
diff --git a/tools/azure-pipelines/unpack_build_artifact.sh b/tools/azure-pipelines/unpack_build_artifact.sh
index 1f2b7f096e2..15d5c7c1057 100755
--- a/tools/azure-pipelines/unpack_build_artifact.sh
+++ b/tools/azure-pipelines/unpack_build_artifact.sh
@@ -27,6 +27,11 @@ echo "Merging cache"
 cp -RT "$FLINK_ARTIFACT_DIR" "."
 
 echo "Adjusting timestamps"
+# adjust timestamps of proto file to avoid re-generation
+find . -type f -name '*.proto' | xargs touch
+# wait a bit for better odds of different timestamps
+sleep 5
+
 # adjust timestamps to prevent recompilation
 find . -type f -name '*.java' | xargs touch
 find . -type f -name '*.scala' | xargs touch
