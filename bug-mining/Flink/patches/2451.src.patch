diff --git a/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/LocalStreamEnvironment.java b/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/LocalStreamEnvironment.java
index 8295e3c54d0..6eec705ca4e 100644
--- a/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/LocalStreamEnvironment.java
+++ b/flink-streaming-java/src/main/java/org/apache/flink/streaming/api/environment/LocalStreamEnvironment.java
@@ -103,9 +103,11 @@ public class LocalStreamEnvironment extends StreamExecutionEnvironment {
 			configuration.setInteger(RestOptions.PORT, 0);
 		}
 
+		int numSlotsPerTaskManager = configuration.getInteger(TaskManagerOptions.NUM_TASK_SLOTS, jobGraph.getMaximumParallelism());
+
 		MiniClusterConfiguration cfg = new MiniClusterConfiguration.Builder()
 			.setConfiguration(configuration)
-			.setNumSlotsPerTaskManager(jobGraph.getMaximumParallelism())
+			.setNumSlotsPerTaskManager(numSlotsPerTaskManager)
 			.build();
 
 		if (LOG.isInfoEnabled()) {
