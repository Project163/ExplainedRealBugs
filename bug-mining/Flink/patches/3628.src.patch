diff --git a/flink-core/src/main/java/org/apache/flink/configuration/CoreOptions.java b/flink-core/src/main/java/org/apache/flink/configuration/CoreOptions.java
index f852b0ea8f0..d29afddb2c6 100644
--- a/flink-core/src/main/java/org/apache/flink/configuration/CoreOptions.java
+++ b/flink-core/src/main/java/org/apache/flink/configuration/CoreOptions.java
@@ -23,7 +23,9 @@ import org.apache.flink.annotation.docs.ConfigGroup;
 import org.apache.flink.annotation.docs.ConfigGroups;
 import org.apache.flink.annotation.docs.Documentation;
 import org.apache.flink.configuration.description.Description;
-import org.apache.flink.util.ArrayUtils;
+
+import org.apache.flink.shaded.guava18.com.google.common.base.Splitter;
+import org.apache.flink.shaded.guava18.com.google.common.collect.Iterables;
 
 import static org.apache.flink.configuration.ConfigOptions.key;
 
@@ -109,16 +111,7 @@ public class CoreOptions {
 	public static String[] getParentFirstLoaderPatterns(Configuration config) {
 		String base = config.getString(ALWAYS_PARENT_FIRST_LOADER_PATTERNS);
 		String append = config.getString(ALWAYS_PARENT_FIRST_LOADER_PATTERNS_ADDITIONAL);
-
-		String[] basePatterns = base.isEmpty()
-			? new String[0]
-			: base.split(";");
-
-		if (append.isEmpty()) {
-			return basePatterns;
-		} else {
-			return ArrayUtils.concat(basePatterns, append.split(";"));
-		}
+		return parseParentFirstLoaderPatterns(base, append);
 	}
 
 	/**
@@ -147,8 +140,12 @@ public class CoreOptions {
 	public static String[] getPluginParentFirstLoaderPatterns(Configuration config) {
 		String base = config.getString(PLUGIN_ALWAYS_PARENT_FIRST_LOADER_PATTERNS);
 		String append = config.getString(PLUGIN_ALWAYS_PARENT_FIRST_LOADER_PATTERNS_ADDITIONAL);
+		return parseParentFirstLoaderPatterns(base, append);
+	}
 
-		return ArrayUtils.concat(base.split(";"), append.split(";"));
+	private static String[] parseParentFirstLoaderPatterns(String base, String append) {
+		Splitter splitter = Splitter.on(';').omitEmptyStrings();
+		return Iterables.toArray(Iterables.concat(splitter.split(base), splitter.split(append)), String.class);
 	}
 
 	// ------------------------------------------------------------------------
diff --git a/flink-core/src/test/java/org/apache/flink/configuration/CoreOptionsTest.java b/flink-core/src/test/java/org/apache/flink/configuration/CoreOptionsTest.java
index 0bc59104e57..b0fd048b0d4 100644
--- a/flink-core/src/test/java/org/apache/flink/configuration/CoreOptionsTest.java
+++ b/flink-core/src/test/java/org/apache/flink/configuration/CoreOptionsTest.java
@@ -21,34 +21,53 @@ package org.apache.flink.configuration;
 import org.junit.Assert;
 import org.junit.Test;
 
+import java.util.function.Function;
+
 /**
  * Tests for {@link CoreOptions}.
  */
 public class CoreOptionsTest {
 	@Test
 	public void testGetParentFirstLoaderPatterns() {
-		Configuration config = new Configuration();
+		testParentFirst(
+			CoreOptions::getParentFirstLoaderPatterns,
+			CoreOptions.ALWAYS_PARENT_FIRST_LOADER_PATTERNS,
+			CoreOptions.ALWAYS_PARENT_FIRST_LOADER_PATTERNS_ADDITIONAL);
+	}
 
-		Assert.assertArrayEquals(
-			CoreOptions.ALWAYS_PARENT_FIRST_LOADER_PATTERNS.defaultValue().split(";"),
-			CoreOptions.getParentFirstLoaderPatterns(config));
+	@Test
+	public void testGetPluginParentFirstLoaderPatterns() {
+		testParentFirst(
+			CoreOptions::getPluginParentFirstLoaderPatterns,
+			CoreOptions.PLUGIN_ALWAYS_PARENT_FIRST_LOADER_PATTERNS,
+			CoreOptions.PLUGIN_ALWAYS_PARENT_FIRST_LOADER_PATTERNS_ADDITIONAL);
+	}
+
+	private void testParentFirst(
+			Function<Configuration, String[]> patternGetter,
+			ConfigOption<String> patternOption,
+			ConfigOption<String> additionalOption) {
+		Configuration config = new Configuration();
+		Assert.assertArrayEquals(patternOption.defaultValue().split(";"),
+			patternGetter.apply(config));
 
-		config.setString(CoreOptions.ALWAYS_PARENT_FIRST_LOADER_PATTERNS, "hello;world");
+		config.setString(patternOption, "hello;world");
 
 		Assert.assertArrayEquals(
 			"hello;world".split(";"),
-			CoreOptions.getParentFirstLoaderPatterns(config));
+			patternGetter.apply(config));
 
-		config.setString(CoreOptions.ALWAYS_PARENT_FIRST_LOADER_PATTERNS_ADDITIONAL, "how;are;you");
+		config.setString(additionalOption, "how;are;you");
 
 		Assert.assertArrayEquals(
 			"hello;world;how;are;you".split(";"),
-			CoreOptions.getParentFirstLoaderPatterns(config));
+			patternGetter.apply(config));
 
-		config.setString(CoreOptions.ALWAYS_PARENT_FIRST_LOADER_PATTERNS, "");
+		config.setString(patternOption, "");
 
 		Assert.assertArrayEquals(
 			"how;are;you".split(";"),
-			CoreOptions.getParentFirstLoaderPatterns(config));
+			patternGetter.apply(config));
 	}
+
 }
