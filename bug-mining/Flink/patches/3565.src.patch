diff --git a/flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/SqlCommandParser.java b/flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/SqlCommandParser.java
index da1fd94ac39..a01b3c09aae 100644
--- a/flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/SqlCommandParser.java
+++ b/flink-table/flink-sql-client/src/main/java/org/apache/flink/table/client/cli/SqlCommandParser.java
@@ -120,7 +120,7 @@ public final class SqlCommandParser {
 			SINGLE_OPERAND),
 
 		SELECT(
-			"(SELECT.*)",
+			"(WITH.*SELECT.*|SELECT.*)",
 			SINGLE_OPERAND),
 
 		INSERT_INTO(
diff --git a/flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/SqlCommandParserTest.java b/flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/SqlCommandParserTest.java
index b5bad48a35d..718a5cbf629 100644
--- a/flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/SqlCommandParserTest.java
+++ b/flink-table/flink-sql-client/src/test/java/org/apache/flink/table/client/cli/SqlCommandParserTest.java
@@ -55,6 +55,12 @@ public class SqlCommandParserTest {
 		testValidSqlCommand(
 			"   SELECT  complicated FROM table    ",
 			new SqlCommandCall(SqlCommand.SELECT, new String[]{"SELECT  complicated FROM table"}));
+		testValidSqlCommand(
+			"WITH t as (select complicated from table) select complicated from t",
+			new SqlCommandCall(SqlCommand.SELECT, new String[]{"WITH t as (select complicated from table) select complicated from t"}));
+		testValidSqlCommand(
+			"   WITH t as (select complicated from table) select complicated from t    ",
+			new SqlCommandCall(SqlCommand.SELECT, new String[]{"WITH t as (select complicated from table) select complicated from t"}));
 		testValidSqlCommand(
 			"INSERT INTO other SELECT 1+1",
 			new SqlCommandCall(SqlCommand.INSERT_INTO, new String[]{"INSERT INTO other SELECT 1+1"}));
