diff --git a/tools/releasing/create_release_branch.sh b/tools/releasing/create_release_branch.sh
index c12e438df16..886013f3a14 100755
--- a/tools/releasing/create_release_branch.sh
+++ b/tools/releasing/create_release_branch.sh
@@ -23,11 +23,6 @@
 RELEASE_CANDIDATE=${RELEASE_CANDIDATE:-none}
 MVN=${MVN:-mvn}
 
-if [ -z "${OLD_VERSION}" ]; then
-    echo "OLD_VERSION was not set."
-    exit 1
-fi
-
 if [ -z "${NEW_VERSION}" ]; then
     echo "NEW_VERSION was not set."
     exit 1
@@ -57,7 +52,8 @@ fi
 git checkout -b $target_branch
 
 #change version in all pom files
-find . -name 'pom.xml' -type f -exec perl -pi -e 's#<version>(.*)'$OLD_VERSION'(.*)</version>#<version>${1}'$NEW_VERSION'${2}</version>#' {} \;
+#-DprocessAllModules is required for force-shading to be picked up
+$MVN org.codehaus.mojo:versions-maven-plugin:2.8.1:set -DnewVersion=$NEW_VERSION -DprocessAllModules -DgenerateBackupPoms=false --quiet
 
 pushd tools
 ./releasing/update_japicmp_configuration.sh
diff --git a/tools/releasing/update_branch_version.sh b/tools/releasing/update_branch_version.sh
index 0559487c028..7a3bea1d276 100755
--- a/tools/releasing/update_branch_version.sh
+++ b/tools/releasing/update_branch_version.sh
@@ -22,11 +22,6 @@
 ##
 MVN=${MVN:-mvn}
 
-if [ -z "${OLD_VERSION}" ]; then
-    echo "OLD_VERSION was not set."
-    exit 1
-fi
-
 if [ -z "${NEW_VERSION}" ]; then
     echo "NEW_VERSION was not set."
     exit 1
@@ -49,7 +44,9 @@ fi
 cd ..
 
 #change version in all pom files
-find . -name 'pom.xml' -type f -exec perl -pi -e 's#<version>(.*)'$OLD_VERSION'(.*)</version>#<version>${1}'$NEW_VERSION'${2}</version>#' {} \;
+#-DprocessAllModules is required for force-shading to be picked up
+$MVN org.codehaus.mojo:versions-maven-plugin:2.8.1:set -DnewVersion=$NEW_VERSION -DprocessAllModules -DgenerateBackupPoms=false --quiet
+
 
 #change version of documentation
 cd docs
