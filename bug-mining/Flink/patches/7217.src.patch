diff --git a/flink-python/apache-flink-libraries/setup.py b/flink-python/apache-flink-libraries/setup.py
index 39019ca5a50..a1b6081426d 100644
--- a/flink-python/apache-flink-libraries/setup.py
+++ b/flink-python/apache-flink-libraries/setup.py
@@ -21,12 +21,12 @@ import glob
 import io
 import os
 import platform
-import re
 import subprocess
 import sys
 from shutil import copytree, copy, rmtree
 
 from setuptools import setup
+from xml.etree import ElementTree as ET
 
 
 def remove_if_exists(file_path):
@@ -98,13 +98,17 @@ try:
             print("Temp path for symlink to parent already exists {0}".format(TEMP_PATH),
                   file=sys.stderr)
             sys.exit(-1)
-        flink_version = re.sub("[.]dev.*", "-SNAPSHOT", VERSION)
-        flink_homes = glob.glob('../../flink-dist/target/flink-*-bin/flink-*')
-        if len(flink_homes) != 1:
-            print("Exactly one Flink home directory must exist, but found: {0}".format(flink_homes),
-                  file=sys.stderr)
+        flink_version = ET.parse("../../pom.xml").getroot().find(
+            'POM:version',
+            namespaces={
+                'POM': 'http://maven.apache.org/POM/4.0.0'
+            }).text
+        if not flink_version:
+            print("Not able to get flink version", file=sys.stderr)
             sys.exit(-1)
-        FLINK_HOME = os.path.abspath(flink_homes[0])
+        print("Detected flink version: {0}".format(flink_version))
+        FLINK_HOME = os.path.abspath(
+            "../../flink-dist/target/flink-%s-bin/flink-%s" % (flink_version, flink_version))
 
         incorrect_invocation_message = """
 If you are installing pyflink from flink source, you must first build Flink and
diff --git a/flink-python/setup.py b/flink-python/setup.py
index 4911ba8fd48..44109e2c772 100644
--- a/flink-python/setup.py
+++ b/flink-python/setup.py
@@ -17,7 +17,6 @@
 ################################################################################
 from __future__ import print_function
 
-import glob
 import io
 import os
 import platform
@@ -27,6 +26,7 @@ from distutils.command.build_ext import build_ext
 from shutil import copytree, copy, rmtree
 
 from setuptools import setup, Extension
+from xml.etree import ElementTree as ET
 
 if sys.version_info < (3, 7):
     print("Python versions prior to 3.7 are not supported for PyFlink.",
@@ -208,13 +208,18 @@ try:
             print("Temp path for symlink to parent already exists {0}".format(TEMP_PATH),
                   file=sys.stderr)
             sys.exit(-1)
-        flink_version = re.sub("[.]dev.*", "-SNAPSHOT", VERSION)
-        flink_homes = glob.glob('../flink-dist/target/flink-*-bin/flink-*')
-        if len(flink_homes) != 1:
-            print("Exactly one Flink home directory must exist, but found: {0}".format(flink_homes),
-                  file=sys.stderr)
+        namespace = "http://maven.apache.org/POM/4.0.0"
+        flink_version = ET.parse("../pom.xml").getroot().find(
+            'POM:version',
+            namespaces={
+                'POM': 'http://maven.apache.org/POM/4.0.0'
+            }).text
+        if not flink_version:
+            print("Not able to get flink version", file=sys.stderr)
             sys.exit(-1)
-        FLINK_HOME = os.path.abspath(flink_homes[0])
+        print("Detected flink version: {0}".format(flink_version))
+        FLINK_HOME = os.path.abspath(
+            "../flink-dist/target/flink-%s-bin/flink-%s" % (flink_version, flink_version))
         FLINK_ROOT = os.path.abspath("..")
         FLINK_DIST = os.path.join(FLINK_ROOT, "flink-dist")
         FLINK_BIN = os.path.join(FLINK_DIST, "src/main/flink-bin")
