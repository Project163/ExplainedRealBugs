diff --git a/flink-dist/src/main/flink-bin/bin/config.sh b/flink-dist/src/main/flink-bin/bin/config.sh
index c0a48ba610b..75757dc2497 100755
--- a/flink-dist/src/main/flink-bin/bin/config.sh
+++ b/flink-dist/src/main/flink-bin/bin/config.sh
@@ -192,6 +192,19 @@ JVM_ARGS=""
 # Default classpath 
 CLASSPATH=`manglePathList $( echo $FLINK_LIB_DIR/*.jar . | sed 's/ /:/g' )`
 
+# Check if deprecated HADOOP_HOME is set.
+if [ -n "$HADOOP_HOME" ]; then
+    # HADOOP_HOME is set. Check if its a Hadoop 1.x or 2.x HADOOP_HOME path
+    if [ -d "$HADOOP_HOME/conf" ]; then
+        # its a Hadoop 1.x
+        HADOOP_CONF_DIR="$HADOOP_CONF_DIR:$HADOOP_HOME/conf"
+    fi
+    if [ -d "$HADOOP_HOME/etc/hadoop" ]; then
+        # Its Hadoop 2.2+
+        HADOOP_CONF_DIR="$HADOOP_CONF_DIR:$HADOOP_HOME/etc/hadoop"
+    fi
+fi
+
 # Auxilliary function which extracts the name of host from a line which
 # also potentialy includes topology information and the taskManager type
 extractHostName() {
diff --git a/flink-yarn/src/main/java/org/apache/flink/yarn/FlinkYarnClient.java b/flink-yarn/src/main/java/org/apache/flink/yarn/FlinkYarnClient.java
index 6b973937f21..23ef5232888 100644
--- a/flink-yarn/src/main/java/org/apache/flink/yarn/FlinkYarnClient.java
+++ b/flink-yarn/src/main/java/org/apache/flink/yarn/FlinkYarnClient.java
@@ -269,7 +269,7 @@ public class FlinkYarnClient extends AbstractFlinkYarnClient {
 		}
 
 		// check if required Hadoop environment variables are set. If not, warn user
-		if(System.getenv("HADOOP_CONF_DIR") == null ||
+		if(System.getenv("HADOOP_CONF_DIR") == null &&
 				System.getenv("YARN_CONF_DIR") == null) {
 			LOG.warn("Neither the HADOOP_CONF_DIR nor the YARN_CONF_DIR environment variable is set." +
 					"The Flink YARN Client needs one of these to be set to properly load the Hadoop " +
