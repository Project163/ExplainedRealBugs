diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/filecache/FileCache.java b/flink-runtime/src/main/java/org/apache/flink/runtime/filecache/FileCache.java
index 2657145ddf7..9504859d191 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/filecache/FileCache.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/filecache/FileCache.java
@@ -285,11 +285,13 @@ public class FileCache {
 
 		private final Path filePath;
 		private final Path cachedPath;
-		private boolean executable;
+		private final boolean executable;
+		private final boolean isZipped;
 
 		public CopyFromDFSProcess(DistributedCacheEntry e, Path cachedPath) {
 			this.filePath = new Path(e.filePath);
 			this.executable = e.isExecutable;
+			this.isZipped = e.isZipped;
 
 			String sourceFile = e.filePath;
 			int posOfSep = sourceFile.lastIndexOf("/");
@@ -306,6 +308,9 @@ public class FileCache {
 			// let exceptions propagate. we can retrieve them later from
 			// the future and report them upon access to the result
 			FileUtils.copy(filePath, cachedPath, this.executable);
+			if (isZipped) {
+				return FileUtils.expandDirectory(cachedPath, cachedPath.getParent());
+			}
 			return cachedPath;
 		}
 	}
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/filecache/FileCacheDirectoriesTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/filecache/FileCacheDirectoriesTest.java
index 3754f46c8c7..df979107368 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/filecache/FileCacheDirectoriesTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/filecache/FileCacheDirectoriesTest.java
@@ -117,27 +117,25 @@ public class FileCacheDirectoriesTest {
 
 	@Test
 	public void testDirectoryDownloadedFromBlob() throws Exception {
-		JobID jobID = new JobID();
-		ExecutionAttemptID attemptID = new ExecutionAttemptID();
-
-		final String fileName = "test_file";
-		// copy / create the file
 		final DistributedCache.DistributedCacheEntry entry = new DistributedCache.DistributedCacheEntry(
-			fileName,
+			"test_file",
 			false,
 			InstantiationUtil.serializeObject(permanentBlobKey),
 			true);
-		Future<Path> copyResult = fileCache.createTmpFile(fileName, entry, jobID, attemptID);
 
-		final Path dstPath = copyResult.get();
-		final FileSystem fs = dstPath.getFileSystem();
-		final FileStatus fileStatus = fs.getFileStatus(dstPath);
-		assertTrue(fileStatus.isDir());
+		testDirectoryDownloaded(entry);
+	}
 
-		final Path cacheFile = new Path(dstPath, "cacheFile");
-		assertTrue(fs.exists(cacheFile));
-		final String actualContent = FileUtils.readFileUtf8(new File(cacheFile.getPath()));
-		assertEquals(testFileContent, actualContent);
+	@Test
+	public void testDirectoryDownloadedFromDFS() throws Exception {
+		final String zippedFile = blobService.getFile(new JobID(), permanentBlobKey).getAbsolutePath();
+		final DistributedCache.DistributedCacheEntry entry = new DistributedCache.DistributedCacheEntry(
+			zippedFile,
+			false,
+			null,
+			true);
+
+		testDirectoryDownloaded(entry);
 	}
 
 	@Test
@@ -199,4 +197,23 @@ public class FileCacheDirectoriesTest {
 			}
 		}
 	}
+
+	private void testDirectoryDownloaded(DistributedCache.DistributedCacheEntry entry) throws Exception {
+		JobID jobID = new JobID();
+		ExecutionAttemptID attemptID = new ExecutionAttemptID();
+
+		// copy / create the file
+		final String fileName = "test_file";
+		Future<Path> copyResult = fileCache.createTmpFile(fileName, entry, jobID, attemptID);
+
+		final Path dstPath = copyResult.get();
+		final FileSystem fs = dstPath.getFileSystem();
+		final FileStatus fileStatus = fs.getFileStatus(dstPath);
+		assertTrue(fileStatus.isDir());
+
+		final Path cacheFile = new Path(dstPath, "cacheFile");
+		assertTrue(fs.exists(cacheFile));
+		final String actualContent = FileUtils.readFileUtf8(new File(cacheFile.getPath()));
+		assertEquals(testFileContent, actualContent);
+	}
 }
diff --git a/flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNITCase.java b/flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNITCase.java
index 62f094f4fd1..7f6f1d910e5 100644
--- a/flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNITCase.java
+++ b/flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNITCase.java
@@ -79,7 +79,7 @@ public class YARNITCase extends YarnTestBase {
 	public void testPerJobModeWithDistributedCache() throws Exception {
 		runTest(() -> deployPerjob(
 			YarnConfigOptions.UserJarInclusion.DISABLED,
-			YarnTestCacheJob.getDistributedCacheJobGraph()));
+			YarnTestCacheJob.getDistributedCacheJobGraph(tmp.newFolder())));
 	}
 
 	private void deployPerjob(YarnConfigOptions.UserJarInclusion userJarInclusion, JobGraph jobGraph) throws Exception {
diff --git a/flink-yarn-tests/src/test/java/org/apache/flink/yarn/testjob/YarnTestCacheJob.java b/flink-yarn-tests/src/test/java/org/apache/flink/yarn/testjob/YarnTestCacheJob.java
index f40babc1462..f7853b57bb1 100644
--- a/flink-yarn-tests/src/test/java/org/apache/flink/yarn/testjob/YarnTestCacheJob.java
+++ b/flink-yarn-tests/src/test/java/org/apache/flink/yarn/testjob/YarnTestCacheJob.java
@@ -43,12 +43,14 @@ import static org.apache.flink.util.Preconditions.checkState;
  */
 public class YarnTestCacheJob {
 	private static final List<String> LIST = ImmutableList.of("test1", "test2");
+	private static final String TEST_DIRECTORY_NAME = "test_directory";
 
-	public static JobGraph getDistributedCacheJobGraph() {
+	public static JobGraph getDistributedCacheJobGraph(File testDirectory) {
 		final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();
 
-		String cacheFilePath = Thread.currentThread().getContextClassLoader().getResource("cache.properties").getFile();
-
+		final String cacheFilePath = Thread.currentThread().getContextClassLoader()
+			.getResource("cache.properties").getFile();
+		env.registerCachedFile(testDirectory.getAbsolutePath(), TEST_DIRECTORY_NAME);
 		env.registerCachedFile(cacheFilePath, "cacheFile", false);
 
 		env.addSource(new GenericSourceFunction(LIST, TypeInformation.of(String.class)))
@@ -68,16 +70,21 @@ public class YarnTestCacheJob {
 		@Override
 		public void open(Configuration config) throws IOException {
 			// access cached file via RuntimeContext and DistributedCache
-			File cacheFile = getRuntimeContext().getDistributedCache().getFile("cacheFile");
-			FileInputStream inputStream = new FileInputStream(cacheFile);
+			final File cacheFile = getRuntimeContext().getDistributedCache().getFile("cacheFile");
+			final FileInputStream inputStream = new FileInputStream(cacheFile);
 			properties = new Properties();
 			properties.load(inputStream);
 			checkArgument(properties.size() == 2, "The property file should contains 2 pair of key values");
+
+			final File testDirectory = getRuntimeContext().getDistributedCache().getFile(TEST_DIRECTORY_NAME);
+			if (!testDirectory.isDirectory()) {
+				throw new RuntimeException(String.format("%s is not a directory!", testDirectory.getAbsolutePath()));
+			}
 		}
 
 		@Override
 		public String map(String value) {
-			String property = (String) properties.getOrDefault(value, "null");
+			final String property = (String) properties.getOrDefault(value, "null");
 			checkState(property.equals(value + "_property"));
 			return value;
 		}
