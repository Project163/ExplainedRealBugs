diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/io/network/partition/SortMergeResultPartition.java b/flink-runtime/src/main/java/org/apache/flink/runtime/io/network/partition/SortMergeResultPartition.java
index aaa3d42bc19..2b603a219f5 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/io/network/partition/SortMergeResultPartition.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/io/network/partition/SortMergeResultPartition.java
@@ -197,20 +197,20 @@ public class SortMergeResultPartition extends ResultPartition {
             if (resultFile == null && fileWriter != null) {
                 fileWriter.releaseQuietly();
             }
+        }
 
-            // delete the produced file only when no reader is reading now
-            readScheduler
-                    .release()
-                    .thenRun(
-                            () -> {
-                                synchronized (lock) {
-                                    if (resultFile != null) {
-                                        resultFile.deleteQuietly();
-                                        resultFile = null;
-                                    }
+        // delete the produced file only when no reader is reading now
+        readScheduler
+                .release()
+                .thenRun(
+                        () -> {
+                            synchronized (lock) {
+                                if (resultFile != null) {
+                                    resultFile.deleteQuietly();
+                                    resultFile = null;
                                 }
-                            });
-        }
+                            }
+                        });
     }
 
     @Override
