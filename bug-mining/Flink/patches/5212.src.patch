diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/ThreadInfoSampleServiceTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/ThreadInfoSampleServiceTest.java
index 48be78412a5..c3c9c98f0b0 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/ThreadInfoSampleServiceTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/ThreadInfoSampleServiceTest.java
@@ -141,7 +141,10 @@ public class ThreadInfoSampleServiceTest extends TestLogger {
         final CompletableFuture<List<ThreadInfoSample>> sampleFuture =
                 threadInfoSampleService.requestThreadInfoSamples(
                         new NotRunningTask(), requestParams);
-        assertThat(sampleFuture, FlinkMatchers.futureFailedWith(IllegalStateException.class));
+        assertThat(
+                sampleFuture,
+                FlinkMatchers.futureWillCompleteExceptionally(
+                        IllegalStateException.class, Duration.ofSeconds(10)));
     }
 
     private static class TestTask implements SampleableTask {
