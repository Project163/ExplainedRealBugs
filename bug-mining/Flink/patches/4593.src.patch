diff --git a/flink-libraries/flink-state-processing-api/src/main/java/org/apache/flink/state/api/runtime/SavepointEnvironment.java b/flink-libraries/flink-state-processing-api/src/main/java/org/apache/flink/state/api/runtime/SavepointEnvironment.java
index f0fc8504a4c..00de099789f 100644
--- a/flink-libraries/flink-state-processing-api/src/main/java/org/apache/flink/state/api/runtime/SavepointEnvironment.java
+++ b/flink-libraries/flink-state-processing-api/src/main/java/org/apache/flink/state/api/runtime/SavepointEnvironment.java
@@ -101,7 +101,7 @@ public class SavepointEnvironment implements Environment {
 	private SavepointEnvironment(RuntimeContext ctx, Configuration configuration, int maxParallelism, int indexOfSubtask, PrioritizedOperatorSubtaskState prioritizedOperatorSubtaskState) {
 		this.jobID = new JobID();
 		this.vertexID = new JobVertexID();
-		this.attemptID = new ExecutionAttemptID(new ExecutionVertexID(vertexID, 0), 0);
+		this.attemptID = new ExecutionAttemptID(jobID, new ExecutionVertexID(vertexID, 0), 0);
 		this.ctx = Preconditions.checkNotNull(ctx);
 		this.configuration = Preconditions.checkNotNull(configuration);
 
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/Execution.java b/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/Execution.java
index 5ad96268be5..6e5e2651a9a 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/Execution.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/Execution.java
@@ -216,7 +216,7 @@ public class Execution implements AccessExecution, Archiveable<ArchivedExecution
 
 		this.executor = checkNotNull(executor);
 		this.vertex = checkNotNull(vertex);
-		this.attemptId = new ExecutionAttemptID(vertex.getID(), attemptNumber);
+		this.attemptId = new ExecutionAttemptID(vertex.getJobId(), vertex.getID(), attemptNumber);
 		this.rpcTimeout = checkNotNull(rpcTimeout);
 
 		this.globalModVersion = globalModVersion;
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionAttemptID.java b/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionAttemptID.java
index c6d1acc4eee..10b7667068c 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionAttemptID.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ExecutionAttemptID.java
@@ -19,12 +19,15 @@
 package org.apache.flink.runtime.executiongraph;
 
 import org.apache.flink.annotation.VisibleForTesting;
+import org.apache.flink.api.common.JobID;
 import org.apache.flink.runtime.jobgraph.JobVertexID;
 import org.apache.flink.runtime.scheduler.strategy.ExecutionVertexID;
 
 import org.apache.flink.shaded.netty4.io.netty.buffer.ByteBuf;
 import org.apache.flink.util.Preconditions;
 
+import java.util.Objects;
+
 /**
  * Unique identifier for the attempt to execute a tasks. Multiple attempts happen
  * in cases of failures and recovery.
@@ -33,6 +36,7 @@ public class ExecutionAttemptID implements java.io.Serializable {
 
 	private static final long serialVersionUID = -1169683445778281344L;
 
+	private final JobID jobId;
 	private final ExecutionVertexID executionVertexId;
 	private final int attemptNumber;
 
@@ -40,24 +44,38 @@ public class ExecutionAttemptID implements java.io.Serializable {
 	 * Get a random execution attempt id.
 	 */
 	public ExecutionAttemptID() {
-		this(new ExecutionVertexID(new JobVertexID(), 0), 0);
+		this(new JobID(), new ExecutionVertexID(new JobVertexID(), 0), 0);
 	}
 
-	public ExecutionAttemptID(ExecutionVertexID executionVertexId, int attemptNumber) {
+	public ExecutionAttemptID(JobID jobId, ExecutionVertexID executionVertexId, int attemptNumber) {
 		Preconditions.checkState(attemptNumber >= 0);
+		this.jobId = Preconditions.checkNotNull(jobId);
 		this.executionVertexId = Preconditions.checkNotNull(executionVertexId);
 		this.attemptNumber = attemptNumber;
 	}
 
 	public void writeTo(ByteBuf buf) {
+		writeJobIdTo(buf);
 		executionVertexId.writeTo(buf);
 		buf.writeInt(this.attemptNumber);
 	}
 
 	public static ExecutionAttemptID fromByteBuf(ByteBuf buf) {
+		final JobID jobId = jobIdFromByteBuf(buf);
 		final ExecutionVertexID executionVertexId = ExecutionVertexID.fromByteBuf(buf);
 		final int attemptNumber = buf.readInt();
-		return new ExecutionAttemptID(executionVertexId, attemptNumber);
+		return new ExecutionAttemptID(jobId, executionVertexId, attemptNumber);
+	}
+
+	private static JobID jobIdFromByteBuf(ByteBuf buf) {
+		final long lower = buf.readLong();
+		final long upper = buf.readLong();
+		return new JobID(lower, upper);
+	}
+
+	private void writeJobIdTo(ByteBuf buf) {
+		buf.writeLong(jobId.getLowerPart());
+		buf.writeLong(jobId.getUpperPart());
 	}
 
 	@VisibleForTesting
@@ -70,13 +88,19 @@ public class ExecutionAttemptID implements java.io.Serializable {
 		return executionVertexId;
 	}
 
+	@VisibleForTesting
+	public JobID getJobId() {
+		return jobId;
+	}
+
 	@Override
 	public boolean equals(Object obj) {
 		if (obj == this) {
 			return true;
 		} else if (obj != null && obj.getClass() == getClass()) {
 			ExecutionAttemptID that = (ExecutionAttemptID) obj;
-			return that.executionVertexId.equals(this.executionVertexId)
+			return that.jobId.equals(this.jobId)
+				&& that.executionVertexId.equals(this.executionVertexId)
 				&& that.attemptNumber == this.attemptNumber;
 		} else {
 			return false;
@@ -85,11 +109,11 @@ public class ExecutionAttemptID implements java.io.Serializable {
 
 	@Override
 	public int hashCode() {
-		return this.executionVertexId.hashCode() * 31 + this.attemptNumber;
+		return Objects.hash(jobId, executionVertexId, attemptNumber);
 	}
 
 	@Override
 	public String toString() {
-		return executionVertexId.toString() + "_" + attemptNumber;
+		return jobId.toString() + "_" + executionVertexId.toString() + "_" + attemptNumber;
 	}
 }
diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java b/flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java
index 512451c7eab..1a012a998b7 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/io/network/netty/NettyMessage.java
@@ -512,7 +512,7 @@ public abstract class NettyMessage {
 			ByteBuf result = null;
 
 			try {
-				result = allocateBuffer(allocator, ID, 20 + 24 + 4 + 16 + 4);
+				result = allocateBuffer(allocator, ID, 20 + 40 + 4 + 16 + 4);
 
 				partitionId.getPartitionId().writeTo(result);
 				partitionId.getProducerId().writeTo(result);
@@ -573,7 +573,7 @@ public abstract class NettyMessage {
 				// TODO Directly serialize to Netty's buffer
 				ByteBuffer serializedEvent = EventSerializer.toSerializedEvent(event);
 
-				result = allocateBuffer(allocator, ID, 4 + serializedEvent.remaining() + 20 + 24 + 16);
+				result = allocateBuffer(allocator, ID, 4 + serializedEvent.remaining() + 20 + 40 + 16);
 
 				result.writeInt(serializedEvent.remaining());
 				result.writeBytes(serializedEvent);
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/checkpoint/CheckpointCoordinatorTestingUtils.java b/flink-runtime/src/test/java/org/apache/flink/runtime/checkpoint/CheckpointCoordinatorTestingUtils.java
index 2dc46eb580f..6fe7522068b 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/checkpoint/CheckpointCoordinatorTestingUtils.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/checkpoint/CheckpointCoordinatorTestingUtils.java
@@ -441,6 +441,7 @@ public class CheckpointCoordinatorTestingUtils {
 
 		ExecutionVertex vertex = mock(ExecutionVertex.class);
 		when(vertex.getID()).thenReturn(ExecutionGraphTestUtils.createRandomExecutionVertexId());
+		when(vertex.getJobId()).thenReturn(new JobID());
 
 		final Execution exec = spy(new Execution(
 			mock(Executor.class),
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/AllVerticesIteratorTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/AllVerticesIteratorTest.java
index 4ecac9ba97f..783440a3f7d 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/AllVerticesIteratorTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/AllVerticesIteratorTest.java
@@ -18,6 +18,7 @@
 
 package org.apache.flink.runtime.executiongraph;
 
+import org.apache.flink.api.common.JobID;
 import org.apache.flink.configuration.Configuration;
 import org.apache.flink.runtime.akka.AkkaUtils;
 import org.apache.flink.runtime.jobgraph.JobVertex;
@@ -54,6 +55,7 @@ public class AllVerticesIteratorTest {
 			Configuration jobConf = new Configuration();
 			Mockito.when(eg.getFutureExecutor()).thenReturn(TestingUtils.directExecutionContext());
 			Mockito.when(eg.getJobConfiguration()).thenReturn(jobConf);
+			Mockito.when(eg.getJobID()).thenReturn(new JobID());
 
 			ExecutionJobVertex ejv1 = new ExecutionJobVertex(eg, v1, 1,
 					AkkaUtils.getDefaultTimeout());
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/ExecutionGraphConstructionTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/ExecutionGraphConstructionTest.java
index 39e88de732d..b8d24d8bc4b 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/ExecutionGraphConstructionTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/executiongraph/ExecutionGraphConstructionTest.java
@@ -34,6 +34,8 @@ import org.apache.flink.runtime.jobgraph.tasks.AbstractInvokable;
 import org.apache.flink.runtime.jobmanager.scheduler.CoLocationConstraint;
 import org.apache.flink.runtime.jobmanager.scheduler.SlotSharingGroup;
 
+import org.apache.flink.shaded.guava18.com.google.common.collect.Sets;
+
 import org.junit.Test;
 import org.mockito.Matchers;
 
@@ -44,9 +46,12 @@ import java.util.HashSet;
 import java.util.List;
 import java.util.Set;
 
+import static org.hamcrest.Matchers.empty;
+import static org.hamcrest.Matchers.is;
 import static org.junit.Assert.assertEquals;
 import static org.junit.Assert.assertNotNull;
 import static org.junit.Assert.assertNull;
+import static org.junit.Assert.assertThat;
 import static org.junit.Assert.assertTrue;
 import static org.junit.Assert.fail;
 import static org.mockito.Mockito.mock;
@@ -61,6 +66,30 @@ public class ExecutionGraphConstructionTest {
 		return TestingExecutionGraphBuilder.newBuilder().build();
 	}
 
+	@Test
+	public void testExecutionAttemptIdInTwoIdenticalJobsIsNotSame() throws Exception {
+		JobVertex v1 = new JobVertex("vertex1");
+		JobVertex v2 = new JobVertex("vertex2");
+		JobVertex v3 = new JobVertex("vertex3");
+
+		v1.setParallelism(5);
+		v2.setParallelism(7);
+		v3.setParallelism(2);
+
+		v1.setInvokableClass(AbstractInvokable.class);
+		v2.setInvokableClass(AbstractInvokable.class);
+		v3.setInvokableClass(AbstractInvokable.class);
+
+		List<JobVertex> ordered = new ArrayList<>(Arrays.asList(v1, v2, v3));
+
+		ExecutionGraph eg1 = createExecutionGraph();
+		ExecutionGraph eg2 = createExecutionGraph();
+		eg1.attachJobGraph(ordered);
+		eg2.attachJobGraph(ordered);
+
+		assertThat(Sets.intersection(eg1.getRegisteredExecutions().keySet(), eg2.getRegisteredExecutions().keySet()), is(empty()));
+	}
+
 	/**
 	 * Creates a JobGraph of the following form:
 	 * 
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java
index ff4fc644e2f..7863b6639d6 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmaster/JobMasterTest.java
@@ -1591,7 +1591,7 @@ public class JobMasterTest extends TestLogger {
 			final ResultPartitionDeploymentDescriptor partition = tdd.getProducedPartitions().iterator().next();
 
 			final ExecutionAttemptID executionAttemptId = tdd.getExecutionAttemptId();
-			final ExecutionAttemptID copiedExecutionAttemptId = new ExecutionAttemptID(executionAttemptId.getExecutionVertexId(), executionAttemptId.getAttemptNumber());
+			final ExecutionAttemptID copiedExecutionAttemptId = new ExecutionAttemptID(executionAttemptId.getJobId(), executionAttemptId.getExecutionVertexId(), executionAttemptId.getAttemptNumber());
 
 			// finish the producer task
 			jobMasterGateway.updateTaskExecutionState(new TaskExecutionState(producerConsumerJobGraph.getJobID(), executionAttemptId, ExecutionState.FINISHED)).get();
