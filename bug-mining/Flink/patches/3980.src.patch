diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskManagerRunnerStartupTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskManagerRunnerStartupTest.java
index 968f916a95d..091ab01eaa7 100644
--- a/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskManagerRunnerStartupTest.java
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/taskexecutor/TaskManagerRunnerStartupTest.java
@@ -25,12 +25,14 @@ import org.apache.flink.configuration.MemorySize;
 import org.apache.flink.configuration.NettyShuffleEnvironmentOptions;
 import org.apache.flink.configuration.TaskManagerOptions;
 import org.apache.flink.runtime.blob.BlobCacheService;
+import org.apache.flink.runtime.blob.VoidBlobStore;
 import org.apache.flink.runtime.clusterframework.types.ResourceID;
-import org.apache.flink.runtime.heartbeat.HeartbeatServices;
+import org.apache.flink.runtime.heartbeat.TestingHeartbeatServices;
 import org.apache.flink.runtime.highavailability.HighAvailabilityServices;
 import org.apache.flink.runtime.highavailability.TestingHighAvailabilityServices;
 import org.apache.flink.runtime.metrics.NoOpMetricRegistry;
 import org.apache.flink.runtime.rpc.RpcService;
+import org.apache.flink.runtime.rpc.TestingRpcServiceResource;
 import org.apache.flink.util.IOUtils;
 import org.apache.flink.util.TestLogger;
 
@@ -38,6 +40,7 @@ import org.apache.commons.io.FileUtils;
 import org.junit.After;
 import org.junit.Assume;
 import org.junit.Before;
+import org.junit.ClassRule;
 import org.junit.Rule;
 import org.junit.Test;
 import org.junit.rules.TemporaryFolder;
@@ -48,8 +51,6 @@ import java.net.InetAddress;
 import java.net.ServerSocket;
 
 import static org.junit.Assert.fail;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
 
 /**
  * Tests that check how the {@link TaskManagerRunner} behaves when encountering startup problems.
@@ -58,10 +59,13 @@ public class TaskManagerRunnerStartupTest extends TestLogger {
 
 	private static final String LOCAL_HOST = "localhost";
 
+	@ClassRule
+	public static final TestingRpcServiceResource RPC_SERVICE_RESOURCE = new TestingRpcServiceResource();
+
 	@Rule
 	public final TemporaryFolder tempFolder = new TemporaryFolder();
 
-	private final RpcService rpcService = createRpcService();
+	private final RpcService rpcService = RPC_SERVICE_RESOURCE.getTestingRpcService();
 
 	private TestingHighAvailabilityServices highAvailabilityServices;
 
@@ -159,12 +163,6 @@ public class TaskManagerRunnerStartupTest extends TestLogger {
 		return TaskExecutorResourceUtils.adjustForLocalExecution(new Configuration());
 	}
 
-	private static RpcService createRpcService() {
-		final RpcService rpcService = mock(RpcService.class);
-		when(rpcService.getAddress()).thenReturn(LOCAL_HOST);
-		return rpcService;
-	}
-
 	private static void startTaskManager(
 		Configuration configuration,
 		RpcService rpcService,
@@ -176,9 +174,12 @@ public class TaskManagerRunnerStartupTest extends TestLogger {
 			ResourceID.generate(),
 			rpcService,
 			highAvailabilityServices,
-			mock(HeartbeatServices.class),
+			new TestingHeartbeatServices(),
 			NoOpMetricRegistry.INSTANCE,
-			mock(BlobCacheService.class),
+			new BlobCacheService(
+				configuration,
+				new VoidBlobStore(),
+				null),
 			false,
 			error -> {});
 	}
