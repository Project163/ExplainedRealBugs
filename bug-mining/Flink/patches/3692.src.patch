diff --git a/flink-core/src/test/java/org/apache/flink/api/common/typeutils/ClassRelocator.java b/flink-core/src/test/java/org/apache/flink/api/common/typeutils/ClassRelocator.java
index 62ff88fec7d..04f221e7583 100644
--- a/flink-core/src/test/java/org/apache/flink/api/common/typeutils/ClassRelocator.java
+++ b/flink-core/src/test/java/org/apache/flink/api/common/typeutils/ClassRelocator.java
@@ -148,6 +148,7 @@ public final class ClassRelocator {
 
 			return renaming.getDefinedClassesUnderRoot()
 				.stream()
+				.filter(klass -> klass.getClassLoader() != null)
 				.collect(Collectors.toMap(renaming::newNameFor, classToTransform -> {
 					ClassReader providerClassReader = classReaderFor(classToTransform);
 					ClassWriter transformedProvider = remap(renames, providerClassReader);
