diff --git a/flink-runtime/src/main/java/org/apache/flink/runtime/execution/librarycache/BlobLibraryCacheManager.java b/flink-runtime/src/main/java/org/apache/flink/runtime/execution/librarycache/BlobLibraryCacheManager.java
index 21c6b4da8d2..c94768d7244 100644
--- a/flink-runtime/src/main/java/org/apache/flink/runtime/execution/librarycache/BlobLibraryCacheManager.java
+++ b/flink-runtime/src/main/java/org/apache/flink/runtime/execution/librarycache/BlobLibraryCacheManager.java
@@ -157,10 +157,12 @@ public final class BlobLibraryCacheManager extends TimerTask implements LibraryC
 		Preconditions.checkNotNull(task, "The task execution id must not be null.");
 
 		synchronized (lockObject) {
-			LibraryCacheEntry entry = cacheEntries.remove(jobId);
+			LibraryCacheEntry entry = cacheEntries.get(jobId);
 
 			if (entry != null) {
 				if (entry.unregister(task)) {
+					cacheEntries.remove(jobId);
+
 					entry.releaseClassLoader();
 
 					for (BlobKey key : entry.getLibraries()) {
