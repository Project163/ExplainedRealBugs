<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:35:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-10454] Travis fails on ScheduleOrUpdateConsumersTest</title>
                <link>https://issues.apache.org/jira/browse/FLINK-10454</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Can even be reproduced locally. Maybe a duplicate but as a reminder.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.flink.runtime.jobmanager.scheduler.ScheduleOrUpdateConsumersTest Time elapsed: 4.514 sec &amp;lt;&amp;lt;&amp;lt; ERROR! java.net.BindException: Address already in use at sun.nio.ch.Net.bind0(Native Method) at sun.nio.ch.Net.bind(Net.java:433) at sun.nio.ch.Net.bind(Net.java:425) at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223) at org.apache.flink.shaded.netty4.io.netty.channel.socket.nio.NioServerSocketChannel.doBind(NioServerSocketChannel.java:128) at org.apache.flink.shaded.netty4.io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:558) at org.apache.flink.shaded.netty4.io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1358) at org.apache.flink.shaded.netty4.io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:501) at org.apache.flink.shaded.netty4.io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:486) at org.apache.flink.shaded.netty4.io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:1019) at org.apache.flink.shaded.netty4.io.netty.channel.AbstractChannel.bind(AbstractChannel.java:254) at org.apache.flink.shaded.netty4.io.netty.bootstrap.AbstractBootstrap$2.run(AbstractBootstrap.java:366) at org.apache.flink.shaded.netty4.io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) at org.apache.flink.shaded.netty4.io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404) at org.apache.flink.shaded.netty4.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463) at org.apache.flink.shaded.netty4.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884) at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13187923">FLINK-10454</key>
            <summary>Travis fails on ScheduleOrUpdateConsumersTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="tison">Zili Chen</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 27 Sep 2018 14:00:46 +0000</created>
                <updated>Fri, 5 Oct 2018 18:27:34 +0000</updated>
                            <resolved>Fri, 5 Oct 2018 18:27:34 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.7.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16637893" author="till.rohrmann" created="Thu, 4 Oct 2018 07:35:45 +0000"  >&lt;p&gt;Looks like the a port is not free. I think this problem could be solved by hardening the port selection of the test.&lt;/p&gt;</comment>
                            <comment id="16639491" author="till.rohrmann" created="Fri, 5 Oct 2018 08:48:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Tison&quot; class=&quot;user-hover&quot; rel=&quot;tison&quot;&gt;Tison&lt;/a&gt; could you link the maven logs where you encountered the problem? They help us by stating the commit revision.&lt;/p&gt;</comment>
                            <comment id="16639508" author="tison" created="Fri, 5 Oct 2018 09:05:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/434894763&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/434894763&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://api.travis-ci.org/v3/job/434894763/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/434894763/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/434894758&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/434894758&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://api.travis-ci.org/v3/job/434894758/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/434894758/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;These are on a pull request branch, but since it can be reproduced locally(on master branch) and the pr has nothing to do with it I file this issue.&lt;/p&gt;</comment>
                            <comment id="16640032" author="githubbot" created="Fri, 5 Oct 2018 16:17:15 +0000"  >&lt;p&gt;tillrohrmann opened a new pull request #6799: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10454&quot; title=&quot;Travis fails on ScheduleOrUpdateConsumersTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10454&quot;&gt;&lt;del&gt;FLINK-10454&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Start MiniCluster with rest port 0&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6799&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6799&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   Start the MiniCluster used by `ScheduleOrUpdateConsumersTest` and `SlotCountExceedingParallelismTest` with a rest port 0 in order to avoid port conflicts when these two tests are executed concurrently.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This change is a trivial rework / code cleanup without any test coverage.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (no)&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Documentation&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Does this pull request introduce a new feature? (no)&lt;/li&gt;
	&lt;li&gt;If yes, how is the feature documented? (not applicable)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640188" author="githubbot" created="Fri, 5 Oct 2018 18:27:16 +0000"  >&lt;p&gt;tillrohrmann closed pull request #6799: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-10454&quot; title=&quot;Travis fails on ScheduleOrUpdateConsumersTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-10454&quot;&gt;&lt;del&gt;FLINK-10454&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;tests&amp;#93;&lt;/span&gt; Start MiniCluster with rest port 0&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6799&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6799&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/SlotCountExceedingParallelismTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/SlotCountExceedingParallelismTest.java&lt;br/&gt;
index 6d58928d5e9..7782a8e2feb 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/SlotCountExceedingParallelismTest.java&lt;br/&gt;
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/SlotCountExceedingParallelismTest.java&lt;br/&gt;
@@ -20,6 +20,7 @@&lt;/p&gt;

&lt;p&gt; import org.apache.flink.configuration.AkkaOptions;&lt;br/&gt;
 import org.apache.flink.configuration.Configuration;&lt;br/&gt;
+import org.apache.flink.configuration.RestOptions;&lt;br/&gt;
 import org.apache.flink.runtime.client.JobExecutionException;&lt;br/&gt;
 import org.apache.flink.runtime.execution.Environment;&lt;br/&gt;
 import org.apache.flink.runtime.io.network.api.reader.RecordReader;&lt;br/&gt;
@@ -41,6 +42,11 @@&lt;/p&gt;

&lt;p&gt; import java.util.BitSet;&lt;/p&gt;

&lt;p&gt;+/**&lt;br/&gt;
+ * Tests that Flink can execute jobs with a higher parallelism than available number&lt;br/&gt;
+ * of slots. This effectively tests that Flink can execute jobs with blocking results&lt;br/&gt;
+ * in a staged fashion.&lt;br/&gt;
+ */&lt;br/&gt;
 public class SlotCountExceedingParallelismTest extends TestLogger {&lt;/p&gt;

&lt;p&gt; 	// Test configuration&lt;br/&gt;
@@ -55,6 +61,7 @@&lt;br/&gt;
 	@BeforeClass&lt;br/&gt;
 	public static void setUp() throws Exception {&lt;br/&gt;
 		final Configuration config = new Configuration();&lt;br/&gt;
+		config.setInteger(RestOptions.PORT, 0);&lt;br/&gt;
 		config.setString(AkkaOptions.ASK_TIMEOUT, TestingUtils.DEFAULT_AKKA_ASK_TIMEOUT());&lt;/p&gt;

&lt;p&gt; 		final MiniClusterConfiguration miniClusterConfiguration = new MiniClusterConfiguration.Builder()&lt;br/&gt;
diff --git a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/scheduler/ScheduleOrUpdateConsumersTest.java b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/scheduler/ScheduleOrUpdateConsumersTest.java&lt;br/&gt;
index aee526dc153..eab4eabd6aa 100644&lt;br/&gt;
&amp;#8212; a/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/scheduler/ScheduleOrUpdateConsumersTest.java&lt;br/&gt;
+++ b/flink-runtime/src/test/java/org/apache/flink/runtime/jobmanager/scheduler/ScheduleOrUpdateConsumersTest.java&lt;br/&gt;
@@ -20,6 +20,7 @@&lt;/p&gt;

&lt;p&gt; import org.apache.flink.configuration.AkkaOptions;&lt;br/&gt;
 import org.apache.flink.configuration.Configuration;&lt;br/&gt;
+import org.apache.flink.configuration.RestOptions;&lt;br/&gt;
 import org.apache.flink.runtime.execution.Environment;&lt;br/&gt;
 import org.apache.flink.runtime.io.network.api.writer.RecordWriter;&lt;br/&gt;
 import org.apache.flink.runtime.io.network.partition.ResultPartitionType;&lt;br/&gt;
@@ -44,6 +45,10 @@&lt;/p&gt;

&lt;p&gt; import static org.apache.flink.runtime.jobmanager.SlotCountExceedingParallelismTest.SubtaskIndexReceiver.CONFIG_KEY;&lt;/p&gt;

&lt;p&gt;+/**&lt;br/&gt;
+ * Tests for the lazy scheduling/updating of consumers depending on the&lt;br/&gt;
+ * producers result.&lt;br/&gt;
+ */&lt;br/&gt;
 public class ScheduleOrUpdateConsumersTest extends TestLogger {&lt;/p&gt;

&lt;p&gt; 	private static final int NUMBER_OF_TMS = 2;&lt;br/&gt;
@@ -55,6 +60,7 @@&lt;br/&gt;
 	@BeforeClass&lt;br/&gt;
 	public static void setUp() throws Exception {&lt;br/&gt;
 		final Configuration config = new Configuration();&lt;br/&gt;
+		config.setInteger(RestOptions.PORT, 0);&lt;br/&gt;
 		config.setString(AkkaOptions.ASK_TIMEOUT, TestingUtils.DEFAULT_AKKA_ASK_TIMEOUT());&lt;/p&gt;

&lt;p&gt; 		final MiniClusterConfiguration miniClusterConfiguration = new MiniClusterConfiguration.Builder()&lt;br/&gt;
@@ -89,7 +95,7 @@ public static void tearDown() throws Exception {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;ins&gt;----------&lt;/ins&gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;/pre&amp;gt;&lt;br/&gt;
 	 *&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* The pipelined receiver gets deployed after the first buffer is available and the blocking&lt;br/&gt;
+	 * &amp;lt;p&amp;gt;The pipelined receiver gets deployed after the first buffer is available and the blocking&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;one after all subtasks are finished.&lt;br/&gt;
 	 */&lt;br/&gt;
 	@Test&lt;br/&gt;
@@ -136,9 +142,13 @@ public void testMixedPipelinedAndBlockingResults() throws Exception {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	// ---------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;+	/**&lt;br/&gt;
+	 * Invokable which writes a configurable number of events to a pipelined&lt;br/&gt;
+	 * and blocking partition alternatingly.&lt;br/&gt;
+	 */&lt;br/&gt;
 	public static class BinaryRoundRobinSubtaskIndexSender extends AbstractInvokable {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static final String CONFIG_KEY = &quot;number-of-times-to-send&quot;;&lt;br/&gt;
+		static final String CONFIG_KEY = &quot;number-of-times-to-send&quot;;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		public BinaryRoundRobinSubtaskIndexSender(Environment environment) {&lt;br/&gt;
 			super(environment);&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16640189" author="till.rohrmann" created="Fri, 5 Oct 2018 18:27:34 +0000"  >&lt;p&gt;Fixed via &lt;a href=&quot;https://github.com/apache/flink/commit/c7e0cdd1921df569e496a5c18f1b63ae247a050d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/c7e0cdd1921df569e496a5c18f1b63ae247a050d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ykon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>