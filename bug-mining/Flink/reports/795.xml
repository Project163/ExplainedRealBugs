<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:22:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3268] Unstable test JobManagerSubmittedJobGraphsRecoveryITCase</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3268</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Logs for the failed test: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/103625073/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/103625073/log.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12932762">FLINK-3268</key>
            <summary>Unstable test JobManagerSubmittedJobGraphsRecoveryITCase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sewen">Stephan Ewen</assignee>
                                    <reporter username="sewen">Stephan Ewen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jan 2016 16:21:35 +0000</created>
                <updated>Thu, 18 Feb 2016 12:25:11 +0000</updated>
                            <resolved>Thu, 4 Feb 2016 14:52:52 +0000</resolved>
                                    <version>0.10.1</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15108850" author="stephanewen" created="Wed, 20 Jan 2016 16:31:56 +0000"  >&lt;p&gt;The actual test failure is that the cluster does not properly shut down. Shutdown is triggered while one blocking job is still running.&lt;/p&gt;

&lt;p&gt;The log of the shutdown period is below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;15:28:35,960 INFO  org.apache.flink.runtime.jobmanager.JobManagerSubmittedJobGraphsRecoveryITCase  - Wait that the non-leader removes the submitted job.
15:28:35,961 INFO  org.apache.flink.runtime.testingUtils.TestingTaskManager      - Stopping TaskManager akka:&lt;span class=&quot;code-comment&quot;&gt;//flink/user/taskmanager_1#-949637839.
&lt;/span&gt;15:28:35,961 INFO  org.apache.flink.runtime.testingUtils.TestingJobManager       - Stopping JobManager akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@127.0.0.1:54921/user/jobmanager.
&lt;/span&gt;15:28:35,961 INFO  org.apache.flink.runtime.testingUtils.TestingTaskManager      - Cancelling all computations and discarding all cached data.
15:28:35,962 INFO  org.apache.flink.runtime.taskmanager.Task                     - Attempting to fail task externally Blocking Vertex (1/1)
15:28:35,962 INFO  org.apache.flink.runtime.taskmanager.Task                     - Blocking Vertex (1/1) switched to FAILED with exception.
java.lang.Exception: TaskManager is shutting down.
	at org.apache.flink.runtime.taskmanager.TaskManager.postStop(TaskManager.scala:216)
	at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundPostStop(Actor.scala:475)
	at org.apache.flink.runtime.taskmanager.TaskManager.aroundPostStop(TaskManager.scala:119)
	at akka.actor.dungeon.FaultHandling$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;akka$actor$dungeon$FaultHandling$$finishTerminate(FaultHandling.scala:210)
	at akka.actor.dungeon.FaultHandling$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;terminate(FaultHandling.scala:172)
	at akka.actor.ActorCell.terminate(ActorCell.scala:369)
	at akka.actor.ActorCell.invokeAll$1(ActorCell.scala:462)
	at akka.actor.ActorCell.systemInvoke(ActorCell.scala:478)
	at akka.dispatch.Mailbox.processAllSystemMessages(Mailbox.scala:279)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:257)
	at akka.dispatch.Mailbox.run(Mailbox.scala:221)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:231)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
15:28:35,963 INFO  org.apache.flink.runtime.testingUtils.TestingJobManager       - Stopping JobManager akka.tcp:&lt;span class=&quot;code-comment&quot;&gt;//flink@127.0.0.1:54922/user/jobmanager.
&lt;/span&gt;15:28:35,964 INFO  org.apache.flink.runtime.taskmanager.Task                     - Triggering cancellation of task code Blocking Vertex (1/1) (7e54466b8bfc1f8063e7a145126688ae).
15:28:35,965 INFO  org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService  - Stopping ZooKeeperLeaderElectionService.
15:28:35,965 INFO  org.apache.flink.runtime.testingUtils.TestingTaskManager      - Disassociating from JobManager
15:28:35,965 INFO  org.apache.flink.runtime.blob.BlobCache                       - Shutting down BlobCache
15:28:35,965 INFO  org.apache.flink.runtime.leaderretrieval.ZooKeeperLeaderRetrievalService  - Stopping ZooKeeperLeaderRetrievalService.
15:28:35,973 INFO  org.apache.flink.runtime.taskmanager.Task                     - Freeing task resources &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Blocking Vertex (1/1)
15:28:40,135 ERROR org.apache.curator.framework.recipes.cache.PathChildrenCache  - 
java.lang.IllegalStateException: instance must be started before calling &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; method
	at org.apache.flink.shaded.com.google.common.base.Preconditions.checkState(Preconditions.java:173)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.getChildren(CuratorFrameworkImpl.java:379)
	at org.apache.curator.framework.recipes.cache.PathChildrenCache.refresh(PathChildrenCache.java:502)
	at org.apache.curator.framework.recipes.cache.RefreshOperation.invoke(RefreshOperation.java:35)
	at org.apache.curator.framework.recipes.cache.PathChildrenCache$9.run(PathChildrenCache.java:759)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
15:28:40,136 INFO  org.apache.flink.runtime.jobmanager.ZooKeeperSubmittedJobGraphStore  - Removed job graph 1b1fc2fc95ce37e47702697bb4b4e84d from ZooKeeper.
15:28:40,138 INFO  org.apache.flink.runtime.executiongraph.ExecutionGraph        - Blocking Vertex (1/1) (7e54466b8bfc1f8063e7a145126688ae) switched from RUNNING to CANCELING
15:28:40,138 INFO  org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionService  - Stopping ZooKeeperLeaderElectionService.
15:28:44,729 INFO  org.apache.curator.framework.state.ConnectionStateManager     - State change: SUSPENDED
15:28:45,962 ERROR org.apache.flink.runtime.jobmanager.JobManagerSubmittedJobGraphsRecoveryITCase  - 
--------------------------------------------------------------------------------
Test testSubmitJobToNonLeader(org.apache.flink.runtime.jobmanager.JobManagerSubmittedJobGraphsRecoveryITCase) failed with:
java.util.concurrent.TimeoutException: Futures timed out after [10000 milliseconds]
	at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:219)
	at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:153)
	at scala.concurrent.Await$$anonfun$ready$1.apply(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:86)
	at scala.concurrent.Await$$anonfun$ready$1.apply(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:86)
	at scala.concurrent.BlockContext$DefaultBlockContext$.blockOn(BlockContext.scala:53)
	at scala.concurrent.Await$.ready(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:86)
	at org.apache.flink.runtime.minicluster.FlinkMiniCluster.shutdown(FlinkMiniCluster.scala:321)
	at org.apache.flink.runtime.jobmanager.JobManagerSubmittedJobGraphsRecoveryITCase.testSubmitJobToNonLeader(JobManagerSubmittedJobGraphsRecoveryITCase.java:219)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15109046" author="stephanewen" created="Wed, 20 Jan 2016 18:06:26 +0000"  >&lt;p&gt;Another failure, different part of the test: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/103628601/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/103628601/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This time, ZooKeeper connection is lost while cleaning up ZooKeeper registry data.&lt;/p&gt;</comment>
                            <comment id="15131071" author="rmetzger" created="Wed, 3 Feb 2016 20:28:52 +0000"  >&lt;p&gt;Again: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/106805791/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/106805791/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15132413" author="stephanewen" created="Thu, 4 Feb 2016 14:52:52 +0000"  >&lt;p&gt;Fixed via f8f747f2290ad623bd8a4f0d8ff4708fada6792a&lt;/p&gt;

&lt;p&gt;The original failure cause tot not show up in a while (probably fixed as part of other fixes).&lt;/p&gt;

&lt;p&gt;The two recent failures (issues in a test utility) are fixed in the referenced commit.&lt;/p&gt;</comment>
                            <comment id="15136994" author="rmetzger" created="Mon, 8 Feb 2016 14:31:12 +0000"  >&lt;p&gt;I saw this again on the latest master: &lt;a href=&quot;https://s3.amazonaws.com/archive.travis-ci.org/jobs/107773279/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/107773279/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;testSubmitJobToNonLeader(org.apache.flink.runtime.jobmanager.JobManagerSubmittedJobGraphsRecoveryITCase)  Time elapsed: 19.552 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.util.concurrent.TimeoutException: Futures timed out after [10000 milliseconds]
	at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:219)
	at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:153)
	at scala.concurrent.Await$$anonfun$ready$1.apply(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:169)
	at scala.concurrent.Await$$anonfun$ready$1.apply(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:169)
	at scala.concurrent.BlockContext$DefaultBlockContext$.blockOn(BlockContext.scala:53)
	at scala.concurrent.Await$.ready(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:169)
	at org.apache.flink.runtime.minicluster.FlinkMiniCluster.shutdown(FlinkMiniCluster.scala:325)
	at org.apache.flink.runtime.jobmanager.JobManagerSubmittedJobGraphsRecoveryITCase.testSubmitJobToNonLeader(JobManagerSubmittedJobGraphsRecoveryITCase.java:219)

...

Tests in error: 
  JobManagerSubmittedJobGraphsRecoveryITCase.testSubmitJobToNonLeader:219 &#194;&#187; Timeout
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15152236" author="rmetzger" created="Thu, 18 Feb 2016 12:25:11 +0000"  >&lt;p&gt;Again: &lt;a href=&quot;https://api.travis-ci.org/jobs/110095304/log.txt?deansi=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/jobs/110095304/log.txt?deansi=true&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;testSubmitJobToNonLeader(org.apache.flink.runtime.jobmanager.JobManagerSubmittedJobGraphsRecoveryITCase)  Time elapsed: 300.177 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.IllegalStateException: Job not found within deadline.
	at org.apache.flink.runtime.testutils.JobManagerActorTestUtils.waitForJobStatus(JobManagerActorTestUtils.java:96)
	at org.apache.flink.runtime.jobmanager.JobManagerSubmittedJobGraphsRecoveryITCase.testSubmitJobToNonLeader(JobManagerSubmittedJobGraphsRecoveryITCase.java:193
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rquf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>