<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:41:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-13999] Correct the documentation of MATCH_RECOGNIZE</title>
                <link>https://issues.apache.org/jira/browse/FLINK-13999</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Regarding to the following &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-release-1.9/dev/table/streaming/match_recognize.html#aggregations&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;example&lt;/a&gt; in the doc:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT *
FROM Ticker
    MATCH_RECOGNIZE (
        PARTITION BY symbol
        ORDER BY rowtime
        MEASURES
            FIRST(A.rowtime) AS start_tstamp,
            LAST(A.rowtime) AS end_tstamp,
            AVG(A.price) AS avgPrice
        ONE ROW PER MATCH
        AFTER MATCH SKIP TO FIRST B
        PATTERN (A+ B)
        DEFINE
            A AS AVG(A.price) &amp;lt; 15
    ) MR;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Given the inputs shown in the doc, it should be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 symbol       start_tstamp       end_tstamp          avgPrice
=========  ==================  ==================  ============
ACME       01-APR-11 10:00:00  01-APR-11 10:00:03     14.5&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;instead of:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 symbol       start_tstamp       end_tstamp          avgPrice
=========  ==================  ==================  ============
ACME       01-APR-11 10:00:00  01-APR-11 10:00:03     14.5
ACME       01-APR-11 10:00:04  01-APR-11 10:00:09     13.5
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13255406">FLINK-13999</key>
            <summary>Correct the documentation of MATCH_RECOGNIZE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dian.fu">Dian Fu</assignee>
                                    <reporter username="dian.fu">Dian Fu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 7 Sep 2019 05:40:37 +0000</created>
                <updated>Mon, 14 Oct 2019 14:39:25 +0000</updated>
                            <resolved>Mon, 14 Oct 2019 14:39:24 +0000</resolved>
                                    <version>1.8.2</version>
                    <version>1.9.1</version>
                                    <fixVersion>1.8.3</fixVersion>
                    <fixVersion>1.9.2</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16924731" author="dian.fu" created="Sat, 7 Sep 2019 05:44:31 +0000"  >&lt;p&gt;This issue is reported in the user list:&#160;&lt;a href=&quot;http://apache-flink-user-mailing-list-archive.2336050.n4.nabble.com/Wrong-result-of-MATCH-RECOGNIZE-clause-td29820.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-flink-user-mailing-list-archive.2336050.n4.nabble.com/Wrong-result-of-MATCH-RECOGNIZE-clause-td29820.html&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16930374" author="aljoscha" created="Mon, 16 Sep 2019 09:41:39 +0000"  >&lt;p&gt;I quickly talked to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;about this, he mentioned that it might be a bug and not a documentation glitch. We&apos;ll get back once we know more.&lt;/p&gt;</comment>
                            <comment id="16945917" author="dawidwys" created="Mon, 7 Oct 2019 14:13:14 +0000"  >&lt;p&gt;Hi, I had a bit more time to have a proper look at this problem. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dian.fu&quot; class=&quot;user-hover&quot; rel=&quot;dian.fu&quot;&gt;dian.fu&lt;/a&gt; is right. It is an error in the example. The row with timestamp &lt;tt&gt;&apos;01-Apr-11 10:00:04&apos;&lt;/tt&gt; obviously cannot start a new match as it exceeds the average of 15 (25/1 &amp;gt; 15).&lt;/p&gt;

&lt;p&gt;I would suggest two changes to the example:&lt;br/&gt;
1. Change the skip strategy to the default &lt;tt&gt;AFTER MATCH SKIP PAST LAST ROW&lt;/tt&gt;, as the strategy here is not important for the example.&lt;br/&gt;
2. Add a new at the end to get two output rows. I suggest to have:&lt;/p&gt;

&lt;p&gt;input:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
symbol         rowtime         price    tax
======  ====================  ======= =======
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:00&apos;&lt;/span&gt;   12      1
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:01&apos;&lt;/span&gt;   17      2
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:02&apos;&lt;/span&gt;   13      1
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:03&apos;&lt;/span&gt;   16      3
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:04&apos;&lt;/span&gt;   25      2
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:05&apos;&lt;/span&gt;   2       1
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:06&apos;&lt;/span&gt;   4       1
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:07&apos;&lt;/span&gt;   10      2
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:08&apos;&lt;/span&gt;   15      2
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:09&apos;&lt;/span&gt;   25      2
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:10&apos;&lt;/span&gt;   28 (change &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; value to have a nicer average in the result)      1
&lt;span class=&quot;code-quote&quot;&gt;&apos;ACME&apos;&lt;/span&gt;  &lt;span class=&quot;code-quote&quot;&gt;&apos;01-Apr-11 10:00:11&apos;&lt;/span&gt;   30      1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 symbol       start_tstamp       end_tstamp          avgPrice
=========  ==================  ==================  ============
ACME       01-APR-11 10:00:00  01-APR-11 10:00:03     14.5
ACME       01-APR-11 10:00:05  01-APR-11 10:00:10     14.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16946393" author="dian.fu" created="Tue, 8 Oct 2019 01:53:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;Thanks for the confirmation and suggestion! The suggested changes make sense to me. Regarding to the comment &quot;change this value to have a nicer average in the result&quot;, the price of &quot;28&quot; of the new row is good enough for me given the average &quot;14.0&quot; is different from &quot;14.5&quot;. Other good candidates could be &quot;22&quot;, &quot;25&quot;, etc and the average will be &quot;13.0&quot;, &quot;13.5&quot;, etc. What do you think?&lt;/p&gt;</comment>
                            <comment id="16947489" author="dawidwys" created="Wed, 9 Oct 2019 09:41:05 +0000"  >&lt;p&gt;I&apos;m fine with any of the suggested values as long as the resulting avgPrice for the second row is different from the first one and it has a short fractional part.&lt;/p&gt;

&lt;p&gt;Would you like to prepare a PR for it? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dian.fu&quot; class=&quot;user-hover&quot; rel=&quot;dian.fu&quot;&gt;dian.fu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16950776" author="dian.fu" created="Mon, 14 Oct 2019 07:34:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;Very sorry for late response. I&apos;ll submit a PR for this later today.&lt;/p&gt;</comment>
                            <comment id="16950793" author="sunjincheng121" created="Mon, 14 Oct 2019 08:06:55 +0000"  >&lt;p&gt;I have assign it to you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dian.fu&quot; class=&quot;user-hover&quot; rel=&quot;dian.fu&quot;&gt;dian.fu&lt;/a&gt;, Thank you!&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16950796" author="dian.fu" created="Mon, 14 Oct 2019 08:12:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sunjincheng121&quot; class=&quot;user-hover&quot; rel=&quot;sunjincheng121&quot;&gt;sunjincheng121&lt;/a&gt;&#160;Thanks a lot! &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwysakowicz&quot; class=&quot;user-hover&quot; rel=&quot;dwysakowicz&quot;&gt;dwysakowicz&lt;/a&gt;&#160;I have submitted the PR and looking forward to your review.&lt;/p&gt;</comment>
                            <comment id="16951038" author="dawidwys" created="Mon, 14 Oct 2019 14:39:25 +0000"  >&lt;p&gt;Fixed in:&lt;br/&gt;
master: 51bd2f68b3d1dbf5e553e26730695915e13a34f4&lt;br/&gt;
1.9: 12de704c2ecf42ddc5449a1c93d8c96e0e280fae&lt;br/&gt;
1.8: dc90f43e050a71aeaf0ced91c14d895f6512dfae&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06fag:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>