<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4862] NPE on EventTimeSessionWindows with ContinuousEventTimeTrigger</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4862</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;what%27stheerror%3F&quot;&gt;&lt;/a&gt;what&apos;s the error ?&lt;/h3&gt;

&lt;p&gt;The following NPE error is thrown when EventTimeSessionWindows with ContinuousEventTimeTrigger is used.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.NullPointerException
	at org.apache.flink.streaming.api.windowing.triggers.ContinuousEventTimeTrigger.clear(ContinuousEventTimeTrigger.java:91)
	at org.apache.flink.streaming.runtime.operators.windowing.WindowOperator$Context.clear(WindowOperator.java:768)
	at org.apache.flink.streaming.runtime.operators.windowing.WindowOperator$2.merge(WindowOperator.java:310)
	at org.apache.flink.streaming.runtime.operators.windowing.WindowOperator$2.merge(WindowOperator.java:297)
	at org.apache.flink.streaming.runtime.operators.windowing.MergingWindowSet.addWindow(MergingWindowSet.java:196)
	at org.apache.flink.streaming.runtime.operators.windowing.WindowOperator.processElement(WindowOperator.java:297)
	at org.apache.flink.streaming.runtime.io.StreamInputProcessor.processInput(StreamInputProcessor.java:183)
	at org.apache.flink.streaming.runtime.tasks.OneInputStreamTask.run(OneInputStreamTask.java:66)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:271)
	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:609)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a name=&quot;howtoreproduce%3F&quot;&gt;&lt;/a&gt;how to reproduce ?&lt;/h3&gt;

&lt;p&gt;use &lt;tt&gt;ContinuousEventTimeTrigger&lt;/tt&gt; instead of the default &lt;tt&gt;EventTimeTrigger&lt;/tt&gt; in &lt;a href=&quot;https://github.com/apache/flink/blob/master/flink-examples/flink-examples-streaming/src/main/java/org/apache/flink/streaming/examples/windowing/SessionWindowing.java#L84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SessionWindowing &lt;/a&gt; example. &lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;what%27sthecause%3F&quot;&gt;&lt;/a&gt;what&apos;s the cause ?&lt;/h3&gt;
&lt;p&gt;When two session windows are being merged, the states of the two &lt;tt&gt;ContinuousEventTimeTrigger&lt;/tt&gt; are merged as well and the new namespace is the merged window. Later when the context tries to delete &lt;tt&gt;Timer&lt;/tt&gt; from the old trigger and looks up the timestamp by the old namespace, null value is returned. &lt;/p&gt;

</description>
                <environment></environment>
        <key id="13013749">FLINK-4862</key>
            <summary>NPE on EventTimeSessionWindows with ContinuousEventTimeTrigger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mauzhang">Manu Zhang</assignee>
                                    <reporter username="mauzhang">Manu Zhang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Oct 2016 04:33:19 +0000</created>
                <updated>Thu, 28 Feb 2019 10:46:04 +0000</updated>
                            <resolved>Mon, 24 Oct 2016 13:55:11 +0000</resolved>
                                    <version>1.1.3</version>
                    <version>1.2.0</version>
                                    <fixVersion>1.1.4</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                                    <component>API / DataStream</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15590782" author="mauzhang" created="Thu, 20 Oct 2016 04:46:26 +0000"  >&lt;p&gt;A simple fix is to check for null return when looking up the &lt;tt&gt;fireTimestamp&lt;/tt&gt;, e.g.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;ContinuousEventTimeTrigger.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void clear(W window, TriggerContext ctx) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		ReducingState&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; fireTimestamp = ctx.getPartitionedState(stateDesc);
		&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; timestamp = fireTimestamp.get();
		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (timestamp != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
			ctx.deleteEventTimeTimer(timestamp);
		}
		fireTimestamp.clear();
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15594036" author="githubbot" created="Fri, 21 Oct 2016 04:50:18 +0000"  >&lt;p&gt;GitHub user manuzhang opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4862&quot; title=&quot;NPE on EventTimeSessionWindows with ContinuousEventTimeTrigger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4862&quot;&gt;&lt;del&gt;FLINK-4862&lt;/del&gt;&lt;/a&gt; fix Timer register in ContinuousEventTimeTrigger&lt;/p&gt;

&lt;p&gt;    Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.&lt;br/&gt;
    If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the &lt;span class=&quot;error&quot;&gt;&amp;#91;How To Contribute guide&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://flink.apache.org/how-to-contribute.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://flink.apache.org/how-to-contribute.html&lt;/a&gt;).&lt;br/&gt;
    In addition to going through the list, please provide a meaningful description of your changes.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] General&lt;/li&gt;
	&lt;li&gt;The pull request references the related JIRA issue (&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;FLINK-XXX&amp;#93;&lt;/span&gt; Jira title text&quot;)&lt;/li&gt;
	&lt;li&gt;The pull request addresses only one issue&lt;/li&gt;
	&lt;li&gt;Each commit in the PR has a meaningful commit message (including the JIRA id)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Documentation&lt;/li&gt;
	&lt;li&gt;Documentation has been added for new functionality&lt;/li&gt;
	&lt;li&gt;Old documentation affected by the pull request has been updated&lt;/li&gt;
	&lt;li&gt;JavaDoc for public methods has been added&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;[ ] Tests &amp;amp; Build&lt;/li&gt;
	&lt;li&gt;Functionality added by the pull request is covered by tests&lt;/li&gt;
	&lt;li&gt;`mvn clean verify` has been executed successfully locally or a Travis build has passed&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/manuzhang/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/manuzhang/flink&lt;/a&gt; fix_merge_window&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2671&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b2370946357044250511e25fce5078812ad22c82&lt;br/&gt;
Author: manuzhang &amp;lt;owenzhang1990@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-10-20T07:06:01Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4862&quot; title=&quot;NPE on EventTimeSessionWindows with ContinuousEventTimeTrigger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4862&quot;&gt;&lt;del&gt;FLINK-4862&lt;/del&gt;&lt;/a&gt; fix Timer register in ContinuousEventTimeTrigger&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15594587" author="mxm" created="Fri, 21 Oct 2016 09:14:43 +0000"  >&lt;p&gt;Thanks for reporting &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mauzhang&quot; class=&quot;user-hover&quot; rel=&quot;mauzhang&quot;&gt;mauzhang&lt;/a&gt;. I&apos;ve made you contributor in JIRA and assigned you to the issue. I&apos;ll also check out your PR.&lt;/p&gt;</comment>
                            <comment id="15595032" author="githubbot" created="Fri, 21 Oct 2016 13:16:14 +0000"  >&lt;p&gt;Github user mxm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671#discussion_r84463868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671#discussion_r84463868&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/windowing/triggers/ContinuousEventTimeTrigger.java &amp;#8212;&lt;br/&gt;
    @@ -99,8 +111,12 @@ public boolean canMerge() {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	@Override&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public TriggerResult onMerge(W window, OnMergeContext ctx) {&lt;br/&gt;
    +	public TriggerResult onMerge(W window, OnMergeContext ctx) throws Exception {&lt;br/&gt;
     		ctx.mergePartitionedState(stateDesc);&lt;br/&gt;
    +		Long nextFireTimestamp = ctx.getPartitionedState(stateDesc).get();&lt;br/&gt;
    +		if (nextFireTimestamp != null) 
{
    +			ctx.registerEventTimeTimer(nextFireTimestamp);
    +		}
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +1&lt;/p&gt;</comment>
                            <comment id="15595033" author="githubbot" created="Fri, 21 Oct 2016 13:16:16 +0000"  >&lt;p&gt;Github user mxm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671#discussion_r84464167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671#discussion_r84464167&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/windowing/triggers/ContinuousEventTimeTrigger.java &amp;#8212;&lt;br/&gt;
    @@ -88,9 +96,13 @@ public TriggerResult onProcessingTime(long time, W window, TriggerContext ctx) t&lt;br/&gt;
     	@Override&lt;br/&gt;
     	public void clear(W window, TriggerContext ctx) throws Exception {&lt;br/&gt;
     		ReducingState&amp;lt;Long&amp;gt; fireTimestamp = ctx.getPartitionedState(stateDesc);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;long timestamp = fireTimestamp.get();&lt;/li&gt;
	&lt;li&gt;ctx.deleteEventTimeTimer(timestamp);&lt;/li&gt;
	&lt;li&gt;fireTimestamp.clear();&lt;br/&gt;
    +		Long timestamp = fireTimestamp.get();&lt;br/&gt;
    +		if (timestamp != null) 
{
    +			ctx.deleteEventTimeTimer(timestamp);
    +			fireTimestamp.clear();
    +		}
&lt;p&gt; else if (cachedFireTimestamp != null)&lt;/p&gt;
{
    +			ctx.deleteEventTimeTimer(cachedFireTimestamp);
    +		}
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The above `else if` block is not correct because there is only one instance of the trigger which is reused for each Window. Hence the abstraction using the state descriptor to retrieve the appropriate state.&lt;/p&gt;</comment>
                            <comment id="15595034" author="githubbot" created="Fri, 21 Oct 2016 13:16:16 +0000"  >&lt;p&gt;Github user mxm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671#discussion_r84465211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671#discussion_r84465211&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/windowing/triggers/ContinuousEventTimeTrigger.java &amp;#8212;&lt;br/&gt;
    @@ -88,9 +96,13 @@ public TriggerResult onProcessingTime(long time, W window, TriggerContext ctx) t&lt;br/&gt;
     	@Override&lt;br/&gt;
     	public void clear(W window, TriggerContext ctx) throws Exception {&lt;br/&gt;
     		ReducingState&amp;lt;Long&amp;gt; fireTimestamp = ctx.getPartitionedState(stateDesc);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;long timestamp = fireTimestamp.get();&lt;/li&gt;
	&lt;li&gt;ctx.deleteEventTimeTimer(timestamp);&lt;/li&gt;
	&lt;li&gt;fireTimestamp.clear();&lt;br/&gt;
    +		Long timestamp = fireTimestamp.get();&lt;br/&gt;
    +		if (timestamp != null) 
{
    +			ctx.deleteEventTimeTimer(timestamp);
    +			fireTimestamp.clear();
    +		}
&lt;p&gt; else if (cachedFireTimestamp != null)&lt;/p&gt;
{
    +			ctx.deleteEventTimeTimer(cachedFireTimestamp);
    +		}
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think we&apos;re fine with not doing anything when `timestamp == null`. The old timer won&apos;t influence the newly merged window.&lt;/p&gt;</comment>
                            <comment id="15595035" author="githubbot" created="Fri, 21 Oct 2016 13:16:16 +0000"  >&lt;p&gt;Github user mxm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671#discussion_r84464275&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671#discussion_r84464275&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/windowing/triggers/ContinuousEventTimeTrigger.java &amp;#8212;&lt;br/&gt;
    @@ -45,6 +45,12 @@&lt;br/&gt;
     	private final ReducingStateDescriptor&amp;lt;Long&amp;gt; stateDesc =&lt;br/&gt;
     			new ReducingStateDescriptor&amp;lt;&amp;gt;(&quot;fire-time&quot;, new Min(), LongSerializer.INSTANCE);&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * Used to preserve the fire timestamp before merge such that&lt;br/&gt;
    +	 * the corresponding timer could be cleared after merge&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private Long cachedFireTimestamp = null;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This doesn&apos;t work because there is only one `Trigger` instance and this will potentially be overwritten by many Windows being merged. &lt;/p&gt;</comment>
                            <comment id="15595036" author="githubbot" created="Fri, 21 Oct 2016 13:16:16 +0000"  >&lt;p&gt;Github user mxm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671#discussion_r84465826&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671#discussion_r84465826&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/windowing/triggers/ContinuousEventTimeTrigger.java &amp;#8212;&lt;br/&gt;
    @@ -88,9 +96,13 @@ public TriggerResult onProcessingTime(long time, W window, TriggerContext ctx) t&lt;br/&gt;
     	@Override&lt;br/&gt;
     	public void clear(W window, TriggerContext ctx) throws Exception {&lt;br/&gt;
     		ReducingState&amp;lt;Long&amp;gt; fireTimestamp = ctx.getPartitionedState(stateDesc);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;long timestamp = fireTimestamp.get();&lt;/li&gt;
	&lt;li&gt;ctx.deleteEventTimeTimer(timestamp);&lt;/li&gt;
	&lt;li&gt;fireTimestamp.clear();&lt;br/&gt;
    +		Long timestamp = fireTimestamp.get();&lt;br/&gt;
    +		if (timestamp != null) {&lt;br/&gt;
    +			ctx.deleteEventTimeTimer(timestamp);&lt;br/&gt;
    +			fireTimestamp.clear();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The above looks good.&lt;/p&gt;</comment>
                            <comment id="15595061" author="githubbot" created="Fri, 21 Oct 2016 13:24:56 +0000"  >&lt;p&gt;Github user manuzhang commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @mxm updated. Thanks for teaching me more about the internals. Ignoring the old Timer make things much simpler actually.&lt;/p&gt;</comment>
                            <comment id="15601324" author="githubbot" created="Mon, 24 Oct 2016 08:17:30 +0000"  >&lt;p&gt;Github user aljoscha commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @mxm @manuzhang Yes, the timers will be ignored because there is a check in `onEventTime()`.&lt;/p&gt;

&lt;p&gt;    The fix looks good! Will you go ahead and merge, @mxm?&lt;/p&gt;</comment>
                            <comment id="15602012" author="githubbot" created="Mon, 24 Oct 2016 13:41:32 +0000"  >&lt;p&gt;Github user mxm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for having a look @aljoscha. Thanks again for the PR @manuzhang. Merging.&lt;/p&gt;</comment>
                            <comment id="15602016" author="githubbot" created="Mon, 24 Oct 2016 13:42:34 +0000"  >&lt;p&gt;Github user mxm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671#discussion_r84689568&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671#discussion_r84689568&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-streaming-java/src/main/java/org/apache/flink/streaming/api/windowing/triggers/ContinuousEventTimeTrigger.java &amp;#8212;&lt;br/&gt;
    @@ -99,8 +111,12 @@ public boolean canMerge() {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	@Override&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public TriggerResult onMerge(W window, OnMergeContext ctx) {&lt;br/&gt;
    +	public TriggerResult onMerge(W window, OnMergeContext ctx) throws Exception {&lt;br/&gt;
     		ctx.mergePartitionedState(stateDesc);&lt;br/&gt;
    +		Long nextFireTimestamp = ctx.getPartitionedState(stateDesc).get();&lt;br/&gt;
    +		if (nextFireTimestamp != null) 
{
    +			ctx.registerEventTimeTimer(nextFireTimestamp);
    +		}
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Yes, you&apos;re right. It is actually handled correctly in `EventTimeTrigger` but not for the continuous trigger.&lt;/p&gt;</comment>
                            <comment id="15602047" author="githubbot" created="Mon, 24 Oct 2016 13:50:43 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2671&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2671&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15602057" author="mxm" created="Mon, 24 Oct 2016 13:55:12 +0000"  >&lt;p&gt;master: 45762162fe7c23fd921db1e0f826b2906bfe1dcd&lt;br/&gt;
release-1.1: 05a5f460b33828cc8a1e6a45d37b555facc7133f&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i354sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>