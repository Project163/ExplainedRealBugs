<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:23:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-3566] Input type validation often fails on custom TypeInfo implementations</title>
                <link>https://issues.apache.org/jira/browse/FLINK-3566</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Input type validation often fails when used with custom type infos. One example of this behaviour can be reproduced by creating a custom type info with our own field type:&lt;/p&gt;

&lt;p&gt;StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();&lt;/p&gt;

&lt;p&gt;env.generateSequence(1, 10).map(new MapFunction&amp;lt;Long, Tuple1&amp;lt;Optional&amp;lt;Long&amp;gt;&amp;gt;&amp;gt;() {&lt;br/&gt;
			@Override&lt;br/&gt;
			public Tuple1&amp;lt;Optional&amp;lt;Long&amp;gt;&amp;gt; map(Long value) throws Exception &lt;/p&gt;
{
				return Tuple1.of(Optional.of(value));
			}
&lt;p&gt;		}).returns(new TupleTypeInfo&amp;lt;&amp;gt;(new OptionTypeInfo&amp;lt;Long&amp;gt;(BasicTypeInfo.LONG_TYPE_INFO)))&lt;br/&gt;
				.keyBy(new KeySelector&amp;lt;Tuple1&amp;lt;Optional&amp;lt;Long&amp;gt;&amp;gt;, Optional&amp;lt;Long&amp;gt;&amp;gt;() {&lt;/p&gt;

&lt;p&gt;					@Override&lt;br/&gt;
					public Optional&amp;lt;Long&amp;gt; getKey(Tuple1&amp;lt;Optional&amp;lt;Long&amp;gt;&amp;gt; value) throws Exception &lt;/p&gt;
{
						return value.f0;
					}
&lt;p&gt;				});&lt;/p&gt;

&lt;p&gt;This will fail on Input type validation at the KeySelector (or any other function for example a mapper) with the following exception:&lt;/p&gt;

&lt;p&gt;Input mismatch: Basic type expected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12946166">FLINK-3566</key>
            <summary>Input type validation often fails on custom TypeInfo implementations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twalthr">Timo Walther</assignee>
                                    <reporter username="gyfora">Gyula Fora</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Mar 2016 14:57:32 +0000</created>
                <updated>Fri, 4 Mar 2016 23:29:06 +0000</updated>
                            <resolved>Fri, 4 Mar 2016 23:28:58 +0000</resolved>
                                                    <fixVersion>1.0.1</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>API / Type Serialization System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15175770" author="gyfora" created="Wed, 2 Mar 2016 15:19:39 +0000"  >&lt;p&gt;Another example with KeySelectors and interfaces:&lt;/p&gt;

&lt;p&gt;interface Event &lt;/p&gt;
{
		String getKey();
	}

&lt;p&gt;	public static class MyEvent implements Event {&lt;br/&gt;
		@Override&lt;br/&gt;
		public String getKey() &lt;/p&gt;
{
			return &quot;&quot;;
		}

&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;	public static void main(String[] args) &lt;/p&gt;
{
		StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();
		DataStream&amp;lt;MyEvent&amp;gt; events = env.fromElements(new MyEvent());
		applyKeySelector(events);
	}

&lt;p&gt;	private static &amp;lt;E extends Event&amp;gt; void applyKeySelector(DataStream&amp;lt;E&amp;gt; events) &lt;/p&gt;
{
		events.keyBy(e -&amp;gt; e.getKey());
	}

&lt;p&gt;This gives a following exception: Input mismatch: Generic object type &apos;package.TypeTest.MyEvent&apos; expected but was &apos;package.TypeTest.Event&apos;.&lt;/p&gt;</comment>
                            <comment id="15177641" author="twalthr" created="Thu, 3 Mar 2016 10:37:35 +0000"  >&lt;p&gt;Thanks for the examples. I will look into it.&lt;/p&gt;</comment>
                            <comment id="15177648" author="gyfora" created="Thu, 3 Mar 2016 10:39:50 +0000"  >&lt;p&gt;Thanks Timo &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15177921" author="githubbot" created="Thu, 3 Mar 2016 15:06:20 +0000"  >&lt;p&gt;GitHub user twalthr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1759&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1759&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3566&quot; title=&quot;Input type validation often fails on custom TypeInfo implementations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3566&quot;&gt;&lt;del&gt;FLINK-3566&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3563&quot; title=&quot;.returns() doesn&amp;#39;t compile when using .map() with a custom MapFunction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3563&quot;&gt;&lt;del&gt;FLINK-3563&lt;/del&gt;&lt;/a&gt; Input type validation improvements&lt;/p&gt;

&lt;p&gt;    This PR fixes issues with the input type validation. &lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3566&quot; title=&quot;Input type validation often fails on custom TypeInfo implementations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3566&quot;&gt;&lt;del&gt;FLINK-3566&lt;/del&gt;&lt;/a&gt; Custom type information have been interpreted as basic or tuple types, because their `isTupleType()`/`isBasicType()` methods returned `true`. Subclasses of GenericTypes caused problems.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3563&quot; title=&quot;.returns() doesn&amp;#39;t compile when using .map() with a custom MapFunction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3563&quot;&gt;&lt;del&gt;FLINK-3563&lt;/del&gt;&lt;/a&gt; Subclasses of GenericTypes caused problems.&lt;/p&gt;

&lt;p&gt;    @gyfora Can you check if you still have problems?&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/twalthr/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/twalthr/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3563&quot; title=&quot;.returns() doesn&amp;#39;t compile when using .map() with a custom MapFunction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3563&quot;&gt;&lt;del&gt;FLINK-3563&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1759.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1759.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1759&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit fe8ae3789f9260b48ac8a7551dd42b258c117b5f&lt;br/&gt;
Author: twalthr &amp;lt;twalthr@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-03-03T14:44:28Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3566&quot; title=&quot;Input type validation often fails on custom TypeInfo implementations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3566&quot;&gt;&lt;del&gt;FLINK-3566&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-3563&quot; title=&quot;.returns() doesn&amp;#39;t compile when using .map() with a custom MapFunction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-3563&quot;&gt;&lt;del&gt;FLINK-3563&lt;/del&gt;&lt;/a&gt; Input type validation improvements&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15177982" author="githubbot" created="Thu, 3 Mar 2016 15:47:56 +0000"  >&lt;p&gt;Github user gyfora commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1759#issuecomment-191821834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1759#issuecomment-191821834&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I tested it in my application where I was previously having both issues.&lt;/p&gt;

&lt;p&gt;    Now it works perfectly, thanks!&lt;/p&gt;

&lt;p&gt;    +1 from me :+1: &lt;/p&gt;</comment>
                            <comment id="15178113" author="githubbot" created="Thu, 3 Mar 2016 16:56:05 +0000"  >&lt;p&gt;Github user chobeat commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1759#issuecomment-191857083&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1759#issuecomment-191857083&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I tested it too and it works perfectly both on an example case and in the code where the problem arose.&lt;/p&gt;</comment>
                            <comment id="15179601" author="githubbot" created="Fri, 4 Mar 2016 09:20:31 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1759#issuecomment-192200612&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1759#issuecomment-192200612&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1&lt;/p&gt;

&lt;p&gt;    to merge this into the 1.0 and 1.1 branches&lt;/p&gt;</comment>
                            <comment id="15180169" author="githubbot" created="Fri, 4 Mar 2016 17:13:10 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1759#issuecomment-192362699&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1759#issuecomment-192362699&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Will merge this...&lt;/p&gt;</comment>
                            <comment id="15180741" author="githubbot" created="Fri, 4 Mar 2016 23:26:01 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1759&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1759&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15180746" author="stephanewen" created="Fri, 4 Mar 2016 23:28:58 +0000"  >&lt;p&gt;Fixed in &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;1.0.1 via b3765408bfd928ce31defbed8f83f3a08e548332&lt;/li&gt;
	&lt;li&gt;1.1.0 via 434e88fdd07a0052d142c275e0e631fc089066b0&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u17j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>