<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:19:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-1799] Scala API does not support generic arrays</title>
                <link>https://issues.apache.org/jira/browse/FLINK-1799</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The Scala API does not support generic arrays at the moment. It throws a rather unhelpful error message ```InvalidTypesException: The given type is not a valid object array```.&lt;/p&gt;

&lt;p&gt;Code to reproduce the problem is given below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def main(args: Array[&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]) {
  foobar[&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;]
}

def foobar[T: ClassTag: TypeInformation]: DataSet[Block[T]] = {
  val tpe = createTypeInformation[Array[T]]

  &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12786675">FLINK-1799</key>
            <summary>Scala API does not support generic arrays</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aljoscha">Aljoscha Krettek</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Mar 2015 10:53:17 +0000</created>
                <updated>Thu, 23 Apr 2015 09:16:58 +0000</updated>
                            <resolved>Thu, 23 Apr 2015 09:16:58 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14487263" author="githubbot" created="Thu, 9 Apr 2015 12:06:42 +0000"  >&lt;p&gt;GitHub user aljoscha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1799&quot; title=&quot;Scala API does not support generic arrays&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1799&quot;&gt;&lt;del&gt;FLINK-1799&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;scala&amp;#93;&lt;/span&gt; Fix handling of generic arrays&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/aljoscha/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/aljoscha/flink&lt;/a&gt; fix-scala-generic-arrays&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #582&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ac1b4111704933169f46515caffbe2607d263677&lt;br/&gt;
Author: Aljoscha Krettek &amp;lt;aljoscha.krettek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-04-09T12:05:08Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-1799&quot; title=&quot;Scala API does not support generic arrays&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-1799&quot;&gt;&lt;del&gt;FLINK-1799&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;scala&amp;#93;&lt;/span&gt; Fix handling of generic arrays&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14487977" author="githubbot" created="Thu, 9 Apr 2015 18:55:36 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-91327192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-91327192&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Instead of the switch/case statement, can&apos;t you use `PrimitiveArrayTypeInfo.getInfoFor(Class&amp;lt;X&amp;gt; type)`? Seems simpler.&lt;/p&gt;

&lt;p&gt;    Also, this is a good change to be backed by a Unit test case, rather than an Integration test case.&lt;/p&gt;

&lt;p&gt;    I really think that such changes should be guarded by more fine grained tests (Unit Tests(, rather than the &quot;big hammer&quot; kind of test (have a distributed program that uses this). Out testing time goes through the roof otherwise.&lt;/p&gt;

&lt;p&gt;    I fund that unit tests are a cycle or two more work to write, but typically also get you thinking better about what cases the tests should cover.&lt;/p&gt;

</comment>
                            <comment id="14489172" author="githubbot" created="Fri, 10 Apr 2015 08:34:50 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-91478269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-91478269&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Using ``PrimitiveArrayTypeInfo.getInfoFor(Class&amp;lt;X&amp;gt; type)`` is not easily possible since that requires an array type, which I don&apos;t have available at this point.&lt;/p&gt;

&lt;p&gt;    For the tests you are absolutely correct, I will change them.&lt;/p&gt;</comment>
                            <comment id="14489617" author="githubbot" created="Fri, 10 Apr 2015 13:28:20 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-91557302&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-91557302&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I removed the IT case and added a test instead.&lt;/p&gt;</comment>
                            <comment id="14492454" author="githubbot" created="Mon, 13 Apr 2015 14:31:13 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-92381429&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-92381429&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Any more comments?&lt;/p&gt;
</comment>
                            <comment id="14499376" author="githubbot" created="Fri, 17 Apr 2015 07:15:44 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-93929395&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-93929395&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Maybe we could add in the test case the case where we have an ```Object``` array. Other than that LGTM.&lt;/p&gt;</comment>
                            <comment id="14499772" author="githubbot" created="Fri, 17 Apr 2015 12:57:16 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-93980529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-93980529&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I added the test case @tillrohrmann suggested. Also helped me find a bug. :relieved:&lt;/p&gt;</comment>
                            <comment id="14502520" author="githubbot" created="Mon, 20 Apr 2015 08:33:30 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-94392757&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-94392757&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Any more thoughts? Otherwise I would like to merge this.&lt;/p&gt;</comment>
                            <comment id="14502897" author="githubbot" created="Mon, 20 Apr 2015 14:13:02 +0000"  >&lt;p&gt;Github user StephanEwen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#discussion_r28691764&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#discussion_r28691764&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/main/java/org/apache/flink/api/java/typeutils/ObjectArrayTypeInfo.java &amp;#8212;&lt;br/&gt;
    @@ -143,6 +143,18 @@ else if (type instanceof Class&amp;lt;?&amp;gt; &amp;amp;&amp;amp; ((Class&amp;lt;?&amp;gt;) type).isArray()&lt;br/&gt;
     		throw new InvalidTypesException(&quot;The given type is not a valid object array.&quot;);&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * Creates a new &lt;/p&gt;
{@link org.apache.flink.api.java.typeutils.ObjectArrayTypeInfo}
&lt;p&gt; from a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link TypeInformation}
&lt;p&gt; for the component type.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;&lt;br/&gt;
    +	 * This must be used in cases where the complete type of the array is not available as a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link java.lang.reflect.Type}
&lt;p&gt; or &lt;/p&gt;
{@link java.lang.Class}
&lt;p&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public static &amp;lt;T, C&amp;gt; ObjectArrayTypeInfo&amp;lt;T, C&amp;gt; getInfoFor(TypeInformation&amp;lt;C&amp;gt; componentInfo) {&lt;br/&gt;
    +		return new ObjectArrayTypeInfo&amp;lt;T, C&amp;gt;(Object[].class, componentInfo.getTypeClass(), componentInfo);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Is `Object[].class` actually correct? Why not give the class of the real array type? There are a few ways to get that, for example `Array.newInstance(clazz, 0).getClass();`&lt;/p&gt;</comment>
                            <comment id="14502906" author="githubbot" created="Mon, 20 Apr 2015 14:22:42 +0000"  >&lt;p&gt;Github user aljoscha commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#discussion_r28692599&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#discussion_r28692599&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-java/src/main/java/org/apache/flink/api/java/typeutils/ObjectArrayTypeInfo.java &amp;#8212;&lt;br/&gt;
    @@ -143,6 +143,18 @@ else if (type instanceof Class&amp;lt;?&amp;gt; &amp;amp;&amp;amp; ((Class&amp;lt;?&amp;gt;) type).isArray()&lt;br/&gt;
     		throw new InvalidTypesException(&quot;The given type is not a valid object array.&quot;);&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;    +	/**&lt;br/&gt;
    +	 * Creates a new &lt;/p&gt;
{@link org.apache.flink.api.java.typeutils.ObjectArrayTypeInfo}
&lt;p&gt; from a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link TypeInformation}
&lt;p&gt; for the component type.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * &amp;lt;p&amp;gt;&lt;br/&gt;
    +	 * This must be used in cases where the complete type of the array is not available as a&lt;br/&gt;
    +	 * &lt;/p&gt;
{@link java.lang.reflect.Type}
&lt;p&gt; or &lt;/p&gt;
{@link java.lang.Class}
&lt;p&gt;.&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public static &amp;lt;T, C&amp;gt; ObjectArrayTypeInfo&amp;lt;T, C&amp;gt; getInfoFor(TypeInformation&amp;lt;C&amp;gt; componentInfo) {&lt;br/&gt;
    +		return new ObjectArrayTypeInfo&amp;lt;T, C&amp;gt;(Object[].class, componentInfo.getTypeClass(), componentInfo);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    That&apos;s right, I didn&apos;t think of that. Will change.&lt;/p&gt;</comment>
                            <comment id="14503030" author="githubbot" created="Mon, 20 Apr 2015 15:28:08 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-94483743&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-94483743&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I fixed @StephanEwen&apos;s complaint. It was incorrect but the type class of TypeInformation does not seem to be used in any places where it matters.&lt;/p&gt;</comment>
                            <comment id="14504974" author="githubbot" created="Tue, 21 Apr 2015 13:51:03 +0000"  >&lt;p&gt;Github user aljoscha commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-94799103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-94799103&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    So, any thoughts about merging this?&lt;/p&gt;</comment>
                            <comment id="14505621" author="githubbot" created="Tue, 21 Apr 2015 19:58:07 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582#issuecomment-94919453&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582#issuecomment-94919453&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yo, looks fine now&lt;/p&gt;</comment>
                            <comment id="14508721" author="githubbot" created="Thu, 23 Apr 2015 09:15:43 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/582&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/582&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14508723" author="aljoscha" created="Thu, 23 Apr 2015 09:16:58 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/flink/commit/4672e95ef158bb5e52b1d493465d62429bbdb29e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/commit/4672e95ef158bb5e52b1d493465d62429bbdb29e&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27j6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>