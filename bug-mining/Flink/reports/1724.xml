<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:28:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-6629] ClusterClient cannot submit jobs to HA cluster if address not set in configuration</title>
                <link>https://issues.apache.org/jira/browse/FLINK-6629</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;In the general case, the &lt;tt&gt;ClusterClient&lt;/tt&gt; fails to submit jobs to an HA cluster. The problem is the &lt;tt&gt;LazyActorSystemLoader&lt;/tt&gt; which creates an &lt;tt&gt;ActorSystem&lt;/tt&gt;, upon first call. The &lt;tt&gt;ActorSystem&lt;/tt&gt; is created by reading the JobManager&apos;s address from the &lt;tt&gt;Configuration&lt;/tt&gt; in order to find the connecting address via &lt;tt&gt;ConnectionUtils.findConnectingAddress&lt;/tt&gt;. The address in the configuration is, however, only valid in the non-HA case. In the HA case, we have to obtain the leader&apos;s address from ZooKeeper. Therefore, if  the address is not explicitly set in the &lt;tt&gt;flink-conf.yaml&lt;/tt&gt;, then the &lt;tt&gt;ClusterClient&lt;/tt&gt; might either fail with a &lt;tt&gt;RuntimeException&lt;/tt&gt; if no address at all has been specified or it will use an invalid address and retrieve the wrong connecting address.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13073257">FLINK-6629</key>
            <summary>ClusterClient cannot submit jobs to HA cluster if address not set in configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 May 2017 22:08:40 +0000</created>
                <updated>Mon, 22 May 2017 09:33:28 +0000</updated>
                            <resolved>Mon, 22 May 2017 09:22:58 +0000</resolved>
                                    <version>1.2.1</version>
                    <version>1.3.0</version>
                    <version>1.4.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Command Line Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16017334" author="githubbot" created="Fri, 19 May 2017 12:35:39 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3949&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3949&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6629&quot; title=&quot;ClusterClient cannot submit jobs to HA cluster if address not set in configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6629&quot;&gt;&lt;del&gt;FLINK-6629&lt;/del&gt;&lt;/a&gt; Use HAServices to find connecting address for ClusterClient&apos;s ActorSystem&lt;/p&gt;

&lt;p&gt;    The ClusterClient starts its ActorSystem lazily. In order to find out the address&lt;br/&gt;
    to which to bind, the ClusterClient tries to connect to the JobManager. In order&lt;br/&gt;
    to find out the JobManager&apos;s address it is important to use the&lt;br/&gt;
    HighAvailabilityServices instead of retrieving the address information from the&lt;br/&gt;
    configuration, because otherwise it conflicts with HA mode.&lt;/p&gt;

&lt;p&gt;    cc @rmetzger.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixClusterClient&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3949.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3949.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #3949&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6c77c336f402936d684497dc5f707fb713e52c7e&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-19T10:01:51Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6635&quot; title=&quot;ClientConnectionTest is broken because the ClusterClient lazily connects to the JobManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6635&quot;&gt;&lt;del&gt;FLINK-6635&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;test&amp;#93;&lt;/span&gt; Fix ClientConnectionTest&lt;/p&gt;

&lt;p&gt;    The ClientConnectionTest passed even though it was failing the test because we&lt;br/&gt;
    were expecting an exception and checking a special word to contained in the&lt;br/&gt;
    exception&apos;s message. Unfortunately, we generated an AssertionError with the same&lt;br/&gt;
    word if the actual logic we wanted to test failed. That cause the test to pass.&lt;/p&gt;

&lt;p&gt;commit b75eef9532b033b49b9a192597ccaec101203447&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-19T12:31:19Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-6629&quot; title=&quot;ClusterClient cannot submit jobs to HA cluster if address not set in configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-6629&quot;&gt;&lt;del&gt;FLINK-6629&lt;/del&gt;&lt;/a&gt; Use HAServices to find connecting address for ClusterClient&apos;s ActorSystem&lt;/p&gt;

&lt;p&gt;    The ClusterClient starts its ActorSystem lazily. In order to find out the address&lt;br/&gt;
    to which to bind, the ClusterClient tries to connect to the JobManager. In order&lt;br/&gt;
    to find out the JobManager&apos;s address it is important to use the&lt;br/&gt;
    HighAvailabilityServices instead of retrieving the address information from the&lt;br/&gt;
    configuration, because otherwise it conflicts with HA mode.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16018936" author="githubbot" created="Sun, 21 May 2017 18:24:49 +0000"  >&lt;p&gt;Github user rmetzger commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3949&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3949&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to merge this change&lt;/p&gt;</comment>
                            <comment id="16019178" author="githubbot" created="Mon, 22 May 2017 06:12:25 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3949&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3949&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @rmetzger. Merging this PR.&lt;/p&gt;</comment>
                            <comment id="16019286" author="githubbot" created="Mon, 22 May 2017 08:34:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/3949&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/3949&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16019330" author="aljoscha" created="Mon, 22 May 2017 09:09:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=till.rohrmann&quot; class=&quot;user-hover&quot; rel=&quot;till.rohrmann&quot;&gt;till.rohrmann&lt;/a&gt; This can be closed, right? &#128515;&lt;/p&gt;</comment>
                            <comment id="16019354" author="till.rohrmann" created="Mon, 22 May 2017 09:22:58 +0000"  >&lt;p&gt;1.4.0: d246515963e6f736dc78114ae1dbecbbcd93ed32&lt;br/&gt;
1.3.0: f783e529c558ac3df68b4e69fb931f2d55b55db7&lt;/p&gt;</comment>
                            <comment id="16019370" author="till.rohrmann" created="Mon, 22 May 2017 09:33:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aljoscha&quot; class=&quot;user-hover&quot; rel=&quot;aljoscha&quot;&gt;aljoscha&lt;/a&gt; I had to wait for the backport to be merged first.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3f6y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>