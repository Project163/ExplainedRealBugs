<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:34:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9996] PrestoS3FileSystemITCase#testConfigKeysForwarding fails on travis</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9996</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/apache/flink/jobs/409590482&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/flink/jobs/409590482&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 5.838 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.fs.s3presto.PrestoS3FileSystemITCase
testConfigKeysForwarding(org.apache.flink.fs.s3presto.PrestoS3FileSystemITCase)  Time elapsed: 1.613 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.RuntimeException: S3 credentials not configured
	at com.facebook.presto.hive.PrestoS3FileSystem.getAwsCredentialsProvider(PrestoS3FileSystem.java:702)
	at com.facebook.presto.hive.PrestoS3FileSystem.createAmazonS3Client(PrestoS3FileSystem.java:628)
	at com.facebook.presto.hive.PrestoS3FileSystem.initialize(PrestoS3FileSystem.java:212)
	at org.apache.flink.runtime.fs.hdfs.AbstractFileSystemFactory.create(AbstractFileSystemFactory.java:56)
	at org.apache.flink.core.fs.FileSystem.getUnguardedFileSystem(FileSystem.java:395)
	at org.apache.flink.core.fs.FileSystem.get(FileSystem.java:318)
	at org.apache.flink.core.fs.Path.getFileSystem(Path.java:298)
	at org.apache.flink.fs.s3presto.PrestoS3FileSystemITCase.testConfigKeysForwarding(PrestoS3FileSystemITCase.java:84)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13175507">FLINK-9996</key>
            <summary>PrestoS3FileSystemITCase#testConfigKeysForwarding fails on travis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="chesnay">Chesnay Schepler</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 30 Jul 2018 09:22:43 +0000</created>
                <updated>Tue, 31 Jul 2018 10:02:23 +0000</updated>
                            <resolved>Tue, 31 Jul 2018 10:02:23 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                                    <component>FileSystems</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16561694" author="zentol" created="Mon, 30 Jul 2018 09:27:06 +0000"  >&lt;p&gt;~&lt;sub&gt;Contrary to other tests we don&apos;t check whether S3 credentials are configured, since we can&apos;t guarantee that this is the case.&lt;/sub&gt;~&lt;/p&gt;

&lt;p&gt;Scratch that, it does contain the common assumptions, so something else is amiss...&lt;/p&gt;</comment>
                            <comment id="16561716" author="zentol" created="Mon, 30 Jul 2018 09:53:42 +0000"  >&lt;p&gt;Looks like a bug was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8439&quot; title=&quot;Add Flink shading to AWS credential provider s3 hadoop config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8439&quot;&gt;&lt;del&gt;FLINK-8439&lt;/del&gt;&lt;/a&gt;. According to the &lt;tt&gt;FileSystem&lt;/tt&gt; docs failures to create the FS should throw an &lt;tt&gt;IOException&lt;/tt&gt;, but the &lt;tt&gt;RuntimeException&lt;/tt&gt; thrown by presto is never catched.&lt;/p&gt;</comment>
                            <comment id="16561867" author="githubbot" created="Mon, 30 Jul 2018 12:42:10 +0000"  >&lt;p&gt;zentol opened a new pull request #6454: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9996&quot; title=&quot;PrestoS3FileSystemITCase#testConfigKeysForwarding fails on travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9996&quot;&gt;&lt;del&gt;FLINK-9996&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;fs&amp;#93;&lt;/span&gt; Wrap exceptions during FS creation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6454&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6454&lt;/a&gt;&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;What is the purpose of the change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   This PR is a small modification to the hadoop `AbstractFileSystemFactory` too wrap all exceptions that occur during the creation of a FileSystem in a `IOException`, like we did in the past.&lt;br/&gt;
   This behavior was modified in 7be07871c23b56547add4cd85e15b95c757f882b.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Verifying this change&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;run `PrestoS3FileSystemITCase#testConfigKeysForwarding`&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;Does this pull request potentially affect one of the following parts:&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dependencies (does it add or upgrade a dependency): (no)&lt;/li&gt;
	&lt;li&gt;The public API, i.e., is any changed class annotated with `@Public(Evolving)`: (no)&lt;/li&gt;
	&lt;li&gt;The serializers: (no)&lt;/li&gt;
	&lt;li&gt;The runtime per-record code paths (performance sensitive): (no)&lt;/li&gt;
	&lt;li&gt;Anything that affects deployment or recovery: JobManager (and its components), Checkpointing, Yarn/Mesos, ZooKeeper: (no)&lt;/li&gt;
	&lt;li&gt;The S3 file system connector: (yes)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16561869" author="githubbot" created="Mon, 30 Jul 2018 12:42:34 +0000"  >&lt;p&gt;zentol commented on issue #6454: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9996&quot; title=&quot;PrestoS3FileSystemITCase#testConfigKeysForwarding fails on travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9996&quot;&gt;&lt;del&gt;FLINK-9996&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;fs&amp;#93;&lt;/span&gt; Wrap exceptions during FS creation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6454#issuecomment-408849850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6454#issuecomment-408849850&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Naturally the alternative is to update the `FileSystem` docs and update the linked test to catch all exceptions.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16563362" author="githubbot" created="Tue, 31 Jul 2018 09:23:29 +0000"  >&lt;p&gt;aljoscha commented on issue #6454: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9996&quot; title=&quot;PrestoS3FileSystemITCase#testConfigKeysForwarding fails on travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9996&quot;&gt;&lt;del&gt;FLINK-9996&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;fs&amp;#93;&lt;/span&gt; Wrap exceptions during FS creation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6454#issuecomment-409155553&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6454#issuecomment-409155553&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   +1&lt;/p&gt;

&lt;p&gt;   This looks very straightforward&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16563419" author="githubbot" created="Tue, 31 Jul 2018 10:01:20 +0000"  >&lt;p&gt;zentol closed pull request #6454: &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-9996&quot; title=&quot;PrestoS3FileSystemITCase#testConfigKeysForwarding fails on travis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-9996&quot;&gt;&lt;del&gt;FLINK-9996&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;fs&amp;#93;&lt;/span&gt; Wrap exceptions during FS creation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/flink/pull/6454&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/6454&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/flink-filesystems/flink-hadoop-fs/src/main/java/org/apache/flink/runtime/fs/hdfs/AbstractFileSystemFactory.java b/flink-filesystems/flink-hadoop-fs/src/main/java/org/apache/flink/runtime/fs/hdfs/AbstractFileSystemFactory.java&lt;br/&gt;
index 201d58049bc..63919bab452 100644&lt;br/&gt;
&amp;#8212; a/flink-filesystems/flink-hadoop-fs/src/main/java/org/apache/flink/runtime/fs/hdfs/AbstractFileSystemFactory.java&lt;br/&gt;
+++ b/flink-filesystems/flink-hadoop-fs/src/main/java/org/apache/flink/runtime/fs/hdfs/AbstractFileSystemFactory.java&lt;br/&gt;
@@ -51,10 +51,16 @@ public void configure(Configuration config) {&lt;br/&gt;
 	public FileSystem create(URI fsUri) throws IOException {&lt;br/&gt;
 		LOG.debug(&quot;Creating Hadoop file system (backed by &quot; + name + &quot;)&quot;);&lt;br/&gt;
 		LOG.debug(&quot;Loading Hadoop configuration for &quot; + name);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.hadoop.conf.Configuration hadoopConfig = hadoopConfigLoader.getOrLoadHadoopConfig();&lt;/li&gt;
	&lt;li&gt;org.apache.hadoop.fs.FileSystem fs = createHadoopFileSystem();&lt;/li&gt;
	&lt;li&gt;fs.initialize(getInitURI(fsUri, hadoopConfig), hadoopConfig);&lt;/li&gt;
	&lt;li&gt;return new HadoopFileSystem(fs);&lt;br/&gt;
+		try 
{
+			org.apache.hadoop.conf.Configuration hadoopConfig = hadoopConfigLoader.getOrLoadHadoopConfig();
+			org.apache.hadoop.fs.FileSystem fs = createHadoopFileSystem();
+			fs.initialize(getInitURI(fsUri, hadoopConfig), hadoopConfig);
+			return new HadoopFileSystem(fs);
+		}
&lt;p&gt; catch (IOException ioe) &lt;/p&gt;
{
+			throw ioe;
+		}
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
+			throw new IOException(e.getMessage(), e);
+		}
&lt;p&gt; 	}&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 	protected abstract org.apache.hadoop.fs.FileSystem createHadoopFileSystem();&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16563421" author="zentol" created="Tue, 31 Jul 2018 10:02:23 +0000"  >&lt;p&gt;master: 2a70d4cdd790cd59e0974b4272b36afa6904a82a&lt;br/&gt;
1.6: ea4da3bacc2325941565bac5f486bdf2582c3c7a&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wgrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>