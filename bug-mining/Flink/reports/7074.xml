<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:17:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-29618] YARNSessionFIFOSecuredITCase.testDetachedMode timed out in Azure CI</title>
                <link>https://issues.apache.org/jira/browse/FLINK-29618</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;We experienced a &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=41931&amp;amp;view=logs&amp;amp;j=fc5181b0-e452-5c8f-68de-1097947f6483&amp;amp;t=995c650b-6573-581c-9ce6-7ad4cc038461&amp;amp;l=30284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build failure&lt;/a&gt; that was caused (exclusively) by &lt;tt&gt;YARNSessionFIFOSecuredITCase.testDetachedMode&lt;/tt&gt; running into a timeout.&lt;/p&gt;

&lt;p&gt;The test specific logs which were extracted from the build&apos;s are attached to this Jira issue.&lt;/p&gt;

&lt;p&gt;JUnit tries to stop the thread running the test but fails to due so because it&apos;s interrupting a sleep. The &lt;tt&gt;InterruptedException&lt;/tt&gt; is not properly handled in &lt;a href=&quot;https://github.com/apache/flink/blob/573ed922346c791760d27653543c2b8df56f51f7/flink-yarn-tests/src/test/java/org/apache/flink/yarn/YarnTestBase.java#L744&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;YarnTestBase:744&lt;/a&gt; (it doesn&apos;t forward the exception). Therefore, we only see the warning being logged after 60s:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
11:33:51,124 [ForkJoinPool-1-worker-25] WARN  org.apache.flink.yarn.YarnTestBase                           [] - Interruped
java.lang.InterruptedException: sleep interrupted
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method) ~[?:1.8.0_292]
        at org.apache.flink.yarn.YarnTestBase.sleep(YarnTestBase.java:716) ~[test-classes/:?]
        at org.apache.flink.yarn.YarnTestBase.startWithArgs(YarnTestBase.java:906) ~[test-classes/:?]
        at org.apache.flink.yarn.YARNSessionFIFOITCase.runDetachedModeTest(YARNSessionFIFOITCase.java:141) ~[test-classes/:?]
        at org.apache.flink.yarn.YARNSessionFIFOSecuredITCase.lambda$testDetachedMode$2(YARNSessionFIFOSecuredITCase.java:173) ~[test-classes/:?]
        at org.apache.flink.yarn.YarnTestBase.runTest(YarnTestBase.java:288) ~[test-classes/:?]
        at org.apache.flink.yarn.YARNSessionFIFOSecuredITCase.testDetachedMode(YARNSessionFIFOSecuredITCase.java:160) ~[test-classes/:?]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_292]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_292]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_292]
        at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_292]
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The test code itself eventually continues and succeeds (despite the interruption). The job submission takes suspiciously long, though.&lt;/p&gt;

&lt;p&gt;Removing the timeout from the test (as this is the desired approach for tests in general now) should solve this test instability.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13486054">FLINK-29618</key>
            <summary>YARNSessionFIFOSecuredITCase.testDetachedMode timed out in Azure CI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Wencong Liu">Wencong Liu</assignee>
                                    <reporter username="mapohl">Matthias Pohl</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>starter</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 13 Oct 2022 07:14:54 +0000</created>
                <updated>Mon, 22 May 2023 07:35:45 +0000</updated>
                            <resolved>Mon, 22 May 2023 07:35:45 +0000</resolved>
                                    <version>1.17.0</version>
                                                    <component>Deployment / YARN</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17711783" author="JIRAUSER281639" created="Thu, 13 Apr 2023 09:32:05 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; , do you think it&apos;s suitable to let CI judge whether it&apos;s timed out for this test? Currently it use&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Timeout(value = 60) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to judge the timed out status.&lt;/p&gt;</comment>
                            <comment id="17721655" author="mapohl" created="Thu, 11 May 2023 07:18:34 +0000"  >&lt;p&gt;I guess, you&apos;re right. The test timed out after 60 seconds (which is where the log warning about the &lt;tt&gt;InterruptedException&lt;/tt&gt; occurred). But the test itself continues because we&apos;re not forwarding the interrupt exception within the sleep call (see &lt;a href=&quot;https://github.com/apache/flink/blob/573ed922346c791760d27653543c2b8df56f51f7/flink-yarn-tests/src/test/java/org/apache/flink/yarn/YarnTestBase.java#L744&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;YarnTestBase:744&lt;/a&gt;) and succeeds eventually.&lt;/p&gt;

&lt;p&gt;Removing the timeout would have helped here to avoid test instabilities. Even though, it would have been interesting to investigate why the job submission takes that long. Unfortunately, the build artifacts are gone already.&lt;/p&gt;

&lt;p&gt;I updated the ticket&apos;s description.&lt;/p&gt;</comment>
                            <comment id="17721713" author="JIRAUSER281639" created="Thu, 11 May 2023 10:09:09 +0000"  >&lt;p&gt;Thanks for the reply &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; . I&apos;d like to remove the annotation. &#128522;&lt;/p&gt;</comment>
                            <comment id="17721744" author="mapohl" created="Thu, 11 May 2023 11:38:50 +0000"  >&lt;p&gt;Thanks for picking it up, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Wencong+Liu&quot; class=&quot;user-hover&quot; rel=&quot;Wencong Liu&quot;&gt;Wencong Liu&lt;/a&gt;. I assigned the ticket to you.&lt;/p&gt;</comment>
                            <comment id="17724799" author="mapohl" created="Mon, 22 May 2023 07:35:45 +0000"  >&lt;p&gt;master: 5b637243f27063f3a2f5fbc46a9e0d87207ff37a&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13050873" name="build-20221012.7.YARNSessionFIFOSecuredITCase.testDetachedMode.log" size="96041" author="mapohl" created="Thu, 13 Oct 2022 07:15:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19brs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>