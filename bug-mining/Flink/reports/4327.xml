<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:47:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-17800] RocksDB optimizeForPointLookup results in missing time windows</title>
                <link>https://issues.apache.org/jira/browse/FLINK-17800</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;ins&gt;My Setup:&lt;/ins&gt;&lt;/p&gt;

&lt;p&gt;We have been using the &lt;em&gt;RocksDb&lt;/em&gt; option of&#160;&lt;em&gt;optimizeForPointLookup&lt;/em&gt; and running version 1.7 for years. Upon upgrading to Flink 1.10 we started receiving a strange behavior of missing time windows on a streaming Flink job. For the purpose of testing I experimented with previous Flink version and (1.8, 1.9, 1.9.3) and non of them showed the problem&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;A sample of the code demonstrating the problem is here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;val datastream = env
&#160;.addSource(KafkaSource.keyedElements(config.kafkaElements, List(config.kafkaBootstrapServer)))

&#160;val result = datastream
&#160;.keyBy( _ =&amp;gt; 1)
 .timeWindow(Time.milliseconds(1))
&#160;.print()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The source consists of 3 streams (being either 3 Kafka partitions or 3 Kafka topics), the elements in each of the streams are separately increasing. The elements generate increasing timestamps using an event time and start from 1, increasing by 1. The first partitions would consist of timestamps 1, 2, 10, 15..., the second of 4, 5, 6, 11..., the third of 3, 7, 8, 9...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;What I observe:&lt;/ins&gt;&lt;/p&gt;

&lt;p&gt;The time windows would open as I expect for the first 127 timestamps. Then there would be a huge gap with no opened windows, if the source has many elements, then next open window would be having a timestamp in the thousands. A gap of hundred of elements would be created with what appear to be &apos;lost&apos; elements. Those elements are not reported as late&#160;(if tested with the .&lt;em&gt;sideOutputLateData&lt;/em&gt; operator). The way we have been using the option is by setting in inside the config like so:&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;etherbi.rocksDB.columnOptions.optimizeForPointLookup=268435456&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;We have been using it for performance reasons as we have huge RocksDB state backend.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13305703">FLINK-17800</key>
            <summary>RocksDB optimizeForPointLookup results in missing time windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yunta">Yun Tang</assignee>
                                    <reporter username="YordanPavlov">Yordan Pavlov</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 18 May 2020 15:32:51 +0000</created>
                <updated>Mon, 16 Aug 2021 06:27:12 +0000</updated>
                            <resolved>Fri, 26 Jun 2020 16:48:13 +0000</resolved>
                                    <version>1.10.0</version>
                    <version>1.10.1</version>
                                    <fixVersion>1.10.2</fixVersion>
                    <fixVersion>1.11.0</fixVersion>
                    <fixVersion>1.12.0</fixVersion>
                                    <component>Runtime / State Backends</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="17110892" author="yunta" created="Tue, 19 May 2020 06:27:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=YordanPavlov&quot; class=&quot;user-hover&quot; rel=&quot;YordanPavlov&quot;&gt;YordanPavlov&lt;/a&gt; Thanks for reporting this. &lt;/p&gt;

&lt;p&gt;Have you tried Flink-1.10 without optimizeForPointLookup, and will you job also meet this problem again?&lt;/p&gt;

&lt;p&gt;Basicily, optimizeForPointLookup would create a LRUcache with the size from your configuration (e.g. 268435456 bytes in your example), however, from Flink-1.10, we use managed memory for RocksDB by default, and it will use the size of managed memory to create an internal cache. You could also try to disable &lt;a href=&quot;https://ci.apache.org/projects/flink/flink-docs-stable/ops/config.html#state-backend-rocksdb-memory-managed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;state-backend-rocksdb-memory-managed&lt;/a&gt; to see whether your problem still existed.&lt;/p&gt;

&lt;p&gt;Last but not least, would you please give a simple example with fake source to reproduce this problem so that we could figure it out.&lt;/p&gt;</comment>
                            <comment id="17111047" author="yordanpavlov" created="Tue, 19 May 2020 10:17:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt;&#160;Thanks for picking up on this problem.&#160;&lt;br/&gt;
I am not observing the problem if I remove the&#160;&lt;em&gt;optimizeForPointLookup&lt;/em&gt; setting with Flink 1.10.1. I am attaching a sample source code demonstrating the problem.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13003376/13003376_MissingWindows.scala&quot; title=&quot;MissingWindows.scala attached to FLINK-17800&quot;&gt;MissingWindows.scala&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;sup&gt;Running that code with the optimizeForPointLookup setting what I am seeing as output is:&lt;/sup&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
TestElement(122)
TestElement(123)
TestElement(124)
TestElement(125)
TestElement(126)
TestElement(127)
Missed window before element TestElement(2780)
TestElement(2780)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;sup&gt;What I would expect instead is no &apos;Missed window&apos; warning to be fired and all TestElements to be printed.&lt;/sup&gt;&lt;/p&gt;</comment>
                            <comment id="17111331" author="yunta" created="Tue, 19 May 2020 16:36:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=YordanPavlov&quot; class=&quot;user-hover&quot; rel=&quot;YordanPavlov&quot;&gt;YordanPavlov&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is the attachment with the sample code in your description could reproduce this problem?&lt;/p&gt;

&lt;p&gt;BTW, have you checked that if turn off managed memory as I said, could this unexpected behavior still happen?&lt;/p&gt;</comment>
                            <comment id="17111864" author="yordanpavlov" created="Wed, 20 May 2020 07:33:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Yes the attachment reproduces the problem, it is an even simpler code than what I originally described as it does not have a Kafka source.&#160;&lt;/p&gt;

&lt;p&gt;I did check with disabling the managed memory:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;main] INFO org.apache.flink.configuration.GlobalConfiguration - Loading configuration property: state.backend.rocksdb.memory.managed, false&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;that does not prevent the problem from happening.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17117314" author="yunta" created="Wed, 27 May 2020 03:42:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=YordanPavlov&quot; class=&quot;user-hover&quot; rel=&quot;YordanPavlov&quot;&gt;YordanPavlov&lt;/a&gt; I have tried your program with some changes. However, the job would run with failure as &lt;tt&gt;assert(input.size == 1)&lt;/tt&gt; cannot be ensured.&lt;/p&gt;

&lt;p&gt;First of all, I cannot run your program as you use internal class &lt;tt&gt;StreamingScalaJob&lt;/tt&gt;, I have changed your program to general Flink interface so that it could run.&lt;/p&gt;

&lt;p&gt;Secondly, the program would fail:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: TimerException{java.lang.AssertionError: assertion failed}
	... 11 more
Caused by: java.lang.AssertionError: assertion failed
	at scala.Predef$.&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt;(Predef.scala:156)
	at org.apache.flink.streaming.scala.examples.RateChecker.apply(MissingWindows.scala:31)
	at org.apache.flink.streaming.scala.examples.RateChecker.apply(MissingWindows.scala:28)
	at org.apache.flink.streaming.api.scala.function.util.ScalaWindowFunctionWrapper.apply(ScalaWindowFunctionWrapper.scala:44)
	at org.apache.flink.streaming.runtime.operators.windowing.functions.InternalIterableWindowFunction.process(InternalIterableWindowFunction.java:44)
	at org.apache.flink.streaming.runtime.operators.windowing.functions.InternalIterableWindowFunction.process(InternalIterableWindowFunction.java:32)
	at org.apache.flink.streaming.runtime.operators.windowing.WindowOperator.emitWindowContents(WindowOperator.java:549)
	at org.apache.flink.streaming.runtime.operators.windowing.WindowOperator.onProcessingTime(WindowOperator.java:503)
	at org.apache.flink.streaming.api.operators.InternalTimerServiceImpl.onProcessingTime(InternalTimerServiceImpl.java:260)
	at org.apache.flink.streaming.runtime.tasks.StreamTask.invokeProcessingTimeCallback(StreamTask.java:1501)
	... 10 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have attached my code named as  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13004270/13004270_MyMissingWindows.scala&quot; title=&quot;MyMissingWindows.scala attached to FLINK-17800&quot;&gt;MyMissingWindows.scala&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; , please give us reproduceable program code without dependency or correct my usage if I am wrong.&lt;/p&gt;
</comment>
                            <comment id="17118820" author="yordanpavlov" created="Thu, 28 May 2020 15:25:01 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I am sorry for using internal code in my example. I had modified your code and uploaded it below so that you can reproduce the problem. I did two changes.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The program fails with assert error. This Is fixed by using&#160;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;In order to reproduce the problem the RocksDB&#160;optimizeForPointLookup option should be set.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Also note that the program would fail for me if I run it inside a local Flink cluster. The problem would not appear if I start the class from within an IDE (InteliJ in my case). Find below an edited version of your code which fails for me. Please let me know If you need additional information.&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13004270/13004270_MyMissingWindows.scala&quot; title=&quot;MyMissingWindows.scala attached to FLINK-17800&quot;&gt;MyMissingWindows.scala&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17119291" author="yunta" created="Fri, 29 May 2020 05:59:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=YordanPavlov&quot; class=&quot;user-hover&quot; rel=&quot;YordanPavlov&quot;&gt;YordanPavlov&lt;/a&gt;&lt;br/&gt;
 The quick fix for your scenario: configure &lt;tt&gt;state.backend.rocksdb.timer-service.factory&lt;/tt&gt; as &lt;tt&gt;HEAP&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The root cause is that RocksDB failed to seek the valid key and values on event time when optimizeForPointLookup is configured. And this bug caused by RocksDB actually also stays in Flink-1.7 (rocksDB version: 5.7.5), the reason why you do not meet is that Flink store timer on heap by default before Flink-1.10. Starting from Flink-1.10, timer starts to store in RocksDB instead, which surprise you.&lt;/p&gt;

&lt;p&gt;I have tried already released RocksDB versions and found at least from RocksDB-6.2.2, this bug disappeared. However, as RocksDB-6.2.2 also changed the internal implementation of &lt;a href=&quot;https://github.com/facebook/rocksdb/blob/6d113fc066c5816887eb19c84d12c0677a68af2b/options/options.cc#L514-L526&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;OptimizeForPointLookup&lt;/a&gt;, I still need some time to figure out why this bug happened in RocksDB.&lt;/p&gt;</comment>
                            <comment id="17119803" author="carp84" created="Fri, 29 May 2020 17:52:33 +0000"  >&lt;p&gt;Thanks for debugging and locating the root cause &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yunta&quot; class=&quot;user-hover&quot; rel=&quot;yunta&quot;&gt;yunta&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;From the analysis, this should be a RocksDB bug and requires a fix in FRocksDB and building a new version, which makes it not an easy fix. It&apos;s also a long existing issue but with more severe impact when we make RocksDB the default timer store for RocksDB backend in 1.10.0 release, rather than regression caused by changes in 1.11 release cycle.&lt;/p&gt;

&lt;p&gt;I agree we should try to fix it before 1.11.0, but tend to not consider it as a release blocker due to the above reasons, and suggest to downgrade the severity to Critical.&lt;/p&gt;

&lt;p&gt;Please also estimate the time needed and see whether we could make it in 1.11.0. Thanks.&lt;/p&gt;</comment>
                            <comment id="17122333" author="yunta" created="Tue, 2 Jun 2020 04:11:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyu&quot; class=&quot;user-hover&quot; rel=&quot;liyu&quot;&gt;liyu&lt;/a&gt; Thanks for your suggestion.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=YordanPavlov&quot; class=&quot;user-hover&quot; rel=&quot;YordanPavlov&quot;&gt;YordanPavlov&lt;/a&gt;, from my local experiments, If I revert the implementation of &lt;a href=&quot;https://github.com/facebook/rocksdb/blob/6d113fc066c5816887eb19c84d12c0677a68af2b/options/options.cc#L514-L526&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;OptimizeForPointLookup&lt;/a&gt;, this bug still existed in newer RocksDB. That&apos;s to say using &lt;tt&gt;NoopTransform&lt;/tt&gt; (which is not obvious in RocksDB-java) and &lt;tt&gt;kHashSearch&lt;/tt&gt; indexType could lead to this bug. And I have also created &lt;a href=&quot;https://github.com/facebook/rocksdb/issues/6893&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;related issue&lt;/a&gt; in RocksDB community.&lt;/p&gt;
</comment>
                            <comment id="17123843" author="stephanewen" created="Tue, 2 Jun 2020 14:06:24 +0000"  >&lt;p&gt;Could we forbid (ignore) the &lt;tt&gt;OptimizeForPointLookup&lt;/tt&gt; option in Flink 1.11.0 and 1.10.2, as a safety net against data loss as until we upgraded to the patched RocksDB version?&lt;/p&gt;</comment>
                            <comment id="17124850" author="yunta" created="Wed, 3 Jun 2020 10:49:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sewen&quot; class=&quot;user-hover&quot; rel=&quot;sewen&quot;&gt;sewen&lt;/a&gt;, the root cause is the prefix extractor of &lt;tt&gt;NoopTransform&lt;/tt&gt; introduced by &lt;tt&gt;optimizeForPointLookup&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;From this lesson, we should treat the javadoc of &lt;tt&gt;#optimizeForPointLookup&lt;/tt&gt; not a suggestion but a hard limit:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Use this if you don&apos;t need to keep the data sorted, i.e. you&apos;ll never use an iterator, only Put() and Get() API calls.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, I cannot check whether a prefix extractor has ever been configured from java side to avoid user misuse, that is to say, we cannot disable the &lt;tt&gt;optimizeForPointLookup&lt;/tt&gt; option from Flink side.&lt;/p&gt;

&lt;p&gt;The walk-around solution is to call &lt;tt&gt;setTotalOrderSeek(true)&lt;/tt&gt; for &lt;tt&gt;ReadOptions&lt;/tt&gt; when creating iterators, that could ensure the sorted order is correct. I have tested the performance of iterator-like operations of map state below, it looks like no obvious performance change.&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Iterator like opertions&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;original ops/ms&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;with setTotalOrderSeek ops/ms&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;performance change&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MapStateBenchmark.mapEntries&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;322.306&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;320.794&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-0.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MapStateBenchmark.mapIsEmpty&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;42.012&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;42.042&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MapStateBenchmark.mapIterator&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;313.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;319.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MapStateBenchmark.mapKeys&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;324.088&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;311.491&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-3.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MapStateBenchmark.mapValues&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;321.387&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;328.309&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17136440" author="carp84" created="Tue, 16 Jun 2020 08:36:36 +0000"  >&lt;p&gt;Merged into master via&lt;br/&gt;
8ca388ca0225ff22f532c8a65f97d8cfea027c22&lt;br/&gt;
f1250625b2ade530fa2619d6e1bb734832748d31&lt;/p&gt;

&lt;p&gt;Merged into release-1.11 via&lt;br/&gt;
5c0de8d6d5a9eea1a779cf3703412f522bece54c&lt;br/&gt;
8f3172962c5033d4a7dbf5232c18d3e872821c02&lt;/p&gt;

&lt;p&gt;Working on release-1.10.&lt;/p&gt;</comment>
                            <comment id="17136564" author="carp84" created="Tue, 16 Jun 2020 11:39:53 +0000"  >&lt;p&gt;Merged into release-1.10 via:&lt;br/&gt;
b8ddbef9a5cc5dc769ba61bd5019dd96843c932f&lt;br/&gt;
88c22864504d772764c5838afe0b944f1da50a3a&lt;/p&gt;

&lt;p&gt;Closing JIRA since fix merged into all related branches.&lt;/p&gt;</comment>
                            <comment id="17138398" author="rmetzger" created="Wed, 17 Jun 2020 12:35:14 +0000"  >&lt;p&gt;Reopening, because I reverted the change in:&lt;br/&gt;
(master)&lt;br/&gt;
f6f51d8767990cee7f1ca052b040530b646c3efe&lt;br/&gt;
59486908060cbb04c9b34d800a935758d06d1c69&lt;/p&gt;

&lt;p&gt;(release-1.11)&lt;br/&gt;
cdac5e32eb2d3348d711207c96c91f97a17aa2d9&lt;br/&gt;
6e367fb06a3f02360bd8e9216dd477d3e3b68186&lt;/p&gt;</comment>
                            <comment id="17141949" author="yunta" created="Mon, 22 Jun 2020 11:47:38 +0000"  >&lt;p&gt;After figured out why RocksDB could crash in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-18338&quot; title=&quot;RocksDB tests crash the JVM on CI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-18338&quot;&gt;&lt;del&gt;FLINK-18338&lt;/del&gt;&lt;/a&gt;, I have created new PR &lt;a href=&quot;https://github.com/apache/flink/pull/12736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/12736&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17142643" author="carp84" created="Tue, 23 Jun 2020 05:57:36 +0000"  >&lt;p&gt;Escalating the priority to Blocker since the previous observed coredump issue is confirmed to be a UT design problem with PR already in review, and the issue reported here would cause silent data loss thus a critical one for production usage and better get fixed in 1.11.0&lt;/p&gt;</comment>
                            <comment id="17142790" author="carp84" created="Tue, 23 Jun 2020 09:31:32 +0000"  >&lt;p&gt;Downgrade to Critical after some offline discussion, will try best to make it in though. Sorry for the back and forth priority change.&lt;/p&gt;</comment>
                            <comment id="17146478" author="carp84" created="Fri, 26 Jun 2020 16:48:13 +0000"  >&lt;p&gt;Merged the new fix into master via&lt;br/&gt;
3516e37ae0aa4ee040b6844f336541315a455ce9&lt;br/&gt;
11d45135d85937edd16fb4f8f94ba71f5f794626&lt;br/&gt;
1718f50645ddc01d5e2e13cc5627bafe98191fa2&lt;/p&gt;

&lt;p&gt;into release-1.11 via&lt;br/&gt;
b2e344a46c5d30ad46231d5c6a42bf09d9e8e559&lt;br/&gt;
33caa00e8df88565f022d4258148d09c90d9452b&lt;br/&gt;
7e1c83ddcf0e5e4417ccf25fd1d0facce9f30e0e&lt;/p&gt;

&lt;p&gt;into release-1.10 via&lt;br/&gt;
de6f3aa7e5b2e4fcfbed4adeab12d4d519f1e6fb&lt;br/&gt;
3f8649e5c7bf731fac3cc5bfd3c5ed466f1dc561&lt;br/&gt;
9b45486ccce31ebef3f91dd4e6102efe3c6d51a3&lt;/p&gt;


&lt;p&gt;Since all work done, closing the JIRA.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13311790">FLINK-18338</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13395373">FLINK-23789</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13263706">FLINK-14482</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13003376" name="MissingWindows.scala" size="2455" author="YordanPavlov" created="Tue, 19 May 2020 10:15:30 +0000"/>
                            <attachment id="13004270" name="MyMissingWindows.scala" size="3396" author="YordanPavlov" created="Thu, 28 May 2020 15:24:17 +0000"/>
                            <attachment id="13004086" name="MyMissingWindows.scala" size="2551" author="yunta" created="Wed, 27 May 2020 03:40:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0evbk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>After &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-17800&quot; title=&quot;RocksDB optimizeForPointLookup results in missing time windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-17800&quot;&gt;&lt;strike&gt;FLINK-17800&lt;/strike&gt;&lt;/a&gt; by default we will set `setTotalOrderSeek` to true for RocksDB&amp;#39;s `ReadOptions`, to prevent user from miss using `optimizeForPointLookup`. Meantime we support customizing `ReadOptions` through `RocksDBOptionsFactory`. Please set `setTotalOrderSeek` back to false if any performance regression observed (normally won&amp;#39;t happen according to our testing).</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>