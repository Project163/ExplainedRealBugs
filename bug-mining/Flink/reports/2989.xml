<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:39:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-9445] scala-shell uses plain java command</title>
                <link>https://issues.apache.org/jira/browse/FLINK-9445</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;I&apos;m attempting to install and test apache-flink 1.5.0 on macOS using Homebrew.&lt;/p&gt;

&lt;p&gt;The test step runs flink&apos;s `start-scala-shell.sh` to exercise the package. When I do this, it issues some warnings about log4j and reflective access, and then hangs.&lt;/p&gt;

&lt;p&gt;$ brew test apache-flink&lt;br/&gt;
Testing apache-flink&lt;br/&gt;
==&amp;gt; /usr/local/Cellar/apache-flink/1.5.0/libexec/bin/start-scala-shell.sh local&lt;br/&gt;
Picked up _JAVA_OPTIONS: -Djava.io.tmpdir=/tmp/apache-flink-test-20180526-20068-19gl4zf -Duser.home=/Users/janke/Library/Caches/Homebrew/java_cache&lt;br/&gt;
log4j:WARN No appenders could be found for logger (org.apache.flink.configuration.GlobalConfiguration).&lt;br/&gt;
log4j:WARN Please initialize the log4j system properly.&lt;br/&gt;
log4j:WARN See &lt;a href=&quot;http://logging.apache.org/log4j/1.2/faq.html#noconfig&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://logging.apache.org/log4j/1.2/faq.html#noconfig&lt;/a&gt; for more info.&lt;br/&gt;
WARNING: An illegal reflective access operation has occurred&lt;br/&gt;
WARNING: Illegal reflective access by org.apache.flink.core.memory.HybridMemorySegment (&lt;a href=&quot;file:///usr/local/Cellar/apache-flink/1.5.0/libexec/lib/flink-dist_2.11-1.5.0.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/usr/local/Cellar/apache-flink/1.5.0/libexec/lib/flink-dist_2.11-1.5.0.jar&lt;/a&gt;) to field java.nio.Buffer.address&lt;br/&gt;
WARNING: Please consider reporting this to the maintainers of org.apache.flink.core.memory.HybridMemorySegment&lt;br/&gt;
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations&lt;br/&gt;
WARNING: All illegal access operations will be denied in a future release&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The log4j warnings just mean&#160;that log4j hasn&apos;t been initialized; no big deal.&lt;/p&gt;

&lt;p&gt;The &quot;Illegal reflective access&quot; warnings look like the warnings you see when running Java 8-only software under Java 9 or Java 10.&lt;/p&gt;

&lt;p&gt;This happens even when I set `JAVA_HOME` to point at my JDK 8 installation.&lt;/p&gt;

&lt;p&gt;I suspect this is because the `start-scala-shell.sh` script calls plain `java` instead of using the `$JAVA_RUN` variable set in flink&apos;s `config.sh`, which it called earlier, and which seems to respect `$JAVA_HOME`. From `start-scala-shell.sh`:&lt;/p&gt;

&lt;p&gt;if ${EXTERNAL_LIB_FOUND}&lt;br/&gt;
then&lt;br/&gt;
&#160; &#160;java -Dscala.color -cp &quot;$FLINK_CLASSPATH&quot; $log_setting org.apache.flink.api.scala.FlinkShell $@ --addclasspath &quot;$EXT_CLASSPATH&quot;&lt;br/&gt;
else&lt;br/&gt;
&#160; &#160;java -Dscala.color -cp &quot;$FLINK_CLASSPATH&quot; $log_setting org.apache.flink.api.scala.FlinkShell $@&lt;br/&gt;
fi&lt;/p&gt;

&lt;p&gt;Should `start-scala-shell.sh` be changed to use `$JAVA_HOME` like the other scripts in `libexec`?&lt;/p&gt;</description>
                <environment>&lt;p&gt;macOS High Sierra 10.13.4&lt;/p&gt;

&lt;p&gt;$ sw_vers&lt;br/&gt;
ProductName: Mac OS X&lt;br/&gt;
ProductVersion: 10.13.4&lt;br/&gt;
BuildVersion: 17E202&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have multiple JDKs installed:&lt;/p&gt;


&lt;p&gt;$ ls /Library/Java/JavaVirtualMachines&lt;br/&gt;
jdk-10.0.1.jdk jdk-9.0.4.jdk jdk1.7.0_79.jdk jdk1.8.0_141.jdk&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13162225">FLINK-9445</key>
            <summary>scala-shell uses plain java command</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chesnay">Chesnay Schepler</assignee>
                                    <reporter username="apjanke">Andrew Janke</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 26 May 2018 12:31:18 +0000</created>
                <updated>Fri, 10 May 2019 07:40:49 +0000</updated>
                            <resolved>Fri, 10 May 2019 07:40:49 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.7.3</fixVersion>
                    <fixVersion>1.8.1</fixVersion>
                    <fixVersion>1.9.0</fixVersion>
                                    <component>Command Line Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16492116" author="till.rohrmann" created="Sun, 27 May 2018 18:41:49 +0000"  >&lt;p&gt;Thanks for reporting this issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apjanke&quot; class=&quot;user-hover&quot; rel=&quot;apjanke&quot;&gt;apjanke&lt;/a&gt;. Your analysis seems to be right that the &lt;tt&gt;start-scala-shell.sh&lt;/tt&gt; uses the plain &lt;tt&gt;java&lt;/tt&gt; command instead of using &lt;tt&gt;$JAVA_RUN&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;There is currently another problem with the scala shell not working correctly (see &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-8795&quot; title=&quot;Scala shell broken for Flip6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-8795&quot;&gt;&lt;del&gt;FLINK-8795&lt;/del&gt;&lt;/a&gt;). Therefore, I&apos;ve updated the Flink test in homebrew&apos;s formula &lt;tt&gt;apache-flink.rb&lt;/tt&gt;. The corresponding PR is &lt;a href=&quot;https://github.com/Homebrew/homebrew-core/pull/28342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Homebrew/homebrew-core/pull/28342&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16836995" author="zentol" created="Fri, 10 May 2019 07:40:49 +0000"  >&lt;p&gt;master: f3252c474a4d338c92f5a188d7fae17e9c25c73b&lt;br/&gt;
1.8: 3d8cc4acc62133d03f277ad1428258295c6128f5&lt;br/&gt;
1.7: e5211d8af4dc5fc250b531c3349223387212b44b &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3u753:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>