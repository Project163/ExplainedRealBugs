<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:38:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-11771] Serializer snapshot cannot be read if directly upgraded in-place to a TypeSerializerSnapshot from a TypeSerializerConfigSnapshot written in 1.7+</title>
                <link>https://issues.apache.org/jira/browse/FLINK-11771</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;This is a upgrade path that was overlooked in &lt;tt&gt;TypeSerializerSnapshot#readVersionedSnapshot&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;If the serializer snapshot was a &lt;tt&gt;TypeSerializerConfigSnapshot&lt;/tt&gt; when it was written in 1.7+ Flink versions, the actual snapshot content will be prefixed by a magic &lt;tt&gt;TypeSerializerConfigSnapshot#ADAPTER_VERSION&lt;/tt&gt; int as the snapshot version, as well as Java-serialized prior serializer.&lt;/p&gt;

&lt;p&gt;If when restoring, the serializer snapshot was upgraded in-place to a &lt;tt&gt;TypeSerializerSnapshot&lt;/tt&gt; (in-place meaning, same classname, not introducing a new snapshot class), &lt;tt&gt;TypeSerializerSnapshot#readVersionedSnapshot&lt;/tt&gt; doesn&apos;t work as expected.&lt;br/&gt;
Firstly, the provided &lt;tt&gt;readVersion&lt;/tt&gt; to the user-implemented &lt;tt&gt;TypeSerializerSnapshot#readSnapshot&lt;/tt&gt; method would be the magic &lt;tt&gt;ADAPTER_VERSION&lt;/tt&gt;.&lt;br/&gt;
Secondly, the remaining stream would contain the Java-serialized prior serializer, which is no longer relevant for the user (because they already upgraded to the new abstraction and would have a fully functional &lt;tt&gt;restoreSerializer&lt;/tt&gt; implementation). To workaround that, they would have to read and drop that Java-serialized serializer in user code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13218290">FLINK-11771</key>
            <summary>Serializer snapshot cannot be read if directly upgraded in-place to a TypeSerializerSnapshot from a TypeSerializerConfigSnapshot written in 1.7+</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tzulitai">Tzu-Li (Gordon) Tai</assignee>
                                    <reporter username="tzulitai">Tzu-Li (Gordon) Tai</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Feb 2019 08:38:54 +0000</created>
                <updated>Thu, 28 Feb 2019 11:23:40 +0000</updated>
                            <resolved>Thu, 28 Feb 2019 11:23:40 +0000</resolved>
                                                    <fixVersion>1.8.0</fixVersion>
                                    <component>API / Type Serialization System</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16780410" author="tzulitai" created="Thu, 28 Feb 2019 11:23:40 +0000"  >&lt;p&gt;Merged.&lt;/p&gt;

&lt;p&gt;1.8.0: 93c1515fab1a293b204f3666f1f1d86f449bf366&lt;br/&gt;
1.9.0: e9ec5d6729f5eb2770cc48a23cfafce9b3eb7018&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z004oo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>