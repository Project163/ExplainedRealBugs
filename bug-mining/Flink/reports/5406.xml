<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:57:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-22566] Running Kerberized YARN application on Docker test (default input) fails with no resources</title>
                <link>https://issues.apache.org/jira/browse/FLINK-22566</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17558&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=8745&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17558&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=8745&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
May 05 01:29:04 Caused by: java.util.concurrent.TimeoutException: Timeout has occurred: 120000 ms
May 05 01:29:04 	at org.apache.flink.runtime.jobmaster.slotpool.PhysicalSlotRequestBulkCheckerImpl.lambda$schedulePendingRequestBulkWithTimestampCheck$0(PhysicalSlotRequestBulkCheckerImpl.java:86) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_292]
May 05 01:29:04 	at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_292]
May 05 01:29:04 	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRunAsync(AkkaRpcActor.java:440) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleRpcMessage(AkkaRpcActor.java:208) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at org.apache.flink.runtime.rpc.akka.FencedAkkaRpcActor.handleRpcMessage(FencedAkkaRpcActor.java:77) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at org.apache.flink.runtime.rpc.akka.AkkaRpcActor.handleMessage(AkkaRpcActor.java:158) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:26) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.japi.pf.UnitCaseStatement.apply(CaseStatements.scala:21) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at scala.PartialFunction$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;applyOrElse(PartialFunction.scala:123) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.japi.pf.UnitCaseStatement.applyOrElse(CaseStatements.scala:21) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:170) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at scala.PartialFunction$OrElse.applyOrElse(PartialFunction.scala:171) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.actor.Actor$&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;aroundReceive(Actor.scala:517) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.actor.AbstractActor.aroundReceive(AbstractActor.scala:225) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:592) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.actor.ActorCell.invoke(ActorCell.scala:561) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:258) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.dispatch.Mailbox.run(Mailbox.scala:225) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	at akka.dispatch.Mailbox.exec(Mailbox.scala:235) ~[flink-dist_2.11-1.13-SNAPSHOT.jar:1.13-SNAPSHOT]
May 05 01:29:04 	... 4 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13376732">FLINK-22566</key>
            <summary>Running Kerberized YARN application on Docker test (default input) fails with no resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="mapohl">Matthias Pohl</assignee>
                                    <reporter username="dwysakowicz">Dawid Wysakowicz</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Wed, 5 May 2021 07:07:11 +0000</created>
                <updated>Sat, 28 Aug 2021 11:19:27 +0000</updated>
                            <resolved>Mon, 10 May 2021 10:03:37 +0000</resolved>
                                    <version>1.13.0</version>
                                                    <component>Deployment / YARN</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17339463" author="dawidwys" created="Wed, 5 May 2021 07:09:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17557&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=8780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17557&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=8780&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17339464" author="dawidwys" created="Wed, 5 May 2021 07:10:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=8754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=8754&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17339468" author="dawidwys" created="Wed, 5 May 2021 07:12:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=739e6eac-8312-5d31-d437-294c4d26fced&amp;amp;t=a68b8d89-50e9-5977-4500-f4fde4f57f9b&amp;amp;l=9021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=739e6eac-8312-5d31-d437-294c4d26fced&amp;amp;t=a68b8d89-50e9-5977-4500-f4fde4f57f9b&amp;amp;l=9021&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17339469" author="dawidwys" created="Wed, 5 May 2021 07:12:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=68a897ab-3047-5660-245a-cce8f83859f6&amp;amp;t=16ca2cca-2f63-5cce-12d2-d519b930a729&amp;amp;l=8976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=68a897ab-3047-5660-245a-cce8f83859f6&amp;amp;t=16ca2cca-2f63-5cce-12d2-d519b930a729&amp;amp;l=8976&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17339470" author="dawidwys" created="Wed, 5 May 2021 07:12:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=91bf6583-3fb2-592f-e4d4-d79d79c3230a&amp;amp;t=3425d8ba-5f03-540a-c64b-51b8481bf7d6&amp;amp;l=8983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=91bf6583-3fb2-592f-e4d4-d79d79c3230a&amp;amp;t=3425d8ba-5f03-540a-c64b-51b8481bf7d6&amp;amp;l=8983&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17339471" author="dawidwys" created="Wed, 5 May 2021 07:12:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=7f606211-1454-543c-70ab-c7a028a1ce8c&amp;amp;l=8997&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17552&amp;amp;view=logs&amp;amp;j=08866332-78f7-59e4-4f7e-49a56faa3179&amp;amp;t=7f606211-1454-543c-70ab-c7a028a1ce8c&amp;amp;l=8997&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17339552" author="mapohl" created="Wed, 5 May 2021 09:33:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=408&amp;amp;view=logs&amp;amp;j=9401bf33-03c4-5a24-83fe-e51d75db73ef&amp;amp;t=72901ab2-7cd0-57be-82b1-bca51de20fba&amp;amp;l=8297&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/mapohl/flink/_build/results?buildId=408&amp;amp;view=logs&amp;amp;j=9401bf33-03c4-5a24-83fe-e51d75db73ef&amp;amp;t=72901ab2-7cd0-57be-82b1-bca51de20fba&amp;amp;l=8297&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could be related to the scheduler because we run into &lt;tt&gt;NoResourceAvailableException&lt;/tt&gt; problems in &lt;tt&gt;PhysicalSlotRequestBulkCheckerImpl&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;(update)&lt;br/&gt;
I just verified: All builds listed so far have &lt;tt&gt;NoResourceAvailableException&lt;/tt&gt; as a cause.&lt;/p&gt;</comment>
                            <comment id="17339616" author="mapohl" created="Wed, 5 May 2021 11:56:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=410&amp;amp;view=logs&amp;amp;j=9401bf33-03c4-5a24-83fe-e51d75db73ef&amp;amp;t=72901ab2-7cd0-57be-82b1-bca51de20fba&amp;amp;l=8869&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/mapohl/flink/_build/results?buildId=410&amp;amp;view=logs&amp;amp;j=9401bf33-03c4-5a24-83fe-e51d75db73ef&amp;amp;t=72901ab2-7cd0-57be-82b1-bca51de20fba&amp;amp;l=8869&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17339679" author="roman_khachatryan" created="Wed, 5 May 2021 14:05:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17567&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=8224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17567&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=8224&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The log also contains access denied error, probably related: &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17567&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=6658&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17567&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=6658&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17340037" author="mapohl" created="Thu, 6 May 2021 07:06:49 +0000"  >&lt;p&gt;Good point &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roman_khachatryan&quot; class=&quot;user-hover&quot; rel=&quot;roman_khachatryan&quot;&gt;roman_khachatryan&lt;/a&gt;. There&apos;s an error (see &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17558&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=5695&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;logs&lt;/a&gt;) indicating that the it&apos;s about Kerberos credentials: &lt;tt&gt;Caused by: java.lang.RuntimeException: Hadoop security with Kerberos is enabled but the login user does not have Kerberos credentials or delegation tokens!&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17340041" author="pnowojski" created="Thu, 6 May 2021 07:16:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17606&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17606&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17340047" author="mapohl" created="Thu, 6 May 2021 07:30:47 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Good point Roman Khachatryan. There&apos;s an error (see logs) indicating that the it&apos;s about Kerberos credentials: Caused by: java.lang.RuntimeException: Hadoop security with Kerberos is enabled but the login user does not have Kerberos credentials or delegation tokens!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;del&gt;Ok, the Hadoop Kerberos credentials error does not have an impact on the test result (it also appears for succeeding builds like &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17436&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=5623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;that one&lt;/a&gt;).&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;The Hadoop Kerberos credentials error is an expected error as state in the logs right above the exception (see &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17436&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&amp;amp;l=5578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;logs&lt;/a&gt;). Sorry for the false alarm.&lt;/p&gt;</comment>
                            <comment id="17340146" author="mapohl" created="Thu, 6 May 2021 11:06:49 +0000"  >&lt;p&gt;The permission denied error seems to be a common issue as pointed out by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chesnay&quot; class=&quot;user-hover&quot; rel=&quot;chesnay&quot;&gt;chesnay&lt;/a&gt;: Here&apos;s another &lt;a href=&quot;https://dev.azure.com/apache-flink/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/build/builds/9066/logs/135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;failed build&lt;/a&gt; where this error was exposed due to the logs being printed in case of failure.&lt;/p&gt;</comment>
                            <comment id="17340158" author="mapohl" created="Thu, 6 May 2021 11:43:32 +0000"  >&lt;p&gt;For transparency reasons, here are my findings based on the &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=17606&amp;amp;view=logs&amp;amp;j=c88eea3b-64a0-564d-0031-9fdcd7b8abee&amp;amp;t=ff888d9b-cd34-53cc-d90f-3e446d355529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;failed build #17606&lt;/a&gt;&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pnowojski&quot; class=&quot;user-hover&quot; rel=&quot;pnowojski&quot;&gt;pnowojski&lt;/a&gt; shared:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
* Test
  * YARN nodes come up successfully (line 7368)
  * Job is identified as FAILED by the test at 5:36:40 (line 7514)

* YARN&apos;s HistoryServer retrieves a connection refused error at 5:31:05 (line 7572)
  * succeeds at 5:31:16 (line 7617) but fails to initialize (line 7619)
  * Error creating done directory: [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//master.docker-hadoop-cluster-network:9000/tmp/hadoop-yarn/staging/history/done] at 5:31:17 (line 7619)
&lt;/span&gt;    * Permission denied: user=mapred, access=WRITE, inode=&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;:hdfs:root:drwxr-xr-x
    * indicates that there&apos;s a not allowed write operation on / having hdfs as an owner and root as the group
    * user is mapred
  * HistoryServer stops as a consequence at 5:31:17 (line 7797): FATAL error reported at 5:31:17 (line 7890)

* YARN&apos;s namenode
  * Logs look fine
  * Start at line 7985
  * Stop at 5:36:37 (line 8296)

* YARN&apos;s resourcemanager
  * Logs look fine: TM Containers are transitioned to RUNNING at 5:34:38 (line 8544/8545)
  * Start at line 8298
  * Stop at 5:36:40 (line 8611)

* YARN&apos;s timeline server
  * Logs look fine: no logging of worker activity at all
  * Start at line 8613
  * Stop at 5:36:40 (line 8687)

* Docker logs
  * namenode logs indicate some normal NameNode shutdown at 5:30:30 (line 8761)
    * NameNode address master.docker-hadoop-cluster-network/172.21.0.3 in shutdown message (line 8764)
    * Connection refused error at 5:31:04 accessing master.docker-hadoop-cluster-network/172.21.0.3 (line 8769)
    * Line 8803: From master.docker-hadoop-cluster-network/172.21.0.3 to master.docker-hadoop-cluster-network:9000 failed on connection exception: java.net.ConnectException
    * Normal error message according to https:&lt;span class=&quot;code-comment&quot;&gt;//cwiki.apache.org/confluence/display/HADOOP2/ConnectionRefused
&lt;/span&gt;  * Finished master initialization at 5:36:41 (line 8873)

* Flink logs
  * TaskExecutor #0 started at 5:36:21 (line 8904)
    * container ID: container_1620279065731_0001_01_000004
    * no errors
    * Received SIGTERM at 5:36:33 (line 9017)
  * TaskExecutor #1 started at 5:36:21 (line 9047)
    * container ID: container_1620279065731_0001_01_000003
    * no errors
    * Received SIGTERM at 5:36:34 (line 9164)
  * TaskExecutor #2 started at 5:34:41 (line 9196)
    * container ID: container_1620279065731_0001_01_000002
    * connected to JobManager &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job e487226aebee9bced1a45881914ecf8e at 5:34:57 (line 9332)
      * Slot is offered, activated, and freed afterwards
      * but no Task logging indicates that the Task was executed
    * Job is removed from job leader monitoring at 5:36:32 (line 9336)
    * no errors
    * Received SIGTERM at 5:36:33 (line 9338)
  * JobManager started at 5:34:24 (line 9372)
    * Worker container_1620279065731_0001_01_000002 is registered at 5:34:56 (line 9563)
    * NoResourceAvailableException is thrown after timeout of 120s at 5:36:32 (line 9565)
    * No restart strategy is making the job &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; into FAILED state at 5:36:32 (line 9695)
    * JobManager stopped at 5:36:34 (line 10045)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We&apos;ve seen similar behavior in &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-21859&quot; title=&quot;Outdated slot offer responses may release slot prematurely&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-21859&quot;&gt;&lt;del&gt;FLINK-21859&lt;/del&gt;&lt;/a&gt; where the Task was not executed on the TaskExecutor&apos;s side. We&apos;re proceeding with the investigation by rerunning the e2e test on AzureCI having the log level set to &lt;tt&gt;DEBUG&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17340237" author="arvid" created="Thu, 6 May 2021 14:11:37 +0000"  >&lt;p&gt;I disabled the tests in 1.12 with 59f764ba504df53e5bd6226c6d8e668f1f964ba3.&lt;/p&gt;</comment>
                            <comment id="17340700" author="mapohl" created="Fri, 7 May 2021 09:40:51 +0000"  >&lt;p&gt;It appears to be an infrastructure issue. My initial investigation was based on an assumption that we&apos;re using &lt;tt&gt;AdaptiveScheduler&lt;/tt&gt; which would pick up the work even if we&apos;re not having enough resources/slots available. But the logs show that it&apos;s not the case. The &lt;tt&gt;DefaultScheduler&lt;/tt&gt; is used which fails if we cannot provide all the slots requested for the job.&lt;/p&gt;

&lt;p&gt;The jobs ask for 3 slots. Therefore, 3 TaskManagers are spun up. But we&apos;re seeing some lack between the YARN workers becoming available (shown in YARN&apos;s ResourceManager logs) and the TaskExecutors actually starting. I updated the findings &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-22566?focusedCommentId=17340158&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17340158&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;in the comment above&lt;/a&gt; to reflect that. I also verified the findings for a few of the builds mentioned in this ticket (namely &lt;a href=&quot;https://dev.azure.com/mapohl/6a072220-8d55-43e8-85fc-08397ab083d1/_apis/build/builds/408/logs/135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build #408&lt;/a&gt;, &lt;a href=&quot;https://dev.azure.com/apache-flink/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/build/builds/17552/logs/492&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build #17552&lt;/a&gt; and &lt;a href=&quot;https://dev.azure.com/apache-flink/98463496-1af2-4620-8eab-a2ecc1a2e6fe/_apis/build/builds/17557/logs/171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;build #17557&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I didn&apos;t find other resources/logs to dig deeper into what&apos;s going on between the YARN containers becoming available and the TaskManagers actually starting on the Flink side.&lt;/p&gt;

&lt;p&gt;We were not able to reproduce the issue on AzureCI &lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=412&amp;amp;view=results&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;with looping over one of the Kerberized YARN e2e tests&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;From what we found so far it looks like the test failures are caused by some (quite huge?; close to 2mins) infrastructure lag which we cannot explain due to missing logs. I initiated a &lt;a href=&quot;https://dev.azure.com/mapohl/flink/_build/results?buildId=413&amp;amp;view=results&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;second test loop run&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17340703" author="rmetzger" created="Fri, 7 May 2021 09:46:56 +0000"  >&lt;p&gt;Thanks for your investigations. &lt;br/&gt;
Which logs are missing? Can we improve the tooling to include them?&lt;br/&gt;
Does it make sense to increase the timeout (in this test) for the TaskManager to register to make this test more resilient against future infrastructure issues?&lt;/p&gt;</comment>
                            <comment id="17340817" author="mapohl" created="Fri, 7 May 2021 13:11:39 +0000"  >&lt;p&gt;I had some discussion about it with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fly_in_gis&quot; class=&quot;user-hover&quot; rel=&quot;fly_in_gis&quot;&gt;fly_in_gis&lt;/a&gt;. The NodeManager logs might have been helpful in this case. The NodeManager is in charge of downloading the jar&apos;s before actually starting the TaskManagers. The NodeManager&apos;s logs are located on the worker nodes which we haven&apos;t accessed so far. I added commits to cover that.&lt;/p&gt;

&lt;p&gt;The initial idea was to increase the timeout as well. But I didn&apos;t increased it for now. We might want to understand the issue before increasing the timeout. It could be an infrastructure problem. In that case, we increasing the timeout would make sense. I&apos;m just afraid that it&apos;s a different problem which we&apos;re not aware of right now. Increasing the timeout in that case would just mask it. I rather run into the same problem again hoping to investigate the NodeManager logs next time.&lt;/p&gt;</comment>
                            <comment id="17340852" author="rmetzger" created="Fri, 7 May 2021 13:58:52 +0000"  >&lt;p&gt;Okay, that&apos;s a good proposal! Looking forward to the PR extracting the NodeManager logs!&lt;/p&gt;</comment>
                            <comment id="17341807" author="zentol" created="Mon, 10 May 2021 10:00:28 +0000"  >&lt;p&gt;log extraction improved:&lt;/p&gt;

&lt;p&gt;master: 56a7a11d860731c7642a8b8d9df5466d0689cd75&lt;/p&gt;

&lt;p&gt;1.13: b5a9336b9b93920708a6ca4126d4035bb165bab5&lt;/p&gt;

&lt;p&gt;1.12: 2b1d475d074f629fc0f04c63723873de1e86bdb0&lt;/p&gt;

&lt;p&gt;Re-enabled tests in 1.12 with ca9d2cb47a43c147d3c1c137bb1c5cc6180bb30f&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13376730">FLINK-22565</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qqm0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>