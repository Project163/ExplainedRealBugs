<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:20:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-2499] start-cluster.sh can start multiple TaskManager on the same node</title>
                <link>https://issues.apache.org/jira/browse/FLINK-2499</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;11562 JobHistoryServer&lt;br/&gt;
3251 Main&lt;br/&gt;
10596 Jps&lt;br/&gt;
17934 RunJar&lt;br/&gt;
6879 Main&lt;br/&gt;
8837 Main&lt;br/&gt;
19215 RunJar&lt;br/&gt;
28902 DataNode&lt;br/&gt;
6627 TaskManager&lt;br/&gt;
642 NodeManager&lt;br/&gt;
10408 RunJar&lt;br/&gt;
10210 TaskManager&lt;br/&gt;
5067 TaskManager&lt;br/&gt;
357 ApplicationHistoryServer&lt;br/&gt;
3540 RunJar&lt;br/&gt;
28501 ResourceManager&lt;br/&gt;
28572 SecondaryNameNode&lt;br/&gt;
17630 QuorumPeerMain&lt;br/&gt;
9069 TaskManager&lt;/p&gt;

&lt;p&gt;If we keep execute the start-cluster.sh, it may generate infinite TaskManagers in a single system.&lt;/p&gt;

&lt;p&gt;And the &quot;nohup&quot; command in the start-cluster.sh can generate nohup.out file that disturb any other nohup processes in the system.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12853067">FLINK-2499</key>
            <summary>start-cluster.sh can start multiple TaskManager on the same node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbalassi">M&#225;rton Balassi</assignee>
                                    <reporter username="airbots">Chen He</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2015 22:18:40 +0000</created>
                <updated>Thu, 27 Aug 2015 22:21:03 +0000</updated>
                            <resolved>Thu, 27 Aug 2015 22:21:03 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Deployment / Scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14680253" author="stephanewen" created="Mon, 10 Aug 2015 15:17:08 +0000"  >&lt;p&gt;Actually, it is intended that you are able to start multiple taskmanagers on each machine. The intended use is to put the name of a machine (or &quot;localhost&quot;) multiple times in to the &quot;slaves&quot; file.&lt;/p&gt;

&lt;p&gt;It makes testing / debugging scenarios much simpler, as you can easily start a multi-TaskManager (JVM) cluster on your single machine.&lt;/p&gt;</comment>
                            <comment id="14681438" author="mxm" created="Tue, 11 Aug 2015 08:33:55 +0000"  >&lt;p&gt;&lt;tt&gt;start-cluster.sh&lt;/tt&gt; only starts a task manager when executed more than once. We should give the user a warning that an existing cluster is still running. Currently, it says&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Starting jobmanager daemon on host dataslave.
Starting taskmanager daemon on host dataslave.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, it only starts the task manager because the new job manager fails and quits afterwards.&lt;/p&gt;</comment>
                            <comment id="14681507" author="uce" created="Tue, 11 Aug 2015 09:22:12 +0000"  >&lt;p&gt;I agree with Max. We can print a warning or fail if the user starts a cluster and a JM or TM is already running. And we can also check whether the processes started up properly before continuing.&lt;/p&gt;

&lt;p&gt;Before this was detected, because you couldn&apos;t start another TM instance etc.&lt;/p&gt;</comment>
                            <comment id="14681926" author="airbots" created="Tue, 11 Aug 2015 15:15:05 +0000"  >&lt;p&gt;+1, not only warning, we need to track each started TM so that we can stop corresponding TM when we run stop-cluster.sh.&lt;/p&gt;

&lt;p&gt;Another problem is using nohup command. Multiple TM using nohup, their output interleaving each other, it is not a good way to debug. We should redirect to TM.out instead of nohup.out. It also affect other nohup processes because they all dump stdout to nohup.out&lt;/p&gt;</comment>
                            <comment id="14716640" author="mbalassi" created="Thu, 27 Aug 2015 13:18:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=airbots&quot; class=&quot;user-hover&quot; rel=&quot;airbots&quot;&gt;airbots&lt;/a&gt; correct me if I am wrong but nohup.out is never created, because the whole command is exxecuted through `ssh -n`, so the output that would go to nohup.out actually goes to the commandline from which you invoke the start script. Having a warning when a new daemon is started at a place where others are already running would be very helpful, I am adding that. &lt;/p&gt;</comment>
                            <comment id="14716656" author="stephanewen" created="Thu, 27 Aug 2015 13:28:39 +0000"  >&lt;p&gt;The &lt;tt&gt;taskmanager.sh&lt;/tt&gt; script looks like it is intended to be invoked multiple times, even through this is probably only relevant for test setups.&lt;/p&gt;

&lt;p&gt;Should the check and warning go into the &lt;tt&gt;start-cluster.sh&lt;/tt&gt; script, rather than into the &lt;tt&gt;taskmanager.sh&lt;/tt&gt; script?&lt;/p&gt;</comment>
                            <comment id="14716659" author="mbalassi" created="Thu, 27 Aug 2015 13:31:52 +0000"  >&lt;p&gt;Good point, will act accordingly.&lt;/p&gt;</comment>
                            <comment id="14716882" author="githubbot" created="Thu, 27 Aug 2015 15:38:45 +0000"  >&lt;p&gt;GitHub user mbalassi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1071&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1071&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2499&quot; title=&quot;start-cluster.sh can start multiple TaskManager on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2499&quot;&gt;&lt;del&gt;FLINK-2499&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;scripts&amp;#93;&lt;/span&gt; Warning message for hosts starting multiple da&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;emons&lt;/p&gt;

&lt;p&gt;    As per the discussion on the relevant &lt;span class=&quot;error&quot;&gt;&amp;#91;ticket&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2499&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/FLINK-2499&lt;/a&gt;) adds a warning message.&lt;/p&gt;

&lt;p&gt;    I decided against the latest comment of @StephanEwen on the issue, because I have also run into (accidentally) trying to stack multiple JobManagers on the same machine and it is nice to have this warning even in that case. &lt;/p&gt;

&lt;p&gt;    This solution is a bit too verbose in test setups with a lot of TaskManagers on the same machine, but keeps the PID related code in the `flink-daemon.sh`.    &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mbalassi/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mbalassi/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2499&quot; title=&quot;start-cluster.sh can start multiple TaskManager on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2499&quot;&gt;&lt;del&gt;FLINK-2499&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1071.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1071.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1071&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9a44340d3638faf9da1f3ca3073a415da689e065&lt;br/&gt;
Author: mbalassi &amp;lt;mbalassi@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-08-27T15:25:01Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-2499&quot; title=&quot;start-cluster.sh can start multiple TaskManager on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-2499&quot;&gt;&lt;del&gt;FLINK-2499&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;scripts&amp;#93;&lt;/span&gt; Warning message for hosts starting multiple daemons&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14717031" author="githubbot" created="Thu, 27 Aug 2015 16:47:39 +0000"  >&lt;p&gt;Github user StephanEwen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1071#issuecomment-135489719&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1071#issuecomment-135489719&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This actually looks good.&lt;/p&gt;

&lt;p&gt;    Let&apos;s merge it and collect user feedback - whether anyone is bothered by the warnings when they start multiple TaskManager on one machine on purpose.&lt;/p&gt;</comment>
                            <comment id="14717648" author="githubbot" created="Thu, 27 Aug 2015 22:16:56 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/1071&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/1071&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14717656" author="mbalassi" created="Thu, 27 Aug 2015 22:21:03 +0000"  >&lt;p&gt;Via 91069d1f73.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ihk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>