<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:25:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4624] Gelly&apos;s summarization algorithm cannot deal with null vertex group values</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4624</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Gelly&apos;s &lt;tt&gt;Summarization&lt;/tt&gt; algorithm cannot handle null values in the `VertexGroupItem.f2`. This behaviour is hidden by using Strings as a vertex value in the &lt;tt&gt;SummarizationITCase&lt;/tt&gt;, because the &lt;tt&gt;StringSerializer&lt;/tt&gt; can handle null values. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13005219">FLINK-4624</key>
            <summary>Gelly&apos;s summarization algorithm cannot deal with null vertex group values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mju">Martin Junghanns</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Sep 2016 17:03:08 +0000</created>
                <updated>Mon, 3 Oct 2016 14:56:44 +0000</updated>
                            <resolved>Mon, 3 Oct 2016 14:56:44 +0000</resolved>
                                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Library / Graph Processing</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15502534" author="mju" created="Mon, 19 Sep 2016 07:02:44 +0000"  >&lt;p&gt;As stated on the mailing list, the problem is that the output of the &lt;tt&gt;VertexGroupReducer&lt;/tt&gt; represents two types of tuples: one for each vertex, where &lt;tt&gt;VertexGroupItem.f2 == null&lt;/tt&gt; and one for the whole group where &lt;tt&gt;VertexGroupItem.f2 == value of type VV&lt;/tt&gt;. A simple fix would be to output the value in all cases, but this increases intermediate data volume and is not necessary for the algorithm to work correctly. However, the output tuples are sent to a filter + map function after the groupreduce, so at least there would be no additional network traffic. I tested it and it fixes the issue.&lt;/p&gt;

&lt;p&gt;I also tried to use &lt;tt&gt;Either&amp;lt;NullValue, VV&amp;gt;&lt;/tt&gt; for &lt;tt&gt;f2&lt;/tt&gt;. However, I am getting exceptions from the serializer becaue Either.Right and Either.Left are not serializable. Am I understanding the either type wrong? I thought this is the purpose of that type?&lt;/p&gt;</comment>
                            <comment id="15504308" author="fhueske" created="Mon, 19 Sep 2016 18:49:18 +0000"  >&lt;p&gt;Did you try to ship &lt;tt&gt;Either&lt;/tt&gt; values as member variables of the user function? &lt;br/&gt;
User function objects are serialized on the client with Java serialization to ship them to the worker nodes. Therefore, all members must be &lt;tt&gt;Serializable&lt;/tt&gt;. &lt;br/&gt;
Maybe you can declare these fields as &lt;tt&gt;transient&lt;/tt&gt; and initialize them in the &lt;tt&gt;open()&lt;/tt&gt; method.&lt;/p&gt;</comment>
                            <comment id="15504447" author="mju" created="Mon, 19 Sep 2016 19:41:04 +0000"  >&lt;p&gt;No, I wanted to have an &lt;tt&gt;Either&amp;lt;NullValue, VV&amp;gt;&lt;/tt&gt; as field type in a tuple. I guess, I will go ahead with the first proposed method and forward the value for all tuples.&lt;/p&gt;</comment>
                            <comment id="15504498" author="fhueske" created="Mon, 19 Sep 2016 19:56:52 +0000"  >&lt;p&gt;Hmm, that sounds strange. The purpose of the &lt;tt&gt;Either&lt;/tt&gt; type are exactly use cases as yours.&lt;br/&gt;
Can you open a JIRA and describe what you did and post the error message? &lt;/p&gt;</comment>
                            <comment id="15505926" author="mju" created="Tue, 20 Sep 2016 07:48:13 +0000"  >&lt;p&gt;You were right, I had a private member in the UDF for object reuse which caused the serialization issue. The Either type now works as expected. However, since I now need to add return type information, I am running into another issue.&lt;/p&gt;

&lt;p&gt;This is how I create the type info: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TypeInformation&amp;lt;K&amp;gt; keyType = ((TupleTypeInfo&amp;lt;?&amp;gt;) input.getVertices().getType()).getTypeAt(0);
TypeInformation&amp;lt;VV&amp;gt; valueType = ((TupleTypeInfo&amp;lt;?&amp;gt;) input.getVertices().getType()).getTypeAt(1);
EitherTypeInfo&amp;lt;VV, NullValue&amp;gt; eitherType = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EitherTypeInfo&amp;lt;&amp;gt;(valueType, TypeInformation.of(NullValue.class));
TupleTypeInfo&amp;lt;VertexGroupItem&amp;lt;K, VV&amp;gt;&amp;gt; tupleTypeInfo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TupleTypeInfo&amp;lt;&amp;gt;(keyType, keyType, eitherType, BasicTypeInfo.LONG_TYPE_INFO);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(which for example leads to &quot;Java &lt;b&gt;Tuple4&lt;/b&gt;&amp;lt;Long, Long, Either &amp;lt;Long, ValueType&amp;lt;NullValue&amp;gt;&amp;gt;, Long&amp;gt;&quot; according to the debugger)&lt;/p&gt;

&lt;p&gt;The first transformation (GroupReduce) that produces these tuples returns that type. A subsequent filter transformation fails with:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;java.lang.ClassCastException: org.apache.flink.api.java.tuple.Tuple4 cannot be cast to org.apache.flink.graph.library.Summarization$VertexGroupItem&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Adding the return type info to the filter did not help. Any ideas? Thanks for your help.&lt;/p&gt;</comment>
                            <comment id="15505982" author="fhueske" created="Tue, 20 Sep 2016 08:12:58 +0000"  >&lt;p&gt;&lt;tt&gt;VertexGroupItem&lt;/tt&gt; extends &lt;tt&gt;Tuple4&amp;lt;K, K, Either&amp;lt;VGV, NullValue&amp;gt;, Long&amp;gt;&lt;/tt&gt;. &lt;br/&gt;
By providing a &lt;tt&gt;TupleTypeInfo&lt;/tt&gt;, Flink will serialize the data as a &lt;tt&gt;Tuple4&lt;/tt&gt; and also deserialize it as a &lt;tt&gt;Tuple4&lt;/tt&gt;. You cannot downcast a &lt;tt&gt;Tuple4&lt;/tt&gt; object into a &lt;tt&gt;VertexGroupItem&lt;/tt&gt; (unless it actually is a &lt;tt&gt;VertexGroupItem&lt;/tt&gt; which is not the case here).&lt;/p&gt;

&lt;p&gt;You should provide a &lt;tt&gt;TypeInformation&amp;lt;VertexGroupItem&amp;gt;&lt;/tt&gt; instead of a &lt;tt&gt;TupleTypeInfo&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15506100" author="mju" created="Tue, 20 Sep 2016 09:04:26 +0000"  >&lt;p&gt;Thanks for the explanation. As I need &lt;tt&gt;TypeInformation&amp;lt;VertexGroupItem&amp;lt;K, VV&amp;gt;&lt;/tt&gt; could you please point me to an example where type informations for generic classes are created? I am only familiar with generic tuple types as those are also used throughout Gelly and Gradoop. &lt;br/&gt;
I thought about using &lt;tt&gt;TypeExtractor.getForObject(..)&lt;/tt&gt; but then I need to create instances of the generic types, which do not necessarily have no-arg constructors.&lt;/p&gt;</comment>
                            <comment id="15506211" author="twalthr" created="Tue, 20 Sep 2016 09:51:52 +0000"  >&lt;p&gt;You can get rid of the &lt;tt&gt;ClassCastException&lt;/tt&gt; by using the correct constructor call of &lt;tt&gt;TupleTypeInfo&lt;/tt&gt;. There are two constructors one that creates plain tuples and one that allows subclasses of tuples. In your case &lt;tt&gt;VertexGroupItem&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TupleTypeInfo&amp;lt;&amp;gt;(VertexGroupItem.class, keyType, keyType, eitherType, BasicTypeInfo.LONG_TYPE_INFO)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should work.&lt;/p&gt;</comment>
                            <comment id="15506539" author="mju" created="Tue, 20 Sep 2016 13:32:46 +0000"  >&lt;p&gt;Yes, I looked into the two constructors before. The one without the class parameter just casts to &lt;tt&gt;(Class&amp;lt;T&amp;gt;)&lt;/tt&gt; and uses the other constructor. However I cannot do&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TypeInformation&amp;lt;VertexGroupItem&amp;lt;K, VV&amp;gt;&amp;gt; tupleTypeInfo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TupleTypeInfo&amp;lt;&amp;gt;(VertexGroupItem.class, keyType, keyType, eitherType, BasicTypeInfo.LONG_TYPE_INFO);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;since &lt;tt&gt;VertexGroupItem&amp;lt;K, VV&amp;gt;&lt;/tt&gt; and &lt;tt&gt;VertexGroupItem&lt;/tt&gt; are incompatible types.&lt;/p&gt;

&lt;p&gt;The two options I currently see are:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;using the simple approach sketched in my first comment&lt;/li&gt;
	&lt;li&gt;using tuple types instead of named subclasses&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15509376" author="twalthr" created="Wed, 21 Sep 2016 09:34:26 +0000"  >&lt;p&gt;&lt;tt&gt;VertexGroupItem&amp;lt;K, VV&amp;gt;&lt;/tt&gt; and &lt;tt&gt;VertexGroupItem&lt;/tt&gt; are compatible. They both have the same class. Just the generics cause problems as Java classes have no generics (because of legacy reasons). Just do a hard cast. If you look into the type extractor, you will see that we had to do this several times.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@SuppressWarnings({&lt;span class=&quot;code-quote&quot;&gt;&quot;rawtype&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;unchecked&quot;&lt;/span&gt;})
TypeInformation&amp;lt;VertexGroupItem&amp;lt;K, VV&amp;gt;&amp;gt; t = (TypeInformation&amp;lt;VertexGroupItem&amp;lt;K, VV&amp;gt;&amp;gt;) &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TupleTypeInfo(VertexGroupItem.class, keyType, keyType, eitherType, BasicTypeInfo.LONG_TYPE_INFO);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15509534" author="mju" created="Wed, 21 Sep 2016 10:40:40 +0000"  >&lt;p&gt;Thanks for the explanation, it now works as expected.&lt;/p&gt;</comment>
                            <comment id="15510069" author="githubbot" created="Wed, 21 Sep 2016 14:11:23 +0000"  >&lt;p&gt;GitHub user s1ck opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4624&quot; title=&quot;Gelly&amp;#39;s summarization algorithm cannot deal with null vertex group values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4624&quot;&gt;&lt;del&gt;FLINK-4624&lt;/del&gt;&lt;/a&gt; Allow for null values in Graph Summarization&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Bug was caused by serializers that cannot handle null values (e.g. Long)&lt;/li&gt;
	&lt;li&gt;VertexGroupItem now uses Either&amp;lt;NullValue, VV&amp;gt; instead of VV&lt;/li&gt;
	&lt;li&gt;Generalized test cases&lt;/li&gt;
	&lt;li&gt;Added tests for vertex/edge values of type Long&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/s1ck/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/s1ck/flink&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4624&quot; title=&quot;Gelly&amp;#39;s summarization algorithm cannot deal with null vertex group values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4624&quot;&gt;&lt;del&gt;FLINK-4624&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2527&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e6db894d6b84cf95206905a6f1a6713f78e32988&lt;br/&gt;
Author: Martin Junghanns &amp;lt;martin.junghanns@gmx.net&amp;gt;&lt;br/&gt;
Date:   2016-09-21T11:31:41Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4624&quot; title=&quot;Gelly&amp;#39;s summarization algorithm cannot deal with null vertex group values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4624&quot;&gt;&lt;del&gt;FLINK-4624&lt;/del&gt;&lt;/a&gt; Support null values in Graph Summarization&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Bug was caused by serializers that cannot handle null values (e.g. Long)&lt;/li&gt;
	&lt;li&gt;VertexGroupItem now uses Either&amp;lt;NullValue, VV&amp;gt; instead of VV&lt;/li&gt;
	&lt;li&gt;Generalized test cases&lt;/li&gt;
	&lt;li&gt;Added tests for vertex/edge values of type Long&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15513945" author="githubbot" created="Thu, 22 Sep 2016 17:43:50 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Would a graph translator simplify the conversion from Long to String? You can do `graph.run(new TranslateEdgeValues&amp;lt;...&amp;gt;(new StringToLong())` and write a simple `public class StringToLong implements TranslateFunction&amp;lt;String, Long&amp;gt; { ...`. Or this could be an anonymous class.&lt;/p&gt;</comment>
                            <comment id="15513996" author="githubbot" created="Thu, 22 Sep 2016 17:58:25 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;d also like to add a `ToNullValue` translator that would accept any type and convert to `NullValue`.&lt;/p&gt;</comment>
                            <comment id="15514124" author="githubbot" created="Thu, 22 Sep 2016 18:41:17 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m not following why specifying the `TypeInformation` is now required with the change to using `Either`. Is the type system failing to handle this properly?&lt;/p&gt;</comment>
                            <comment id="15514143" author="githubbot" created="Thu, 22 Sep 2016 18:47:37 +0000"  >&lt;p&gt;Github user greghogan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527#discussion_r80109825&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527#discussion_r80109825&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-gelly/src/main/java/org/apache/flink/graph/library/Summarization.java &amp;#8212;&lt;br/&gt;
    @@ -226,11 +247,15 @@ public void setGroupRepresentativeId(K groupRepresentativeId) {&lt;br/&gt;
     		}&lt;/p&gt;

&lt;p&gt;     		public VGV getVertexGroupValue() &lt;/p&gt;
{
    -			return f2;
    +			return f2.isLeft() ? f2.left() : null;
     		}

&lt;p&gt;     		public void setVertexGroupValue(VGV vertexGroupValue) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;f2 = vertexGroupValue;&lt;br/&gt;
    +			if (vertexGroupValue == null) {&lt;br/&gt;
    +				f2 = new Either.Right&amp;lt;&amp;gt;(NullValue.getInstance());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Can these objects be reused?&lt;/p&gt;</comment>
                            <comment id="15515524" author="githubbot" created="Fri, 23 Sep 2016 06:06:27 +0000"  >&lt;p&gt;Github user s1ck commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527#discussion_r80186110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527#discussion_r80186110&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-gelly/src/main/java/org/apache/flink/graph/library/Summarization.java &amp;#8212;&lt;br/&gt;
    @@ -226,11 +247,15 @@ public void setGroupRepresentativeId(K groupRepresentativeId) {&lt;br/&gt;
     		}&lt;/p&gt;

&lt;p&gt;     		public VGV getVertexGroupValue() &lt;/p&gt;
{
    -			return f2;
    +			return f2.isLeft() ? f2.left() : null;
     		}

&lt;p&gt;     		public void setVertexGroupValue(VGV vertexGroupValue) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;f2 = vertexGroupValue;&lt;br/&gt;
    +			if (vertexGroupValue == null) {&lt;br/&gt;
    +				f2 = new Either.Right&amp;lt;&amp;gt;(NullValue.getInstance());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    An instance of `VertexGroupItem` is reused in the `VertexGroupReducer`. Here the setter is implicitly only called once in the open method. So I thought reusing the new Right&amp;lt;&amp;gt;(NullValue.getInstance()) wouldn&apos;t be a benefit.&lt;/p&gt;</comment>
                            <comment id="15515537" author="githubbot" created="Fri, 23 Sep 2016 06:13:30 +0000"  >&lt;p&gt;Github user s1ck commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt; I&apos;m not following why specifying the TypeInformation is now required with the change to using Either. Is the type system failing to handle this properly?&lt;br/&gt;
    You are right, I was experimenting with return type definitions for the groupReduce and the map call. However, for the map call in `Summarization.java:126` the return type definition is required or the job fails as it cannot determine the type for `VV`.&lt;/p&gt;</comment>
                            <comment id="15515541" author="githubbot" created="Fri, 23 Sep 2016 06:14:44 +0000"  >&lt;p&gt;Github user s1ck commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt; Would a graph translator simplify the conversion from Long to String? You can do graph.run(new TranslateEdgeValues&amp;lt;...&amp;gt;(new StringToLong()) and write a simple public class StringToLong implements TranslateFunction&amp;lt;String, Long&amp;gt; { .... Or this could be an anonymous class.&lt;/p&gt;

&lt;p&gt;    I was not aware of this function / interface. I just needed it to use the same data for String and Long tests. I will update the conversion to your suggested method.&lt;/p&gt;</comment>
                            <comment id="15515544" author="githubbot" created="Fri, 23 Sep 2016 06:15:44 +0000"  >&lt;p&gt;Github user s1ck commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt; I&apos;d also like to add a ToNullValue translator that would accept any type and convert to NullValue.&lt;/p&gt;

&lt;p&gt;    I don&apos;t know if I get this right. Do you mean an additional test case with `NullValue` as vertex/edge?&lt;/p&gt;</comment>
                            <comment id="15517294" author="githubbot" created="Fri, 23 Sep 2016 19:09:27 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    `ToNullValue` is now committed in a new `translator` package in Gelly. I think that one will be generally very useful.&lt;/p&gt;

&lt;p&gt;    I created &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4673&quot; title=&quot;TypeInfoFactory for Either type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4673&quot;&gt;&lt;del&gt;FLINK-4673&lt;/del&gt;&lt;/a&gt; so we can look at fixing the type extraction with the Either type. Using the recently added `TypeInfoFactory` it was quite simple and I will create the PR after tests pass (I also removed the explicit code from `TypeExtractor`).&lt;/p&gt;</comment>
                            <comment id="15517350" author="githubbot" created="Fri, 23 Sep 2016 19:30:10 +0000"  >&lt;p&gt;Github user greghogan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527#discussion_r80311778&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527#discussion_r80311778&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-gelly/src/main/java/org/apache/flink/graph/library/Summarization.java &amp;#8212;&lt;br/&gt;
    @@ -226,11 +247,15 @@ public void setGroupRepresentativeId(K groupRepresentativeId) {&lt;br/&gt;
     		}&lt;/p&gt;

&lt;p&gt;     		public VGV getVertexGroupValue() &lt;/p&gt;
{
    -			return f2;
    +			return f2.isLeft() ? f2.left() : null;
     		}

&lt;p&gt;     		public void setVertexGroupValue(VGV vertexGroupValue) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;f2 = vertexGroupValue;&lt;br/&gt;
    +			if (vertexGroupValue == null) {&lt;br/&gt;
    +				f2 = new Either.Right&amp;lt;&amp;gt;(NullValue.getInstance());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I am tracing `VertexGroupReducer.reduce` calling `createGroupRepresentativeTuple` which calls `setVertexGroupValue` which creates a new `Either.Left` or `Either.Right`. Then `VertexGroupReducer.reduce` calls `reset` which creates a new `Either.Right`.&lt;/p&gt;</comment>
                            <comment id="15517351" author="githubbot" created="Fri, 23 Sep 2016 19:30:10 +0000"  >&lt;p&gt;Github user greghogan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527#discussion_r80309626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527#discussion_r80309626&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-libraries/flink-gelly-examples/src/test/java/org/apache/flink/graph/library/SummarizationITCase.java &amp;#8212;&lt;br/&gt;
    @@ -100,23 +102,41 @@ public void testWithVertexAndAbsentEdgeValues() throws Exception &lt;/p&gt;
{
     		validateEdges(SummarizationData.EXPECTED_EDGES_ABSENT_VALUES, summarizedEdges);
     	}

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private void validateVertices(String[] expectedVertices,&lt;/li&gt;
	&lt;li&gt;List&amp;lt;Vertex&amp;lt;Long, Summarization.VertexValue&amp;lt;String&amp;gt;&amp;gt;&amp;gt; actualVertices) {&lt;br/&gt;
    +	@Test&lt;br/&gt;
    +	public void testWithVertexAndEdgeLongValues() throws Exception {&lt;br/&gt;
    +		ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();&lt;br/&gt;
    +&lt;br/&gt;
    +		Graph&amp;lt;Long, Long, Long&amp;gt; input = Graph.fromDataSet(&lt;br/&gt;
    +				SummarizationData.getVertices(env),&lt;br/&gt;
    +				SummarizationData.getEdges(env),&lt;br/&gt;
    +				env)&lt;br/&gt;
    +			.run(new TranslateVertexValues&amp;lt;Long, String, Long, String&amp;gt;(new StringToLong()))&lt;br/&gt;
    +			.run(new TranslateEdgeValues&amp;lt;Long, Long, String, Long&amp;gt;(new StringToLong()));&lt;br/&gt;
    +&lt;br/&gt;
    +		List&amp;lt;Vertex&amp;lt;Long, Summarization.VertexValue&amp;lt;Long&amp;gt;&amp;gt;&amp;gt; summarizedVertices = Lists.newArrayList();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Can replace Guava&apos;s `Lists.newArrayList()` with `new ArrayList&amp;lt;&amp;gt;()`.&lt;/p&gt;</comment>
                            <comment id="15529234" author="githubbot" created="Wed, 28 Sep 2016 10:41:56 +0000"  >&lt;p&gt;Github user s1ck commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @greghogan since I addressed all your comments, is there anything left to do that prevents this from merging?&lt;/p&gt;</comment>
                            <comment id="15542267" author="mju" created="Mon, 3 Oct 2016 12:02:30 +0000"  >&lt;p&gt;ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=greghogan&quot; class=&quot;user-hover&quot; rel=&quot;greghogan&quot;&gt;greghogan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15542449" author="githubbot" created="Mon, 3 Oct 2016 13:41:30 +0000"  >&lt;p&gt;Github user greghogan commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Will merge today. I&apos;ll add a note that the `TypeInformation` will be removed once we resolve the issues typing `Either`.&lt;/p&gt;</comment>
                            <comment id="15542606" author="githubbot" created="Mon, 3 Oct 2016 14:56:16 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2527&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15542608" author="greghogan" created="Mon, 3 Oct 2016 14:56:44 +0000"  >&lt;p&gt;Fixed in a79efdc23e1bd35eb7cd2e5eb9551cc297c02dd5&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33odb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>