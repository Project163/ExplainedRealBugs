<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:19:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-34336] AutoRescalingITCase#testCheckpointRescalingWithKeyedAndNonPartitionedState may hang sometimes</title>
                <link>https://issues.apache.org/jira/browse/FLINK-34336</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;AutoRescalingITCase#testCheckpointRescalingWithKeyedAndNonPartitionedState may hang in&#160;waitForRunningTasks(&lt;font color=&quot;#9876aa&quot;&gt;restClusterClient&lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt;, &lt;/font&gt;jobID&lt;font color=&quot;#cc7832&quot;&gt;, &lt;/font&gt;parallelism2)&lt;font color=&quot;#cc7832&quot;&gt;;&lt;/font&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;Reason%3A&quot;&gt;&lt;/a&gt;Reason:&lt;/h2&gt;

&lt;p&gt;The job has 2 tasks(vertices), after calling updateJobResourceRequirements. The source parallelism isn&apos;t changed (It&apos;s parallelism) , and the FlatMapper+Sink is changed from&#160; parallelism to parallelism2.&lt;/p&gt;

&lt;p&gt;So we expect the task number should be parallelism + parallelism2 instead of parallelism2.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;Whyitcanbepassedfornow%3F&quot;&gt;&lt;/a&gt;Why it can be passed for now?&lt;/h2&gt;

&lt;p&gt;Flink 1.19 supports the scaling cooldown, and the cooldown time is 30s by default. It means, flink job will rescale job 30 seconds after updateJobResourceRequirements is called.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So the running tasks are old parallelism when we call waitForRunningTasks(&lt;font color=&quot;#9876aa&quot;&gt;restClusterClient&lt;/font&gt;&lt;font color=&quot;#cc7832&quot;&gt;, &lt;/font&gt;jobID&lt;font color=&quot;#cc7832&quot;&gt;, &lt;/font&gt;parallelism2)&lt;font color=&quot;#cc7832&quot;&gt;;. &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;IIUC, it cannot be guaranteed, and it&apos;s unexpected.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;Howtoreproducethisbug%3F&quot;&gt;&lt;/a&gt;How to reproduce this bug?&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/1996fanrui/flink/commit/ffd713e24d37db2c103e4cd4361d0cd916d0d2f6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/1996fanrui/flink/commit/ffd713e24d37db2c103e4cd4361d0cd916d0d2f6&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Disable the cooldown&lt;/li&gt;
	&lt;li&gt;Sleep for a while before waitForRunningTasks&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If so, the job running in new parallelism, so `waitForRunningTasks` will hang forever.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13567123">FLINK-34336</key>
            <summary>AutoRescalingITCase#testCheckpointRescalingWithKeyedAndNonPartitionedState may hang sometimes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fanrui">Rui Fan</assignee>
                                    <reporter username="fanrui">Rui Fan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Fri, 2 Feb 2024 05:00:57 +0000</created>
                <updated>Tue, 20 Feb 2024 15:00:32 +0000</updated>
                            <resolved>Tue, 20 Feb 2024 14:22:16 +0000</resolved>
                                    <version>1.19.0</version>
                    <version>1.20.0</version>
                                    <fixVersion>1.19.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17817298" author="mapohl" created="Wed, 14 Feb 2024 09:57:42 +0000"  >&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/7895502334/job/21548185872#step:10:10193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/7895502334/job/21548185872#step:10:10193&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/7895502334/job/21548208160#step:10:11190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/7895502334/job/21548208160#step:10:11190&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=57518&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=0c010d0c-3dec-5bf1-d408-7b18988b1b2b&amp;amp;l=15356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=57518&amp;amp;view=logs&amp;amp;j=39d5b1d5-3b41-54dc-6458-1e2ddd1cdcf3&amp;amp;t=0c010d0c-3dec-5bf1-d408-7b18988b1b2b&amp;amp;l=15356&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17818400" author="mapohl" created="Mon, 19 Feb 2024 09:21:49 +0000"  >&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/7938595320/job/21677775512#step:10:11191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/7938595320/job/21677775512#step:10:11191&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/flink/actions/runs/7938595320/job/21677768481#step:10:8721&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/actions/runs/7938595320/job/21677768481#step:10:8721&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17818414" author="fanrui" created="Mon, 19 Feb 2024 09:34:31 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; , thanks for your report these failed CI.&lt;/p&gt;

&lt;p&gt;What do you think about the &lt;a href=&quot;https://github.com/apache/flink/pull/24248&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fix PR&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17818429" author="mapohl" created="Mon, 19 Feb 2024 09:47:05 +0000"  >&lt;p&gt;Yes, I postponed looking into the PR. I will do it today. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17818614" author="fanrui" created="Tue, 20 Feb 2024 02:45:30 +0000"  >&lt;p&gt;Merged to&lt;/p&gt;

&lt;p&gt;master(1.20) via: e2e3de2d48e3f02b746bdbdcb4da7b0477986a11&lt;/p&gt;

&lt;p&gt;1.19 via: c91029b0456ddd7635fe0f04ad9ecb4813c5d5a3&lt;/p&gt;</comment>
                            <comment id="17818684" author="mapohl" created="Tue, 20 Feb 2024 07:41:25 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanrui&quot; class=&quot;user-hover&quot; rel=&quot;fanrui&quot;&gt;fanrui&lt;/a&gt;. Can you also create a 1.19 backport?&lt;/p&gt;

&lt;p&gt;And just as a hint: The fix version would be only 1.19.0 up to the point where the 1.19.0 release actually happened (even if the change also ended up in &lt;tt&gt;master&lt;/tt&gt;). Any change that is backported to 1.19 right now is still considered a 1.19.0 (and not a 1.20.0 fix).&lt;/p&gt;</comment>
                            <comment id="17818688" author="fanrui" created="Tue, 20 Feb 2024 07:47:30 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mapohl&quot; class=&quot;user-hover&quot; rel=&quot;mapohl&quot;&gt;mapohl&lt;/a&gt; , thanks for your reminder. I have submitted a PR to backport it to 1.19: &lt;a href=&quot;https://github.com/apache/flink/pull/24340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/24340&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please correct me if I misunderstand.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13553714">FLINK-33246</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1n614:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>