<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:58:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-20975] HiveTableSourceITCase.testPartitionFilter fails on AZP</title>
                <link>https://issues.apache.org/jira/browse/FLINK-20975</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;The test &lt;tt&gt;HiveTableSourceITCase.testPartitionFilter&lt;/tt&gt; fails on AZP with the following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError
	at org.junit.Assert.fail(Assert.java:86)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertFalse(Assert.java:64)
	at org.junit.Assert.assertFalse(Assert.java:74)
	at org.apache.flink.connectors.hive.HiveTableSourceITCase.testPartitionFilter(HiveTableSourceITCase.java:278)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13352227">FLINK-20975</key>
            <summary>HiveTableSourceITCase.testPartitionFilter fails on AZP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                            <label>auto-deprioritized-critical</label>
                            <label>auto-unassigned</label>
                            <label>pull-request-available</label>
                            <label>stale-assigned</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 14 Jan 2021 10:41:13 +0000</created>
                <updated>Wed, 25 Jan 2023 08:53:33 +0000</updated>
                            <resolved>Wed, 25 Jan 2023 08:53:33 +0000</resolved>
                                    <version>1.13.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                    <fixVersion>1.13.7</fixVersion>
                                    <component>Connectors / Hive</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17350871" author="rmetzger" created="Tue, 25 May 2021 07:35:22 +0000"  >&lt;p&gt;I reopened this issue, because it reappeared in the 1.13 branch &lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18294&amp;amp;view=logs&amp;amp;j=245e1f2e-ba5b-5570-d689-25ae21e5302f&amp;amp;t=e7f339b2-a7c3-57d9-00af-3712d4b15354&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=18294&amp;amp;view=logs&amp;amp;j=245e1f2e-ba5b-5570-d689-25ae21e5302f&amp;amp;t=e7f339b2-a7c3-57d9-00af-3712d4b15354&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17359603" author="flink-jira-bot" created="Tue, 8 Jun 2021 22:42:16 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issue is assigned but has not received an update in 14, so it has been labeled &quot;stale-assigned&quot;.&lt;br/&gt;
If you are still working on the issue, please remove the label and add a comment updating the community on your progress.  If this issue is waiting on feedback, please consider this a reminder to the committer/reviewer. Flink is a very active project, and so we appreciate your patience.&lt;br/&gt;
If you are no longer working on the issue, please unassign yourself so someone else may work on it. If the &quot;warning_label&quot; label is not removed in 7 days, the issue will be automatically unassigned.&lt;/p&gt;</comment>
                            <comment id="17364546" author="flink-jira-bot" created="Wed, 16 Jun 2021 22:39:22 +0000"  >&lt;p&gt;This issue was marked &quot;stale-assigned&quot; 7 ago and has not received an update. I have automatically removed the current assignee from the issue so others in the community may pick it up. If you are still working on this ticket, please ask a committer to reassign you and provide an update about your current status.&lt;/p&gt;</comment>
                            <comment id="17369133" author="flink-jira-bot" created="Thu, 24 Jun 2021 22:38:53 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issues has been marked as Critical but is unassigned and neither itself nor its Sub-Tasks have been updated for 7 days. I have gone ahead and marked it &quot;stale-critical&quot;. If this ticket is critical, please either assign yourself or give an update. Afterwards, please remove the label or in 7 days the issue will be deprioritized.&lt;/p&gt;</comment>
                            <comment id="17373833" author="flink-jira-bot" created="Fri, 2 Jul 2021 22:40:26 +0000"  >&lt;p&gt;This issue was labeled &quot;stale-critical&quot; 7 days ago and has not received any updates so it is being deprioritized. If this ticket is actually Critical, please raise the priority and ask a committer to assign you the issue or revive the public discussion.&lt;/p&gt;</comment>
                            <comment id="17378838" author="xintongsong" created="Mon, 12 Jul 2021 02:04:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=20256&amp;amp;view=logs&amp;amp;j=245e1f2e-ba5b-5570-d689-25ae21e5302f&amp;amp;t=e7f339b2-a7c3-57d9-00af-3712d4b15354&amp;amp;l=23014&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/apache-flink/apache-flink/_build/results?buildId=20256&amp;amp;view=logs&amp;amp;j=245e1f2e-ba5b-5570-d689-25ae21e5302f&amp;amp;t=e7f339b2-a7c3-57d9-00af-3712d4b15354&amp;amp;l=23014&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17378840" author="xintongsong" created="Mon, 12 Jul 2021 02:09:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lirui&quot; class=&quot;user-hover&quot; rel=&quot;lirui&quot;&gt;lirui&lt;/a&gt;, could you please help take a look at this?&lt;/p&gt;</comment>
                            <comment id="17378892" author="lirui" created="Mon, 12 Jul 2021 03:50:54 +0000"  >&lt;p&gt;Sure I&apos;ll look into this.&lt;/p&gt;</comment>
                            <comment id="17379174" author="lirui" created="Mon, 12 Jul 2021 12:59:13 +0000"  >&lt;p&gt;I tried the test locally dozens of times but didn&apos;t reproduce it. According to test logs, the test failed because of:&lt;br/&gt;
1. Direct SQL failed due to:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: org.apache.derby.iapi.error.StandardException: Invalid character string format for type DECIMAL.
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.apache.derby.iapi.types.DataType.invalidFormat(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.apache.derby.iapi.types.DataType.setValue(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.apache.derby.exe.ac1d3a42f2x017ax8d9bxd637x0000338c7ac889.e4(Unknown Source) ~[?:?]
	at org.apache.derby.impl.services.reflect.DirectCall.invoke(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.apache.derby.impl.sql.execute.NestedLoopJoinResultSet.getNextRowCore(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.getNextRow(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.apache.derby.impl.jdbc.EmbedResultSet.movePosition(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.apache.derby.impl.jdbc.EmbedResultSet.next(Unknown Source) ~[derby-10.10.2.0.jar:?]
	at org.datanucleus.store.rdbms.query.ForwardQueryResult.initialise(ForwardQueryResult.java:99) ~[datanucleus-rdbms-4.1.19.jar:?]
	at org.datanucleus.store.rdbms.query.SQLQuery.performExecute(SQLQuery.java:676) ~[datanucleus-rdbms-4.1.19.jar:?]
	at org.datanucleus.store.query.Query.executeQuery(Query.java:1855) ~[datanucleus-core-4.1.17.jar:?]
	at org.datanucleus.store.rdbms.query.SQLQuery.executeWithArray(SQLQuery.java:807) ~[datanucleus-rdbms-4.1.19.jar:?]
	at org.datanucleus.api.jdo.JDOQuery.executeInternal(JDOQuery.java:368) ~[datanucleus-api-jdo-4.2.4.jar:?]
	... 121 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Since the partition column type is INT and should be safe to cast to decimal, this might be a derby bug.&lt;br/&gt;
2. Then hive tried to fallback to JDO method to pushdown the filter. But failed again because by default &quot;Filtering is supported only on partition keys of type string&quot;.&lt;br/&gt;
3. Finally the pushdown is aborted and we fallback to listing all partitions in metastore, and thus the test failure.&lt;/p&gt;

&lt;p&gt;I guess we can enable filter pushdown on integral partition column types so that we&apos;ll have a 2nd chance in step #2&lt;/p&gt;</comment>
                            <comment id="17383347" author="lirui" created="Mon, 19 Jul 2021 13:45:02 +0000"  >&lt;p&gt;Pushed a fix to:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;master: a846a4856549a0992f2172fec9d1c3abe2d46215&lt;/li&gt;
	&lt;li&gt;release-1.13: a6b823498aa77e3de5ff34e191e3a2e3d42f3620&lt;/li&gt;
	&lt;li&gt;release-1.12: da62d0dcd12e915507b783a94a177907d441c761&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Let&apos;s keep this open for a while.&lt;/p&gt;</comment>
                            <comment id="17410051" author="flink-jira-bot" created="Sat, 4 Sep 2021 22:37:20 +0000"  >&lt;p&gt;I am the &lt;a href=&quot;https://github.com/apache/flink-jira-bot/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Flink Jira Bot&lt;/a&gt; and I help the community manage its development. I see this issue is assigned but has not received an update in 30 days, so it has been labeled &quot;stale-assigned&quot;.&lt;br/&gt;
If you are still working on the issue, please remove the label and add a comment updating the community on your progress.  If this issue is waiting on feedback, please consider this a reminder to the committer/reviewer. Flink is a very active project, and so we appreciate your patience.&lt;br/&gt;
If you are no longer working on the issue, please unassign yourself so someone else may work on it.&lt;/p&gt;</comment>
                            <comment id="17680504" author="mapohl" created="Wed, 25 Jan 2023 08:53:33 +0000"  >&lt;p&gt;I&apos;m closing this issue because it hasn&apos;t appeared for a while. We experienced a failure of the same test but with a different stacktrace. I created &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-30784&quot; title=&quot;HiveTableSourceITCase.testPartitionFilter  failed with assertion error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-30784&quot;&gt;FLINK-30784&lt;/a&gt; as a new issue covering that.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13521235">FLINK-30784</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mkyw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>