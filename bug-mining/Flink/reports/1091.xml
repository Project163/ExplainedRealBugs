<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 20:24:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-4184] Ganglia and GraphiteReporter report metric names with invalid characters</title>
                <link>https://issues.apache.org/jira/browse/FLINK-4184</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;p&gt;Flink&apos;s &lt;tt&gt;GangliaReporter&lt;/tt&gt; and &lt;tt&gt;GraphiteReporter&lt;/tt&gt; report metrics with names which contain invalid characters. For example, quotes are not filtered out which can be problematic for Ganglia. Moreover, dots are not replaced which causes Graphite to think that an IP address is actually a scoped metric name.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12987810">FLINK-4184</key>
            <summary>Ganglia and GraphiteReporter report metric names with invalid characters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohrmann">Till Rohrmann</assignee>
                                    <reporter username="trohrmann">Till Rohrmann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jul 2016 14:41:27 +0000</created>
                <updated>Fri, 15 Jul 2016 14:24:58 +0000</updated>
                            <resolved>Fri, 15 Jul 2016 14:07:34 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Runtime / Metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15367779" author="githubbot" created="Fri, 8 Jul 2016 14:54:18 +0000"  >&lt;p&gt;GitHub user tillrohrmann opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4184&quot; title=&quot;Ganglia and GraphiteReporter report metric names with invalid characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4184&quot;&gt;&lt;del&gt;FLINK-4184&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;metrics&amp;#93;&lt;/span&gt; Replace invalid characters in ScheduledDropwizardReporter&lt;/p&gt;

&lt;p&gt;    The GraphiteReporter and GangliaReporter report metric names which can contain invalid&lt;br/&gt;
    characters. These characters include quotes and dots. In order to properly report metrics&lt;br/&gt;
    to these systems, the afore-mentioned characters have to be replaced in metric names.&lt;/p&gt;

&lt;p&gt;    The PR also removes quotes from the garbage collector metric name.&lt;/p&gt;

&lt;p&gt;    The PR sets the default value for TTL in the GangliaReporter to 1, because -1 causes the&lt;br/&gt;
    reporter to fail.&lt;/p&gt;

&lt;p&gt;    R @zentol.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tillrohrmann/flink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tillrohrmann/flink&lt;/a&gt; fixDropwizardReporters&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2220&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d63911499aef10f54d7c4c0774f4f22a520bcc66&lt;br/&gt;
Author: Till Rohrmann &amp;lt;trohrmann@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-07-08T14:41:39Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/FLINK-4184&quot; title=&quot;Ganglia and GraphiteReporter report metric names with invalid characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FLINK-4184&quot;&gt;&lt;del&gt;FLINK-4184&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;metrics&amp;#93;&lt;/span&gt; Replace invalid characters in ScheduledDropwizardReporter&lt;/p&gt;

&lt;p&gt;    The GraphiteReporter and GangliaReporter report metric names which can contain invalid&lt;br/&gt;
    characters. These characters include quotes and dots. In order to properly report metrics&lt;br/&gt;
    to these systems, the afore-mentioned characters have to be replaced in metric names.&lt;/p&gt;

&lt;p&gt;    The PR also removes quotes from the garbage collector metric name.&lt;/p&gt;

&lt;p&gt;    The PR sets the default value for TTL in the GangliaReporter to 1, because -1 causes the&lt;br/&gt;
    reporter to fail.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15367842" author="githubbot" created="Fri, 8 Jul 2016 15:48:22 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220#discussion_r70095846&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220#discussion_r70095846&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/metrics/reporter/AbstractReporter.java &amp;#8212;&lt;br/&gt;
    @@ -84,4 +84,24 @@ public void notifyOfRemovedMetric(Metric metric, String metricName, AbstractMetr&lt;br/&gt;
     	protected String replaceInvalidChars(String metricName) &lt;/p&gt;
{
     		return metricName;
     	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Method which constructs the fully qualified metric name from the metric group and the metric&lt;br/&gt;
    +	 * name.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param metricName Name of the metric&lt;br/&gt;
    +	 * @param group Associated metric group&lt;br/&gt;
    +	 * @return Fully qualified metric name&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private String constructMetricName(String metricName, AbstractMetricGroup group) {&lt;br/&gt;
    +		StringBuilder builder = new StringBuilder();&lt;br/&gt;
    +&lt;br/&gt;
    +		for (String componentName : group.getScopeComponents()) &lt;/p&gt;
{
    +			builder.append(replaceInvalidChars(componentName)).append(&quot;.&quot;);
    +		}
&lt;p&gt;    +&lt;br/&gt;
    +		builder.append(replaceInvalidChars(metricName));&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    the call to replaceInvalidChars is not required; metric names can only contain alphanumeric characters. I don&apos;t think any reporter will not support these.&lt;/p&gt;</comment>
                            <comment id="15367871" author="githubbot" created="Fri, 8 Jul 2016 15:56:48 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220#discussion_r70097230&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220#discussion_r70097230&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/metrics/reporter/AbstractReporter.java &amp;#8212;&lt;br/&gt;
    @@ -84,4 +84,24 @@ public void notifyOfRemovedMetric(Metric metric, String metricName, AbstractMetr&lt;br/&gt;
     	protected String replaceInvalidChars(String metricName) &lt;/p&gt;
{
     		return metricName;
     	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Method which constructs the fully qualified metric name from the metric group and the metric&lt;br/&gt;
    +	 * name.&lt;br/&gt;
    +	 *&lt;br/&gt;
    +	 * @param metricName Name of the metric&lt;br/&gt;
    +	 * @param group Associated metric group&lt;br/&gt;
    +	 * @return Fully qualified metric name&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	private String constructMetricName(String metricName, AbstractMetricGroup group) {&lt;br/&gt;
    +		StringBuilder builder = new StringBuilder();&lt;br/&gt;
    +&lt;br/&gt;
    +		for (String componentName : group.getScopeComponents()) {&lt;br/&gt;
    +			builder.append(replaceInvalidChars(componentName)).append(&quot;.&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    this is a bit inefficient. The output of this loop is identical for all metrics on that group, yet is computed for every single metric. Instead you could modify the getScopeString() method to accept a charFilter argument that is passed into ScopeFormat.concat().&lt;/p&gt;</comment>
                            <comment id="15367882" author="githubbot" created="Fri, 8 Jul 2016 16:01:10 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This PR will heavily conflict with #2219, in their current state we can&apos;t merge one without blocking the other.&lt;/p&gt;</comment>
                            <comment id="15374763" author="githubbot" created="Wed, 13 Jul 2016 10:02:37 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    True, it conflicts with your proposed changes for the definable metric group delimiter. I will rebase and adapt this PR wrt #2219.&lt;/p&gt;</comment>
                            <comment id="15375162" author="githubbot" created="Wed, 13 Jul 2016 14:57:46 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I rebased on the latest master and introduced a `CharacterFilter` interface. The `CharacterFilter` allows to filter out invalid characters while generating the fully qualified metric name. &lt;/p&gt;

&lt;p&gt;    In order to do this, the `AbstractMetricGroup#generateMetricName` takes a `CharacterFilter` as argument. The `AbstractReporter` and the `ScheduledDropwizardReporter` implement this interface to filter out reporter specific characters.&lt;/p&gt;</comment>
                            <comment id="15376580" author="githubbot" created="Thu, 14 Jul 2016 08:38:39 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220#discussion_r70768940&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220#discussion_r70768940&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -100,10 +101,29 @@ public AbstractMetricGroup(MetricRegistry registry, String[] scope) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
          */&lt;br/&gt;
     	public String getMetricIdentifier(String metricName) 
{
    +		return getMetricIdentifier(metricName, null);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name, for example&lt;br/&gt;
    +	 * &lt;/p&gt;
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the fully qualified metric name&lt;br/&gt;
    +	 * @return fully qualified metric name&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public String getMetricIdentifier(String metricName, CharacterFilter filter) {&lt;br/&gt;
     		if (scopeString == null) {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);&lt;br/&gt;
    +			if (filter != null) {&lt;br/&gt;
    +				scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    if no filter is given we will now never assign to scopeString, breaking all names. We should assume that no filtering is required.&lt;/p&gt;</comment>
                            <comment id="15376589" author="githubbot" created="Thu, 14 Jul 2016 08:46:07 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    do we have a test that verifies that reporters properly pass their filter when notified of new metrics?&lt;/p&gt;</comment>
                            <comment id="15376591" author="githubbot" created="Thu, 14 Jul 2016 08:47:03 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220#discussion_r70770115&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220#discussion_r70770115&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -100,10 +101,29 @@ public AbstractMetricGroup(MetricRegistry registry, String[] scope) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
          */&lt;br/&gt;
     	public String getMetricIdentifier(String metricName) 
{
    +		return getMetricIdentifier(metricName, null);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name, for example&lt;br/&gt;
    +	 * &lt;/p&gt;
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the fully qualified metric name&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    this is misleading; it is not applied to the fully qualified name (as delimiter&apos;s are not filtered)&lt;/p&gt;</comment>
                            <comment id="15376672" author="githubbot" created="Thu, 14 Jul 2016 09:41:58 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220#discussion_r70777251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220#discussion_r70777251&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -100,10 +101,29 @@ public AbstractMetricGroup(MetricRegistry registry, String[] scope) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
          */&lt;br/&gt;
     	public String getMetricIdentifier(String metricName) 
{
    +		return getMetricIdentifier(metricName, null);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name, for example&lt;br/&gt;
    +	 * &lt;/p&gt;
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the fully qualified metric name&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Will adapt the comment&lt;/p&gt;</comment>
                            <comment id="15376677" author="githubbot" created="Thu, 14 Jul 2016 09:43:06 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220#discussion_r70777393&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220#discussion_r70777393&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-core/src/main/java/org/apache/flink/metrics/groups/AbstractMetricGroup.java &amp;#8212;&lt;br/&gt;
    @@ -100,10 +101,29 @@ public AbstractMetricGroup(MetricRegistry registry, String[] scope) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@return fully qualified metric name&lt;br/&gt;
          */&lt;br/&gt;
     	public String getMetricIdentifier(String metricName) 
{
    +		return getMetricIdentifier(metricName, null);
    +	}
&lt;p&gt;    +&lt;br/&gt;
    +	/**&lt;br/&gt;
    +	 * Returns the fully qualified metric name, for example&lt;br/&gt;
    +	 * &lt;/p&gt;
{@code &quot;host-7.taskmanager-2.window_word_count.my-mapper.metricName&quot;}
&lt;p&gt;    +	 *&lt;br/&gt;
    +	 * @param metricName metric name&lt;br/&gt;
    +	 * @param filter character filter which is applied to the fully qualified metric name&lt;br/&gt;
    +	 * @return fully qualified metric name&lt;br/&gt;
    +	 */&lt;br/&gt;
    +	public String getMetricIdentifier(String metricName, CharacterFilter filter) {&lt;br/&gt;
     		if (scopeString == null) {&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);&lt;br/&gt;
    +			if (filter != null) {&lt;br/&gt;
    +				scopeString = ScopeFormat.concat(registry.getDelimiter(), scopeComponents);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    True, this is wrong. Fill fix it.&lt;/p&gt;</comment>
                            <comment id="15376824" author="githubbot" created="Thu, 14 Jul 2016 12:27:59 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @zentol. I&apos;ve addressed your comments and added test cases which verify that the corresponding `MetricReporters` filter out invalid characters in the fully qualified metric name.&lt;/p&gt;</comment>
                            <comment id="15377304" author="githubbot" created="Thu, 14 Jul 2016 17:17:09 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220#discussion_r70845241&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220#discussion_r70845241&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-metrics/flink-metrics-dropwizard/src/main/java/org/apache/flink/dropwizard/ScheduledDropwizardReporter.java &amp;#8212;&lt;br/&gt;
    @@ -74,6 +75,15 @@ protected ScheduledDropwizardReporter() {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	// ------------------------------------------------------------------------&lt;br/&gt;
    +	//  Getters&lt;br/&gt;
    +	// ------------------------------------------------------------------------&lt;br/&gt;
    +&lt;br/&gt;
    +	// used for testing purposes&lt;br/&gt;
    +	Map&amp;lt;Counter, String&amp;gt; getCounters() {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    could we move this into the TestingScheduledDropwizardReporter?&lt;/p&gt;</comment>
                            <comment id="15377314" author="githubbot" created="Thu, 14 Jul 2016 17:19:12 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    only one comment left, otherwise +1&lt;/p&gt;</comment>
                            <comment id="15379407" author="githubbot" created="Fri, 15 Jul 2016 14:02:19 +0000"  >&lt;p&gt;Github user tillrohrmann commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220#discussion_r70977551&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220#discussion_r70977551&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-metrics/flink-metrics-dropwizard/src/main/java/org/apache/flink/dropwizard/ScheduledDropwizardReporter.java &amp;#8212;&lt;br/&gt;
    @@ -74,6 +75,15 @@ protected ScheduledDropwizardReporter() {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	// ------------------------------------------------------------------------&lt;br/&gt;
    +	//  Getters&lt;br/&gt;
    +	// ------------------------------------------------------------------------&lt;br/&gt;
    +&lt;br/&gt;
    +	// used for testing purposes&lt;br/&gt;
    +	Map&amp;lt;Counter, String&amp;gt; getCounters() {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    We can, if we mark the counters, gauges and histograms fields as protected. But then we would expose the implementation details to all sub-classes instead of having a getter which is package private. I think the latter option is a bit nicer, because it hides the implementation details.&lt;/p&gt;</comment>
                            <comment id="15379409" author="githubbot" created="Fri, 15 Jul 2016 14:03:16 +0000"  >&lt;p&gt;Github user tillrohrmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the review @zentol. Will be merging this PR then.&lt;/p&gt;</comment>
                            <comment id="15379416" author="githubbot" created="Fri, 15 Jul 2016 14:07:16 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15379417" author="till.rohrmann" created="Fri, 15 Jul 2016 14:07:34 +0000"  >&lt;p&gt;Fixed via 70094a1818b532f4e0ff31f5debc550ed4336286&lt;/p&gt;</comment>
                            <comment id="15379445" author="githubbot" created="Fri, 15 Jul 2016 14:14:12 +0000"  >&lt;p&gt;Github user zentol commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220#discussion_r70979472&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220#discussion_r70979472&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: flink-metrics/flink-metrics-dropwizard/src/main/java/org/apache/flink/dropwizard/ScheduledDropwizardReporter.java &amp;#8212;&lt;br/&gt;
    @@ -74,6 +75,15 @@ protected ScheduledDropwizardReporter() {&lt;br/&gt;
     	}&lt;/p&gt;

&lt;p&gt;     	// ------------------------------------------------------------------------&lt;br/&gt;
    +	//  Getters&lt;br/&gt;
    +	// ------------------------------------------------------------------------&lt;br/&gt;
    +&lt;br/&gt;
    +	// used for testing purposes&lt;br/&gt;
    +	Map&amp;lt;Counter, String&amp;gt; getCounters() {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    You could also access the protected registry and get the counters from there.&lt;/p&gt;

&lt;p&gt;    We may not even need the gauges/counters/histograms fields in the ScheduledDropwizardReporter.&lt;/p&gt;</comment>
                            <comment id="15379459" author="githubbot" created="Fri, 15 Jul 2016 14:24:58 +0000"  >&lt;p&gt;Github user zentol commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/flink/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/flink/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I would appreciate it if you would give me time to answer to your response before going ahead with a merge.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30phj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>