<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 21:09:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[FLINK-26233] FileSinkCompactionSwitchITCase.testSwitchingCompaction() fails in CI</title>
                <link>https://issues.apache.org/jira/browse/FLINK-26233</link>
                <project id="12315522" key="FLINK">Flink</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2022-02-17T20:13:20.2895110Z Feb 17 20:13:20 [INFO] Running org.apache.flink.connector.file.sink.writer.FileSinkMigrationITCase
2022-02-17T20:13:40.2160260Z Feb 17 20:13:40 [INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 19.905 s - in org.apache.flink.connector.file.sink.writer.FileSinkMigrationITCase
2022-02-17T20:13:58.8860609Z Feb 17 20:13:58 [ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 102.488 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.flink.connector.file.sink.FileSinkCompactionSwitchITCase
2022-02-17T20:13:58.8864562Z Feb 17 20:13:58 [ERROR] FileSinkCompactionSwitchITCase.testSwitchingCompaction &#160;Time elapsed: 37.28 s &#160;&amp;lt;&amp;lt;&amp;lt; ERROR!
2022-02-17T20:13:58.8865526Z Feb 17 20:13:58 org.apache.flink.runtime.client.JobExecutionException: Job execution failed.
2022-02-17T20:13:58.8866319Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.runtime.jobmaster.JobResult.toJobExecutionResult(JobResult.java:144)
2022-02-17T20:13:58.8867102Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.runtime.minicluster.MiniCluster.executeJobBlocking(MiniCluster.java:934)
2022-02-17T20:13:58.8867985Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.connector.file.sink.FileSinkCompactionSwitchITCase.testSwitchingCompaction(FileSinkCompactionSwitchITCase.java:175)
[...]
2022-02-17T20:13:58.8919634Z Feb 17 20:13:58 Caused by: org.apache.flink.runtime.JobException: Recovery is suppressed by NoRestartBackoffTimeStrategy
[...]
2022-02-17T20:13:58.8939468Z Feb 17 20:13:58 Caused by: org.apache.flink.util.FlinkRuntimeException: Exceeded checkpoint tolerable failure threshold.
2022-02-17T20:13:58.8940119Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.runtime.checkpoint.CheckpointFailureManager.checkFailureAgainstCounter(CheckpointFailureManager.java:160)
2022-02-17T20:13:58.8940863Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.runtime.checkpoint.CheckpointFailureManager.handleTaskLevelCheckpointException(CheckpointFailureManager.java:145)
2022-02-17T20:13:58.8941613Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.runtime.checkpoint.CheckpointFailureManager.handleCheckpointException(CheckpointFailureManager.java:97)
2022-02-17T20:13:58.8942321Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.runtime.checkpoint.CheckpointCoordinator.abortPendingCheckpoint(CheckpointCoordinator.java:2046)
2022-02-17T20:13:58.8943011Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.runtime.checkpoint.CheckpointCoordinator.receiveDeclineMessage(CheckpointCoordinator.java:1040)
2022-02-17T20:13:58.8943830Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.runtime.scheduler.ExecutionGraphHandler.lambda$declineCheckpoint$2(ExecutionGraphHandler.java:103)
2022-02-17T20:13:58.8944567Z Feb 17 20:13:58 &#160; &#160; at org.apache.flink.runtime.scheduler.ExecutionGraphHandler.lambda$processCheckpointCoordinatorMessage$3(ExecutionGraphHandler.java:119)
2022-02-17T20:13:58.8945240Z Feb 17 20:13:58 &#160; &#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
2022-02-17T20:13:58.8945794Z Feb 17 20:13:58 &#160; &#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
2022-02-17T20:13:58.8946276Z Feb 17 20:13:58 &#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)&#160; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://dev.azure.com/alexanderfedulov/Flink/_build/results?buildId=37&amp;amp;view=logs&amp;amp;j=dafbab6d-4616-5d7b-ee37-3c54e4828fd7&amp;amp;t=e204f081-e6cd-5c04-4f4c-919639b63be9&amp;amp;l=11112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dev.azure.com/alexanderfedulov/Flink/_build/results?buildId=37&amp;amp;view=logs&amp;amp;j=dafbab6d-4616-5d7b-ee37-3c54e4828fd7&amp;amp;t=e204f081-e6cd-5c04-4f4c-919639b63be9&amp;amp;l=11112&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13429209">FLINK-26233</key>
            <summary>FileSinkCompactionSwitchITCase.testSwitchingCompaction() fails in CI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pltbkd">Gen Luo</assignee>
                                    <reporter username="afedulov">Alexander Fedulov</reporter>
                        <labels>
                            <label>pull-request-available</label>
                            <label>test-stability</label>
                    </labels>
                <created>Thu, 17 Feb 2022 21:16:56 +0000</created>
                <updated>Mon, 21 Feb 2022 02:46:11 +0000</updated>
                            <resolved>Mon, 21 Feb 2022 02:46:11 +0000</resolved>
                                    <version>1.15.0</version>
                                    <fixVersion>1.15.0</fixVersion>
                                    <component>Connectors / FileSystem</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17494239" author="afedulov" created="Thu, 17 Feb 2022 21:17:52 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaoyunhaii&quot; class=&quot;user-hover&quot; rel=&quot;gaoyunhaii&quot;&gt;gaoyunhaii&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pltbkd&quot; class=&quot;user-hover&quot; rel=&quot;pltbkd&quot;&gt;pltbkd&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17494360" author="gaoyunhaii" created="Fri, 18 Feb 2022 04:17:46 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=afedulov&quot; class=&quot;user-hover&quot; rel=&quot;afedulov&quot;&gt;afedulov&lt;/a&gt; for the report! We&apos;ll have a look as soon as possible~&lt;/p&gt;</comment>
                            <comment id="17494456" author="pltbkd" created="Fri, 18 Feb 2022 08:20:36 +0000"  >&lt;p&gt;This is because when the compaction is switch from on to off, the pending files remained in the compactor state will be flushed to the committer at the first checkpoint after restarting. So the state of the committer can be larger than the stable status, which in this test case is more than 5MB.&lt;/p&gt;

&lt;p&gt;I have created a pr to fix this by reducing the speed of the source and using the FileSystemCheckpointStorage.&lt;/p&gt;</comment>
                            <comment id="17495289" author="gaoyunhaii" created="Mon, 21 Feb 2022 02:45:56 +0000"  >&lt;p&gt;Fix on master via&#160;8af24957d2ffae10b65e1f34a5d23ae1a06db26d.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0zp9c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>